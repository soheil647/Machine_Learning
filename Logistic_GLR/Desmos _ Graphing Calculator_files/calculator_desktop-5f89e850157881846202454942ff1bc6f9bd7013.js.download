var requirejs,require,define;!function(p){var o,u,a,d,g={},q={},O={},h={},n=Object.prototype.hasOwnProperty,i=[].slice;function E(e,r){return n.call(e,r)}function f(e,r){var n,i,t,o,u,f,c,l,s,p,a=r&&r.split("/"),d=O.map,g=d&&d["*"]||{};if(e&&"."===e.charAt(0))if(r){for(e=(a=a.slice(0,a.length-1)).concat(e.split("/")),l=0;l<e.length;l+=1)if("."===(p=e[l]))e.splice(l,1),--l;else if(".."===p){if(1===l&&(".."===e[2]||".."===e[0]))break;0<l&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((a||g)&&d){for(l=(n=e.split("/")).length;0<l;--l){if(i=n.slice(0,l).join("/"),a)for(s=a.length;0<s;--s)if(t=(t=d[a.slice(0,s).join("/")])&&t[i]){o=t,u=l;break}if(o)break;!f&&g&&g[i]&&(f=g[i],c=l)}!o&&f&&(o=f,u=c),o&&(n.splice(0,u,o),e=n.join("/"))}return e}function j(e,r){return function(){return u.apply(p,i.call(arguments,0).concat([e,r]))}}function m(e){var r;if(E(q,e)&&(r=q[e],delete q[e],h[e]=!0,o.apply(p,r)),!E(g,e)&&!E(h,e))throw new Error("No "+e);return g[e]}function c(e){var r,n=e?e.indexOf("!"):-1;return-1<n&&(r=e.substring(0,n),e=e.substring(n+1,e.length)),[r,e]}a=function(e,r){var n,i,t=c(e),o=t[0];return e=t[1],o&&(n=m(o=f(o,r))),o?e=n&&n.normalize?n.normalize(e,(i=r,function(e){return f(e,i)})):f(e,r):(o=(t=c(e=f(e,r)))[0],e=t[1],o&&(n=m(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},d={require:function(e){return j(e)},exports:function(e){var r=g[e];return void 0!==r?r:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:(r=e,function(){return O&&O.config&&O.config[r]||{}})};var r}},o=function(e,r,n,i){var t,o,u,f,c,l,s=[];if(i=i||e,"function"==typeof n){for(r=!r.length&&n.length?["require","exports","module"]:r,c=0;c<r.length;c+=1)if("require"===(o=(f=a(r[c],i)).f))s[c]=d.require(e);else if("exports"===o)s[c]=d.exports(e),l=!0;else if("module"===o)t=s[c]=d.module(e);else if(E(g,o)||E(q,o)||E(h,o))s[c]=m(o);else{if(!f.p)throw new Error(e+" missing "+o);f.p.load(f.n,j(i,!0),function(r){return function(e){g[r]=e}}(o),{}),s[c]=g[o]}u=n.apply(g[e],s),e&&(t&&t.exports!==p&&t.exports!==g[e]?g[e]=t.exports:u===p&&l||(g[e]=u))}else e&&(g[e]=n)},requirejs=require=u=function(e,r,n,i,t){return"string"==typeof e?d[e]?d[e](r):m(a(e,r).f):(e.splice||(O=e,r.splice?(e=r,r=n,n=null):e=p),r=r||function(){},"function"==typeof n&&(n=i,i=t),i?o(p,e,r,n):setTimeout(function(){o(p,e,r,n)},4),u)},u.config=function(e){return(O=e).deps&&u(O.deps,O.callback),u},(define=function(e,r,n){r.splice||(n=r,r=[]),E(g,e)||E(q,e)||(q[e]=[e,r,n])}).amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs);
define("core/vendor/almond", function(){});

define('testbridge',['require'],function(require){var n={ready:function(){try{window.TestBridge=n,parent.USING_SELENIUM&&function(){window.consoleOverride=!0;var e=window.console.log;window.console.log=function(){for(var n=[],o=0;o<arguments.length;o++)n.push(arguments[o]);e.apply(window.console,[].concat([n.join(" ")],n))}}()}catch(n){}}};return n});
define('ipad.ghostevents',['require'],function(require){var t=!1,n=null;function o(e){t&&u.evtInScope(e)&&(e.stopPropagation(),e.stopImmediatePropagation())}function c(e){t&&u.evtInScope(e)&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation())}var u={isGhostEvent:function(e){return!1},evtInScope:function(e){return!1}};return document.addEventListener("mousedown",function(e){u.evtInScope(e)&&(n=document.activeElement,t=u.isGhostEvent(e),o(e))},!0),document.addEventListener("mouseup",o,!0),document.addEventListener("click",function(e){c(e),t&&document.activeElement!==n&&(document.activeElement&&document.activeElement.blur(),n&&n.focus()),t=!1},!0),document.addEventListener("focus",c,!0),document.addEventListener("blur",c,!0),u});
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){function t(e,t){return t.toUpperCase()}var n=[],k=C.document,c=n.slice,g=n.concat,a=n.push,i=n.indexOf,r={},o=r.toString,h=r.hasOwnProperty,v={},s="2.2.4",E=function(e,t){return new E.fn.init(e,t)},u=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,l=/^-ms-/,f=/-([\da-z])/gi;function p(e){var t=!!e&&"length"in e&&e.length,n=E.type(e);return"function"!==n&&!E.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}E.fn=E.prototype={jquery:s,constructor:E,selector:"",length:0,toArray:function(){return c.call(this)},get:function(e){return null!=e?e<0?this[e+this.length]:this[e]:c.call(this)},pushStack:function(e){var t=E.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return E.each(this,e)},map:function(n){return this.pushStack(E.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(c.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:a,sort:n.sort,splice:n.splice},E.extend=E.fn.extend=function(){var e,t,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,l=!1;for("boolean"==typeof s&&(l=s,s=arguments[a]||{},a++),"object"==typeof s||E.isFunction(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(e=arguments[a]))for(t in e)n=s[t],s!==(r=e[t])&&(l&&r&&(E.isPlainObject(r)||(i=E.isArray(r)))?(o=i?(i=!1,n&&E.isArray(n)?n:[]):n&&E.isPlainObject(n)?n:{},s[t]=E.extend(l,o,r)):void 0!==r&&(s[t]=r));return s},E.extend({expando:"jQuery"+(s+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===E.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!E.isArray(e)&&0<=t-parseFloat(t)+1},isPlainObject:function(e){var t;if("object"!==E.type(e)||e.nodeType||E.isWindow(e))return!1;if(e.constructor&&!h.call(e,"constructor")&&!h.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||h.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?r[o.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=E.trim(e))&&(1===e.indexOf("use strict")?((t=k.createElement("script")).text=e,k.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(l,"ms-").replace(f,t)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var n,r=0;if(p(e))for(n=e.length;r<n&&!1!==t.call(e[r],r,e[r]);r++);else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},trim:function(e){return null==e?"":(e+"").replace(u,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?E.merge(n,"string"==typeof e?[e]:e):a.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,s=!n;i<o;i++)!t(e[i],i)!=s&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,s=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&s.push(i);return g.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),E.isFunction(e))return r=c.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(c.call(arguments)))}).guid=e.guid=e.guid||E.guid++,i},now:Date.now,support:v}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=n[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){r["[object "+t+"]"]=t.toLowerCase()});var d=function(n){function f(e,t,n){var r="0x"+t-65536;return r!=r||n?t:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}function i(){T()}var e,h,b,o,s,g,p,v,w,u,l,T,C,a,k,m,c,d,y,E="sizzle"+ +new Date,x=n.document,N=0,r=0,S=ie(),j=ie(),D=ie(),A=function(e,t){return e===t&&(l=!0),0},q={}.hasOwnProperty,t=[],L=t.pop,H=t.push,O=t.push,F=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",$=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),_=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),X=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp($),Y=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+$),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=/'|\\/g,ne=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig");try{O.apply(t=F.call(x.childNodes),x.childNodes),t[x.childNodes.length].nodeType}catch(e){O={apply:t.length?function(e,t){H.apply(e,F.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}function re(e,t,n,r){var i,o,s,a,u,l,c,f,p=t&&t.ownerDocument,d=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==d&&9!==d&&11!==d)return n;if(!r&&((t?t.ownerDocument||t:x)!==C&&T(t),t=t||C,k)){if(11!==d&&(l=Z.exec(e)))if(i=l[1]){if(9===d){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(p&&(s=p.getElementById(i))&&y(t,s)&&s.id===i)return n.push(s),n}else{if(l[2])return O.apply(n,t.getElementsByTagName(e)),n;if((i=l[3])&&h.getElementsByClassName&&t.getElementsByClassName)return O.apply(n,t.getElementsByClassName(i)),n}if(h.qsa&&!D[e+" "]&&(!m||!m.test(e))){if(1!==d)p=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((a=t.getAttribute("id"))?a=a.replace(te,"\\$&"):t.setAttribute("id",a=E),o=(c=g(e)).length,u=Y.test(a)?"#"+a:"[id='"+a+"']";o--;)c[o]=u+" "+pe(c[o]);f=c.join(","),p=ee.test(e)&&ce(t.parentNode)||t}if(f)try{return O.apply(n,p.querySelectorAll(f)),n}catch(e){}finally{a===E&&t.removeAttribute("id")}}}return v(e.replace(_,"$1"),t,n,r)}function ie(){var n=[];function r(e,t){return n.push(e+" ")>b.cacheLength&&delete r[n.shift()],r[e+" "]=t}return r}function oe(e){return e[E]=!0,e}function se(e){var t=C.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ae(e,t){for(var n=e.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=t}function ue(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||1<<31)-(~e.sourceIndex||1<<31);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function le(s){return oe(function(o){return o=+o,oe(function(e,t){for(var n,r=s([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ce(e){return e&&void 0!==e.getElementsByTagName&&e}for(e in h=re.support={},s=re.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},T=re.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:x;return r!==C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,k=!s(C),(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",i,!1):n.attachEvent&&n.attachEvent("onunload",i)),h.attributes=se(function(e){return e.className="i",!e.getAttribute("className")}),h.getElementsByTagName=se(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),h.getElementsByClassName=K.test(C.getElementsByClassName),h.getById=se(function(e){return a.appendChild(e).id=E,!C.getElementsByName||!C.getElementsByName(E).length}),h.getById?(b.find.ID=function(e,t){if(void 0!==t.getElementById&&k){var n=t.getElementById(e);return n?[n]:[]}},b.filter.ID=function(e){var t=e.replace(ne,f);return function(e){return e.getAttribute("id")===t}}):(delete b.find.ID,b.filter.ID=function(e){var n=e.replace(ne,f);return function(e){var t=void 0!==e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}}),b.find.TAG=h.getElementsByTagName?function(e,t){return void 0!==t.getElementsByTagName?t.getElementsByTagName(e):h.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"!==e)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},b.find.CLASS=h.getElementsByClassName&&function(e,t){if(void 0!==t.getElementsByClassName&&k)return t.getElementsByClassName(e)},c=[],m=[],(h.qsa=K.test(C.querySelectorAll))&&(se(function(e){a.appendChild(e).innerHTML="<a id='"+E+"'></a><select id='"+E+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&m.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||m.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+E+"-]").length||m.push("~="),e.querySelectorAll(":checked").length||m.push(":checked"),e.querySelectorAll("a#"+E+"+*").length||m.push(".#.+[+~]")}),se(function(e){var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&m.push("name"+M+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||m.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),m.push(",.*:")})),(h.matchesSelector=K.test(d=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&se(function(e){h.disconnectedMatch=d.call(e,"div"),d.call(e,"[s!='']:x"),c.push("!=",$)}),m=m.length&&new RegExp(m.join("|")),c=c.length&&new RegExp(c.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},A=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!h.sortDetached&&t.compareDocumentPosition(e)===n?e===C||e.ownerDocument===x&&y(x,e)?-1:t===C||t.ownerDocument===x&&y(x,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,s=[e],a=[t];if(!i||!o)return e===C?-1:t===C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return ue(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?ue(s[r],a[r]):s[r]===x?-1:a[r]===x?1:0}),C},re.matches=function(e,t){return re(e,null,null,t)},re.matchesSelector=function(e,t){if((e.ownerDocument||e)!==C&&T(e),t=t.replace(U,"='$1']"),h.matchesSelector&&k&&!D[t+" "]&&(!c||!c.test(t))&&(!m||!m.test(t)))try{var n=d.call(e,t);if(n||h.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<re(t,C,null,[e]).length},re.contains=function(e,t){return(e.ownerDocument||e)!==C&&T(e),y(e,t)},re.attr=function(e,t){(e.ownerDocument||e)!==C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&q.call(b.attrHandle,t.toLowerCase())?n(e,t,!k):void 0;return void 0!==r?r:h.attributes||!k?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},re.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},re.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!h.detectDuplicates,u=!h.sortStable&&e.slice(0),e.sort(A),l){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return u=null,e},o=re.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=o(t);return n},(b=re.selectors={cacheLength:50,createPseudo:oe,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ne,f),e[3]=(e[3]||e[4]||e[5]||"").replace(ne,f),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||re.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&re.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&V.test(n)&&(t=g(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(ne,f).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&S(e,function(e){return t.test("string"==typeof e.className&&e.className||void 0!==e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=re.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var m="nth"!==h.slice(0,3),y="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,s,a,u,l=m!=y?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(m){for(;l;){for(s=e;s=s[l];)if(x?s.nodeName.toLowerCase()===f:1===s.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[y?c.firstChild:c.lastChild],y&&p){for(d=(a=(r=(i=(o=(s=c)[E]||(s[E]={}))[s.uniqueID]||(o[s.uniqueID]={}))[h]||[])[0]===N&&r[1])&&r[2],s=a&&c.childNodes[a];s=++a&&s&&s[l]||(d=a=0)||u.pop();)if(1===s.nodeType&&++d&&s===e){i[h]=[N,a,d];break}}else if(p&&(d=a=(r=(i=(o=(s=e)[E]||(s[E]={}))[s.uniqueID]||(o[s.uniqueID]={}))[h]||[])[0]===N&&r[1]),!1===d)for(;(s=++a&&s&&s[l]||(d=a=0)||u.pop())&&((x?s.nodeName.toLowerCase()!==f:1!==s.nodeType)||!++d||(p&&((i=(o=s[E]||(s[E]={}))[s.uniqueID]||(o[s.uniqueID]={}))[h]=[N,d]),s!==e)););return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,s=b.pseudos[e]||b.setFilters[e.toLowerCase()]||re.error("unsupported pseudo: "+e);return s[E]?s(o):1<s.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?oe(function(e,t){for(var n,r=s(e,o),i=r.length;i--;)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return s(e,0,t)}):s}},pseudos:{not:oe(function(e){var r=[],i=[],a=p(e.replace(_,"$1"));return a[E]?oe(function(e,t,n,r){for(var i,o=a(e,null,r,[]),s=e.length;s--;)(i=o[s])&&(e[s]=!(t[s]=i))}):function(e,t,n){return r[0]=e,a(r,null,n,i),r[0]=null,!i.pop()}}),has:oe(function(t){return function(e){return 0<re(t,e).length}}),contains:oe(function(t){return t=t.replace(ne,f),function(e){return-1<(e.textContent||e.innerText||o(e)).indexOf(t)}}),lang:oe(function(n){return Y.test(n||"")||re.error("unsupported lang: "+n),n=n.replace(ne,f).toLowerCase(),function(e){var t;do{if(t=k?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:le(function(){return[0]}),last:le(function(e,t){return[t-1]}),eq:le(function(e,t,n){return[n<0?n+t:n]}),even:le(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:le(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:le(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:le(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=function(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=function(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}(e);function fe(){}function pe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function de(a,e,t){var u=e.dir,l=t&&"parentNode"===u,c=r++;return e.first?function(e,t,n){for(;e=e[u];)if(1===e.nodeType||l)return a(e,t,n)}:function(e,t,n){var r,i,o,s=[N,c];if(n){for(;e=e[u];)if((1===e.nodeType||l)&&a(e,t,n))return!0}else for(;e=e[u];)if(1===e.nodeType||l){if((r=(i=(o=e[E]||(e[E]={}))[e.uniqueID]||(o[e.uniqueID]={}))[u])&&r[0]===N&&r[1]===c)return s[2]=r[2];if((i[u]=s)[2]=a(e,t,n))return!0}}}function he(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function ge(e,t,n,r,i){for(var o,s=[],a=0,u=e.length,l=null!=t;a<u;a++)(o=e[a])&&(n&&!n(o,r,i)||(s.push(o),l&&t.push(a)));return s}function ve(d,h,g,v,m,e){return v&&!v[E]&&(v=ve(v)),m&&!m[E]&&(m=ve(m,e)),oe(function(e,t,n,r){var i,o,s,a=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)re(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:ge(c,a,d,n,r),p=g?m||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v)for(i=ge(p,u),v(i,[],n,r),o=i.length;o--;)(s=i[o])&&(p[u[o]]=!(f[u[o]]=s));if(e){if(m||d){if(m){for(i=[],o=p.length;o--;)(s=p[o])&&i.push(f[o]=s);m(null,p=[],i,r)}for(o=p.length;o--;)(s=p[o])&&-1<(i=m?P(e,s):a[o])&&(e[i]=!(t[i]=s))}}else p=ge(p===t?p.splice(l,p.length):p),m?m(null,t,p,r):O.apply(t,p)})}function me(v,m){function e(e,t,n,r,i){var o,s,a,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=N+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t===C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){for(s=0,t||o.ownerDocument===C||(T(o),n=!k);a=v[s++];)if(a(o,t||C,n)){r.push(o);break}i&&(N=h)}y&&((o=!a&&o)&&u--,e&&c.push(o))}if(u+=l,y&&l!==u){for(s=0;a=m[s++];)a(c,f,t,n);if(e){if(0<u)for(;l--;)c[l]||f[l]||(f[l]=L.call(r));f=ge(f)}O.apply(r,f),i&&!e&&0<f.length&&1<u+m.length&&re.uniqueSort(r)}return i&&(N=h,w=p),c}var y=0<m.length,x=0<v.length;return y?oe(e):e}return fe.prototype=b.filters=b.pseudos,b.setFilters=new fe,g=re.tokenize=function(e,t){var n,r,i,o,s,a,u,l=j[e+" "];if(l)return t?0:l.slice(0);for(s=e,a=[],u=b.preFilter;s;){for(o in n&&!(r=X.exec(s))||(r&&(s=s.slice(r[0].length)||s),a.push(i=[])),n=!1,(r=z.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(_," ")}),s=s.slice(n.length)),b.filter)!(r=G[o].exec(s))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?re.error(e):j(e,a).slice(0)},p=re.compile=function(e,t){var n,r=[],i=[],o=D[e+" "];if(!o){for(n=(t=t||g(e)).length;n--;)(o=function e(t){for(var i,n,r,o=t.length,s=b.relative[t[0].type],a=s||b.relative[" "],u=s?1:0,l=de(function(e){return e===i},a,!0),c=de(function(e){return-1<P(i,e)},a,!0),f=[function(e,t,n){var r=!s&&(n||t!==w)||((i=t).nodeType?l:c)(e,t,n);return i=null,r}];u<o;u++)if(n=b.relative[t[u].type])f=[de(he(f),n)];else{if((n=b.filter[t[u].type].apply(null,t[u].matches))[E]){for(r=++u;r<o&&!b.relative[t[r].type];r++);return ve(1<u&&he(f),1<u&&pe(t.slice(0,u-1).concat({value:" "===t[u-2].type?"*":""})).replace(_,"$1"),n,u<r&&e(t.slice(u,r)),r<o&&e(t=t.slice(r)),r<o&&pe(t))}f.push(n)}return he(f)}(t[n]))[E]?r.push(o):i.push(o);(o=D(e,me(i,r))).selector=e}return o},v=re.select=function(e,t,n,r){var i,o,s,a,u,l="function"==typeof e&&e,c=!r&&g(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(s=o[0]).type&&h.getById&&9===t.nodeType&&k&&b.relative[o[1].type]){if(!(t=(b.find.ID(s.matches[0].replace(ne,f),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=G.needsContext.test(e)?0:o.length;i--&&(s=o[i],!b.relative[a=s.type]);)if((u=b.find[a])&&(r=u(s.matches[0].replace(ne,f),ee.test(o[0].type)&&ce(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&pe(o)))return O.apply(n,r),n;break}}return(l||p(e,c))(r,t,!k,n,!t||ee.test(e)&&ce(t.parentNode)||t),n},h.sortStable=E.split("").sort(A).join("")===E,h.detectDuplicates=!!l,T(),h.sortDetached=se(function(e){return 1&e.compareDocumentPosition(C.createElement("div"))}),se(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||ae("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),h.attributes&&se(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||ae("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),se(function(e){return null==e.getAttribute("disabled")})||ae(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),re}(C);E.find=d,E.expr=d.selectors,E.expr[":"]=E.expr.pseudos,E.uniqueSort=E.unique=d.uniqueSort,E.text=d.getText,E.isXMLDoc=d.isXML,E.contains=d.contains;function m(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&E(e).is(n))break;r.push(e)}return r}function y(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}var x=E.expr.match.needsContext,b=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function T(e,n,r){if(E.isFunction(n))return E.grep(e,function(e,t){return!!n.call(e,t,e)!==r});if(n.nodeType)return E.grep(e,function(e){return e===n!==r});if("string"==typeof n){if(w.test(n))return E.filter(n,e,r);n=E.filter(n,e)}return E.grep(e,function(e){return-1<i.call(n,e)!==r})}E.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?E.find.matchesSelector(r,e)?[r]:[]:E.find.matches(e,E.grep(t,function(e){return 1===e.nodeType}))},E.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(E(e).filter(function(){for(t=0;t<n;t++)if(E.contains(i[t],this))return!0}));for(t=0;t<n;t++)E.find(e,i[t],r);return(r=this.pushStack(1<n?E.unique(r):r)).selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(T(this,e||[],!1))},not:function(e){return this.pushStack(T(this,e||[],!0))},is:function(e){return!!T(this,"string"==typeof e&&x.test(e)?E(e):e||[],!1).length}});var N,S=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(E.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||N,"string"!=typeof e)return e.nodeType?(this.context=this[0]=e,this.length=1,this):E.isFunction(e)?void 0!==n.ready?n.ready(e):e(E):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),E.makeArray(e,this));if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:S.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof E?t[0]:t,E.merge(this,E.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:k,!0)),b.test(r[1])&&E.isPlainObject(t))for(r in t)E.isFunction(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=k.getElementById(r[2]))&&i.parentNode&&(this.length=1,this[0]=i),this.context=k,this.selector=e,this}).prototype=E.fn,N=E(k);var j=/^(?:parents|prev(?:Until|All))/,D={children:!0,contents:!0,next:!0,prev:!0};function A(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}E.fn.extend({has:function(e){var t=E(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(E.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],s=x.test(e)||"string"!=typeof e?E(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&E.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?E.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(E(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),E.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return m(e,"parentNode")},parentsUntil:function(e,t,n){return m(e,"parentNode",n)},next:function(e){return A(e,"nextSibling")},prev:function(e){return A(e,"previousSibling")},nextAll:function(e){return m(e,"nextSibling")},prevAll:function(e){return m(e,"previousSibling")},nextUntil:function(e,t,n){return m(e,"nextSibling",n)},prevUntil:function(e,t,n){return m(e,"previousSibling",n)},siblings:function(e){return y((e.parentNode||{}).firstChild,e)},children:function(e){return y(e.firstChild)},contents:function(e){return e.contentDocument||E.merge([],e.childNodes)}},function(r,i){E.fn[r]=function(e,t){var n=E.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=E.filter(t,n)),1<this.length&&(D[r]||E.uniqueSort(n),j.test(r)&&n.reverse()),this.pushStack(n)}});var q,L=/\S+/g;function H(){k.removeEventListener("DOMContentLoaded",H),C.removeEventListener("load",H),E.ready()}E.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},E.each(e.match(L)||[],function(e,t){n[t]=!0}),n):E.extend({},r);function i(){for(a=r.once,s=o=!0;l.length;c=-1)for(t=l.shift();++c<u.length;)!1===u[c].apply(t[0],t[1])&&r.stopOnFalse&&(c=u.length,t=!1);r.memory||(t=!1),o=!1,a&&(u=t?[]:"")}var o,t,s,a,u=[],l=[],c=-1,f={add:function(){return u&&(t&&!o&&(c=u.length-1,l.push(t)),function n(e){E.each(e,function(e,t){E.isFunction(t)?r.unique&&f.has(t)||u.push(t):t&&t.length&&"string"!==E.type(t)&&n(t)})}(arguments),t&&!o&&i()),this},remove:function(){return E.each(arguments,function(e,t){for(var n;-1<(n=E.inArray(t,u,n));)u.splice(n,1),n<=c&&c--}),this},has:function(e){return e?-1<E.inArray(e,u):0<u.length},empty:function(){return u=u&&[],this},disable:function(){return a=l=[],u=t="",this},disabled:function(){return!u},lock:function(){return a=l=[],t||(u=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],l.push(t),o||i()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!s}};return f},E.extend({Deferred:function(e){var o=[["resolve","done",E.Callbacks("once memory"),"resolved"],["reject","fail",E.Callbacks("once memory"),"rejected"],["notify","progress",E.Callbacks("memory")]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},then:function(){var i=arguments;return E.Deferred(function(r){E.each(o,function(e,t){var n=E.isFunction(i[e])&&i[e];a[t[1]](function(){var e=n&&n.apply(this,arguments);e&&E.isFunction(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this===s?r.promise():this,n?[e]:arguments)})}),i=null}).promise()},promise:function(e){return null!=e?E.extend(e,s):s}},a={};return s.pipe=s.then,E.each(o,function(e,t){var n=t[2],r=t[3];s[t[1]]=n.add,r&&n.add(function(){i=r},o[1^e][2].disable,o[2][2].lock),a[t[0]]=function(){return a[t[0]+"With"](this===a?s:this,arguments),this},a[t[0]+"With"]=n.fireWith}),s.promise(a),e&&e.call(a,a),a},when:function(e){function t(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?c.call(arguments):e,r===i?l.notifyWith(n,r):--u||l.resolveWith(n,r)}}var i,n,r,o=0,s=c.call(arguments),a=s.length,u=1!==a||e&&E.isFunction(e.promise)?a:0,l=1===u?e:E.Deferred();if(1<a)for(i=new Array(a),n=new Array(a),r=new Array(a);o<a;o++)s[o]&&E.isFunction(s[o].promise)?s[o].promise().progress(t(o,n,i)).done(t(o,r,s)).fail(l.reject):--u;return u||l.resolveWith(r,s),l.promise()}}),E.fn.ready=function(e){return E.ready.promise().done(e),this},E.extend({isReady:!1,readyWait:1,holdReady:function(e){e?E.readyWait++:E.ready(!0)},ready:function(e){(!0===e?--E.readyWait:E.isReady)||(E.isReady=!0)!==e&&0<--E.readyWait||(q.resolveWith(k,[E]),E.fn.triggerHandler&&(E(k).triggerHandler("ready"),E(k).off("ready")))}}),E.ready.promise=function(e){return q||(q=E.Deferred(),"complete"===k.readyState||"loading"!==k.readyState&&!k.documentElement.doScroll?C.setTimeout(E.ready):(k.addEventListener("DOMContentLoaded",H),C.addEventListener("load",H))),q.promise(e)},E.ready.promise();function O(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType}var F=function(e,t,n,r,i,o,s){var a=0,u=e.length,l=null==n;if("object"===E.type(n))for(a in i=!0,n)F(e,t,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,E.isFunction(r)||(s=!0),l&&(t=s?(t.call(e,r),null):(l=t,function(e,t,n){return l.call(E(e),n)})),t))for(;a<u;a++)t(e[a],n,s?r:r.call(e[a],a,t(e[a],n)));return i?e:l?t.call(e):u?t(e[0],n):o};function P(){this.expando=E.expando+P.uid++}P.uid=1,P.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!O(e))return{};var t=e[this.expando];return t||(t={},O(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[t]=n;else for(r in t)i[r]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?void 0!==(r=this.get(e,t))?r:this.get(e,E.camelCase(t)):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{n=(r=E.isArray(t)?t.concat(t.map(E.camelCase)):(i=E.camelCase(t),t in o?[t,i]:(r=i)in o?[r]:r.match(L)||[])).length;for(;n--;)delete o[r[n]]}void 0!==t&&!E.isEmptyObject(o)||(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!E.isEmptyObject(t)}};var R=new P,M=new P,I=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,W=/[A-Z]/g;function $(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(W,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:I.test(n)?E.parseJSON(n):n)}catch(e){}M.set(e,t,n)}else n=void 0;return n}E.extend({hasData:function(e){return M.hasData(e)||R.hasData(e)},data:function(e,t,n){return M.access(e,t,n)},removeData:function(e,t){M.remove(e,t)},_data:function(e,t,n){return R.access(e,t,n)},_removeData:function(e,t){R.remove(e,t)}}),E.fn.extend({data:function(r,e){var t,n,i,o=this[0],s=o&&o.attributes;if(void 0!==r)return"object"==typeof r?this.each(function(){M.set(this,r)}):F(this,function(t){var e,n;return o&&void 0===t?void 0!==(e=M.get(o,r)||M.get(o,r.replace(W,"-$&").toLowerCase()))?e:(n=E.camelCase(r),void 0!==(e=M.get(o,n))||void 0!==(e=$(o,n,void 0))?e:void 0):(n=E.camelCase(r),void this.each(function(){var e=M.get(this,n);M.set(this,n,t),-1<r.indexOf("-")&&void 0!==e&&M.set(this,r,t)}))},null,e,1<arguments.length,null,!0);if(this.length&&(i=M.get(o),1===o.nodeType&&!R.get(o,"hasDataAttrs"))){for(t=s.length;t--;)s[t]&&0===(n=s[t].name).indexOf("data-")&&(n=E.camelCase(n.slice(5)),$(o,n,i[n]));R.set(o,"hasDataAttrs",!0)}return i},removeData:function(e){return this.each(function(){M.remove(this,e)})}}),E.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=R.get(e,t),n&&(!r||E.isArray(n)?r=R.access(e,t,E.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=E.queue(e,t),r=n.length,i=n.shift(),o=E._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){E.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return R.get(e,n)||R.access(e,n,{empty:E.Callbacks("once memory").add(function(){R.remove(e,[t+"queue",n])})})}}),E.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?E.queue(this[0],t):void 0===n?this:this.each(function(){var e=E.queue(this,t,n);E._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&E.dequeue(this,t)})},dequeue:function(e){return this.each(function(){E.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){function n(){--i||o.resolveWith(s,[s])}var r,i=1,o=E.Deferred(),s=this,a=this.length;for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(r=R.get(s[a],e+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(t)}});function B(e,t){return e=t||e,"none"===E.css(e,"display")||!E.contains(e.ownerDocument,e)}var _=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,X=new RegExp("^(?:([+-])=|)("+_+")([a-z%]*)$","i"),z=["Top","Right","Bottom","Left"];function U(e,t,n,r){var i,o=1,s=20,a=r?function(){return r.cur()}:function(){return E.css(e,t,"")},u=a(),l=n&&n[3]||(E.cssNumber[t]?"":"px"),c=(E.cssNumber[t]||"px"!==l&&+u)&&X.exec(E.css(e,t));if(c&&c[3]!==l)for(l=l||c[3],n=n||[],c=+u||1;c/=o=o||".5",E.style(e,t,c+l),o!==(o=a()/u)&&1!==o&&--s;);return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var V=/^(?:checkbox|radio)$/i,Y=/<([\w:-]+)/,G=/^$|\/(?:java|ecma)script/i,Q={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function J(e,t){var n=void 0!==e.getElementsByTagName?e.getElementsByTagName(t||"*"):void 0!==e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&E.nodeName(e,t)?E.merge([e],n):n}function K(e,t){for(var n=0,r=e.length;n<r;n++)R.set(e[n],"globalEval",!t||R.get(t[n],"globalEval"))}Q.optgroup=Q.option,Q.tbody=Q.tfoot=Q.colgroup=Q.caption=Q.thead,Q.th=Q.td;var Z,ee,te=/<|&#?\w+;/;function ne(e,t,n,r,i){for(var o,s,a,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===E.type(o))E.merge(p,o.nodeType?[o]:o);else if(te.test(o)){for(s=s||f.appendChild(t.createElement("div")),a=(Y.exec(o)||["",""])[1].toLowerCase(),u=Q[a]||Q._default,s.innerHTML=u[1]+E.htmlPrefilter(o)+u[2],c=u[0];c--;)s=s.lastChild;E.merge(p,s.childNodes),(s=f.firstChild).textContent=""}else p.push(t.createTextNode(o));for(f.textContent="",d=0;o=p[d++];)if(r&&-1<E.inArray(o,r))i&&i.push(o);else if(l=E.contains(o.ownerDocument,o),s=J(f.appendChild(o),"script"),l&&K(s),n)for(c=0;o=s[c++];)G.test(o.type||"")&&n.push(o);return f}Z=k.createDocumentFragment().appendChild(k.createElement("div")),(ee=k.createElement("input")).setAttribute("type","radio"),ee.setAttribute("checked","checked"),ee.setAttribute("name","t"),Z.appendChild(ee),v.checkClone=Z.cloneNode(!0).cloneNode(!0).lastChild.checked,Z.innerHTML="<textarea>x</textarea>",v.noCloneChecked=!!Z.cloneNode(!0).lastChild.defaultValue;var re=/^key/,ie=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,oe=/^([^.]*)(?:\.(.+)|)/;function se(){return!0}function ae(){return!1}function ue(){try{return k.activeElement}catch(e){}}function le(e,t,n,r,i,o){var s,a;if("object"==typeof t){for(a in"string"!=typeof n&&(r=r||n,n=void 0),t)le(e,a,n,r,t[a],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=ae;else if(!i)return e;return 1===o&&(s=i,(i=function(e){return E().off(e),s.apply(this,arguments)}).guid=s.guid||(s.guid=E.guid++)),e.each(function(){E.event.add(this,t,i,r,n)})}E.event={global:{},add:function(t,e,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,v=R.get(t);if(v)for(n.handler&&(n=(o=n).handler,i=o.selector),n.guid||(n.guid=E.guid++),(u=v.events)||(u=v.events={}),(s=v.handle)||(s=v.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(L)||[""]).length;l--;)d=g=(a=oe.exec(e[l])||[])[1],h=(a[2]||"").split(".").sort(),d&&(f=E.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=E.event.special[d]||{},c=E.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&E.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,s)||t.addEventListener&&t.addEventListener(d,s)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),E.event.global[d]=!0)},remove:function(e,t,n,r,i){var o,s,a,u,l,c,f,p,d,h,g,v=R.hasData(e)&&R.get(e);if(v&&(u=v.events)){for(l=(t=(t||"").match(L)||[""]).length;l--;)if(d=g=(a=oe.exec(t[l])||[])[1],h=(a[2]||"").split(".").sort(),d){for(f=E.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],a=a[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=p.length;o--;)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||a&&!a.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));s&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||E.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)E.event.remove(e,d+t[l],n,r,!0);E.isEmptyObject(u)&&R.remove(e,"handle events")}},dispatch:function(e){e=E.event.fix(e);var t,n,r,i,o,s,a=c.call(arguments),u=(R.get(this,"events")||{})[e.type]||[],l=E.event.special[e.type]||{};if((a[0]=e).delegateTarget=this,!l.preDispatch||!1!==l.preDispatch.call(this,e)){for(s=E.event.handlers.call(this,e,u),t=0;(i=s[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,void 0!==(r=((E.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,a))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return l.postDispatch&&l.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,s=[],a=t.delegateCount,u=e.target;if(a&&u.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;u!==this;u=u.parentNode||this)if(1===u.nodeType&&(!0!==u.disabled||"click"!==e.type)){for(r=[],n=0;n<a;n++)void 0===r[i=(o=t[n]).selector+" "]&&(r[i]=o.needsContext?-1<E(i,this).index(u):E.find(i,this,null,[u]).length),r[i]&&r.push(o);r.length&&s.push({elem:u,handlers:r})}return a<t.length&&s.push({elem:this,handlers:t.slice(a)}),s},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||k).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[E.expando])return e;var t,n,r,i=e.type,o=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=ie.test(i)?this.mouseHooks:re.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new E.Event(o),t=r.length;t--;)e[n=r[t]]=o[n];return e.target||(e.target=k),3===e.target.nodeType&&(e.target=e.target.parentNode),s.filter?s.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==ue()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===ue()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&E.nodeName(this,"input"))return this.click(),!1},_default:function(e){return E.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},E.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},E.Event=function(e,t){if(!(this instanceof E.Event))return new E.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?se:ae):this.type=e,t&&E.extend(this,t),this.timeStamp=e&&e.timeStamp||E.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:ae,isPropagationStopped:ae,isImmediatePropagationStopped:ae,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=se,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=se,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=se,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){E.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||E.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),E.fn.extend({on:function(e,t,n,r){return le(this,e,t,n,r)},one:function(e,t,n,r){return le(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,E(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=ae),this.each(function(){E.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this}});var ce=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,fe=/<script|<style|<link/i,pe=/checked\s*(?:[^=]|=\s*.checked.)/i,de=/^true\/(.*)/,he=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function ge(e,t){return E.nodeName(e,"table")&&E.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function ve(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function me(e){var t=de.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function ye(e,t){var n,r,i,o,s,a,u,l;if(1===t.nodeType){if(R.hasData(e)&&(o=R.access(e),s=R.set(t,o),l=o.events))for(i in delete s.handle,s.events={},l)for(n=0,r=l[i].length;n<r;n++)E.event.add(t,i,l[i][n]);M.hasData(e)&&(a=M.access(e),u=E.extend({},a),M.set(t,u))}}function xe(n,r,i,o){r=g.apply([],r);var e,t,s,a,u,l,c=0,f=n.length,p=f-1,d=r[0],h=E.isFunction(d);if(h||1<f&&"string"==typeof d&&!v.checkClone&&pe.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),xe(t,r,i,o)});if(f&&(t=(e=ne(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(a=(s=E.map(J(e,"script"),ve)).length;c<f;c++)u=e,c!==p&&(u=E.clone(u,!0,!0),a&&E.merge(s,J(u,"script"))),i.call(n[c],u,c);if(a)for(l=s[s.length-1].ownerDocument,E.map(s,me),c=0;c<a;c++)u=s[c],G.test(u.type||"")&&!R.access(u,"globalEval")&&E.contains(l,u)&&(u.src?E._evalUrl&&E._evalUrl(u.src):E.globalEval(u.textContent.replace(he,"")))}return n}function be(e,t,n){for(var r,i=t?E.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||E.cleanData(J(r)),r.parentNode&&(n&&E.contains(r.ownerDocument,r)&&K(J(r,"script")),r.parentNode.removeChild(r));return e}E.extend({htmlPrefilter:function(e){return e.replace(ce,"<$1></$2>")},clone:function(e,t,n){var r,i,o,s,a,u,l,c=e.cloneNode(!0),f=E.contains(e.ownerDocument,e);if(!(v.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||E.isXMLDoc(e)))for(s=J(c),r=0,i=(o=J(e)).length;r<i;r++)a=o[r],u=s[r],l=void 0,"input"===(l=u.nodeName.toLowerCase())&&V.test(a.type)?u.checked=a.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=a.defaultValue);if(t)if(n)for(o=o||J(e),s=s||J(c),r=0,i=o.length;r<i;r++)ye(o[r],s[r]);else ye(e,c);return 0<(s=J(c,"script")).length&&K(s,!f&&J(e,"script")),c},cleanData:function(e){for(var t,n,r,i=E.event.special,o=0;void 0!==(n=e[o]);o++)if(O(n)){if(t=n[R.expando]){if(t.events)for(r in t.events)i[r]?E.event.remove(n,r):E.removeEvent(n,r,t.handle);n[R.expando]=void 0}n[M.expando]&&(n[M.expando]=void 0)}}}),E.fn.extend({domManip:xe,detach:function(e){return be(this,e,!0)},remove:function(e){return be(this,e)},text:function(e){return F(this,function(e){return void 0===e?E.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return xe(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||ge(this,e).appendChild(e)})},prepend:function(){return xe(this,arguments,function(e){var t;1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(t=ge(this,e)).insertBefore(e,t.firstChild)})},before:function(){return xe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return xe(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(E.cleanData(J(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return E.clone(this,e,t)})},html:function(e){return F(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!fe.test(e)&&!Q[(Y.exec(e)||["",""])[1].toLowerCase()]){e=E.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(E.cleanData(J(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return xe(this,arguments,function(e){var t=this.parentNode;E.inArray(this,n)<0&&(E.cleanData(J(this)),t&&t.replaceChild(e,this))},n)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,s){E.fn[e]=function(e){for(var t,n=[],r=E(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),E(r[o])[s](t),a.apply(n,t.get());return this.pushStack(n)}});var we,Te={HTML:"block",BODY:"block"};function Ce(e,t){var n=E(t.createElement(e)).appendTo(t.body),r=E.css(n[0],"display");return n.detach(),r}function ke(e){var t=k,n=Te[e];return n||("none"!==(n=Ce(e,t))&&n||((t=(we=(we||E("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement))[0].contentDocument).write(),t.close(),n=Ce(e,t),we.detach()),Te[e]=n),n}function Ee(e,t,n,r){var i,o,s={};for(o in t)s[o]=e.style[o],e.style[o]=t[o];for(o in i=n.apply(e,r||[]),t)e.style[o]=s[o];return i}var Ne,Se,je,De,Ae,qe,Le=/^margin/,He=new RegExp("^("+_+")(?!px)[a-z%]+$","i"),Oe=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Fe=k.documentElement;function Pe(){qe.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",qe.innerHTML="",Fe.appendChild(Ae);var e=C.getComputedStyle(qe);Ne="1%"!==e.top,De="2px"===e.marginLeft,Se="4px"===e.width,qe.style.marginRight="50%",je="4px"===e.marginRight,Fe.removeChild(Ae)}function Re(e,t,n){var r,i,o,s,a=e.style;return""!==(s=(n=n||Oe(e))?n.getPropertyValue(t)||n[t]:void 0)&&void 0!==s||E.contains(e.ownerDocument,e)||(s=E.style(e,t)),n&&!v.pixelMarginRight()&&He.test(s)&&Le.test(t)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o),void 0!==s?s+"":s}function Me(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}Ae=k.createElement("div"),(qe=k.createElement("div")).style&&(qe.style.backgroundClip="content-box",qe.cloneNode(!0).style.backgroundClip="",v.clearCloneStyle="content-box"===qe.style.backgroundClip,Ae.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",Ae.appendChild(qe),E.extend(v,{pixelPosition:function(){return Pe(),Ne},boxSizingReliable:function(){return null==Se&&Pe(),Se},pixelMarginRight:function(){return null==Se&&Pe(),je},reliableMarginLeft:function(){return null==Se&&Pe(),De},reliableMarginRight:function(){var e,t=qe.appendChild(k.createElement("div"));return t.style.cssText=qe.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",t.style.marginRight=t.style.width="0",qe.style.width="1px",Fe.appendChild(Ae),e=!parseFloat(C.getComputedStyle(t).marginRight),Fe.removeChild(Ae),qe.removeChild(t),e}}));var Ie=/^(none|table(?!-c[ea]).+)/,We={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"},Be=["Webkit","O","Moz","ms"],_e=k.createElement("div").style;function Xe(e){if(e in _e)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=Be.length;n--;)if((e=Be[n]+t)in _e)return e}function ze(e,t,n){var r=X.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Ue(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,s=0;o<4;o+=2)"margin"===n&&(s+=E.css(e,n+z[o],!0,i)),r?("content"===n&&(s-=E.css(e,"padding"+z[o],!0,i)),"margin"!==n&&(s-=E.css(e,"border"+z[o]+"Width",!0,i))):(s+=E.css(e,"padding"+z[o],!0,i),"padding"!==n&&(s+=E.css(e,"border"+z[o]+"Width",!0,i)));return s}function Ve(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Oe(e),s="border-box"===E.css(e,"boxSizing",!1,o);if(i<=0||null==i){if(((i=Re(e,t,o))<0||null==i)&&(i=e.style[t]),He.test(i))return i;r=s&&(v.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Ue(e,t,n||(s?"border":"content"),r,o)+"px"}function Ye(e,t){for(var n,r,i,o=[],s=0,a=e.length;s<a;s++)(r=e[s]).style&&(o[s]=R.get(r,"olddisplay"),n=r.style.display,t?(o[s]||"none"!==n||(r.style.display=""),""===r.style.display&&B(r)&&(o[s]=R.access(r,"olddisplay",ke(r.nodeName)))):(i=B(r),"none"===n&&i||R.set(r,"olddisplay",i?n:E.css(r,"display"))));for(s=0;s<a;s++)(r=e[s]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[s]||"":"none"));return e}function Ge(e,t,n,r,i){return new Ge.prototype.init(e,t,n,r,i)}E.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Re(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,s,a=E.camelCase(t),u=e.style;if(t=E.cssProps[a]||(E.cssProps[a]=Xe(a)||a),s=E.cssHooks[t]||E.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(e,!1,r))?i:u[t];"string"===(o=typeof n)&&(i=X.exec(n))&&i[1]&&(n=U(e,t,i),o="number"),null!=n&&n==n&&("number"===o&&(n+=i&&i[3]||(E.cssNumber[a]?"":"px")),v.clearCloneStyle||""!==n||0!==t.indexOf("background")||(u[t]="inherit"),s&&"set"in s&&void 0===(n=s.set(e,n,r))||(u[t]=n))}},css:function(e,t,n,r){var i,o,s,a=E.camelCase(t);return t=E.cssProps[a]||(E.cssProps[a]=Xe(a)||a),(s=E.cssHooks[t]||E.cssHooks[a])&&"get"in s&&(i=s.get(e,!0,n)),void 0===i&&(i=Re(e,t,r)),"normal"===i&&t in $e&&(i=$e[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),E.each(["height","width"],function(e,s){E.cssHooks[s]={get:function(e,t,n){if(t)return Ie.test(E.css(e,"display"))&&0===e.offsetWidth?Ee(e,We,function(){return Ve(e,s,n)}):Ve(e,s,n)},set:function(e,t,n){var r,i=n&&Oe(e),o=n&&Ue(e,s,n,"border-box"===E.css(e,"boxSizing",!1,i),i);return o&&(r=X.exec(t))&&"px"!==(r[3]||"px")&&(e.style[s]=t,t=E.css(e,s)),ze(0,t,o)}}}),E.cssHooks.marginLeft=Me(v.reliableMarginLeft,function(e,t){if(t)return(parseFloat(Re(e,"marginLeft"))||e.getBoundingClientRect().left-Ee(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),E.cssHooks.marginRight=Me(v.reliableMarginRight,function(e,t){if(t)return Ee(e,{display:"inline-block"},Re,[e,"marginRight"])}),E.each({margin:"",padding:"",border:"Width"},function(i,o){E.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+z[t]+o]=r[t]||r[t-2]||r[0];return n}},Le.test(i)||(E.cssHooks[i+o].set=ze)}),E.fn.extend({css:function(e,t){return F(this,function(e,t,n){var r,i,o={},s=0;if(E.isArray(t)){for(r=Oe(e),i=t.length;s<i;s++)o[t[s]]=E.css(e,t[s],!1,r);return o}return void 0!==n?E.style(e,t,n):E.css(e,t)},e,t,1<arguments.length)},show:function(){return Ye(this,!0)},hide:function(){return Ye(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){B(this)?E(this).show():E(this).hide()})}}),(E.Tween=Ge).prototype={constructor:Ge,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||E.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(E.cssNumber[n]?"":"px")},cur:function(){var e=Ge.propHooks[this.prop];return e&&e.get?e.get(this):Ge.propHooks._default.get(this)},run:function(e){var t,n=Ge.propHooks[this.prop];return this.options.duration?this.pos=t=E.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ge.propHooks._default.set(this),this}},Ge.prototype.init.prototype=Ge.prototype,Ge.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=E.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){E.fx.step[e.prop]?E.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[E.cssProps[e.prop]]&&!E.cssHooks[e.prop]?e.elem[e.prop]=e.now:E.style(e.elem,e.prop,e.now+e.unit)}}},Ge.propHooks.scrollTop=Ge.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},E.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},E.fx=Ge.prototype.init,E.fx.step={};var Qe,Je,Ke,Ze,et,tt=/^(?:toggle|show|hide)$/,nt=/queueHooks$/;function rt(){return C.setTimeout(function(){Qe=void 0}),Qe=E.now()}function it(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=z[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ot(e,t,n){for(var r,i=(st.tweeners[t]||[]).concat(st.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,t,e))return r}function st(o,e,t){var n,s,r=0,i=st.prefilters.length,a=E.Deferred().always(function(){delete u.elem}),u=function(){if(s)return!1;for(var e=Qe||rt(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return a.notifyWith(o,[l,n,t]),n<1&&i?t:(a.resolveWith(o,[l]),!1)},l=a.promise({elem:o,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},t),originalProperties:e,originalOptions:t,startTime:Qe||rt(),duration:t.duration,tweens:[],createTween:function(e,t){var n=E.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(s)return this;for(s=!0;t<n;t++)l.tweens[t].run(1);return e?(a.notifyWith(o,[l,1,0]),a.resolveWith(o,[l,e])):a.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,s;for(n in e)if(i=t[r=E.camelCase(n)],o=e[n],E.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(s=E.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=st.prefilters[r].call(l,o,c,l.opts))return E.isFunction(n.stop)&&(E._queueHooks(l.elem,l.opts.queue).stop=E.proxy(n.stop,n)),n;return E.map(c,ot,l),E.isFunction(l.opts.start)&&l.opts.start.call(o,l),E.fx.timer(E.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}E.Animation=E.extend(st,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return U(n.elem,e,X.exec(t),n),n}]},tweener:function(e,t){for(var n,r=0,i=(e=E.isFunction(e)?(t=e,["*"]):e.match(L)).length;r<i;r++)n=e[r],st.tweeners[n]=st.tweeners[n]||[],st.tweeners[n].unshift(t)},prefilters:[function(t,e,n){var r,i,o,s,a,u,l,c=this,f={},p=t.style,d=t.nodeType&&B(t),h=R.get(t,"fxshow");for(r in n.queue||(null==(a=E._queueHooks(t,"fx")).unqueued&&(a.unqueued=0,u=a.empty.fire,a.empty.fire=function(){a.unqueued||u()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,E.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],"inline"===("none"===(l=E.css(t,"display"))?R.get(t,"olddisplay")||ke(t.nodeName):l)&&"none"===E.css(t,"float")&&(p.display="inline-block")),n.overflow&&(p.overflow="hidden",c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]})),e)if(i=e[r],tt.exec(i)){if(delete e[r],o=o||"toggle"===i,i===(d?"hide":"show")){if("show"!==i||!h||void 0===h[r])continue;d=!0}f[r]=h&&h[r]||E.style(t,r)}else l=void 0;if(E.isEmptyObject(f))"inline"===("none"===l?ke(t.nodeName):l)&&(p.display=l);else for(r in h?"hidden"in h&&(d=h.hidden):h=R.access(t,"fxshow",{}),o&&(h.hidden=!d),d?E(t).show():c.done(function(){E(t).hide()}),c.done(function(){var e;for(e in R.remove(t,"fxshow"),f)E.style(t,e,f[e])}),f)s=ot(d?h[r]:0,r,c),r in h||(h[r]=s.start,d&&(s.end=s.start,s.start="width"===r||"height"===r?1:0))}],prefilter:function(e,t){t?st.prefilters.unshift(e):st.prefilters.push(e)}}),E.speed=function(e,t,n){var r=e&&"object"==typeof e?E.extend({},e):{complete:n||!n&&t||E.isFunction(e)&&e,duration:e,easing:n&&t||t&&!E.isFunction(t)&&t};return r.duration=E.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in E.fx.speeds?E.fx.speeds[r.duration]:E.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){E.isFunction(r.old)&&r.old.call(this),r.queue&&E.dequeue(this,r.queue)},r},E.fn.extend({fadeTo:function(e,t,n,r){return this.filter(B).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){function i(){var e=st(this,E.extend({},t),s);(o||R.get(this,"finish"))&&e.stop(!0)}var o=E.isEmptyObject(t),s=E.speed(e,n,r);return i.finish=i,o||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,e,o){function s(e){var t=e.stop;delete e.stop,t(o)}return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=E.timers,r=R.get(this);if(t)r[t]&&r[t].stop&&s(r[t]);else for(t in r)r[t]&&r[t].stop&&nt.test(t)&&s(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||E.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var e,t=R.get(this),n=t[s+"queue"],r=t[s+"queueHooks"],i=E.timers,o=n?n.length:0;for(t.finish=!0,E.queue(this,s,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===s&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),E.each(["toggle","show","hide"],function(e,r){var i=E.fn[r];E.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(it(r,!0),e,t,n)}}),E.each({slideDown:it("show"),slideUp:it("hide"),slideToggle:it("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){E.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),E.timers=[],E.fx.tick=function(){var e,t=0,n=E.timers;for(Qe=E.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||E.fx.stop(),Qe=void 0},E.fx.timer=function(e){E.timers.push(e),e()?E.fx.start():E.timers.pop()},E.fx.interval=13,E.fx.start=function(){Je=Je||C.setInterval(E.fx.tick,E.fx.interval)},E.fx.stop=function(){C.clearInterval(Je),Je=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(r,e){return r=E.fx&&E.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},Ke=k.createElement("input"),Ze=k.createElement("select"),et=Ze.appendChild(k.createElement("option")),Ke.type="checkbox",v.checkOn=""!==Ke.value,v.optSelected=et.selected,Ze.disabled=!0,v.optDisabled=!et.disabled,(Ke=k.createElement("input")).value="t",Ke.type="radio",v.radioValue="t"===Ke.value;var at,ut=E.expr.attrHandle;E.fn.extend({attr:function(e,t){return F(this,E.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){E.removeAttr(this,e)})}}),E.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===e.getAttribute?E.prop(e,t,n):(1===o&&E.isXMLDoc(e)||(t=t.toLowerCase(),i=E.attrHooks[t]||(E.expr.match.bool.test(t)?at:void 0)),void 0!==n?null===n?void E.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):!(i&&"get"in i&&null!==(r=i.get(e,t)))&&null==(r=E.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!v.radioValue&&"radio"===t&&E.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(L);if(o&&1===e.nodeType)for(;n=o[i++];)r=E.propFix[n]||n,E.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)}}),at={set:function(e,t,n){return!1===t?E.removeAttr(e,n):e.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),function(e,t){var o=ut[t]||E.find.attr;ut[t]=function(e,t,n){var r,i;return n||(i=ut[t],ut[t]=r,r=null!=o(e,t,n)?t.toLowerCase():null,ut[t]=i),r}});var lt=/^(?:input|select|textarea|button)$/i,ct=/^(?:a|area)$/i;E.fn.extend({prop:function(e,t){return F(this,E.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[E.propFix[e]||e]})}}),E.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&E.isXMLDoc(e)||(t=E.propFix[t]||t,i=E.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=E.find.attr(e,"tabindex");return t?parseInt(t,10):lt.test(e.nodeName)||ct.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),v.optSelected||(E.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){E.propFix[this.toLowerCase()]=this});var ft=/[\t\r\n\f]/g;function pt(e){return e.getAttribute&&e.getAttribute("class")||""}E.fn.extend({addClass:function(t){var e,n,r,i,o,s,a,u=0;if(E.isFunction(t))return this.each(function(e){E(this).addClass(t.call(this,e,pt(this)))});if("string"==typeof t&&t)for(e=t.match(L)||[];n=this[u++];)if(i=pt(n),r=1===n.nodeType&&(" "+i+" ").replace(ft," ")){for(s=0;o=e[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=E.trim(r))&&n.setAttribute("class",a)}return this},removeClass:function(t){var e,n,r,i,o,s,a,u=0;if(E.isFunction(t))return this.each(function(e){E(this).removeClass(t.call(this,e,pt(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof t&&t)for(e=t.match(L)||[];n=this[u++];)if(i=pt(n),r=1===n.nodeType&&(" "+i+" ").replace(ft," ")){for(s=0;o=e[s++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(a=E.trim(r))&&n.setAttribute("class",a)}return this},toggleClass:function(i,t){var o=typeof i;return"boolean"==typeof t&&"string"==o?t?this.addClass(i):this.removeClass(i):E.isFunction(i)?this.each(function(e){E(this).toggleClass(i.call(this,e,pt(this),t),t)}):this.each(function(){var e,t,n,r;if("string"==o)for(t=0,n=E(this),r=i.match(L)||[];e=r[t++];)n.hasClass(e)?n.removeClass(e):n.addClass(e);else void 0!==i&&"boolean"!=o||((e=pt(this))&&R.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==i&&R.get(this,"__className__")||""))})},hasClass:function(e){for(var t,n=0,r=" "+e+" ";t=this[n++];)if(1===t.nodeType&&-1<(" "+pt(t)+" ").replace(ft," ").indexOf(r))return!0;return!1}});var dt=/\r/g,ht=/[\x20\t\r\n\f]+/g;E.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=E.isFunction(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,E(this).val()):n)?t="":"number"==typeof t?t+="":E.isArray(t)&&(t=E.map(t,function(e){return null==e?"":e+""})),(r=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=E.valHooks[t.type]||E.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(dt,""):null==e?"":e:void 0}}),E.extend({valHooks:{option:{get:function(e){var t=E.find.attr(e,"value");return null!=t?t:E.trim(E.text(e)).replace(ht," ")}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,s=o?null:[],a=o?i+1:r.length,u=i<0?a:o?i:0;u<a;u++)if(((n=r[u]).selected||u===i)&&(v.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!E.nodeName(n.parentNode,"optgroup"))){if(t=E(n).val(),o)return t;s.push(t)}return s},set:function(e,t){for(var n,r,i=e.options,o=E.makeArray(t),s=i.length;s--;)((r=i[s]).selected=-1<E.inArray(E.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),E.each(["radio","checkbox"],function(){E.valHooks[this]={set:function(e,t){if(E.isArray(t))return e.checked=-1<E.inArray(E(e).val(),t)}},v.checkOn||(E.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var gt=/^(?:focusinfocus|focusoutblur)$/;E.extend(E.event,{trigger:function(e,t,n,r){var i,o,s,a,u,l,c=[n||k],f=h.call(e,"type")?e.type:e,p=h.call(e,"namespace")?e.namespace.split("."):[],d=o=n=n||k;if(3!==n.nodeType&&8!==n.nodeType&&!gt.test(f+E.event.triggered)&&(-1<f.indexOf(".")&&(f=(p=f.split(".")).shift(),p.sort()),a=f.indexOf(":")<0&&"on"+f,(e=e[E.expando]?e:new E.Event(f,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=p.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:E.makeArray(t,[e]),l=E.event.special[f]||{},r||!l.trigger||!1!==l.trigger.apply(n,t))){if(!r&&!l.noBubble&&!E.isWindow(n)){for(s=l.delegateType||f,gt.test(s+f)||(d=d.parentNode);d;d=d.parentNode)c.push(d),o=d;o===(n.ownerDocument||k)&&c.push(o.defaultView||o.parentWindow||C)}for(i=0;(d=c[i++])&&!e.isPropagationStopped();)e.type=1<i?s:l.bindType||f,(u=(R.get(d,"events")||{})[e.type]&&R.get(d,"handle"))&&u.apply(d,t),(u=a&&d[a])&&u.apply&&O(d)&&(e.result=u.apply(d,t),!1===e.result&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||l._default&&!1!==l._default.apply(c.pop(),t)||!O(n)||a&&E.isFunction(n[f])&&!E.isWindow(n)&&((o=n[a])&&(n[a]=null),n[E.event.triggered=f](),E.event.triggered=void 0,o&&(n[a]=o)),e.result}},simulate:function(e,t,n){var r=E.extend(new E.Event,n,{type:e,isSimulated:!0});E.event.trigger(r,null,t)}}),E.fn.extend({trigger:function(e,t){return this.each(function(){E.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return E.event.trigger(e,t,n,!0)}}),E.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){E.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}}),E.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),v.focusin="onfocusin"in C,v.focusin||E.each({focus:"focusin",blur:"focusout"},function(n,r){function i(e){E.event.simulate(r,e.target,E.event.fix(e))}E.event.special[r]={setup:function(){var e=this.ownerDocument||this,t=R.access(e,r);t||e.addEventListener(n,i,!0),R.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this,t=R.access(e,r)-1;t?R.access(e,r,t):(e.removeEventListener(n,i,!0),R.remove(e,r))}}});var vt=C.location,mt=E.now(),yt=/\?/;E.parseJSON=function(e){return JSON.parse(e+"")},E.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||E.error("Invalid XML: "+e),t};var xt=/#.*$/,bt=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Tt=/^(?:GET|HEAD)$/,Ct=/^\/\//,kt={},Et={},Nt="*/".concat("*"),St=k.createElement("a");function jt(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(L)||[];if(E.isFunction(t))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Dt(t,i,o,s){var a={},u=t===Et;function l(e){var r;return a[e]=!0,E.each(t[e]||[],function(e,t){var n=t(i,o,s);return"string"!=typeof n||u||a[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!a["*"]&&l("*")}function At(e,t){var n,r,i=E.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r=r||{})[n]=t[n]);return r&&E.extend(!0,e,r),e}St.href=vt.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(vt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Nt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":E.parseJSON,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?At(At(e,E.ajaxSettings),t):At(E.ajaxSettings,e)},ajaxPrefilter:jt(kt),ajaxTransport:jt(Et),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,i,g=E.ajaxSetup({},t),v=g.context||g,m=g.context&&(v.nodeType||v.jquery)?E(v):E.event,y=E.Deferred(),x=E.Callbacks("once memory"),b=g.statusCode||{},o={},s={},w=0,a="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(2===w){if(!n)for(n={};t=wt.exec(p);)n[t[1].toLowerCase()]=t[2];t=n[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===w?p:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return w||(e=s[n]=s[n]||e,o[e]=t),this},overrideMimeType:function(e){return w||(g.mimeType=e),this},statusCode:function(e){var t;if(e)if(w<2)for(t in e)b[t]=[b[t],e[t]];else T.always(e[T.status]);return this},abort:function(e){var t=e||a;return c&&c.abort(t),u(0,t),this}};if(y.promise(T).complete=x.add,T.success=T.done,T.error=T.fail,g.url=((e||g.url||vt.href)+"").replace(xt,"").replace(Ct,vt.protocol+"//"),g.type=t.method||t.type||g.method||g.type,g.dataTypes=E.trim(g.dataType||"*").toLowerCase().match(L)||[""],null==g.crossDomain){r=k.createElement("a");try{r.href=g.url,r.href=r.href,g.crossDomain=St.protocol+"//"+St.host!=r.protocol+"//"+r.host}catch(e){g.crossDomain=!0}}if(g.data&&g.processData&&"string"!=typeof g.data&&(g.data=E.param(g.data,g.traditional)),Dt(kt,g,t,T),2===w)return T;for(i in(h=E.event&&g.global)&&0==E.active++&&E.event.trigger("ajaxStart"),g.type=g.type.toUpperCase(),g.hasContent=!Tt.test(g.type),f=g.url,g.hasContent||(g.data&&(f=g.url+=(yt.test(f)?"&":"?")+g.data,delete g.data),!1===g.cache&&(g.url=bt.test(f)?f.replace(bt,"$1_="+mt++):f+(yt.test(f)?"&":"?")+"_="+mt++)),g.ifModified&&(E.lastModified[f]&&T.setRequestHeader("If-Modified-Since",E.lastModified[f]),E.etag[f]&&T.setRequestHeader("If-None-Match",E.etag[f])),(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&T.setRequestHeader("Content-Type",g.contentType),T.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Nt+"; q=0.01":""):g.accepts["*"]),g.headers)T.setRequestHeader(i,g.headers[i]);if(g.beforeSend&&(!1===g.beforeSend.call(v,T,g)||2===w))return T.abort();for(i in a="abort",{success:1,error:1,complete:1})T[i](g[i]);if(c=Dt(Et,g,t,T)){if(T.readyState=1,h&&m.trigger("ajaxSend",[T,g]),2===w)return T;g.async&&0<g.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},g.timeout));try{w=1,c.send(o,u)}catch(e){if(!(w<2))throw e;u(-1,e)}}else u(-1,"No Transport");function u(e,t,n,r){var i,o,s,a,u,l=t;2!==w&&(w=2,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(a=function(e,t,n){for(var r,i,o,s,a=e.contents,u=e.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}s=s||i}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(g,T,n)),a=function(e,t,n,r){var i,o,s,a,u,l={},c=e.dataTypes.slice();if(c[1])for(s in e.converters)l[s.toLowerCase()]=e.converters[s];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=l[u+" "+o]||l["* "+o]))for(i in l)if((a=i.split(" "))[1]===o&&(s=l[u+" "+a[0]]||l["* "+a[0]])){!0===s?s=l[i]:!0!==l[i]&&(o=a[0],c.unshift(a[1]));break}if(!0!==s)if(s&&e.throws)t=s(t);else try{t=s(t)}catch(e){return{state:"parsererror",error:s?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(g,a,T,i),i?(g.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(E.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(E.etag[f]=u)),204===e||"HEAD"===g.type?l="nocontent":304===e?l="notmodified":(l=a.state,o=a.data,i=!(s=a.error))):(s=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?y.resolveWith(v,[o,l,T]):y.rejectWith(v,[T,l,s]),T.statusCode(b),b=void 0,h&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,g,i?o:s]),x.fireWith(v,[T,l]),h&&(m.trigger("ajaxComplete",[T,g]),--E.active||E.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return E.get(e,t,n,"json")},getScript:function(e,t){return E.get(e,void 0,t,"script")}}),E.each(["get","post"],function(e,i){E[i]=function(e,t,n,r){return E.isFunction(t)&&(r=r||n,n=t,t=void 0),E.ajax(E.extend({url:e,type:i,dataType:r,data:t,success:n},E.isPlainObject(e)&&e))}}),E._evalUrl=function(e){return E.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},E.fn.extend({wrapAll:function(t){var e;return E.isFunction(t)?this.each(function(e){E(this).wrapAll(t.call(this,e))}):(this[0]&&(e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(n){return E.isFunction(n)?this.each(function(e){E(this).wrapInner(n.call(this,e))}):this.each(function(){var e=E(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=E.isFunction(t);return this.each(function(e){E(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){E.nodeName(this,"body")||E(this).replaceWith(this.childNodes)}).end()}}),E.expr.filters.hidden=function(e){return!E.expr.filters.visible(e)},E.expr.filters.visible=function(e){return 0<e.offsetWidth||0<e.offsetHeight||0<e.getClientRects().length};var qt=/%20/g,Lt=/\[\]$/,Ht=/\r?\n/g,Ot=/^(?:submit|button|image|reset|file)$/i,Ft=/^(?:input|select|textarea|keygen)/i;E.param=function(e,t){function n(e,t){t=E.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)}var r,i=[];if(void 0===t&&(t=E.ajaxSettings&&E.ajaxSettings.traditional),E.isArray(e)||e.jquery&&!E.isPlainObject(e))E.each(e,function(){n(this.name,this.value)});else for(r in e)!function n(r,e,i,o){var t;if(E.isArray(e))E.each(e,function(e,t){i||Lt.test(r)?o(r,t):n(r+"["+("object"==typeof t&&null!=t?e:"")+"]",t,i,o)});else if(i||"object"!==E.type(e))o(r,e);else for(t in e)n(r+"["+t+"]",e[t],i,o)}(r,e[r],t,n);return i.join("&").replace(qt,"+")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=E.prop(this,"elements");return e?E.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!E(this).is(":disabled")&&Ft.test(this.nodeName)&&!Ot.test(e)&&(this.checked||!V.test(e))}).map(function(e,t){var n=E(this).val();return null==n?null:E.isArray(n)?E.map(n,function(e){return{name:t.name,value:e.replace(Ht,"\r\n")}}):{name:t.name,value:n.replace(Ht,"\r\n")}}).get()}}),E.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Pt={0:200,1223:204},Rt=E.ajaxSettings.xhr();v.cors=!!Rt&&"withCredentials"in Rt,v.ajax=Rt=!!Rt,E.ajaxTransport(function(i){var o,s;if(v.cors||Rt&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=s=r.onload=r.onerror=r.onabort=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Pt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),s=r.onerror=o("error"),void 0!==r.onabort?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&s()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return E.globalEval(e),e}}}),E.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),E.ajaxTransport("script",function(n){var r,i;if(n.crossDomain)return{send:function(e,t){r=E("<script>").prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),k.head.appendChild(r[0])},abort:function(){i&&i()}}});var Mt=[],It=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Mt.pop()||E.expando+"_"+mt++;return this[e]=!0,e}}),E.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,s=!1!==e.jsonp&&(It.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&It.test(e.data)&&"data");if(s||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=E.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(It,"$1"+r):!1!==e.jsonp&&(e.url+=(yt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||E.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?E(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Mt.push(r)),o&&E.isFunction(i)&&i(o[0]),o=i=void 0}),"script"}),E.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||k;var r=b.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ne([e],t,i),i&&i.length&&E(i).remove(),E.merge([],r.childNodes))};var Wt=E.fn.load;function $t(e){return E.isWindow(e)?e:9===e.nodeType&&e.defaultView}E.fn.load=function(e,t,n){if("string"!=typeof e&&Wt)return Wt.apply(this,arguments);var r,i,o,s=this,a=e.indexOf(" ");return-1<a&&(r=E.trim(e.slice(a)),e=e.slice(0,a)),E.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<s.length&&E.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,s.html(r?E("<div>").append(E.parseHTML(e)).find(r):e)}).always(n&&function(e,t){s.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){E.fn[t]=function(e){return this.on(t,e)}}),E.expr.filters.animated=function(t){return E.grep(E.timers,function(e){return t===e.elem}).length},E.offset={setOffset:function(e,t,n){var r,i,o,s,a,u,l=E.css(e,"position"),c=E(e),f={};"static"===l&&(e.style.position="relative"),a=c.offset(),o=E.css(e,"top"),u=E.css(e,"left"),i=("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(s=(r=c.position()).top,r.left):(s=parseFloat(o)||0,parseFloat(u)||0),E.isFunction(t)&&(t=t.call(e,n,E.extend({},a))),null!=t.top&&(f.top=t.top-a.top+s),null!=t.left&&(f.left=t.left-a.left+i),"using"in t?t.using.call(e,f):c.css(f)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){E.offset.setOffset(this,t,e)});var e,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(e=o.documentElement,E.contains(e,r)?(i=r.getBoundingClientRect(),n=$t(o),{top:i.top+n.pageYOffset-e.clientTop,left:i.left+n.pageXOffset-e.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===E.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),E.nodeName(e[0],"html")||(r=e.offset()),r.top+=E.css(e[0],"borderTopWidth",!0),r.left+=E.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-E.css(n,"marginTop",!0),left:t.left-r.left-E.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===E.css(e,"position");)e=e.offsetParent;return e||Fe})}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;E.fn[t]=function(e){return F(this,function(e,t,n){var r=$t(e);if(void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),E.each(["top","left"],function(e,n){E.cssHooks[n]=Me(v.pixelPosition,function(e,t){if(t)return t=Re(e,n),He.test(t)?E(e).position()[n]+"px":t})}),E.each({Height:"height",Width:"width"},function(o,s){E.each({padding:"inner"+o,content:s,"":"outer"+o},function(r,e){E.fn[e]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return F(this,function(e,t,n){var r;return E.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):void 0===n?E.css(e,t,i):E.style(e,t,n,i)},s,n?e:void 0,n,null)}})}),E.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),E.fn.andSelf=E.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return E});var Bt=C.jQuery,_t=C.$;return E.noConflict=function(e){return C.$===E&&(C.$=_t),e&&C.jQuery===E&&(C.jQuery=Bt),E},e||(C.jQuery=C.$=E),E});
define('keys',['require'],function(require){return new function(){var i={8:this.BACKSPACE="Backspace",9:this.TAB="Tab",13:this.ENTER="Enter",16:this.SHIFT="Shift",17:this.CONTROL="Control",18:this.ALT="Alt",20:this.CAPSLOCK="CapsLock",27:this.ESCAPE="Esc",32:this.SPACEBAR="Space",33:this.PAGEUP="PageUp",34:this.PAGEDOWN="PageDown",35:this.END="End",36:this.HOME="Home",37:this.LEFT="Left",38:this.UP="Up",39:this.RIGHT="Right",40:this.DOWN="Down",46:this.DELETE="Del"},e={UIKeyInputUpArrow:this.UP,UIKeyInputDownArrow:this.DOWN,UIKeyInputLeftArrow:this.LEFT,UIKeyInputRightArrow:this.RIGHT,UIKeyInputEscape:this.ESCAPE,UIKeyInputPageUp:this.PAGEUP,UIKeyInputPageDown:this.PAGEDOWN};this.isUndo=function(t){return!t.altKey&&(t.ctrlKey||t.metaKey)&&90==t.which&&!t.shiftKey},this.isRedo=function(t){return!t.altKey&&(t.ctrlKey||t.metaKey)&&(89==t.which||90==t.which&&t.shiftKey)},this.isSelectAll=function(t){return!t.altKey&&(t.ctrlKey||t.metaKey)&&65==t.which},this.isBacktick=function(t){return!(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||192!=t.which)},this.isHelp=function(t){return!t.altKey&&(t.ctrlKey||t.metaKey)&&191==t.which},this.lookup=function(t){return i[t.which]||e[t.key]},this.lookupChar=function(t){return String.fromCharCode(t.which)}}});
define('text',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});
!function(n,r){var t,e;"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("underscore",r):(t=n._,e=r(),(n._=e).noConflict=function(){return n._=t,e})}(this,function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},e=Array.prototype,i=Object.prototype,p="undefined"!=typeof Symbol?Symbol.prototype:null,u=e.push,f=e.slice,s=i.toString,o=i.hasOwnProperty,r=Array.isArray,a=Object.keys,t=Object.create,c=n.isNaN,l=n.isFinite,v=function(){};function h(n){return n instanceof h?n:this instanceof h?void(this._wrapped=n):new h(n)}h.VERSION="1.10.2";function g(u,o,n){if(void 0===o)return u;switch(null==n?3:n){case 1:return function(n){return u.call(o,n)};case 3:return function(n,r,t){return u.call(o,n,r,t)};case 4:return function(n,r,t,e){return u.call(o,n,r,t,e)}}return function(){return u.apply(o,arguments)}}function y(n,r,t){return null==n?er:Vn(n)?g(n,r,t):(Kn(n)&&!Pn(n)?or:ur)(n)}function d(n,r){return y(n,r,1/0)}function m(n,r,t){return h.iteratee!==d?h.iteratee(n,r):y(n,r,t)}function b(u,o){return o=null==o?u.length-1:+o,function(){for(var n=Math.max(arguments.length-o,0),r=Array(n),t=0;t<n;t++)r[t]=arguments[t+o];switch(o){case 0:return u.call(this,r);case 1:return u.call(this,arguments[0],r);case 2:return u.call(this,arguments[0],arguments[1],r)}for(var e=Array(o+1),t=0;t<o;t++)e[t]=arguments[t];return e[o]=r,u.apply(this,e)}}function j(n){if(!Kn(n))return{};if(t)return t(n);v.prototype=n;var r=new v;return v.prototype=null,r}function _(r){return function(n){return null==n?void 0:n[r]}}function w(n,r){return null!=n&&o.call(n,r)}function x(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0}h.iteratee=d;var S=Math.pow(2,53)-1,A=_("length");function O(n){var r=A(n);return"number"==typeof r&&0<=r&&r<=S}function M(n,r,t){if(r=g(r,t),O(n))for(u=0,o=n.length;u<o;u++)r(n[u],u,n);else for(var e=xn(n),u=0,o=e.length;u<o;u++)r(n[e[u]],e[u],n);return n}function E(n,r,t){r=m(r,t);for(var e=!O(n)&&xn(n),u=(e||n).length,o=Array(u),i=0;i<u;i++){var a=e?e[i]:i;o[i]=r(n[a],a,n)}return o}function N(f){return function(n,r,t,e){var u=3<=arguments.length;return function(n,r,t,e){var u=!O(n)&&xn(n),o=(u||n).length,i=0<f?0:o-1;for(e||(t=n[u?u[i]:i],i+=f);0<=i&&i<o;i+=f){var a=u?u[i]:i;t=r(t,n[a],a,n)}return t}(n,g(r,e,4),t,u)}}var k=N(1),I=N(-1);function T(n,r,t){var e=(O(n)?un:In)(n,r,t);if(void 0!==e&&-1!==e)return n[e]}function B(n,e,r){var u=[];return e=m(e,r),M(n,function(n,r,t){e(n,r,t)&&u.push(n)}),u}function R(n,r,t){r=m(r,t);for(var e=!O(n)&&xn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(!r(n[i],i,n))return!1}return!0}function F(n,r,t){r=m(r,t);for(var e=!O(n)&&xn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(r(n[i],i,n))return!0}return!1}function q(n,r,t,e){return O(n)||(n=An(n)),"number"==typeof t&&!e||(t=0),0<=cn(n,r,t)}var D=b(function(n,t,e){var u,o;return Vn(t)?o=t:Pn(t)&&(u=t.slice(0,-1),t=t[t.length-1]),E(n,function(n){var r=o;if(!r){if(u&&u.length&&(n=x(n,u)),null==n)return;r=n[t]}return null==r?r:r.apply(n,e)})});function W(n,r){return E(n,ur(r))}function z(n,e,r){var t,u,o=-1/0,i=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=O(n)?n:An(n)).length;a<f;a++)null!=(t=n[a])&&o<t&&(o=t);else e=m(e,r),M(n,function(n,r,t){u=e(n,r,t),(i<u||u===-1/0&&o===-1/0)&&(o=n,i=u)});return o}function P(n,r,t){if(null==r||t)return O(n)||(n=An(n)),n[ir(n.length-1)];var e=(O(n)?qn:An)(n),u=A(e);r=Math.max(Math.min(r,u),0);for(var o=u-1,i=0;i<r;i++){var a=ir(i,o),f=e[i];e[i]=e[a],e[a]=f}return e.slice(0,r)}function K(i,r){return function(e,u,n){var o=r?[[],[]]:{};return u=m(u,n),M(e,function(n,r){var t=u(n,r,e);i(o,n,t)}),o}}var L=K(function(n,r,t){w(n,t)?n[t].push(r):n[t]=[r]}),V=K(function(n,r,t){n[t]=r}),C=K(function(n,r,t){w(n,t)?n[t]++:n[t]=1}),J=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;var U=K(function(n,r,t){n[t?0:1].push(r)},!0);function $(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[0]:G(n,n.length-r)}function G(n,r,t){return f.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))}function H(n,r,t){return f.call(n,null==r||t?1:r)}function Q(n,r,t,e){for(var u=(e=e||[]).length,o=0,i=A(n);o<i;o++){var a=n[o];if(O(a)&&(Pn(a)||Ln(a)))if(r)for(var f=0,c=a.length;f<c;)e[u++]=a[f++];else Q(a,r,t,e),u=e.length;else t||(e[u++]=a)}return e}var X=b(function(n,r){return nn(n,r)});function Y(n,r,t,e){tr(r)||(e=t,t=r,r=!1),null!=t&&(t=m(t,e));for(var u=[],o=[],i=0,a=A(n);i<a;i++){var f=n[i],c=t?t(f,i,n):f;r&&!t?(i&&o===c||u.push(f),o=c):t?q(o,c)||(o.push(c),u.push(f)):q(u,f)||u.push(f)}return u}var Z=b(function(n){return Y(Q(n,!0,!0))});var nn=b(function(n,r){return r=Q(r,!0,!0),B(n,function(n){return!q(r,n)})});function rn(n){for(var r=n&&z(n,A).length||0,t=Array(r),e=0;e<r;e++)t[e]=W(n,e);return t}var tn=b(rn);function en(o){return function(n,r,t){r=m(r,t);for(var e=A(n),u=0<o?0:e-1;0<=u&&u<e;u+=o)if(r(n[u],u,n))return u;return-1}}var un=en(1),on=en(-1);function an(n,r,t,e){for(var u=(t=m(t,e,1))(r),o=0,i=A(n);o<i;){var a=Math.floor((o+i)/2);t(n[a])<u?o=a+1:i=a}return o}function fn(o,i,a){return function(n,r,t){var e=0,u=A(n);if("number"==typeof t)0<o?e=0<=t?t:Math.max(t+u,e):u=0<=t?Math.min(t+1,u):t+u+1;else if(a&&t&&u)return n[t=a(n,r)]===r?t:-1;if(r!=r)return 0<=(t=i(f.call(n,e,u),rr))?t+e:-1;for(t=0<o?e:u-1;0<=t&&t<u;t+=o)if(n[t]===r)return t;return-1}}var cn=fn(1,un,an),ln=fn(-1,on);function pn(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var o=j(n.prototype),i=n.apply(o,u);return Kn(i)?i:o}var sn=b(function(r,t,e){if(!Vn(r))throw new TypeError("Bind must be called on a function");var u=b(function(n){return pn(r,u,t,this,e.concat(n))});return u}),vn=b(function(u,o){var i=vn.placeholder,a=function(){for(var n=0,r=o.length,t=Array(r),e=0;e<r;e++)t[e]=o[e]===i?arguments[n++]:o[e];for(;n<arguments.length;)t.push(arguments[n++]);return pn(u,a,this,this,t)};return a});vn.placeholder=h;var hn=b(function(n,r){var t=(r=Q(r,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=sn(n[e],n)}});var gn=b(function(n,r,t){return setTimeout(function(){return n.apply(null,t)},r)}),yn=vn(gn,h,1);function dn(n){return function(){return!n.apply(this,arguments)}}function mn(n,r){var t;return function(){return 0<--n&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}}var bn=vn(mn,2),jn=!{toString:null}.propertyIsEnumerable("toString"),_n=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function wn(n,r){var t=_n.length,e=n.constructor,u=Vn(e)&&e.prototype||i,o="constructor";for(w(n,o)&&!q(r,o)&&r.push(o);t--;)(o=_n[t])in n&&n[o]!==u[o]&&!q(r,o)&&r.push(o)}function xn(n){if(!Kn(n))return[];if(a)return a(n);var r=[];for(var t in n)w(n,t)&&r.push(t);return jn&&wn(n,r),r}function Sn(n){if(!Kn(n))return[];var r=[];for(var t in n)r.push(t);return jn&&wn(n,r),r}function An(n){for(var r=xn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e}function On(n){for(var r={},t=xn(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r}function Mn(n){var r=[];for(var t in n)Vn(n[t])&&r.push(t);return r.sort()}function En(f,c){return function(n){var r=arguments.length;if(c&&(n=Object(n)),r<2||null==n)return n;for(var t=1;t<r;t++)for(var e=arguments[t],u=f(e),o=u.length,i=0;i<o;i++){var a=u[i];c&&void 0!==n[a]||(n[a]=e[a])}return n}}var Nn=En(Sn),kn=En(xn);function In(n,r,t){r=m(r,t);for(var e,u=xn(n),o=0,i=u.length;o<i;o++)if(r(n[e=u[o]],e,n))return e}function Tn(n,r,t){return r in t}var Bn=b(function(n,r){var t={},e=r[0];if(null==n)return t;Vn(e)?(1<r.length&&(e=g(e,r[1])),r=Sn(n)):(e=Tn,r=Q(r,!1,!1),n=Object(n));for(var u=0,o=r.length;u<o;u++){var i=r[u],a=n[i];e(a,i,n)&&(t[i]=a)}return t}),Rn=b(function(n,t){var r,e=t[0];return Vn(e)?(e=dn(e),1<t.length&&(r=t[1])):(t=E(Q(t,!1,!1),String),e=function(n,r){return!q(t,r)}),Bn(n,e,r)}),Fn=En(Sn,!0);function qn(n){return Kn(n)?Pn(n)?n.slice():Nn({},n):n}function Dn(n,r){var t=xn(r),e=t.length;if(null==n)return!e;for(var u=Object(n),o=0;o<e;o++){var i=t[o];if(r[i]!==u[i]||!(i in u))return!1}return!0}function Wn(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var u=typeof n;return("function"==u||"object"==u||"object"==typeof r)&&function(n,r,t,e){n instanceof h&&(n=n._wrapped);r instanceof h&&(r=r._wrapped);var u=s.call(n);if(u!==s.call(r))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return p.valueOf.call(n)===p.valueOf.call(r)}var o="[object Array]"===u;if(!o){if("object"!=typeof n||"object"!=typeof r)return!1;var i=n.constructor,a=r.constructor;if(i!==a&&!(Vn(i)&&i instanceof i&&Vn(a)&&a instanceof a)&&"constructor"in n&&"constructor"in r)return!1}e=e||[];var f=(t=t||[]).length;for(;f--;)if(t[f]===n)return e[f]===r;if(t.push(n),e.push(r),o){if((f=n.length)!==r.length)return!1;for(;f--;)if(!Wn(n[f],r[f],t,e))return!1}else{var c,l=xn(n);if(f=l.length,xn(r).length!==f)return!1;for(;f--;)if(c=l[f],!w(r,c)||!Wn(n[c],r[c],t,e))return!1}return t.pop(),e.pop(),!0}(n,r,t,e)}function zn(r){return function(n){return s.call(n)==="[object "+r+"]"}}var Pn=r||zn("Array");function Kn(n){var r=typeof n;return"function"==r||"object"==r&&!!n}var Ln=zn("Arguments"),Vn=zn("Function"),Cn=zn("String"),Jn=zn("Number"),Un=zn("Date"),$n=zn("RegExp"),Gn=zn("Error"),Hn=zn("Symbol"),Qn=zn("Map"),Xn=zn("WeakMap"),Yn=zn("Set"),Zn=zn("WeakSet");!function(){Ln(arguments)||(Ln=function(n){return w(n,"callee")})}();var nr=n.document&&n.document.childNodes;function rr(n){return Jn(n)&&c(n)}function tr(n){return!0===n||!1===n||"[object Boolean]"===s.call(n)}function er(n){return n}function ur(r){return Pn(r)?function(n){return x(n,r)}:_(r)}function or(r){return r=kn({},r),function(n){return Dn(n,r)}}function ir(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))}"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof nr&&(Vn=function(n){return"function"==typeof n||!1});var ar=Date.now||function(){return(new Date).getTime()},fr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},cr=On(fr);function lr(r){function t(n){return r[n]}var n="(?:"+xn(r).join("|")+")",e=RegExp(n),u=RegExp(n,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}}var pr=lr(fr),sr=lr(cr);var vr=0;function hr(n){return"\\"+dr[n]}var gr=h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g},yr=/(.)^/,dr={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},mr=/\\|'|\r|\n|\u2028|\u2029/g;function br(n,r){return n._chain?h(r).chain():r}function jr(t){return M(Mn(t),function(n){var r=h[n]=t[n];h.prototype[n]=function(){var n=[this._wrapped];return u.apply(n,arguments),br(this,r.apply(h,n))}}),h}M(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var t=e[r];h.prototype[r]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==r&&"splice"!==r||0!==n.length||delete n[0],br(this,n)}}),M(["concat","join","slice"],function(n){var r=e[n];h.prototype[n]=function(){return br(this,r.apply(this._wrapped,arguments))}}),h.prototype.valueOf=h.prototype.toJSON=h.prototype.value=function(){return this._wrapped},h.prototype.toString=function(){return String(this._wrapped)};var _r=jr({default:h,VERSION:"1.10.2",iteratee:d,restArguments:b,each:M,forEach:M,map:E,collect:E,reduce:k,foldl:k,inject:k,reduceRight:I,foldr:I,find:T,detect:T,filter:B,select:B,reject:function(n,r,t){return B(n,dn(m(r)),t)},every:R,all:R,some:F,any:F,contains:q,includes:q,include:q,invoke:D,pluck:W,where:function(n,r){return B(n,or(r))},findWhere:function(n,r){return T(n,or(r))},max:z,min:function(n,e,r){var t,u,o=1/0,i=1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=O(n)?n:An(n)).length;a<f;a++)null!=(t=n[a])&&t<o&&(o=t);else e=m(e,r),M(n,function(n,r,t){((u=e(n,r,t))<i||u===1/0&&o===1/0)&&(o=n,i=u)});return o},shuffle:function(n){return P(n,1/0)},sample:P,sortBy:function(n,e,r){var u=0;return e=m(e,r),W(E(n,function(n,r,t){return{value:n,index:u++,criteria:e(n,r,t)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(e<t||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")},groupBy:L,indexBy:V,countBy:C,toArray:function(n){return n?Pn(n)?f.call(n):Cn(n)?n.match(J):O(n)?E(n,er):An(n):[]},size:function(n){return null==n?0:O(n)?n.length:xn(n).length},partition:U,first:$,head:$,take:$,initial:G,last:function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[n.length-1]:H(n,Math.max(0,n.length-r))},rest:H,tail:H,drop:H,compact:function(n){return B(n,Boolean)},flatten:function(n,r){return Q(n,r,!1)},without:X,uniq:Y,unique:Y,union:Z,intersection:function(n){for(var r=[],t=arguments.length,e=0,u=A(n);e<u;e++){var o=n[e];if(!q(r,o)){for(var i=1;i<t&&q(arguments[i],o);i++);i===t&&r.push(o)}}return r},difference:nn,unzip:rn,zip:tn,object:function(n,r){for(var t={},e=0,u=A(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},findIndex:un,findLastIndex:on,sortedIndex:an,indexOf:cn,lastIndexOf:ln,range:function(n,r,t){null==r&&(r=n||0,n=0),t=t||(r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),o=0;o<e;o++,n+=t)u[o]=n;return u},chunk:function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(f.call(n,e,e+=r));return t},bind:sn,partial:vn,bindAll:hn,memoize:function(e,u){var o=function(n){var r=o.cache,t=""+(u?u.apply(this,arguments):n);return w(r,t)||(r[t]=e.apply(this,arguments)),r[t]};return o.cache={},o},delay:gn,defer:yn,throttle:function(t,e,u){var o,i,a,f,c=0;function l(){c=!1===u.leading?0:ar(),o=null,f=t.apply(i,a),o||(i=a=null)}function n(){var n=ar();c||!1!==u.leading||(c=n);var r=e-(n-c);return i=this,a=arguments,r<=0||e<r?(o&&(clearTimeout(o),o=null),c=n,f=t.apply(i,a),o||(i=a=null)):o||!1===u.trailing||(o=setTimeout(l,r)),f}return u=u||{},n.cancel=function(){clearTimeout(o),c=0,o=i=a=null},n},debounce:function(t,e,u){function o(n,r){i=null,r&&(a=t.apply(n,r))}var i,a,n=b(function(n){var r;return i&&clearTimeout(i),u?(r=!i,i=setTimeout(o,e),r&&(a=t.apply(this,n))):i=gn(o,e,this,n),a});return n.cancel=function(){clearTimeout(i),i=null},n},wrap:function(n,r){return vn(r,n)},negate:dn,compose:function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},after:function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},before:mn,once:bn,keys:xn,allKeys:Sn,values:An,mapObject:function(n,r,t){r=m(r,t);for(var e=xn(n),u=e.length,o={},i=0;i<u;i++){var a=e[i];o[a]=r(n[a],a,n)}return o},pairs:function(n){for(var r=xn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},invert:On,functions:Mn,methods:Mn,extend:Nn,extendOwn:kn,assign:kn,findKey:In,pick:Bn,omit:Rn,defaults:Fn,create:function(n,r){var t=j(n);return r&&kn(t,r),t},clone:qn,tap:function(n,r){return r(n),n},isMatch:Dn,isEqual:function(n,r){return Wn(n,r)},isEmpty:function(n){return null==n||(O(n)&&(Pn(n)||Cn(n)||Ln(n))?0===n.length:0===xn(n).length)},isElement:function(n){return!(!n||1!==n.nodeType)},isArray:Pn,isObject:Kn,isArguments:Ln,isFunction:Vn,isString:Cn,isNumber:Jn,isDate:Un,isRegExp:$n,isError:Gn,isSymbol:Hn,isMap:Qn,isWeakMap:Xn,isSet:Yn,isWeakSet:Zn,isFinite:function(n){return!Hn(n)&&l(n)&&!c(parseFloat(n))},isNaN:rr,isBoolean:tr,isNull:function(n){return null===n},isUndefined:function(n){return void 0===n},has:function(n,r){if(!Pn(r))return w(n,r);for(var t=r.length,e=0;e<t;e++){var u=r[e];if(null==n||!o.call(n,u))return!1;n=n[u]}return!!t},identity:er,constant:function(n){return function(){return n}},noop:function(){},property:ur,propertyOf:function(r){return null==r?function(){}:function(n){return Pn(n)?x(r,n):r[n]}},matcher:or,matches:or,times:function(n,r,t){var e=Array(Math.max(0,n));r=g(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},random:ir,now:ar,escape:pr,unescape:sr,result:function(n,r,t){Pn(r)||(r=[r]);var e=r.length;if(!e)return Vn(t)?t.call(n):t;for(var u=0;u<e;u++){var o=null==n?void 0:n[r[u]];void 0===o&&(o=t,u=e),n=Vn(o)?o.call(n):o}return n},uniqueId:function(n){var r=++vr+"";return n?n+r:r},templateSettings:gr,template:function(o,n,r){!n&&r&&(n=r),n=Fn({},n,h.templateSettings);var t,e=RegExp([(n.escape||yr).source,(n.interpolate||yr).source,(n.evaluate||yr).source].join("|")+"|$","g"),i=0,a="__p+='";o.replace(e,function(n,r,t,e,u){return a+=o.slice(i,u).replace(mr,hr),i=u+n.length,r?a+="'+\n((__t=("+r+"))==null?'':_.escape(__t))+\n'":t?a+="'+\n((__t=("+t+"))==null?'':__t)+\n'":e&&(a+="';\n"+e+"\n__p+='"),n}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{t=new Function(n.variable||"obj","_",a)}catch(n){throw n.source=a,n}function u(n){return t.call(this,n,h)}var f=n.variable||"obj";return u.source="function("+f+"){\n"+a+"}",u},chain:function(n){var r=h(n);return r._chain=!0,r},mixin:jr});return _r._=_r});
define('lib/inject-css',['require','underscore'],function(require){"use strict";var c=require("underscore"),o={},u=[];return function(e,t){var n,d,r=o[e];r||(r=document.createElement("style"),o[e]=r,n=c.sortedIndex(u,e),(d=o[u[n]])?document.head.insertBefore(r,d):document.head.appendChild(r),u.splice(n,0,e)),r.textContent=t}});
define('vendor/css',{});
define('lib/prefix-css',['require','vendor/css'],function(require){"use strict";var o=require("vendor/css");function u(e,t){for(var r=[],s=0;s<e.length;s++){var n=e[s];if("html"===n)r.push(n);else if(/dcg(-mq)?-aria-alert/.test(n))r.push(n);else if(/^html body( |$)/.test(n))r.push("html"+t+" body"+n.slice("html body".length)),r.push("html body "+t+n.slice("html body".length));else{if(/^html/.test(n))throw new Error("Cannot correctly prefix selector "+n);r.push(t+" "+n)}}return r}return function(e,t){if(t){var r="."+t;return function(e){if(!/\.-?[_a-zA-Z]+[_a-zA-Z0-9-]*/.test(e))throw new Error("Illegal css selector prefix "+e)}(r),s=e,n=r,l=o.parse(s),i=Object.assign({},l,{stylesheet:function(e,t){return Object.assign({},e,{rules:function t(e,r){return e.map(function(e){return e.rules?Object.assign({},e,{rules:t(e.rules,r)}):e.selectors?Object.assign({},e,{selectors:u(e.selectors,r)}):e})}(e.rules,t)})}(l.stylesheet,n)}),o.stringify(i)}return e;var s,n,l,i}});
define('loadcss',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});

define('loadcss!touchtracking', function(){});
define('touchtracking',['require','jquery','ipad.ghostevents','keys','loadcss!./touchtracking'],function(require){var u=require("jquery"),t=require("ipad.ghostevents"),e=require("keys");require("loadcss!./touchtracking"),null==window._touchtracking_id_counter&&(window._touchtracking_id_counter=0),window._touchtracking_id_counter+=1;var d="touchtracking_id_"+window._touchtracking_id_counter;t.evtInScope=function(t){return _(t.target)},t.isGhostEvent=function(t){return!window.PointerEvent&&(!(T!==E&&T!==m&&!L())&&(t.target!==X&&((!t.target||!u.contains(t.target,X))&&(!X||!u.contains(X,t.target)))))};function l(t){for(var e=[];t;)e.push(t),t=t.parentNode;return e}function s(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];if(e.push(o),u(o).is(".dcg-tap-container, .dcg-no-touchtracking"))return u(o).is(".dcg-tap-container."+d)?e:[]}return[]}function n(t,e){X=null,w=l((T=t)===E?e.originalEvent.touches[0].target:e.target),u(s(w)).addClass("dcg-depressed").each(function(){var t=u(this);S(t)&&t.addClass("dcg-focus-by-tap")}),u(w).each(function(){var t=u(this);t.data({originalScrollTop:t.scrollTop(),originalScrollLeft:t.scrollLeft()})}),b={}}function o(t){return t.is("input, textarea, select")||t.hasClass("dcg-mathquill-input-span")||t.is("[contenteditable=true]")}function i(t){X=null,u(".dcg-depressed").removeClass("dcg-depressed");var e=u(document.activeElement);if(!P(t.target)&&S(e))try{e.blur()}catch(t){}if(u(".dcg-focus-by-tap").removeClass("dcg-focus-by-tap"),u(w).each(function(){var t=u(this),e=t.data("originalScrollTop")-t.scrollTop(),n=t.data("originalScrollLeft")-t.scrollLeft();(e||n)&&(b.scroll=!0)}),1===b["dcg-tapstart"]&&1===b["dcg-tapend"]&&!b["dcg-tapcancel"]&&!b.scroll){var n,o="mouse"===t.device?t.clientX:t.originalEvent.changedTouches[0].clientX,i="mouse"===t.device?t.clientY:t.originalEvent.changedTouches[0].clientY;t&&!t.device&&0===o&&0===i&&(o=((n=t.target.getBoundingClientRect()).left+n.right)/2,i=(n.top+n.bottom)/2,t.device="keyboard");for(var a=!1,r=0;r<w.length&&!a;r++){var c,g=u(w[r]);if("function"==typeof g[0].getBoundingClientRect&&(c=g[0].getBoundingClientRect()),"true"===g.attr("tapboundary")&&(a=!0),c){if(o<c.left||i<c.top)continue;if(o>c.right)continue;if(i>c.bottom)continue}X=g[0],x("dcg-tap",t,X);break}}T!==E&&T!==m||(C=setTimeout(function(){C=null,k=(new Date).getTime()},1e3)),w=[],T=0}function c(t){for(var e=[],n=0;n<t.length;n++){var o=t[n];e.push({identifier:o.identifier,x:o.pageX,y:o.pageY,screenX:o.screenX,screenY:o.screenY,pageX:o.pageX,pageY:o.pageY,clientX:o.clientX,clientY:o.clientY})}return e}function a(t){var e=w,n=!!w.length,o=u(".dcg-tap-container."+d+" .dcg-hovered"),i=u.makeArray(o.filter(function(){return _(this)})),a=[],r=[],c=[];s(l(t)).forEach(function(t){n&&-1===e.indexOf(t)||(-1===i.indexOf(t)&&c.push(t),a.push(t))});for(var g=0;g<i.length;g++)t=i[g],-1===a.indexOf(t)&&r.push(t);u(r).removeClass("dcg-hovered").trigger("tipsyhide"),u(c).addClass("dcg-hovered").trigger("tipsyshow")}function r(t){for(var e=0;e<I.length;e++)if(I[e].pointerId===t)return 1}function g(t){for(var e=0;e<I.length;e++)if(I[e].pointerId===t)return I.splice(e,1)[0]}function p(t){0===T&&n(m,t),a(null),I.push(t.originalEvent),t.originalEvent.identifier=t.originalEvent.pointerId,t.originalEvent.touches=I,t.originalEvent.changedTouches=[t.originalEvent],x("dcg-tapstart",t)}function v(t){g(t.originalEvent.pointerId),t.originalEvent.identifier=t.originalEvent.pointerId,t.originalEvent.touches=I,t.originalEvent.changedTouches=[t.originalEvent],x("dcg-tapcancel",t),0===I.length&&i(t)}function h(t){g(t.originalEvent.pointerId),t.originalEvent.identifier=t.originalEvent.pointerId,t.originalEvent.touches=I,t.originalEvent.changedTouches=[t.originalEvent],x("dcg-tapend",t),0===I.length&&i(t)}function f(t){return"touch"===t.originalEvent.pointerType||2===t.originalEvent.pointerType}var E=1,m=4,T=0,y={},b={},w=[],k=0,C=null,X=null,Y=null,I=[],_=function(t){return!!u(t).closest(".dcg-tap-container, .dcg-no-touchtracking").is(".dcg-tap-container."+d)},S=function(t){return 3!==T&&!o(t)&&_(t)},L=function(){return C||(new Date).getTime()-k<500},x=function(t,e,n){if("dcg-tapstart"===t)y[e.identifier]={type:t,pageX:e.originalEvent.changedTouches[0].pageX,pageY:e.originalEvent.changedTouches[0].pageY};else if("dcg-tapmove"===t){var o=e.originalEvent.changedTouches[0],i=y[e.identifier];if(i&&o.pageX===i.pageX&&o.pageY===i.pageY)return;if((T===E||T===m)&&i&&"dcg-tapstart"===i.type&&Math.abs(i.pageX-o.pageX)+Math.abs(i.pageY-o.pageY)<2)return;y[e.identifier]={type:t,pageX:e.originalEvent.changedTouches[0].pageX,pageY:e.originalEvent.changedTouches[0].pageY}}void 0===b[t.toLowerCase()]?b[t.toLowerCase()]=1:b[t.toLowerCase()]++;var a=u.event.fix(e.originalEvent);a.type=t,a.device=T===E||T===m?"touch":3===T?"keyboard":"mouse",a.touches=c(e.originalEvent.touches),a.changedTouches=c(e.originalEvent.changedTouches),a.target=n||e.target;var r="keyboard"!==a.device&&0<b["dcg-longhold"];a.wasLongheld=function(){return r},a.preventTap=function(){b["dcg-tapcancel"]=1},clearTimeout(Y),"dcg-tapstart"===a.type&&"keyboard"!==a.device&&1===a.touches.length&&(Y=setTimeout(function(){x("dcg-longhold",e,n)},500)),a.target&&u.nodeName(a.target,"a")&&"dcg-tap"===a.type&&"keyboard"===a.device&&a.target.click&&a.target.click(),u(a.target).trigger(a)};u(document).on("pointerdown MSPointerDown",function(t){2!==T&&T!==E&&f(t)&&(r(t.originalEvent.pointerId)||p(t))}),u(document).on("pointermove MSPointerMove",function(t){2!==T&&T!==E&&f(t)&&(r(t.originalEvent.pointerId)||p(t),g(t.originalEvent.pointerId),I.push(t.originalEvent),t.originalEvent.identifier=t.originalEvent.pointerId,t.originalEvent.touches=I,t.originalEvent.changedTouches=[t.originalEvent],x("dcg-tapmove",t))}),u(document).on("pointercancel MSPointerCancel",function(t){var e;if(T===m&&f(t)&&r(t.originalEvent.pointerId))for(v(t);e=I.pop();){t=u.Event(e,{originalEvent:e});v(t)}}),u(document).on("pointerup MSPointerUp",function(t){var e;if(T===m&&f(t)&&r(t.originalEvent.pointerId))for(h(t);e=I.pop();){t=u.Event(e,{originalEvent:e});h(t)}});var R=function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",function(){},e),window.removeEventListener("test",function(){},e)}catch(t){}return t}();function A(t,e){var n=R?{passive:!1}:void 0;document.addEventListener(t,function(t){e(u.event.fix(t))},n)}function P(t){var e=!!u(t).closest(".dcg-do-not-blur").length,n=!!u(t).closest(".dcg-do-blur").length;return e&&!n&&_(t)}return A("touchstart",function(t){2!==T&&T!==m&&(0===T&&n(E,t),a(null),x("dcg-tapstart",t))}),A("touchmove",function(t){T===E&&x("dcg-tapmove",t)}),A("touchcancel",function(t){T===E&&(x("dcg-tapcancel",t),0===t.originalEvent.touches.length&&i(t))}),A("touchend",function(t){T===E&&(x("dcg-tapend",t),0===t.originalEvent.touches.length&&i(t))}),u(document).on("mousedown",function(t){1!==t.button&&2!==t.button&&(T===E||T===m||L()?!u(t.target).is("input, textarea, select")&&_(t.target)&&t.preventDefault():(n(2,t),t.originalEvent.touches=[t],t.originalEvent.changedTouches=[t],x("dcg-tapstart",t)))}),u(document).ready(function(){u(document).on("mousedown",function(t){if(P(t.target)){t.preventDefault();try{var e,n=window.getSelection();1!==n.rangeCount||(e=n.getRangeAt(0)).startContainer===e.endContainer&&u(e.startContainer).closest(".dcg-text-selectable").length&&n.removeAllRanges()}catch(t){}}})}),u(document).on("mouseleave",function(t){0===T&&(L()||a(null))}),u(document).on("mousemove",function(t){1!==t.button&&2!==t.button&&T!==E&&T!==m&&(L()||(a(t.target),t.originalEvent.touches=[t],t.originalEvent.changedTouches=[t],x("dcg-tapmove",t)))}),u(document).on("mouseup",function(t){1!==t.button&&2!==t.button&&2===T&&(t.originalEvent.touches=[],t.originalEvent.changedTouches=[t],x("dcg-tapend",t),i(t))}),u(document).on("keydown",function(t){if((e.lookup(t)===e.ENTER||e.lookup(t)===e.SPACEBAR)&&_(t.target)&&3!==T){if(u(t.target).is('a:not([ontap]), button, input, textarea, select, [contenteditable="true"]'))return;t.preventDefault(),n(3,t),t.originalEvent.touches=[t],t.originalEvent.changedTouches=[t],x("dcg-tapstart",t)}}),u(document).on("keyup",function(t){e.lookup(t)!==e.ENTER&&e.lookup(t)!==e.SPACEBAR||!_(t.target)||3===T&&(t.originalEvent.touches=[],t.originalEvent.changedTouches=[t],x("dcg-tapend",t),i(t))}),{monitor:function(t){u(t).addClass("dcg-tap-container"),u(t).addClass(d)},ignore:function(t){u(t).addClass("dcg-no-touchtracking")},isTapActive:function(){return 0!==T},elIsFocusable:o}});
define('browser',['require','jquery'],function(require){var n,t,a,r,e,i,o,I=require("jquery"),l={IS_IE8:null!==navigator.userAgent.match(/MSIE 8.0/i),IS_IE9:null!==navigator.userAgent.match(/MSIE 9.0/i),IS_IE:null!==navigator.userAgent.match(/MSIE/i)||null!==navigator.userAgent.match(/Trident/i)&&null!==navigator.userAgent.match(/rv:11/i),IS_EDGE:null!==navigator.userAgent.match(/Edge/i),IS_IPAD:null!==navigator.userAgent.match(/iPad/i),IS_MOBILE:null!==navigator.userAgent.match(/Mobile|Android/i),IS_ANDROID:null!==navigator.userAgent.match(/Android/i),IS_IOS:null!==navigator.userAgent.match(/(iPad|iPhone|iPod)/i)||"MacIntel"===navigator.platform&&1<navigator.maxTouchPoints,IS_CHROME:null!==navigator.userAgent.match(/Chrome/i),IS_FIREFOX:null!==navigator.userAgent.match(/Firefox/i),IS_SAFARI:null!==navigator.userAgent.match(/^((?!chrome|android).)*safari/i),IS_APPLE:null!==navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),IS_WINDOWS:null!==navigator.platform.match(/(Win32)/i),IS_TOUCH:null!==navigator.userAgent.match(/Touch/i),IS_KINDLE:null!==navigator.userAgent.match(/Kindle/i)||null!==navigator.userAgent.match(/Silk/i),IS_BRAILLENOTE:null!==navigator.userAgent.match(/KeyWeb/i),IS_IN_IFRAME:window.parent!==window};return l.IS_TABLET=l.IS_IPAD||l.IS_ANDROID||l.IS_KINDLE,l.IS_TOUCH_DEVICE=l.SHOULD_NOT_AUTOFOCUS=l.IS_IOS||l.IS_ANDROID||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i),l.IOS_VERSION=(n=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3]||0,10)]:null,l.MAC_VERSION=(t=navigator.appVersion.match(/OS X (\d+)_(\d+)_?(\d+)?/))?[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]:null,l.CHROME_VERSION=(a=navigator.appVersion.match(/Chrom(e|ium)\/([0-9]+)\.([0-9]+)\.?([0-9]+)?/))?[parseInt(a[2],10),parseInt(a[3],10),parseInt(a[4]||0,10)]:null,l.SUPPORTS_INPUTMODE=(r=l.IOS_VERSION,e=l.MAC_VERSION,i=l.CHROME_VERSION,r&&13<=r[0]||l.IS_IOS&&!r&&e&&(10<e[0]||10===e[0]&&15<=e[1])||l.IS_ANDROID&&i&&76<=i[0]),l.SUPPORTS_TRANSLATE3D=!1,I(document).ready(function(){var n,t,a=document.createElement("p"),r={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(var e in document.body.insertBefore(a,null),r)if(void 0!==a.style[e]){if(a.style[e]="translate3d(1px,1px,1px)",!(t=window.getComputedStyle(a)))return;n=t.getPropertyValue(r[e])}document.body.removeChild(a),l.SUPPORTS_TRANSLATE3D=void 0!==n&&0<n.length&&"none"!==n}),l.translateRule=function(n,t){return l.SUPPORTS_TRANSLATE3D?"translate3d("+n+(n?"px":"")+","+t+(t?"px":"")+",0)":"translate("+n+(n?"px":"")+","+t+(t?"px":"")+")"},l.SUPPORTS_CANVAS=!(!(o=document.createElement("canvas")).getContext||!o.getContext("2d")),l});
define('main/load_data',['require','jquery'],function(require){"use strict";return require("jquery")("body").data("load-data")});
define('core/lib/deepCopy',["require","exports"],function(require,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function r(e){var t=e;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t)return t;if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(r);var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=r(t[o]));return n}});
define('lib/parse-query-params',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getQueryParams=void 0,e.getQueryParams=function(){var e="";try{"?"==(e=location.search)[0]&&(e=e.slice(1))}catch(e){}for(var r={},t=0,n=e.split("&");t<n.length;t++){var o=n[t].split("=");2==o.length?r[o[0]]=decodeURIComponent(o[1]):r[o[0]]=!0}return r}});
define('config',["require","exports","core/lib/deepCopy","lib/parse-query-params"],function(require,e,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.all=e.get=void 0;var i={},t=n.getQueryParams();if("undefined"!=typeof Desmos&&Desmos.config)for(var r in Desmos.config)Desmos.config.hasOwnProperty(r)&&(t[r]=Desmos.config[r]);function s(e){return t.hasOwnProperty(e)}function a(e){i[e]=s(e)}function l(e){i[e]=!s("no"+e)}a("testing"),a("maintenance"),a("disableScrollFix"),a("nativeOnscreenKeypad"),a("hidden"),a("disableMouseInteractions"),a("advancedStyling"),a("clickableObjects"),a("outofdom"),t.lang&&(i.language=t.lang),t.fontSize&&(i.fontSize=t.fontSize),t.backgroundColor&&(i.backgroundColor="#"+t.backgroundColor),t.textColor&&(i.textColor="#"+t.textColor),i.no_navigation_warning=s("noconcat")||s("testing"),i.previewMessage="You're previewing some new accessibility features.",i.previewFeedbackUrl="mailto:feedback@desmos.com";var c=location&&"preview.desmos.com"===location.hostname;i.previewMode=s("previewMode")||c,a("lockViewport"),a("administerSecretFolders"),a("clickableObjects"),a("degreeMode"),a("clearIntoDegreeMode"),a("plaidMode"),a("editOnWeb"),a("crossOriginSaveTest"),a("showResetButtonOnGraphpaper"),a("transparentBackground"),l("links"),l("trace"),l("zoomFit"),a("expressionsCollapsed"),a("invertedColors"),a("projectorMode"),l("images"),l("folders"),l("settingsMenu"),l("expressionsTopbar"),l("zoomButtons"),l("keypad"),l("graphpaper"),l("expressions"),l("branding"),l("pointsOfInterest"),l("plotSingleVariableImplicitEquations"),l("plotImplicits"),l("plotInequalities"),l("notes"),l("sliders"),a("pauseWhenOffscreen"),a("worksheetSVG"),l("brailleControls"),a("audioTraceKeypad"),a("sciKeypad"),a("4fnKeypad"),a("ans"),s("braille")&&(i.braille=!0),l("qwertyKeyboard"),a("restrictedFunctions"),a("forceEnableGeometryFunctions"),l("functionDefinition"),a("singleExpression"),a("restrictedEditing"),a("replaceCommaWith10Exp"),a("replaceRoundWithReciprocal"),s("typingAsteriskWritesTimesSymbol")&&(i.typingAsteriskWritesTimesSymbol=!0),l("labels"),l("distributions"),(i["4fnKeypad"]?a:l)("decimalToFraction"),a("3d"),s("exponentButtonForSquareRoot")?i.additionalFunctions=["exponent"]:t.additionalFunctions&&"string"==typeof t.additionalFunctions&&(i.additionalFunctions=t.additionalFunctions.split(",")),e.get=function(e){return i[e]},e.all=function(){return o.default(i)}});

define('loadcss!print', function(){});

define('text!l10n/all-en-strings.ftl',[],function () { return '### Strings shared among tools and homepage\n\n\n### 4366 English words, 815 English strings\n\naccount-shell-button-braille-nemeth = Nemeth\naccount-shell-button-braille-ueb = UEB\naccount-shell-button-cancel = Cancel\naccount-shell-button-clear = Clear\naccount-shell-button-download-braille = Download Braille Equations\naccount-shell-button-download-png = Download PNG\naccount-shell-button-download-svg = Download SVG\naccount-shell-button-duplicate-mac = Duplicate or Rename (cmd+shift+s)\naccount-shell-button-duplicate-pc = Duplicate or Rename (ctrl+shift+s)\naccount-shell-button-embed = Embed\naccount-shell-button-export-image = Export Image\naccount-shell-button-hide-browser-warning = Hide this warning.\naccount-shell-button-join-contest = Join In!\naccount-shell-button-line-medium = Medium\naccount-shell-button-line-thick = Thick\naccount-shell-button-line-thin = Thin\naccount-shell-button-log-in = Log In\naccount-shell-button-mygraphs-attempt-recovery = Attempt recovery.\naccount-shell-button-mygraphs-cancel = Cancel\naccount-shell-button-mygraphs-close-graph-list = Close Graph List\naccount-shell-button-mygraphs-close-graph-preview = Close Graph Preview\naccount-shell-button-mygraphs-delete-graph = Delete Graph\naccount-shell-button-mygraphs-delete-title = Delete { $graphTitle }\naccount-shell-button-mygraphs-offline-try-again = offline. click to try again.\naccount-shell-button-mygraphs-save = Save\naccount-shell-button-mygraphs-sign-out = Sign Out\naccount-shell-button-mygraphs-try-again = Try again\naccount-shell-button-open-construction = Open Construction\naccount-shell-button-open-graph = Open Graph\naccount-shell-button-print = Print\naccount-shell-button-retry-now = Retry now\naccount-shell-button-save = Save\naccount-shell-button-send-feedback = Send Feedback\naccount-shell-button-sign-up = Sign Up\naccount-shell-button-submit-for-others = Submit here.\naccount-shell-button-submit-graph = Submit This Graph\naccount-shell-button-svg-options = SVG Options\naccount-shell-error-art-contest-logged-out = You must be logged in to enter the art contest.\naccount-shell-error-change-email-logged-out = You must be logged in to change your email.\naccount-shell-error-change-name-logged-out = You must be logged in to change your name.\naccount-shell-error-changing-name = There was an error changing your user name.\naccount-shell-error-consent-error = There was an error accepting your consent.\naccount-shell-error-consent-logged-out = You must be logged in to consent to data collection.\naccount-shell-error-create-account-unexpected = Sorry, there was an error creating your account.\naccount-shell-error-delete-graph-logged-out = You must be logged in to delete graphs.\naccount-shell-error-delete-graph-logged-out-2 = You must be logged in to delete a graph.\naccount-shell-error-delete-unexpected = Sorry, there was an unexpected error deleting this graph. Error { $code }.\naccount-shell-error-deletion-error = There was an error. Try again later?\naccount-shell-error-deletion-error-2 = Error while deleting your account.\naccount-shell-error-deletion-link-not-found = We can\'t find that deletion token. Perhaps it\'s been used already?\naccount-shell-error-email-already-registered = Sorry, someone has already registered with this email address.\naccount-shell-error-email-invalid = Please enter a valid email address.\naccount-shell-error-email-password-mismatch = Sorry, your email and password did not match.\naccount-shell-error-email-too-short = Please enter an email address that is at most { $num } characters.\naccount-shell-error-feedback-empty = Please enter your feedback\naccount-shell-error-feedback-unexpected = Sorry, there was an unexpected problem sending feedback. Error { $code }.\naccount-shell-error-invalid-deletion-link = This is not a valid deletion link.\naccount-shell-error-invalid-recovery-link = This is not a valid recovery link.\naccount-shell-error-logged-in-register = You are already logged in. You must first log out to register as a different user.\naccount-shell-error-logging-in = Error logging in.\naccount-shell-error-logging-out = Error logging out.\naccount-shell-error-missing-email = Please enter your email address.\naccount-shell-error-missing-name = Please enter your name.\naccount-shell-error-missing-new-password = Please enter your new password.\naccount-shell-error-missing-password = Please enter your password.\naccount-shell-error-mygraphs-check-connection = Check your internet connection?\naccount-shell-error-mygraphs-error-deleting = Error deleting.\naccount-shell-error-mygraphs-error-loading = Error loading graph\naccount-shell-error-name-too-long = Please enter a name that is at most { $num } characters.\naccount-shell-error-new-password-too-long = Please enter a new password that is at most { $num } characters.\naccount-shell-error-new-password-too-short = Please enter a new password that is at least { $num } characters.\naccount-shell-error-password-same-as-old = New password cannot match old password.\naccount-shell-error-password-too-long = Please enter a password that is at most { $num } characters.\naccount-shell-error-password-too-short = Please enter a password that is at least { $num } characters.\naccount-shell-error-passwords-do-not-match = The passwords that you entered did not match. Please try again.\naccount-shell-error-problem-resetting-password = Problem resetting your password. Please try again.\naccount-shell-error-recover-link-not-found = We can\'t find that recovery link. Perhaps it\'s been used already?\naccount-shell-error-recover-password-too-short = Passwords must be at least { $num } characters long\naccount-shell-error-recover-unrecognized-email = Sorry, we could not find any users registered with this email address.\naccount-shell-error-request-error = Error while making request.\naccount-shell-error-save-art-contest = Error saving. Please try again later.\naccount-shell-error-save-graph = Sorry, there was an unexpected error saving your graph. Error { $code }.\naccount-shell-error-save-graph-logged-out = You must be logged in to save graphs.\naccount-shell-error-setting-email = Error setting new email.\naccount-shell-error-sharing-link = Sorry, there was an error generating a link to your graph. Check your internet connection.\naccount-shell-error-something-went-wrong = Something went wrong, please report this to desmos.com support. (Error { $error_num })\naccount-shell-error-submitting = Error submitting. Please try again later.\naccount-shell-error-unexpected-error = Unexpected error.\naccount-shell-error-unknown = Sorry! Something went wrong. Please try again later.\naccount-shell-error-update-graph-logged-out = You must be logged in to update graphs.\naccount-shell-error-user-info-logged-out = You must be logged in to retrieve user information.\naccount-shell-error-verifying-email = Sorry, there was a problem verifying your email.\naccount-shell-error-view-graphs-logged-out = You must be logged in to view saved graphs.\naccount-shell-heading-3dcalc-page-title = Desmos | 3D Graphing Calculator\naccount-shell-heading-age-bracket = Your Age Bracket\naccount-shell-heading-braille-mode = Braille Mode\naccount-shell-heading-country = Your Country\naccount-shell-heading-download-instructions = Download Instructions\naccount-shell-heading-duplicate-construction = Duplicate This Construction\naccount-shell-heading-duplicate-graph = Duplicate This Graph\naccount-shell-heading-embossers = Tactile Graphics Embossers\naccount-shell-heading-embossing-instructions = Embossing Instructions\naccount-shell-heading-export-graph = Export Your Graph\naccount-shell-heading-export-size = Size\naccount-shell-heading-feedback = Feedback\naccount-shell-heading-geometry-page-title = Desmos | Geometry\naccount-shell-heading-graphingcalc-page-title = Desmos | Graphing Calculator\naccount-shell-heading-line-thickness = Line Thickness\naccount-shell-heading-math-art-contest = Global Math Art Contest\naccount-shell-heading-mygraphs-examples = Examples\naccount-shell-heading-mygraphs-recovered-work = Recovered Work\naccount-shell-heading-mygraphs-saved-constructions = Saved Constructions\naccount-shell-heading-mygraphs-saved-graphs = Saved Graphs\naccount-shell-heading-name-email = Your Name & Email\naccount-shell-heading-resources = Resources\naccount-shell-heading-save-construction = Save This Construction\naccount-shell-heading-save-graph = Save This Graph\naccount-shell-heading-share-graph = Share Your Graph\naccount-shell-heading-submit-graph = Submit This Graph\naccount-shell-heading-title-mygraphs-account-settings = Account Settings\naccount-shell-heading-title-mygraphs-search = Search\naccount-shell-heading-tours = Tours\naccount-shell-heading-unsupported-browser = Unsupported Browser\naccount-shell-label-account-information = Account Information\naccount-shell-label-age-13-14 = Age 1314\naccount-shell-label-age-15-16 = Age 1516\naccount-shell-label-age-17-18 = Age 1718\naccount-shell-label-beta = Beta\naccount-shell-label-betchacant-loading = Challenge accepted...\naccount-shell-label-country-placeholder = Your Country\naccount-shell-label-created-days-ago = { $number } days ago\naccount-shell-label-created-hours-ago = { $number } hours ago\naccount-shell-label-created-last-week = last week\naccount-shell-label-created-minutes-ago = { $number } minutes ago\naccount-shell-label-created-on-date = on { $month } { $day }, { $year }\naccount-shell-label-created-one-hour-ago = one hour ago\naccount-shell-label-created-one-minute-ago = one minute ago\naccount-shell-label-created-seconds-ago = less than a minute ago\naccount-shell-label-created-weeks-ago = { $number } weeks ago\naccount-shell-label-created-yesterday = yesterday\naccount-shell-label-email-address = Email Address\naccount-shell-label-export-size-large-rectangle = Large Rectangle\naccount-shell-label-export-size-large-square = Large Square\naccount-shell-label-export-size-medium-rectangle = Medium Rectangle\naccount-shell-label-export-size-medium-square = Medium Square\naccount-shell-label-export-size-small-square = Small Square\naccount-shell-label-feedback-email = Please provide an email so we can write back.\naccount-shell-label-feedback-placeholder = Send us your question or suggestion...\naccount-shell-label-feedback-sending = sending...\naccount-shell-label-full-name = Full Name\naccount-shell-label-graph-title = Title\naccount-shell-label-help = Help\naccount-shell-label-help-menu = Help Menu\naccount-shell-label-language = Language\naccount-shell-label-loading = Loading...\naccount-shell-label-math-art-contest = Global Math Art Contest\naccount-shell-label-month-apr = Apr\naccount-shell-label-month-aug = Aug\naccount-shell-label-month-dec = Dec\naccount-shell-label-month-feb = Feb\naccount-shell-label-month-jan = Jan\naccount-shell-label-month-jul = Jul\naccount-shell-label-month-jun = Jun\naccount-shell-label-month-mar = Mar\naccount-shell-label-month-may = May\naccount-shell-label-month-nov = Nov\naccount-shell-label-month-oct = Oct\naccount-shell-label-month-sep = Sep\naccount-shell-label-mygraphs-example = example\naccount-shell-label-mygraphs-last-saved = last saved: { $date }\naccount-shell-label-mygraphs-no-unsaved-changes = no unsaved changes\naccount-shell-label-mygraphs-unsaved-graph = unsaved graph\naccount-shell-label-no-unsaved-changes = No Unsaved Changes\naccount-shell-label-open-graph-mac = { $open_graph } (cmd+o)\naccount-shell-label-open-graph-pc = { $open_graph } (ctrl+o)\naccount-shell-label-optional = optional\naccount-shell-label-save-changes-mac = Save Changes (cmd+s)\naccount-shell-label-save-changes-pc = Save Changes (ctrl+s)\naccount-shell-label-saving-graph = Saving graph...\naccount-shell-label-share = share\naccount-shell-label-share-graph = Share Graph\naccount-shell-label-share-link = Share this link:\naccount-shell-label-submitting = Submitting...\naccount-shell-label-success = Success!\naccount-shell-label-zoom = Zoom: { $value }%\naccount-shell-link-account-settings = Account Settings\naccount-shell-link-download-chrome = Click here to download Google Chrome.\naccount-shell-link-getting-started = Getting Started\naccount-shell-link-help = Help\naccount-shell-link-help-center = Help Center\naccount-shell-link-keyboard-shortcuts = Keyboard Shortcuts\naccount-shell-link-learn-more = Learn More\naccount-shell-link-learn-more-art-contest = Learn more.\naccount-shell-link-mygraphs-log-in = Log In\naccount-shell-link-mygraphs-sign-up = Sign Up\naccount-shell-link-privacy = Privacy Policy\naccount-shell-link-share-thoughts = Share your thoughts!\naccount-shell-link-sign-out = Sign Out\naccount-shell-link-terms = Terms of Service\naccount-shell-link-user-guide = Desmos User Guide\naccount-shell-link-video-tutorials = Video Tutorials\naccount-shell-narration-back = Back\naccount-shell-narration-clear-selected-country = Clear Selected Country\naccount-shell-narration-graph-preview = Graph Preview\naccount-shell-narration-image-download = Image Download\naccount-shell-narration-language-menu = Language Options Menu\naccount-shell-narration-mygraphs-open-graph = Open graph\naccount-shell-narration-share-options = Share Options\naccount-shell-narration-size-options = Size Options\naccount-shell-text-3d-confirm-leave = Are you sure you want to leave this construction? Your unsaved work will be lost.\naccount-shell-text-art-contest-about = Want to share your awesome graph with the world? Students ages 13-18 can enter our Global Math Art Contest before April 30th for a chance to be featured on our website and win other prizes!\naccount-shell-text-art-contest-copyright-agreement = This is my original work and doesn\'t use copyrighted material.\naccount-shell-text-art-contest-notice-default = Open one of your saved graphs or create a new one, and then submit it here! Max one entry per person.\naccount-shell-text-art-contest-notice-login = If you want to submit a graph you\'ve made, please sign in and open your graph.\naccount-shell-text-art-contest-success = Submission received. If you\'d like to revise your submission, feel free to resubmit anytime before April 30th. We\'ll only look at the most recent submission. Congratulations, and keep graphing!\naccount-shell-text-check-recovery-link = Please check your email for a password recovery link.\naccount-shell-text-confirm-leave = Are you sure you want to leave this graph? Your unsaved work will be lost.\naccount-shell-text-construction-cleared = Construction Cleared.\naccount-shell-text-contest-submit-for-others = Are you a teacher or guardian looking to submit your student\'s graph?\naccount-shell-text-download-instructions = To download, right click on the image of the graph select "Save As." You might also be able to click and drag the image onto your desktop.\naccount-shell-text-embossing-etc-print = Set paper size to { $size }. Then click "Edit" and select File > Emboss.\naccount-shell-text-embossing-etc-save = Save this image. Open Firebird, select File > Open > Image File, and open the image.\naccount-shell-text-embossing-vpmax-print = Right click image and select "print". Set paper size to { $size }.\naccount-shell-text-embossing-vpmax-save = Right click graph image and save to desktop.\naccount-shell-text-error = error\naccount-shell-text-feedback-sent = Thanks for the feedbackyou\'ll hear from us soon!\naccount-shell-text-geometry-confirm-leave = Are you sure you want to leave this construction? Your unsaved work will be lost.\naccount-shell-text-graph-cleared = Graph cleared.\naccount-shell-text-local-regulations-notice = Local regulations require you to submit your graph through your teacher or guardian. Share this link with them:\naccount-shell-text-logged-in = Logged in successfully!\naccount-shell-text-login-window-blocked-apple = Login window blocked. Please allow popups from desmos.com to sign in with Apple\naccount-shell-text-login-window-blocked-google = Login window blocked. Please allow popups from desmos.com to sign in with Google.\naccount-shell-text-maintenance-mode = Desmos is in Maintenance Mode.\naccount-shell-text-mygraphs-attempting-recovery = Attempting recovery...\naccount-shell-text-mygraphs-count-more = { $count } more...\naccount-shell-text-mygraphs-current-construction = Current Construction\naccount-shell-text-mygraphs-current-graph = Current Graph\naccount-shell-text-mygraphs-deleting = Deleting...\naccount-shell-text-mygraphs-loading = Loading...\naccount-shell-text-mygraphs-lost-work = Lost work?\naccount-shell-text-mygraphs-maintenance-mode = Desmos is temporarily in maintenance mode. You can open example graphs, but won\'t be able to sign in, open your graphs, or save any changes. We\'re so sorry for the inconvenience.\naccount-shell-text-mygraphs-new-blank-graph = New Blank Graph\naccount-shell-text-mygraphs-new-construction = New Construction\naccount-shell-text-mygraphs-no-examples-match-search = No examples match your search.\naccount-shell-text-mygraphs-no-saved-graphs = No saved graphs yet.\naccount-shell-text-mygraphs-no-search-results = No saved graphs match your search.\naccount-shell-text-mygraphs-opened-graph = Opened \'{ $graphTitle }\'\naccount-shell-text-mygraphs-opening = Opening...\naccount-shell-text-mygraphs-or = or\naccount-shell-text-mygraphs-search-by-title = search by title\naccount-shell-text-mygraphs-share-thoughts = Share your thoughts!\naccount-shell-text-mygraphs-slow-big-constructions = This can take a little while for big constructions...\naccount-shell-text-mygraphs-slow-big-graphs = This can take a little while for big graphs...\naccount-shell-text-mygraphs-synced = synced!\naccount-shell-text-mygraphs-to-save-constructions = to save your constructions!\naccount-shell-text-mygraphs-to-save-graphs = to save your graphs!\naccount-shell-text-mygraphs-updating-graphs = updating graphs...\naccount-shell-text-mygraphs-version = Version\naccount-shell-text-new-construction-created = New construction created.\naccount-shell-text-new-graph-created = New graph created.\naccount-shell-text-or = or\naccount-shell-text-saved = saved\naccount-shell-text-unsupported-browser-android = Desmos works best on your version of Android if you use the Chrome Browser.\naccount-shell-text-untitled = Untitled\naccount-shell-text-untitled-graph = Untitled Graph\nshared-button-accept = Accept\nshared-button-cancel = Cancel\nshared-button-change-email-address = Change Email Address\nshared-button-change-email-and-password = Change Email and Password\nshared-button-close-dialog = Close Dialog\nshared-button-continue-to-desmos = Continue to Desmos\nshared-button-create-account = Create Account\nshared-button-delete-account-question = Delete your Desmos account?\nshared-button-email-address-narrow = Email\nshared-button-email-address-wide = Email Address\nshared-button-external-account-narrow = External\nshared-button-external-account-wide = External Account\nshared-button-go-to-account-settings = Go to Account Settings\nshared-button-google-account-narrow = Google\nshared-button-google-account-wide = Google Account\nshared-button-i-am-not-a-teacher = I am not a teacher.\nshared-button-login = Log in\nshared-button-login-capitalized = Log In\nshared-button-login-with-apple = Log in with Apple\nshared-button-login-with-google = Log in with Google\nshared-button-recover-password = Recover Password\nshared-button-save = Save\nshared-button-send-delete-account-email = Send Delete Account Email\nshared-button-send-email = Send Email\nshared-button-sign-up-as-a-teacher = Sign up as a teacher.\nshared-button-try-again = Didn\'t work? Try again!\nshared-calculator-button-braille-mode-nemeth = Nemeth\nshared-calculator-button-braille-mode-ueb = UEB\nshared-calculator-button-clear = clear\nshared-calculator-button-clear-all = clear all\nshared-calculator-button-controlbar-functions = functions\nshared-calculator-button-language = Language\nshared-calculator-button-mac = Mac Shortcuts\nshared-calculator-button-print = Print\nshared-calculator-button-projector-mode = Projector Mode\nshared-calculator-button-reverse-contrast = Reverse Contrast\nshared-calculator-button-windows-chrome = Windows / ChromeOS Shortcuts\nshared-calculator-error-add-arguments-to-definition-many = Try including \'{ $symbols }\' and \'{ $lastSymbol }\' as arguments by defining the function as \'{ $newSignature }\'.\nshared-calculator-error-add-arguments-to-definition-one = Try including \'{ $lastSymbol }\' as an argument by defining the function as \'{ $newSignature }\'.\nshared-calculator-error-add-type-error = Cannot add { $symbol1 } and { $symbol2 }.\nshared-calculator-error-adjacent-numbers = Sorry, I don\'t know what to do with adjacent numbers \'{ $left }\' and \'{ $right }\'. Try using parentheses or a \'*\' symbol.\nshared-calculator-error-and-type-error = Cannot apply { $symbol } to { $symbol1 } and { $symbol2 }.\nshared-calculator-error-ans-undefined = The previous expression didn\'t define any value for ans.\nshared-calculator-error-assignments-unsupported = This calculator does not support defining variables.\nshared-calculator-error-bad-ans-context = You can\'t use \'ans\' in this context.\nshared-calculator-error-bad-implicit-call = Use parentheses around the argument of \'{ $symbol }\'.\nshared-calculator-error-bad-integral-bound-dependency = Integration bounds can\'t depend on integration variable \'{ $symbol }\'.\nshared-calculator-error-bad-log-exponent = Only { $form } is supported. Otherwise, use parens.\nshared-calculator-error-bad-product-bound-dependency = Product bounds can\'t depend on product index \'{ $symbol }\'.\nshared-calculator-error-bad-sample-size = Sample size must be at least 1.\nshared-calculator-error-bad-sum-bound-dependency = Summation bounds can\'t depend on summation index \'{ $symbol }\'.\nshared-calculator-error-bad-trig-exponent = Only { $form1 } and { $form2 } are supported. Otherwise, use parens.\nshared-calculator-error-bad-tuple-dimensions = Points may only have { $symbol } coordinates.\nshared-calculator-error-binary-operator-missing-operand = You need something on both sides of the \'{ $symbol }\' symbol.\nshared-calculator-error-blank-expression = You haven\'t written anything yet.\nshared-calculator-error-boxplot-breadth-invalid = Invalid height. Try using any number.\nshared-calculator-error-boxplot-offset-invalid = Invalid offset. Try using any number.\nshared-calculator-error-cannot-redefine = You can\'t redefine \'{ $symbol }\' because it\'s already defined.\nshared-calculator-error-cannot-redefine-root = You can\'t define \'{ $symbol }\' because \'{ $symbolRoot }\' is already defined.\nshared-calculator-error-cannot-subscript = \'{ $symbol }\' cannot have a subscript.\nshared-calculator-error-cdf-max-invalid = Invalid cdf max. Try using any number.\nshared-calculator-error-cdf-max-less-than-min = Invalid cdf limits. Min should be less than max.\nshared-calculator-error-cdf-min-invalid = Invalid cdf min. Try using any number.\nshared-calculator-error-cdf-too-many-arguments = \'cdf\' should be called on a distribution with at most two numbers. { $recommendation }\nshared-calculator-error-cdf-too-many-arguments-recommendation = For example, try typing: D.cdf(-1,1) where D=normaldist().\nshared-calculator-error-cdf-wrong-arity = \'cdf\' should be called on a distribution with at least one number. { $recommendation }\nshared-calculator-error-cdf-wrong-arity-recommendation = For example, try typing: D.cdf(x) where D=normaldist().\nshared-calculator-error-clickable-object-assignment-not-defined = "{ $symbol }" is not defined. Try using a different variable or adding a slider.\nshared-calculator-error-clickable-object-assignment-not-identifier = Invalid symbol. Try using a single letter.\nshared-calculator-error-clickable-object-invalid-expression = Can\'t evaluate this. Try a number or simple expression.\nshared-calculator-error-colon-missing-condition = The left side of a \':\' must be a condition, like \'x>1\'.\nshared-calculator-error-colors-unsupported = This calculator does not support colors.\nshared-calculator-error-comparator-type-error = Cannot compare { $symbol1 } to { $symbol2 }.\nshared-calculator-error-complicated-double-inequality = We only support solved double inequalities. Try deleting one side of the inequality.\nshared-calculator-error-complicated-polar-implicit = Polar equations must be linear in r.\nshared-calculator-error-constant-unsupported = This calculator does not support the constant \'{ $symbol }\'.\nshared-calculator-error-deeply-nested = Definitions are nested too deeply.\nshared-calculator-error-dependency-cycle = \'{ $symbols }\' and \'{ $lastSymbol }\' can\'t be defined in terms of each other.\nshared-calculator-error-derivative-missing-body = What do you want to take the derivative of?\nshared-calculator-error-derivative-type-error = Cannot take the derivative of { $symbol }.\nshared-calculator-error-derivative-variable-type-error = Cannot take derivative with respect to \'{ $symbol1 }\' because it is { $symbol2 }.\nshared-calculator-error-differential-with-superscript = Integration variable cannot have a superscript.\nshared-calculator-error-distribution-as-function = Cannot call distribution \'{ $symbol }\' as a function. Try \'{ $symbol }.pdf(x)\'.\nshared-calculator-error-divide-type-error = Cannot divide { $symbol1 } by { $symbol2 }.\nshared-calculator-error-domain-max-invalid = Invalid domain max. Try using any number.\nshared-calculator-error-domain-max-less-than-min = Invalid domain limits. Min should be less than max.\nshared-calculator-error-domain-min-invalid = Invalid domain min. Try using any number.\nshared-calculator-error-dot-lhs-type-error = Cannot call \'{ $symbol }\' on { $type }.\nshared-calculator-error-empty-paren = Parentheses cannot be empty.\nshared-calculator-error-empty-pipe = Absolute value symbol cannot be empty.\nshared-calculator-error-empty-radical = Radical cannot be empty.\nshared-calculator-error-empty-radical-index = Radical index cannot be empty.\nshared-calculator-error-empty-square-bracket = Square brackets cannot be empty.\nshared-calculator-error-empty-subscript = Subscripts cannot be empty.\nshared-calculator-error-empty-superscript = Superscripts cannot be empty.\nshared-calculator-error-equation-required = Try adding an equals sign to turn this into an equation.\nshared-calculator-error-equation-required-symbol = Try adding \'{ $lhs }\' to the beginning of this equation.\nshared-calculator-error-equations-unsupported = This calculator does not support this type of equation.\nshared-calculator-error-exponent-type-error = Cannot raise { $symbol1 } to { $symbol2 }.\nshared-calculator-error-feature-unavailable = This feature is not available in the current calculator.\nshared-calculator-error-fraction-empty = You need a numerator and denominator for your fraction.\nshared-calculator-error-fraction-missing-denominator = You need a denominator for the bottom of your fraction.\nshared-calculator-error-fraction-missing-numerator = You need a numerator for the top of your fraction.\nshared-calculator-error-function-definition-unsupported = This calculator does not support function definitions.\nshared-calculator-error-function-not-defined = Function \'{ $dependency }\' is not defined.\nshared-calculator-error-function-type-error-1 = Function \'{ $fn }\' cannot be applied to { $arg }.\nshared-calculator-error-function-type-error-2 = Function \'{ $fn }\' cannot be applied to { $arg1 } and { $arg2 }.\nshared-calculator-error-function-type-error-many = Function \'{ $fn }\' cannot be applied to these arguments.\nshared-calculator-error-function-unsupported = This calculator does not support the \'{ $symbol }\' function.\nshared-calculator-error-heterogeneous-list = All elements of a list must have the same type.\nshared-calculator-error-identifier-as-function = \'{ $symbol }\' is a function. Try using parentheses.\nshared-calculator-error-illegal-bin-width = The second argument to \'{ $symbol }\' must be a positive number.\nshared-calculator-error-illegal-dot-call = Function \'{ $symbol }\' cannot be called with dot notation.\nshared-calculator-error-implicits-disabled = Plotting implicit equations and inequalities is disabled.\nshared-calculator-error-incorrect-product-lower-bound = Lower bound of a product must set a variable equal to a number. Try n=1.\nshared-calculator-error-incorrect-sum-lower-bound = Lower bound of a sum must set a variable equal to a number. Try n=1.\nshared-calculator-error-index-type-error = Cannot index { $symbol1 } with { $symbol2 }.\nshared-calculator-error-inequalities-disabled = Plotting inequalities is disabled.\nshared-calculator-error-inequalities-unsupported = This calculator does not support inequalities.\nshared-calculator-error-inequality-chain-too-long = Cannot chain more than 2 inequalities.\nshared-calculator-error-integral-argument-type-error = Cannot take the integral of { $symbol }.\nshared-calculator-error-integral-lower-bound-type-error = Lower bound of an integral cannot be { $symbol }.\nshared-calculator-error-integral-missing-body = What do you want to take the integral of?\nshared-calculator-error-integral-missing-bound = Integrals must have upper and lower bounds.\nshared-calculator-error-integral-missing-differential = Integrand must end with an integration variable, like dx.\nshared-calculator-error-integral-upper-bound-type-error = Upper bound of an integral cannot be { $symbol }.\nshared-calculator-error-invalid-dependent-first-table-column = This column header can\'t be defined elsewhere in the calculator.\nshared-calculator-error-invalid-double-inequality-variables = We only plot double inequalities of x and y.\nshared-calculator-error-invalid-first-table-column = First column may not be { $most } or { $last }.\nshared-calculator-error-invalid-half-empty-range = Range must have an upper and lower bound.\nshared-calculator-error-invalid-implicit-variables = We only support implicit equations of x and y.\nshared-calculator-error-invalid-inequality-variables = We only plot inequalities of x and y, or r and .\nshared-calculator-error-invalid-lhs = Sorry, you can\'t graph { $symbol } as a function of anything yet.\nshared-calculator-error-invalid-operator-name = Operator names may only contain letters.\nshared-calculator-error-invalid-regression-parameter = \'{ $symbol }\' may not be used as a regression parameter. Try using a list.\nshared-calculator-error-invalid-subscript = Subscripts may only contain letters and digits. \'{ $symbol }\' is not allowed.\nshared-calculator-error-invalid-table-entry = Table entries must be simple expressions. { $supplement }\nshared-calculator-error-invalid-table-header = Table headers must be simple expressions. { $supplement }\nshared-calculator-error-list-type-error = Cannot store { $symbol1 } in a list.\nshared-calculator-error-logbase-unsupported = This calculator does not support specifying the base of a logarithm. Try \'log\' or \'ln\'.\nshared-calculator-error-malformed-point = Points are written like this: (1, 2).\nshared-calculator-error-matrix-add-dimensions = Cannot add matrices with different dimensions.\nshared-calculator-error-matrix-assignment = This calculator does not support this type of variable definition. Try using \'New Matrix\'.\nshared-calculator-error-matrix-element-type-error = Cannot use { $arg } as an element of a matrix.\nshared-calculator-error-matrix-fractional-power = A matrix can only be raised to integer powers.\nshared-calculator-error-matrix-invalid-variable = Cannot use \'{ $symbol }\' as a variable.\nshared-calculator-error-matrix-multiply-dimensions = Cannot multiply matrices with incompatible dimensions.\nshared-calculator-error-matrix-power-dimensions = Only square matrices can be raised to a power.\nshared-calculator-error-matrix-subtract-dimensions = Cannot subtract matrices with different dimensions.\nshared-calculator-error-method-requires-list = \'{ $symbol }\' requires a list. For example, try typing: { $recommendation }.\nshared-calculator-error-mismatched-braces = Expected \'{ $symbol1 }\' to match \'{ $symbol2 }\'.\nshared-calculator-error-mismatched-double-inequality = Double inequalities must both go the same way, e.g. { $example }.\nshared-calculator-error-multiply-defined = You\'ve defined \'{ $dependency }\' in more than one place. Try deleting some of the definitions of \'{ $dependency }\'.\nshared-calculator-error-multiply-type-error = Cannot multiply { $symbol1 } by { $symbol2 }.\nshared-calculator-error-negative-type-error = Cannot negate { $symbol }.\nshared-calculator-error-non-arithmetic-range = Ranges must be arithmetic sequences.\nshared-calculator-error-non-list-double-reducer = Both arguments of \'{ $symbol }\' must be lists. For example, try typing: { $recommendation }.\nshared-calculator-error-non-list-parameterized-reducer = The first argument of \'{ $symbol }\' must be a list. For example, try typing: { $recommendation }.\nshared-calculator-error-non-singular-inverse = Singular matrices do not have an inverse.\nshared-calculator-error-non-square-determinant = Only square matrices have a determinant.\nshared-calculator-error-non-square-inverse = Only square matrices have an inverse.\nshared-calculator-error-non-square-trace = Only square matrices have a trace.\nshared-calculator-error-optimization-error = We couldn\'t find any region where this model is defined.\nshared-calculator-error-ordered-pair-access-type-error = Cannot access a coordinate of { $symbol }.\nshared-calculator-error-parameter-already-defined = You can\'t use \'{ $dependency }\' as a parameter of this function because \'{ $dependency }\' is already defined.\nshared-calculator-error-parse-error = Sorry, I don\'t understand this.\nshared-calculator-error-pdf-wrong-arity = \'pdf\' should be called on a distribution with a number. { $recommendation }\nshared-calculator-error-pdf-wrong-arity-recommendation = For example, try typing: D.pdf(x) where D=normaldist().\nshared-calculator-error-percent-missing-of = \'%\' must be used with \'of\'. Try \'25% of 12\'.\nshared-calculator-error-piecewise-branch-length-error = When a piecewise condition depends on a free variable (like "{ $symbol }") and its branches are lists, the lists must have the same length.\nshared-calculator-error-piecewise-branch-type-error = Cannot use { $symbol1 } and { $symbol2 } as the branches in a piecewise. Every branch must have the same type.\nshared-calculator-error-piecewise-condition-type-error = The condition in a piecewise expression must be { $symbol1 } but was { $symbol2 }.\nshared-calculator-error-piecewise-missing-condition = A piecewise expression must have at least one condition.\nshared-calculator-error-piecewise-part-missing-condition = Every part of a piecewise expression must have a condition except the last.\nshared-calculator-error-point-type-error = Cannot use { $symbol1 } as a coordinate of { $symbol2 }.\nshared-calculator-error-points-unsupported = This calculator does not support points.\nshared-calculator-error-polygon-list-type-error = A single argument to polygon should be a point list, not { $type }.\nshared-calculator-error-polygon-point-args-error = Some of your arguments are not points.\nshared-calculator-error-prime-without-paren = Primed function calls must use parentheses.\nshared-calculator-error-primed-function-arity = Prime notation can only be used for functions of a single argument.\nshared-calculator-error-product-argument-type-error = Cannot take the product of { $symbol }.\nshared-calculator-error-product-infinite-bound-type-error = Product bounds must be finite numbers.\nshared-calculator-error-product-lower-bound-type-error = Lower bound of a product cannot be { $symbol }.\nshared-calculator-error-product-missing-body = What do you want to take the product of?\nshared-calculator-error-product-missing-bound = Products must have upper and lower bounds.\nshared-calculator-error-product-upper-bound-type-error = Upper bound of a product cannot be { $symbol }.\nshared-calculator-error-random-arity = \'random\' should be called with no arguments, or an optional number of samples. For example, try random() or random(10).\nshared-calculator-error-random-from-broadcast-distribution = Cannot sample from a list of distributions\nshared-calculator-error-regression-type-error = Cannot regress { $symbol1 } against { $symbol2 }.\nshared-calculator-error-regressions-unsupported = This calculator does not support regressions.\nshared-calculator-error-self-referential-function = The definition of function \'{ $symbol }\' cannot depend on \'{ $symbol }\'.\nshared-calculator-error-shadowed-index = You can\'t use \'{ $symbol }\' as an index because it\'s already defined.\nshared-calculator-error-shadowed-integration-variable = You can\'t use \'{ $symbol }\' as an integration variable because it\'s already defined.\nshared-calculator-error-simulation-fps-nonnegative = FPS must evaluate to a non-negative number\nshared-calculator-error-single-variable-implicit-equations-disabled = Plotting single-variable implicit equations is disabled.\nshared-calculator-error-slider-limit-references-export = Slider limits cannot depend on the slider variable \'{ $symbol }\'.\nshared-calculator-error-slider-max-invalid = Invalid slider max. Try using any number.\nshared-calculator-error-slider-max-less-than-min = Invalid slider limits. Min should be less than max.\nshared-calculator-error-slider-min-invalid = Invalid slider min. Try using any number.\nshared-calculator-error-slider-step-invalid = Invalid slider step. Try using any number.\nshared-calculator-error-subtract-type-error = Cannot subtract { $symbol2 } from { $symbol1 }.\nshared-calculator-error-sum-argument-type-error = Cannot take the sum of { $symbol }.\nshared-calculator-error-sum-infinite-bound-type-error = Summation bounds must be finite numbers.\nshared-calculator-error-sum-lower-bound-type-error = Lower bound of a sum cannot be { $symbol }.\nshared-calculator-error-sum-missing-body = What do you want to take the sum of?\nshared-calculator-error-sum-missing-bound = Sums must have upper and lower bounds.\nshared-calculator-error-sum-upper-bound-type-error = Upper bound of a sum cannot be { $symbol }.\nshared-calculator-error-superscript-with-prime = Superscripts and primes cannot be combined.\nshared-calculator-error-table-entry-type-error = Table entry cannot be { $symbol }.\nshared-calculator-error-table-equation-supplement = Equations are not allowed.\nshared-calculator-error-table-function-definition-supplement = Function definitions are not allowed.\nshared-calculator-error-table-generic-supplement = This type of expression is not allowed.\nshared-calculator-error-table-header-type-error = Table header cannot be { $symbol }.\nshared-calculator-error-table-inequality-supplement = Inequalities are not allowed.\nshared-calculator-error-table-list-supplement = Lists are not allowed.\nshared-calculator-error-table-regression-supplement = Regressions are not allowed.\nshared-calculator-error-tdist-wrong-arity = \'tdist\' requires 1 argument. For example, try typing: tdist(1).\nshared-calculator-error-too-many-arguments = \'{ $symbol }\' accepts at most { $max } arguments.\nshared-calculator-error-too-many-variables-many-symbols = Too many variables. Try defining \'{ $variables }\' or \'{ $lastVariable }\'.\nshared-calculator-error-too-many-variables-no-symbols = Too many variables, I don\'t know what to do with this.\nshared-calculator-error-too-many-variables-one-symbol = Too many variables. Try defining \'{ $variable }\'.\nshared-calculator-error-ttest-list-too-short = Lists for \'{ $symbol }\' must have at least 2 elements.\nshared-calculator-error-two-numbers-error = Cannot make a polygon from two numbers.\nshared-calculator-error-unary-operator-missing-left = You need something before the \'{ $symbol }\' symbol.\nshared-calculator-error-unary-operator-missing-right = You need something after the \'{ $symbol }\' symbol.\nshared-calculator-error-unexpected-inequality = Cannot use an inequality here.\nshared-calculator-error-unexpected-prime = Sorry, I don\'t understand this use of prime notation.\nshared-calculator-error-unexpected-subscript = Only functions and variables may have subscripts.\nshared-calculator-error-unexpected-symbol = Sorry, I don\'t understand the way that \'{ $symbol }\' is used here.\nshared-calculator-error-unknown = Unknown Error\nshared-calculator-error-unplottable-polar-function = We can\'t plot  as a function of r. Try plotting r() instead.\nshared-calculator-error-unrecognized-symbol = Sorry, I don\'t understand the \'{ $symbol }\' symbol.\nshared-calculator-error-variable-as-function = Variable \'{ $dependency }\' can\'t be used as a function.\nshared-calculator-error-variable-filter = List filters cannot depend on free variable \'{ $symbol }\'.\nshared-calculator-error-variable-function-free-variable = Function \'{ $functionSymbol }\' cannot depend on free variable \'{ $variableSymbol }\'.\nshared-calculator-error-variable-list-indices = List indices cannot depend on free variable \'{ $symbol }\'.\nshared-calculator-error-variable-range = Range cannot depend on free variable \'{ $symbol }\'.\nshared-calculator-error-variable-sample-size = Sample size cannot depend on free variable \'{ $symbol }\'.\nshared-calculator-error-variable-seed = Random seed cannot depend on free variable \'{ $symbol }\'.\nshared-calculator-error-variables-unsupported = This calculator does not support variables like \'{ $variable }\'.\nshared-calculator-error-wrong-arity-many-arg = Function \'{ $dependency }\' requires { $assignment_arity } arguments. { $supplement }\nshared-calculator-error-wrong-arity-single-arg-too-few = Function \'{ $dependency }\' requires an argument. { $supplement }\nshared-calculator-error-wrong-arity-single-arg-too-many = Function \'{ $dependency }\' requires only 1 argument. { $supplement }\nshared-calculator-error-wrong-arity-supplement = For example, try typing: { $recommendation }.\nshared-calculator-error-wrong-two-arg-arity = Function \'{ $symbol }\' requires 2 arguments. For example, try typing: { $recommendation }.\nshared-calculator-error-zero-arg-reducer = Function \'{ $symbol }\' requires at least one argument. For example, try typing: { $symbol }(1, 2).\nshared-calculator-heading-function-table-column-header = Function\nshared-calculator-heading-keyboard-shortcuts = Keyboard Shortcuts\nshared-calculator-heading-keyboard-shortcuts-audio-tracing = Audio Tracing\nshared-calculator-heading-keyboard-shortcuts-braille = Braille\nshared-calculator-heading-keyboard-shortcuts-common-actions = Common Actions\nshared-calculator-heading-keyboard-shortcuts-expression-entry-and-navigation = Expression Entry and Navigation\nshared-calculator-heading-keyboard-shortcuts-graphs-with-interactive-points = Graphs with Interactive Points\nshared-calculator-heading-keyboard-shortcuts-sliders = Sliders\nshared-calculator-heading-keyboard-shortcuts-symbols = Symbols\nshared-calculator-heading-keyboard-shortcuts-tables = Tables\nshared-calculator-heading-mac-table-column-header = Mac Shortcut\nshared-calculator-heading-shortcut-table-column-header = Shortcut\nshared-calculator-heading-windows-chrome-table-column-header = Windows / ChromeOS Shortcut\nshared-calculator-label-saved = Saved!\nshared-calculator-label-saving = Saving...\nshared-calculator-label-toast-learn-more = Learn more\nshared-calculator-label-toast-undo = Undo\nshared-calculator-label-tooltip-convert-to-decimal = Convert to decimal.\nshared-calculator-label-tooltip-convert-to-fraction = Convert to fraction.\nshared-calculator-label-value-type-any = an unknown object\nshared-calculator-label-value-type-bool = a true/false value\nshared-calculator-label-value-type-color = a color\nshared-calculator-label-value-type-distribution = a distribution\nshared-calculator-label-value-type-empty-list = an empty list\nshared-calculator-label-value-type-error = an error object\nshared-calculator-label-value-type-list-of-any = a list of unknown objects\nshared-calculator-label-value-type-list-of-bool = a list of true/false values\nshared-calculator-label-value-type-list-of-colors = a list of colors\nshared-calculator-label-value-type-list-of-distributions = a list of distributions\nshared-calculator-label-value-type-list-of-numbers = a list of numbers\nshared-calculator-label-value-type-list-of-points = a list of points\nshared-calculator-label-value-type-matrix = a matrix\nshared-calculator-label-value-type-number = a number\nshared-calculator-label-value-type-point = a point\nshared-calculator-label-value-type-seed = a string\nshared-calculator-narration-braille-mode = Braille Mode\nshared-calculator-narration-braille-mode-nemeth = Braille mode Nemeth\nshared-calculator-narration-braille-mode-off = Braille mode off\nshared-calculator-narration-braille-mode-ueb = Braille mode UEB\nshared-calculator-narration-control-toggle-switch-to-default = { $toggled } selected. Press Enter to switch to { $default }.\nshared-calculator-narration-control-toggle-switch-to-toggled = { $default } selected. Press Enter to switch to { $toggled }.\nshared-calculator-narration-display-as-decimal = Displaying as fraction. Press Enter to display as Decimal\nshared-calculator-narration-display-as-fraction = Displaying as decimal. Press Enter to display as Fraction\nshared-calculator-narration-evaluation = equals { $answer }\nshared-calculator-narration-expression = Expression\nshared-calculator-narration-expression-index = Expression { $index }\nshared-calculator-narration-keypad = keypad\nshared-calculator-narration-keypad-controlbar = Control Bar\nshared-calculator-narration-keypad-key-10-n = Times ten to the power of\nshared-calculator-narration-keypad-key-abs = Absolute Value\nshared-calculator-narration-keypad-key-alpha = Alpha\nshared-calculator-narration-keypad-key-ans = Answer\nshared-calculator-narration-keypad-key-arccos = Inverse Cosine\nshared-calculator-narration-keypad-key-arccot = Inverse Cotangent\nshared-calculator-narration-keypad-key-arccsc = Inverse Cosecant\nshared-calculator-narration-keypad-key-arcsec = Inverse Secant\nshared-calculator-narration-keypad-key-arcsin = Inverse Sine\nshared-calculator-narration-keypad-key-arctan = Inverse Tangent\nshared-calculator-narration-keypad-key-backspace = Backspace\nshared-calculator-narration-keypad-key-beta = Beta\nshared-calculator-narration-keypad-key-binomialdist = Binomial Distribution\nshared-calculator-narration-keypad-key-boxplot = Box Plot\nshared-calculator-narration-keypad-key-cdf = Cumulative Density Function\nshared-calculator-narration-keypad-key-ceil = Ceiling\nshared-calculator-narration-keypad-key-corr = Correlation\nshared-calculator-narration-keypad-key-cos = Cosine\nshared-calculator-narration-keypad-key-cosh = Hyperbolic Cosine\nshared-calculator-narration-keypad-key-cot = Cotangent\nshared-calculator-narration-keypad-key-coth = Hyperbolic Cotangent\nshared-calculator-narration-keypad-key-cov = Co Variance\nshared-calculator-narration-keypad-key-csc = Cosecant\nshared-calculator-narration-keypad-key-csch = Hyperbolic Cosecant\nshared-calculator-narration-keypad-key-cubed = Cubed\nshared-calculator-narration-keypad-key-decimal = Decimal\nshared-calculator-narration-keypad-key-distance = Distance\nshared-calculator-narration-keypad-key-divide = Divide\nshared-calculator-narration-keypad-key-dotplot = Dot Plot\nshared-calculator-narration-keypad-key-enter = Enter\nshared-calculator-narration-keypad-key-erf = Error Function\nshared-calculator-narration-keypad-key-exp = Exponent\nshared-calculator-narration-keypad-key-factorial = Factorial\nshared-calculator-narration-keypad-key-floor = Floor\nshared-calculator-narration-keypad-key-fraction = A over B\nshared-calculator-narration-keypad-key-histogram = Histogram\nshared-calculator-narration-keypad-key-int = Integral\nshared-calculator-narration-keypad-key-inversecdf = Inverse CDF function\nshared-calculator-narration-keypad-key-ittest = Independent T Test\nshared-calculator-narration-keypad-key-left-arrow = Left Arrow\nshared-calculator-narration-keypad-key-left-bracket = Left Bracket\nshared-calculator-narration-keypad-key-left-paren = Left Parenthesis\nshared-calculator-narration-keypad-key-ln = Natural Log\nshared-calculator-narration-keypad-key-log = Log\nshared-calculator-narration-keypad-key-loga = Log A\nshared-calculator-narration-keypad-key-mean = Mean\nshared-calculator-narration-keypad-key-median = Median\nshared-calculator-narration-keypad-key-midpoint = Midpoint\nshared-calculator-narration-keypad-key-minus = Minus\nshared-calculator-narration-keypad-key-normaldist = Normal Distribution\nshared-calculator-narration-keypad-key-nthroot = Nth Root\nshared-calculator-narration-keypad-key-pdf = Probability Density Function\nshared-calculator-narration-keypad-key-percent-of = Percent Of\nshared-calculator-narration-keypad-key-pi = Pi\nshared-calculator-narration-keypad-key-plus = Plus\nshared-calculator-narration-keypad-key-poissondist = Poisson Distribution\nshared-calculator-narration-keypad-key-polygon = Polygon\nshared-calculator-narration-keypad-key-product = Product\nshared-calculator-narration-keypad-key-quantile = Quantile\nshared-calculator-narration-keypad-key-quartile = Quartile\nshared-calculator-narration-keypad-key-random = Random Number\nshared-calculator-narration-keypad-key-reciprocal = Reciprocal\nshared-calculator-narration-keypad-key-right-arrow = Right Arrow\nshared-calculator-narration-keypad-key-right-bracket = Right Bracket\nshared-calculator-narration-keypad-key-right-paren = Right Parenthesis\nshared-calculator-narration-keypad-key-round = Round\nshared-calculator-narration-keypad-key-sec = Secant\nshared-calculator-narration-keypad-key-sech = Hyperbolic Secant\nshared-calculator-narration-keypad-key-shift = Shift\nshared-calculator-narration-keypad-key-sin = Sine\nshared-calculator-narration-keypad-key-sinh = Hyperbolic Sine\nshared-calculator-narration-keypad-key-spearman = Spearman Rank Correlation\nshared-calculator-narration-keypad-key-sqrt = Square Root\nshared-calculator-narration-keypad-key-squared = Squared\nshared-calculator-narration-keypad-key-stats = Summary statistics\nshared-calculator-narration-keypad-key-stdev = Standard Deviation\nshared-calculator-narration-keypad-key-stdevp = Standard Deviation of Population\nshared-calculator-narration-keypad-key-subscript = Subscript\nshared-calculator-narration-keypad-key-sum = Sum\nshared-calculator-narration-keypad-key-superscript = Superscript\nshared-calculator-narration-keypad-key-tan = Tangent\nshared-calculator-narration-keypad-key-tanh = Hyperbolic Tangent\nshared-calculator-narration-keypad-key-tau = Tau\nshared-calculator-narration-keypad-key-tdist = Student-t Distribution\nshared-calculator-narration-keypad-key-theta = Theta\nshared-calculator-narration-keypad-key-times = Times\nshared-calculator-narration-keypad-key-toggle-audio-trace = Toggle Audio Trace\nshared-calculator-narration-keypad-key-toggle-letters = Toggle Letters\nshared-calculator-narration-keypad-key-toggle-numbers = Toggle Numbers\nshared-calculator-narration-keypad-key-tscore = T Score\nshared-calculator-narration-keypad-key-ttest = T Test\nshared-calculator-narration-keypad-key-uniformdist = Uniform Distribution\nshared-calculator-narration-keypad-key-ythroot = Yth Root\nshared-calculator-narration-redo = redo\nshared-calculator-narration-six-key-mode-off = Six Key Braille Input off\nshared-calculator-narration-six-key-mode-on = Six Key Braille Input on\nshared-calculator-narration-table-cell-coordinates = Row { $rowNumber } Column { $columnNumber }\nshared-calculator-narration-undo = undo\nshared-calculator-text-keyboard-shortcut-add-expression = Add an Expression\nshared-calculator-text-keyboard-shortcut-add-folder = Add a Folder\nshared-calculator-text-keyboard-shortcut-add-image = Add an Image\nshared-calculator-text-keyboard-shortcut-add-note = Add a Note\nshared-calculator-text-keyboard-shortcut-add-table = Add a Table\nshared-calculator-text-keyboard-shortcut-adjust-playback-speed = Adjust Playback Speed (1 = slowest, 5 = fastest)\nshared-calculator-text-keyboard-shortcut-announce-slider-animations = Announce Active Slider Animations\nshared-calculator-text-keyboard-shortcut-beginning-of-block = Beginning of Current Block\nshared-calculator-text-keyboard-shortcut-beginning-of-expression = Beginning of Current Expression\nshared-calculator-text-keyboard-shortcut-close-a-dialog = Close a Dialog (like this one!)\nshared-calculator-text-keyboard-shortcut-collapse-expand-folder = Collapse / Expand Selected Folder\nshared-calculator-text-keyboard-shortcut-decrease-volume = Decrease Volume\nshared-calculator-text-keyboard-shortcut-decrease-x = Decrease X\nshared-calculator-text-keyboard-shortcut-decrease-x-larger = Decrease X by Larger Amount\nshared-calculator-text-keyboard-shortcut-decrease-y = Decrease Y\nshared-calculator-text-keyboard-shortcut-decrease-y-larger = Decrease Y by Larger Amount\nshared-calculator-text-keyboard-shortcut-delete-selection = Delete Selection\nshared-calculator-text-keyboard-shortcut-end-of-block = End of Current Block\nshared-calculator-text-keyboard-shortcut-end-of-expression = End of Current Expression\nshared-calculator-text-keyboard-shortcut-exit-block = Exit Current Block\nshared-calculator-text-keyboard-shortcut-first-point = First Point\nshared-calculator-text-keyboard-shortcut-focus-expression-list = Focus the Expression List\nshared-calculator-text-keyboard-shortcut-focus-first-interactive-point = Focus First Interactive Point On Screen\nshared-calculator-text-keyboard-shortcut-hear-graph = Hear Graph\nshared-calculator-text-keyboard-shortcut-hear-specific-branch = Hear Only Branch 1 Through 10\nshared-calculator-text-keyboard-shortcut-increase-selection-left = Increase Selection Left\nshared-calculator-text-keyboard-shortcut-increase-selection-right = Increase Selection Right\nshared-calculator-text-keyboard-shortcut-increase-volume = Increase Volume\nshared-calculator-text-keyboard-shortcut-increase-x = Increase X\nshared-calculator-text-keyboard-shortcut-increase-x-larger = Increase X by Larger Amount\nshared-calculator-text-keyboard-shortcut-increase-y = Increase Y\nshared-calculator-text-keyboard-shortcut-increase-y-larger = Increase Y by Larger Amount\nshared-calculator-text-keyboard-shortcut-last-point = Last Point\nshared-calculator-text-keyboard-shortcut-move-to-denominator = Move to Denominator Within Fraction\nshared-calculator-text-keyboard-shortcut-move-to-numerator = Move to Numerator Within Fraction\nshared-calculator-text-keyboard-shortcut-move-to-origin = Move to Origin\nshared-calculator-text-keyboard-shortcut-nemeth-mode = Switch to Nemeth\nshared-calculator-text-keyboard-shortcut-next-character = Next Character\nshared-calculator-text-keyboard-shortcut-next-curve = Move to Next Curve\nshared-calculator-text-keyboard-shortcut-next-expression = Move to Next Expression\nshared-calculator-text-keyboard-shortcut-next-interactive-point = Go to Next Interactive Point\nshared-calculator-text-keyboard-shortcut-next-poi = Next Point of Interest\nshared-calculator-text-keyboard-shortcut-next-point = Next Point\nshared-calculator-text-keyboard-shortcut-open-a-graph = Open a Graph\nshared-calculator-text-keyboard-shortcut-previous-character = Previous Character\nshared-calculator-text-keyboard-shortcut-previous-curve = Move to Previous Curve\nshared-calculator-text-keyboard-shortcut-previous-expression = Move to Previous Expression\nshared-calculator-text-keyboard-shortcut-previous-interactive-point = Go to Previous Interactive Point\nshared-calculator-text-keyboard-shortcut-previous-poi = Previous Point of Interest\nshared-calculator-text-keyboard-shortcut-previous-point = Previous Point\nshared-calculator-text-keyboard-shortcut-print-a-graph = Print a Graph\nshared-calculator-text-keyboard-shortcut-print-mode = Switch to Print\nshared-calculator-text-keyboard-shortcut-redo = Redo\nshared-calculator-text-keyboard-shortcut-remove-empty-expression = Remove Selected Empty Expression\nshared-calculator-text-keyboard-shortcut-save-a-graph = Save a Graph\nshared-calculator-text-keyboard-shortcut-select-all = Select All\nshared-calculator-text-keyboard-shortcut-show-answer-as-decimal-or-fraction = Show Answer as Decimal or Fraction\nshared-calculator-text-keyboard-shortcut-show-or-hide-expression-list = Show or Hide the Expression List\nshared-calculator-text-keyboard-shortcut-slider-decrease = Decrease Value\nshared-calculator-text-keyboard-shortcut-slider-decrease-larger = Decrease Value by Larger Increment\nshared-calculator-text-keyboard-shortcut-slider-increase = Increase Value\nshared-calculator-text-keyboard-shortcut-slider-increase-larger = Increase Value by Larger Increment\nshared-calculator-text-keyboard-shortcut-slider-maximum = Highest Value\nshared-calculator-text-keyboard-shortcut-slider-minimum = Lowest Value\nshared-calculator-text-keyboard-shortcut-slider-trace-decrease = Decrease Value of Selected Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-decrease-larger = Decrease Value of Selected Slider by Larger Increment When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-increase = Increase Value of Selected Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-increase-larger = Increase Value of Selected Slider by Larger Increment When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-maximum = Move to Highest Value of Selected Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-minimum = Move to Lowest Value of Selected Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-next-slider = Select Next Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-slider-trace-previous-slider = Select Previous Slider When in Slider Trace\nshared-calculator-text-keyboard-shortcut-speak-answer = Speak Answer\nshared-calculator-text-keyboard-shortcut-speak-branch = Speak Branch\nshared-calculator-text-keyboard-shortcut-speak-color = Speak Color\nshared-calculator-text-keyboard-shortcut-speak-focused-block = Speak Focused Block\nshared-calculator-text-keyboard-shortcut-speak-label = Speak Label\nshared-calculator-text-keyboard-shortcut-speak-left-adjacent-block = Speak Left-Adjacent Block\nshared-calculator-text-keyboard-shortcut-speak-parent-block = Speak Parent Block\nshared-calculator-text-keyboard-shortcut-speak-poi-count = Speak Point of Interest Count\nshared-calculator-text-keyboard-shortcut-speak-point-type = Speak Type of Selected Point\nshared-calculator-text-keyboard-shortcut-speak-right-adjacent-block = Speak Right-Adjacent Block\nshared-calculator-text-keyboard-shortcut-speak-selection = Speak Selection\nshared-calculator-text-keyboard-shortcut-speak-x = Speak X Coordinate\nshared-calculator-text-keyboard-shortcut-speak-y = Speak Y Coordinate\nshared-calculator-text-keyboard-shortcut-summarize-graph = Summarize Graph\nshared-calculator-text-keyboard-shortcut-table-first-column = First Column in Row\nshared-calculator-text-keyboard-shortcut-table-first-row = First Row in Column\nshared-calculator-text-keyboard-shortcut-table-last-column = Last Column in Row\nshared-calculator-text-keyboard-shortcut-table-last-row = Last Row in Column\nshared-calculator-text-keyboard-shortcut-table-next-cell = Next Cell\nshared-calculator-text-keyboard-shortcut-table-next-column = Next Column\nshared-calculator-text-keyboard-shortcut-table-next-row = Next Row\nshared-calculator-text-keyboard-shortcut-table-previous-cell = Previous Cell\nshared-calculator-text-keyboard-shortcut-table-previous-column = Previous Column\nshared-calculator-text-keyboard-shortcut-table-previous-row = Previous Row\nshared-calculator-text-keyboard-shortcut-table-speak-column-header = Speak Column Header\nshared-calculator-text-keyboard-shortcut-toggle-account-menu = Open or Close the Account Menu\nshared-calculator-text-keyboard-shortcut-toggle-audio-trace = Enable or Disable Audio Trace Mode\nshared-calculator-text-keyboard-shortcut-toggle-braille-typing = Turn Braille Typing On or Off\nshared-calculator-text-keyboard-shortcut-toggle-edit-list-mode = Turn Edit List Mode On or Off\nshared-calculator-text-keyboard-shortcut-toggle-graph-settings-menu = Open or Close the Graph Settings Menu\nshared-calculator-text-keyboard-shortcut-toggle-help-menu = Open or Close the Help Menu\nshared-calculator-text-keyboard-shortcut-toggle-language-menu = Open or Close the Language Menu\nshared-calculator-text-keyboard-shortcut-toggle-share-menu = Open or Close the Share Menu\nshared-calculator-text-keyboard-shortcut-toggle-slider-trace = Toggle Slider Trace Mode\nshared-calculator-text-keyboard-shortcut-ueb-mode = Switch to UEB\nshared-calculator-text-keyboard-shortcut-undo = Undo\nshared-calculator-text-keyboard-shortcut-usually = usually\nshared-label-email = Email\nshared-label-name = Name\nshared-label-name-or-nickname = Name or Nickname\nshared-label-new-email-address = New Email Address\nshared-label-password = Password\nshared-message-account-reactivated = You previously requested to delete your account, but because you logged back in within 30 days, we will not delete your account. Welcome back!\nshared-message-change-password-email-sent = We will send a link to your email address ({ $emailAddress }) so you can change your password.\nshared-message-check-email-for-delete-link = Please check your email ({ $emailAddress }) for the link to delete your account.\nshared-message-check-email-for-link = Please check { $emailAddress } for the Change Email link.\nshared-message-check-email-for-password-link = Please check your email ({ $emailAddress }) for the link to change your password.\nshared-message-check-email-for-password-recovery-link = Message sent. Please check your email for a password recovery link.\nshared-message-consent-delete-information = If you don\'t want Desmos to hold onto this information, you may delete your account from the Account Settings menu at any time.\nshared-message-consent-information = When you created your Desmos account, you gave us your name, email address, and password (unless you signed in with Google, in which case you gave us access to the name and email address associated with that account). You also gave us access to your saved work. To continue using your Desmos account, please consent below to the collection of this information.\nshared-message-consent-text = I agree to let Desmos store and maintain the information I provide (e.g. login credentials, saved work) in order to provide and improve its service. To withdraw consent, you may delete your account at any time.\nshared-message-cookie-notice = <1>Note:</1> Desmos uses cookies to enable persistence when you are signed in. If you do not wish to use cookies, please use Desmos without logging in. <2>Learn More.</2>\nshared-message-delete-account-notice = When you delete your account, <1>we will retain your data for 30 days.</1> You can reactivate your account at any time during those 30 days by logging back in. If there\'s something about Desmos we can improve, please <2>let us know.</2>\nshared-message-delete-account-will-send-email = We will send you a link to your email address ({ $email }) so you can delete your account.\nshared-message-email-sent = Email sent\nshared-message-email-settings-will-send-email = We will send a Change Email link to { $emailAddress }.\nshared-message-google-login-not-available = Google Login is not available on this device.\nshared-message-information-saved = Saved!\nshared-message-or-login-with-desmos = Or log in with Desmos\nshared-message-privacy-notice = I have read, understand, and accept the <1>Terms of Service</1> and <2>Privacy Policy</2>{"."}\nshared-message-set-new-email-address = Set a new email address and password.\nshared-narration-privacy-policy-agreement = Checkbox to indicate agreement to privacy policy (desmos.com/privacy) and terms of service (desmos.com/terms).\nshared-prompt-already-have-account = Already have a Desmos account?\nshared-prompt-enter-email-for-password-recovery-link = Enter your email address to get a password recovery link.\nshared-prompt-forgot-your-password = Forgot your password?\nshared-prompt-new-to-desmos-sign-up-here = New to Desmos? <1>Sign up</1>{"."}\nshared-prompt-new-to-desmos-teacher-or-student = New to Desmos? Sign up as a <1>teacher</1> or <2>student.</2>\nshared-prompt-please-consent-to-sign-up-with-apple = Please consent above to sign up with Apple\nshared-prompt-please-consent-to-sign-up-with-google = Please consent above to sign up with Google\nshared-prompt-sign-up-with-apple = Sign up with Apple\nshared-prompt-sign-up-with-google = Sign up with Google\nshared-title-account-reactivated = Your account has been reactivated.\nshared-title-account-settings = Account Settings\nshared-title-change-email-address = Change your Desmos email address\nshared-title-change-password-narrow = Password\nshared-title-change-password-wide = Change Password\nshared-title-consent = We value your privacy\nshared-title-delete-account = Are you sure you want to delete your account?\nshared-title-email-settings = Email\nshared-title-language-menu = Language\nshared-title-login = Log In\nshared-title-profile-information-narrow = Profile\nshared-title-profile-information-wide = Profile Information\nshared-title-recover-password = Recover Password\nshared-title-signup = Sign-Up\nshared-title-teacher-signup = Teacher Sign-Up\n### Strings for the graphing calculator and other tools\n\n\n### 2358 English words, 703 English strings\n\nbasic-calculator-button-braille-off = Off\nbasic-calculator-button-controlbar-abc = abc\nbasic-calculator-button-controlbar-clear = clear\nbasic-calculator-button-controlbar-clear-all = clear all\nbasic-calculator-button-controlbar-func = func\nbasic-calculator-button-controlbar-main = main\nbasic-calculator-button-nemeth = Nemeth\nbasic-calculator-button-projector-mode = Projector Mode\nbasic-calculator-button-turn-braille-mode-off = Turn { $mode } off\nbasic-calculator-button-ueb = UEB\nbasic-calculator-error-fractions-unavailable = Fractions are not available in the current calculator.\nbasic-calculator-heading-braille-table-type-this = Type this\nbasic-calculator-heading-braille-table-typeset = Typeset\nbasic-calculator-heading-page-title-florida = Desmos | Florida Calculator\nbasic-calculator-heading-page-title-four-function = Desmos | 4-Function Calculator\nbasic-calculator-heading-title-scientific = Desmos | Scientific Calculator\nbasic-calculator-label-answer-hint = Your answers show up on this side.\nbasic-calculator-label-braille-mode = Braille Mode\nbasic-calculator-label-controlbar-deg = deg\nbasic-calculator-label-controlbar-rad = rad\nbasic-calculator-label-convert-to-decimal = Convert to decimal.\nbasic-calculator-label-convert-to-fraction = Convert to fraction.\nbasic-calculator-label-reverse-contrast = Reverse Contrast\nbasic-calculator-label-six-key-input = Six Key Braille Input\nbasic-calculator-link-download-braille-equations = Download Braille Equations\nbasic-calculator-link-help = Help\nbasic-calculator-link-privacy-policy = Privacy Policy\nbasic-calculator-link-terms-of-service = Terms of Service\nbasic-calculator-link-view-braille-examples = View more examples\nbasic-calculator-narration-braille-mode = Braille Mode\nbasic-calculator-narration-braille-off = Off\nbasic-calculator-narration-calc-description-fourfunction = Desmos Four-Function Calculator\nbasic-calculator-narration-calc-description-scientific = Desmos Scientific Calculator\nbasic-calculator-narration-controlbar-abc = A B C\nbasic-calculator-narration-controlbar-backspace = backspace\nbasic-calculator-narration-controlbar-clear = clear\nbasic-calculator-narration-controlbar-clear-all = clear all\nbasic-calculator-narration-controlbar-degrees = Degrees\nbasic-calculator-narration-controlbar-functions = Functions\nbasic-calculator-narration-controlbar-main = main\nbasic-calculator-narration-controlbar-radians = Radians\nbasic-calculator-narration-controlbar-redo = Redo\nbasic-calculator-narration-controlbar-settings = settings\nbasic-calculator-narration-controlbar-undo = Undo\nbasic-calculator-narration-convert-to-decimal = Displaying as fraction. Press Enter to display as Decimal\nbasic-calculator-narration-convert-to-fraction = Displaying as decimal. Press Enter to display as Fraction\nbasic-calculator-narration-expression-list = Expression List\nbasic-calculator-narration-hotkey-braille-off = Braille mode off\nbasic-calculator-narration-hotkey-nemeth = Braille mode Nemeth\nbasic-calculator-narration-hotkey-six-key-input-off = Six Key Braille Input off\nbasic-calculator-narration-hotkey-six-key-input-on = Six Key Braille Input on\nbasic-calculator-narration-hotkey-ueb = Braille mode UEB\nbasic-calculator-narration-keypad = keypad\nbasic-calculator-narration-nemeth = Nemeth\nbasic-calculator-narration-projector-mode = Projector Mode\nbasic-calculator-narration-reverse-contrast = Reverse Contrast\nbasic-calculator-narration-six-key-input = Six Key Braille Input\nbasic-calculator-narration-ueb = UEB\nbasic-calculator-text-4fn-page-description = A beautiful, free 4-Function Calculator from Desmos.com.\nbasic-calculator-text-braille-mode-is-on = { $mode } is on!\nbasic-calculator-text-how-to-type-braille = Use a Refreshable Braille display, or just type Braille with a keyboard.\nbasic-calculator-text-scientific-page-description = A beautiful, free online scientific calculator with advanced features for evaluating percentages, fractions, exponential functions, logarithms, trigonometry, statistics, and more.\ngraphing-calculator-button-audio-trace-describe-curve = Describe Curve\ngraphing-calculator-button-audio-trace-describe-curve-short = Curve\ngraphing-calculator-button-audio-trace-describe-point = Describe Point\ngraphing-calculator-button-audio-trace-describe-point-short = Point\ngraphing-calculator-button-audio-trace-hear-graph = Hear Graph\ngraphing-calculator-button-audio-trace-stop-graph = Stop Graph\ngraphing-calculator-button-change-image = Change Image\ngraphing-calculator-button-clear-graph = Delete All\ngraphing-calculator-button-clickable = Clickable\ngraphing-calculator-button-done = Done\ngraphing-calculator-button-edit-graph-on-desmos-logo = edit graph on\ngraphing-calculator-button-editable-math = Editable Math\ngraphing-calculator-button-editable-text = Editable Text\ngraphing-calculator-button-expression-search-clear = clear\ngraphing-calculator-button-fill = Fill\ngraphing-calculator-button-find-cdf = Find Cumulative Probability (CDF)\ngraphing-calculator-button-funcs = funcs\ngraphing-calculator-button-functions = functions\ngraphing-calculator-button-functions-menu-dist = dist\ngraphing-calculator-button-functions-menu-misc = misc\ngraphing-calculator-button-functions-menu-stats = stats\ngraphing-calculator-button-functions-menu-trig = trig\ngraphing-calculator-button-hide-folder-from-students = Hide this folder from students\ngraphing-calculator-button-hide-folder-from-students-2 = Hide this folder from students.\ngraphing-calculator-button-keypad-audio-trace-off = Audio Trace Off\ngraphing-calculator-button-keypad-describe-curve = Describe Curve\ngraphing-calculator-button-keypad-describe-point = Describe Point\ngraphing-calculator-button-label = Label\ngraphing-calculator-button-label-orientation-vertical = Vertical\ngraphing-calculator-button-load-image-retry = Retry.\ngraphing-calculator-button-place-image-behind-graphs = Place behind graphs\ngraphing-calculator-button-regression-log-mode = Log Mode\ngraphing-calculator-button-regression-plot-residuals = plot\ngraphing-calculator-button-reset-graph = Reset\ngraphing-calculator-button-settings-braille-mode-nemeth = Nemeth\ngraphing-calculator-button-settings-braille-mode-off = Off\ngraphing-calculator-button-settings-braille-mode-ueb = UEB\ngraphing-calculator-button-settings-degrees = Degrees\ngraphing-calculator-button-settings-projector-mode = Projector Mode\ngraphing-calculator-button-settings-radians = Radians\ngraphing-calculator-button-settings-zoom-square = Zoom Square\ngraphing-calculator-button-share-graph-link-copy = Copy\ngraphing-calculator-button-show-all-table-rows = Show all\ngraphing-calculator-button-slider-add-all-variables = all\ngraphing-calculator-button-table-column-menu-toggle-color = Color\ngraphing-calculator-button-table-column-menu-toggle-drag = Drag\ngraphing-calculator-button-table-column-menu-toggle-lines = Lines\ngraphing-calculator-button-table-column-menu-toggle-points = Points\ngraphing-calculator-button-visual-parameters-binned = Binned\ngraphing-calculator-button-visual-parameters-center = Center\ngraphing-calculator-button-visual-parameters-count = Count\ngraphing-calculator-button-visual-parameters-density = Density\ngraphing-calculator-button-visual-parameters-exact = Exact\ngraphing-calculator-button-visual-parameters-exclude-outliers = Exclude Outliers\ngraphing-calculator-button-visual-parameters-left = Left\ngraphing-calculator-button-visual-parameters-relative = Relative\ngraphing-calculator-error-equation-contains-unresolved-details = This equation contains fine detail that has not been fully resolved.\ngraphing-calculator-error-failed-to-load-image = Failed to load image.\ngraphing-calculator-error-image-invalid-angle = Invalid angle. Try using any number.\ngraphing-calculator-error-image-invalid-center = Invalid center. Try, for example, (0,0).\ngraphing-calculator-error-image-invalid-file = The file "{ $file }" is not an image\ngraphing-calculator-error-image-invalid-height = Invalid height. Try using any number.\ngraphing-calculator-error-image-invalid-opacity = Invalid opacity. Try using any number.\ngraphing-calculator-error-image-invalid-width = Invalid width. Try using any number.\ngraphing-calculator-heading-advanced = Advanced\ngraphing-calculator-heading-audio-trace-describe = Describe\ngraphing-calculator-heading-audio-trace-navigation = Navigation\ngraphing-calculator-heading-audio-trace-screen-reader = Screen Reader\ngraphing-calculator-heading-color = Color\ngraphing-calculator-heading-dist-tab-distributions = Distributions\ngraphing-calculator-heading-dist-tab-visualizations = Visualizations\ngraphing-calculator-heading-drag = Drag\ngraphing-calculator-heading-font-size = Font Size\ngraphing-calculator-heading-image-opacity = Opacity\ngraphing-calculator-heading-keypad-audio-trace-point-of-interest = <1>Point</1><2>of Interest</2>\ngraphing-calculator-heading-label-orientation = Orientation\ngraphing-calculator-heading-label-position = Label Position\ngraphing-calculator-heading-lines = Lines\ngraphing-calculator-heading-mygraphs-examples = Examples\ngraphing-calculator-heading-on-every-update = On Every Update:\ngraphing-calculator-heading-points = Points\ngraphing-calculator-heading-regression-parameters = Parameters\ngraphing-calculator-heading-regression-residuals = Residuals\ngraphing-calculator-heading-regression-statistics = Statistics\ngraphing-calculator-heading-size = Size\ngraphing-calculator-heading-slider-animation-mode = Animation Mode\ngraphing-calculator-heading-slider-speed = Speed\ngraphing-calculator-heading-style = Style\ngraphing-calculator-heading-title = Graphing Calculator\ngraphing-calculator-heading-title-desmos = Desmos | Graphing Calculator\ngraphing-calculator-heading-title-untitled = Untitled Graph\ngraphing-calculator-heading-visual-parameters-bar-heights = Bar Heights\ngraphing-calculator-heading-visual-parameters-bin-alignment = Bin Alignment\ngraphing-calculator-heading-visual-parameters-display-properties = Display Properties\ngraphing-calculator-heading-visual-parameters-x-values = X Values\ngraphing-calculator-heading-when-clicked = When Clicked:\ngraphing-calculator-label-add-depressed-image-tooltip = Add Depressed Image\ngraphing-calculator-label-add-hovered-image-tooltip = Add Hovered Image\ngraphing-calculator-label-add-item-tooltip = Add Item\ngraphing-calculator-label-add-slider = add slider:\ngraphing-calculator-label-add-update-rule = Add update rule\ngraphing-calculator-label-animation-properties-tooltip = Animation Properties\ngraphing-calculator-label-assignment = Assignment\ngraphing-calculator-label-audio-trace-curve = Curve\ngraphing-calculator-label-audio-trace-need-screen-reader = Your Screen Reader needs to be on to hear these.\ngraphing-calculator-label-audio-trace-point = Point\ngraphing-calculator-label-audio-trace-speed = Speed\ngraphing-calculator-label-audio-trace-volume = Volume\ngraphing-calculator-label-braille-size-etc11 = ETC Romeo/Juliet (11.5 x 11 in)\ngraphing-calculator-label-braille-size-etc8 = ETC Romeo/Juliet (8.5 x 11 in)\ngraphing-calculator-label-braille-size-vpmax11 = VP Max (11.5 x 11 in)\ngraphing-calculator-label-braille-size-vpmax8 = VP Max (8.5 x 11 in)\ngraphing-calculator-label-cdf-maximum = Max:\ngraphing-calculator-label-cdf-minimum = Min:\ngraphing-calculator-label-change-depressed-image-tooltip = Change Depressed Image\ngraphing-calculator-label-change-hovered-image-tooltip = Change Hovered Image\ngraphing-calculator-label-clickable-object-set-property = Set <assignment/>to <expression/>\ngraphing-calculator-label-convert-to-table-tooltip = Convert to Table\ngraphing-calculator-label-drop-image-here = Drop Image Here\ngraphing-calculator-label-duplicate-expression-tooltip = Duplicate\ngraphing-calculator-label-edit-list-tooltip = Edit List\ngraphing-calculator-label-evaluation-list = { $count } element list\ngraphing-calculator-label-example-graph-3d-world = 3D World\ngraphing-calculator-label-example-graph-calculus-derivatives = Calculus: Derivatives\ngraphing-calculator-label-example-graph-calculus-fundamental-theorem-of-calculus = Calculus: Fundamental Theorem of Calculus\ngraphing-calculator-label-example-graph-calculus-integral-with-adjustable-bounds = Calculus: Integral with adjustable bounds\ngraphing-calculator-label-example-graph-calculus-integrals = Calculus: Integrals\ngraphing-calculator-label-example-graph-calculus-secant-line = Calculus: Secant Line\ngraphing-calculator-label-example-graph-calculus-tangent-line = Calculus: Tangent Line\ngraphing-calculator-label-example-graph-calculus-taylor-expansion-of-sin-x = Calculus: Taylor Expansion of sin(x)\ngraphing-calculator-label-example-graph-checkerboard-inversion = Checkerboard Inversion\ngraphing-calculator-label-example-graph-conic-sections-circle = Conic Sections: Circle\ngraphing-calculator-label-example-graph-conic-sections-ellipse-with-foci = Conic Sections: Ellipse with Foci\ngraphing-calculator-label-example-graph-conic-sections-hyperbola = Conic Sections: Hyperbola\ngraphing-calculator-label-example-graph-conic-sections-parabola-and-focus = Conic Sections: Parabola and Focus\ngraphing-calculator-label-example-graph-fastest-path-to-a-point = Fastest Path to a Point\ngraphing-calculator-label-example-graph-fireworks = Fireworks!\ngraphing-calculator-label-example-graph-fractal-valentine = Fractal Valentine\ngraphing-calculator-label-example-graph-lines-point-slope-form = Lines: Point Slope Form\ngraphing-calculator-label-example-graph-lines-slope-intercept-form = Lines: Slope Intercept Form\ngraphing-calculator-label-example-graph-lines-two-point-form = Lines: Two Point Form\ngraphing-calculator-label-example-graph-lists-curve-stitching = Lists: Curve Stitching\ngraphing-calculator-label-example-graph-lists-family-of-sin-curves = Lists: Family of sin Curves\ngraphing-calculator-label-example-graph-lists-plotting-a-list-of-points = Lists: Plotting a List of Points\ngraphing-calculator-label-example-graph-outstretched-arm = Outstretched Arm\ngraphing-calculator-label-example-graph-pac-man = Pac Man\ngraphing-calculator-label-example-graph-parabolas-standard-form = Parabolas: Standard Form\ngraphing-calculator-label-example-graph-parabolas-standard-form-plus-tangent = Parabolas: Standard Form + Tangent\ngraphing-calculator-label-example-graph-parabolas-vertex-form = Parabolas: Vertex Form\ngraphing-calculator-label-example-graph-parametric-cycloid = Parametric: Cycloid\ngraphing-calculator-label-example-graph-parametric-introduction = Parametric: Introduction\ngraphing-calculator-label-example-graph-polar-conic-sections = Polar: Conic Sections\ngraphing-calculator-label-example-graph-polar-limacon = Polar: Limacon\ngraphing-calculator-label-example-graph-polar-logarithmic-spiral = Polar: Logarithmic Spiral\ngraphing-calculator-label-example-graph-polar-rose = Polar: Rose\ngraphing-calculator-label-example-graph-pride-flag = PRIDE flag\ngraphing-calculator-label-example-graph-regular-sine-wave = Regular Sine Wave?\ngraphing-calculator-label-example-graph-stats-anscombes-quartet = Statistics: Anscombe\'s Quartet\ngraphing-calculator-label-example-graph-stats-fourth-order-polynomial = Statistics: 4th Order Polynomial\ngraphing-calculator-label-example-graph-stats-linear-regression = Statistics: Linear Regression\ngraphing-calculator-label-example-graph-transformations-inverse-of-a-function = Transformations: Inverse of a Function\ngraphing-calculator-label-example-graph-transformations-scaling-a-function = Transformations: Scaling a Function\ngraphing-calculator-label-example-graph-transformations-translating-a-function = Transformations: Translating a Function\ngraphing-calculator-label-example-graph-trig-period-and-amplitude = Trigonometry: Period and Amplitude\ngraphing-calculator-label-example-graph-trig-phase = Trigonometry: Phase\ngraphing-calculator-label-example-graph-trig-unit-circle = Trigonometry: Unit Circle\ngraphing-calculator-label-example-graph-trig-wave-interference = Trigonometry: Wave Interference\ngraphing-calculator-label-expression = Expression\ngraphing-calculator-label-expression-delete-tooltip = Delete\ngraphing-calculator-label-expression-lowercase = expression\ngraphing-calculator-label-folder-lowercase = folder\ngraphing-calculator-label-hide-expression-list-tooltip = Hide Expression List\ngraphing-calculator-label-hide-keypad = Hide Keypad\ngraphing-calculator-label-image-angle = Angle:\ngraphing-calculator-label-image-center = Center:\ngraphing-calculator-label-image-height = Height:\ngraphing-calculator-label-image-lowercase = image\ngraphing-calculator-label-image-opacity = Opacity:\ngraphing-calculator-label-image-width = Width:\ngraphing-calculator-label-note-lowercase = note\ngraphing-calculator-label-open-graph-tooltip = Open Graph (ctrl+o)\ngraphing-calculator-label-poi-unknown = unknown coordinates\ngraphing-calculator-label-powered-by = powered by\ngraphing-calculator-label-randomize-tooltip = Randomize\ngraphing-calculator-label-redo-tooltip = Redo (ctrl+y)\ngraphing-calculator-label-regression-log-mode-help-tooltip = Log mode help\ngraphing-calculator-label-regression-parameters-not-exact = Parameters might not be exact. Click to learn more.\ngraphing-calculator-label-regression-what-is-rmse-tooltip = What is RMSE? Click to learn more.\ngraphing-calculator-label-regression-why-is-negative-tooltip = Why is this negative? Click to learn more.\ngraphing-calculator-label-settings-add-label = add a label\ngraphing-calculator-label-settings-arrows = Arrows\ngraphing-calculator-label-settings-axis-numbers = Axis Numbers\ngraphing-calculator-label-settings-braille-mode = Braille Mode\ngraphing-calculator-label-settings-grid = Grid\ngraphing-calculator-label-settings-minor-gridlines = Minor Gridlines\ngraphing-calculator-label-settings-reverse-contrast = Reverse Contrast\ngraphing-calculator-label-settings-six-key-braille = Six Key Braille Input\ngraphing-calculator-label-settings-step = Step:\ngraphing-calculator-label-settings-x-axis = X-Axis\ngraphing-calculator-label-settings-y-axis = Y-Axis\ngraphing-calculator-label-show-keypad = Show Keypad\ngraphing-calculator-label-simulation-lowercase = simulation\ngraphing-calculator-label-simulation-step-once-tooltip = Step Once\ngraphing-calculator-label-slider-step = Step:\ngraphing-calculator-label-table-lowercase = table\ngraphing-calculator-label-tooltip-graph-settings = Graph Settings\ngraphing-calculator-label-tooltip-open-graph = Open Graph\ngraphing-calculator-label-tooltip-reset = Reset\ngraphing-calculator-label-tooltip-show-list = Show List\ngraphing-calculator-label-tooltip-zoom-default = Default Zoom\ngraphing-calculator-label-tooltip-zoom-in = Zoom In\ngraphing-calculator-label-tooltip-zoom-out = Zoom Out\ngraphing-calculator-label-undo-tooltip = Undo (ctrl+z)\ngraphing-calculator-link-audio-trace-keyboard-shortcuts = Keyboard Shortcuts\ngraphing-calculator-link-audio-trace-shortcuts = Shortcuts\ngraphing-calculator-link-edit-on-desmos = edit graph on\ngraphing-calculator-link-learn-more = Learn more.\ngraphing-calculator-narration-add-expression = Add expression\ngraphing-calculator-narration-add-folder = Add folder\ngraphing-calculator-narration-add-image = Add image\ngraphing-calculator-narration-add-item-menu = Add Item Menu\ngraphing-calculator-narration-add-note = Add note\ngraphing-calculator-narration-add-simulation = Add Simulation\ngraphing-calculator-narration-add-slider-prompt = Add slider for { $vars }\ngraphing-calculator-narration-add-table = Add table\ngraphing-calculator-narration-audio-instructions-enter-audio-trace-mac = Press OPTION+T for audio trace.\ngraphing-calculator-narration-audio-instructions-enter-audio-trace-windows = Press ALT+T for audio trace.\ngraphing-calculator-narration-audio-trace-branch-not-found = Branch { $branch } does not exist.\ngraphing-calculator-narration-audio-trace-branch-number = Branch { $branch }\ngraphing-calculator-narration-audio-trace-cannot-change-slider-value = Unable to adjust slider\ngraphing-calculator-narration-audio-trace-description-branch-count = Branches: { $branches }.\ngraphing-calculator-narration-audio-trace-description-color = Color: { $color }.\ngraphing-calculator-narration-audio-trace-description-multiple-extrema = { $count } extrema.\ngraphing-calculator-narration-audio-trace-description-multiple-intercepts = { $count } intercepts.\ngraphing-calculator-narration-audio-trace-description-multiple-intersections = { $count } intersections.\ngraphing-calculator-narration-audio-trace-description-multiple-labels = { $count } point labels.\ngraphing-calculator-narration-audio-trace-description-multiple-roots = { $count } zero crossings.\ngraphing-calculator-narration-audio-trace-description-one-extremum = 1 extremum.\ngraphing-calculator-narration-audio-trace-description-one-intercept = 1 intercept.\ngraphing-calculator-narration-audio-trace-description-one-intersection = 1 intersection.\ngraphing-calculator-narration-audio-trace-description-one-label = 1 point label.\ngraphing-calculator-narration-audio-trace-description-one-root = 1 zero crossing.\ngraphing-calculator-narration-audio-trace-description-unavailable = No information available.\ngraphing-calculator-narration-audio-trace-expression-with-column = Expression { $index } column { $column }\ngraphing-calculator-narration-audio-trace-first-point = First point\ngraphing-calculator-narration-audio-trace-first-slider = First slider.\ngraphing-calculator-narration-audio-trace-instructions-disable-mac = To disable audio trace, press OPTION+T.\ngraphing-calculator-narration-audio-trace-instructions-disable-windows = To disable audio trace, press ALT+T.\ngraphing-calculator-narration-audio-trace-instructions-expression-navigation-mac = To move between expressions, press COMMAND+Up-Arrow or COMMAND+Down-Arrow.\ngraphing-calculator-narration-audio-trace-instructions-expression-navigation-windows = To move between expressions, press ALT+Up-Arrow or ALT+Down-Arrow.\ngraphing-calculator-narration-audio-trace-instructions-hear-graph = To hear the graph, press H.\ngraphing-calculator-narration-audio-trace-instructions-use-arrow-keys = Use Arrow keys to navigate.\ngraphing-calculator-narration-audio-trace-last-point = Last point\ngraphing-calculator-narration-audio-trace-last-slider = Last slider.\ngraphing-calculator-narration-audio-trace-multiple-sliders-paused = { $sliders } animating sliders were paused.\ngraphing-calculator-narration-audio-trace-no-graph-selected = No graph selected.\ngraphing-calculator-narration-audio-trace-no-more-pois = No more points of interest\ngraphing-calculator-narration-audio-trace-no-sliders-paused = No animating sliders were paused.\ngraphing-calculator-narration-audio-trace-one-slider-paused = One animating slider was paused.\ngraphing-calculator-narration-audio-trace-playback-speed = Graph playback speed { $speed }\ngraphing-calculator-narration-audio-trace-playing-graph = Playing graph.\ngraphing-calculator-narration-audio-trace-poi-count = Points of interest, { $x }.\ngraphing-calculator-narration-audio-trace-point-type-definition = Definition\ngraphing-calculator-narration-audio-trace-point-type-extremum = Extremum\ngraphing-calculator-narration-audio-trace-point-type-intercept = Intercept\ngraphing-calculator-narration-audio-trace-point-type-intersection = Intersection\ngraphing-calculator-narration-audio-trace-point-type-intersection-with-curves = Intersection with { $curves }\ngraphing-calculator-narration-audio-trace-point-type-label = Label\ngraphing-calculator-narration-audio-trace-point-type-not-a-poi = Not a P O I\ngraphing-calculator-narration-audio-trace-point-type-root = Zero\ngraphing-calculator-narration-audio-trace-point-type-trace = Trace\ngraphing-calculator-narration-audio-trace-property-branch-number = Branch { $branch }.\ngraphing-calculator-narration-audio-trace-property-type-before-coordinates = { $type } at\ngraphing-calculator-narration-audio-trace-property-x = X: { $x }.\ngraphing-calculator-narration-audio-trace-property-y = Y: { $y }.\ngraphing-calculator-narration-audio-trace-secret-expression = Secret expression { $index }\ngraphing-calculator-narration-audio-trace-slider-value-unknown = Unable to determine slider value\ngraphing-calculator-narration-audio-trace-tracing-different-expression = Tracing { $expression }.\ngraphing-calculator-narration-audio-trace-unable-to-play = Unable to play audio.\ngraphing-calculator-narration-audio-trace-unable-to-play-audio = Unable to play audio.\ngraphing-calculator-narration-audio-trace-unable-to-trace-this-expression = Unable to audio trace this expression.\ngraphing-calculator-narration-audio-trace-unsupported-expression = { $expression } cannot be audio traced.\ngraphing-calculator-narration-audio-trace-volume = Volume { $volume } percent\ngraphing-calculator-narration-cdf-maximum = Max\ngraphing-calculator-narration-cdf-minimum = Min\ngraphing-calculator-narration-clickable-image-options = Clickable Image Options\ngraphing-calculator-narration-clickable-properties = Clickable Properties\ngraphing-calculator-narration-collapse-folder = Collapse Folder\ngraphing-calculator-narration-color-menu-label = Color:\ngraphing-calculator-narration-color-options = Color Options\ngraphing-calculator-narration-color-unknown = unknown\ngraphing-calculator-narration-description-collapsed-folder = Collapsed Folder\ngraphing-calculator-narration-description-collapsed-secret-folder = Collapsed Secret Folder\ngraphing-calculator-narration-description-folder = Folder\ngraphing-calculator-narration-description-hidden-collapsed-folder = Hidden Collapsed Folder\ngraphing-calculator-narration-description-hidden-collapsed-secret-folder = Hidden Collapsed Secret Folder\ngraphing-calculator-narration-description-hidden-folder = Hidden Folder\ngraphing-calculator-narration-description-hidden-secret-folder = Hidden Secret Folder\ngraphing-calculator-narration-description-secret-folder = Secret Folder\ngraphing-calculator-narration-dist-tab-distributions = Distributions\ngraphing-calculator-narration-dist-tab-visualizations = Visualizations\ngraphing-calculator-narration-domain-maximum = domain Maximum:\ngraphing-calculator-narration-domain-minimum = domain Minimum:\ngraphing-calculator-narration-drag-options = Drag Options\ngraphing-calculator-narration-drag-toggle = Drag\ngraphing-calculator-narration-edit-expression-list = Edit Expression List\ngraphing-calculator-narration-edit-graph-on-desmos = Edit graph on Desmos\ngraphing-calculator-narration-edit-list-mode-off = Edit list mode off.\ngraphing-calculator-narration-edit-list-mode-on = Edit list mode on.\ngraphing-calculator-narration-edit-on-desmos = Edit graph on Desmos\ngraphing-calculator-narration-edit-slider-variable-limits = Edit { $variable } Limits\ngraphing-calculator-narration-editable-label-mode-editable-math = Editable label mode: Editable Math\ngraphing-calculator-narration-editable-label-mode-editable-text = Editable label mode: Editable Text\ngraphing-calculator-narration-editable-point-label-at-coordinates = Editable point label at { $coordinates }\ngraphing-calculator-narration-empty-graphpaper = Empty graph paper.\ngraphing-calculator-narration-expression-audio-trace-mac = To audio trace, press OPTION+T.\ngraphing-calculator-narration-expression-audio-trace-windows = To audio trace, press ALT+T.\ngraphing-calculator-narration-expression-bar = Expression Bar\ngraphing-calculator-narration-expression-evaluation-has-graph = Has graph.\ngraphing-calculator-narration-expression-evaluation-has-graph-and-regression = Has graph and regression. To access statistics, press Tab.\ngraphing-calculator-narration-expression-evaluation-has-regression = Has regression. To access statistics, press Tab.\ngraphing-calculator-narration-expression-evaluation-is-distribution = is distribution.\ngraphing-calculator-narration-expression-evaluation-is-t-test = is T test. To access statistics, press Tab.\ngraphing-calculator-narration-expression-hidden-label = Hidden { $label }\ngraphing-calculator-narration-expression-index-table = Expression { $index } table\ngraphing-calculator-narration-expression-index-table-braille = eq{ $index } table\ngraphing-calculator-narration-expression-label = Label\ngraphing-calculator-narration-expression-list = Expression list\ngraphing-calculator-narration-fill-opacity = Fill Opacity:\ngraphing-calculator-narration-folder-collapsed = folder collapsed\ngraphing-calculator-narration-folder-expanded = folder expanded\ngraphing-calculator-narration-folder-has-items = { $folder } has { $count } items\ngraphing-calculator-narration-functions = Functions\ngraphing-calculator-narration-graph-settings-controls = Graph Settings Controls\ngraphing-calculator-narration-graphpaper-label = graph paper\ngraphing-calculator-narration-graphpaper-multiple-graphs = Graph paper showing { $count } graphs.\ngraphing-calculator-narration-graphpaper-one-graph = Graph paper showing 1 graph.\ngraphing-calculator-narration-hide-animation-properties = Hide Animation Properties\ngraphing-calculator-narration-hide-expression = Hide Expression\ngraphing-calculator-narration-hide-expression-list = Hide expression list\ngraphing-calculator-narration-hide-folder = Hide Folder\ngraphing-calculator-narration-hide-image = Hide Image\ngraphing-calculator-narration-hide-keypad = Hide Keypad\ngraphing-calculator-narration-hide-options = Hide Options\ngraphing-calculator-narration-image-styles = Styles\ngraphing-calculator-narration-keypad-key-next-curve = Next Curve\ngraphing-calculator-narration-keypad-key-next-poi = Next Point of Interest\ngraphing-calculator-narration-keypad-key-next-point = Next Point\ngraphing-calculator-narration-keypad-key-previous-curve = Previous Curve\ngraphing-calculator-narration-keypad-key-previous-poi = Previous Point of Interest\ngraphing-calculator-narration-keypad-key-previous-point = Previous Point\ngraphing-calculator-narration-keypad-key-speed-down = Speed Down\ngraphing-calculator-narration-keypad-key-speed-up = Speed Up\ngraphing-calculator-narration-keypad-key-volume-down = Volume Down\ngraphing-calculator-narration-keypad-key-volume-up = Volume Up\ngraphing-calculator-narration-label-settings = Label Settings\ngraphing-calculator-narration-label-text = Label Text\ngraphing-calculator-narration-line-opacity = Line Opacity:\ngraphing-calculator-narration-line-style-options = Line Style Options\ngraphing-calculator-narration-line-width = Line Width:\ngraphing-calculator-narration-lines-toggle = Lines\ngraphing-calculator-narration-main-desmos-graphing-calculator = Desmos Graphing Calculator\ngraphing-calculator-narration-movable-point-off-screen-prompt = { " " }not visible on screen\ngraphing-calculator-narration-movable-point-prefix = Graph point\ngraphing-calculator-narration-movable-point-suffix-usage-instructions = { " " }is movable. Press Arrows or Shift+Arrows to adjust.\ngraphing-calculator-narration-no-interactive-points = No interactive points on screen\ngraphing-calculator-narration-open-graph = Open Graph\ngraphing-calculator-narration-options-menu = Options Menu\ngraphing-calculator-narration-options-menu-closed = Options menu closed.\ngraphing-calculator-narration-options-menu-open = Options menu open.\ngraphing-calculator-narration-pause-simulation = Pause Simulation\ngraphing-calculator-narration-pause-variable-animation = Pause { $variable } Animation\ngraphing-calculator-narration-play-simulation = Play Simulation\ngraphing-calculator-narration-play-variable-animation = Play { $variable } Animation\ngraphing-calculator-narration-poi-graph-point = Graph point\ngraphing-calculator-narration-point-opacity = Point Opacity:\ngraphing-calculator-narration-point-style-options = Point Style Options\ngraphing-calculator-narration-points-toggle = Points\ngraphing-calculator-narration-powered-by-desmos = Powered by Desmos\ngraphing-calculator-narration-redo = Redo\ngraphing-calculator-narration-screen-reader-label = Screen reader label\ngraphing-calculator-narration-settings-angle = Angle Settings\ngraphing-calculator-narration-settings-cartesian-grid = Cartesian Grid\ngraphing-calculator-narration-settings-polar-grid = Polar Grid\ngraphing-calculator-narration-settings-show-both = Show Both\ngraphing-calculator-narration-settings-show-positive = Show Positive\ngraphing-calculator-narration-settings-x-axis-label = add x-axis label\ngraphing-calculator-narration-settings-x-axis-max = X Axis Maximum:{ " " }\ngraphing-calculator-narration-settings-x-axis-min = X Axis Minimum:{ " " }\ngraphing-calculator-narration-settings-x-axis-step = X Axis Step Size:{ " " }\ngraphing-calculator-narration-settings-y-axis-label = add y-axis label\ngraphing-calculator-narration-settings-y-axis-max = Y Axis Maximum:{ " " }\ngraphing-calculator-narration-settings-y-axis-min = Y Axis Minimum:{ " " }\ngraphing-calculator-narration-settings-y-axis-step = Y Axis Step Size:{ " " }\ngraphing-calculator-narration-share-graph-link = Link to this graph\ngraphing-calculator-narration-share-graph-link-copied = Link copied\ngraphing-calculator-narration-share-graph-link-unable-to-copy = Unable to copy link\ngraphing-calculator-narration-show-animation-properties = Show Animation Properties\ngraphing-calculator-narration-show-as-decimal = Show as Decimal\ngraphing-calculator-narration-show-as-fraction = Show as Fraction\ngraphing-calculator-narration-show-expression = Show Expression\ngraphing-calculator-narration-show-expression-list = Show expression list\ngraphing-calculator-narration-show-image = Show Image\ngraphing-calculator-narration-show-keypad = Show Keypad\ngraphing-calculator-narration-show-options = Show Options\ngraphing-calculator-narration-simulation-paused = simulation paused\ngraphing-calculator-narration-simulation-playing = simulation playing\ngraphing-calculator-narration-size-options = Size Options\ngraphing-calculator-narration-slider-animate-faster = Animate Faster\ngraphing-calculator-narration-slider-animate-slower = Animate Slower\ngraphing-calculator-narration-slider-animating-at-speed = Animating at { $speed }x\ngraphing-calculator-narration-slider-loop-forwards-and-backwards = Loop forwards and backwards\ngraphing-calculator-narration-slider-maximum = Slider Maximum:\ngraphing-calculator-narration-slider-minimum = Slider Minimum:\ngraphing-calculator-narration-slider-play-indefinitely = Play indefinitely\ngraphing-calculator-narration-slider-play-once = Play once\ngraphing-calculator-narration-slider-repeat-one-direction = Repeat in one direction\ngraphing-calculator-narration-slider-step = Slider Step Size:\ngraphing-calculator-narration-slider-trace-no-sliders = No sliders to trace.\ngraphing-calculator-narration-slider-trace-off = Slider trace off.\ngraphing-calculator-narration-slider-trace-on = Slider trace on.\ngraphing-calculator-narration-slider-variable-paused = { $variable } paused\ngraphing-calculator-narration-slider-variable-playing = { $variable } playing\ngraphing-calculator-narration-slider-variable-restarted = { $variable } restarted\ngraphing-calculator-narration-table-column-header = Column header { $column }\ngraphing-calculator-narration-table-no-column-header = No column header\ngraphing-calculator-narration-table-row-column = Row { $row } Col { $column }\ngraphing-calculator-narration-toggle-audio-trace = Toggle Audio Trace\ngraphing-calculator-narration-toggle-letters = Toggle Letters\ngraphing-calculator-narration-unable-to-activate-account-menu = Unable to activate account menu\ngraphing-calculator-narration-unable-to-activate-help-menu = Unable to activate help menu\ngraphing-calculator-narration-unable-to-activate-language-menu = Unable to activate language menu\ngraphing-calculator-narration-unable-to-activate-share-menu = Unable to activate share menu\ngraphing-calculator-narration-unable-to-add-expression = Unable to add expression\ngraphing-calculator-narration-unable-to-add-note = Unable to add note\ngraphing-calculator-narration-unable-to-add-table = Unable to add table\ngraphing-calculator-narration-unable-to-focus-expression-list = Unable to focus expression list\ngraphing-calculator-narration-undo = Undo\ngraphing-calculator-narration-viewport-updated = Graph viewport updated.\ngraphing-calculator-narration-viewport-zoom-default = Graph zoom default\ngraphing-calculator-narration-viewport-zoom-in = Graph zoom in\ngraphing-calculator-narration-viewport-zoom-out = Graph zoom out\ngraphing-calculator-narration-viewport-zoom-square = Graph zoom square\ngraphing-calculator-narration-visual-parameters-height = Height\ngraphing-calculator-narration-visual-parameters-offset = Offset\ngraphing-calculator-narration-visual-parameters-width = Width\ngraphing-calculator-narration-zoom-default = Restore Default Zoom\ngraphing-calculator-text-add-screen-reader-label-placeholder = Add screen reader label\ngraphing-calculator-text-audio-trace-no-graph-to-trace = No graph to trace.\ngraphing-calculator-text-audio-trace-no-implicit-support = Sorry, but I can\'t trace implicit curves yet.\ngraphing-calculator-text-audio-trace-no-parametric-support = Sorry, but I can\'t trace parametric curves yet.\ngraphing-calculator-text-audio-trace-no-polar-support = Sorry, but I can\'t trace polar curves yet.\ngraphing-calculator-text-audio-trace-off = Audio trace off.\ngraphing-calculator-text-audio-trace-on = Audio trace on.\ngraphing-calculator-text-color-black = black\ngraphing-calculator-text-color-blue = blue\ngraphing-calculator-text-color-gray = gray\ngraphing-calculator-text-color-green = green\ngraphing-calculator-text-color-orange = orange\ngraphing-calculator-text-color-purple = purple\ngraphing-calculator-text-color-red = red\ngraphing-calculator-text-color-unknown = color unknown\ngraphing-calculator-text-enter-note-placeholder = Enter a note...\ngraphing-calculator-text-enter-pareneter = Enter the { $param }.\ngraphing-calculator-text-export-braille-email-accessibility = Feedback? Email <1>accessibility@desmos.com</1>{"."}\ngraphing-calculator-text-image-enter-note-placeholder = Enter a note...\ngraphing-calculator-text-label-orientation-above = Above\ngraphing-calculator-text-label-orientation-below = Below\ngraphing-calculator-text-label-orientation-default = Default\ngraphing-calculator-text-label-orientation-left = Left\ngraphing-calculator-text-label-orientation-right = Right\ngraphing-calculator-text-label-size-large = Large\ngraphing-calculator-text-label-size-medium = Medium\ngraphing-calculator-text-label-size-small = Small\ngraphing-calculator-text-loading-image = Loading image...\ngraphing-calculator-text-note-placeholder = Enter a note...\ngraphing-calculator-text-page-description = Explore math with our beautiful, free online graphing calculator. Graph functions, plot points, visualize algebraic equations, add sliders, animate graphs, and more.\ngraphing-calculator-text-parameter-name-binwidth = Bin Width\ngraphing-calculator-text-parameter-name-data = Data Set\ngraphing-calculator-text-parameter-name-dof = Degrees of Freedom\ngraphing-calculator-text-parameter-name-height = Height\ngraphing-calculator-text-parameter-name-max = Maximum\ngraphing-calculator-text-parameter-name-mean = Mean\ngraphing-calculator-text-parameter-name-min = Minimum\ngraphing-calculator-text-parameter-name-offset = Offset\ngraphing-calculator-text-parameter-name-probsuccess = Success Probability\ngraphing-calculator-text-parameter-name-stddev = Standard Deviation\ngraphing-calculator-text-parameter-name-trials = Trials\ngraphing-calculator-text-regression-potentially-inaccurate-parameters = Some parameters may be too large or small to represent accurately.\ngraphing-calculator-text-share-graph-link = Link to this graph\ngraphing-calculator-text-table-created = Table created.\ngraphing-calculator-text-table-more-rows = { $rowCount } more rows\ngraphing-calculator-text-toast-choose-one-file = You can only choose one file as a replacement\ngraphing-calculator-text-toast-error-importing-graph = Error importing graph. Check the URL?\ngraphing-calculator-text-toast-error-no-folders = Only graphs without folders can be inserted into a folder.\ngraphing-calculator-text-toast-expression-size-limit = Expression size cannot exceed 100 characters.\ngraphing-calculator-text-toast-graph-cleared = Graph cleared.\ngraphing-calculator-text-toast-graph-reset = Graph reset.\ngraphing-calculator-text-toast-image-upload-failed = Image upload failed.\ngraphing-calculator-text-toast-imported-graph = Graph imported!\ngraphing-calculator-text-toast-importing-graph = Importing graph...\ngraphing-calculator-text-toast-no-file-selected = You did not select a file\ngraphing-calculator-text-toast-undo-cmd-z = Press CMD+Z to undo.\ngraphing-calculator-text-toast-undo-ctrl-z = Press CTRL+Z to undo.\ngraphing-calculator-text-toast-uploading-images = Uploading images...\ngraphing-calculator-text-toast-zoom-to-fit = We zoomed to fit your data.\ngraphing-calculator-text-zoom-fit = Zoom Fit\ngraphing-tours-heading-advanced-tables = Advanced Tables\ngraphing-tours-heading-derivatives = Derivatives\ngraphing-tours-heading-folders = Folders\ngraphing-tours-heading-lists = Lists\ngraphing-tours-heading-regressions = Regressions\ngraphing-tours-heading-restrictions = Restrictions\ngraphing-tours-heading-sliders = Sliders\ngraphing-tours-heading-tables = Tables\ngraphing-tours-label-advanced-tables-continue = Click here to continue editing this table.\ngraphing-tours-label-advanced-tables-convert = Convert this to a table.\ngraphing-tours-label-advanced-tables-create = Click here to generate a table.\ngraphing-tours-label-advanced-tables-dots = Click here to only show the dots.\ngraphing-tours-label-advanced-tables-edit-list = Click the "Edit List" button.\ngraphing-tours-label-advanced-tables-graph = Start by graphing a function.\ngraphing-tours-label-advanced-tables-new-column = Move right to add a new column.\ngraphing-tours-label-advanced-tables-options = Click and hold on this icon until the options menu opens up.\ngraphing-tours-label-advanced-tables-start = Let\'s make a function. First: click here to create a new blank expression.\ngraphing-tours-label-advanced-tables-type-function = Try typing { $sample_expression }\ngraphing-tours-label-advanced-tables-wizard = You\'re a table wizard!\ngraphing-tours-label-awesome = Awesome!\ngraphing-tours-label-brilliant = Brilliant!\ngraphing-tours-label-derivative-graph-derivative = To graph its derivative: { $equation }\ngraphing-tours-label-derivative-hint-type-derivative = Hint: To get the derivative operator, just type d/dx.\ngraphing-tours-label-derivative-one-more = Let\'s try one more: { $equation }\ngraphing-tours-label-derivative-start-function = Start with a function: { $equation }\ngraphing-tours-label-derivative-start-graph = Let\'s graph a derivative!\ngraphing-tours-label-folders-collapse = Now well explore some folder functionality. Click here to collapse the folder.\ngraphing-tours-label-folders-did-you-know = Did You Know...\ngraphing-tours-label-folders-grab = Now grab this equation by its left edge and drag it into the folder.\ngraphing-tours-label-folders-great-start = Thats a great start!\ngraphing-tours-label-folders-hide = You can hide everything in the folder with one click. Click here to try.\ngraphing-tours-label-folders-indicator = Hint: The gray line will show you if the expression is in the folder.\ngraphing-tours-label-folders-name = Give your folder a name.\ngraphing-tours-label-folders-new-equation = Let\'s make a new equation. For example, type: { $equation }\ngraphing-tours-label-folders-option = ... and select the "folder" option.\ngraphing-tours-label-folders-start = Let\'s make a folder!\ngraphing-tours-label-great-job = Great job!\ngraphing-tours-label-last-thing = Last thing!\ngraphing-tours-label-list-computation = You can do a computation on a list. For example: { $equation }\ngraphing-tours-label-lists-are-powerful = Lists are powerful. Let\'s see.\ngraphing-tours-label-lists-begin-equation = Begin by typing { $equation }\ngraphing-tours-label-lists-count-by = If you want to count by 5 instead, just write something like this: { $equation }\ngraphing-tours-label-lists-create-range = You can create lists of integers even more easily. Try this: { $equation }\ngraphing-tours-label-lists-graph-equation = Graph: { $equation }\ngraphing-tours-label-lists-graph-points = Let\'s graph a few points.\ngraphing-tours-label-lists-hint-abc = Hint: press the \'A B C\' button on the keypad to find the [ ] buttons\ngraphing-tours-label-lists-hint-plot-points = Hint: this will plot a point for each item of b.\ngraphing-tours-label-lists-hint-superscript = Hint: you can type { $suggestion1 } or use the { $suggestion2 } button on the keypad below.\ngraphing-tours-label-lists-point-equation = Try this: { $equation }\ngraphing-tours-label-lists-put-to-work = Nice. Let\'s put that list to work.\ngraphing-tours-label-new-item = Click here to add a new item.\ngraphing-tours-label-nice = Nice!\ngraphing-tours-label-regressions-better-fit = Edit this equation to find a better fit. Try, for example:<br>{ $equation }\ngraphing-tours-label-regressions-check-model = Nice. Let\'s check the model.\ngraphing-tours-label-regressions-data = First, let\'s get some data.\ngraphing-tours-label-regressions-data-2 = Let\'s start with some data!\ngraphing-tours-label-regressions-docs = Head over to Google Docs and copy and paste this { $sample_data_link }.\ngraphing-tours-label-regressions-equation = Now type: { $equation }\ngraphing-tours-label-regressions-expression-option = ... and select the "expression" option.\ngraphing-tours-label-regressions-fill-sample-data = Fill in the sample data:\ngraphing-tours-label-regressions-hint-1 = Hint #1: to get { $y_1 } type { $y1 }.\ngraphing-tours-label-regressions-hint-2 = Hint #2: { $twiddle } is in our onscreen keypad in the \'A B C\' section.\ngraphing-tours-label-regressions-keep-exploring = Nice work &ndash; Keep exploring!\ngraphing-tours-label-regressions-new-model = Now, let\'s try a new model.\ngraphing-tours-label-regressions-new-table = Click here to add a new table.\ngraphing-tours-label-regressions-own-data = Note: you can add your own data instead by clicking the { $plus_icon } button.\ngraphing-tours-label-regressions-residuals = Residuals are the difference between your data and your model. Click here to add them to your table and plot them on the graph.\ngraphing-tours-label-regressions-sample-data = sample data\ngraphing-tours-label-require-expressions-visible = Click to show the list of expressions.\ngraphing-tours-label-require-not-edit-list-mode = Click to return to your expressions.\ngraphing-tours-label-require-resources-not-open = Click to return to this graph.\ngraphing-tours-label-restrictions-abc = Hint: press the \'A B C\' button on the keypad to find the { $buttons } buttons\ngraphing-tours-label-restrictions-blank-expression = Click here to make a new blank expression.\ngraphing-tours-label-restrictions-change-equation = Change this equation to { $sample_expression }\ngraphing-tours-label-restrictions-domain = Restrict the domain of this line by adding { $sample_expression } to the end.\ngraphing-tours-label-restrictions-dont-forget = Don\'t forget the "y="!\ngraphing-tours-label-restrictions-graph-parabola = Now graph: { $sample_expression }\ngraphing-tours-label-restrictions-move-parabola = Move the parabola.\ngraphing-tours-label-restrictions-new-expression = Click here to create a new expression.\ngraphing-tours-label-restrictions-range = Now let\'s restrict the range. Add { $sample_expression } to the end.\ngraphing-tours-label-restrictions-star = You\'re a restrictions star!\ngraphing-tours-label-restrictions-start = Let\'s get started!\ngraphing-tours-label-restrictions-straight-line = Try graphing a straight line, like { $sample_expression }\ngraphing-tours-label-restrictions-type-all = Try typing all of { $sample_expression }\ngraphing-tours-label-restrictions-typing-hint = Hint: you can type { $suggestion1 }, or use the { $suggestion2 } button on the keypad below.\ngraphing-tours-label-self-destruct = This message will self-destruct in { $seconds }...\ngraphing-tours-label-sliders-add = Now click here to add the sliders.\ngraphing-tours-label-sliders-blank-expression = Click here to create a new blank expression.\ngraphing-tours-label-sliders-change-value = Type in here to change the value.\ngraphing-tours-label-sliders-drag-handle = Drag the handle to change the value.\ngraphing-tours-label-sliders-hands-free = Go "Hands-free"\ngraphing-tours-label-sliders-make-sliders = Let\'s make some sliders!\ngraphing-tours-label-sliders-press-play = Press play to animate the slider.\ngraphing-tours-label-sliders-pro = You\'re a slider pro!\ngraphing-tours-label-sliders-try-typing = Try typing { $sample_expression }\ngraphing-tours-label-tables-back = Click back to continue editing.\ngraphing-tours-label-tables-close-options = Click anywhere to close the drawing options.\ngraphing-tours-label-tables-dots = Click here to connect the dots.\ngraphing-tours-label-tables-enter = Now try pressing Enter.\ngraphing-tours-label-tables-fill-another = Just fill in one more...\ngraphing-tours-label-tables-fill-cell = Fill it in.\ngraphing-tours-label-tables-fill-row = Fill in this whole row.\ngraphing-tours-label-tables-last-trick = Last trick!\ngraphing-tours-label-tables-next-row = Go down to the next row to add more data.\ngraphing-tours-label-tables-open-options = Click and hold on this icon until the options menu opens up.\ngraphing-tours-label-tables-select-table = ... and select the "table" option.\ngraphing-tours-label-tables-start = Let\'s make a table!\ngraphing-tours-label-tables-type-number = Type any number here.\ngraphing-tours-label-tables-valid-number = Uh-oh! Type a valid number here.\ngraphing-tours-label-tables-whiz = You\'re a tables whiz!\nmatrix-calculator-button-new = New Matrix\nmatrix-calculator-button-settings = settings\nmatrix-calculator-heading-edit-matrix = Edit Matrix { $variable }\nmatrix-calculator-label-columns = Columns\nmatrix-calculator-label-rows = Rows\nmatrix-calculator-narration-add-column = Add Column\nmatrix-calculator-narration-add-row = Add Row\nmatrix-calculator-narration-evaluation = equals { $rowCount } by { $columnCount } matrix.\nmatrix-calculator-narration-evaluation-row = Row { $rowNumber }: { $values }.\nmatrix-calculator-narration-keypad-key-det = Determinant\nmatrix-calculator-narration-keypad-key-inverse = Inverse\nmatrix-calculator-narration-keypad-key-rref = Reduced row echelon form\nmatrix-calculator-narration-keypad-key-trace = Trace\nmatrix-calculator-narration-keypad-key-transpose = Transpose\nmatrix-calculator-narration-matrix-with-variable = Matrix { $variable }\nmatrix-calculator-narration-matrix-without-variable = Matrix\nmatrix-calculator-narration-new-dimensions = Matrix size: { $rows } by { $cols }\nmatrix-calculator-narration-remove-column = Remove Column\nmatrix-calculator-narration-remove-row = Remove Row\nmatrix-calculator-narration-resize-controls = Resize Matrix Controls\nmatrix-calculator-narration-settings-menu = Settings Menu\nmatrix-calculator-narration-title = Desmos Matrix Calculator\nmatrix-calculator-text-node-type-matrix = a matrix\nmatrix-calculator-text-node-type-number = a number\n### Strings for desmos.com homepage\n\n\n### 3831 English words, 364 English strings\n\nfrontpage-button-braille-print-examples = Print these examples\nfrontpage-button-main-join-class = Join\nfrontpage-error-something-went-wrong-try-again-later = Sorry! Something went wrong. Please try again later.\nfrontpage-heading-about-what-we-do = What We Do\nfrontpage-heading-about-who-we-are = Who We Are\nfrontpage-heading-art-contest = <1>Desmos Global</1> Math Art Contest\nfrontpage-heading-art-contest-guest-judges = Guest Judges\nfrontpage-heading-braille-examples = Braille Examples\nfrontpage-heading-braille-table-type-this = Type this\nfrontpage-heading-braille-table-typeset = Typeset\nfrontpage-heading-braille-view-examples-in = View examples in:\nfrontpage-heading-equity-as-we-do-this-work = As we do this work, we ask ourselves...\nfrontpage-heading-equity-disrupt-systemic-inequities = III.  We want to disrupt systemic inequities and conditions of marginalization in education.\nfrontpage-heading-equity-more-equitable-workplace = II. We want to work continuously towards an equitable workplace.\nfrontpage-heading-equity-next-steps = Next Steps and an Invitation\nfrontpage-heading-equity-principles = Desmos Equity Principles\nfrontpage-heading-equity-serve-all-students-and-teachers = I.  We want our products to serve all students and teachers.\nfrontpage-heading-footer-company = Company\nfrontpage-heading-footer-legal = Legal\nfrontpage-heading-footer-products = Products\nfrontpage-heading-footer-resources = Resources\nfrontpage-heading-header-maintenance-mode = Desmos is currently undergoing scheduled maintenance, and accounts are temporarily unavailable.\nfrontpage-heading-main-desmos-plus-partners = Desmos + Partners\nfrontpage-heading-main-global-art-contest-finalists = Global Math Art Contest Finalists\nfrontpage-heading-main-lets-learn-together = Let\'s learn together.\nfrontpage-heading-main-students = Students\nfrontpage-heading-main-teachers = Teachers\nfrontpage-heading-main-using-desmos-in-a-classroom = Using Desmos in a classroom?\nfrontpage-heading-partners-accessibility-out-of-box = Accessibility Out of the Box\nfrontpage-heading-partners-anywhere-any-device = Anywhere, Any Device\nfrontpage-heading-partners-constant-improvements = Constant Improvements\nfrontpage-heading-partners-global-scale = Global Scale\nfrontpage-heading-partners-rock-solid-reliability = Rock-Solid Reliability\nfrontpage-heading-partners-want-to-embed = Want to embed the power of Desmos right into your website or app?\nfrontpage-heading-shared-contact-us = Contact Us\nfrontpage-heading-team-job-title-ceo = CEO\nfrontpage-heading-team-job-title-copy-editing = Copy Editing\nfrontpage-heading-team-job-title-data = Data\nfrontpage-heading-team-job-title-education = Education\nfrontpage-heading-team-job-title-engineering = Engineering\nfrontpage-heading-team-job-title-faculty = Faculty\nfrontpage-heading-team-job-title-graph-team = Graph Team\nfrontpage-heading-team-job-title-localization = Localization\nfrontpage-heading-team-job-title-national-coach = National Coach\nfrontpage-heading-team-job-title-new-markets = New Markets\nfrontpage-heading-team-job-title-operations = Operations\nfrontpage-heading-team-job-title-partnerships = Partnerships\nfrontpage-heading-team-job-title-product = Product\nfrontpage-heading-team-job-title-support = Support\nfrontpage-heading-team-meet-the-team = Meet the Team\nfrontpage-heading-team-partnerships-plus-operations = Partnerships + Operations\nfrontpage-heading-team-product-plus-engineering = Product + Engineering\nfrontpage-heading-team-teaching = Teaching\nfrontpage-heading-testmode-about-desmos-test-mode = About Desmos Test Mode\nfrontpage-heading-testmode-about-tab = About\nfrontpage-heading-testmode-android-tab = Android (Beta)\nfrontpage-heading-testmode-chromebooks-tab = Chromebooks\nfrontpage-heading-testmode-feedback-tab = Feedback\nfrontpage-heading-testmode-ipads-and-iphones-tab = iPads and iPhones\nfrontpage-heading-testmode-practice-tab = Practice\nfrontpage-heading-title-about = About Us\nfrontpage-heading-title-art-contest = Art Contest Finalists\nfrontpage-heading-title-equity = Equity Principles\nfrontpage-heading-title-frontpage = Beautiful, Free Math\nfrontpage-heading-title-partners = Partners\nfrontpage-heading-title-team = Team\nfrontpage-label-about-meet-the-team = Meet the Team\nfrontpage-label-art-contest-finalists = Finalists\nfrontpage-label-art-contest-from-artist = From the artist:\nfrontpage-label-art-contest-from-judges = From the judges:\nfrontpage-label-art-contest-photo-vernon-1st = 1st Place\nfrontpage-label-art-contest-photo-vernon-2nd = 2nd Place\nfrontpage-label-art-contest-photo-vernon-3rd = 3rd Place\nfrontpage-label-main-classcode-placeholder = Code\nfrontpage-label-shared-contact-us = Contact Us\nfrontpage-link-art-contest-age-range-13-14 = Ages 13-14\nfrontpage-link-art-contest-age-range-15-16 = Ages 15-16\nfrontpage-link-art-contest-age-range-17-18 = Ages 17-18\nfrontpage-link-footer-classroom-activities = Classroom Activities\nfrontpage-link-footer-contact-twitter = Twitter\nfrontpage-link-footer-help-center = Help Center\nfrontpage-link-footer-partnerships = Partnerships\nfrontpage-link-footer-terms-of-service = Terms of Service\nfrontpage-link-header-about = About\nfrontpage-link-header-math-tools = Math Tools\nfrontpage-link-header-resources = Resources\nfrontpage-link-header-team-desmos = Team Desmos\nfrontpage-link-main-browse-activities = Browse Activities\nfrontpage-link-main-go-to-student-homepage = Go to Student Homepage\nfrontpage-link-main-student-homepage = Student Homepage\nfrontpage-link-main-teacher-sign-up = Teacher Sign-Up\nfrontpage-link-main-view-all-finalists = View all finalists\nfrontpage-link-shared-about-us = About Us\nfrontpage-link-shared-accessibility = Accessibility\nfrontpage-link-shared-account-settings = Account Settings\nfrontpage-link-shared-api-documentation = API Docs\nfrontpage-link-shared-assessments = Assessments\nfrontpage-link-shared-blog = Blog\nfrontpage-link-shared-careers = Careers\nfrontpage-link-shared-contact-us = Contact Us\nfrontpage-link-shared-equity-principles = Equity Principles\nfrontpage-link-shared-four-function-calculator = Four Function Calculator\nfrontpage-link-shared-geometry-tool = Geometry Tool\nfrontpage-link-shared-graphing-calculator = Graphing Calculator\nfrontpage-link-shared-learn-desmos = Learn Desmos\nfrontpage-link-shared-log-in = Log In\nfrontpage-link-shared-log-out = Log Out\nfrontpage-link-shared-matrix-calculator = Matrix Calculator\nfrontpage-link-shared-scientific-calculator = Scientific Calculator\nfrontpage-link-shared-sign-up = Sign Up\nfrontpage-link-shared-test-practice = Test Practice\nfrontpage-link-testmode-learn-more-screen-pinning-mode = Learn more about using Screen Pinning on your Android device.\nfrontpage-narration-about-picture-of-allison = Picture of Allison\nfrontpage-narration-about-picture-of-corey = Picture of Corey\nfrontpage-narration-about-picture-of-janessa = Picture of Janessa\nfrontpage-narration-about-picture-of-john = Picture of John\nfrontpage-narration-about-picture-of-michelle = Picture of Michelle\nfrontpage-narration-about-picture-of-sabrina = Picture of Sabrina\nfrontpage-narration-about-picture-of-sebastian = Picture of Sebastian\nfrontpage-narration-about-picture-of-stephen = Picture of Stephen\nfrontpage-narration-about-picture-of-suzanne = Picture of Suzanne\nfrontpage-narration-art-contest-image-of-graph = Image of { $graphTitle }\nfrontpage-narration-art-contest-image-of-graph-by = Image of graph by { $name }\nfrontpage-narration-art-contest-photo-boaler = Photo of Jo Boaler\nfrontpage-narration-art-contest-photo-bousso = Photo of Diarra Bousso\nfrontpage-narration-art-contest-photo-sanderson = Photo of Grant Sanderson\nfrontpage-narration-art-contest-photo-vernon = Photo of Natalie Vernon\nfrontpage-narration-art-contest-photo-woo = Photo of Eddie Woo\nfrontpage-narration-main-cambridge-logo = Cambridge Logo\nfrontpage-narration-main-ib-logo = IB Logo\nfrontpage-narration-main-nwea-logo = NWEA Logo\nfrontpage-narration-main-pearson-logo = Pearson Logo\nfrontpage-narration-main-savvas-logo = Savvas Logo\nfrontpage-narration-main-sbac-logo = SBAC Logo\nfrontpage-narration-shared-desmos-logo = Desmos Logo\nfrontpage-narration-shared-image-of-graph = Image of { $graphTitle }\nfrontpage-narration-team-collapse-biography = Collapse Biography\nfrontpage-narration-team-picture-of-name = Picture of { $name }\nfrontpage-narration-testmode-im-done-timer-ios = The I\'m Done button and timer on the iOS closing screen\nfrontpage-narration-testmode-ipad-opening-screen = The Start Test button on the iPad opening screen\nfrontpage-narration-testmode-opening-screen = The opening screen of Test Mode\nfrontpage-text-about-build-a-world = Desmos wants to build a world where every student learns math and loves learning math, where a students access to the power and beauty of math doesn\'t depend on their place of birth, race, ethnicity, gender, or any other aspect of their identity.\nfrontpage-text-about-careers = We\'re a small but growing team. Interested in joining? <1><2>We\'re hiring!</2> <3/></1>\nfrontpage-text-about-curriculum = In 2020, we launched our core <1>middle school math program</1>, which pairs the open-source U.S. middle school curriculum from Illustrative Mathematics and Open Up Resources with Desmos powerful technology, humanizing pedagogy, and intuitive design. We are working with an incredible cohort of schools and districts to implement and further improve this program over the years to come.\nfrontpage-text-about-join-us = Come join us on our journey! <1>Play with the calculator</1>, <2>check out our classroom activities</2>, or <3>find a career</3> on our growing team. Stay in touch with us on <4>Twitter</4>, <5>Facebook</5>, <6>Instagram</6>, or <7>email</7>{"."} Teachers and school leaders are also welcome to join our <8>Educators Community</8>{"."}\nfrontpage-text-about-our-story = Our free suite of math software tools, including the renowned Desmos Graphing Calculator and Scientific Calculator, are used annually by over 40 million teachers and students around the world. Our tools power core math curricula for many of the worlds largest publishers, and our calculators are built into the majority of U.S. state-level assessments and digital college entrance exams. Desmos is also partnered with the Smarter Balanced Assessment Consortium, the International Baccalaureate MYP, and NWEA (view the full list of assessments <1>here</1>).\nfrontpage-text-about-student-activities = Our cutting-edge technology also powers our free <1>digital classroom activities</1>, thoughtfully designed by teachers for teachers to support and celebrate the different ways students come to know mathematics. These activities are guided by our <2>pedagogical philosophy</2> and open up a world of possibilities for students to explore concepts more deeply, collaborate with their peers on problem-solving, and apply knowledge creatively as mathematicians.\nfrontpage-text-art-contest-about-diarra-bousso = <1>Diarra Bousso</1> is a Serial Entrepreneur, Creative Mathematician and Multidisciplinary Artist born in Dakar, Senegal. She is the founder of the fashion and lifestyle company Dakar Boutique Group which houses her label DIARRABLU. She has built a global fashion business through her innovative design concept merging algorithms, tradition and sustainability. Diarra has showcased her collections during New York and Paris Fashion weeks, and is a designer in residence at the Fashion Incubator San Francisco at Bloomingdale\'s. She is an activist for the global celebration of the African cultural legacy and represents Senegal at the United Nations new platform for art and heritage. Diarra recently completed her Masters degree in Mathematics Education at Stanford University.\nfrontpage-text-art-contest-about-eddie-woo = <1>Eddie Woo</1> teaches mathematics at Cherrybrook Technology High School in Sydney, Australia. He uploads his everyday classroom lessons to his Youtube channel, <2>Wootube</2>, which has over 900,000 subscribers and 50 million views. He\'s the author of <3>It\'s A Numberful World</3>{"."}\nfrontpage-text-art-contest-about-grant-sanderson = <1>Grant Sanderson</1> is the author of the YouTube channel <2>3blue1brown</2>{"."} Reaching several million subscribers, the channel is devoted to providing visual explanations of many different topics in math including calculus, geometry, linear algebra, quantum mechanics, machine learning and more.\nfrontpage-text-art-contest-about-jo-boaler = <1>Dr. Jo Boaler</1> is the Nomellini & Olivier Professor of Education at Stanford University, a renowned education researcher and author, and the co-founder of <2>youcubed.org</2>{"."} She\'s devoted her career to mathematics education reform and equitable mathematics classrooms. Her latest book is <3>Limitless Mind: Learn, Lead & Live without Barriers</3> & she is co-leading a <4>K-12 data science initiative</4>{"."}\nfrontpage-text-art-contest-about-natalie-vernon = <1>Natalie Vernon</1> works for MEI, an independent charity in England that develops and delivers national professional development for mathematics teachers across the country. Natalie focuses primarily on working with KS4 and KS5 teachers. Prior to joining MEI, Natalie was a head of department in a comprehensive secondary school in England and had taught in this sector for 12 years. She is particularly interested in how technology and cognitive learning theory can help to improve understanding and engagement in maths classrooms.\nfrontpage-text-art-contest-description = Desmos\'s first Global Math Art Contest featured over 4,000 graphs from over 100 countries around the world. Here are the winners and finalists, chosen from countless examples of incredible effort, artistry, ingenuity, and creativity.\nfrontpage-text-braille-examples-calculator-information = Use a Braille display? You can read and write equations in the <1>Four-Function</1> <2>(www.desmos.com/fourfunction)</2> and <3>Scientific</3> <4>(www.desmos.com/scientific)</4> calculators using the two most common mathematical Braille codes in North America: Nemeth and Unified English Braille (UEB).\nfrontpage-text-braille-examples-page-screen-reader-information = Your screen reader should be set for Computer Braille input and output to minimize the risk of translation errors. Check out <1>learn.desmos.com/braille</1> for more information about using Braille in the Desmos calculators.\nfrontpage-text-description-about = Desmos is a math ed tech company building calculators, digital classroom tools, math activities, and curriculum for classrooms around the world.\nfrontpage-text-description-art-contest = The Desmos Math Art Contest is open yearly to students ages 1318 to showcase their graphing calculator skills, creativity, and love of math.\nfrontpage-text-description-equity = Our goal is to support the development of a more equitable math education system and tech industry. We use these principles as our guide.\nfrontpage-text-description-frontpage = Desmos offers best-in-class calculators, digital math activities, and curriculum to help every student love math and love learning math.\nfrontpage-text-description-partners = Desmos runs on any modern device with no downloads or installs. Partner with us to embed the power of Desmos right into your website or app.\nfrontpage-text-description-team = Our team works across 7 time zones, 2 hemispheres, and 18 states with 1 goal: to help every student learn math and love learning math.\nfrontpage-text-equity-as-a-us-based-team = As a primarily U.S.-based team, our focus for applying these principles has typically centered on injustices within our country. However, as our team, community of users, and partnerships continue to expand internationally, we seek to learn how we can apply these principles to strive for equitable math education worldwide.\nfrontpage-text-equity-everyone-understands = Our workplace should be one where everyone understands how they contribute to the companys mission and feels valued in their contribution. If we dont intentionally foster diversity and inclusion internally, we remain a part of the broader systemic inequities driving the need for these principles. Equally important, having a diverse group of colleagues is essential to serving a diverse external community. To do this, we must critically examine and address bias in our own processes and interactions.\nfrontpage-text-equity-goal-more-equitable-math-education-system = Our goal is to support the development of a more equitable math education system and tech industry. We use these principles as guides towards achieving this goal.\nfrontpage-text-equity-gratitude = We also want to express our gratitude to the many folks who have influenced and pushed our thinking in this area, especially but certainly not limited to <1>Lauren Baucom</1>, <2>Christelle Rocha</2>, <3>Ayanna Perry</3>, and Rochelle Gutierrez.\nfrontpage-text-equity-how-can-we-measure-impact = How can we measure the impact of our work on communities we aim to serve?\nfrontpage-text-equity-how-can-we-uphold-values = How can we uphold our values when selecting partners and services?\nfrontpage-text-equity-how-might-we-attend-to-safety = How might we attend to the mental, emotional, and physical safety of our employees?\nfrontpage-text-equity-how-might-we-continue-to-prioritize-equity = How might we continue to prioritize a drive for equity as our company changes over time?\nfrontpage-text-equity-how-might-we-examine-biases = How might we examine and reduce our individual biases?\nfrontpage-text-equity-how-might-we-share-our-thinking = How might we share our current thinking and get feedback?\nfrontpage-text-equity-how-might-we-support-access = How might we support the ACCESS and ACHIEVEMENT of the communities we serve?\nfrontpage-text-equity-how-might-we-support-identity = How might we support the IDENTITY and POWER of the communities we serve?\nfrontpage-text-equity-how-might-we-sustain-ourselves = How might we sustain ourselves in our day-to-day work at Desmos?\nfrontpage-text-equity-how-might-work-disrupt-white-supremacy = How might our work disrupt white supremacy and the oppressive results of dominant culture?\nfrontpage-text-equity-how-will-it-help = How might this work help the communities we aim to serve? How might it harm these communities?\nfrontpage-text-equity-on-a-mission = We\'re on a mission to help every student learn math and love learning math. To achieve our mission, we must acknowledge past and present injustices in our communities and take intentional action to make change.\nfrontpage-text-equity-tag-or-email = We would love to hear ways these principles may be underdeveloped or ways in which these principles shifted your thinking. If you want to respond publicly, tag us <1>@desmos</1>{"."} If you want to respond privately, feel free to email <2>equity@desmos.com</2>{"."}\nfrontpage-text-equity-we-have-a-responsibility = We have a responsibility to continuously learn about how systemic inequity is embedded in education and to use this knowledge to drive our decision-making. As we learn and put our learning into practice, we share our work with the hope that others will listen, learn, and push us further.\nfrontpage-text-equity-we-recognize-creating-adopting = We recognize that creating and adopting a set of equity principles is just one foundational step that helps us orient the work that comes next. We are also aware that our team members identities, experiences, and biases limit our ability to help every student or to see ways in which our systems and structures bias some groups over others.\nfrontpage-text-equity-what-voices-can-we-amplify = What underrepresented voices can we learn from and amplify?\nfrontpage-text-equity-which-communities-to-learn-from = Which communities do we need to learn from and serve?\nfrontpage-text-equity-who-serves-harms = Who might each internal process serve? Who might this process harm?\nfrontpage-text-equity-without-taking-intentional-steps = Without taking intentional steps, our work will not serve all groups well. Therefore, we must focus on identifying and attending to the needs of marginalized and excluded communities. This means learning from and with these teachers and students, and using their needs to shape our work and measure our success.\nfrontpage-text-footer-copyright = Copyright { $copyrightSign } { $year } Desmos, Inc.\nfrontpage-text-header-app-links = Download our apps in the <1>Google Play Store</1> and <2>iOS App Store</2>{"."}\nfrontpage-text-main-have-a-code = Have a code from your teacher? Head to the student homepage to enter it.\nfrontpage-text-main-interactive-and-creative-activities = Interactive and creative activities for your math class.\nfrontpage-text-main-join-your-classmates = Join your classmates!\nfrontpage-text-main-on-a-mission = We\'re on a mission to help every student learn math and love learning math.\nfrontpage-text-main-partners-benefits = As a partner of Desmos, you benefit from our continual work to make Desmos more powerful, faster, and easier to use. We release a new version of the API annually in April as a free upgrade for all of our partners. <1>Read our Changelog</1>{"."}\nfrontpage-text-main-partners-information = Our tools power <1>assessments</1> and major curricula. <2>Learn more</2>\nfrontpage-text-partners-accessible-api = We believe in interactive math for every student, including students who are blind or visually impaired. Desmos\'s API is WCAG 2.0 compliant at the AA level. We support fully blind students by converting graphs to sound and connecting with screen readers. <1>Learn More</1>{"."}\nfrontpage-text-partners-desmos-runs-on-modern-browser = Desmos runs on any modern browser with no downloads or installs. We also run seamlessly on iPhones, iPads, Android phones, and Windows touch devices. Chromebook attached to a Smartboard? No problem! We\'ve seen just about every combination a classroom has to offer, and we make sure our software runs on any modern browser, in nearly any configuration.\nfrontpage-text-partners-desmos-used-by-millions = Desmos is used by millions of students and teachers in nearly every country in the world and has been translated into 30 languages.\nfrontpage-text-partners-uptime = One of our values is "Works every time." This extends to our API. With greater than 99.99% uptime over the last 3 years, we provide the reliability your app or website needs. We also offer self-hosting for partners who need it.\nfrontpage-text-team-about-us = Our team works across 7 time zones, 2 hemispheres, and 18 states with 1 goal: to help every student learn math and love learning math. Want to join us? <1>We\'re hiring!</1>\nfrontpage-text-testmod-administer-test = <1>To administer a Secure Test:</1><2><3>Have students pin the app.</3><4>Tell the students not unpin the app.</4><5>At the end of the test, confirm that the screen was pinned for the entire test by checking the in-app clock.</5></2>\nfrontpage-text-testmod-feedback = We are excited about our recent app updates, and we are continuously making improvements. We would love your feedback on how we can support the best possible experience for your students and colleagues. Please email us at <1>feedback@desmos.com</1> with any questions or comments!\nfrontpage-text-testmode-android = Our <1>Android app</1> (currently in Beta testing) allows for offline practice.\nfrontpage-text-testmode-app-self-lock-mode-colors = While in App Self-Lock mode, the top bar of the calculator will change color according to the calculator in use: green for graphing, purple for scientific, blue for four function. There will also be a badge next to the Desmos logo.\nfrontpage-text-testmode-chromebooks = Our Chrome app allows for offline practice. You can download the Chrome app by visiting <1>bit.ly/desmos-test-mode-chrome-app</1> on the device. The <2>Chrome browser</2> must be installed on the device to use the Chrome Test Mode app.\nfrontpage-text-testmode-enable-guided-access = <1>To enable Guided Access:</1><2><3>Go to Settings > General > Accessibility > Guided Access.</3><4>Pick a passcode that needs to be entered.</4><5>Open up the Test Mode app.</5><6>Triple-click the Side or Home button.</6></2><7>This will lock the device to that app and won\'t allow the student to leave it without a code.</7>\nfrontpage-text-testmode-enable-screen-pinning = <1>To enter Screen Pinning:</1><2><3>Disable WiFi on your phone.</3><4>Enter Airplane Mode on your phone.</4><5>A "Start Test" button will appear. Click it.</5></2>\nfrontpage-text-testmode-exit-guided-access = <1>To exit Guided Access:</1><2><3>Triple-click the Side or Home button.</3><4>Enter the passcode that you chose.</4></2>\nfrontpage-text-testmode-four-function-calculator-app-self-lock-mode-caption = Four function calculator in App Self-Lock mode with a blue top bar.\nfrontpage-text-testmode-four-function-calculator-blue-top-bar = The secure four function calculator has a blue top bar.\nfrontpage-text-testmode-four-function-calculator-caption = Four function calculator in kiosk mode with a blue top bar.\nfrontpage-text-testmode-graphing-calculator-app-self-lock-mode-caption = Graphing calculator in App Self-Lock mode with a green top bar.\nfrontpage-text-testmode-graphing-calculator-kiosk-mode-caption = Graphing calculator in kiosk mode with a green top bar.\nfrontpage-text-testmode-guided-access = For additional security, you can lock the student into the app using <1>Guided Access</1>{"."}\nfrontpage-text-testmode-ipads-and-iphones = Our <1>iPad and iPhone app</1> allows for offline practice. The app also supports additional levels of security.\nfrontpage-text-testmode-kiosk-mode = Kiosk mode provides an extra level of security by preventing other apps from being used while the calculator is open. Before you sign in, click Apps on the bottom bar and then select Desmos Test Mode. To exit kiosk mode, turn the Chromebook off.\nfrontpage-text-testmode-kiosk-mode-colors = While in kiosk mode, the top bar of the calculator will change color according to the calculator in use: green for graphing, purple for scientific, blue for four function. There will also be a badge next to the Desmos logo.\nfrontpage-text-testmode-levels-of-security = This page describes the various levels of security available through our apps, along with instructions for installation and usage.\nfrontpage-text-testmode-low-stakes-assessments = Each app lets you administer low-stakes, proctored assessments with security features to help enforce your school\'s or classroom\'s policies. We also partner with Mobile Device Management (MDM) companies to provide an even more secure test-day experience.\nfrontpage-text-testmode-partners = Desmos partners with high-stakes test providers in <1>over 30 states and on several national exams</1> to provide access to our calculators on testing day.\nfrontpage-text-testmode-practice = Students can practice using the calculators on our <1>Practice Page</1>{"."} We also provide free apps for <2>Chromebooks,</2> <3>iPads, and iPhones</3> to support practice.\nfrontpage-text-testmode-practice-apps-match-test-day = Our practice apps match the configuration that students will encounter on test day. Students can practice for a specific assessment by selecting "Choose Assessment" on the opening screen.\nfrontpage-text-testmode-scientific-calculator-app-self-lock-mode-caption = Scientific calculator in App Self-Lock mode with a purple top bar.\nfrontpage-text-testmode-scientific-calculator-caption = Scientific calculator in kiosk mode with a purple top bar.\nfrontpage-text-testmode-scientific-calculator-purple-top-bar = The secure scientific calculator has a purple top bar.\nfrontpage-text-testmode-screen-pinning-mode = Screen Pinning mode provides an extra level of security by preventing other apps from being used while the calculator is open.\nfrontpage-text-testmode-secure-graphing-calculator-green-top-bar = The secure graphing calculator has a green top bar.\nfrontpage-text-testmode-students-can-leave-app-self-lock-mode = Please note that students can leave App Self-Lock by clicking "I\'m Done" before the end of the test. You can monitor appropriate usage by looking at the log at the conclusion of the test. It will show how long the student was continuously in the application.\nfrontpage-text-testmode-students-can-leave-chromebook-app = Please note that students can leave the app by powering down their Chromebook and restarting it. You can monitor appropriate usage by looking at the log at the conclusion of the test. It will show how long the student was continuously in the application.\nfrontpage-text-testmode-students-can-opt-into-app-self-lock = Students can opt into App Self-Lock by pressing the "Start Test" button. This will prevent other applications from being used.\nfrontpage-text-testmode-to-help-teachers-and-students-prepare = To help students and teachers prepare for these assessmentsand to support delivery of lower-stakes tests and quizzes in classroomswe\'ve developed a suite of "Test Mode" apps.\npractice-button-state-info-pdf = { $stateName } Information PDF\npractice-heading-accessibility = Accessibility\npractice-heading-is-desmos-on-test = Is Desmos on your test?\npractice-heading-national-international-assessments = National and International Assessments\npractice-heading-practice = Practice\npractice-heading-privacy = Privacy\npractice-heading-questions-and-feedback = Additional Questions and Feedback\npractice-heading-state-assessments = State Assessments\npractice-heading-title-test-mode = Test Mode\npractice-heading-title-testing = Testing\npractice-label-desmos-on-test = Desmos is on the test!\npractice-label-desmos-on-test-apply-nysed = Apply to NYSED to use Desmos!\npractice-label-desmos-on-test-partial = Desmos can be used on the test\npractice-label-desmos-on-tests = Desmos is on the tests!\npractice-label-ib-middle-years = International Baccalaureate (IB) Middle Years Programme (MYP)\npractice-label-nwea-map-growth = NWEA MAP Growth\npractice-label-sample = Sample\npractice-label-sbac = Smarter Balanced\npractice-label-state-test = State Test:\npractice-label-state-tests = State Tests:\npractice-label-states-al-four-function-grades = Grades 6-8\npractice-label-states-al-scientific-grades = Grades 6-8\npractice-label-states-az-graphing-grades = High School\npractice-label-states-az-scientific-grades = Grades 7-8\npractice-label-states-ca-four-function-grades = Grade 5 (Science, CAST), Grade 6 (Mathematics)\npractice-label-states-ca-graphing-grades = Grade 11 (Mathematics)\npractice-label-states-ca-scientific-grades = Grades 7-8 (Mathematics), Grades 8-12 (Science, CAST)\npractice-label-states-ct-four-function-grades = Grade 6\npractice-label-states-ct-scientific-grades = Grades 7-8\npractice-label-states-de-four-function-grades = Grade 6\npractice-label-states-de-graphing-grades = High School\npractice-label-states-de-scientific-grades = Grades 7-8\npractice-label-states-fl-scientific-grades = Grades 7-8\npractice-label-states-ga-four-function-grades = Grade 6\npractice-label-states-ga-graphing-grades = High School\npractice-label-states-ga-scientific-grades = Grades 7-8 & High School\npractice-label-states-hi-four-function-grades = Grade 6\npractice-label-states-hi-graphing-grades = High School\npractice-label-states-hi-scientific-grades = Grades 7-8\npractice-label-states-ia-four-function-grades = Grades 3-6 (Mathematics), Grade 5 (Science)\npractice-label-states-ia-scientific-grades = Grades 7-11 (Mathematics), Grades 8 & 10 (Science)\npractice-label-states-id-four-function-grades = Grade 6\npractice-label-states-id-graphing-grades = High School\npractice-label-states-id-scientific-grades = Grades 7-8\npractice-label-states-in-four-function-grades = Grade 6 (ILEARN and IAM)\npractice-label-states-in-graphing-grades = High School (ISTEP+)\npractice-label-states-in-scientific-grades = Grades 7-8 (ILEARN)\npractice-label-states-ky-four-function-grades = High School (Mathematics)\npractice-label-states-ky-graphing-grades = High School (Mathematics and Science)\npractice-label-states-ky-scientific-grades = High School (Mathematics)\npractice-label-states-la-graphing-grades = High School\npractice-label-states-ma-graphing-grades = Grades 8 & 10 (Mathematics)\npractice-label-states-ma-scientific-grades = High School (Introductory Physics)\npractice-label-states-md-four-function-grades = Grade 5 (Science), Grades 3-7 (Mathematics)\npractice-label-states-md-graphing-grades = High School (Mathematics)\npractice-label-states-md-scientific-grades = Grade 8 (Mathematics), Grade 8 (Science)\npractice-label-states-mi-four-function-grades = Grade 6\npractice-label-states-mi-scientific-grades = Grade 7\npractice-label-states-mo-four-function-grades = Grade 5 & 8 (Science), Grades 6-8 (Mathematics)\npractice-label-states-mo-graphing-grades = Grades 6-8 (Mathematics), Algebra I, Algebra II, Geometry, Grade 8 (Science), Physical Science, and Biology\npractice-label-states-mo-scientific-grades = Grades 6-8 (Mathematics), Grade 8 (Science)\npractice-label-states-ms-graphing-grades = Algebra 1\npractice-label-states-mt-four-function-grades = Grade 6\npractice-label-states-mt-graphing-grades = High School\npractice-label-states-mt-scientific-grades = Grades 7-8\npractice-label-states-nc-four-function-grades = Grades 3-5\npractice-label-states-nc-graphing-grades = Grade 8, Math 1, and above\npractice-label-states-nc-scientific-grades = Grades 6-8\npractice-label-states-nd-four-function-grades = Grade 6\npractice-label-states-nd-graphing-grades = High School-Grade 11\npractice-label-states-nd-scientific-grades = Grades 7-8\npractice-label-states-ne-four-function-grades = Grade 6\npractice-label-states-ne-scientific-grades = Grades 7-8\npractice-label-states-nh-four-function-grades = Grade 6\npractice-label-states-nh-graphing-grades = High School\npractice-label-states-nh-scientific-grades = Grades 7-8\npractice-label-states-nv-four-function-grades = Grade 5 (Science), Grade 6 (Mathematics)\npractice-label-states-nv-scientific-grades = Grades 7-8 (Mathematics), Grade 8, High School (Science)\npractice-label-states-ny-graphing-grades = High School (Mathematics)\npractice-label-states-oh-graphing-grades = High School\npractice-label-states-oh-scientific-grades = Grades 3-8\npractice-label-states-or-four-function-grades = Grade 6 (Mathematics), Grade 5 (Science)\npractice-label-states-or-graphing-grades = Grades 8, 11 (Science), High School (Mathematics)\npractice-label-states-or-scientific-grades = Grades 7-8 (Mathematics)\npractice-label-states-ri-graphing-grades = Grade 8 (Mathematics), Grade 11 (Science)\npractice-label-states-sc-alt-four-function-grades = Grade 6, Alternate Assessments\npractice-label-states-sc-alt-scientific-grades = Grades 7, 8, 11, Alternate Assessments\npractice-label-states-sc-std-four-function-grades = Grades 6 (Math, Science)\npractice-label-states-sc-std-graphing-grades = Grades 7-8 (Math), Algebra 1, Biology\npractice-label-states-sc-std-scientific-grades = Grades 6 (Math, Science), 7-8 (Math), Algebra 1, Biology\npractice-label-states-sd-four-function-grades = Grade 6\npractice-label-states-sd-graphing-grades = High School\npractice-label-states-sd-scientific-grades = Grades 7-8\npractice-label-states-tx-four-function-grades = Grade 8 Science, Biology\npractice-label-states-tx-graphing-grades = Grade 8 Science, Biology, Grade 8 Math, Algebra 1, Algebra 2\npractice-label-states-tx-scientific-grades = Grade 8 Science, Biology\npractice-label-states-ut-graphing-grades = Grades 9-10 (Mathematics)\npractice-label-states-ut-scientific-grades = Grades 9-10 (Science)\npractice-label-states-va-four-function-grades = Grades 4-5\npractice-label-states-va-graphing-grades = High School\npractice-label-states-va-scientific-grades = Grades 6-8\npractice-label-states-vt-four-function-grades = Grade 6\npractice-label-states-vt-graphing-grades = High School\npractice-label-states-vt-scientific-grades = Grades 7-8\npractice-label-states-wa-four-function-grades = Grade 5 (Science), Grade 6 (Mathematics)\npractice-label-states-wa-graphing-grades = High School (Mathematics)\npractice-label-states-wa-scientific-grades = Grades 7-8 (Mathematics), Grade 8 & High School (Science)\npractice-label-states-wv-four-function-grades = Grade 6\npractice-label-states-wv-graphing-grades = High School\npractice-label-states-wv-scientific-grades = Grades 7-8\npractice-label-states-wy-four-function-grades = Grade 6\npractice-label-states-wy-graphing-grades = High School\npractice-label-states-wy-scientific-grades = Grades 7-8\npractice-link-four-function = Four Function Calculator\npractice-link-graphing = Graphing Calculator\npractice-link-scientific = Scientific Calculator\npractice-narration-close-details = Close Details About { $stateName }\npractice-narration-ib-logo = International Baccalaureate logo\npractice-narration-nwea-logo = NWEA logo\npractice-narration-sbac-logo = Smarter Balanced (SBAC) Logo\npractice-text-accessibility-information = Desmos is committed to helping every student love learning math. We are proud to say that the Desmos calculators are <1>WCAG 2.1 AA compliant. </1>The accessibility improvements we\'ve made ensure students who are blind or visually impaired have the same opportunities as their peers to discover the joy of learning math. Please read more about this at <2>www.desmos.com/accessibility</2>{"."}\npractice-text-calculator-note = These calculators differ from the ones on our site. You can find more information in the PDF.\npractice-text-data-privacy = Additional rules apply for data privacy when dealing with children under 13. The <1>Four-Function</1> and <2>Scientific</2> calculators, which will be used by students under the age of 13, never request student data as there is no way to log in.\npractice-text-description-test-mode = Learn how to configure Test Mode to use Desmos calculators on assessments.\npractice-text-description-testing = Is Desmos on your test? Find out if the Desmos calculators are on your state assessments.\npractice-text-different-calculators-ib = Please note that these calculators differ from the ones on our site. You can find more information in <1>our overview PDF</1>{"."} Students can practice on the sample <2>Scientific Calculator</2>{"."}\npractice-text-different-calculators-nwea = Please note that these calculators differ from the ones on our site. You can find more information in <1>our overview PDF</1>{"."} Students can practice on the sample <2>Four Function</2> or <3>Scientific Calculator</3>{"."}\npractice-text-different-calculators-sbac = Desmos calculators are available on Smarter Balanced assessments. Please note that these calculators differ from the standard ones on our site. Students who reside in a Smarter Balanced member state or U.S. territory can practice with the calculators configured for specific test settings available below.\npractice-text-more-information = Interested in learning more about Desmos calculator found on your state or national assessment? Check out our <1>professional learning and development offerings</1>{"."}\npractice-text-national-international-assessments = Desmos is now available on national and international assessments! These assessments include:\npractice-text-practice-information = To help students and teachers prepare for these assessmentsand to support delivery of lower-stakes tests and quizzes in classrooms we\'ve developed a suite of "Test Mode" apps. Our practice apps match the configuration that students will encounter on test day. You can learn more at <1>www.desmos.com/test-mode</1>{"."}\npractice-text-privacy = During test administrations, Desmos will not receive any data about students. Vendors will host the Desmos technology directly on their servers and will not exchange any data with Desmos\'s servers. Furthermore, students do not need to sign in or provide any personal information about themselves to be able to practice with Desmos calculators before the test.\npractice-text-questions = We know this change may prompt additional questions from teachers, parents, and administrators. Please don\'t hesitate to email questions or feedback to <1>support@desmos.com</1>{"."}\npractice-text-state-assessments = Desmos is also available on a range of state assessments! Find your state below to learn more.\npractice-text-state-not-listed = If Desmos isn\'t on your state assessment yet, and you\'re interested in changing that, <1>please let us know!</1>\npractice-text-students-create-accounts = While practicing for the test, some 11th-grade students using <1>desmos.com/calculator</1> may choose to create accounts to be able to save work for a later time. We encourage everyone to review the <2>Desmos Privacy Policy</2>, which describes what information we collect from these users who are over the age of 13 and what we do with that information.\n';});

!function(){var e,n,o,a,u,c,i,f,l,s,y,p,_,h,b,v,d,w,m,O,t={};!function(e){var o="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:{};function n(n,r){return n!==o&&("function"==typeof Object.create?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(t,e){return n[t]=r?r(t,e):e}}"function"==typeof define&&define.amd?define("tslib",["exports"],function(t){e(n(o,n(t)))}):"object"==typeof module&&"object"==typeof module.exports?e(n(o,n(module.exports))):e(n(o))}(function(t){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};e=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},a=function(t,e,n,r){var o,a=arguments.length,u=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(u=(a<3?o(u):3<a?o(e,n,u):o(e,n))||u);return 3<a&&u&&Object.defineProperty(e,n,u),u},u=function(n,r){return function(t,e){r(t,e,n)}},c=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(a,u,c,i){return new(c=c||Promise)(function(t,e){function n(t){try{o(i.next(t))}catch(t){e(t)}}function r(t){try{o(i.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(n,r)}o((i=i.apply(a,u||[])).next())})},f=function(n,r){var o,a,u,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(u=2&e[0]?a.return:e[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,e[1])).done)return u;switch(a=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(u=0<(u=c.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){c.label=e[1];break}if(6===e[0]&&c.label<u[1]){c.label=u[1],u=e;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(e);break}u[2]&&c.ops.pop(),c.trys.pop();continue}e=r.call(n,c)}catch(t){e=[6,t],a=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},l=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},s=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},y=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),u=[];try{for(;(void 0===e||0<e--)&&!(r=a.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return u},p=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t},_=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var a=arguments[e],u=0,c=a.length;u<c;u++,o++)r[o]=a[u];return r},h=function(t){return this instanceof h?(this.v=t,this):new h(t)},b=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),a=[],u={};return r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u;function r(r){o[r]&&(u[r]=function(n){return new Promise(function(t,e){1<a.push([r,n,t,e])||c(r,n)})})}function c(t,e){try{(n=o[t](e)).value instanceof h?Promise.resolve(n.value.v).then(i,f):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function i(t){c("next",t)}function f(t){c("throw",t)}function l(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}},v=function(r){var o,t={};return e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(o=!o)?{value:h(r[e](t)),done:"return"===e}:n?n(t):t}:n}},d=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=s(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=i[c]&&function(u){return new Promise(function(t,e){var n,r,o,a;u=i[c](u),n=t,r=e,o=u.done,a=u.value,Promise.resolve(a).then(function(t){n({value:t,done:o})},r)})}}},w=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},O=function(t){return t&&t.__esModule?t:{default:t}},t("__extends",e),t("__assign",n),t("__rest",o),t("__decorate",a),t("__param",u),t("__metadata",c),t("__awaiter",i),t("__generator",f),t("__exportStar",l),t("__values",s),t("__read",y),t("__spread",p),t("__spreadArrays",_),t("__await",h),t("__asyncGenerator",b),t("__asyncDelegator",v),t("__asyncValues",d),t("__makeTemplateObject",w),t("__importStar",m),t("__importDefault",O)})}();
define('console',['require'],function(require){function n(){}var e={};return["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"].forEach(function(o){"undefined"!=typeof window&&window.console&&window.console[o]?e[o]=function(){Function.prototype.apply.call(window.console[o],window.console,arguments)}:e[o]=n}),e});
define('lib/console',["require","exports","console"],function(require,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.warn=e.log=void 0,e.log=o.log,e.warn=o.warn});
define('lib/i18n-homepage-langs',["require","exports"],function(require,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.isHomepageLanguage=a.homepage_languages=void 0,a.homepage_languages={ar:!0,de:!0,en:!0,es:!0,et:!0,fr:!0,id:!0,it:!0,ja:!0,ko:!0,nl:!0,pl:!0,"pt-BR":!0,ru:!0,"sv-SE":!0,th:!0,tr:!0,vi:!0,"zh-CN":!0,"zh-TW":!0},a.isHomepageLanguage=function(e){return!!a.homepage_languages[e]}});
define('lib/enabled-languages',["require","exports"],function(require,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ENABLED_LANGUAGES=i.buildSupportedLanguagesMap=i.expandLocaleOptionsThoroughly=void 0,i.expandLocaleOptionsThoroughly=function(s){for(var e=[],o=0,a=s;o<a.length;o++){var d=a[o];if(d&&"string"==typeof d){var m=d.split("-")[0];for(var u in e.push(d),e.push(m),i.ENABLED_LANGUAGES){var t=i.ENABLED_LANGUAGES[u];u.split("-")[0]===m&&t.useAsRoot&&e.push(u)}}}return e},i.buildSupportedLanguagesMap=function(){var s={},e=Object.keys(i.ENABLED_LANGUAGES);for(var o in e){var a=e[o];s[a]={code:a,display_name:i.ENABLED_LANGUAGES[a].displayName}}return s},i.ENABLED_LANGUAGES={en:{displayName:"English (US)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},es:{displayName:"Espaol (LATAM)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ES-ES.pdf",useAsRoot:!0},et:{displayName:"Eesti",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ru:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_RU.pdf",useAsRoot:!1},da:{displayName:"Dansk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},de:{displayName:"Deutsch",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_DE.pdf",useAsRoot:!1},"pt-BR":{displayName:"Portugus (Brasil)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},"pt-PT":{displayName:"Portugus (Portugal)",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ca:{displayName:"Catal",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},fr:{displayName:"Franais",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_FR.pdf",useAsRoot:!1},it:{displayName:"Italiano",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_IT.pdf",useAsRoot:!1},is:{displayName:"slenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},nl:{displayName:"Nederlands",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},no:{displayName:"Norsk",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},"sv-SE":{displayName:"Svenska",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!0},hu:{displayName:"Magyar",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},cs:{displayName:"etina",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},pl:{displayName:"Polski",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_PL.pdf",useAsRoot:!1},id:{displayName:"Bahasa Indonesia",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},vi:{displayName:"Ting Vit",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_VI.pdf",useAsRoot:!1},el:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_EL.pdf",useAsRoot:!1},uk:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ka:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},th:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},tr:{displayName:"Trke",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_TR.pdf",useAsRoot:!1},"zh-CN":{displayName:"",useAsRoot:!0,userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-CN.pdf"},"zh-TW":{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_ZH-TW.pdf",useAsRoot:!1},ko:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide.pdf",useAsRoot:!1},ja:{displayName:"",userGuideURL:"https://desmos.s3.amazonaws.com/Desmos_User_Guide_JA.pdf",useAsRoot:!1}}});
define('@fluent/bundle',["exports"],function(r){"use strict";function e(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function n(n){if(n.__esModule)return n;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(n).forEach(function(r){var e=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,e.get?e:{enumerable:!0,get:function(){return n[r]}})}),t}function u(r){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function t(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}function s(r,e,n){return e&&t(r.prototype,e),n&&t(r,n),r}function l(r){if(!r)return[];Array.isArray(r)||(r=[r]);for(var e={},n=0;n<r.length;++n){var t=r[n];if(t&&"object"===u(t)&&(t=String(t)),"string"!=typeof t){var i="Locales should be strings, ".concat(JSON.stringify(t)," isn't.");throw new TypeError(i)}if("*"!==t[0]){if(!t.split("-").every(function(r){return/[a-z0-9]+/i.test(r)})){var o=JSON.stringify(t),a="The locale ".concat(o," is not a structurally valid BCP 47 language tag.");throw new RangeError(a)}e[t]=!0}}return Object.keys(e)}var i=Object.freeze({__proto__:null,default:function(t,i,u){function o(r){do{if(i(r))return r;r=r.replace(/-?[^-]*$/,"")}while(r);return null}var a=function(r){for(var e=l(r),n=0;n<e.length;++n){var t=o(e[n]);if(t)return t}return o("undefined"!=typeof navigator&&navigator&&(navigator.userLanguage||navigator.language)||"en-US")},r=function(){function n(r){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._locale=a(r),this._select=i(this._locale),this._type=function(r){if(!r)return"cardinal";if("cardinal"===r||"ordinal"===r)return r;throw new RangeError("Not a valid plural type: "+JSON.stringify(r))}(e.type),this._nf=new t("en",e)}return s(n,null,[{key:"supportedLocalesOf",value:function(r){return l(r).filter(o)}}]),s(n,[{key:"resolvedOptions",value:function(){var r=this._nf.resolvedOptions(),e=r.minimumIntegerDigits,n=r.minimumFractionDigits,t=r.maximumFractionDigits,i=r.minimumSignificantDigits,o=r.maximumSignificantDigits,a={locale:this._locale,minimumIntegerDigits:e,minimumFractionDigits:n,maximumFractionDigits:t,pluralCategories:u(this._locale,"ordinal"===this._type),type:this._type};return"number"==typeof i&&(a.minimumSignificantDigits=i,a.maximumSignificantDigits=o),a}},{key:"select",value:function(r){if(!(this instanceof n))throw new TypeError("select() called on incompatible ".concat(this));if("number"!=typeof r&&(r=Number(r)),!isFinite(r))return"other";var e=this._nf.format(Math.abs(r));return this._select(e,"ordinal"===this._type)}}]),n}();return Object.defineProperty(r,"prototype",{writable:!1}),r}});function o(r,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(r,t.key,t)}}var a,c,y=function(){function u(r,e){var n=e.minimumIntegerDigits,t=e.minimumFractionDigits,i=e.maximumFractionDigits,o=e.minimumSignificantDigits,a=e.maximumSignificantDigits;!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),this._minID="number"==typeof n?n:1,this._minFD="number"==typeof t?t:0,this._maxFD="number"==typeof i?i:Math.max(this._minFD,3),"number"!=typeof o&&"number"!=typeof a||(this._minSD="number"==typeof o?o:1,this._maxSD="number"==typeof a?a:21)}var r,e,n;return r=u,(e=[{key:"resolvedOptions",value:function(){var r={minimumIntegerDigits:this._minID,minimumFractionDigits:this._minFD,maximumFractionDigits:this._maxFD};return"number"==typeof this._minSD&&(r.minimumSignificantDigits=this._minSD,r.maximumSignificantDigits=this._maxSD),r}},{key:"format",value:function(r){if(this._minSD){for(var e=String(r),n=0,t=0;t<e.length;++t){var i=e[t];"0"<=i&&i<="9"&&++n}return n<this._minSD?r.toPrecision(this._minSD):n>this._maxSD?r.toPrecision(this._maxSD):e}return 0<this._minFD?r.toFixed(this._minFD):0===this._maxFD?r.toFixed(0):String(r)}}])&&o(r.prototype,e),n&&o(r,n),u}(),v=n(i),f=e((function(r){function e(r){return r&&"object"==typeof r&&"default"in r?r:{default:r}}var n=e(v),t=e(y);function i(r){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function o(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}function a(r,e,n){return r(n={path:e,exports:{},require:function(r,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function u(r){return"in"===r?"_in":"pt-PT"===r?"pt_PT":r}var s=a(function(r,e){function n(r,e){return!e&&1==r?"one":"other"}function t(r,e){return!e&&(0==r||1==r)?"one":"other"}function i(r,e){var n=!String(r).split(".")[1];return!e&&1==r&&n?"one":"other"}function o(r,e){return"other"}function a(r,e){return e?"other":1==r?"one":2==r?"two":"other"}var u;u={_in:o,af:n,ak:t,am:function(r,e){return!e&&0<=r&&r<=1?"one":"other"},an:n,ar:function(r,e){var n=String(r).split("."),t=Number(n[0])==r&&n[0].slice(-2);return e?"other":0==r?"zero":1==r?"one":2==r?"two":3<=t&&t<=10?"few":11<=t&&t<=99?"many":"other"},ars:function(r,e){var n=String(r).split("."),t=Number(n[0])==r&&n[0].slice(-2);return e?"other":0==r?"zero":1==r?"one":2==r?"two":3<=t&&t<=10?"few":11<=t&&t<=99?"many":"other"},as:function(r,e){return e?1==r||5==r||7==r||8==r||9==r||10==r?"one":2==r||3==r?"two":4==r?"few":6==r?"many":"other":0<=r&&r<=1?"one":"other"},asa:n,ast:i,az:function(r,e){var n=String(r).split(".")[0],t=n.slice(-1),i=n.slice(-2),o=n.slice(-3);return e?1==t||2==t||5==t||7==t||8==t||20==i||50==i||70==i||80==i?"one":3==t||4==t||100==o||200==o||300==o||400==o||500==o||600==o||700==o||800==o||900==o?"few":0==n||6==t||40==i||60==i||90==i?"many":"other":1==r?"one":"other"},be:function(r,e){var n=String(r).split("."),t=Number(n[0])==r,i=t&&n[0].slice(-1),o=t&&n[0].slice(-2);return e?2!=i&&3!=i||12==o||13==o?"other":"few":1==i&&11!=o?"one":2<=i&&i<=4&&(o<12||14<o)?"few":t&&0==i||5<=i&&i<=9||11<=o&&o<=14?"many":"other"},bem:n,bez:n,bg:n,bho:t,bm:o,bn:function(r,e){return e?1==r||5==r||7==r||8==r||9==r||10==r?"one":2==r||3==r?"two":4==r?"few":6==r?"many":"other":0<=r&&r<=1?"one":"other"},bo:o,br:function(r,e){var n=String(r).split("."),t=Number(n[0])==r,i=t&&n[0].slice(-1),o=t&&n[0].slice(-2),a=t&&n[0].slice(-6);return e?"other":1==i&&11!=o&&71!=o&&91!=o?"one":2==i&&12!=o&&72!=o&&92!=o?"two":(3==i||4==i||9==i)&&(o<10||19<o)&&(o<70||79<o)&&(o<90||99<o)?"few":0!=r&&t&&0==a?"many":"other"},brx:n,bs:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-1),u=t.slice(-2),s=i.slice(-1),l=i.slice(-2);return e?"other":o&&1==a&&11!=u||1==s&&11!=l?"one":o&&2<=a&&a<=4&&(u<12||14<u)||2<=s&&s<=4&&(l<12||14<l)?"few":"other"},ca:function(r,e){var n=!String(r).split(".")[1];return e?1==r||3==r?"one":2==r?"two":4==r?"few":"other":1==r&&n?"one":"other"},ce:n,ceb:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-1),u=i.slice(-1);return!e&&(o&&(1==t||2==t||3==t)||o&&4!=a&&6!=a&&9!=a||!o&&4!=u&&6!=u&&9!=u)?"one":"other"},cgg:n,chr:n,ckb:n,cs:function(r,e){var n=String(r).split("."),t=n[0],i=!n[1];return e?"other":1==r&&i?"one":2<=t&&t<=4&&i?"few":i?"other":"many"},cy:function(r,e){return e?0==r||7==r||8==r||9==r?"zero":1==r?"one":2==r?"two":3==r||4==r?"few":5==r||6==r?"many":"other":0==r?"zero":1==r?"one":2==r?"two":3==r?"few":6==r?"many":"other"},da:function(r,e){var n=String(r).split("."),t=n[0],i=Number(n[0])==r;return e||1!=r&&(i||0!=t&&1!=t)?"other":"one"},de:i,dsb:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-2),u=i.slice(-2);return e?"other":o&&1==a||1==u?"one":o&&2==a||2==u?"two":o&&(3==a||4==a)||3==u||4==u?"few":"other"},dv:n,dz:o,ee:n,el:n,en:function(r,e){var n=String(r).split("."),t=!n[1],i=Number(n[0])==r,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return e?1==o&&11!=a?"one":2==o&&12!=a?"two":3==o&&13!=a?"few":"other":1==r&&t?"one":"other"},eo:n,es:n,et:i,eu:n,fa:function(r,e){return!e&&0<=r&&r<=1?"one":"other"},ff:function(r,e){return!e&&0<=r&&r<2?"one":"other"},fi:i,fil:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-1),u=i.slice(-1);return e?1==r?"one":"other":o&&(1==t||2==t||3==t)||o&&4!=a&&6!=a&&9!=a||!o&&4!=u&&6!=u&&9!=u?"one":"other"},fo:n,fr:function(r,e){return e?1==r?"one":"other":0<=r&&r<2?"one":"other"},fur:n,fy:i,ga:function(r,e){var n=String(r).split("."),t=Number(n[0])==r;return e?1==r?"one":"other":1==r?"one":2==r?"two":t&&3<=r&&r<=6?"few":t&&7<=r&&r<=10?"many":"other"},gd:function(r,e){var n=String(r).split("."),t=Number(n[0])==r;return e?1==r||11==r?"one":2==r||12==r?"two":3==r||13==r?"few":"other":1==r||11==r?"one":2==r||12==r?"two":t&&3<=r&&r<=10||t&&13<=r&&r<=19?"few":"other"},gl:i,gsw:n,gu:function(r,e){return e?1==r?"one":2==r||3==r?"two":4==r?"few":6==r?"many":"other":0<=r&&r<=1?"one":"other"},guw:t,gv:function(r,e){var n=String(r).split("."),t=n[0],i=!n[1],o=t.slice(-1),a=t.slice(-2);return e?"other":i&&1==o?"one":i&&2==o?"two":!i||0!=a&&20!=a&&40!=a&&60!=a&&80!=a?i?"other":"many":"few"},ha:n,haw:n,he:function(r,e){var n=String(r).split("."),t=n[0],i=!n[1],o=Number(n[0])==r,a=o&&n[0].slice(-1);return e?"other":1==r&&i?"one":2==t&&i?"two":i&&(r<0||10<r)&&o&&0==a?"many":"other"},hi:function(r,e){return e?1==r?"one":2==r||3==r?"two":4==r?"few":6==r?"many":"other":0<=r&&r<=1?"one":"other"},hr:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-1),u=t.slice(-2),s=i.slice(-1),l=i.slice(-2);return e?"other":o&&1==a&&11!=u||1==s&&11!=l?"one":o&&2<=a&&a<=4&&(u<12||14<u)||2<=s&&s<=4&&(l<12||14<l)?"few":"other"},hsb:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-2),u=i.slice(-2);return e?"other":o&&1==a||1==u?"one":o&&2==a||2==u?"two":o&&(3==a||4==a)||3==u||4==u?"few":"other"},hu:function(r,e){return e?1==r||5==r?"one":"other":1==r?"one":"other"},hy:function(r,e){return e?1==r?"one":"other":0<=r&&r<2?"one":"other"},ia:i,id:o,ig:o,ii:o,io:i,is:function(r,e){var n=String(r).split("."),t=n[0],i=Number(n[0])==r,o=t.slice(-1),a=t.slice(-2);return!e&&(i&&1==o&&11!=a||!i)?"one":"other"},it:function(r,e){var n=!String(r).split(".")[1];return e?11==r||8==r||80==r||800==r?"many":"other":1==r&&n?"one":"other"},iu:a,iw:function(r,e){var n=String(r).split("."),t=n[0],i=!n[1],o=Number(n[0])==r,a=o&&n[0].slice(-1);return e?"other":1==r&&i?"one":2==t&&i?"two":i&&(r<0||10<r)&&o&&0==a?"many":"other"},ja:o,jbo:o,jgo:n,ji:i,jmc:n,jv:o,jw:o,ka:function(r,e){var n=String(r).split(".")[0],t=n.slice(-2);return e?1==n?"one":0==n||2<=t&&t<=20||40==t||60==t||80==t?"many":"other":1==r?"one":"other"},kab:function(r,e){return!e&&0<=r&&r<2?"one":"other"},kaj:n,kcg:n,kde:o,kea:o,kk:function(r,e){var n=String(r).split("."),t=Number(n[0])==r,i=t&&n[0].slice(-1);return e?6==i||9==i||t&&0==i&&0!=r?"many":"other":1==r?"one":"other"},kkj:n,kl:n,km:o,kn:function(r,e){return!e&&0<=r&&r<=1?"one":"other"},ko:o,ks:n,ksb:n,ksh:function(r,e){return e?"other":0==r?"zero":1==r?"one":"other"},ku:n,kw:function(r,e){var n=String(r).split("."),t=Number(n[0])==r,i=t&&n[0].slice(-2),o=t&&n[0].slice(-3),a=t&&n[0].slice(-5),u=t&&n[0].slice(-6);return e?t&&1<=r&&r<=4||1<=i&&i<=4||21<=i&&i<=24||41<=i&&i<=44||61<=i&&i<=64||81<=i&&i<=84?"one":5==r||5==i?"many":"other":0==r?"zero":1==r?"one":2==i||22==i||42==i||62==i||82==i||t&&0==o&&(1e3<=a&&a<=2e4||4e4==a||6e4==a||8e4==a)||0!=r&&1e5==u?"two":3==i||23==i||43==i||63==i||83==i?"few":1==r||1!=i&&21!=i&&41!=i&&61!=i&&81!=i?"other":"many"},ky:n,lag:function(r,e){var n=String(r).split(".")[0];return e?"other":0==r?"zero":0!=n&&1!=n||0==r?"other":"one"},lb:n,lg:n,lkt:o,ln:t,lo:function(r,e){return e&&1==r?"one":"other"},lt:function(r,e){var n=String(r).split("."),t=n[1]||"",i=Number(n[0])==r,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return e?"other":1==o&&(a<11||19<a)?"one":2<=o&&o<=9&&(a<11||19<a)?"few":0!=t?"many":"other"},lv:function(r,e){var n=String(r).split("."),t=n[1]||"",i=t.length,o=Number(n[0])==r,a=o&&n[0].slice(-1),u=o&&n[0].slice(-2),s=t.slice(-2),l=t.slice(-1);return e?"other":o&&0==a||11<=u&&u<=19||2==i&&11<=s&&s<=19?"zero":1==a&&11!=u||2==i&&1==l&&11!=s||2!=i&&1==l?"one":"other"},mas:n,mg:t,mgo:n,mk:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-1),u=t.slice(-2),s=i.slice(-1),l=i.slice(-2);return e?1==a&&11!=u?"one":2==a&&12!=u?"two":7!=a&&8!=a||17==u||18==u?"other":"many":o&&1==a&&11!=u||1==s&&11!=l?"one":"other"},ml:n,mn:n,mo:function(r,e){var n=String(r).split("."),t=!n[1],i=Number(n[0])==r&&n[0].slice(-2);return e?1==r?"one":"other":1==r&&t?"one":!t||0==r||2<=i&&i<=19?"few":"other"},mr:function(r,e){return e?1==r?"one":2==r||3==r?"two":4==r?"few":"other":1==r?"one":"other"},ms:function(r,e){return e&&1==r?"one":"other"},mt:function(r,e){var n=String(r).split("."),t=Number(n[0])==r&&n[0].slice(-2);return e?"other":1==r?"one":0==r||2<=t&&t<=10?"few":11<=t&&t<=19?"many":"other"},my:o,nah:n,naq:a,nb:n,nd:n,ne:function(r,e){var n=String(r).split("."),t=Number(n[0])==r;return e?t&&1<=r&&r<=4?"one":"other":1==r?"one":"other"},nl:i,nn:n,nnh:n,no:n,nqo:o,nr:n,nso:t,ny:n,nyn:n,om:n,or:function(r,e){var n=String(r).split("."),t=Number(n[0])==r;return e?1==r||5==r||t&&7<=r&&r<=9?"one":2==r||3==r?"two":4==r?"few":6==r?"many":"other":1==r?"one":"other"},os:n,osa:o,pa:t,pap:n,pl:function(r,e){var n=String(r).split("."),t=n[0],i=!n[1],o=t.slice(-1),a=t.slice(-2);return e?"other":1==r&&i?"one":i&&2<=o&&o<=4&&(a<12||14<a)?"few":i&&1!=t&&(0==o||1==o)||i&&5<=o&&o<=9||i&&12<=a&&a<=14?"many":"other"},prg:function(r,e){var n=String(r).split("."),t=n[1]||"",i=t.length,o=Number(n[0])==r,a=o&&n[0].slice(-1),u=o&&n[0].slice(-2),s=t.slice(-2),l=t.slice(-1);return e?"other":o&&0==a||11<=u&&u<=19||2==i&&11<=s&&s<=19?"zero":1==a&&11!=u||2==i&&1==l&&11!=s||2!=i&&1==l?"one":"other"},ps:n,pt:function(r,e){var n=String(r).split(".")[0];return!e&&(0==n||1==n)?"one":"other"},pt_PT:i,rm:n,ro:function(r,e){var n=String(r).split("."),t=!n[1],i=Number(n[0])==r&&n[0].slice(-2);return e?1==r?"one":"other":1==r&&t?"one":!t||0==r||2<=i&&i<=19?"few":"other"},rof:n,root:o,ru:function(r,e){var n=String(r).split("."),t=n[0],i=!n[1],o=t.slice(-1),a=t.slice(-2);return e?"other":i&&1==o&&11!=a?"one":i&&2<=o&&o<=4&&(a<12||14<a)?"few":i&&0==o||i&&5<=o&&o<=9||i&&11<=a&&a<=14?"many":"other"},rwk:n,sah:o,saq:n,sc:function(r,e){var n=!String(r).split(".")[1];return e?11==r||8==r||80==r||800==r?"many":"other":1==r&&n?"one":"other"},scn:function(r,e){var n=!String(r).split(".")[1];return e?11==r||8==r||80==r||800==r?"many":"other":1==r&&n?"one":"other"},sd:n,sdh:n,se:a,seh:n,ses:o,sg:o,sh:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-1),u=t.slice(-2),s=i.slice(-1),l=i.slice(-2);return e?"other":o&&1==a&&11!=u||1==s&&11!=l?"one":o&&2<=a&&a<=4&&(u<12||14<u)||2<=s&&s<=4&&(l<12||14<l)?"few":"other"},shi:function(r,e){var n=String(r).split("."),t=Number(n[0])==r;return e?"other":0<=r&&r<=1?"one":t&&2<=r&&r<=10?"few":"other"},si:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"";return!e&&(0==r||1==r||0==t&&1==i)?"one":"other"},sk:function(r,e){var n=String(r).split("."),t=n[0],i=!n[1];return e?"other":1==r&&i?"one":2<=t&&t<=4&&i?"few":i?"other":"many"},sl:function(r,e){var n=String(r).split("."),t=n[0],i=!n[1],o=t.slice(-2);return e?"other":i&&1==o?"one":i&&2==o?"two":i&&(3==o||4==o)||!i?"few":"other"},sma:a,smi:a,smj:a,smn:a,sms:a,sn:n,so:n,sq:function(r,e){var n=String(r).split("."),t=Number(n[0])==r,i=t&&n[0].slice(-1),o=t&&n[0].slice(-2);return e?1==r?"one":4==i&&14!=o?"many":"other":1==r?"one":"other"},sr:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-1),u=t.slice(-2),s=i.slice(-1),l=i.slice(-2);return e?"other":o&&1==a&&11!=u||1==s&&11!=l?"one":o&&2<=a&&a<=4&&(u<12||14<u)||2<=s&&s<=4&&(l<12||14<l)?"few":"other"},ss:n,ssy:n,st:n,su:o,sv:function(r,e){var n=String(r).split("."),t=!n[1],i=Number(n[0])==r,o=i&&n[0].slice(-1),a=i&&n[0].slice(-2);return e?1!=o&&2!=o||11==a||12==a?"other":"one":1==r&&t?"one":"other"},sw:i,syr:n,ta:n,te:n,teo:n,th:o,ti:t,tig:n,tk:function(r,e){var n=String(r).split("."),t=Number(n[0])==r&&n[0].slice(-1);return e?6==t||9==t||10==r?"few":"other":1==r?"one":"other"},tl:function(r,e){var n=String(r).split("."),t=n[0],i=n[1]||"",o=!n[1],a=t.slice(-1),u=i.slice(-1);return e?1==r?"one":"other":o&&(1==t||2==t||3==t)||o&&4!=a&&6!=a&&9!=a||!o&&4!=u&&6!=u&&9!=u?"one":"other"},tn:n,to:o,tr:n,ts:n,tzm:function(r,e){var n=String(r).split("."),t=Number(n[0])==r;return!e&&(0==r||1==r||t&&11<=r&&r<=99)?"one":"other"},ug:n,uk:function(r,e){var n=String(r).split("."),t=n[0],i=!n[1],o=Number(n[0])==r,a=o&&n[0].slice(-1),u=o&&n[0].slice(-2),s=t.slice(-1),l=t.slice(-2);return e?3==a&&13!=u?"few":"other":i&&1==s&&11!=l?"one":i&&2<=s&&s<=4&&(l<12||14<l)?"few":i&&0==s||i&&5<=s&&s<=9||i&&11<=l&&l<=14?"many":"other"},ur:i,uz:n,ve:n,vi:function(r,e){return e&&1==r?"one":"other"},vo:n,vun:n,wa:t,wae:n,wo:o,xh:n,xog:n,yi:i,yo:o,yue:o,zh:o,zu:function(r,e){return!e&&0<=r&&r<=1?"one":"other"}},Object.defineProperty(u,"__esModule",{value:!0}),r.exports=u}),l=o(s),c=Object.freeze(Object.assign(Object.create(null),s,{default:l})),f=a(function(r,e){var n,t="zero",i="one",o="two",a="few",u="many",s="other",l={cardinal:[i,s],ordinal:[s]},c={cardinal:[s],ordinal:[s]},f={cardinal:[i,a,u,s],ordinal:[s]},h={cardinal:[i,s],ordinal:[i,s]},m={cardinal:[i,o,s],ordinal:[s]};n={_in:c,af:l,ak:l,am:l,an:l,ar:{cardinal:[t,i,o,a,u,s],ordinal:[s]},ars:{cardinal:[t,i,o,a,u,s],ordinal:[s]},as:{cardinal:[i,s],ordinal:[i,o,a,u,s]},asa:l,ast:l,az:{cardinal:[i,s],ordinal:[i,a,u,s]},be:{cardinal:[i,a,u,s],ordinal:[a,s]},bem:l,bez:l,bg:l,bho:l,bm:c,bn:{cardinal:[i,s],ordinal:[i,o,a,u,s]},bo:c,br:{cardinal:[i,o,a,u,s],ordinal:[s]},brx:l,bs:{cardinal:[i,a,s],ordinal:[s]},ca:{cardinal:[i,s],ordinal:[i,o,a,s]},ce:l,ceb:l,cgg:l,chr:l,ckb:l,cs:f,cy:{cardinal:[t,i,o,a,u,s],ordinal:[t,i,o,a,u,s]},da:l,de:l,dsb:{cardinal:[i,o,a,s],ordinal:[s]},dv:l,dz:c,ee:l,el:l,en:{cardinal:[i,s],ordinal:[i,o,a,s]},eo:l,es:l,et:l,eu:l,fa:l,ff:l,fi:l,fil:h,fo:l,fr:h,fur:l,fy:l,ga:{cardinal:[i,o,a,u,s],ordinal:[i,s]},gd:{cardinal:[i,o,a,s],ordinal:[i,o,a,s]},gl:l,gsw:l,gu:{cardinal:[i,s],ordinal:[i,o,a,u,s]},guw:l,gv:{cardinal:[i,o,a,u,s],ordinal:[s]},ha:l,haw:l,he:{cardinal:[i,o,u,s],ordinal:[s]},hi:{cardinal:[i,s],ordinal:[i,o,a,u,s]},hr:{cardinal:[i,a,s],ordinal:[s]},hsb:{cardinal:[i,o,a,s],ordinal:[s]},hu:h,hy:h,ia:l,id:c,ig:c,ii:c,io:l,is:l,it:{cardinal:[i,s],ordinal:[u,s]},iu:m,iw:{cardinal:[i,o,u,s],ordinal:[s]},ja:c,jbo:c,jgo:l,ji:l,jmc:l,jv:c,jw:c,ka:{cardinal:[i,s],ordinal:[i,u,s]},kab:l,kaj:l,kcg:l,kde:c,kea:c,kk:{cardinal:[i,s],ordinal:[u,s]},kkj:l,kl:l,km:c,kn:l,ko:c,ks:l,ksb:l,ksh:{cardinal:[t,i,s],ordinal:[s]},ku:l,kw:{cardinal:[t,i,o,a,u,s],ordinal:[i,u,s]},ky:l,lag:{cardinal:[t,i,s],ordinal:[s]},lb:l,lg:l,lkt:c,ln:l,lo:{cardinal:[s],ordinal:[i,s]},lt:f,lv:{cardinal:[t,i,s],ordinal:[s]},mas:l,mg:l,mgo:l,mk:{cardinal:[i,s],ordinal:[i,o,u,s]},ml:l,mn:l,mo:{cardinal:[i,a,s],ordinal:[i,s]},mr:{cardinal:[i,s],ordinal:[i,o,a,s]},ms:{cardinal:[s],ordinal:[i,s]},mt:f,my:c,nah:l,naq:m,nb:l,nd:l,ne:h,nl:l,nn:l,nnh:l,no:l,nqo:c,nr:l,nso:l,ny:l,nyn:l,om:l,or:{cardinal:[i,s],ordinal:[i,o,a,u,s]},os:l,osa:c,pa:l,pap:l,pl:f,prg:{cardinal:[t,i,s],ordinal:[s]},ps:l,pt:l,pt_PT:l,rm:l,ro:{cardinal:[i,a,s],ordinal:[i,s]},rof:l,root:c,ru:f,rwk:l,sah:c,saq:l,sc:{cardinal:[i,s],ordinal:[u,s]},scn:{cardinal:[i,s],ordinal:[u,s]},sd:l,sdh:l,se:m,seh:l,ses:c,sg:c,sh:{cardinal:[i,a,s],ordinal:[s]},shi:{cardinal:[i,a,s],ordinal:[s]},si:l,sk:f,sl:{cardinal:[i,o,a,s],ordinal:[s]},sma:m,smi:m,smj:m,smn:m,sms:m,sn:l,so:l,sq:{cardinal:[i,s],ordinal:[i,u,s]},sr:{cardinal:[i,a,s],ordinal:[s]},ss:l,ssy:l,st:l,su:c,sv:h,sw:l,syr:l,ta:l,te:l,teo:l,th:c,ti:l,tig:l,tk:{cardinal:[i,s],ordinal:[a,s]},tl:h,tn:l,to:c,tr:l,ts:l,tzm:l,ug:l,uk:{cardinal:[i,a,u,s],ordinal:[a,s]},ur:l,uz:l,ve:l,vi:{cardinal:[s],ordinal:[i,s]},vo:l,vun:l,wa:l,wae:l,wo:c,xh:l,xog:l,yi:l,yo:c,yue:c,zh:c,zu:l},Object.defineProperty(n,"__esModule",{value:!0}),r.exports=n}),h=o(f),m=l||c,p=h||Object.freeze(Object.assign(Object.create(null),f,{default:h})),d="object"===("undefined"==typeof Intl?"undefined":i(Intl))&&Intl.NumberFormat||t.default,g=n.default(d,function(r){return m[u(r)]},function(r,e){return p[u(r)][e?"ordinal":"cardinal"]});r.exports=g}(c={path:a,exports:{},require:function(r,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&c.path)}},c.exports),c.exports)),h=Intl.PluralRules||f,m=function(r){this.value=r};m.prototype.valueOf=function(){return this.value};var p=function(e){function r(r){void 0===r&&(r="???"),e.call(this,r)}return e&&(r.__proto__=e),((r.prototype=Object.create(e&&e.prototype)).constructor=r).prototype.toString=function(){return"{"+this.value+"}"},r}(m),d=function(n){function r(r,e){void 0===e&&(e={}),n.call(this,r),this.opts=e}return n&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.toString=function(e){try{return e.memoizeIntlObject(Intl.NumberFormat,this.opts).format(this.value)}catch(r){return e.reportError(r),this.value.toString(10)}},r}(m),g=function(n){function r(r,e){void 0===e&&(e={}),n.call(this,r),this.opts=e}return n&&(r.__proto__=n),((r.prototype=Object.create(n&&n.prototype)).constructor=r).prototype.toString=function(e){try{return e.memoizeIntlObject(Intl.DateTimeFormat,this.opts).format(this.value)}catch(r){return e.reportError(r),new Date(this.value).toISOString()}},r}(m),w=100,b="",S="";function _(r,e,n){return e[n]?j(r,e[n].value):(r.reportError(new RangeError("No default")),new p)}function k(r,e){for(var n=[],t=Object.create(null),i=0,o=e;i<o.length;i+=1){var a=o[i];"narg"===a.type?t[a.name]=x(r,a.value):n.push(x(r,a))}return{positional:n,named:t}}function x(r,e){switch(e.type){case"str":return e.value;case"num":return new d(e.value,{minimumFractionDigits:e.precision});case"var":return function(r,e){var n,t=e.name;if(r.params){if(!Object.prototype.hasOwnProperty.call(r.params,t))return new p("$"+t);n=r.params[t]}else{if(!r.args||!Object.prototype.hasOwnProperty.call(r.args,t))return r.reportError(new ReferenceError("Unknown variable: $"+t)),new p("$"+t);n=r.args[t]}if(n instanceof m)return n;switch(typeof n){case"string":return n;case"number":return new d(n);case"object":if(n instanceof Date)return new g(n.getTime());default:return r.reportError(new TypeError("Variable type not supported: $"+t+", "+typeof n)),new p("$"+t)}}(r,e);case"mesg":return function(r,e){var n=e.name,t=e.attr,i=r.bundle._messages.get(n);if(!i)return r.reportError(new ReferenceError("Unknown message: "+n)),new p(n);if(t){var o=i.attributes[t];return o?j(r,o):(r.reportError(new ReferenceError("Unknown attribute: "+t)),new p(n+"."+t))}if(i.value)return j(r,i.value);return r.reportError(new ReferenceError("No value: "+n)),new p(n)}(r,e);case"term":return function(r,e){var n=e.name,t=e.attr,i=e.args,o="-"+n,a=r.bundle._terms.get(o);if(!a)return r.reportError(new ReferenceError("Unknown term: "+o)),new p(o);if(t){var u=a.attributes[t];if(u){r.params=k(r,i).named;var s=j(r,u);return r.params=null,s}return r.reportError(new ReferenceError("Unknown attribute: "+t)),new p(o+"."+t)}r.params=k(r,i).named;var l=j(r,a.value);return r.params=null,l}(r,e);case"func":return function(e,r){var n=r.name,t=r.args,i=e.bundle._functions[n];if(!i)return e.reportError(new ReferenceError("Unknown function: "+n+"()")),new p(n+"()");if("function"!=typeof i)return e.reportError(new TypeError("Function "+n+"() is not callable")),new p(n+"()");try{var o=k(e,t);return i(o.positional,o.named)}catch(r){return e.reportError(r),new p(n+"()")}}(r,e);case"select":return function(r,e){var n=e.selector,t=e.variants,i=e.star,o=x(r,n);if(o instanceof p)return _(r,t,i);for(var a=0,u=t;a<u.length;a+=1){var s=u[a],l=x(r,s.key);if(function(r,e,n){if(n===e)return 1;if(n instanceof d&&e instanceof d&&n.value===e.value)return 1;if(e instanceof d&&"string"==typeof n&&n===r.memoizeIntlObject(h,e.opts).select(e.value))return 1}(r,o,l))return j(r,s.value)}return _(r,t,i)}(r,e);default:return new p}}function E(r,e){if(r.dirty.has(e))return r.reportError(new RangeError("Cyclic reference")),new p;r.dirty.add(e);for(var n=[],t=r.bundle._useIsolating&&1<e.length,i=0,o=e;i<o.length;i+=1){var a=o[i];if("string"!=typeof a){if(r.placeables++,r.placeables>w)throw r.dirty.delete(e),new RangeError("Too many placeables expanded: "+r.placeables+", max allowed is "+w);t&&n.push(b),n.push(x(r,a).toString(r)),t&&n.push(S)}else n.push(r.bundle._transform(a))}return r.dirty.delete(e),n.join("")}function j(r,e){return"string"==typeof e?r.bundle._transform(e):E(r,e)}function D(r,e,n){this.dirty=new WeakSet,this.params=null,this.placeables=0,this.bundle=r,this.errors=e,this.args=n}function O(r,e){for(var n=Object.create(null),t=0,i=Object.entries(r);t<i.length;t+=1){var o=i[t],a=o[0],u=o[1];e.includes(a)&&(n[a]=u.valueOf())}return n}D.prototype.reportError=function(r){if(!this.errors)throw r;this.errors.push(r)},D.prototype.memoizeIntlObject=function(r,e){var n=this.bundle._intls.get(r);n||(n={},this.bundle._intls.set(r,n));var t=JSON.stringify(e);return n[t]||(n[t]=new r(this.bundle.locales,e)),n[t]};var N=["unitDisplay","currencyDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits"];function z(r,e){var n=r[0];if(n instanceof p)return new p("NUMBER("+n.valueOf()+")");if(n instanceof d||n instanceof g)return new d(n.valueOf(),Object.assign({},n.opts,O(e,N)));throw new TypeError("Invalid argument to NUMBER")}var F=["dateStyle","timeStyle","fractionalSecondDigits","dayPeriod","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName"];function I(r,e){var n=r[0];if(n instanceof p)return new p("DATETIME("+n.valueOf()+")");if(n instanceof d||n instanceof g)return new g(n.valueOf(),Object.assign({},n.opts,O(e,F)));throw new TypeError("Invalid argument to DATETIME")}function P(r,e){void 0===e&&(e={});var n=e.functions,t=e.useIsolating;void 0===t&&(t=!0);var i=e.transform;void 0===i&&(i=function(r){return r}),this._terms=new Map,this._messages=new Map,this._intls=new WeakMap,this.locales=Array.isArray(r)?r:[r],this._functions=Object.assign({},{NUMBER:z,DATETIME:I},n),this._useIsolating=t,this._transform=i}P.prototype.hasMessage=function(r){return this._messages.has(r)},P.prototype.getMessage=function(r){return this._messages.get(r)},P.prototype.addResource=function(r,e){void 0===e&&(e={});var n=e.allowOverrides;void 0===n&&(n=!1);for(var t=[],i=0;i<r.body.length;i++){var o=r.body[i];if(o.id.startsWith("-")){if(!1===n&&this._terms.has(o.id)){t.push(new Error('Attempt to override an existing term: "'+o.id+'"'));continue}this._terms.set(o.id,o)}else{if(!1===n&&this._messages.has(o.id)){t.push(new Error('Attempt to override an existing message: "'+o.id+'"'));continue}this._messages.set(o.id,o)}}return t},P.prototype.formatPattern=function(r,e,n){if(void 0===e&&(e=null),void 0===n&&(n=null),"string"==typeof r)return this._transform(r);var t=new D(this,n,e);try{return E(t,r).toString(t)}catch(r){if(t.errors)return t.errors.push(r),(new p).toString(t);throw r}};var T=/^(-?[a-zA-Z][\w-]*) *= */gm,M=/\.([a-zA-Z][\w-]*) *= */y,A=/\*?\[/y,R=/(-?[0-9]+(?:\.([0-9]+))?)/y,U=/([a-zA-Z][\w-]*)/y,q=/([$-])?([a-zA-Z][\w-]*)(?:\.([a-zA-Z][\w-]*))?/y,$=/^[A-Z][A-Z0-9_-]*$/,Z=/([^{}\n\r]+)/y,C=/([^\\"\n\r]*)/y,B=/\\([\\"])/y,J=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{6})/y,L=/^\n+/,W=/ +$/,G=/ *\r?\n/g,V=/( *)$/,H=/{\s*/y,K=/\s*}/y,Q=/\[\s*/y,X=/\s*] */y,Y=/\s*\(\s*/y,rr=/\s*->\s*/y,er=/\s*:\s*/y,nr=/\s*,?\s*/y,tr=/\s+/y,ir=function(r,e){this.value=r,this.length=e};r.FluentBundle=P,r.FluentDateTime=g,r.FluentNumber=d,r.FluentResource=function(l){this.body=[];for(var c=T.lastIndex=0;;){var r=T.exec(l);if(null===r)break;c=T.lastIndex;try{this.body.push(function(r){var e=s(),n=function(){var r=Object.create(null);for(;f(M);){var e=h(M),n=s();if(null===n)throw new SyntaxError("Expected attribute value");r[e]=n}return r}();if(null!==e||0!==Object.keys(n).length)return{id:r,value:e,attributes:n};throw new SyntaxError("Expected message value or attributes")}(r[1]))}catch(r){if(r instanceof SyntaxError)continue;throw r}}function f(r){return r.lastIndex=c,r.test(l)}function o(r,e){if(l[c]===r)return c++,1;if(e)throw new e("Expected "+r)}function a(r,e){if(f(r))return c=r.lastIndex,1;if(e)throw new e("Expected "+r.toString())}function u(r){r.lastIndex=c;var e=r.exec(l);if(null===e)throw new SyntaxError("Expected "+r.toString());return c=r.lastIndex,e}function h(r){return u(r)[1]}function s(){var r;if(f(Z)&&(r=h(Z)),"{"===l[c]||"}"===l[c])return n(r?[r]:[],1/0);var e=y();return e?r?n([r,e],e.length):(e.value=v(e.value,L),n([e],e.length)):r?v(r,W):null}function n(r,e){for(void 0===r&&(r=[]);;)if(f(Z))r.push(h(Z));else if("{"!==l[c]){if("}"===l[c])throw new SyntaxError("Unbalanced closing brace");var n=y();if(!n)break;r.push(n),e=Math.min(e,n.length)}else r.push(m());var t=r.length-1,i=r[t];"string"==typeof i&&(r[t]=v(i,W));for(var o=[],a=0,u=r;a<u.length;a+=1){var s=u[a];s instanceof ir&&(s=s.value.slice(0,s.value.length-e)),s&&o.push(s)}return o}function m(){a(H,SyntaxError);var r=p();if(a(K))return r;if(a(rr)){var e=function(){var r,e=[],n=0;for(;f(A);){o("*")&&(r=n);var t=function(){var r;a(Q,SyntaxError),r=f(R)?g():{type:"str",value:h(U)};return a(X,SyntaxError),r}(),i=s();if(null===i)throw new SyntaxError("Expected variant value");e[n++]={key:t,value:i}}if(0===n)return null;if(void 0!==r)return{variants:e,star:r};throw new SyntaxError("Expected default variant")}();return a(K,SyntaxError),Object.assign({},{type:"select",selector:r},e)}throw new SyntaxError("Unclosed placeable")}function p(){if("{"===l[c])return m();if(f(q)){var r=u(q),e=r[1],n=r[2],t=r[3];if(void 0===t&&(t=null),"$"===e)return{type:"var",name:n};if(a(Y)){var i=function(){var r=[];for(;;){switch(l[c]){case")":return c++,r;case void 0:throw new SyntaxError("Unclosed argument list")}r.push(function(){var r=p();if("mesg"!==r.type)return r;if(a(er))return{type:"narg",name:r.name,value:d()};return r}()),a(nr)}}();if("-"===e)return{type:"term",name:n,attr:t,args:i};if($.test(n))return{type:"func",name:n,args:i};throw new SyntaxError("Function names must be all upper-case")}return"-"===e?{type:"term",name:n,attr:t,args:[]}:{type:"mesg",name:n,attr:t}}return d()}function d(){if(f(R))return g();if('"'===l[c])return function(){o('"',SyntaxError);var r="";for(;;){if(r+=h(C),"\\"!==l[c]){if(o('"'))return{type:"str",value:r};throw new SyntaxError("Unclosed string literal")}r+=function(){if(f(B))return h(B);if(f(J)){var r=u(J),e=r[1],n=r[2],t=parseInt(e||n,16);return t<=55295||57344<=t?String.fromCodePoint(t):""}throw new SyntaxError("Unknown escape sequence")}()}}();throw new SyntaxError("Invalid expression")}function g(){var r=u(R),e=r[1],n=r[2];void 0===n&&(n="");var t=n.length;return{type:"num",value:parseFloat(e),precision:t}}function y(){var r=c;switch(a(tr),l[c]){case".":case"[":case"*":case"}":case void 0:return!1;case"{":return e(l.slice(r,c))}return" "===l[c-1]&&e(l.slice(r,c))}function v(r,e){return r.replace(e,"")}function e(r){var e=r.replace(G,"\n"),n=V.exec(r)[1].length;return new ir(e,n)}},r.FluentType=m,Object.defineProperty(r,"__esModule",{value:!0})});
define('lib/fluent-bundle-sequence',["require","exports","tslib","@fluent/bundle"],function(require,d,f,h){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.FluentBundleSequence=d.RTL_LANGUAGES=void 0,d.RTL_LANGUAGES=["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"];var e=(m.fromSources=function(e,r,n){for(var t=[],o=0,a=e;o<a.length;o++){var i=a[o],u=i.lang,s=i.source,l=u.split("-")[0],c=new h.FluentBundle(u,f.__assign(f.__assign({},n),{useIsolating:0<=d.RTL_LANGUAGES.indexOf(l)}));c.addResource(new h.FluentResource(s),{allowOverrides:!1}),c.addResource(new h.FluentResource('\nl10n-internal-date-day-month-year = {DATETIME($d, month: "short", day: "numeric", year: "numeric")}\nl10n-internal-date-day-month = {DATETIME($d, month: "short", day: "numeric")}\nl10n-internal-time = {DATETIME($d, minute: "numeric", hour: "numeric")}\n      '),{allowOverrides:!1}),t.push(c)}return new m(t,r)},m.prototype.format=function(e,r){for(var n=0,t=this.bundles;n<t.length;n++){var o=t[n];if(o.hasMessage(e)){var a=o.getMessage(e);if(null==a||!a.value)return;for(var i=[],u=o.formatPattern(a.value,this.coerceNumericVariables(r),i),s=0,l=i;s<l.length;s++){var c=l[s];this.onError("Error formatting "+e+" for locale "+o.locales.join(",")+": "+c)}return u}}this.onError("Couldn't find message for key "+e+" for locales "+this.getLocales().join(","))},m.prototype.formatDate=function(e,r){return r.showYear?this.format("l10n-internal-date-day-month-year",{d:e}):this.format("l10n-internal-date-day-month",{d:e})},m.prototype.formatTime=function(e){var r=this.format("l10n-internal-time",{d:e});return"en"===this.getLocales()[0]?null==r?void 0:r.toLowerCase():r},m.prototype.hasTranslation=function(e,r){for(var n=0,t=this.bundles;n<t.length;n++){var o=t[n];if(0<=o.locales.indexOf(r))return o.hasMessage(e)}return!1},m.prototype.coerceNumericVariables=function(e){var r={};for(var n in e){var t=e[n];r[n]="number"==typeof t?""+t:t}return r},m.prototype.getLocales=function(){return this.bundles.reduce(function(e,r){return e.concat(r.locales)},[])},m);function m(e,r){this.bundles=e,this.onError=r}d.FluentBundleSequence=e});
define('lib/i18n',["require","exports","config","text!l10n/all-en-strings.ftl","tslib","jquery","underscore","lib/console","./i18n-homepage-langs","./enabled-languages","./fluent-bundle-sequence"],function(require,i,r,l,c,t,n,g,a,f,p){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.unpack=i.fetchLanguage=i.isSupportedLanguage=i.currentLanguage=i.detectLanguage=i.formatWithFluent=i.createDictionaryLookupFunction=i.s=i.raw=i.hasTranslation=i.restrictToHomepageLanguages=i.locale_dict=void 0;var e="undefined"!=typeof Desmos&&Desmos.localeData?Desmos.localeData:{},o="";i.locale_dict={};var d={},L={},u=["ar","hy-AM","hi","tr","xx-XX"];function s(e){o=e||""}function v(e){for(var n in e)delete L[n],d[n]=e[n]}function m(e,n,a){return D(e,null!=n?n:{},null!=a?a:o)}function D(e,n,a){var r=h(a).format(e,function(e){var n={};for(var a in e){var r=e[a];void 0!==r&&(n[a]=r)}return n}(n));return null==r?(g.warn("Could not format string "+e),""):r}function h(e){var n=L[e];if(!n){i.locale_dict[e]||(i.locale_dict[e]=f.expandLocaleOptionsThoroughly([e]));for(var a=[],r=0,t=i.locale_dict[e];r<t.length;r++){var o=t[r],u=d[o];u&&a.push({lang:o,source:u})}var s={};"xx-XX"===e&&(s.transform=function(e){return e.replace(/[a-z]/gi,"")}),n=L[e]=p.FluentBundleSequence.fromSources(c.__spreadArrays(a,[{lang:"en",source:l}]),function(e){g.warn(e)},s)}return n}function A(){for(var e=f.expandLocaleOptionsThoroughly([r.get("language"),navigator.userLanguage,navigator.language]),n=0;n<e.length;n++){var a=e[n];if(_(a))return a}return"en"}function _(e){return f.ENABLED_LANGUAGES.hasOwnProperty(e)||n.contains(u,e)}i.restrictToHomepageLanguages=function(){for(var e in f.ENABLED_LANGUAGES)a.isHomepageLanguage(e)||delete f.ENABLED_LANGUAGES[e]},i.hasTranslation=function(e,n){var a=null!=n?n:o;return h(a).hasTranslation(e,a)},i.raw=function(e,n){if(n)for(var a in n)n.hasOwnProperty(a)&&(e=e.split("__"+a+"__").join(n[a]));return e},i.s=m,i.createDictionaryLookupFunction=function(a){return function(e,n){return D(e,null!=n?n:{},a())}},i.formatWithFluent=D,i.detectLanguage=A,i.currentLanguage=function(){return o},i.isSupportedLanguage=_,i.fetchLanguage=function(n){var a=t.Deferred();if("undefined"==typeof Desmos)return a.reject(),a.promise();if(Desmos.supportedLanguages||(Desmos.supportedLanguages=[]),0<=Desmos.supportedLanguages.indexOf(n)||"en"===n||"xx-XX"===n)return s(n),a.resolve(!0),a.promise();if(!_(n)){var e=-1!==n.indexOf("-")?n.split("-")[0]:n;for(var r in f.ENABLED_LANGUAGES)if(e===r.split("-")[0]&&f.ENABLED_LANGUAGES[r].useAsRoot){n=r;break}}return t.get("/api/v1/calculator/language/"+n+".ftl",function(e){Desmos.localeData||(Desmos.localeData={}),Desmos.supportedLanguages||(Desmos.supportedLanguages=[]),Desmos.localeData[n]=e[n],Desmos.supportedLanguages.push(n),v(Desmos.localeData),s(n),a.resolve(!0)}).fail(function(e){404===e.status&&g.warn(n+" is not an available language."),a.reject()}),a.promise()},i.unpack=function e(n,a){if(null==n)return"";if("string"==typeof n)return n;if("number"==typeof n)return""+n;var r,t=n.vars;if(t)for(var o in r={},t)t.hasOwnProperty(o)&&(r[o]=e(t[o],a));return m(n.key,r,a)},v(e),s(A())});
define("pjs",[],function(){var f,a,p;function l(n){return"object"==typeof n}function y(n){return"function"==typeof n}function v(){}return f="prototype",a={}.hasOwnProperty,function t(r,n){function i(){var n=new o;return y(n.init)&&n.init.apply(n,arguments),n}function o(){}n===p&&(n=r,r=Object),i.Bare=o;var e,u=v[f]=r[f],c=o[f]=i[f]=new v;return(c.constructor=i).mixin=function(n){return o[f]=i[f]=t(i,n)[f],i},(i.open=function(n){if(e={},y(n)?e=n.call(i,c,u,i,r):l(n)&&(e=n),l(e))for(var t in e)a.call(e,t)&&(c[t]=e[t]);return y(c.init)||(c.init=r),i})(n)}});
define('underscore_model',['require','underscore','pjs'],function(require){var i=require("underscore");return{UnderscoreModel:require("pjs")(function(e){var r=0,t="guid_"+Math.round(1e6*Math.random())+"_"+(new Date).getTime()+"_";e.init=function(){this.__observers={},this.__eventObservers={},this.__oldProperties={},this.__propertyComparators={},this.guid=t+ ++r},e.unobserveAll=function(){this.__observers={},this.__eventObservers={}},e.getProperty=function(e){return this[e]},e.getOldProperty=function(e){return this.__oldProperties[e]},e.setProperty=function(e,r){var t=this[e];this[e]=r;var s=this.__propertyComparators[e];if(s){if(s(t,r))return}else if(i.isEqual(t,r))return;this.__oldProperties[e]=t,this.notifyPropertyChange(e)},e.setProperties=function(e){for(var r in e)e.hasOwnProperty(r)&&this.setProperty(r,e[r])},e.setPropertyComparator=function(e,r){this.__propertyComparators[e]=r},e.notifyPropertyChange=function(e){this.__callObservers(this.__observers,e,this)},e.observe=function(e,r){this.__addObservers(this.__observers,e,r)},e.unobserve=function(e){this.__removeObservers(this.__observers,e)},e.observeAndSync=function(e,r){this.observe(e,r);for(var t=e.split(" "),s=0;s<t.length;s++){var i=t[s].split(".")[0];this.hasOwnProperty(i)&&r(i,this)}},e.triggerEvent=function(e,r){this.__callObservers(this.__eventObservers,e,r)},e.observeEvent=function(e,r){this.__addObservers(this.__eventObservers,e,r)},e.unobserveEvent=function(e){this.__removeObservers(this.__eventObservers,e)},e.__callObservers=function(e,r,t){var s=e[r];if(s)for(var i=0;i<s.length;i++)s[i].callback(r,t)},e.__removeObservers=function(e,r){for(var t=r.split(" "),s=0;s<t.length;s++){var i=t[s].split("."),o=i[0],n=i[1];if(o&&n){var v=e[o],_=[];if(!v)continue;for(var a=0;a<v.length;a++){var h=v[a];h.namespace!==n&&_.push(h)}e[o]=_}else if(o)delete e[o];else if(n)for(o in e)e.hasOwnProperty(o)&&this.__removeObservers(e,o+"."+n)}},e.__addObservers=function(e,r,t){for(var s=r.split(" "),i=0;i<s.length;i++){var o=s[i].split("."),n=o[0];if(!n)throw"Must supply a property to observe";var v={namespace:o[1],callback:t},_=e[n];_?_.push(v):e[n]=[v]}}})}});
define('core/lib/worker-i18n',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.s=void 0,e.s=function(e,r){return{key:e,vars:r}}});
define('main/backend',["require","exports","jquery"],function(require,r,o){"use strict";function a(r){return function(e){var t;e&&e.responseJSON&&(e=e.responseJSON),!0===e.success?r.resolve():(t=(e&&e.errors||[]).map(function(e){return e.message}),r.reject(t[0]||"Internal Server Error"))}}function n(e){if(e&&e.routeDeprecated){e.js&&new Function(e.js)();var t=o.Deferred();return t.reject(e),t.promise()}return e}function u(e,t){return o.ajax({dataType:"json",url:r.baseURL+e,xhrFields:{withCredentials:!0},data:t}).then(n)}Object.defineProperty(r,"__esModule",{value:!0}),r.getJSON=r.post=r.handleDeprecatedRoute=r.exchangeAppleAuth=r.exchangeGoogleAuthCode=r.getAppleLoginURL=r.getGoogleLoginURL=r.baseURL=void 0,r.baseURL="",r.getGoogleLoginURL=function(e){void 0===e&&(e={});var t="?source="+(e.fromUI||"");return e.teacher&&(t+="&teacher=true"),r.baseURL+"/drive_api/calculator/login"+t},r.getAppleLoginURL=function(e){void 0===e&&(e={});var t="?source="+(e.fromUI||"");return e.teacher&&(t+="&teacher=true"),r.baseURL+"/apple_api/calculator/login"+t},r.exchangeGoogleAuthCode=function(e){var t=o.Deferred();return e?u("/account/google_auth?code="+e).always(a(t)):setTimeout(function(){t.reject("no auth code")},1),t.promise()},r.exchangeAppleAuth=function(e){var t=o.Deferred(),r=e&&e.jwt,n=e&&e.name||"";return e&&r?u("/account/apple_auth?name="+encodeURIComponent(n)+"&jwt="+encodeURIComponent(r)).always(a(t)):setTimeout(function(){t.reject("no auth code")},1),t.promise()},r.handleDeprecatedRoute=n,r.post=function(e,t){return o.ajax({type:"POST",url:r.baseURL+e,data:t,xhrFields:{withCredentials:!0}}).then(n)},r.getJSON=u});
define('main/graph',['require','pjs','underscore_model','core/lib/worker-i18n','main/backend'],function(require){"use strict";var e=require("pjs"),t=require("underscore_model").UnderscoreModel,l=require("core/lib/worker-i18n"),n=require("main/backend"),a=e(t,function(e,r){var s=["title","thumbURL","stateURL","hash","parentHash","recovery","recoveryParentHash","graphData","access","created","example","draft","easterEgg"];e.init=function(t){r.init.call(this);var a=this;t&&s.forEach(function(e){t.hasOwnProperty(e)&&a.setProperty(e,t[e])}),this.access||this.setProperty("access","all"),this.example||this.setProperty("example",!1),this.draft||this.setProperty("draft",!1),this.now=new Date},e.copy=function(){return a(this)},e.getCollectionKey=function(){var e="";return this.example?e="example-":this.draft&&(e="draft-"),e+this.hash},e.displayDate=function(){var e=(Date.now()-this.created)/1e3/60,t=e/60,a=t/24,r=a/7,s=[l.s("account-shell-label-month-jan"),l.s("account-shell-label-month-feb"),l.s("account-shell-label-month-mar"),l.s("account-shell-label-month-apr"),l.s("account-shell-label-month-may"),l.s("account-shell-label-month-jun"),l.s("account-shell-label-month-jul"),l.s("account-shell-label-month-aug"),l.s("account-shell-label-month-sep"),l.s("account-shell-label-month-oct"),l.s("account-shell-label-month-nov"),l.s("account-shell-label-month-dec")];return 5<=r?l.s("account-shell-label-created-on-date",{month:s[this.created.getMonth()],day:this.created.getDate(),year:this.created.getFullYear()}):2<=r?l.s("account-shell-label-created-weeks-ago",{number:String(Math.floor(r))}):7<=a?l.s("account-shell-label-created-last-week"):2<=a?l.s("account-shell-label-created-days-ago",{number:String(Math.floor(a))}):24<=t?l.s("account-shell-label-created-yesterday"):2<=t?l.s("account-shell-label-created-hours-ago",{number:String(Math.floor(t))}):60<=e?l.s("account-shell-label-created-one-hour-ago"):2<=e?l.s("account-shell-label-created-minutes-ago",{number:String(Math.floor(e))}):1<=e?l.s("account-shell-label-created-one-minute-ago"):l.s("account-shell-label-created-seconds-ago")},e.plainObject=function(){var t={},a=this;return s.forEach(function(e){t[e]=a[e]}),t},e.getURL=function(){if("file:"===window.location.protocol){var e="/calculator";if(!n.baseURL)return e;a=n.baseURL+e}else var t="/"+document.location.pathname.split("/")[1],a=window.location.href.split(t)[0]+t;return a+(this.hash&&!this.recovery?"/"+this.hash:"")}});return a.fromAjax=function(e){return a({title:e.title,thumbURL:e.thumbUrl,stateURL:e.stateUrl,graphData:e.state,hash:e.hash,parentHash:e.parent_hash,recoveryParentHash:e.recovery_parent_hash,access:e.access,created:new Date(e.created),example:!!e.example,draft:!!e.draft,easterEgg:e.easterEgg})},a.toAjax=function(e){return{title:e.title,thumbUrl:e.thumbURL,stateUrl:e.stateURL,state:e.graphData,hash:e.hash,parent_hash:e.parentHash,recovery_parent_hash:e.recoveryParentHash,access:e.access,created:e.created.toString()}},a.updateFromSync=function(e,t){e.setProperty("title",t.title),e.setProperty("hash",t.hash),e.setProperty("parentHash",t.parent_hash),e.setProperty("recoveryParentHash",t.recovery_parent_hash),e.setProperty("graphData",e.graphData),e.setProperty("thumbURL",t.thumbUrl),e.setProperty("stateURL",t.stateUrl),e.setProperty("created",new Date(t.created))},a});

define('text!example_graphs',[],function () { return '[{"hash":"2rnqgoa6a4","parent_hash":"89ndqgh5id","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/2rnqgoa6a4.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/2rnqgoa6a4","title":"graphing-calculator-label-example-graph-lines-slope-intercept-form","access":"all","created":"Tue, 18 Aug 2015 19:24:05 GMT","example":true},{"hash":"onfy0dzx2o","parent_hash":"kha6fgxhaf","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/onfy0dzx2o.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/onfy0dzx2o","title":"graphing-calculator-label-example-graph-lines-point-slope-form","access":"all","created":"Tue, 18 Aug 2015 20:21:16 GMT","example":true},{"hash":"md6buy4efz","parent_hash":"fi71u8ej0q","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/md6buy4efz.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/md6buy4efz","title":"graphing-calculator-label-example-graph-lines-two-point-form","access":"all","created":"Tue, 18 Aug 2015 20:21:39 GMT","example":true},{"hash":"zukjgk9iry","parent_hash":"jv9fmw2qz8","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/zukjgk9iry.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/zukjgk9iry","title":"graphing-calculator-label-example-graph-parabolas-standard-form","access":"all","created":"Tue, 18 Aug 2015 20:22:02 GMT","example":true},{"hash":"8keeh1pt5l","parent_hash":"klodq5d0ph","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8keeh1pt5l.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/8keeh1pt5l","title":"graphing-calculator-label-example-graph-parabolas-vertex-form","access":"all","created":"Tue, 18 Aug 2015 20:22:22 GMT","example":true},{"hash":"dxkknajdqb","parent_hash":"t6auzqijzl","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/dxkknajdqb.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/dxkknajdqb","title":"graphing-calculator-label-example-graph-parabolas-standard-form-plus-tangent","access":"all","created":"Tue, 18 Aug 2015 20:24:05 GMT","example":true},{"hash":"kihjluohq9","parent_hash":"vpnnmvncdb","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/kihjluohq9.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/kihjluohq9","title":"graphing-calculator-label-example-graph-trig-period-and-amplitude","access":"all","created":"Tue, 18 Aug 2015 20:24:32 GMT","example":true},{"hash":"l3u8133jwj","parent_hash":"51d9lso1ia","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/l3u8133jwj.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/l3u8133jwj","title":"graphing-calculator-label-example-graph-trig-phase","access":"all","created":"Tue, 18 Aug 2015 20:24:53 GMT","example":true},{"hash":"7eeumgl7it","parent_hash":"7rnv0erick","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/7eeumgl7it.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/7eeumgl7it","title":"graphing-calculator-label-example-graph-trig-wave-interference","access":"link","created":"Tue, 03 Dec 2019 18:14:54 GMT","example":true},{"hash":"qmzx2skkzy","parent_hash":"s9myfmvujr","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qmzx2skkzy.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/qmzx2skkzy","title":"graphing-calculator-label-example-graph-trig-unit-circle","access":"all","created":"Tue, 18 Aug 2015 20:26:18 GMT","example":true},{"hash":"ivud1auwvw","parent_hash":"8dsmqe5ycc","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/ivud1auwvw.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/ivud1auwvw","title":"graphing-calculator-label-example-graph-conic-sections-circle","access":"all","created":"Tue, 18 Aug 2015 20:27:04 GMT","example":true},{"hash":"djcrjdfiif","parent_hash":"0jwlvn9hcs","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/djcrjdfiif.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/djcrjdfiif","title":"graphing-calculator-label-example-graph-conic-sections-parabola-and-focus","access":"all","created":"Tue, 18 Aug 2015 20:27:50 GMT","example":true},{"hash":"afja7ee9mh","parent_hash":"duajwxdopa","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/afja7ee9mh.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/afja7ee9mh","title":"graphing-calculator-label-example-graph-conic-sections-ellipse-with-foci","access":"all","created":"Tue, 18 Aug 2015 20:28:08 GMT","example":true},{"hash":"vgfqbejegx","parent_hash":"k6xcbueze5","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/vgfqbejegx.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/vgfqbejegx","title":"graphing-calculator-label-example-graph-conic-sections-hyperbola","access":"all","created":"Tue, 18 Aug 2015 20:28:27 GMT","example":true},{"hash":"0ovfwwmfrb","parent_hash":"scuci1750d","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/0ovfwwmfrb.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/0ovfwwmfrb","title":"graphing-calculator-label-example-graph-polar-rose","access":"all","created":"Tue, 18 Aug 2015 20:28:48 GMT","example":true},{"hash":"qlbdlxyrza","parent_hash":"nicremwert","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qlbdlxyrza.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/qlbdlxyrza","title":"graphing-calculator-label-example-graph-polar-logarithmic-spiral","access":"all","created":"Tue, 18 Aug 2015 20:29:08 GMT","example":true},{"hash":"rayzacuktw","parent_hash":"21pbohd07u","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/rayzacuktw.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/rayzacuktw","title":"graphing-calculator-label-example-graph-polar-limacon","access":"all","created":"Tue, 18 Aug 2015 20:29:25 GMT","example":true},{"hash":"gxnu7fbgks","parent_hash":"kk3axf8oon","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/gxnu7fbgks.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/gxnu7fbgks","title":"graphing-calculator-label-example-graph-polar-conic-sections","access":"link","created":"Tue, 18 Aug 2015 20:29:42 GMT","example":true},{"hash":"rnyjcjpouf","parent_hash":"ogvj2tzgjj","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/rnyjcjpouf.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/rnyjcjpouf","title":"graphing-calculator-label-example-graph-parametric-introduction","access":"all","created":"Tue, 18 Aug 2015 20:30:31 GMT","example":true},{"hash":"eg5he4xpg9","parent_hash":"pwjl3pe4da","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/eg5he4xpg9.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/eg5he4xpg9","title":"graphing-calculator-label-example-graph-parametric-cycloid","access":"link","created":"Tue, 18 Aug 2015 20:30:46 GMT","example":true},{"hash":"nyterjs0uf","parent_hash":"nqxx2mhknn","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/nyterjs0uf.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/nyterjs0uf","title":"graphing-calculator-label-example-graph-transformations-translating-a-function","access":"link","created":"Fri, 29 Sep 2017 00:47:36 GMT","example":true},{"hash":"vdkjrpznnu","parent_hash":"doxva7ciht","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/vdkjrpznnu.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/vdkjrpznnu","title":"graphing-calculator-label-example-graph-transformations-scaling-a-function","access":"link","created":"Tue, 18 Aug 2015 21:23:20 GMT","example":true},{"hash":"fcjhdt1xdw","parent_hash":"tif5liedlj","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/fcjhdt1xdw.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/fcjhdt1xdw","title":"graphing-calculator-label-example-graph-transformations-inverse-of-a-function","access":"link","created":"Tue, 18 Aug 2015 21:23:36 GMT","example":true},{"hash":"jwquvmikhr","parent_hash":"2l0r87hkmq","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/jwquvmikhr.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/jwquvmikhr","title":"graphing-calculator-label-example-graph-stats-linear-regression","access":"link","created":"Tue, 18 Aug 2015 21:24:01 GMT","example":true},{"hash":"qrdbrcfnsl","parent_hash":"paknt6oneh","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qrdbrcfnsl.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/qrdbrcfnsl","title":"graphing-calculator-label-example-graph-stats-anscombes-quartet","access":"link","created":"Mon, 13 Jul 2020 20:40:16 GMT","example":true},{"hash":"sanlujpfmc","parent_hash":"tyszvsmelo","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/sanlujpfmc.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/sanlujpfmc","title":"graphing-calculator-label-example-graph-stats-fourth-order-polynomial","access":"all","created":"Tue, 18 Aug 2015 21:25:02 GMT","example":true},{"hash":"iwfjdrhdyr","parent_hash":"4n11jtzki0","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/iwfjdrhdyr.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/iwfjdrhdyr","title":"graphing-calculator-label-example-graph-lists-family-of-sin-curves","access":"link","created":"Tue, 18 Aug 2015 21:25:30 GMT","example":true},{"hash":"ib4qkln029","parent_hash":"1flkupc1yt","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/ib4qkln029.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/ib4qkln029","title":"graphing-calculator-label-example-graph-lists-curve-stitching","access":"link","created":"Thu, 05 May 2016 06:33:59 GMT","example":true},{"hash":"zdv2kras4n","parent_hash":"fqhp5hq3ka","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/zdv2kras4n.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/zdv2kras4n","title":"graphing-calculator-label-example-graph-lists-plotting-a-list-of-points","access":"link","created":"Tue, 18 Aug 2015 21:27:01 GMT","example":true},{"hash":"qtzamwcdrk","parent_hash":"aqgbwm3qfd","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qtzamwcdrk.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/qtzamwcdrk","title":"graphing-calculator-label-example-graph-calculus-derivatives","access":"link","created":"Tue, 18 Aug 2015 21:27:17 GMT","example":true},{"hash":"mekfho0w38","parent_hash":"irip8pnpdf","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/mekfho0w38.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/mekfho0w38","title":"graphing-calculator-label-example-graph-calculus-secant-line","access":"link","created":"Tue, 18 Aug 2015 21:27:32 GMT","example":true},{"hash":"fs3lx8gptb","parent_hash":"dlzhsldcgo","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/fs3lx8gptb.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/fs3lx8gptb","title":"graphing-calculator-label-example-graph-calculus-tangent-line","access":"link","created":"Tue, 18 Aug 2015 21:27:46 GMT","example":true},{"hash":"noanuckuli","parent_hash":"gkjridbqfj","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/noanuckuli.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/noanuckuli","title":"graphing-calculator-label-example-graph-calculus-taylor-expansion-of-sin-x","access":"link","created":"Tue, 18 Aug 2015 21:28:02 GMT","example":true},{"hash":"qigfpckugc","parent_hash":null,"thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/qigfpckugc.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/qigfpckugc","title":"graphing-calculator-label-example-graph-calculus-integrals","access":"link","created":"Tue, 19 Apr 2016 14:03:33 GMT","example":true},{"hash":"u2qz73ufju","parent_hash":"o3pwn3vkgh","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/u2qz73ufju.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/u2qz73ufju","title":"graphing-calculator-label-example-graph-calculus-integral-with-adjustable-bounds","access":"link","created":"Tue, 19 Apr 2016 14:12:40 GMT","example":true},{"hash":"gaa5aqyb5s","parent_hash":null,"thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/gaa5aqyb5s.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/gaa5aqyb5s","title":"graphing-calculator-label-example-graph-calculus-fundamental-theorem-of-calculus","access":"link","created":"Tue, 19 Apr 2016 14:15:45 GMT","example":true},{"hash":"8hxtdephtf","parent_hash":"xova2bfhj5","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8hxtdephtf.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/8hxtdephtf","title":"graphing-calculator-label-example-graph-pac-man","access":"link","created":"Mon, 20 Apr 2015 14:47:01 GMT","example":true,"easterEgg":"betchacant"},{"hash":"8mmk4hrmqg","parent_hash":"hvweogjvv8","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8mmk4hrmqg.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/8mmk4hrmqg","title":"graphing-calculator-label-example-graph-pride-flag","access":"link","created":"Wed, 10 Jun 2020 19:44:37 GMT","example":true,"easterEgg":"pride"},{"hash":"velayq9vsr","parent_hash":"imcdd0epyw","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/velayq9vsr.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/velayq9vsr","title":"graphing-calculator-label-example-graph-pride-flag","access":"link","created":"Tue, 16 Jun 2020 21:22:01 GMT","example":true,"easterEgg":"pride"},{"hash":"dhzndt8brx","parent_hash":"brei8peg52","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/dhzndt8brx.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/dhzndt8brx","title":"graphing-calculator-label-example-graph-3d-world","access":"link","created":"Fri, 03 Jun 2016 01:50:06 GMT","example":true,"easterEgg":"betchacant"},{"hash":"zzhx3zzlns","parent_hash":"ccmfndxptv","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/zzhx3zzlns.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/zzhx3zzlns","title":"graphing-calculator-label-example-graph-checkerboard-inversion","access":"link","created":"Thu, 02 Jun 2016 22:06:08 GMT","example":true,"easterEgg":"betchacant"},{"hash":"c1u72uowae","parent_hash":null,"thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/c1u72uowae.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/c1u72uowae","title":"graphing-calculator-label-example-graph-regular-sine-wave","access":"link","created":"Sun, 18 Aug 2013 06:25:20 GMT","example":true,"easterEgg":"betchacant"},{"hash":"2mwse3jtff","parent_hash":"msmdonti4c","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/2mwse3jtff.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/2mwse3jtff","title":"graphing-calculator-label-example-graph-fastest-path-to-a-point","access":"link","created":"Thu, 02 Jun 2016 22:02:44 GMT","example":true,"easterEgg":"betchacant"},{"hash":"8ytrg3nyln","parent_hash":"d7qrsg2hxg","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/8ytrg3nyln.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/8ytrg3nyln","title":"graphing-calculator-label-example-graph-fireworks","access":"link","created":"Fri, 03 Jun 2016 01:50:52 GMT","example":true,"easterEgg":"betchacant"},{"hash":"9ed6k6wexp","parent_hash":"9ed6k6wexp","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/9qixqdozzh.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/9ed6k6wexp","title":"graphing-calculator-label-example-graph-fractal-valentine","access":"link","created":"Sat, 14 Feb 2015 18:42:18 GMT","example":true,"easterEgg":"betchacant"},{"hash":"am6ab20tmw","parent_hash":"hvycjwscfq","thumbUrl":"https://saved-work.desmos.com/calc_thumbs/production/am6ab20tmw.png","stateUrl":"https://saved-work.desmos.com/calc-states/production/am6ab20tmw","title":"graphing-calculator-label-example-graph-outstretched-arm","access":"link","created":"Fri, 03 Jun 2016 01:45:50 GMT","example":true,"easterEgg":"betchacant"}]\n';});

!function(){var g,w=window.jQuery,m=Math.min,o=Math.max;if(!w)throw"MathQuill requires jQuery 1.5.2+ to be loaded first";function k(){}var n=[].slice;function s(t){var e=n.call(arguments,1);return function(){return t.apply(this,e)}}function c(t,e){if(!e)throw new Error("prayer failed: "+t)}var l,u,r=(l="prototype",u={}.hasOwnProperty,function e(n,t){function i(){var t=new r;return f(t.init)&&t.init.apply(t,arguments),t}function r(){}void 0===t&&(t=n,n=Object),i.Bare=r;var s,a=p[l]=n[l],o=r[l]=i[l]=i.p=new p;return(o.constructor=i).extend=function(t){return e(i,t)},(i.open=function(t){if(s={},f(t)?s=t.call(i,o,a,i,n):h(t)&&(s=t),h(s))for(var e in s)u.call(s,e)&&(o[e]=s[e]);return f(o.init)||(o.init=n),i})(t)});function h(t){return"object"==typeof t}function f(t){return"function"==typeof t}function p(){}var y=-1,L=1;function d(t){c("a direction was passed",t===y||t===L)}var x=r(w,function(t){t.insDirOf=function(t,e){return t===y?this.insertBefore(e.first()):this.insertAfter(e.last())},t.insAtDirEnd=function(t,e){return t===y?this.prependTo(e):this.appendTo(e)}}),v=r(function(t){t.parent=0,t[y]=0,t[L]=0,t.init=function(t,e,n){this.parent=t,this[y]=e,this[L]=n},this.copy=function(t){return v(t.parent,t[y],t[L])}}),a={},i=!1;function b(){i=!1,a={}}function q(t,e){var n=t[y];if(n)for(;n!==t[L][L];n=n[L]){if(!1===e(n))break}}function O(t,e,n){var i=t[y];if(!i)return e;for(;i!==t[L][L];i=i[L])e=n(e,i);return e}var S=r(function(t){t[y]=0,t[L]=0;var e=t.parent=0;this.getNodeOfElement=function(t){if(t){if(!t.nodeType)throw new Error("must pass an HTMLElement to Node.getNodeOfElement");return t.mqBlockNode||t.mqCmdNode}},this.linkElementByBlockId=function(t,e){S.linkElementByBlockNode(t,a[e])},this.linkElementByBlockNode=function(t,e){t.mqBlockNode=e},this.linkElementByCmdNode=function(t,e){t.mqCmdNode=e},t.init=function(){this.id=e+=1,a[e]=this,i||(i=!0,setTimeout(b)),this.ends={},this.ends[y]=0,this.ends[L]=0},t.toString=function(){return"{{ MathQuill Node #"+this.id+" }}"},t.jQ=x(),t.jQadd=function(t){return this.jQ=this.jQ.add(t)},t.jQize=function(t){t=x(t||this.html());for(var e=0;e<t.length;e+=1)!function t(e){var n,i,r,s;for(e.getAttribute&&((n=e.getAttribute("mathquill-command-id"))&&(e.removeAttribute("mathquill-command-id"),(i=a[n]).jQadd(e),S.linkElementByCmdNode(e,i)),(r=e.getAttribute("mathquill-block-id"))&&(e.removeAttribute("mathquill-block-id"),(s=a[r]).jQadd(e),S.linkElementByBlockNode(e,s))),e=e.firstChild;e;e=e.nextSibling)t(e)}(t[e]);return t},t.createDir=function(t,e){d(t);return this.jQize(),this.jQ.insDirOf(t,e.jQ),e[t]=this.adopt(e.parent,e[y],e[L]),this},t.createLeftOf=function(t){return this.createDir(y,t)},t.selectChildren=function(t,e){return E(t,e)},t.bubble=function(t){for(var e=this;e;e=e.parent){if(!1===t(e))break}return this},t.postOrder=function(n){return function t(e){e.eachChild(t),n(e)}(this),this},t.isEmpty=function(){return 0===this.ends[y]&&0===this.ends[L]},t.isEmptyParens=function(){return!!this.isEmpty()&&(!!this.parent&&"\\left("===this.parent.ctrlSeq)},t.isEmptySquareBrackets=function(){return!!this.isEmpty()&&(!!this.parent&&"\\left["===this.parent.ctrlSeq)},t.isStyleBlock=function(){return!1},t.children=function(){return T(this.ends[y],this.ends[L])},t.eachChild=function(t){return q(this.ends,t),this},t.foldChildren=function(t,e){return O(this.ends,t,e)},t.withDirAdopt=function(t,e,n,i){return T(this,this).withDirAdopt(t,e,n,i),this},t.adopt=function(t,e,n){return T(this,this).adopt(t,e,n),this},t.disown=function(){return T(this,this).disown(),this},t.remove=function(){return this.jQ.remove(),this.disown()},t.isParentSimpleSubscript=function(){return!!this.parent&&(this.parent.parent instanceof Nt&&!!this.parent.jQ.hasClass("dcg-mq-sub"))},t.finalizeTree=function(){},t.contactWeld=function(){},t.blur=function(){},t.intentionalBlur=function(){},t.reflow=function(){},t.registerInnerField=function(){}});function C(t,e,n){c("a parent is always present",t),c("leftward is properly set up",e?e[L]===n&&e.parent===t:t.ends[y]===n),c("rightward is properly set up",n?n[y]===e&&n.parent===t:t.ends[L]===e)}var T=r(function(t){t.init=function(t,e,n){var i;n===g&&(n=y),d(n),c("no half-empty fragments",!t==!e),this.ends={},t&&(c("withDir is passed to Fragment",t instanceof S),c("oppDir is passed to Fragment",e instanceof S),c("withDir and oppDir have the same parent",t.parent===e.parent),this.ends[n]=t,this.ends[-n]=e,i=this.fold([],function(t,e){return t.push.apply(t,e.jQ.get()),t}),this.jQ=this.jQ.add(i))},t.jQ=x(),t.withDirAdopt=function(t,e,n,i){return t===y?this.adopt(e,n,i):this.adopt(e,i,n)},t.adopt=function(e,n,t){C(e,n,t);var i=this;i.disowned=!1;var r=i.ends[y];if(!r)return this;var s=i.ends[L];return n||(e.ends[y]=r),t?t[y]=s:e.ends[L]=s,i.ends[L][L]=t,i.each(function(t){t[y]=n,t.parent=e,n&&(n[L]=t),n=t}),i},t.disown=function(){var t=this,e=t.ends[y];if(!e||t.disowned)return t;t.disowned=!0;var n=t.ends[L],i=e.parent;return C(i,e[y],e),C(i,n,n[L]),e[y]?e[y][L]=n[L]:i.ends[y]=n[L],n[L]?n[L][y]=e[y]:i.ends[L]=e[y],t},t.remove=function(){return this.jQ.remove(),this.disown()},t.each=function(t){return q(this.ends,t),this},t.fold=function(t,e){return O(this.ends,t,e)}}),j={},Q={},_=r(v,function(t){t.init=function(t,e,n){this.controller=n,this.parent=t,this.options=e;var i=this.jQ=this._jQ=x('<span class="dcg-mq-cursor">&#8203;</span>');this.blink=function(){i.toggleClass("dcg-mq-blink")},this.upDownCache={}},t.show=function(){return this.jQ=this._jQ.removeClass("dcg-mq-blink"),"intervalId"in this?clearInterval(this.intervalId):(this[L]?this.selection&&this.selection.ends[y][y]===this[y]?this.jQ.insertBefore(this.selection.jQ):this.jQ.insertBefore(this[L].jQ.first()):this.jQ.appendTo(this.parent.jQ),this.parent.focus()),this.intervalId=setInterval(this.blink,500),this},t.hide=function(){return"intervalId"in this&&clearInterval(this.intervalId),delete this.intervalId,this.jQ.detach(),this.jQ=x(),this},t.withDirInsertAt=function(t,e,n,i){var r=this.parent;this.parent=e,this[t]=n,this[-t]=i,r!==e&&r.blur&&r.blur(this)},t.insDirOf=function(t,e){return d(t),this.jQ.insDirOf(t,e.jQ),this.withDirInsertAt(t,e.parent,e[t],e),this.parent.jQ.addClass("dcg-mq-hasCursor"),this},t.insLeftOf=function(t){return this.insDirOf(y,t)},t.insRightOf=function(t){return this.insDirOf(L,t)},t.insAtDirEnd=function(t,e){return d(t),this.jQ.insAtDirEnd(t,e.jQ),this.withDirInsertAt(t,e,0,e.ends[t]),e.focus(),this},t.insAtLeftEnd=function(t){return this.insAtDirEnd(y,t)},t.insAtRightEnd=function(t){return this.insAtDirEnd(L,t)},t.jumpUpDown=function(t,e){var n=this;n.upDownCache[t.id]=v.copy(n);var i,r=n.upDownCache[e.id];r?r[L]?n.insLeftOf(r[L]):n.insAtRightEnd(r.parent):(i=n.offset().left,e.seek(i,n)),H.queue(e,!0)},t.offset=function(){var t=this.jQ.removeClass("dcg-mq-cursor").offset();return this.jQ.addClass("dcg-mq-cursor"),t},t.unwrapGramp=function(){var e=this.parent.parent,n=e.parent,i=e[L],r=e[y];if(e.disown().eachChild(function(t){t.isEmpty()||(t.children().adopt(n,r,i).each(function(t){t.jQ.insertBefore(e.jQ.first())}),r=t.ends[L])}),!this[L])if(this[y])this[L]=this[y][L];else for(;!this[L];){if(this.parent=this.parent[L],!this.parent){this[L]=e[L],this.parent=n;break}this[L]=this.parent.ends[y]}this[L]?this.insLeftOf(this[L]):this.insAtRightEnd(n),e.jQ.remove(),e[y].siblingDeleted&&e[y].siblingDeleted(this.options,L),e[L].siblingDeleted&&e[L].siblingDeleted(this.options,y)},t.startSelection=function(){for(var t=this.anticursor=v.copy(this),e=t.ancestors={},n=t;n.parent;n=n.parent)e[n.parent.id]=n},t.endSelection=function(){delete this.anticursor},t.select=function(){var t=this.anticursor;if(this[y]===t[y]&&this.parent===t.parent)return!1;for(var e=this;e.parent;e=e.parent)if(e.parent.id in t.ancestors){var n=e.parent;break}c("cursor and anticursor in the same tree",n);var i,r,s=t.ancestors[n.id],a=L;if(e[y]!==s)for(var o=e;o;o=o[L])if(o[L]===s[L]){a=y,i=e,r=s;break}return a===L&&(i=s,r=e),i instanceof v&&(i=i[L]),r instanceof v&&(r=r[y]),this.hide().selection=n.selectChildren(i,r),this.insDirOf(a,this.selection.ends[a]),this.selectionChanged(),!0},t.resetToEnd=function(t){this.clearSelection();var e=t.root;this[L]=0,this[y]=e.ends[L],this.parent=e},t.clearSelection=function(){return this.selection&&(this.selection.clear(),delete this.selection,this.selectionChanged()),this},t.deleteSelection=function(){this.selection&&(this[y]=this.selection.ends[y][y],this[L]=this.selection.ends[L][L],this.selection.remove(),this.selectionChanged(),delete this.selection)},t.replaceSelection=function(){var t=this.selection;return t&&(this[y]=t.ends[y][y],this[L]=t.ends[L][L],delete this.selection),t}}),E=r(T,function(t,e){t.init=function(){e.init.apply(this,arguments),this.jQ=this.jQ.wrapAll('<span class="dcg-mq-selection"></span>').parent()},t.adopt=function(){return this.jQ.replaceWith(this.jQ=this.jQ.children()),e.adopt.apply(this,arguments)},t.clear=function(){return this.jQ.replaceWith(this.jQ[0].childNodes),this},t.join=function(n,t){var i=t||"";return this.fold("",function(t,e){return t+i+e[n]()})}}),D=r(function(t){t.init=function(t,e,n){this.id=t.id,this.data={},this.root=t,this.container=e,this.options=n,this.ariaLabel="Math Input",this.ariaPostLabel="",(t.controller=this).cursor=t.cursor=_(t,n,this)},t.handle=function(t,e){var n,i=this.options.handlers;i&&i.fns[t]&&(n=i.APIClasses[this.KIND_OF_MQ](this),e===y||e===L?i.fns[t](e,n):i.fns[t](n))};var e=[];this.onNotify=function(t){e.push(t)},t.notify=function(){for(var t=0;t<e.length;t+=1)e[t].apply(this.cursor,arguments);return this}}),A={},B=r(),M={},R=r(),I={};function z(){window.console&&console.warn('You are using the MathQuill API without specifying an interface version, which will fail in v1.0.0. Easiest fix is to do the following before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')}function F(t){return z(),ne(t)}F.prototype=R.p,F.VERSION="v0.10.1",F.interfaceVersion=function(t){if(1!==t)throw"Only interface version 1 supported. You specified: "+t;return(z=function(){window.console&&console.warn('You called MathQuill.interfaceVersion(1); to specify the interface version, which will fail in v1.0.0. You can fix this easily by doing this before doing anything else:\n\n    MathQuill = MathQuill.getInterface(1);\n    // now MathQuill.MathField() works like it used to\n\nSee also the "`dev` branch (20142015)  v0.10.0 Migration Guide" at\n  https://github.com/mathquill/mathquill/wiki/%60dev%60-branch-(2014%E2%80%932015)-%E2%86%92-v0.10.0-Migration-Guide')})(),F};var N=(F.getInterface=t).MIN=1,P=t.MAX=2;function t(a){if(!(N<=a&&a<=P))throw"Only interface versions between "+N+" and "+P+" supported. You specified: "+a;function o(t){if(!t||!t.nodeType)return null;var e=S.getNodeOfElement(x(t).children(".dcg-mq-root-block")[0]),n=e&&e.controller;return n?c[n.KIND_OF_MQ](n):null}var c={};function e(t,e){for(var n in e&&e.handlers&&(e.handlers={fns:e.handlers,APIClasses:c}),e){var i,r;e.hasOwnProperty(n)&&(i=e[n],r=M[n],t[n]=r?r(i):i)}}o.L=y,o.R=L,o.saneKeyboardEvents=U,o.config=function(t){return e(B.p,t),this},o.registerEmbed=function(t,e){if(!/^[a-z][a-z0-9]*$/i.test(t))throw"Embed name must start with letter and be only letters and digits";I[t]=e};var t=c.AbstractMathQuill=r(R,function(t){t.init=function(t){this.__controller=t,this.__options=t.options,this.id=t.id,this.data=t.data},t.__mathquillify=function(t){var e=this.__controller,n=e.root,i=e.container;e.createTextarea();var r=i.addClass(t).contents().detach();n.jQ=x('<span class="dcg-mq-root-block"/>').appendTo(i),S.linkElementByBlockId(n.jQ[0],n.id),this.latex(r.text()),this.revert=function(){return i.empty().unbind(".mathquill").removeClass("dcg-mq-editable-field dcg-mq-math-mode dcg-mq-text-mode").append(r)}},t.config=function(t){return e(this.__options,t),this},t.el=function(){return this.__controller.container[0]},t.text=function(){return this.__controller.exportText()},t.mathspeak=function(){return this.__controller.exportMathSpeak()},t.latex=function(t){return 0<arguments.length?(this.__controller.renderLatexMath(t),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this):this.__controller.exportLatex()},t.html=function(){return this.__controller.root.jQ.html().replace(/ mathquill-(?:command|block)-id="?\d+"?/g,"").replace(/<span class="?dcg-mq-cursor( dcg-mq-blink)?"?>.?<\/span>/i,"").replace(/ dcg-mq-hasCursor|dcg-mq-hasCursor ?/,"").replace(/ class=(""|(?= |>))/g,"")},t.reflow=function(){return this.__controller.root.postOrder(function(t){t.reflow()}),this}});for(var n in o.prototype=t.prototype,c.EditableField=r(t,function(t,e){t.__mathquillify=function(){return e.__mathquillify.apply(this,arguments),this.__controller.editable=!0,this.__controller.delegateMouseEvents(),this.__controller.editablesTextareaEvents(),this},t.focus=function(){return this.__controller.textarea.focus(),this.__controller.scrollHoriz(),this},t.blur=function(){return this.__controller.textarea.blur(),this},t.write=function(t){return this.__controller.writeLatex(t),this.__controller.scrollHoriz(),this.__controller.blurred&&this.__controller.cursor.hide().parent.blur(),this},t.cmd=function(t){var e,n=this.__controller.notify(),i=n.cursor;return/^\\[a-z]+$/i.test(t)?(t=t.slice(1),(e=j[t])&&(t=e(t),i.selection&&t.replaces(i.replaceSelection()),t.createLeftOf(i.show()))):i.parent.write(i,t),n.scrollHoriz(),n.blurred&&i.hide().parent.blur(),this},t.select=function(){var t=this.__controller;for(t.notify("move").cursor.insAtRightEnd(t.root);t.cursor[y];)t.selectLeft();return this},t.clearSelection=function(){return this.__controller.cursor.clearSelection(),this},t.moveToDirEnd=function(t){return this.__controller.notify("move").cursor.insAtDirEnd(t,this.__controller.root),this},t.moveToLeftEnd=function(){return this.moveToDirEnd(y)},t.moveToRightEnd=function(){return this.moveToDirEnd(L)},t.keystroke=function(t,e){for(var t=t.replace(/^\s+|\s+$/g,"").split(/\s+/),n=0;n<t.length;n+=1)this.__controller.keystroke(t[n],e||{preventDefault:k});return this},t.typedText=function(t){for(var e=0;e<t.length;e+=1)this.__controller.typedText(t.charAt(e));return this},t.dropEmbedded=function(t,e,n){var i=t-x(window).scrollLeft(),r=e-x(window).scrollTop(),s=document.elementFromPoint(i,r);this.__controller.seek(x(s),t,e),ee().setOptions(n).createLeftOf(this.__controller.cursor)},t.setAriaLabel=function(t){return this.__controller.ariaLabel=t&&"string"==typeof t&&""!=t?t:"Math Input",this},t.getAriaLabel=function(){return this.__controller.ariaLabel||"Math Input"},t.setAriaPostLabel=function(t,e){var n=this.__controller;return t&&"string"==typeof t&&""!=t?(t!==n.ariaPostLabel&&"number"==typeof e&&(this.ariaAlertTimeout&&clearTimeout(this.ariaAlertTimeout),this.ariaAlertTimeout=setTimeout(function(){x(document.activeElement).closest(x(n.container)).length&&H.alert(this.mathspeak().trim()+" "+t.trim())}.bind(this),e)),n.ariaPostLabel=t):(this.ariaAlertTimeout&&clearTimeout(this.ariaAlertTimeout),n.ariaPostLabel=""),this},t.getAriaPostLabel=function(){return this.__controller.ariaPostLabel||""},t.clickAt=function(t,e,n){n=n||document.elementFromPoint(t,e);var i=this.__controller,r=i.root;return w.contains(r.jQ[0],n)||(n=r.jQ[0]),i.seek(x(n),t+pageXOffset,e+pageYOffset),i.blurred&&this.focus(),this},t.ignoreNextMousedown=function(t){return this.__controller.cursor.options.ignoreNextMousedown=t,this}}),(o.EditableField=function(){throw"wtf don't call me, I'm 'abstract'"}).prototype=c.EditableField.prototype,A)!function(r,t){var s=c[r]=t(c);(o[r]=function(t,e){var n=o(t);if(n instanceof s||!t||!t.nodeType)return n;var i=D(s.RootBlock(),x(t),B());return i.KIND_OF_MQ=r,s(i).__mathquillify(e,a)}).prototype=s.prototype}(n,A[n]);return o}F.noConflict=function(){return window.MathQuill=e,F};var e=window.MathQuill;function G(t){for(var e="moveOutOf deleteOutOf selectOutOf upOutOf downOutOf".split(" "),n=0;n<e.length;n+=1)!function(e){t[e]=function(t){this.controller.handle(e,t)}}(e[n]);t.reflow=function(){this.controller.handle("reflow"),this.controller.handle("edited"),this.controller.handle("edit")}}window.MathQuill=F;var $,W=r(function(t,e,o){function n(t,e){throw"Parse Error: "+e+" at "+(t=t?"'"+t+"'":"EOF")}t.init=function(t){this._=t},t.parse=function(t){return this.skip(s)._(""+t,function(t,e){return e},n)},t.or=function(r){c("or is passed a parser",r instanceof o);var t=this;return o(function(e,n,i){return t._(e,n,function(t){return r._(e,n,i)})})},t.then=function(s){var e=this;return o(function(t,i,r){return e._(t,function(t,e){var n=s instanceof o?s:s(e);return c("a parser is returned",n instanceof o),n._(t,i,r)},r)})},t.many=function(){var a=this;return o(function(n,t,e){for(var i=[];a._(n,r,s););return t(n,i);function r(t,e){return n=t,i.push(e),!0}function s(){return!1}})},t.times=function(u,h){arguments.length<2&&(h=u);var f=this;return o(function(n,t,e){for(var i,r=[],s=!0,a=0;a<u;a+=1)if(!(s=f._(n,o,c)))return e(n,i);for(;a<h&&s;a+=1)s=f._(n,o,l);return t(n,r);function o(t,e){return r.push(e),n=t,!0}function c(t,e){return i=e,n=t,!1}function l(t,e){return!1}})},t.result=function(t){return this.then(r(t))},t.atMost=function(t){return this.times(0,t)},t.atLeast=function(t){var n=this;return n.times(t).then(function(e){return n.many().map(function(t){return e.concat(t)})})},t.map=function(e){return this.then(function(t){return r(e(t))})},t.skip=function(e){return this.then(function(t){return e.result(t)})};this.string=function(r){var s=r.length,a="expected '"+r+"'";return o(function(t,e,n){var i=t.slice(0,s);return i===r?e(t.slice(s),i):n(t,a)})};var i=this.regex=function(s){c("regexp parser is anchored","^"===s.toString().charAt(1));var a="expected "+s;return o(function(t,e,n){var i=s.exec(t);if(i){var r=i[0];return e(t.slice(r.length),r)}return n(t,a)})},r=o.succeed=function(n){return o(function(t,e){return e(t,n)})},s=(o.fail=function(i){return o(function(t,e,n){return n(t,i)})},o.letter=i(/^[a-z]/i),o.letters=i(/^[a-z]*/i),o.digit=i(/^[0-9]/),o.digits=i(/^[0-9]*/),o.whitespace=i(/^\s+/),o.optWhitespace=i(/^\s*/),o.any=o(function(t,e,n){return t?e(t.slice(1),t.charAt(0)):n(t,"expected any character")}),o.all=o(function(t,e,n){return e("",t)}),o.eof=o(function(t,e,n){return t?n(t,"expected EOF"):e(t,t)}))}),U=($={8:"Backspace",9:"Tab",10:"Enter",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Esc",32:"Spacebar",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",45:"Insert",46:"Del",144:"NumLock"},function(t,n){var i,e=null,r=null,s=w(t),a=w(n.container||s),o=k;function c(t){o=t,clearTimeout(i),i=setTimeout(t)}function l(e){c(function(t){o=k,clearTimeout(i),e(t)})}function u(){try{s[0].select()}catch(t){}}a.bind("keydown keypress input keyup paste",function(t){o(t)});var h=!1;function f(){n.options&&n.options.overrideKeystroke?n.options.overrideKeystroke(V(e),e):n.keystroke(V(e),e)}function p(t){e=t,r=null,h&&l(function(t){t&&"focusout"===t.type||u()}),f()}function d(t){if(t&&t.originalEvent)switch(t.originalEvent.key){case"ArrowRight":case"ArrowLeft":case"ArrowDown":case"ArrowUp":return 1}}function m(t){e&&r&&f(),d(r=t)||c(v)}function g(t){e&&!r&&(d(t)||c(v))}function v(){var t,e;"selectionStart"in(t=s[0])&&t.selectionStart!==t.selectionEnd||(1===(e=s.val()).length?(s.val(""),n.options&&n.options.overrideTypedText?n.options.overrideTypedText(e):n.typedText(e)):e&&u())}function b(){r=e=null,o=k,clearTimeout(i),s.val("")}function q(){var t=s.val();s.val(""),t&&n.paste(t)}return n.options&&n.options.disableCopyPaste?a.bind({keydown:p,keypress:m,keyup:g,focusout:b,copy:function(t){t.preventDefault()},cut:function(t){t.preventDefault()},paste:function(t){t.preventDefault()}}):a.bind({keydown:p,keypress:m,keyup:g,focusout:b,cut:function(){l(function(){n.cut()})},copy:function(){l(function(){n.copy()})},paste:function(t){s.focus(),c(q)}}),{select:function(t){o(),o=k,clearTimeout(i),s.val(t),t&&u(),h=!!t}}});function V(t){var e,n=t.which||t.keyCode,i=$[n],r=[];return t.ctrlKey&&r.push("Ctrl"),t.originalEvent&&t.originalEvent.metaKey&&r.push("Meta"),t.altKey&&r.push("Alt"),t.shiftKey&&r.push("Shift"),e=i||String.fromCharCode(n),r.length||i?(r.push(e),r.join("-")):e}var H=r(function(t){t.init=function(){this.jQ=w([]),w(document).ready(function(){var t=".dcg-mq-aria-alert";w(t).length||w("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-mq-aria-alert'></p>"),this.jQ=w(t)}.bind(this)),this.items=[],this.msg=""},t.queue=function(t,e){return t instanceof S&&(t=e?t.parent&&t.parent.ariaLabel&&"block"===t.ariaLabel?t.parent.ariaLabel+" "+t.mathspeak():t.ariaLabel?t.ariaLabel+" "+t.mathspeak():t.mathspeak():t.mathspeak()),this.items.push(t),this},t.queueDirOf=function(t){return d(t),this.queue(t===y?"before":"after")},t.queueDirEndOf=function(t){return d(t),this.queue(t===y?"beginning of":"end of")},t.alert=function(t){return t&&this.queue(t),this.items.length&&(this.msg=this.items.join(" ").replace(/ +(?= )/g,"").trim(),this.jQ.empty().text(this.msg)),this.clear()},t.clear=function(){return this.items.length=0,this}})();D.open(function(t){t.aria=H,t.exportMathSpeak=function(){return this.root.mathspeak()}}),D.open(function(t,e){t.exportText=function(){return this.root.foldChildren("",function(t,e){return t+e.text()})}}),D.open(function(t){this.onNotify(function(t){if("edit"===t||"replace"===t||t===g){var e=this.controller;if(!e)return;if(!e.options.enableDigitGrouping)return;if(!1!==e.blurred)return;e.disableGroupingForSeconds(1)}}),t.disableGroupingForSeconds=function(t){clearTimeout(this.__disableGroupingTimeout);var e=this.root.jQ;0===t?e.removeClass("dcg-mq-suppress-grouping"):(e.addClass("dcg-mq-suppress-grouping"),this.__disableGroupingTimeout=setTimeout(function(){e.removeClass("dcg-mq-suppress-grouping")},1e3*t))},t.focusBlurEvents=function(){var t,e=this,n=e.root,i=e.cursor;function r(){clearTimeout(t),i.selection&&i.selection.jQ.addClass("dcg-mq-blur"),s(),a()}function s(){i.hide().parent.blur(),e.container.removeClass("dcg-mq-focused"),x(window).unbind("blur",r),e.options&&e.options.resetCursorOnBlur&&i.resetToEnd(e)}function a(){var t=(e.ariaLabel+": "+n.mathspeak()+" "+e.ariaPostLabel).trim();H.jQ.empty(),e.textarea.attr("aria-label",t),e.container.attr("aria-label",t)}e.textarea.focus(function(){a(),e.blurred=!1,clearTimeout(t),e.container.addClass("dcg-mq-focused"),i.parent||i.insAtRightEnd(n),i.selection?(i.selection.jQ.removeClass("dcg-mq-blur"),e.selectionChanged()):i.show(),e.setOverflowClasses()}).blur(function(){e.textareaSelectionTimeout&&(clearTimeout(e.textareaSelectionTimeout),e.textareaSelectionTimeout=g),e.disableGroupingForSeconds(0),e.blurred=!0,t=setTimeout(function(){n.postOrder(function(t){t.intentionalBlur()}),i.clearSelection().endSelection(),s(),a(),e.scrollHoriz()}),x(window).bind("blur",r)}),a(),e.blurred=!0,i.hide().parent.blur()}}),D.open(function(t){t.keystroke=function(t,e){this.cursor.parent.keystroke(t,e,this)}}),S.open(function(t){t.keystroke=function(t,e,n){var i=n.cursor;switch(t){case"Ctrl-Shift-Backspace":case"Ctrl-Backspace":n.ctrlDeleteDir(y);break;case"Shift-Backspace":case"Backspace":n.backspace();break;case"Esc":case"Tab":return void n.escapeDir(L,t,e);case"Shift-Tab":case"Shift-Esc":return void n.escapeDir(y,t,e);case"End":n.notify("move").cursor.insAtRightEnd(i.parent),H.queue("end of").queue(i.parent,!0);break;case"Ctrl-End":n.notify("move").cursor.insAtRightEnd(n.root),H.queue("end of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);break;case"Shift-End":for(;i[L];)n.selectRight();break;case"Ctrl-Shift-End":for(;i[L]||i.parent!==n.root;)n.selectRight();break;case"Home":n.notify("move").cursor.insAtLeftEnd(i.parent),H.queue("beginning of").queue(i.parent,!0);break;case"Ctrl-Home":n.notify("move").cursor.insAtLeftEnd(n.root),H.queue("beginning of").queue(n.ariaLabel).queue(n.root).queue(n.ariaPostLabel);break;case"Shift-Home":for(;i[y];)n.selectLeft();break;case"Ctrl-Shift-Home":for(;i[y]||i.parent!==n.root;)n.selectLeft();break;case"Left":n.moveLeft();break;case"Shift-Left":n.selectLeft();break;case"Ctrl-Left":break;case"Right":n.moveRight();break;case"Shift-Right":n.selectRight();break;case"Ctrl-Right":break;case"Up":n.moveUp();break;case"Down":n.moveDown();break;case"Shift-Up":if(i[y])for(;i[y];)n.selectLeft();else n.selectLeft();case"Shift-Down":if(i[L])for(;i[L];)n.selectRight();else n.selectRight();case"Ctrl-Up":case"Ctrl-Down":break;case"Ctrl-Shift-Del":case"Ctrl-Del":n.ctrlDeleteDir(L);break;case"Shift-Del":case"Del":n.deleteForward();break;case"Meta-A":case"Ctrl-A":for(n.notify("move").cursor.insAtRightEnd(n.root);i[y];)n.selectLeft();break;case"Ctrl-Alt-Up":i.parent.parent&&i.parent.parent instanceof S?H.queue(i.parent.parent):H.queue("nothing above");break;case"Ctrl-Alt-Down":i.parent&&i.parent instanceof S?H.queue(i.parent):H.queue("block is empty");break;case"Ctrl-Alt-Left":i.parent.parent&&i.parent.parent.ends&&i.parent.parent.ends[y]&&i.parent.parent.ends[y]instanceof S?H.queue(i.parent.parent.ends[y]):H.queue("nothing to the left");break;case"Ctrl-Alt-Right":i.parent.parent&&i.parent.parent.ends&&i.parent.parent.ends[L]&&i.parent.parent.ends[L]instanceof S?H.queue(i.parent.parent.ends[L]):H.queue("nothing to the right");break;case"Ctrl-Alt-Shift-Down":i.selection?H.queue(i.selection.join("mathspeak"," ").trim()+" selected"):H.queue("nothing selected");break;case"Ctrl-Alt-=":case"Ctrl-Alt-Shift-Right":n.ariaPostLabel.length?H.queue(n.ariaPostLabel):H.queue("no answer");break;default:return}H.alert(),e.preventDefault(),n.scrollHoriz()},t.moveOutOf=t.moveTowards=t.deleteOutOf=t.deleteTowards=t.unselectInto=t.selectOutOf=t.selectTowards=function(){c("overridden or never called on this node")}}),D.open(function(t){function e(t,e){var n=t.notify("upDown").cursor,i=e+"Into",r=e+"OutOf";return n[L][i]?n.insAtLeftEnd(n[L][i]):n[y][i]?n.insAtRightEnd(n[y][i]):n.parent.bubble(function(t){var e=t[r];if(e&&("function"==typeof e&&(e=t[r](n)),e instanceof S&&n.jumpUpDown(t,e),!0!==e))return!1}),t}this.onNotify(function(t){"move"!==t&&"upDown"!==t||this.show().clearSelection()}),t.escapeDir=function(t,e,n){d(t);var i=this.cursor;if(i.parent!==this.root&&n.preventDefault(),i.parent!==this.root)return i.parent.moveOutOf(t,i),H.alert(),this.notify("move")},M.leftRightIntoCmdGoes=function(t){if(t&&"up"!==t&&"down"!==t)throw'"up" or "down" required for leftRightIntoCmdGoes option, got "'+t+'"';return t},t.moveDir=function(t){d(t);var e=this.cursor,n=e.options.leftRightIntoCmdGoes;return e.selection?e.insDirOf(t,e.selection.ends[t]):e[t]?e[t].moveTowards(t,e,n):e.parent.moveOutOf(t,e,n),this.notify("move")},t.moveLeft=function(){return this.moveDir(y)},t.moveRight=function(){return this.moveDir(L)},t.moveUp=function(){return e(this,"up")},t.moveDown=function(){return e(this,"down")},this.onNotify(function(t){"upDown"!==t&&(this.upDownCache={})}),this.onNotify(function(t){"edit"===t&&this.show().deleteSelection()}),t.deleteDir=function(t){d(t);var e,n,i=this.cursor,r=i[t],s=i.parent.parent;r&&r instanceof S?r.sides?H.queue(r.parent.chToCmd(r.sides[-t].ch).mathspeak({createdLeftOf:i})):r.blocks||"\\text"===r.parent.ctrlSeq||H.queue(r):s&&s instanceof S&&(s.sides?H.queue(s.parent.chToCmd(s.sides[t].ch).mathspeak({createdLeftOf:i})):s.blocks&&s.mathspeakTemplate?s.upInto&&s.downInto?H.queue(s.mathspeakTemplate[1]):(e=s.mathspeakTemplate,n=t===y?e[0]:e[e.length-1],H.queue(n)):H.queue(s));var a=i.selection;return this.notify("edit"),a||(i[t]?i[t].deleteTowards(t,i):i.parent.deleteOutOf(t,i)),i[y].siblingDeleted&&i[y].siblingDeleted(i.options,L),i[L].siblingDeleted&&i[L].siblingDeleted(i.options,y),i.parent.bubble(function(t){t.reflow()}),this},t.ctrlDeleteDir=function(t){d(t);var e,n=this.cursor;return!n[t]||n.selection?this.deleteDir(t):(this.notify("edit"),e=t===y?T(n.parent.ends[y],n[y]):T(n[L],n.parent.ends[L]),H.queue(e),e.remove(),n.insAtDirEnd(t,n.parent),n[y].siblingDeleted&&n[y].siblingDeleted(n.options,L),n[L].siblingDeleted&&n[L].siblingDeleted(n.options,y),n.parent.bubble(function(t){t.reflow()}),this)},t.backspace=function(){return this.deleteDir(y)},t.deleteForward=function(){return this.deleteDir(L)},this.onNotify(function(t){"select"!==t&&this.endSelection()}),t.selectDir=function(t){var e=this.notify("select").cursor,n=e.selection;d(t),e.anticursor||e.startSelection();var i=e[t];i?n&&n.ends[t]===i&&e.anticursor[-t]!==i?i.unselectInto(t,e):i.selectTowards(t,e):e.parent.selectOutOf(t,e),e.clearSelection(),e.select()||e.show(),e.selection&&H.clear().queue(e.selection.join("mathspeak"," ").trim()+" selected")},t.selectLeft=function(){return this.selectDir(y)},t.selectRight=function(){return this.selectDir(L)}});var K,Y,X,Z,J,tt,et,nt,it,rt,st,at,ot,ct,lt,ut,ht,ft=(K=W.string,Y=W.regex,X=W.letter,Z=W.digit,J=W.any,tt=W.optWhitespace,et=W.succeed,nt=W.fail,it=X.map(function(t){return xt(t)}),rt=Z.map(function(t){return yt(t)}),st=Y(/^[^${}\\_^]/).map(function(t){return vt(t)}),at=Y(/^[^\\a-eg-zA-Z]/).or(K("\\").then(Y(/^[a-z]+/i).or(Y(/^\s+/).result(" ")).or(J))).then(function(t){var e=j[t];return e?e(t).parser():nt("unknown command: \\"+t)}).or(it).or(rt).or(st),ot=K("{").then(function(){return lt}).skip(K("}")),ct=tt.then(ot.or(at.map(function(t){var e=qt();return t.adopt(e,0,0),e}))),lt=ct.many().map(pt).skip(tt),ut=K("[").then(ct.then(function(t){return"]"!==t.join("latex")?et(t):nt()}).many().map(pt).skip(tt)).skip(K("]")),(ht=lt).block=ct,ht.optBlock=ut,ht);function pt(t){for(var e=t[0]||qt(),n=1;n<t.length;n+=1)t[n].children().adopt(e,e.ends[L],0);return e}D.open(function(t,e){t.cleanLatex=function(t){return t.replace(/(\\[a-z]+) (?![a-z])/gi,"$1")},t.exportLatex=function(){return this.cleanLatex(this.root.latex())},t.writeLatex=function(t){var e=this.notify("edit").cursor,n=W.all,i=W.eof,r=ft.skip(i).or(n.result(!1)).parse(t);return r&&!r.isEmpty()&&(r.children().adopt(e.parent,e[y],e[L]),r.jQize().insertBefore(e.jQ),e[y]=r.ends[L],r.finalizeInsert(e.options,e),r.ends[L][L].siblingCreated&&r.ends[L][L].siblingCreated(e.options,y),r.ends[y][y].siblingCreated&&r.ends[y][y].siblingCreated(e.options,L),e.parent.bubble(function(t){t.reflow()})),this},t.classifyLatexForEfficientUpdate=function(t){if("string"==typeof t){var e=t.match(/-?[0-9.]+$/g);return e&&1===e.length?{latex:t,prefix:t.substr(0,t.length-e[0].length),digits:e[0]}:void 0}},t.renderLatexMathEfficiently=function(t){var e,n,i=this.classifyLatexForEfficientUpdate(t);if(!i)return!1;if(e=this.exportLatex(),!(n=this.classifyLatexForEfficientUpdate(e))||n.prefix!==i.prefix)return!1;var r=this.root,s=n.digits,a=i.digits,o=!1,c=!1;"-"===s[0]&&(o=!0,s=s.substr(1)),"-"===a[0]&&(c=!0,a=a.substr(1));for(var l,u,h=this.root.ends[L],f=[],p=s.length-1;0<=p;p--){if(h.ctrlSeq!==s[p])return!1;if(h.parent!==r)return!1;f.unshift(h),h=h[y]}if(o&&!c){var d=h;if("-"!==d.ctrlSeq)return!1;if(d[L]!==f[0])return!1;if(d.parent!==r)return!1;if(d[y]&&d[y].parent!==r)return!1;f[0][y]=d[y],r.ends[y]===d&&(r.ends[y]=f[0]),d[y]&&(d[y][L]=f[0]),d.jQ.remove()}!o&&c&&(l=Et("-"),(u=document.createElement("span")).textContent="-",l.jQ=x(u),f[0][y]&&(f[0][y][L]=l),r.ends[y]===f[0]&&(r.ends[y]=l),l.parent=r,l[y]=f[0][y],l[L]=f[0],(f[0][y]=l).contactWeld(),l.jQ.insertBefore(f[0].jQ));var m=Math.min(s.length,a.length);for(p=0;p<m;p++){var g=a[p];(h=f[p]).ctrlSeq!==g&&(h.ctrlSeq=g,h.jQ[0].textContent=g,h.mathspeakName=g)}if(s.length>a.length)for(h=f[a.length-1],(r.ends[L]=h)[L]=0,p=s.length-1;m<=p;p--)f[p].jQ.remove();if(a.length>s.length){for(var v=document.createDocumentFragment(),p=m;p<a.length;p++){var b=document.createElement("span");b.className="dcg-mq-digit",b.textContent=a[p];var q=yt(a[p]);q.parent=r,q.jQ=x(b),v.appendChild(b),q[y]=r.ends[L],q[L]=0,q[y][L]=q,r.ends[L]=q}r.jQ[0].appendChild(v)}var w=this.exportLatex();if(w!==t)return console.warn("tried updating latex efficiently but did not work. Attempted: "+t+" but wrote: "+w),!1;this.cursor.resetToEnd(this);var k=r.ends[L];return k.fixDigitGrouping&&k.fixDigitGrouping(this.cursor.options),!0},t.renderLatexMathFromScratch=function(t){var e=this.root,n=this.cursor,i=W.all,r=W.eof,s=ft.skip(r).or(i.result(!1)).parse(t);e.ends[y]=e.ends[L]=0,s&&s.children().adopt(e,0,0);var a,o=e.jQ;s?(a=s.join("html"),o.html(a),e.jQize(o.children()),e.finalizeInsert(n.options)):o.empty();var c=this.ariaLabel&&"Math Input"!==this.ariaLabel?this.ariaLabel+": ":"";this.container.attr("aria-label",c+e.mathspeak().trim()),delete n.selection,n.insAtRightEnd(e)},t.renderLatexMath=function(t){this.notify("replace"),this.renderLatexMathEfficiently(t)||this.renderLatexMathFromScratch(t)},t.renderLatexText=function(t){var e=this.root,i=this.cursor;e.jQ.children().slice(1).remove(),e.ends[y]=e.ends[L]=0,delete i.selection,i.show().insAtRightEnd(e);var n=W.regex,r=W.string,s=W.eof,a=W.all,o=r("$").then(ft).skip(r("$").or(s)).map(function(t){var e=RootMathCommand(i);e.createBlocks();var n=e.ends[y];return t.children().adopt(n,0,0),e}),c=r("\\$").result("$").or(n(/^[^$]/)).map(vt),l=o.or(c).many().skip(s).or(a.result(!1)).parse(t);if(l){for(var u=0;u<l.length;u+=1)l[u].adopt(e,e.ends[L],0);e.jQize().appendTo(e.jQ),e.finalizeInsert(i.options)}}}),D.open(function(t){var m;B.p.ignoreNextMousedown=k,this.onNotify(function(t){"edit"!==t&&"replace"!==t||m&&m.cursor===this&&m.cb()}),t.delegateMouseEvents=function(){var d=this.root.jQ;this.container.bind("mousedown.mathquill",function(t){var e,n,i=x(t.target).closest(".dcg-mq-root-block"),r=(S.getNodeOfElement(i[0])||S.getNodeOfElement(d[0])).controller,s=r.cursor,a=s.blink,o=r.textareaSpan,c=r.textarea;function l(t){e=x(t.target)}function u(t){s.anticursor||s.startSelection(),r.seek(e,t.pageX,t.pageY).cursor.select(),s.selection&&H.clear().queue(s.selection.join("mathspeak")+" selected").alert(),e=g}function h(t){i.unbind("mousemove",l),x(t.target.ownerDocument).unbind("mousemove",u).unbind("mouseup",p),m=g}function f(){r.editable?(s.show(),H.queue(s.parent).alert()):o.detach()}function p(t){s.blink=a,s.selection||f(),h(t)}t.preventDefault(),t.target.unselectable=!0,s.options.ignoreNextMousedown(t)||(s.options.ignoreNextMousedown=k,m={cursor:s,cb:function(){n=!0,s.blink=a,s.clearSelection(),f(),h(t)}},r.blurred&&(r.editable||i.prepend(o),c.focus(),n)||(s.blink=k,r.seek(x(t.target),t.pageX,t.pageY).cursor.startSelection(),i.mousemove(l),x(t.target.ownerDocument).mousemove(u).mouseup(p)))})}}),D.open(function(t){t.seek=function(t,e,n){for(var i,r=this.notify("select").cursor,s=t&&t[0];s&&!(i=S.getNodeOfElement(s));)s=s.parentElement;return i=i||this.root,r.clearSelection().show(),i.seek(e,r),this.scrollHoriz(),this}}),D.open(function(t){t.setOverflowClasses=function(){var t,e,n,i=this.root.jQ[0],r=!1,s=!1;this.blurred||(t=i.getBoundingClientRect().width,e=i.scrollWidth,r=t+(n=i.scrollLeft)<e,s=0<n),i.classList.contains("dcg-mq-editing-overflow-right")!==r&&i.classList.toggle("dcg-mq-editing-overflow-right"),i.classList.contains("dcg-mq-editing-overflow-left")!==s&&i.classList.toggle("dcg-mq-editing-overflow-left")},t.scrollHoriz=function(){var t=this.cursor,e=t.selection,n=this.root.jQ[0].getBoundingClientRect();if(t.jQ[0]||e){if(e){var i=e.jQ[0].getBoundingClientRect(),r=i.left-(n.left+20),s=i.right-(n.right-20);if(e.ends[y]===t[L])if(r<0)var a=r;else{if(!(0<s))return;a=i.left-s<n.left+20?r:s}else if(0<s)a=s;else{if(!(r<0))return;a=i.right-r>n.right-20?s:r}}else{var o=t.jQ[0].getBoundingClientRect().left;if(o>n.right-20)var a=o-(n.right-20);else{if(!(o<n.left+20))return;var a=o-(n.left+20)}}var c=this.root.jQ[0];a<0&&0===c.scrollLeft||0<a&&c.scrollWidth<=c.scrollLeft+n.width||this.root.jQ.stop().animate({scrollLeft:"+="+a},100,function(){this.setOverflowClasses()}.bind(this))}else this.root.jQ.stop().animate({scrollLeft:0},100,function(){this.setOverflowClasses()}.bind(this))}}),D.open(function(t){B.p.substituteTextarea=function(){return x("<textarea autocapitalize=off autocomplete=off autocorrect=off spellcheck=false x-palm-disable-ste-all=true/>")[0]},t.createTextarea=function(){var t=this.textareaSpan=x('<span class="dcg-mq-textarea"></span>'),e=this.options.substituteTextarea();if(!e.nodeType)throw"substituteTextarea() must return a DOM element, got "+e;e=this.textarea=x(e).appendTo(t);var n=this;n.cursor.selectionChanged=function(){n.selectionChanged()}},t.selectionChanged=function(){var t=this;t.textareaSelectionTimeout===g&&(t.textareaSelectionTimeout=setTimeout(function(){t.setTextareaSelection()}))},t.setTextareaSelection=function(){this.textareaSelectionTimeout=g;var t="";this.cursor.selection&&(t=this.cleanLatex(this.cursor.selection.join("latex")),this.options.statelessClipboard&&(t="$"+t+"$")),this.selectFn(t)},t.staticMathTextareaEvents=function(){var t=this,e=t.root,n=t.cursor,i=t.textarea,r=t.textareaSpan;function s(){r.detach(),t.blurred=!0}this.container.prepend('<span aria-hidden="true" class="dcg-mq-selectable">$'+t.exportLatex()+"$</span>"),t.blurred=!0,i.bind("cut paste",!1),t.options.disableCopyPaste?i.bind("copy",!1):i.bind("copy",function(){t.setTextareaSelection()}),i.focus(function(){t.blurred=!1}).blur(function(){n.selection&&n.selection.clear(),setTimeout(s)}),t.selectFn=function(t){i.val(t),t&&i.select()};var a=t&&"Math Input"!==t.ariaLabel?t.ariaLabel+": ":"";t.container.attr("aria-label",a+e.mathspeak().trim());var o=navigator.userAgent||navigator.vendor||window.opera,c=/iPad|iPhone|iPod/.test(o)&&!window.Stream;-1!==navigator.appVersion.indexOf("Mac")&&!c||t.container.attr("role","math")},B.p.substituteKeyboardEvents=U,t.editablesTextareaEvents=function(){var t=this.textarea,e=this.textareaSpan,n=this.options.substituteKeyboardEvents(t,this);this.selectFn=function(t){n.select(t)},this.container.prepend(e),this.focusBlurEvents()},t.typedText=function(t){if("\n"===t)return this.handle("enter");var e=this.notify().cursor;e.parent.write(e,t),this.scrollHoriz()},t.cut=function(){var t=this,e=t.cursor;e.selection&&setTimeout(function(){t.notify("edit"),e.parent.bubble(function(t){t.reflow()}),t.options&&t.options.onCut&&t.options.onCut()})},t.copy=function(){this.setTextareaSelection()},t.paste=function(t){this.options.statelessClipboard&&(t="$"===t.slice(0,1)&&"$"===t.slice(-1)?t.slice(1,-1):"\\text{"+t+"}"),this.writeLatex(t).cursor.show(),this.scrollHoriz(),this.options&&this.options.onPaste&&this.options.onPaste()}});var dt=r(S,function(t,e){t.finalizeInsert=function(e,n){var t=this;t.postOrder(function(t){t.finalizeTree(e)}),t.postOrder(function(t){t.contactWeld(n)}),t.postOrder(function(t){t.blur()}),t.postOrder(function(t){t.reflow()}),t[L].siblingCreated&&t[L].siblingCreated(e,y),t[y].siblingCreated&&t[y].siblingCreated(e,L),t.bubble(function(t){t.reflow()})}}),mt=r(dt,function(t,r){t.init=function(t,e,n){var i=this;r.init.call(i),i.ctrlSeq||(i.ctrlSeq=t),e&&(i.htmlTemplate=e),n&&(i.textTemplate=n)},t.replaces=function(t){t.disown(),this.replacedFragment=t},t.isEmpty=function(){return this.foldChildren(!0,function(t,e){return t&&e.isEmpty()})},t.parser=function(){var t=ft.block,n=this;return t.times(n.numBlocks()).map(function(t){n.blocks=t;for(var e=0;e<t.length;e+=1)t[e].adopt(n,n.ends[L],0);return n})},t.createLeftOf=function(t){var e=this,n=e.replacedFragment;e.createBlocks(),r.createLeftOf.call(e,t),n&&(n.adopt(e.ends[y],0,0),n.jQ.appendTo(e.ends[y].jQ)),e.finalizeInsert(t.options),e.placeCursor(t)},t.createBlocks=function(){for(var t=this.numBlocks(),e=this.blocks=Array(t),n=0;n<t;n+=1){(e[n]=qt()).adopt(this,this.ends[L],0)}},t.placeCursor=function(t){t.insAtRightEnd(this.foldChildren(this.ends[y],function(t,e){return t.isEmpty()?t:e}))},t.moveTowards=function(t,e,n){var i=n&&this[n+"Into"];e.insAtDirEnd(-t,i||this.ends[-t]),H.queueDirEndOf(-t).queue(e.parent,!0)},t.deleteTowards=function(t,e){this.isEmpty()?e[t]=this.remove()[t]:this.moveTowards(t,e,null)},t.selectTowards=function(t,e){e[-t]=this,e[t]=this[t]},t.selectChildren=function(){return E(this,this)},t.unselectInto=function(t,e){e.insAtDirEnd(-t,e.anticursor.ancestors[this.id])},t.seek=function(n,i){function r(t){var e={};return e[y]=t.jQ.offset().left,e[L]=e[y]+t.jQ.outerWidth(),e}var s=this,a=r(s);if(n<a[y])return i.insLeftOf(s);if(n>a[L])return i.insRightOf(s);var o=a[y];s.eachChild(function(t){var e=r(t);return n<e[y]?(n-o<e[y]-n?t[y]?i.insAtRightEnd(t[y]):i.insLeftOf(s):i.insAtLeftEnd(t),!1):n>e[L]?void(t[L]?o=e[L]:a[L]-n<n-e[L]?i.insRightOf(s):i.insAtRightEnd(t)):(t.seek(n,i),!1)})},t.numBlocks=function(){var t=this.htmlTemplate.match(/&\d+/g);return t?t.length:0},t.html=function(){var n=this.blocks,t=" mathquill-command-id="+this.id,e=this.htmlTemplate.match(/<[^<>]+>|[^<>]+/g);c("no unmatched angle brackets",e.join("")===this.htmlTemplate);for(var i=0,r=e[0];r;r=e[i+=1])if("/>"===r.slice(-2))e[i]=r.slice(0,-2)+t+' aria-hidden="true"/>';else if("<"===r.charAt(0)){c("not an unmatched top-level close tag","/"!==r.charAt(1)),e[i]=r.slice(0,-1)+t+' aria-hidden="true">';for(var s=1;c("no missing close tags",r=e[i+=1]),"</"===r.slice(0,2)?--s:"<"===r.charAt(0)&&"/>"!==r.slice(-2)&&(s+=1),0<s;);}return e.join("").replace(/>&(\d+)/g,function(t,e){return" mathquill-block-id="+n[e].id+' aria-hidden="true">'+n[e].join("html")})},t.latex=function(){return this.foldChildren(this.ctrlSeq,function(t,e){return t+"{"+(e.latex()||" ")+"}"})},t.textTemplate=[""],t.text=function(){var i=this,r=0;return i.foldChildren(i.textTemplate[r],function(t,e){r+=1;var n=e.text();return t&&"("===i.textTemplate[r]&&"("===n[0]&&")"===n.slice(-1)?t+n.slice(1,-1)+i.textTemplate[r]:t+n+(i.textTemplate[r]||"")})},t.mathspeakTemplate=[],t.mathspeak=function(){var n=this,i=0;return n.foldChildren(n.mathspeakTemplate[i]||"Start"+n.ctrlSeq+" ",function(t,e){return i+=1,t+" "+e.mathspeak()+" "+(n.mathspeakTemplate[i]+" "||"End"+n.ctrlSeq+" ")})}}),gt=r(mt,function(t,r){t.init=function(t,e,n,i){!n&&t&&(n=t.replace(/^\\/,"")),this.mathspeakName=i||n,r.init.call(this,t,e,[n])},t.parser=function(){return W.succeed(this)},t.numBlocks=function(){return 0},t.replaces=function(t){t.remove()},t.createBlocks=k,t.moveTowards=function(t,e){e.jQ.insDirOf(t,this.jQ),e[-t]=this,e[t]=this[t],H.queue(this)},t.deleteTowards=function(t,e){e[t]=this.remove()[t]},t.seek=function(t,e){t-this.jQ.offset().left<this.jQ.outerWidth()/2?e.insLeftOf(this):e.insRightOf(this)},t.latex=function(){return this.ctrlSeq},t.text=function(){return this.textTemplate.join("")},t.mathspeak=function(){return this.mathspeakName},t.placeCursor=k,t.isEmpty=function(){return!0}}),vt=r(gt,function(t,i){t.init=function(t,e,n){i.init.call(this,t,"<span>"+(e||t)+"</span>",g,n)}}),bt=r(gt,function(t,r){t.init=function(t,e,n,i){r.init.call(this,t,'<span class="dcg-mq-binary-operator">'+e+"</span>",n,i)}}),qt=r(dt,function(t,i){t.join=function(n){return this.foldChildren("",function(t,e){return t+e[n]()})},t.html=function(){return this.join("html")},t.latex=function(){return this.join("latex")},t.text=function(){return this.ends[y]===this.ends[L]&&0!==this.ends[y]?this.ends[y].text():this.join("text")},t.mathspeak=function(){var s="",a={};return this.controller&&(a=this.controller.options.autoOperatorNames),this.foldChildren([],function(t,e){var n,i,r;return e.isPartOfOperator?s+=e.mathspeak():(""!==s&&(a!=={}&&0<a._maxLength&&("string"==typeof(n=a[s.toLowerCase()])&&(s=n)),t.push(s+" "),s=""),i=e.mathspeak(),r=e.ctrlSeq,isNaN(r)&&(i=" "+i,"."!==r&&(i+=" ")),t.push(i)),t}).join("").replace(/ +(?= )/g,"")},t.ariaLabel="block",t.keystroke=function(t,e,n){return!n.options.spaceBehavesLikeTab||"Spacebar"!==t&&"Shift-Spacebar"!==t?i.keystroke.apply(this,arguments):(e.preventDefault(),void n.escapeDir("Shift-Spacebar"===t?y:L,t,e))},t.moveOutOf=function(t,e,n){!(n&&this.parent[n+"Into"])&&this[t]?(e.insAtDirEnd(-t,this[t]),H.queueDirEndOf(-t).queue(e.parent,!0)):(e.insDirOf(t,this.parent),H.queueDirOf(t).queue(this.parent))},t.selectOutOf=function(t,e){e.insDirOf(t,this.parent)},t.deleteOutOf=function(t,e){e.unwrapGramp()},t.seek=function(t,e){var n=this.ends[L];if(!n||n.jQ.offset().left+n.jQ.outerWidth()<t)return e.insAtRightEnd(this);if(t<this.ends[y].jQ.offset().left)return e.insAtLeftEnd(this);for(;t<n.jQ.offset().left;)n=n[y];return n.seek(t,e)},t.chToCmd=function(t,e){var n;return t.match(/^[a-eg-zA-Z]$/)?xt(t):/^\d$/.test(t)?yt(t):e&&e.typingSlashWritesDivisionSymbol&&"/"===t?j[""](t):e&&e.typingAsteriskWritesTimesSymbol&&"*"===t?j[""](t):e&&e.typingPercentWritesPercentOf&&"%"===t?j.percentof(t):((n=Q[t]||j[t])?n:vt)(t)},t.write=function(t,e){var n=this.chToCmd(e,t.options);t.selection&&n.replaces(t.replaceSelection()),n.createLeftOf(t.show()),"/"===e?H.alert("over"):H.alert(n.mathspeak({createdLeftOf:t}))},t.focus=function(){return this.jQ.addClass("dcg-mq-hasCursor"),this.jQ.removeClass("dcg-mq-empty"),this},t.blur=function(){return this.jQ.removeClass("dcg-mq-hasCursor"),this.isEmpty()&&(this.jQ.addClass("dcg-mq-empty"),this.isEmptyParens()?this.jQ.addClass("dcg-mq-empty-parens"):this.isEmptySquareBrackets()&&this.jQ.addClass("dcg-mq-empty-square-brackets")),this}});A.StaticMath=function(i){return r(i.AbstractMathQuill,function(t,n){this.RootBlock=qt,t.__mathquillify=function(t,e){return this.config(t),n.__mathquillify.call(this,"dcg-mq-math-mode"),this.__controller.delegateMouseEvents(),this.__controller.staticMathTextareaEvents(),this},t.init=function(){n.init.apply(this,arguments);var e=this.innerFields=[];this.__controller.root.postOrder(function(t){t.registerInnerField(e,i.MathField)})},t.latex=function(){var e,t=n.latex.apply(this,arguments);return 0<arguments.length&&(e=this.innerFields=[],this.__controller.root.postOrder(function(t){t.registerInnerField(e,i.MathField)})),t},t.setAriaLabel=function(t){this.__controller.ariaLabel="string"==typeof t?t:"";var e="Math Input"!==this.__controller.ariaLabel?this.__controller.ariaLabel+": ":"";return this.__controller.container.attr("aria-label",e+this.__controller.root.mathspeak().trim()),this},t.getAriaLabel=function(){return this.__controller.ariaLabel||""}})};var wt=r(qt,G);A.MathField=function(t){return r(t.EditableField,function(t,n){this.RootBlock=wt,t.__mathquillify=function(t,e){return this.config(t),1<e&&(this.__controller.root.reflow=k),n.__mathquillify.call(this,"dcg-mq-editable-field dcg-mq-math-mode"),delete this.__controller.root.reflow,this}})};var kt=r(gt,function(t,e){t.finalizeTree=t.siblingDeleted=t.siblingCreated=function(t,e){e!==y&&this[L]instanceof kt||this.fixDigitGrouping(t)},t.fixDigitGrouping=function(t){if(t.enableDigitGrouping){var e=this,n=this,i=0,r=[],s="\\ ",a=e;do{if(/^[0-9]$/.test(a.ctrlSeq))e=a;else if(a.ctrlSeq===s)e=a,i+=1;else{if("."!==a.ctrlSeq)break;e=a,r.push(a)}}while(a=e[y]);for(;a=n[L];)if(/^[0-9]$/.test(a.ctrlSeq))n=a;else if(a.ctrlSeq===s)n=a,i+=1;else{if("."!==a.ctrlSeq)break;n=a,r.push(a)}for(;n!==e&&e.ctrlSeq===s;)e=e[L],--i;for(;n!==e&&n.ctrlSeq===s;)n=n[y],--i;e===n&&e.ctrlSeq===s||(0<i||1<r.length?this.removeGroupingBetween(e,n):r[0]?(r[0]!==e&&this.addGroupingBetween(r[0][y],e),r[0]!==n&&this.removeGroupingBetween(r[0][L],n)):this.addGroupingBetween(n,e))}},t.removeGroupingBetween=function(t,e){var n=t;do{if(n.setGroupingClass(g),n===e)break}while(n=n[L])},t.addGroupingBetween=function(t,e){for(var n=t,i=0,r=0,n=t;n&&(r+=1,n!==e);)n=n[y];var s=r%3;0===s&&(s=3);for(n=t;n;){i+=1;var a=g;if(4<=r&&(i===r?a="dcg-mq-group-leading-"+s:i%3==0&&i!==r&&(a="dcg-mq-group-start"),a=a||"dcg-mq-group-other"),n.setGroupingClass(a),n===e)break;n=n[y]}},t.setGroupingClass=function(t){this._groupingClass!==t&&(this._groupingClass&&this.jQ.removeClass(this._groupingClass),t&&this.jQ.addClass(t),this._groupingClass=t)}}),yt=r(kt,function(t,i){t.init=function(t,e,n){i.init.call(this,t,'<span class="dcg-mq-digit">'+(e||t)+"</span>",g,n)},t.createLeftOf=function(t){t.options.autoSubscriptNumerals&&t.parent!==t.parent.parent.sub&&(t[y]instanceof Lt&&!1!==t[y].isItalic||t[y]instanceof Nt&&t[y][y]instanceof Lt&&!1!==t[y][y].isItalic)?(j._().createLeftOf(t),i.createLeftOf.call(this,t),t.insRightOf(t.parent.parent)):i.createLeftOf.call(this,t)},t.mathspeak=function(t){if(t&&t.createdLeftOf){var e=t.createdLeftOf;if(e.options.autoSubscriptNumerals&&e.parent!==e.parent.parent.sub&&(e[y]instanceof Lt&&!1!==e[y].isItalic||e[y]instanceof Nt&&e[y][y]instanceof Lt&&!1!==e[y][y].isItalic))return"Subscript "+i.mathspeak.call(this)+" Baseline"}return i.mathspeak.apply(this,arguments)}}),Lt=r(gt,function(t,n){t.init=function(t,e){n.init.call(this,t,"<var>"+(e||t)+"</var>")},t.text=function(){var t=this.ctrlSeq;return this.isPartOfOperator?"\\"==t[0]?t=t.slice(1,t.length):" "==t[t.length-1]&&(t=t.slice(0,-1)):(!this[y]||this[y]instanceof Lt||this[y]instanceof bt||"\\ "===this[y].ctrlSeq||(t="*"+t),!this[L]||this[L]instanceof bt||this[L]instanceof Nt||(t+="*")),t},t.mathspeak=function(){var t=this.ctrlSeq;return this.isPartOfOperator||1!==t.length?n.mathspeak.call(this):'"'+t+'"'}});B.p.autoCommands={_maxLength:0},M.autoCommands=function(t){if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(var e=t.split(" "),n={},i=0,r=0;r<e.length;r+=1){var s=e[r];if(s.length<2)throw'autocommand "'+s+'" not minimum length of 2';if(j[s]===Tt)throw'"'+s+'" is a built-in operator name';n[s]=1,i=o(i,s.length)}return n._maxLength=i,n},B.p.autoParenthesizedFunctions={_maxLength:0},M.autoParenthesizedFunctions=function(t){if(!/^[a-z]+(?: [a-z]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of only letters';for(var e=t.split(" "),n={},i=0,r=0;r<e.length;r+=1){var s=e[r];if(s.length<2)throw'autocommand "'+s+'" not minimum length of 2';n[s]=1,i=o(i,s.length)}return n._maxLength=i,n};var xt=r(Lt,function(t,e){function d(t){return!t||("."===t.ctrlSeq||(t instanceof bt||t instanceof Gt))}t.init=function(t){return e.init.call(this,this.letter=t)},t.checkAutoCmds=function(t){var e=t.options.autoCommands,n=e._maxLength;if(0<n){for(var i="",r=this,s=0;r instanceof xt&&r.ctrlSeq===r.letter&&s<n;)i=r.letter+i,r=r[y],s+=1;for(;i.length;){if(e.hasOwnProperty(i)){for(s=1,r=this;s<i.length;s+=1,r=r[y]);return T(r,this).remove(),t[y]=r[y],j[i](i).createLeftOf(t)}i=i.slice(1)}}},t.autoParenthesize=function(t){var e=t.parent.ends[L];if(!(e&&e instanceof Yt&&"\\left("===e.ctrlSeq||this.isParentSimpleSubscript())){for(var n="",i=this,r=0,s=t.options.autoParenthesizedFunctions,a=s._maxLength,o=t.options.autoOperatorNames;i instanceof xt&&r<a;)n=i.letter+n,i=i[y],r+=1;for(;n.length;){if(s.hasOwnProperty(n)&&o.hasOwnProperty(n))return t.parent.write(t,"(");n=n.slice(1)}}},t.createLeftOf=function(t){e.createLeftOf.apply(this,arguments),this.checkAutoCmds(t),this.autoParenthesize(t)},t.italicize=function(t){return this.isItalic=t,this.isPartOfOperator=!t,this.jQ.toggleClass("dcg-mq-operator-name",!t),this},t.finalizeTree=t.siblingDeleted=t.siblingCreated=function(t,e){e!==y&&this[L]instanceof xt||this.autoUnItalicize(t)},t.autoUnItalicize=function(t){var e=t.autoOperatorNames;if(0!==e._maxLength&&!this.isParentSimpleSubscript()){for(var n=this.letter,i=this[y];i instanceof xt;i=i[y])n=i.letter+n;for(var r=this[L];r instanceof xt;r=r[L])n+=r.letter;T(i[L]||this.parent.ends[y],r[y]||this.parent.ends[L]).each(function(t){t.italicize(!0).jQ.removeClass("dcg-mq-first dcg-mq-last dcg-mq-followed-by-supsub"),t.ctrlSeq=t.letter});t:for(var s=0,a=i[L]||this.parent.ends[y];s<n.length;s+=1,a=a[L])for(var o=m(e._maxLength,n.length-s);0<o;--o){var c=n.slice(s,s+o);if(e.hasOwnProperty(c)){for(var l=0,u=a;l<o;l+=1,u=u[L]){u.italicize(!1);var h=u}var f,p=Ot.hasOwnProperty(c);a.ctrlSeq=(p?"\\":"\\operatorname{")+a.ctrlSeq,h.ctrlSeq+=p?" ":"}",Ct.hasOwnProperty(c)&&h[y][y][y].jQ.addClass("dcg-mq-last"),d(a[y])||a.jQ.addClass("dcg-mq-first"),d(h[L])||(h[L]instanceof Nt?((f=h[L]).siblingCreated=f.siblingDeleted=function(){f.jQ.toggleClass("dcg-mq-after-operator-name",!(f[L]instanceof Yt))})():h.jQ.toggleClass("dcg-mq-last",!(h[L]instanceof Yt))),s+=o-1,a=h;continue t}}}}}),Ot={},St=B.p.autoOperatorNames={_maxLength:9},Ct={limsup:1,liminf:1,projlim:1,injlim:1};!function(){for(var t="arg deg det dim exp gcd hom inf ker lg lim ln log max min sup limsup liminf injlim projlim Pr".split(" "),e=0;e<t.length;e+=1)Ot[t[e]]=St[t[e]]=1;for(var n="sin cos tan arcsin arccos arctan sinh cosh tanh sec csc cot coth".split(" "),e=0;e<n.length;e+=1)Ot[n[e]]=1;for(var i="sin cos tan sec cosec csc cotan cot ctg".split(" "),e=0;e<i.length;e+=1)St[i[e]]=St["arc"+i[e]]=St[i[e]+"h"]=St["ar"+i[e]+"h"]=St["arc"+i[e]+"h"]=1;for(var r="gcf hcf lcm proj span".split(" "),e=0;e<r.length;e+=1)St[r[e]]=1}(),M.autoOperatorNames=function(t){if("string"!=typeof t)throw'"'+t+'" not a space-delimited list';if(!/^[a-z\|\-]+(?: [a-z\|\-]+)*$/i.test(t))throw'"'+t+'" not a space-delimited list of letters or "|"';for(var e=t.split(" "),n={},i=0,r=0;r<e.length;r+=1){var s=e[r];if(s.length<2)throw'"'+s+'" not minimum length of 2';if(s.indexOf("|")<0)n[s]=s,i=o(i,s.length);else{var a=s.split("|");if(2<a.length)throw'"'+s+'" has more than 1 mathspeak delimiter';if(a[0].length<2)throw'"'+s[0]+'" not minimum length of 2';n[a[0]]=a[1].replace(/-/g," "),i=o(i,a[0].length)}}return n._maxLength=i,n};var Tt=r(gt,function(t,e){t.init=function(t){this.ctrlSeq=t},t.createLeftOf=function(t){for(var e=this.ctrlSeq,n=0;n<e.length;n+=1)xt(e.charAt(n)).createLeftOf(t)},t.parser=function(){for(var t=this.ctrlSeq,e=qt(),n=0;n<t.length;n+=1)xt(t.charAt(n)).adopt(e,e.ends[L],0);return W.succeed(e.children())}});for(var jt in St)St.hasOwnProperty(jt)&&(j[jt]=Tt);j.operatorname=r(mt,function(t){t.createLeftOf=k,t.numBlocks=function(){return 1},t.parser=function(){return ft.block.map(function(t){var e=!0,n="",i=t.children();return i.each(function(t){t instanceof xt?n+=t.letter:e=!1}),e&&"ans"===n?j[n](n):i})}}),j.f=r(xt,function(t,e){t.init=function(){gt.p.init.call(this,this.letter="f",'<var class="dcg-mq-f">f</var>')},t.italicize=function(t){return this.jQ.html("f").toggleClass("dcg-mq-f",t),e.italicize.apply(this,arguments)}}),j[" "]=j.space=r(kt,function(t,e){t.init=function(){e.init.call(this,"\\ ","<span>&nbsp;</span>"," ")}}),j["."]=r(kt,function(t,e){t.init=function(){e.init.call(this,".",'<span class="dcg-mq-digit">.</span>',".")}}),j["'"]=j.prime=s(vt,"'","&prime;","prime"),j[""]=j.dprime=s(vt,"","&Prime;","double prime"),j.backslash=s(vt,"\\backslash ","\\","backslash"),Q["\\"]||(Q["\\"]=j.backslash),j.$=s(vt,"\\$","$","dollar"),j.square=s(vt,"\\square ","","square"),j.mid=s(vt,"\\mid ","","mid");var Qt=r(gt,function(t,n){t.init=function(t,e){n.init.call(this,t,'<span class="dcg-mq-nonSymbola">'+(e||t)+"</span>")}});j["@"]=Qt,j["&"]=s(Qt,"\\&","&amp;","and"),j["%"]=r(Qt,function(t,n){t.init=function(){n.init.call(this,"\\%","%","percent")},t.parser=function(){var t=W.optWhitespace,e=W.string;return t.then(e("\\operatorname{of}").map(function(){return j.percentof()})).or(n.parser.call(this))}}),j[""]=j.parallel=s(vt,"\\parallel ","&#x2225;","parallel"),j[""]=j.nparallel=s(vt,"\\nparallel ","&#x2226;","not parallel"),j[""]=j.perp=s(vt,"\\perp ","&#x27C2;","perpendicular"),j.alpha=j.beta=j.gamma=j.delta=j.zeta=j.eta=j.theta=j.iota=j.kappa=j.mu=j.nu=j.xi=j.rho=j.sigma=j.tau=j.chi=j.psi=j.omega=r(Lt,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}}),j.phi=s(Lt,"\\phi ","&#981;","phi"),j.phiv=j.varphi=s(Lt,"\\varphi ","&phi;","phi"),j.epsilon=s(Lt,"\\epsilon ","&#1013;","epsilon"),j.epsiv=j.varepsilon=s(Lt,"\\varepsilon ","&epsilon;","epsilon"),j.piv=j.varpi=s(Lt,"\\varpi ","&piv;","piv"),j.sigmaf=j.sigmav=j.varsigma=s(Lt,"\\varsigma ","&sigmaf;","sigma"),j.thetav=j.vartheta=j.thetasym=s(Lt,"\\vartheta ","&thetasym;","theta"),j.upsilon=j.upsi=s(Lt,"\\upsilon ","&upsilon;","upsilon"),j.gammad=j.Gammad=j.digamma=s(Lt,"\\digamma ","&#989;","gamma"),j.kappav=j.varkappa=s(Lt,"\\varkappa ","&#1008;","kappa"),j.rhov=j.varrho=s(Lt,"\\varrho ","&#1009;","rho"),j.pi=j[""]=s(Qt,"\\pi ","&pi;","pi"),j.lambda=s(Qt,"\\lambda ","&lambda;","lambda"),j.Upsilon=j.Upsi=j.upsih=j.Upsih=s(gt,"\\Upsilon ",'<var style="font-family: serif">&upsih;</var>',"capital upsilon"),j.Gamma=j.Delta=j.Theta=j.Lambda=j.Xi=j.Pi=j.Sigma=j.Phi=j.Psi=j.Omega=j.forall=r(vt,function(t,e){t.init=function(t){e.init.call(this,"\\"+t+" ","&"+t+";")}});var _t=r(mt,function(t){t.init=function(t){this.latex=t},t.createLeftOf=function(t){var e=ft.parse(this.latex);e.children().adopt(t.parent,t[y],t[L]),t[y]=e.ends[L],e.jQize().insertBefore(t.jQ),e.finalizeInsert(t.options,t),e.ends[L][L].siblingCreated&&e.ends[L][L].siblingCreated(t.options,y),e.ends[y][y].siblingCreated&&e.ends[y][y].siblingCreated(t.options,L),t.parent.bubble(function(t){t.reflow()})},t.mathspeak=function(){return ft.parse(this.latex).mathspeak()},t.parser=function(){var t=ft.parse(this.latex).children();return W.succeed(t)}});j[""]=s(_t,"^0"),j[""]=s(_t,"^1"),j[""]=s(_t,"^2"),j[""]=s(_t,"^3"),j[""]=s(_t,"^4"),j[""]=s(_t,"^5"),j[""]=s(_t,"^6"),j[""]=s(_t,"^7"),j[""]=s(_t,"^8"),j[""]=s(_t,"^9"),j[""]=s(_t,"\\frac14"),j[""]=s(_t,"\\frac12"),j[""]=s(_t,"\\frac34"),j[""]=s(_t,"\\sqrt{}");var Et=r(bt,function(t){t.init=vt.prototype.init,t.contactWeld=t.siblingCreated=t.siblingDeleted=function(t,e){if(e!==L)return this.jQ[0].className=function t(e){return e[y]?e[y]instanceof bt||/^(\\ )|[,;:\(\[]$/.test(e[y].ctrlSeq)?"":"dcg-mq-binary-operator":e.parent&&e.parent.parent&&e.parent.parent.isStyleBlock()?t(e.parent.parent):""}(this),this}});j["+"]=s(Et,"+","+","plus"),j[""]=j[""]=j[""]=j["-"]=s(Et,"-","&minus;","minus"),j[""]=j.pm=j.plusmn=j.plusminus=s(Et,"\\pm ","&plusmn;","plus-or-minus"),j.mp=j.mnplus=j.minusplus=s(Et,"\\mp ","&#8723;","minus-or-plus"),Q["*"]=j.sdot=j.cdot=s(bt,"\\cdot ","&middot;","*","times");var Dt=r(bt,function(t,i){t.init=function(t,e){this.data=t;var n=(this.strict=e)?"Strict":"";i.init.call(this,t["ctrlSeq"+n],t["html"+n],t["text"+n],t["mathspeak"+n])},t.swap=function(t){var e=(this.strict=t)?"Strict":"";this.ctrlSeq=this.data["ctrlSeq"+e],this.jQ.html(this.data["html"+e]),this.textTemplate=[this.data["text"+e]],this.mathspeakName=this.data["mathspeak"+e]},t.deleteTowards=function(t,e){if(t===y&&!this.strict)return this.swap(!0),void this.bubble(function(t){t.reflow()});i.deleteTowards.apply(this,arguments)}}),At={ctrlSeq:"\\le ",html:"&le;",text:"",mathspeak:"less than or equal to",ctrlSeqStrict:"<",htmlStrict:"&lt;",textStrict:"<",mathspeakStrict:"less than"},Bt={ctrlSeq:"\\ge ",html:"&ge;",text:"",mathspeak:"greater than or equal to",ctrlSeqStrict:">",htmlStrict:"&gt;",textStrict:">",mathspeakStrict:"greater than"};j["<"]=j.lt=s(Dt,At,!0),j[">"]=j.gt=s(Dt,Bt,!0),j[""]=j.le=j.leq=s(Dt,At,!1),j[""]=j.ge=j.geq=s(Dt,Bt,!1),j.infty=j.infin=j.infinity=s(vt,"\\infty ","&infin;","infinity"),j[""]=j.ne=j.neq=s(bt,"\\ne ","&ne;","not equal");var Mt=r(bt,function(t,e){t.init=function(){e.init.call(this,"=","=","=","equals")},t.createLeftOf=function(t){if(t[y]instanceof Dt&&t[y].strict)return t[y].swap(!1),void t[y].bubble(function(t){t.reflow()});e.createLeftOf.apply(this,arguments)}});j["="]=Mt,j[""]=j.times=s(bt,"\\times ","&times;","[x]","times"),j[""]=j.div=j.divide=j.divides=s(bt,"\\div ","&divide;","[/]","over");var Rt=r(bt,function(t,n){t.init=function(){n.init.call(this,"\\sim ","~","~","tilde")},t.createLeftOf=function(t){if(t[y]instanceof Rt){var e=t[y];return t[y]=e[y],e.remove(),It().createLeftOf(t),void t[y].bubble(function(t){t.reflow()})}n.createLeftOf.apply(this,arguments)}}),It=r(bt,function(t,i){t.init=function(){i.init.call(this,"\\approx ","&approx;","","approximately equal")},t.deleteTowards=function(t,e){if(t===y){var n=e[y];return T(n,this).remove(),e[y]=n[y],Rt().createLeftOf(e),void e[y].bubble(function(t){t.reflow()})}i.deleteTowards.apply(this,arguments)}});Q["~"]=j.sim=Rt,j[""]=j.approx=It;var zt={sqrt:{html:'<svg preserveAspectRatio="none" viewBox="0 0 32 54"><path d="M0 33 L7 27 L12.5 47 L13 47 L30 0 L32 0 L13 54 L11 54 L4.5 31 L0 33" /></svg>'},"|":{width:".4em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M4.4 0 L4.4 54 L5.6 54 L5.6 0" /></svg>'},"[":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M8 0 L3 0 L3 24 L8 24 L8 23 L4 23 L4 1 L8 1" /></svg>'},"]":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 11 24"><path d="M3 0 L8 0 L8 24 L3 24 L3 23 L7 23 L7 1 L3 1" /></svg>'},"(":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M85 0 A61 101 0 0 0 85 186 L75 186 A75 101 0 0 1 75 0" /></svg>'},")":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="3 0 106 186"><path d="M24 0 A61 101 0 0 1 24 186 L34 186 A75 101 0 0 0 34 0" /></svg>'},"{":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M170 0 L170 6 A47 52 0 0 0 123 60 L123 127 A35 48 0 0 1 88 175 A35 48 0 0 1 123 223 L123 290 A47 52 0 0 0 170 344 L170 350 L160 350 A58 49 0 0 1 102 301 L103 220 A45 40 0 0 0 58 180 L58 170 A45 40 0 0 0 103 130 L103 49 A58 49 0 0 1 161 0" /></svg>'},"}":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="10 0 210 350"><path d="M60 0 L60 6 A47 52 0 0 1 107 60 L107 127 A35 48 0 0 0 142 175 A35 48 0 0 0 107 223 L107 290 A47 52 0 0 1 60 344 L60 350 L70 350 A58 49 0 0 0 128 301 L127 220 A45 40 0 0 1 172 180 L172 170 A45 40 0 0 1 127 130 L127 49 A58 49 0 0 0 70 0" /></svg>'},"&#8741;":{width:".7em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L3.2 54 L4 54 L4 0 M6.8 0 L6.8 54 L6 54 L6 0" /></svg>'},"&lang;":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M6.8 0 L3.2 27 L6.8 54 L7.8 54 L4.2 27 L7.8 0" /></svg>'},"&rang;":{width:".55em",html:'<svg preserveAspectRatio="none" viewBox="0 0 10 54"><path d="M3.2 0 L6.8 27 L3.2 54 L2.2 54 L5.8 27 L2.2 0" /></svg>'}},Ft=r(mt,function(r,s){r.init=function(t,e,n,i){s.init.call(this,t,"<"+e+" "+n+">&0</"+e+">"),r.ariaLabel=i||t.replace(/^\\/,""),r.mathspeakTemplate=["Start"+r.ariaLabel+",","End"+r.ariaLabel]}});j.mathrm=s(Ft,"\\mathrm","span",'class="dcg-mq-roman dcg-mq-font"',"Roman Font"),j.mathit=s(Ft,"\\mathit","i",'class="dcg-mq-font"',"Italic Font"),j.mathbf=s(Ft,"\\mathbf","b",'class="dcg-mq-font"',"Bold Font"),j.mathsf=s(Ft,"\\mathsf","span",'class="dcg-mq-sans-serif dcg-mq-font"',"Serif Font"),j.mathtt=s(Ft,"\\mathtt","span",'class="dcg-mq-monospace dcg-mq-font"',"Math Text"),j.underline=s(Ft,"\\underline","span",'class="dcg-mq-non-leaf dcg-mq-underline"',"Underline"),j.overline=j.bar=s(Ft,"\\overline","span",'class="dcg-mq-non-leaf dcg-mq-overline"',"Overline"),j.overrightarrow=s(Ft,"\\overrightarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-right"',"Over Right Arrow"),j.overleftarrow=s(Ft,"\\overleftarrow","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-left"',"Over Left Arrow"),j.overleftrightarrow=s(Ft,"\\overleftrightarrow ","span",'class="dcg-mq-non-leaf dcg-mq-overarrow dcg-mq-arrow-leftright"',"Over Left and Right Arrow"),j.overarc=s(Ft,"\\overarc","span",'class="dcg-mq-non-leaf dcg-mq-overarc"',"Over Arc");j.textcolor=r(mt,function(t,r){t.setColor=function(t){this.color=t,this.htmlTemplate='<span class="dcg-mq-textcolor" style="color:'+t+'">&0</span>'},t.latex=function(){return"\\textcolor{"+this.color+"}{"+this.blocks[0].latex()+"}"},t.parser=function(){var e=this,t=W.optWhitespace,n=W.string,i=W.regex;return t.then(n("{")).then(i(/^[#\w\s.,()%-]*/)).skip(n("}")).then(function(t){return e.setColor(t),r.parser.call(e)})},t.isStyleBlock=function(){return!0}}),j.class=r(mt,function(t,i){t.parser=function(){var e=this,t=W.string,n=W.regex;return W.optWhitespace.then(t("{")).then(n(/^[-\w\s\\\xA0-\xFF]*/)).skip(t("}")).then(function(t){return e.cls=t||"",e.htmlTemplate='<span class="dcg-mq-class '+t+'">&0</span>',i.parser.call(e)})},t.latex=function(){return"\\class{"+this.cls+"}{"+this.blocks[0].latex()+"}"},t.isStyleBlock=function(){return!0}});var Nt=r(mt,function(t,i){t.ctrlSeq="_{...}^{...}",t.createLeftOf=function(t){if(this.replacedFragment||t[y]||!t.options.supSubsRequireOperand)return i.createLeftOf.apply(this,arguments)},t.contactWeld=function(t){for(var i=y;i;i=i===y&&L)if(this[i]instanceof Nt){for(var e="sub";e;e="sub"===e&&"sup"){var n,r,s=this[e],a=this[i][e];s&&(a?s.isEmpty()?r=v(a,0,a.ends[y]):(s.jQ.children().insAtDirEnd(-i,a.jQ),n=s.children().disown(),r=v(a,n.ends[L],a.ends[y]),i===y?n.adopt(a,a.ends[L],0):n.adopt(a,0,a.ends[y])):this[i].addBlock(s.disown()),this.placeCursor=function(e,n){return function(t){t.insAtDirEnd(-i,e||n)}}(a,s))}this.remove(),t&&t[y]===this&&(i===L&&r?r[y]?t.insRightOf(r[y]):t.insAtLeftEnd(r.parent):t.insRightOf(this[i]));break}},B.p.charsThatBreakOutOfSupSub="",t.finalizeTree=function(){this.ends[y].write=function(t,e){if(t.options.autoSubscriptNumerals&&this===this.parent.sub){if("_"===e)return;var n=this.chToCmd(e,t.options);return n instanceof gt?t.deleteSelection():t.clearSelection().insRightOf(this.parent),n.createLeftOf(t.show()),void H.queue("Baseline").alert(n.mathspeak({createdLeftOf:t}))}t[y]&&!t[L]&&!t.selection&&-1<t.options.charsThatBreakOutOfSupSub.indexOf(e)&&(t.insRightOf(this.parent),H.queue("Baseline")),qt.p.write.apply(this,arguments)}},t.moveTowards=function(t,e,n){e.options.autoSubscriptNumerals&&!this.sup?e.insDirOf(t,this):i.moveTowards.apply(this,arguments)},t.deleteTowards=function(t,e){var n;e.options.autoSubscriptNumerals&&this.sub?((n=this.sub.ends[-t])instanceof gt?n.remove():n&&n.deleteTowards(t,e.insAtDirEnd(-t,this.sub)),this.sub.isEmpty()&&(this.sub.deleteOutOf(y,e.insAtLeftEnd(this.sub)),this.sup&&e.insDirOf(-t,this))):i.deleteTowards.apply(this,arguments)},t.latex=function(){function t(t,e){var n=e&&e.latex();return e?t+"{"+(n||" ")+"}":""}return t("_",this.sub)+t("^",this.sup)},t.addBlock=function(t){"sub"===this.supsub?((this.sup=this.upInto=this.sub.upOutOf=t).adopt(this,this.sub,0).downOutOf=this.sub,t.jQ=x('<span class="dcg-mq-sup"/>').append(t.jQ.children()).prependTo(this.jQ),S.linkElementByBlockNode(t.jQ[0],t)):((this.sub=this.downInto=this.sup.downOutOf=t).adopt(this,0,this.sup).upOutOf=this.sup,t.jQ=x('<span class="dcg-mq-sub"></span>').append(t.jQ.children()).appendTo(this.jQ.removeClass("dcg-mq-sup-only")),S.linkElementByBlockNode(t.jQ[0],t),this.jQ.append('<span style="display:inline-block;width:0">&#8203;</span>'));for(var e=0;e<2;e+=1)!function(i,r,s,a){i[r].deleteOutOf=function(t,e){var n;e.insDirOf(this[t]?-t:t,this.parent),this.isEmpty()||(n=this.ends[t],this.children().disown().withDirAdopt(t,e.parent,e[t],e[-t]).jQ.insDirOf(-t,e.jQ),e[-t]=n),i.supsub=s,delete i[r],delete i[a+"Into"],i[s][a+"OutOf"]=Pt,delete i[s].deleteOutOf,"sub"===r&&x(i.jQ.addClass("dcg-mq-sup-only")[0].lastChild).remove(),this.remove()}}(this,"sub sup".split(" ")[e],"sup sub".split(" ")[e],"down up".split(" ")[e])}});function Pt(t){var e=this.parent,n=t;do{if(n[L])return t.insLeftOf(e);n=n.parent.parent}while(n!==e);t.insRightOf(e)}j.subscript=j._=r(Nt,function(t,e){t.supsub="sub",t.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["_"],t.mathspeakTemplate=["Subscript,",", Baseline"],t.ariaLabel="subscript",t.finalizeTree=function(){this.downInto=this.sub=this.ends[y],this.sub.upOutOf=Pt,e.finalizeTree.call(this)}}),j.superscript=j.supscript=j["^"]=r(Nt,function(t,e){t.supsub="sup",t.htmlTemplate='<span class="dcg-mq-supsub dcg-mq-non-leaf dcg-mq-sup-only"><span class="dcg-mq-sup">&0</span></span>',t.textTemplate=["^"],t.mathspeakTemplate=["Superscript,",", Baseline"],t.ariaLabel="superscript",t.finalizeTree=function(){this.upInto=this.sup=this.ends[L],this.sup.downOutOf=Pt,e.finalizeTree.call(this)}});var Gt=r(mt,function(r,e){r.init=function(t,e,n){r.ariaLabel=n||ctrlSeq.replace(/^\\/,"");var i='<span class="dcg-mq-large-operator dcg-mq-non-leaf"><span class="dcg-mq-to"><span>&1</span></span><big>'+e+'</big><span class="dcg-mq-from"><span>&0</span></span></span>';gt.prototype.init.call(this,t,i)},r.createLeftOf=function(t){e.createLeftOf.apply(this,arguments),t.options.sumStartsWithNEquals&&(xt("n").createLeftOf(t),Mt().createLeftOf(t))},r.latex=function(){function t(t){return"{"+(t||" ")+"}"}return this.ctrlSeq+"_"+t(this.ends[y].latex())+"^"+t(this.ends[L].latex())},r.mathspeak=function(){return"Start "+this.ariaLabel+" from "+this.ends[y].mathspeak()+" to "+this.ends[L].mathspeak()+", end "+this.ariaLabel+", "},r.parser=function(){for(var t=W.string,e=W.optWhitespace,n=W.succeed,i=ft.block,r=this,s=r.blocks=[qt(),qt()],a=0;a<s.length;a+=1)s[a].adopt(r,r.ends[L],0);return e.then(t("_").or(t("^"))).then(function(t){var e=s["_"===t?0:1];return i.then(function(t){return t.children().adopt(e,e.ends[L],0),n(r)})}).many().result(r)},r.finalizeTree=function(){this.ends[y].ariaLabel="lower bound",this.ends[L].ariaLabel="upper bound",this.downInto=this.ends[y],this.upInto=this.ends[L],this.ends[y].upOutOf=this.ends[L],this.ends[L].downOutOf=this.ends[y]}});j[""]=j.sum=j.summation=s(Gt,"\\sum ","&sum;","sum"),j[""]=j.prod=j.product=s(Gt,"\\prod ","&prod;","product"),j.coprod=j.coproduct=s(Gt,"\\coprod ","&#8720;","co product"),j[""]=j.int=j.integral=r(Gt,function(t,e){t.init=function(){t.ariaLabel="integral";gt.prototype.init.call(this,"\\int ",'<span class="dcg-mq-int dcg-mq-non-leaf"><big>&int;</big><span class="dcg-mq-supsub dcg-mq-non-leaf"><span class="dcg-mq-sup"><span class="dcg-mq-sup-inner">&1</span></span><span class="dcg-mq-sub">&0</span><span style="display:inline-block;width:0">&#8203</span></span></span>',"integral")},t.createLeftOf=mt.p.createLeftOf});var $t=j.frac=j.dfrac=j.cfrac=j.fraction=r(mt,function(t,e){t.ctrlSeq="\\frac",t.htmlTemplate='<span class="dcg-mq-fraction dcg-mq-non-leaf"><span class="dcg-mq-numerator">&0</span><span class="dcg-mq-denominator">&1</span><span style="display:inline-block;width:0">&#8203;</span></span>',t.textTemplate=["(",")/(",")"],t.finalizeTree=function(){this.upInto=this.ends[L].upOutOf=this.ends[y],this.downInto=this.ends[y].downOutOf=this.ends[L],this.ends[y].ariaLabel="numerator",this.ends[L].ariaLabel="denominator",1<this.getFracDepth()?this.mathspeakTemplate=["StartNestedFraction,","NestedOver",", EndNestedFraction"]:this.mathspeakTemplate=["StartFraction,","Over",", EndFraction"]},t.mathspeak=function(t){return t&&t.createdLeftOf?t.createdLeftOf.parent.mathspeak():e.mathspeak.apply(this,arguments)},t.getFracDepth=function(){var n=function(t,e){return t instanceof S&&t.ctrlSeq&&0<=t.ctrlSeq.toLowerCase().search("frac")&&(e+=1),t.parent?n(t.parent,e):e};return n(this,0)}}),Wt=j.over=Q["/"]=r($t,function(t,n){t.createLeftOf=function(t){if(!this.replacedFragment){var e=t[y];if(!t.options.typingSlashCreatesNewFraction)for(;e&&!(e instanceof bt||e instanceof(j.text||k)||e instanceof Gt||"\\ "===e.ctrlSeq||/^[,;:]$/.test(e.ctrlSeq));)e=e[y];e instanceof Gt&&e[L]instanceof Nt&&(e=e[L])[L]instanceof Nt&&e[L].ctrlSeq!=e.ctrlSeq&&(e=e[L]),e!==t[y]&&(this.replaces(T(e[L]||t.parent.ends[y],t[y])),t[y]=e)}n.createLeftOf.call(this,t)}});j.ans=r(gt,function(t,e){t.init=function(t){e.init.call(this,"\\operatorname{ans}",'<span class="dcg-mq-ans">ans</span>',"ans")}}),j.percent=j.percentof=r(gt,function(t,e){t.init=function(){e.init.call(this,"\\%\\operatorname{of}",'<span class="dcg-mq-nonSymbola dcg-mq-operator-name">% of </span>',"percent of")}});var Ut=j.sqrt=r(mt,function(t,e){t.ctrlSeq="\\sqrt",t.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-sqrt-container"><span class="dcg-mq-scaled dcg-mq-sqrt-prefix">'+zt.sqrt.html+'</span><span class="dcg-mq-non-leaf dcg-mq-sqrt-stem">&0</span></span>',t.textTemplate=["sqrt(",")"],t.mathspeakTemplate=["StartRoot,",", EndRoot"],t.ariaLabel="root",t.parser=function(){return ft.optBlock.then(function(n){return ft.block.map(function(t){var e=Vt();return e.blocks=[n,t],n.adopt(e,0,0),t.adopt(e,n,0),e})}).or(e.parser.call(this))}}),Vt=(j.hat=r(mt,function(t,e){t.ctrlSeq="\\hat",t.htmlTemplate='<span class="dcg-mq-non-leaf"><span class="dcg-mq-hat-prefix">^</span><span class="dcg-mq-hat-stem">&0</span></span>',t.textTemplate=["hat(",")"]}),j.nthroot=r(Ut,function(t,e){t.htmlTemplate='<span class="dcg-mq-nthroot-container dcg-mq-non-leaf"><sup class="dcg-mq-nthroot dcg-mq-non-leaf">&0</sup><span class="dcg-mq-scaled dcg-mq-sqrt-container"><span class="dcg-mq-sqrt-prefix dcg-mq-scaled">'+zt.sqrt.html+'</span><span class="dcg-mq-sqrt-stem dcg-mq-non-leaf">&1</span></span></span>',t.textTemplate=["sqrt[","](",")"],t.latex=function(){return"\\sqrt["+this.ends[y].latex()+"]{"+this.ends[L].latex()+"}"},t.mathspeak=function(){var t=this.ends[y].mathspeak(),e=this.ends[L].mathspeak();return this.ends[y].ariaLabel="Index",this.ends[L].ariaLabel="Radicand","3"===t?"Start Cube Root, "+e+", End Cube Root":"Root Index "+t+", Start Root, "+e+", End Root"}})),Ht=(j.cbrt=r(Vt,function(t,e){t.createLeftOf=function(t){e.createLeftOf.apply(this,arguments),yt("3").createLeftOf(t),t.controller.moveRight()}}),r(mt,function(t,r){t.init=function(t,e,n){var i='<span class="dcg-mq-non-leaf"><span class="dcg-mq-diacritic-above">'+e+'</span><span class="dcg-mq-diacritic-stem">&0</span></span>';r.init.call(this,t,i,n)}}));function Kt(t,e){t.jQadd=function(){e.jQadd.apply(this,arguments),this.delimjQs=this.jQ.children(":first").add(this.jQ.children(":last")),this.contentjQ=this.jQ.children(":eq(1)")}}j.vec=s(Ht,"\\vec","&rarr;",["vec(",")"]),j.tilde=s(Ht,"\\tilde","~",["tilde(",")"]);var Yt=r(r(mt,Kt),function(t,s){t.init=function(t,e,n,i,r){s.init.call(this,"\\left"+i,g,[e,n]),this.side=t,this.sides={},this.sides[y]={ch:e,ctrlSeq:i},this.sides[L]={ch:n,ctrlSeq:r}},t.numBlocks=function(){return 1},t.html=function(){var t=this.getSymbol(y),e=this.getSymbol(L);return this.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:'+t.width+'" class="dcg-mq-scaled dcg-mq-bracket-l dcg-mq-paren'+(this.side===L?" dcg-mq-ghost":"")+'">'+t.html+'</span><span style="margin-left:'+t.width+";margin-right:"+e.width+'" class="dcg-mq-bracket-middle dcg-mq-non-leaf">&0</span><span style="width:'+e.width+'" class="dcg-mq-scaled dcg-mq-bracket-r dcg-mq-paren'+(this.side===y?" dcg-mq-ghost":"")+'">'+e.html+"</span></span>",s.html.call(this)},t.getSymbol=function(t){return zt[this.sides[t||L].ch]||{width:"0",html:""}},t.latex=function(){return"\\left"+this.sides[y].ctrlSeq+this.ends[y].latex()+"\\right"+this.sides[L].ctrlSeq},t.mathspeak=function(t){var e=this.sides[y].ch,n=this.sides[L].ch;if("|"===e&&"|"===n)this.mathspeakTemplate=["StartAbsoluteValue,",", EndAbsoluteValue"],this.ariaLabel="absolute value";else{if(t&&t.createdLeftOf&&this.side){var i="";return this.side===y?i=this.textTemplate[0]:this.side===L&&(i=this.textTemplate[1]),(this.side===y?"left ":"right ")+Zt[i]}this.mathspeakTemplate=["left "+Zt[e]+",",", right "+Zt[n]],this.ariaLabel=Zt[e]+" block"}return s.mathspeak.call(this)},t.matchBrack=function(t,e,n){return n instanceof Yt&&n.side&&n.side!==-e&&(!t.restrictMismatchedBrackets||Xt[this.sides[this.side].ch]===n.sides[n.side].ch||{"(":"]","[":")"}[this.sides[y].ch]===n.sides[L].ch)&&n},t.closeOpposing=function(t){t.side=0,t.sides[this.side]=this.sides[this.side];var e=t.delimjQs.eq(this.side===y?0:1).removeClass("dcg-mq-ghost");this.replaceBracket(e,this.side)},t.createLeftOf=function(t){var e,n,i;this.replacedFragment||(e=t.options,n="|"===this.sides[y].ch?this.matchBrack(e,L,t[L])||this.matchBrack(e,y,t[y])||this.matchBrack(e,0,t.parent.parent):this.matchBrack(e,-this.side,t[-this.side])||this.matchBrack(e,-this.side,t.parent.parent)),n?(i=this.side=-n.side,this.closeOpposing(n),n===t.parent.parent&&t[i]&&T(t[i],t.parent.ends[i],-i).disown().withDirAdopt(-i,n.parent,n,n[i]).jQ.insDirOf(i,n.jQ),n.bubble(function(t){t.reflow()})):(i=(n=this).side,n.replacedFragment?n.side=0:t[-i]&&(n.replaces(T(t[-i],t.parent.ends[-i],i)),t[-i]=0),s.createLeftOf.call(n,t)),i===y?t.insAtLeftEnd(n.ends[y]):t.insRightOf(n)},t.placeCursor=k,t.unwrap=function(){this.ends[y].children().disown().adopt(this.parent,this,this[L]).jQ.insertAfter(this.jQ),this.remove()},t.deleteSide=function(t,e,n){var i=this.parent,r=this[t],s=i.ends[t];if(t===this.side)return this.unwrap(),void(r?n.insDirOf(-t,r):n.insAtDirEnd(t,i));var a=n.options,o=!this.side;if(this.side=-t,this.matchBrack(a,t,this.ends[y].ends[this.side])){this.closeOpposing(this.ends[y].ends[this.side]);var c=this.ends[y].ends[t];this.unwrap(),c.siblingCreated&&c.siblingCreated(n.options,t),r?n.insDirOf(-t,r):n.insAtDirEnd(t,i)}else{if(this.matchBrack(a,t,this.parent.parent))this.parent.parent.closeOpposing(this),this.parent.parent.unwrap();else{if(e&&o)return this.unwrap(),void(r?n.insDirOf(-t,r):n.insAtDirEnd(t,i));this.sides[t]={ch:Xt[this.sides[this.side].ch],ctrlSeq:Xt[this.sides[this.side].ctrlSeq]};var l=this.delimjQs.removeClass("dcg-mq-ghost").eq(t===y?0:1).addClass("dcg-mq-ghost");this.replaceBracket(l,t)}r?(c=this.ends[y].ends[t],T(r,s,-t).disown().withDirAdopt(-t,this.ends[y],c,0).jQ.insAtDirEnd(t,this.ends[y].jQ.removeClass("dcg-mq-empty")),c.siblingCreated&&c.siblingCreated(n.options,t),n.insDirOf(-t,r)):e?n.insDirOf(t,this):n.insAtDirEnd(t,this.ends[y])}},t.replaceBracket=function(t,e){var n=this.getSymbol(e);t.html(n.html).css("width",n.width),e===y?t.next().css("margin-left",n.width):t.prev().css("margin-right",n.width)},t.deleteTowards=function(t,e){this.deleteSide(-t,!1,e)},t.finalizeTree=function(){this.ends[y].deleteOutOf=function(t,e){this.parent.deleteSide(t,!0,e)},this.finalizeTree=this.intentionalBlur=function(){this.delimjQs.eq(this.side===y?1:0).removeClass("dcg-mq-ghost"),this.side=0}},t.siblingCreated=function(t,e){e===-this.side&&this.finalizeTree()}}),Xt={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{","\\{":"\\}","\\}":"\\{","&lang;":"&rang;","&rang;":"&lang;","\\langle ":"\\rangle ","\\rangle ":"\\langle ","|":"|","\\lVert ":"\\rVert ","\\rVert ":"\\lVert "},Zt={"&lang;":"angle-bracket","&rang;":"angle-bracket","|":"pipe"};function Jt(t,e,n){var e=e||t,i=Xt[t],r=Xt[e];Q[t]=s(Yt,y,t,i,e,r),Q[i]=s(Yt,L,t,i,e,r),Zt[t]=Zt[i]=n}Jt("(",null,"parenthesis"),Jt("[",null,"bracket"),Jt("{","\\{","brace"),j.langle=s(Yt,y,"&lang;","&rang;","\\langle ","\\rangle "),j.rangle=s(Yt,L,"&lang;","&rang;","\\langle ","\\rangle "),Q["|"]=s(Yt,y,"|","|","|","|"),j.lVert=s(Yt,y,"&#8741;","&#8741;","\\lVert ","\\rVert "),j.rVert=s(Yt,L,"&#8741;","&#8741;","\\lVert ","\\rVert "),j.left=r(mt,function(t){t.parser=function(){var t=W.regex,e=W.string,n=(W.succeed,W.optWhitespace);return n.then(t(/^(?:[([|]|\\\{|\\langle\b|\\lVert\b)/)).then(function(r){var s=r.replace(/^\\/,"");return"\\langle"==r&&(s="&lang;",r+=" "),"\\lVert"==r&&(s="&#8741;",r+=" "),ft.then(function(i){return e("\\right").skip(n).then(t(/^(?:[\])|]|\\\}|\\rangle\b|\\rVert\b)/)).map(function(t){var e=t.replace(/^\\/,"");"\\rangle"==t&&(e="&rang;",t+=" "),"\\rVert"==t&&(e="&#8741;",t+=" ");var n=Yt(0,s,e,r,t);return n.blocks=[i],i.adopt(n,0,0),n})})})}}),j.right=r(mt,function(t){t.parser=function(){return W.fail("unmatched \\right")}});var te=j.binom=j.binomial=r(r(mt,Kt),function(t,e){var n=zt["("],i=zt[")"];t.ctrlSeq="\\binom",t.htmlTemplate='<span class="dcg-mq-non-leaf dcg-mq-bracket-container"><span style="width:'+n.width+'" class="dcg-mq-paren dcg-mq-bracket-l dcg-mq-scaled">'+n.html+'</span><span style="margin-left:'+n.width+"; margin-right:"+i.width+';" class="dcg-mq-non-leaf dcg-mq-bracket-middle"><span class="dcg-mq-array dcg-mq-non-leaf"><span>&0</span><span>&1</span></span></span><span style="width:'+i.width+'" class="dcg-mq-paren dcg-mq-bracket-r dcg-mq-scaled">'+i.html+"</span></span>",t.textTemplate=["choose(",",",")"],t.mathspeakTemplate=["StartBinomial,","Choose",", EndBinomial"],t.ariaLabel="binomial"});j.choose=r(te,function(t){t.createLeftOf=Wt.prototype.createLeftOf});j.editable=j.MathQuillMathField=r(mt,function(t,r){t.ctrlSeq="\\MathQuillMathField",t.htmlTemplate='<span class="dcg-mq-editable-field"><span class="dcg-mq-root-block">&0</span></span>',t.parser=function(){var e=this,t=W.string,n=W.regex,i=W.succeed;return t("[").then(n(/^[a-z][a-z0-9]*/i)).skip(t("]")).map(function(t){e.name=t}).or(i()).then(r.parser.call(e))},t.finalizeTree=function(t){var e=D(this.ends[y],this.jQ,t);e.KIND_OF_MQ="MathField",e.editable=!0,e.createTextarea(),e.editablesTextareaEvents(),e.cursor.insAtRightEnd(e.root),G(e.root)},t.registerInnerField=function(t,e){t.push(t[this.name]=e(this.ends[y].controller))},t.latex=function(){return this.ends[y].latex()},t.text=function(){return this.ends[y].text()}});var ee=j.embed=r(gt,function(t,e){t.setOptions=function(t){function e(){return""}return this.text=t.text||e,this.htmlTemplate=t.htmlString||"",this.latex=t.latex||e,this},t.parser=function(){var n=this,t=W.string,i=W.regex,r=W.succeed;return t("{").then(i(/^[a-z][a-z0-9]*/i)).skip(t("}")).then(function(e){return t("[").then(i(/^[-\w\s]*/)).skip(t("]")).or(r()).map(function(t){return n.setOptions(I[e](t))})})}}),ne=t(1);for(var ie in ne)!function(t,e){"function"==typeof e?(F[t]=function(){return z(),e.apply(this,arguments)}).prototype=e.prototype:F[t]=e}(ie,ne[ie])}();
define("mathquill_src", ["jquery"], function(){});


define('loadcss!Symbola-basic', function(){});

define('loadcss!vendor/mathquill/mathquill-basic', function(){});
define('toplevel/mathquill',['require','testbridge','mathquill_src','loadcss!Symbola-basic','loadcss!vendor/mathquill/mathquill-basic'],function(require){"use strict";return require("testbridge"),require("mathquill_src"),require("loadcss!Symbola-basic"),require("loadcss!vendor/mathquill/mathquill-basic"),window.MathQuill.noConflict()});
define('main/mathquill-operators',["require","exports","config"],function(require,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAutoOperators=t.getAutoCommands=void 0;var n=["exp|exponent ln|natural-log log","total length mean median quantile quartile nCr nPr stats","stdev|standard-deviation stddev|standard-deviation","stdDev|standard-deviation stdevp|standard-deviation-population","stddevp|standard-deviation-population stdDevP|standard-deviation-population mad var|variance","varp|variance-population variance cov|co-variance corr|correlation spearman","lcm mcm gcd mcd gcf mod ceil|ceiling floor round abs|absolute-value min max sign|signum signum","sin|sine cos|cosine tan|tangent csc|co-secant sec|secant cot|co-tangent","sinh|hyperbolic-sine cosh|hyperbolic-cosine tanh|hyperbolic-tangent csch|hyperbolic-co-secant","sech|hyperbolic-secant coth|hyperbolic-co-tangent","arcsin|arc-sine arccos|arc-cosine arctan|arc-tangent arccsc|arc-co-secant arcsec|arc-secant","arccot|arc-co-tangent","arcsinh|hyperbolic-arc-sine arccosh|hyperbolic-arc-cosine arctanh|hyperbolic-arc-co-tangent","arccsch|hyperbolic-arc-co-secant arcsech|hyperbolic-arc-secant","arccoth|hyperbolic-arc-co-tangent","arsinh|hyperbolic-ar-sine arcosh|hyperbolic-ar-cosine artanh|hyperbolic-ar-co-tangent","arcsch|hyperbolic-ar-co-secant arsech|hyperbolic-ar-secant","arcoth|hyperbolic-ar-co-tangent","polygon","distance midpoint","sort shuffle join","erf|error-function","TTest|t-test ttest|t-test TScore|t-score tscore|t-score","iTTest|independent-t-test ittest|independent-t-test IndependentTTest","TScore|t-score Tscore|t-score tscore|t-score","normaldist|normal-distribution tdist|t-distribution poissondist|poisson-distribution","binomialdist|binomial-distribution","uniformdist|uniform-distribution","pdf cdf random inverseCdf inversecdf","histogram dotplot boxplot","pdf cdf"].join(" "),o=["det|determinant","inv|inverse","transpose","rref|reduced-row-echelon-form","trace"].join(" ");n+=" "+o,e.get("3d")&&(n+=" cube sphere cone dodecahedron octahedron tetrahedron");var r="alpha beta sqrt theta phi pi tau nthroot cbrt sum prod int ans percent infinity infty";t.getAutoCommands=function(t){return t&&t.disallowFrac?r:r+" frac"},t.getAutoOperators=function(t){var e=n;return t&&t.colorMethods&&(e+=" rgb hsv"),e}});
define('mathquill',['require','browser','jquery','toplevel/mathquill','main/mathquill-operators'],function(require){"use strict";var t=require("browser"),e=require("jquery"),r=require("toplevel/mathquill").getInterface(1),a=require("main/mathquill-operators");return r.config({leftRightIntoCmdGoes:"up",sumStartsWithNEquals:!0,supSubsRequireOperand:!0,charsThatBreakOutOfSupSub:"+-=<>*",autoCommands:a.getAutoCommands(),autoSubscriptNumerals:!0,restrictMismatchedBrackets:!0,typingPercentWritesPercentOf:!0,substituteTextarea:function(){return t.IS_IOS||t.IS_ANDROID?e('<span class="dcg-mathquill-input-span" tabindex=0 role="textbox" style="display:inline-block;height:1px;width:1px">')[0]:t.IS_WINDOWS&&t.IS_TOUCH?e("<textarea readonly>").on("keydown",function(){this.readOnly=!1,this.select()}).on("blur",function(){this.readOnly=!0})[0]:e("<textarea>")[0]},autoOperatorNames:a.getAutoOperators(),resetCursorOnBlur:!0,enableDigitGrouping:!0})});
define('core/types/graphmode',["require","exports"],function(require,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.PARAMETRIC_CURVE_3D=I.Z_3D=I.OBJECT3D=I.VISUALIZATION=I.NONE=I.IMPLICIT=I.POLYGONFILL=I.POLAR=I.PARAMETRIC=I.XYPOINT_MOVABLE=I.XYPOINT=I.Y=I.X=void 0,I.X=1,I.Y=2,I.XYPOINT=3,I.XYPOINT_MOVABLE=4,I.PARAMETRIC=5,I.POLAR=6,I.POLYGONFILL=7,I.IMPLICIT=8,I.NONE=10,I.VISUALIZATION=11,I.OBJECT3D=12,I.Z_3D=13,I.PARAMETRIC_CURVE_3D=14});
define('graphing/clipping',["require","exports","core/types/graphmode"],function(require,R,t){"use strict";function s(e,n,r,t){var i,A=[];t?(i=2,(s=n(l=e[0],E=e[1]))&&A.push(l,E)):(i=0,s=n(l=e[e.length-2],E=e[e.length-1]));for(var u=i;u<e.length;u+=2){var l,E,s,o=l,a=E,p=s;((s=n(l=e[u],E=e[u+1]))||p)&&(s&&p&&A.push(l,E),s&&!p&&(Array.prototype.push.apply(A,r(l,E,o,a)),A.push(l,E)),!s&&p&&Array.prototype.push.apply(A,r(o,a,l,E)))}return A}function r(e,n,r,t){var i=n.xmin,A=n.xmax,u=n.ymin,l=n.ymax,E=e;return r&R.LEFT&&(E=s(e,function(e,n){return i<=e},function(e,n,r,t){return[i,n+(t-n)*(i-e)/(r-e)]},t)),r&R.BOTTOM&&(E=s(E,function(e,n){return u<=n},function(e,n,r,t){return[e+(r-e)*(u-n)/(t-n),u]},t)),r&R.RIGHT&&(E=s(E,function(e,n){return e<=A},function(e,n,r,t){return[A,n+(t-n)*(A-e)/(r-e)]},t)),r&R.TOP&&(E=s(E,function(e,n){return n<=l},function(e,n,r,t){return[e+(r-e)*(l-n)/(t-n),l]},t)),E}Object.defineProperty(R,"__esModule",{value:!0}),R.getClippingGraphType=R.computeCartesianFill=R.computePolarFill=R.clipAllFillEdges=R.clipFillEdges=R.clipFillEdge=R.clipStrokeEdges=R.mapSegmentToCanvas=R.X_EQUALS=R.Y_EQUALS=R.POLAR_DEGREE_INEQUALITY=R.POLAR_DEGREE_EQUALITY=R.POLAR_RADIAN_INEQUALITY=R.POLAR_RADIAN_EQUALITY=R.Y=R.X=R.ALL=R.RIGHT=R.LEFT=R.BOTTOM=R.TOP=void 0,R.TOP=1,R.BOTTOM=2,R.LEFT=4,R.RIGHT=8,R.ALL=15,R.X=12,R.Y=3,R.POLAR_RADIAN_EQUALITY=1,R.POLAR_RADIAN_INEQUALITY=2,R.POLAR_DEGREE_EQUALITY=3,R.POLAR_DEGREE_INEQUALITY=4,R.Y_EQUALS=5,R.X_EQUALS=6,R.mapSegmentToCanvas=function(e,n,r,t){var i=[],A=n.xmin,u=n.ymin,l=n.xmax-n.xmin,E=n.ymax-n.ymin,s=r.width,o=r.height,a=s/l,p=-o/E,L=e.length;if(t===R.Y_EQUALS)for(var h=0;h<L;h+=2){var c=(e[h]-A)*a-.5,_=(e[h+1]-u)*p+o-.5;i.push(c,_)}else if(t===R.X_EQUALS)for(h=0;h<L;h+=2){c=(e[h+1]-A)*a-.5,_=(e[h]-u)*p+o-.5;i.push(c,_)}else if(t===R.POLAR_RADIAN_EQUALITY)for(h=0;h<e.length;h+=2){var I=e[h],c=((f=e[h+1])*Math.cos(I)-A)*a-.5,_=(f*Math.sin(I)-u)*p+o-.5;i.push(c,_)}else if(t===R.POLAR_RADIAN_INEQUALITY)for(h=0;h<e.length;h+=2){I=e[h];(f=e[h+1])<0&&(f=0);c=(f*Math.cos(I)-A)*a-.5,_=(f*Math.sin(I)-u)*p+o-.5;i.push(c,_)}else if(t===R.POLAR_DEGREE_EQUALITY)for(h=0;h<e.length;h+=2){I=e[h]*Math.PI/180,c=((f=e[h+1])*Math.cos(I)-A)*a-.5,_=(f*Math.sin(I)-u)*p+o-.5;i.push(c,_)}else if(t===R.POLAR_DEGREE_INEQUALITY)for(h=0;h<e.length;h+=2){var f,I=e[h]*Math.PI/180;(f=e[h+1])<0&&(f=0);c=(f*Math.cos(I)-A)*a-.5,_=(f*Math.sin(I)-u)*p+o-.5;i.push(c,_)}return i},R.clipStrokeEdges=function(e,n){return r(e,n,R.ALL,!0)},R.clipFillEdge=s,R.clipFillEdges=r,R.clipAllFillEdges=function(e,n){return r(e,n,R.ALL,!1)},R.computePolarFill=function(e,n,r){var t=[],i=(p=e[0])+r,A=[];t.push(A);for(var u=0;u<e.length;u+=2){var l=e[u],E=e[u+1];if(E<0&&(E=0),i<=l){for(A=[],t.push(A),i=p=e[u-2];i<=l;)i+=r;u-=4}else A.push(l,E)}if(0===n)for(u=0;u<t.length;u++)t[u].push(0,0);else for(var s=r/16,o=n,u=0;u<t.length;u++){for(var a=t[u],p=a[0],l=i=a[a.length-2];p<l;l-=s)a.push(l,o);a.push(p,o)}return t},R.computeCartesianFill=function(e,n){return(e=e.slice()).push(e[e.length-2],n),e.push(e[0],n),[e]},R.getClippingGraphType=function(e,n,r){switch(e){case t.X:return R.X_EQUALS;case t.IMPLICIT:case t.PARAMETRIC:case t.Y:return R.Y_EQUALS;case t.POLAR:return r.degreeMode?n?R.POLAR_DEGREE_INEQUALITY:R.POLAR_DEGREE_EQUALITY:n?R.POLAR_RADIAN_INEQUALITY:R.POLAR_RADIAN_EQUALITY}}});
define('core/constants',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CURRENT_API_VERSION=void 0,e.CURRENT_API_VERSION="v1.6"});
define('core/lib/color-helpers',["require","exports"],function(require,e){"use strict";function c(e){return s(e)?(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e.toLowerCase()):e}function s(e){return"string"==typeof e&&(e.match(/^#([A-Fa-f0-9]{3})$/g)||e.match(/^#([A-Fa-f0-9]{6})$/g))}Object.defineProperty(e,"__esModule",{value:!0}),e.colors=e.getDisplayColor=e.mutateOpacity=e.parseHex=e.invertColor=e.shadeColor=e.isValidHexColor=e.normalizeColor=void 0,e.normalizeColor=c,e.isValidHexColor=s,e.shadeColor=function(e,r){if(!s(e=c(e)))return e;1<r&&(r=1),r<-1&&(r=-1);var t=parseInt(e.slice(1),16),a=r<0?0:255,o=r<0?-1*r:r,n=t>>16,i=t>>8&255,l=255&t;return"#"+(16777216+65536*(Math.round((a-n)*o)+n)+256*(Math.round((a-i)*o)+i)+(Math.round((a-l)*o)+l)).toString(16).slice(1)},e.invertColor=function(e){if(!s(e=c(e)))return e;var r="0123456789abcdef";return"#"+e.slice(1).split("").map(function(e){return r[15-r.indexOf(e)]}).join("")},e.parseHex=function(e){var r,t,a;return a=3===(e=e.replace(/#/,"")).length?(r=parseInt(e.slice(0,1)+e.slice(0,1),16),t=parseInt(e.slice(1,2)+e.slice(1,2),16),parseInt(e.slice(2,3)+e.slice(2,3),16)):6===e.length?(r=parseInt(e.slice(0,2),16),t=parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)):t=r=0,{r:r,g:t,b:a}},e.mutateOpacity=function(e,r){var t=/(rgba\([\d]+\,\ ?[\d]+\,\ ?[\d]+\,\ ?)[\d.]+(\))/;return e.match(t)?e.replace(t,"$1"+r+"$2"):e},e.getDisplayColor=function(e,r,t){if(r&&r.colorLatexValue){var a=r.colorLatexValue;return Array.isArray(a)&&void 0!==t?a[t]||"#000000":a}return e.color},e.colors={RED:"#c74440",BLUE:"#2d70b3",GREEN:"#388c46",PURPLE:"#6042a6",ORANGE:"#fa7e19",BLACK:"#000000",GRAY:"#aaaaaa"}});
define('expressions/colors',["require","exports","core/lib/color-helpers"],function(require,r,c){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getColorName=r.all=r.BLACK=r.ORANGE=r.PURPLE=r.GREEN=r.BLUE=r.RED=void 0,r.RED=c.colors.RED,r.BLUE=c.colors.BLUE,r.GREEN=c.colors.GREEN,r.PURPLE=c.colors.PURPLE,r.ORANGE=c.colors.ORANGE,r.BLACK=c.colors.BLACK,r.all=[r.RED,r.BLUE,r.GREEN,r.PURPLE,r.ORANGE,r.BLACK],r.getColorName=function(r,o){switch(o){case c.colors.RED:return r.s("graphing-calculator-text-color-red");case c.colors.BLUE:return r.s("graphing-calculator-text-color-blue");case c.colors.GREEN:return r.s("graphing-calculator-text-color-green");case c.colors.PURPLE:return r.s("graphing-calculator-text-color-purple");case c.colors.ORANGE:return r.s("graphing-calculator-text-color-orange");case c.colors.BLACK:return r.s("graphing-calculator-text-color-black");case c.colors.GRAY:return r.s("graphing-calculator-text-color-gray");default:return r.s("graphing-calculator-text-color-unknown")}}});
define('core/types/styles',["require","exports"],function(require,e){"use strict";var t,S;Object.defineProperty(e,"__esModule",{value:!0}),e.LineStyle=e.PointStyle=void 0,(t=e.PointStyle||(e.PointStyle={})).POINT="POINT",t.OPEN="OPEN",t.CROSS="CROSS",(S=e.LineStyle||(e.LineStyle={})).SOLID="SOLID",S.DASHED="DASHED",S.DOTTED="DOTTED"});
define('core/lib/dragmode',["require","exports"],function(require,e){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.reconcileDragMode=e.DragMode=void 0,(r=o=e.DragMode||(e.DragMode={})).NONE="NONE",r.X="X",r.Y="Y",r.XY="XY",r.AUTO="AUTO",e.reconcileDragMode=function(e,r){var n,t=!(n=r)||"none"===n[0].type&&"none"===n[1].type?o.NONE:"none"===n[1].type?o.X:"none"===n[0].type?o.Y:o.XY;switch(e){case o.NONE:return o.NONE;case o.AUTO:case o.XY:return t;case o.X:return t===o.X||t===o.XY?o.X:o.NONE;case o.Y:return t===o.Y||t===o.XY?o.Y:o.NONE;default:return o.NONE}}});
define('core/types/label-sizes',["require","exports"],function(require,e){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.LabelSize=void 0,(i=e.LabelSize||(e.LabelSize={})).SMALL="small",i.MEDIUM="medium",i.LARGE="large"});
define('core/types/label-orientations',["require","exports"],function(require,e){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LabelOrientation=void 0,(t=e.LabelOrientation||(e.LabelOrientation={})).DEFAULT="default",t.LEFT="left",t.RIGHT="right",t.ABOVE="above",t.BELOW="below"});
define('core/lib/number-to-latex',["require","exports"],function(require,e){"use strict";function o(e){var r,t,n,i,a,o,u=e+"";return/\d+\.?\d*e[\+\-]*\d+/i.test(u)&&(r=String(u).toLowerCase().split("e"),t=parseFloat(r[0]),n=parseInt(r[1],10),i=Math.abs(n),a=Math.abs(t).toString().split("."),u=n<0?"0."+new Array(i).join("0")+a.join(""):((o=a[1])&&(i-=o.length),a.join("")+new Array(i+1).join("0")),t<0&&(u="-"+u)),u}Object.defineProperty(e,"__esModule",{value:!0}),e.numberToStatsConfidenceLatex=e.numberToDecimalString=void 0,e.default=function(e){if("string"==typeof e)return e;if(void 0===e)return"";var r=e+"";return r=(r=r.replace(/1e\+?([-\d]+)/,"10^{$1}")).replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}")},e.numberToDecimalString=o,e.numberToStatsConfidenceLatex=function(e,r){void 0===r&&(r=2);var t,n=o(e),i=n.indexOf(".");if(-1===i)return n;for(var a=i+1;a<n.length;a++)if(t){if(n[a]!==t)break}else{if("0"!==n[a]&&"9"!==n[a])break;t=n[a]}return n.substr(0,Math.max(i+5,a+r))}});
define('graphing-calc/api/sanitize-expression',["require","exports","core/types/styles","core/lib/dragmode","core/types/label-sizes","core/types/label-orientations","core/lib/number-to-latex","lib/console"],function(require,a,e,t,i,n,r,y){"use strict";function o(e,i){for(var n in i)if(i.hasOwnProperty(n)&&i[n]===e)return!0;return!1}function l(e){return o(e,a.SanitizedPointStyle)}function d(e){return o(e,a.SanitizedLineStyle)}function s(e){return o(e,a.SanitizedDragMode)}function p(e){return{id:e.id,latex:e.latex,color:e.color,hidden:e.hidden,pointStyle:e.pointStyle,lineStyle:e.lineStyle,points:e.points,lines:e.lines,dragMode:e.dragMode,values:e.values.slice()}}function m(e,i){return e.hasOwnProperty("id")?e.id+"":i.generateId()}function c(e,i){var n={type:"expression",id:m(e,i)};return n.type="expression",n.id=m(e,i),e.hasOwnProperty("latex")&&(n.latex=e.latex+""),e.hasOwnProperty("color")&&(n.color=e.color+""),e.hasOwnProperty("points")&&(n.points=!!e.points),e.hasOwnProperty("lines")&&(n.lines=!!e.lines),e.hasOwnProperty("style")&&(y.warn("As of API v1.1 the 'style' property is deprecated and has been split into 'pointStyle' and 'lineStyle'."),l(e.style)?n.pointStyle=e.style:d(e.style)?n.lineStyle=e.style:y.warn("Invalid style: '"+e.style+"'.")),e.hasOwnProperty("pointStyle")&&(l(e.pointStyle)?n.pointStyle=e.pointStyle:y.warn("Invalid pointStyle: '"+e.pointStyle+"'.")),e.hasOwnProperty("lineStyle")&&(d(e.lineStyle)?n.lineStyle=e.lineStyle:y.warn("Invalid lineStyle: '"+e.lineStyle+"'.")),e.hasOwnProperty("hidden")&&(n.hidden=!!e.hidden),e.hasOwnProperty("secret")&&(n.secret=!!e.secret),e.hasOwnProperty("sliderBounds")&&e.sliderBounds&&(n.slider={min:r.default(e.sliderBounds.min),max:r.default(e.sliderBounds.max),step:r.default(e.sliderBounds.step)},n.slider.min&&(n.slider.hardMin=!0),n.slider.max&&(n.slider.hardMax=!0)),e.hasOwnProperty("parametricDomain")&&e.parametricDomain?(n.parametricDomain={min:r.default(e.parametricDomain.min),max:r.default(e.parametricDomain.max)},e.hasOwnProperty("domain")&&y.warn("Both 'parametricDomain' and the deprecated 'domain' property were specified. Using 'parametricDomain'.")):e.hasOwnProperty("domain")&&(y.warn("The 'domain' property is deprecated.Use 'parametricDomain' to specify the domain for parametric functions"),n.parametricDomain={min:r.default(e.domain.min),max:r.default(e.domain.max)}),e.hasOwnProperty("polarDomain")&&e.polarDomain&&(n.polarDomain={min:r.default(e.polarDomain.min),max:r.default(e.polarDomain.max)}),e.hasOwnProperty("dragMode")&&(s(e.dragMode)?n.dragMode=e.dragMode:y.warn("Invalid dragMode: '"+e.dragMode+"'.")),e.hasOwnProperty("label")&&(n.label=e.label+""),e.hasOwnProperty("showLabel")&&(n.showLabel=!!e.showLabel),e.hasOwnProperty("labelSize")&&(o(e.labelSize,a.SanitizedLabelSize)?n.labelSize=e.labelSize:y.warn("Invalid labelSize: "+e.labelSize)),e.hasOwnProperty("labelOrientation")&&(o(e.labelOrientation,a.SanitizedLabelOrientation)?n.labelOrientation=e.labelOrientation:y.warn("Invalid labelOrientation: "+e.labelOrientation)),e.hasOwnProperty("fill")&&(n.fill=!!e.fill),e.hasOwnProperty("fillOpacity")&&(n.fillOpacity=""+e.fillOpacity),n}function u(e,i){var n={id:m(e,i)};return e.hasOwnProperty("latex")&&(n.latex=e.latex+""),e.hasOwnProperty("color")&&(n.color=e.color+""),e.hasOwnProperty("hidden")&&(n.hidden=!!e.hidden),e.hasOwnProperty("points")&&(n.points=!!e.points),e.hasOwnProperty("lines")&&(n.lines=!!e.lines),e.hasOwnProperty("values")&&e.values&&(n.values=e.values.map(function(e){return e+""})),e.hasOwnProperty("columnMode")&&(y.warn("As of API v1.1 the 'columnMode' property is deprecated and has been split into individual 'points' and 'lines' properties."),e.columnMode===a.SanitizedColumnMode.POINTS_AND_LINES?(n.points=!0,n.lines=!0):e.columnMode===a.SanitizedColumnMode.LINES?(n.points=!1,n.lines=!0):(n.points=!0,n.lines=!1),n.lines&&!n.points&&e.hasOwnProperty("dragMode")&&e.dragMode!==t.DragMode.NONE&&(y.warn("A 'lines' value of true and 'points' value of false is only compatible with a dragMode of 'NONE'. Proceeding by setting 'points' to true."),n.points=!0),o(e.columnMode,a.SanitizedColumnMode)&&y.warn("Invalid columnMode: '"+e.columnMode+"'.")),e.hasOwnProperty("dragMode")&&(s(e.dragMode)?n.dragMode=e.dragMode===t.DragMode.AUTO?t.DragMode.NONE:e.dragMode:y.warn("Invalid dragMode: '"+e.dragMode+"'.")),n}Object.defineProperty(a,"__esModule",{value:!0}),a.validateItem=a.sanitizeItem=a.SanitizedLabelOrientation=a.SanitizedLabelSize=a.SanitizedColumnMode=a.SanitizedDragMode=a.SanitizedLineStyle=a.SanitizedPointStyle=void 0,a.SanitizedPointStyle={OPEN:e.PointStyle.OPEN,CROSS:e.PointStyle.CROSS,POINT:e.PointStyle.POINT},a.SanitizedLineStyle={SOLID:e.LineStyle.SOLID,DASHED:e.LineStyle.DASHED,DOTTED:e.LineStyle.DOTTED},a.SanitizedDragMode={NONE:t.DragMode.NONE,AUTO:t.DragMode.AUTO,X:t.DragMode.X,Y:t.DragMode.Y,XY:t.DragMode.XY},a.SanitizedColumnMode={POINTS:"POINTS",LINES:"LINES",POINTS_AND_LINES:"POINTS_AND_LINES"},a.SanitizedLabelSize={SMALL:i.LabelSize.SMALL,MEDIUM:i.LabelSize.MEDIUM,LARGE:i.LabelSize.LARGE},a.SanitizedLabelOrientation={ABOVE:n.LabelOrientation.ABOVE,BELOW:n.LabelOrientation.BELOW,DEFAULT:n.LabelOrientation.DEFAULT,LEFT:n.LabelOrientation.LEFT,RIGHT:n.LabelOrientation.RIGHT},a.sanitizeItem=function(e){switch(e.type){case"expression":return l={id:(o=e).id,type:o.type},["latex","color","lineStyle","pointStyle","fillOpacity","points","lines","fill","hidden","secret","dragMode","label","showLabel","labelSize","labelOrientation","verticalLabel","interactiveLabel"].forEach(function(e){o.hasOwnProperty(e)&&(l[e]=o[e])}),o.hasOwnProperty("parametricDomain")&&(l.parametricDomain={min:o.parametricDomain.min,max:o.parametricDomain.max}),o.hasOwnProperty("polarDomain")&&(l.polarDomain={min:o.polarDomain.min,max:o.polarDomain.max}),o.hasOwnProperty("domain")&&(l.domain={min:o.domain.min,max:o.domain.max}),o.slider&&(o.slider.hardMin&&(l.sliderBounds=l.sliderBounds||{},l.sliderBounds.min=o.slider.min),o.slider.hardMax&&(l.sliderBounds=l.sliderBounds||{},l.sliderBounds.max=o.slider.max),o.slider.step&&(l.sliderBounds=l.sliderBounds||{},l.sliderBounds.step=o.slider.step)),l;case"table":return{id:(r=e).id,type:r.type,columns:r.columns.map(p)};case"folder":return{id:(t=e).id,type:t.type,hidden:t.hidden,secret:t.secret};case"image":return{id:(a=e).id,type:a.type,hidden:a.hidden,secret:a.secret};case"text":return{id:(n=e).id,type:n.type,secret:n.secret};case"simulation":return{id:(i=e).id,type:i.type,secret:i.secret};default:return e}var i,n,a,t,r,o,l},a.validateItem=function(e,i,n){var a,t,r,o,l,d,s,p=e.type;if(i&&p&&p!==i)y.warn("Cannot change type of expression from '"+i+"' to '"+p+"'.");else switch(p){case void 0:case"expression":return c(e,n);case"image":return s={type:"image",id:m(d=e,n)},d.hasOwnProperty("hidden")&&(s.hidden=!!d.hidden),s;case"table":return l={type:"table",id:m(r=e,o=n)},r.hasOwnProperty("columns")&&r.columns&&(l.columns=r.columns.map(function(e){return u(e,o)})),l;case"folder":return t={type:"folder",id:m(a=e,n)},a.hasOwnProperty("hidden")&&(t.hidden=!!a.hidden),t;default:return i?void y.warn("Cannot modify expressions of type: '"+i+"' through the API."):void y.warn("Invalid expression type: '"+p+"'.")}}});
define('core/graphing-calc/json/graph-settings',["require","exports","tslib"],function(require,i,s){"use strict";var e,r;Object.defineProperty(i,"__esModule",{value:!0}),i.isGraphSetting=i.publicGraphSettings=i.DefaultGraphSettings=i.AxisArrowModes=void 0,(r=e=i.AxisArrowModes||(i.AxisArrowModes={})).NONE="NONE",r.POSITIVE="POSITIVE",r.BOTH="BOTH";var t={showGrid:!0,showXAxis:!0,showYAxis:!0,xAxisStep:0,yAxisStep:0,xAxisMinorSubdivisions:0,yAxisMinorSubdivisions:0,xAxisArrowMode:e.NONE,yAxisArrowMode:e.NONE,xAxisLabel:"",yAxisLabel:"",xAxisNumbers:!0,yAxisNumbers:!0,polarMode:!1,polarNumbers:!0,degreeMode:!1,randomSeed:"",restrictGridToFirstQuadrant:!1};i.DefaultGraphSettings=s.__assign(s.__assign({},t),{squareAxes:!0}),i.publicGraphSettings=Object.keys(t),i.isGraphSetting=function(i){return i in t}});
define('main/font_sizes',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.VERY_LARGE=e.LARGE=e.MEDIUM=e.SMALL=e.VERY_SMALL=void 0,e.VERY_SMALL=9,e.SMALL=12,e.MEDIUM=16,e.LARGE=20,e.VERY_LARGE=24});
!function(t){"use strict";var w=function(t,n,e){var r,o,i=document.createElement("img");if(i.onerror=n,i.onload=function(){!o||e&&e.noRevoke||w.revokeObjectURL(o),n&&n(w.scale(i,e))},w.isInstanceOf("Blob",t)||w.isInstanceOf("File",t))r=o=w.createObjectURL(t),i._type=t.type;else{if("string"!=typeof t)return!1;r=t,e&&e.crossOrigin&&(i.crossOrigin=e.crossOrigin)}return r?(i.src=r,i):w.readFile(t,function(t){var e=t.target;e&&e.result?i.src=e.result:n&&n(t)})},e=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;w.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},w.transformCoordinates=function(){},w.getTransformedOptions=function(t){return t},w.renderImageToCanvas=function(t,e,n,r,o,i,a,c,s,d){return t.getContext("2d").drawImage(e,n,r,o,i,a,c,s,d),t},w.hasCanvasOption=function(t){return t.canvas||t.crop},w.scale=function(t,e){e=e||{};function n(){var t=Math.max((a||O)/O,(c||b)/b);1<t&&(O=Math.ceil(O*t),b=Math.ceil(b*t))}function r(){var t=Math.min((o||O)/O,(i||b)/b);t<1&&(O=Math.ceil(O*t),b=Math.ceil(b*t))}var o,i,a,c,s,d,u,f,h,g=document.createElement("canvas"),v=t.getContext||w.hasCanvasOption(e)&&g.getContext,l=t.naturalWidth||t.width,m=t.naturalHeight||t.height,O=l,b=m;return v&&(u=(e=w.getTransformedOptions(e)).left||0,f=e.top||0,e.sourceWidth?(s=e.sourceWidth,void 0!==e.right&&void 0===e.left&&(u=l-s-e.right)):s=l-u-(e.right||0),e.sourceHeight?(d=e.sourceHeight,void 0!==e.bottom&&void 0===e.top&&(f=m-d-e.bottom)):d=m-f-(e.bottom||0),O=s,b=d),o=e.maxWidth,i=e.maxHeight,a=e.minWidth,c=e.minHeight,v&&o&&i&&e.crop?(h=s/d-(O=o)/(b=i))<0?(d=i*s/o,void 0===e.top&&void 0===e.bottom&&(f=(m-d)/2)):0<h&&(s=o*d/i,void 0===e.left&&void 0===e.right&&(u=(l-s)/2)):((e.contain||e.cover)&&(a=o=o||a,c=i=i||c),e.cover?(r(),n()):(n(),r())),v?(g.width=O,g.height=b,w.transformCoordinates(g,e),w.renderImageToCanvas(g,t,u,f,s,d,0,0,O,b)):(t.width=O,t.height=b,t)},w.createObjectURL=function(t){return!!e&&e.createObjectURL(t)},w.revokeObjectURL=function(t){return!!e&&e.revokeObjectURL(t)},w.readFile=function(t,e,n){if(window.FileReader){var r=new FileReader;if(r.onload=r.onerror=e,r[n=n||"readAsDataURL"])return r[n](t),r}return!1},"function"==typeof define&&define.amd?define('vendor/load-image/load-image',[],function(){return w}):t.loadImage=w}(this);
!function(t){"use strict";"function"==typeof define&&define.amd?define('vendor/load-image/load-image-orientation',["./load-image"],t):t(window.loadImage)}(function(t){"use strict";var e=t.hasCanvasOption;t.hasCanvasOption=function(t){return e(t)||t.orientation},t.transformCoordinates=function(t,e){var a=t.getContext("2d"),o=t.width,i=t.height,r=e.orientation;if(r)switch(4<r&&(t.width=i,t.height=o),r){case 2:a.translate(o,0),a.scale(-1,1);break;case 3:a.translate(o,i),a.rotate(Math.PI);break;case 4:a.translate(0,i),a.scale(1,-1);break;case 5:a.rotate(.5*Math.PI),a.scale(1,-1);break;case 6:a.rotate(.5*Math.PI),a.translate(0,-i);break;case 7:a.rotate(.5*Math.PI),a.translate(o,-i),a.scale(-1,1);break;case 8:a.rotate(-.5*Math.PI),a.translate(-o,0)}},t.getTransformedOptions=function(t){if(!t.orientation||1===t.orientation)return t;var e,a={};for(e in t)t.hasOwnProperty(e)&&(a[e]=t[e]);switch(t.orientation){case 2:a.left=t.right,a.right=t.left;break;case 3:a.left=t.right,a.top=t.bottom,a.right=t.left,a.bottom=t.top;break;case 4:a.top=t.bottom,a.bottom=t.top;break;case 5:a.left=t.top,a.top=t.left,a.right=t.bottom,a.bottom=t.right;break;case 6:a.left=t.top,a.top=t.right,a.right=t.bottom,a.bottom=t.left;break;case 7:a.left=t.bottom,a.top=t.right,a.right=t.top,a.bottom=t.left;break;case 8:a.left=t.bottom,a.top=t.left,a.right=t.top,a.bottom=t.right}return 4<t.orientation&&(a.maxWidth=t.maxHeight,a.maxHeight=t.maxWidth,a.minWidth=t.minHeight,a.minHeight=t.minWidth,a.sourceWidth=t.sourceHeight,a.sourceHeight=t.sourceWidth),a}});
!function(e){"use strict";"function"==typeof define&&define.amd?define('vendor/load-image/load-image-meta',["./load-image"],e):e(window.loadImage)}(function(m){"use strict";var e=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);m.blobSlice=e&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},m.metaDataParsers={jpeg:{65505:[]}},m.parseMetaData=function(e,g,d){var f=this,i=(d=d||{}).maxMetaDataSize||262144,b={};!!(window.DataView&&e&&12<=e.size&&"image/jpeg"===e.type&&m.blobSlice)&&m.readFile(m.blobSlice.call(e,0,i),function(e){var i,a,t,l,n=e.target.result,o=new DataView(n),r=2,s=o.byteLength-4,c=r;if(65496===o.getUint16(0)){for(;r<s&&(65504<=(i=o.getUint16(r))&&i<=65519||65534===i);){if(r+(a=o.getUint16(r+2)+2)>o.byteLength){console.log("Invalid meta data: Invalid segment size.");break}if(t=m.metaDataParsers.jpeg[i])for(l=0;l<t.length;l+=1)t[l].call(f,o,r,a,b,d);c=r+=a}!d.disableImageHead&&6<c&&(n.slice?b.imageHead=n.slice(0,c):b.imageHead=new Uint8Array(n).subarray(0,c))}else console.log("Invalid JPEG file: Missing JPEG marker.");g(b)},"readAsArrayBuffer")||g(b)}});
!function(e){"use strict";"function"==typeof define&&define.amd?define('vendor/load-image/load-image-ios',["./load-image"],e):e(window.loadImage)}(function(I){"use strict";var p;window.navigator&&window.navigator.platform&&/iP(hone|od|ad)/.test(window.navigator.platform)&&(p=I.renderImageToCanvas,I.detectSubsampling=function(e){var t,a;return 1048576<e.width*e.height&&((t=document.createElement("canvas")).width=t.height=1,(a=t.getContext("2d")).drawImage(e,1-e.width,0),0===a.getImageData(0,0,1,1).data[3])},I.detectVerticalSquash=function(e,t){var a,n,i,r,d=e.naturalHeight||e.height,o=document.createElement("canvas"),g=o.getContext("2d");for(t&&(d/=2),o.width=1,o.height=d,g.drawImage(e,0,0),a=g.getImageData(0,0,1,d).data,n=0,r=i=d;n<r;)0===a[4*(r-1)+3]?i=r:n=r,r=i+n>>1;return r/d||1},I.renderImageToCanvas=function(e,t,a,n,i,r,d,o,g,c){if("image/jpeg"===t._type){var m,h,u,f,w=e.getContext("2d"),s=document.createElement("canvas"),l=1024,v=s.getContext("2d");if(s.width=l,s.height=l,w.save(),(m=I.detectSubsampling(t))&&(a/=2,n/=2,i/=2,r/=2),h=I.detectVerticalSquash(t,m),m||1!==h){for(n*=h,g=Math.ceil(l*g/i),c=Math.ceil(l*c/r/h),f=o=0;f<r;){for(u=d=0;u<i;)v.clearRect(0,0,l,l),v.drawImage(t,a,n,i,r,-u,-f,i,r),w.drawImage(s,0,0,l,l,d,o,g,c),u+=l,d+=g;f+=l,o+=c}return w.restore(),e}}return p(e,t,a,n,i,r,d,o,g,c)})});
!function(e){"use strict";"function"==typeof define&&define.amd?define('vendor/load-image/load-image-exif',["./load-image","./load-image-meta"],e):e(window.loadImage)}(function(x){"use strict";x.ExifMap=function(){return this},x.ExifMap.prototype.map={Orientation:274},x.ExifMap.prototype.get=function(e){return this[e]||this[this.map[e]]},x.getExifThumbnail=function(e,i,t){var n,a,f;if(t&&!(i+t>e.byteLength)){for(n=[],a=0;a<t;a+=1)f=e.getUint8(i+a),n.push((f<16?"0":"")+f.toString(16));return"data:image/jpeg,%"+n.join("%")}console.log("Invalid Exif data: Invalid thumbnail data.")},x.exifTagTypes={1:{getValue:function(e,i){return e.getUint8(i)},size:1},2:{getValue:function(e,i){return String.fromCharCode(e.getUint8(i))},size:1,ascii:!0},3:{getValue:function(e,i,t){return e.getUint16(i,t)},size:2},4:{getValue:function(e,i,t){return e.getUint32(i,t)},size:4},5:{getValue:function(e,i,t){return e.getUint32(i,t)/e.getUint32(i+4,t)},size:8},9:{getValue:function(e,i,t){return e.getInt32(i,t)},size:4},10:{getValue:function(e,i,t){return e.getInt32(i,t)/e.getInt32(i+4,t)},size:8}},x.exifTagTypes[7]=x.exifTagTypes[1],x.getExifValue=function(e,i,t,n,a,f){var g,s,r,o,l,u,d=x.exifTagTypes[n];if(d){if(!((s=4<(g=d.size*a)?i+e.getUint32(t+8,f):t+8)+g>e.byteLength)){if(1===a)return d.getValue(e,s,f);for(r=[],o=0;o<a;o+=1)r[o]=d.getValue(e,s+o*d.size,f);if(d.ascii){for(l="",o=0;o<r.length&&"\0"!==(u=r[o]);o+=1)l+=u;return l}return r}console.log("Invalid Exif data: Invalid data offset.")}else console.log("Invalid Exif data: Invalid tag type.")},x.parseExifTag=function(e,i,t,n,a){var f=e.getUint16(t,n);a.exif[f]=x.getExifValue(e,i,t,e.getUint16(t+2,n),e.getUint32(t+4,n),n)},x.parseExifTags=function(e,i,t,n,a){var f,g,s;if(t+6>e.byteLength)console.log("Invalid Exif data: Invalid directory offset.");else{if(!((g=t+2+12*(f=e.getUint16(t,n)))+4>e.byteLength)){for(s=0;s<f;s+=1)this.parseExifTag(e,i,t+2+12*s,n,a);return e.getUint32(g,n)}console.log("Invalid Exif data: Invalid directory size.")}},x.parseExifData=function(e,i,t,n,a){if(!a.disableExif){var f,g,s,r=i+10;if(1165519206===e.getUint32(i+4))if(r+8>e.byteLength)console.log("Invalid Exif data: Invalid segment size.");else if(0===e.getUint16(i+8)){switch(e.getUint16(r)){case 18761:f=!0;break;case 19789:f=!1;break;default:return void console.log("Invalid Exif data: Invalid byte alignment marker.")}42===e.getUint16(r+2,f)?(g=e.getUint32(r+4,f),n.exif=new x.ExifMap,(g=x.parseExifTags(e,r,r+g,f,n))&&!a.disableExifThumbnail&&(s={exif:{}},x.parseExifTags(e,r,r+g,f,s),s.exif[513]&&(n.exif.Thumbnail=x.getExifThumbnail(e,r+s.exif[513],s.exif[514]))),n.exif[34665]&&!a.disableExifSub&&x.parseExifTags(e,r,r+n.exif[34665],f,n),n.exif[34853]&&!a.disableExifGps&&x.parseExifTags(e,r,r+n.exif[34853],f,n)):console.log("Invalid Exif data: Missing TIFF marker.")}else console.log("Invalid Exif data: Missing byte alignment offset.")}},x.metaDataParsers.jpeg[65505].push(x.parseExifData)});
!function(e){"use strict";"function"==typeof define&&define.amd?define('vendor/load-image/load-image-exif-map',["./load-image","./load-image-exif"],e):e(window.loadImage)}(function(e){"use strict";e.ExifMap.prototype.tags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright",36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",42240:"Gamma",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubSecTime",37521:"SubSecTimeOriginal",37522:"SubSecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"PhotographicSensitivity",34856:"OECF",34864:"SensitivityType",34865:"StandardOutputSensitivity",34866:"RecommendedExposureIndex",34867:"ISOSpeed",34868:"ISOSpeedLatitudeyyy",34869:"ISOSpeedLatitudezzz",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRatio",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",42016:"ImageUniqueID",42032:"CameraOwnerName",42033:"BodySerialNumber",42034:"LensSpecification",42035:"LensMake",42036:"LensModel",42037:"LensSerialNumber",0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential",31:"GPSHPositioningError"},e.ExifMap.prototype.stringValues={ExposureProgram:{0:"Undefined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Undefined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},ComponentsConfiguration:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"},Orientation:{1:"top-left",2:"top-right",3:"bottom-right",4:"bottom-left",5:"left-top",6:"right-top",7:"right-bottom",8:"left-bottom"}},e.ExifMap.prototype.getText=function(e){var t=this.get(e);switch(e){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":case"Orientation":return this.stringValues[e][t];case"ExifVersion":case"FlashpixVersion":return String.fromCharCode(t[0],t[1],t[2],t[3]);case"ComponentsConfiguration":return this.stringValues[e][t[0]]+this.stringValues[e][t[1]]+this.stringValues[e][t[2]]+this.stringValues[e][t[3]];case"GPSVersionID":return t[0]+"."+t[1]+"."+t[2]+"."+t[3]}return String(t)},function(e){var t,i=e.tags,r=e.map;for(t in i)i.hasOwnProperty(t)&&(r[i[t]]=t)}(e.ExifMap.prototype),e.ExifMap.prototype.getAll=function(){var e,t,i={};for(e in this)this.hasOwnProperty(e)&&(t=this.tags[e])&&(i[t]=this.getText(t));return i}});
define('loadImage',['require','vendor/load-image/load-image-orientation','vendor/load-image/load-image-meta','vendor/load-image/load-image-ios','vendor/load-image/load-image-exif','vendor/load-image/load-image-exif-map','vendor/load-image/load-image'],function(require){"use strict";return require("vendor/load-image/load-image-orientation"),require("vendor/load-image/load-image-meta"),require("vendor/load-image/load-image-ios"),require("vendor/load-image/load-image-exif"),require("vendor/load-image/load-image-exif-map"),require("vendor/load-image/load-image")});
define('expressions/image_file_to_data_url',["require","exports","loadImage"],function(require,t,e){"use strict";function r(t,e){for(var a,n=[.92,.86,.8,.7,.6,.5,.4,.3,.2,.1],i=0;i<n.length;i++)if((a=t.toDataURL("image/jpeg",n[i])).length<e)return a;return a}Object.defineProperty(t,"__esModule",{value:!0}),t.imageFileToDataURL=void 0,t.imageFileToDataURL=function(n,i){e(n,function(t){var e,a;t.toDataURL?(e=2e5,"image/jpeg"===n.type?a=r(t,e):(a=t.toDataURL()).length>e&&(a=(a.length>.75*t.width*t.height&&!function(t){for(var e=t.getContext("2d").getImageData(0,0,t.width,t.height).data,a=3;a<e.length;a+=4)if(255!==e[a])return 1}(t)?r:function(t,e){for(var a,n=t.toDataURL().length,i=t.width,r=t.height,o=document.createElement("canvas"),g=0;g<2;g++){var h=Math.sqrt(e/n),i=Math.round(h*i),r=Math.round(h*r);if(o.height=r,o.width=i,o.getContext("2d").drawImage(t,0,0,i,r),(n=(a=o.toDataURL()).length)<e)return a}return a})(t,e)),i(null,a)):i(!0)},{orientation:!0,canvas:!0,maxWidth:1600,maxHeight:1600})}});
define('main/graph_settings',['require','pjs','underscore','underscore_model','core/graphing-calc/json/graph-settings','console','core/graphing-calc/json/graph-settings','core/lib/color-helpers'],function(require){"use strict";var e=require("pjs"),i=require("underscore"),n=require("underscore_model").UnderscoreModel,s=require("core/graphing-calc/json/graph-settings").AxisArrowModes,a=require("console"),c=require("core/graphing-calc/json/graph-settings").DefaultGraphSettings,o=require("core/lib/color-helpers"),d=e(n,function(e,t,r){e.init=function(){for(var e in t.init.call(this),this.stateProperties=[],this.cloneProperties=[],this.config=new n,c)c.hasOwnProperty(e)&&this.addStateProperty(e,c[e]);this.labelHangingColor="rgba(150,150,150,1)",this.lastChangedAxis="x";var s=this;function r(e,r,o){function t(){s.setProperty(e,s.config.projectorMode?o:r)}s.cloneProperties.push(e),s.config.observe("projectorMode",t),t()}function o(r,o,t,i,n){function e(){var e=s.config.projectorMode?s.highlight?n:i:s.highlight?t:o;s.setProperty(r,e)}s.cloneProperties.push(r),s.observe("highlight",e),s.config.observe("projectorMode",e),e()}r("labelSize",14,19),r("majorAxisOpacity",.4,1),r("minorAxisOpacity",.12,.25),r("axisOpacity",.9,.9),r("axisLineWidth",1.5,2),r("axisLineOffset",.25,0),r("pixelsPerLabel",80,120),o("curveOpacity",.7,1,.7,1),r("globalCurveColor",void 0,void 0),r("disableFill",!1,!1),o("graphLineWidth",2.5,3.5,5,7),o("pointLineWidth",9,11,15,17)},e.addStateProperty=function(e,r){this[e]=r,this.stateProperties.push(e),this.cloneProperties.push(e)},r.fromObject=function(r){var o=d();return o.cloneProperties.forEach(function(e){r.hasOwnProperty(e)&&o.setProperty(e,r[e])}),o},e.registerCallbacks=function(e,r){function o(){e.redrawAllLayers()}var t=this;this.stateProperties.forEach(function(e){t.observe(e,o)}),this.config.observe("backgroundColor",o),this.config.observe("textColor",o),this.config.observe("invertedColors",o),this.observe("squareAxes",function(){e.viewportController.enforceSquareAxes()}),this.observe("backgroundColor",function(){e.redrawAllLayers()}),this.observe("textColor",function(){e.redrawAllLayers()}),this.config.observe("enableTabindex",function(){e.redrawAllLayers()}),this.config.observeAndSync("projectorMode",function(){e.redrawAllLayers()})};e._validateSettings=function(e){var r={},o=!1;for(var t in e)0<=this.stateProperties.indexOf(t)?r[t]=function(e,r){var o;switch(e){case"xAxisMinorSubdivisions":case"yAxisMinorSubdivisions":r!==(o=Math.round(Math.min(Math.max(0,r),5)))&&a.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+r+", which we changed to "+o+".");break;case"degreeMode":case"projectorMode":case"showGrid":case"showXAxis":case"showYAxis":case"xAxisNumbers":case"yAxisNumbers":case"polarNumbers":case"enableTabindex":case"invertedColors":r!==(o="false"!==r&&!!r)&&a.warn(e+" must be a Boolean. You provided "+r+" ("+typeof r+"), which we changed to "+o+" ("+typeof o+").");break;case"xAxisStep":case"yAxisStep":o=parseFloat(r),isFinite(r)||(o=0,a.warn(e+" must be a number. You provided "+r+", which we changed to "+o+"."));break;case"yAxisMinorSubdivisions":r!==(o=Math.round(Math.min(Math.max(0,r),5)))&&a.warn("minorSubdivisions must be an integer between 0 and 5. You provided "+r+", which we changed to "+o+".");break;case"xAxisArrowMode":case"yAxisArrowMode":(o=s[r])!==r&&(o=s.NONE,a.warn("unknown AxisArrowMode. Allowed values are: \n"+i.keys(s).join("\n")));break;case"xAxisLabel":case"yAxisLabel":"string"!=typeof(o=r)&&(o="",a.warn(e+" must be a string. you provided a "+typeof r+"."));break;case"randomSeed":"string"!=typeof(o=r)&&(o=""+r,a.warn("randomSeed must be a string. you provided a "+typeof r+"."));break;case"backgroundColor":"string"!=typeof(o=r)&&(o="",a.warn(e+" must be a string. you provided a "+typeof r+".")),"#"!==(o=o||"#fff")[0]&&(o="#"+o);break;case"textColor":"string"!=typeof(o=r)&&(o="",a.warn(e+" must be a string. you provided a "+typeof r+".")),"#"!==(o=o||"#000")[0]&&(o="#"+o);break;case"fontSize":"number"!=typeof(o=r)&&(o=parseInt(o,10),a.warn("fontSize must be a number. Attempted to convert "+r+" to "+o+"."));break;case"language":"string"!=typeof(o=r)&&(o="",a.warn(e+" must be a string. you provided a "+typeof r+".")),"undefined"!=typeof Desmos&&Desmos.supportedLanguages.indexOf(r)<0&&"en"!==r&&(o="en",a.warn(r+" is not currently an available language."));break;default:o=r}return o}(t,e[t]):(a.warn('Invalid graph setting "'+t+'".'),o=!0);return o&&a.warn("Available graph settings are: \n"+this.stateProperties.join("\n")),r},e.getBackgroundColor=function(){var e=o.normalizeColor(this.config.backgroundColor||"#fff");return this.config.invertedColors&&"#ffffff"!==e?o.invertColor(e):e},e.getTextColor=function(){var e=o.normalizeColor(this.config.textColor||"#000");return this.config.invertedColors&&"#000000"!==e?o.invertColor(e):e},e.setGraphSettings=function(e){var r=this._validateSettings(e);for(var o in r)r.hasOwnProperty(o)&&("projectorMode"===o||"invertedColors"===o||"fontSize"===o||"language"===o||"backgroundColor"===o||"textColor"===o?this.config.setProperty(o,r[o]):this.setProperty(o,r[o]))}});return d});
define('scroll_helpers',['require'],function(require){return{scrollVisible:function(o,t,r){var e=t.height(),i=o.outerHeight(),l=o.offset(),n=t.offset();if(!l||!n)return!1;var f,s=t[0].scrollTop,c=l.top+s-n.top,u=c-r,a=i+c+r-e;return(f=a<=u?Math.min(Math.max(s,a),u):.5*(u+a))!==s&&(t[0].scrollTop=f,t[0].scrollTop!=s)}}});
define('bugsnag',["require","exports","tslib"],function(require,e,o){"use strict";var c,d;Object.defineProperty(e,"__esModule",{value:!0}),e.setBeforeSendCB=e.leaveBreadcrumb=e.notify=e.init=void 0;var x=["UnhandledRejection","lnrAppboy","socratic","MyAppGet","SymBrowser_","mobincube_","_avast_submit","Cannot redefine property: googletag","jcarousel","SyntaxError: Unexpected identifier 'script'","__gCrWeb.autofill.extractForms","BrowseITEXT","Can't find variable: removeAllHighlights","aAttribruteValue.parentNode.getAttribute","vid_mate_check","GetImageTagSrcFromPoint","Can't find variable: didEnterViewPort","tinyMCE is not defined"];e.init=function(e){var a,s,r,t,i;c||(a=0,s="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var r=16*Math.random()|0;return("x"==e?r:3&r|8).toString(16)}),c=e({apiKey:"7f7807097671acbc4557e64bbf5eb529",maxBreadcrumbs:40,appVersion:window.Desmos&&window.Desmos.commit,releaseStage:(i="production",location&&location.hostname&&(t=(r=location.hostname.split(".")).slice(0,r.length-2).join("."),"desmos.com"===r.slice(r.length-2).join(".")&&(i=t&&"www"!==t?t:"production")),i),consoleBreadcrumbsEnabled:!1,beforeSend:function(e){if(e.errorClass)for(var r=0,t=x;r<t.length;r++){var i=t[r];if(-1!==e.errorClass.indexOf(i))return void e.ignore()}if(e.errorMessage)for(var n=0,o=x;n<o.length;n++){i=o[n];if(-1!==e.errorMessage.indexOf(i))return void e.ignore()}d&&d(e),e.isIgnored()||(a+=1,e.metaData.errorNumber=a,e.metaData.pageLoadId=s)}}))},e.notify=function(e,r){c&&c.notify(e,r)},e.leaveBreadcrumb=function(e,r,t,i){if(r)for(var n in r=o.__assign({},r))try{r[n]=JSON.stringify(r[n],null,2)}catch(e){r[n]="[[could not stringify]]"}c&&c.leaveBreadcrumb(e,r,t,i)},e.setBeforeSendCB=function(e){d=e}});
define('tours/trip',['require','jquery','pjs','mathquill','scroll_helpers','bugsnag'],function(require){"use strict";var a=require("jquery"),t=require("pjs"),p=require("mathquill"),d=require("scroll_helpers"),o=require("bugsnag");return t({init:function(t){this.settings=t,this.__cachedStepName=null},ensureTripBlock:function(){var t,i,e;this.$tripBlock||(t=['<div class="trip-block">','<div class="trip-interior">','<a class="trip-close">&times;</a>','<div class="trip-content"></div>',"</div>",'<div class="trip-arrow"></div>',"</div>"].join(""),(e=(i=this).$tripBlock=a(t)).css({top:"-100px"}),a("body").append(e),e.find(".trip-close").on("dcg-tap",function(t){t.preventDefault(),i.stop()}),this.bindKeyEvents())},cleanup:function(){return this.unbindKeyEvents(),this.hideTripBlock(),!1},bindKeyEvents:function(){var i=this;a(document).on({"keydown.Trip":function(t){i.keyEvent.call(i,t)}})},unbindKeyEvents:function(){a(document).off("keydown.Trip")},keyEvent:function(t){27===t.which&&this.stop()},stop:function(){this.hideTripBlock(),this.settings.onTripStop()},exitTourBecauseOfError:function(t,i){for(var e="",s=i;e=s.selector+e,s=s.prevObject;);this.stop(),o.notify("TourError: could not find $sel.offset()",{metaData:{message:t,selector:e}})},showTripBlock:function(t){this.ensureTripBlock(),"string"==typeof t.sel&&(t.sel=a(t.sel)),t.sel=t.sel.filter(":visible"),t.scrollContainer&&d.scrollVisible(t.sel,t.scrollContainer,0);var i=this.$tripBlock;i.find(".trip-content").html(t.content),i.toggleClass("trip-hidden",!!t.hidden);var e=t.sel,s=e.outerWidth(),o=e.outerHeight(),n=i.outerWidth(),r=i.outerHeight();if(e.offset()){this.__cachedMissingSelTime=void 0,i.removeClass("trip-e trip-s trip-w trip-n");var c=0;switch(t.position){case"e":i.addClass("trip-e"),i.css({left:e.offset().left+s+10,top:e.offset().top-(r-o)/2});break;case"s":i.addClass("trip-s");var l=e.offset().left+(s-n)/2;i.css({left:l,top:e.offset().top+o+10}),l+n>a(window).width()-1&&(c=a(window).width()-1-l-n),l<1&&(c=1-l);break;case"w":i.addClass("trip-w"),i.css({left:e.offset().left-(10+n),top:e.offset().top-(r-o)/2});break;default:i.addClass("trip-n"),i.css({left:e.offset().left+(s-n)/2,top:e.offset().top-10-r})}i.find(".trip-interior").css("transform","translate("+c+"px, 0)"),i.css({display:"inline-block"}),i.find(".trip-math:not(.dcg-mq-math-mode)").each(function(){p.StaticMath(this)})}else this.__cachedMissingSelTime?1e3<Date.now()-this.__cachedMissingSelTime&&(t.final?this.stop():this.exitTourBecauseOfError(t.content,e)):this.__cachedMissingSelTime=Date.now()},fadeInTripBlock:function(){this.ensureTripBlock();var t=this.$tripBlock;setTimeout(function(){t.addClass("trip-is-loaded")},0)},hideTripBlock:function(){this.$tripBlock&&this.$tripBlock.removeClass("trip-is-loaded")}})});
define('tours/tour_manager',['require','pjs','./trip'],function(require){"use strict";var t=require("pjs"),r=require("./trip");return t(function(t,i){t.init=function(){this.tripManager=new r({onTripStop:this.stopTour.bind(this)}),this.currentStep=void 0,this.currentTour=void 0},t._tripLoop=function(){var t;clearTimeout(this.__tripLoopTimeout),this.running&&((t=this)._advanceTrip(),t.__tripLoopTimeout=setTimeout(t._tripLoop.bind(t),200))},t._advanceTrip=function(){var t=this.currentTour.update(),i=(new Date).getTime();if(t&&this.currentStep&&t.content!==this.currentStep.content){if(this.currentStep.delayBeforeExit){if(this.throttleTimer&&i-this.throttleTimer<this.currentStep.delayBeforeExit)return;if(!this.throttleTimer)return void(this.throttleTimer=i)}t.delayBeforeEnter&&(this.currentStep=t,this.throttleTimer=i)}if(!(t&&this.currentStep&&t.content===this.currentStep.content&&this.throttleTimer&&i-this.throttleTimer<this.currentStep.delayBeforeEnter)&&(this.throttleTimer=null,t&&!t.doNotUpdate)){if((this.currentStep=t).final)return void this.finishTour(t,5);this.tripManager.showTripBlock(t)}},t.updateNow=t._advanceTrip,t.startTour=function(t){this.running||(this.currentTour=t,this.running=!0,this._tripLoop(),this.tripManager.fadeInTripBlock())},t.closingMsg=function(t,i){return"<b>"+t+"</b><br>This message will self-destruct in "+i+"..."},t.finishTour=function(t,i){clearTimeout(this.__tripLoopTimeout),this.running=!1;var r=this;i<0?r.tripManager.stop():(t.endingMsg&&(t.content=r.closingMsg(t.endingMsg,i)),r.tripManager.showTripBlock(t),setTimeout(function(){r.finishTour(t,i-1)},1e3))},t.stopTour=function(){this.running=!1,this.currentStep=void 0,this.currentTour=void 0}})});
define('core/math/distance',["require","exports"],function(require,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.approx=s.pointToSegment=s.closestPointOnSegment=s.pointToSegmentParameter=s.mean=s.hypot=void 0;var t=Math.hypot&&Math.hypot(1/0,NaN)===1/0;function u(t){return t===1/0||t===-1/0}function h(t,e,n,r,i,o,a,u,h){var p=s.hypot(a-r,u-i,h-o);return 0===p?0:(t-r)/p*((a-r)/p)+(e-i)/p*((u-i)/p)+(n-o)/p*((h-o)/p)}function p(t,e,n,r,i,o){var a=h(t,e,0,n,r,0,i,o,0);return a<=0?[n,r]:1<=a?[i,o]:[n+a*(i-n),r+a*(o-r)]}s.hypot=t?Math.hypot:function(t,e,n){if(u(t)||u(e)||void 0!==n&&u(n))return 1/0;if(isNaN(t)||isNaN(e)||void 0!==n&&isNaN(n))return NaN;if(0===t&&0===e&&(void 0===n||0===n))return 0;for(var r=0,i=0,o=0;o<arguments.length;o+=1){var a=Math.abs(Number(arguments[o]));r<a&&(i*=r/a*(r/a),r=a),i+=0===a&&0===r?0:a/r*(a/r)}return r===1/0?1/0:r*Math.sqrt(i)},s.mean=function(t,e){return 0<t==0<e?t+.5*(e-t):.5*(t+e)},s.pointToSegmentParameter=h,s.closestPointOnSegment=p,s.pointToSegment=function(t,e,n,r,i,o){var a=p(t,e,n,r,i,o);return s.hypot(t-a[0],e-a[1])},s.approx=function(t,e,n){if(void 0===n&&(n=1),t===e)return!0;if(!isFinite(t)||!isFinite(e))return!1;if(50<n)throw new Error("Within "+(52-n)+" bits isn't really approximate any more");var r=Math.max(Math.max(Math.abs(t),Math.abs(e)),1);return r===r+(1===n?.5:Math.pow(.5,n))*Math.abs(e-t)}});
define('core/math/mathshim',['require'],function(require){"use strict";var h={};return h.cosh=Math.cosh||function(t){return.5*(Math.exp(t)+Math.exp(-t))},h.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(t){var a=0<t?1:-1;return t=0<t?t:-t,.5*-a*Math.exp(t)*h.expm1(-2*t)},h.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(t){var a=0<t?1:-1;t=0<t?t:-t;var n=h.expm1(-2*t);return-a*n/(2+n)},h.acosh=Math.acosh||function(t){return t<1?NaN:Math.log(t+h.sqrtxsqm1(t))},h.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(t){var a=0<t?1:-1;return 1+(t=0<t?t:-t)*t==1?a*h.log1p(t):a*Math.log(t+h.sqrtxsqp1(t))},h.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(t){return.5*(h.log1p(t)-h.log1p(-t))},h.expm1=Math.expm1||function(t){return t+.5*t*t===t?t:Math.exp(t)-1},h.log1p=Math.log1p||function(t){return t-.5*t*t===t?t:Math.log(1+t)},h.sqrtxsqp1=function(t){var a=t*t;return 1+a==1?1:1+a==a?Math.abs(t):Math.sqrt(1+a)},h.sqrtxsqm1=function(t){var a=t*t;return a<1?NaN:a-1==a?Math.abs(t):Math.sqrt(a-1)},h});
define('core/math/poi',["require","exports","core/math/distance"],function(require,i,m){"use strict";function J(i,t){var r;t<i&&(r=i,i=t,t=r);var n=0<i,e=0<t,a=.01<Math.abs(i),s=.01<Math.abs(t);if(a||s)return m.mean(i,t);if(0===i)return t*Math.abs(t);if(0===t)return i*Math.abs(i);if(n!=e)return 0;var f=n?Math.sqrt(i*t):-Math.sqrt(i*t);return i<=f&&f<=t?f:m.mean(i,t)}function F(i,t,r,n,e,a,s){var f,u,o,c;if(isFinite(n))return isFinite(t)||(f=l(i,t,r,n,s))&&(i=f[0],t=f[1]),isFinite(a)||(f=l(r,n,e,a,s))&&(e=f[0],a=f[1]),u=t===n?[i,t]:v(i,t,r,n,s,n),o=a===n?[e,a]:v(r,n,e,a,s,n),u&&o&&(c=J(u[0],o[0])),void 0!==c?[c,s(c)]:void 0}function l(i,t,r,n,e){if(isFinite(t)!==isFinite(n))for(;;){var a=J(i,r),s=e(a);if(a===i||a===r)return isFinite(t)?[i,t]:[r,n];isFinite(s)!==isFinite(t)?(r=a,n=s):(i=a,t=s)}}function v(i,t,r,n,e,a){if(t===a!=(n===a))for(;;){var s=J(i,r),f=e(s);if(s===i||s===r)return t===a?[i,t]:[r,n];f===a!=(t===a)?(r=s,n=f):(i=s,t=f)}}function L(i,t){var r=i[0],n=i[1],e=t[0],a=t[1];return(e-r)*(e-r)+(a-n)*(a-n)}function P(i,t,r,n,e,a){var s,f,u,o,c,F,v,b,M,h=a(i),d=a(t),m=a(r),l=L(h,n),P=L(d,n),C=L(m,n);if(!(t<=i||r<=t)&&isFinite(l)&&isFinite(P)&&isFinite(C)&&!(l<=P||C<=P))for(;;){if(Math.abs(m[0]-h[0])<e&&Math.abs(m[1]-h[1])<e)return[i,r];var O=J(i,t),p=a(O),x=L(p,n),N=J(t,r),q=a(N),E=L(q,n);if(!isFinite(x)||!isFinite(E))return;if(O===i||O===t||N===t||N===r)return x<P&&x<E?[O,O]:E<x&&E<P?[N,N]:[t,t];if(!(x!==P&&E!==P||x!==(P=L(d=a(t=.5*(O+t)),n))&&E!==P))return[i,r];x<P&&x<E?(r=(s=[t,O])[0],t=s[1],m=(f=[d,p])[0],d=f[1],C=(u=[P,x])[0],P=u[1]):E<x&&E<P?(i=(o=[t,N])[0],t=o[1],h=(c=[d,q])[0],d=c[1],l=(F=[P,E])[0],P=F[1]):(i=(v=[O,N])[0],r=v[1],h=(b=[p,q])[0],m=b[1],l=(M=[x,E])[0],C=M[1])}}function C(i,t,r){return void 0===t&&(t=-1/0),void 0===r&&(r=1/0),Math.min(r,Math.max(t,i))}function o(i,t,r,n,e,a){var s,f,u,o,c;c=void 0!==n&&void 0!==e?r+.01*(r<.5*(n+e)?e-n:n-e):1<Math.abs(r)?1.00001*r:r+1e-5;var F=i(r),v=i(c),b=L(F,t),M=L(v,t);if(isFinite(b)&&isFinite(M)){if(b===M)return[r,c];for(b<M&&(r=(s=[c,r])[0],c=s[1],f=[v,F],b=(u=[M,b])[0],M=u[1]);isFinite(r)&&isFinite(c)&&r!==c;){if(void 0!==e&&e<c)return[e,e];if(void 0!==n&&c<n)return[n,n];var h=r+3*(c-r),d=L(i(h),t);if(!isFinite(d))return[r,c];if(d===M)return[r,c];if(M<d){var m=r<c?P(r,c,h,t,a,i):P(h,c,r,t,a,i);return m?[C(m[0],n,e),C(m[1],n,e)]:m}r=(o=[c,M,h,d])[0],b=o[1],c=o[2],M=o[3]}return[r,c]}}function c(i,t,r,n){return!r||n&&Math.min(L(i(n[0]),t),L(i(n[1]),t))<Math.min(L(i(r[0]),t),L(i(r[1]),t))}function O(i,t,r,n,e,a,s,f){var u=Math.abs(n-t),o=Math.abs(a-n),c=Math.abs(f-a);return o<u&&c<u?[[i,t],[r,n]]:o<c&&u<c?[[e,a],[s,f]]:[[r,n],[e,a]]}Object.defineProperty(i,"__esModule",{value:!0}),i.bisectJump=i.findLocalClosestPointOnParametric=i.bisectClosestPointOnParametric=i.bisectExtremum=i.bisectFinite=i.flatCenter=i.bisectZero=i.floatMiddle=void 0,i.floatMiddle=J,i.bisectZero=function(i,t,r,n,e){if(!isNaN(t)&&!isNaN(n)&&t<0!=n<0)for(;;){var a=J(i,r),s=e(a);if(!isFinite(s))return;if(a===i||a===r)return Math.abs(t)<=Math.abs(n)?[i,t]:[r,n];if(0===s)return F(i,t,a,s,r,n,e);t<0!=s<0?(r=a,n=s):(i=a,t=s)}},i.flatCenter=F,i.bisectFinite=l,i.bisectExtremum=function(i,t,r,n,e,a,s){if(i<r&&r<e&&isFinite(t)&&isFinite(n)&&isFinite(a)&&t!==n&&n!==a&&t<n==a<n)for(;;){var f=J(i,r),u=s(f),o=J(r,e),c=s(o);if(!isFinite(u)||!isFinite(c))return;if(f===i||f===r||o===r||o===e)return n<u==t<n?[f,u]:n<c==t<n?[o,c]:[r,n];if(u===n||c===n)return F(i,t,r,n,e,a,s);t<u==t<n&&t<u==n<u?(e=r,a=n,r=f,n=u):a<c==a<n&&n<c==a<c?(i=r,t=n,r=o,n=c):(i=f,t=u,e=o,a=c)}},i.bisectClosestPointOnParametric=P,i.findLocalClosestPointOnParametric=function(i,t,r,n,e,a){var s,f,u=o(i,t,r,n,e,a);return void 0===n||c(i,t,u,s=o(i,t,n,n,e,a))&&(u=s),void 0===e||c(i,t,u,f=o(i,t,e,n,e,a))&&(u=f),u},i.bisectJump=function(i,t,r,n,e,a,s,f){if(f=f||0,!((r-i)*(e-r)<=0)&&isFinite(i)&&isFinite(r)&&isFinite(e)&&isFinite(t)&&isFinite(a)){if(!isFinite(n)){var u=l(i,t,r,n,s),o=l(r,n,e,a,s);if(!u||!o)return;return[u,o]}if(!(Math.abs(n-((e-r)*t+(r-i)*a)/(e-i))<f))for(;;){var c=J(i,r),F=s(c),v=J(r,e),b=s(v),M=Math.abs(F-m.mean(t,n)),h=Math.abs(n-m.mean(F,b)),d=Math.abs(b-m.mean(n,a));if(M<=f&&h<=f&&d<=f)return;if(!isFinite(F)){u=l(i,t,c,F,s),o=l(c,F,e,a,s);if(!u||!o)return;return[u,o]}if(!isFinite(b)){u=l(i,t,v,b,s),o=l(v,b,e,a,s);if(!u||!o)return;return[u,o]}if(!(c!==i&&c!==r||v!==r&&v!==e))return Math.abs(n-t)>Math.abs(a-n)?[[i,t],[r,n]]:[[r,n],[e,a]];if(c===i||c===r)return O(i,t,r,n,v,b,e,a);if(v===r||v===e)return O(i,t,c,F,r,n,e,a);d<M&&h<=M?(e=r,a=n,r=c,n=F):M<d&&h<=d?(i=r,t=n,r=v,n=b):(i=c,t=F,e=v,a=b)}}}});
define('core/math/quadrature',['require','core/math/mathshim','core/math/poi'],function(require){"use strict";var h=require("core/math/mathshim"),a=require("core/math/poi"),l=a.bisectJump,J=a.bisectFinite,r=Math.pow(2,-13),o=r*r,F=o*o,j=o,k=32,y=[],z=[];!function(a,r){for(var t=k;0<t;t--){var i=3.154019550531224/k*t,n=h.sinh(i),e=h.cosh(Math.PI/2*n),o=1/(Math.exp(Math.PI/2*n)*e),s=h.cosh(i)/(e*e);a.push(o),r.push(s)}}(y,z);for(var t=0,i=0;i<z.length;i++)t+=z[i];var A=1/(1+2*t);function B(a,r,t){return.5*(r*(2-t)+a*t)}function C(a,r,t,i,n){return{x1:a,x2:r,value:t,error:i,minerror:n}}function D(a,r,t){var i=Math.abs(a(B(r,t,o))),n=Math.abs(a(B(r,t,2*o))),e=Math.abs(a(B(r,t,4*o)));return!(i<o||n<o)&&(1.95*n<i&&1.95*e<n)}function p(a,r,t){var i,n,e=B(t,r,y[0]),o=B(r,t,y[0]),s=a(e),h=a(o),u=B(r,t,1),N=a(u);if(isFinite(N)&&!isFinite(s)){if(i=J(e,s,u,N,a),Math.abs((i[0]-r)/(t-r))>j)return C(r,t,NaN,NaN,NaN);r=i[0],s=i[1]}if(isFinite(N)&&!isFinite(h)){if(n=J(u,N,o,h,a),Math.abs((n[0]-t)/(t-r))>j)return C(r,t,NaN,NaN,NaN);t=n[0],h=n[1]}if(isFinite(s)&&isFinite(h)&&!isFinite(N)){if(i=J(e,s,u,N,a),n=J(u,N,o,h,a),Math.abs((n[0]-i[0])/(t-r))>j)return C(r,t,NaN,NaN,NaN);N=.5*(i[1]+n[1])}if(D(a,r,t)||D(a,t,r))return C(r,t,NaN,NaN,NaN);for(var m,x,f=N,M=0,b=0,v=0,c=0,l=0;l<k;l+=4)m=a(B(r,t,y[l])),x=a(B(t,r,y[l])),c=Math.max(c,Math.abs(m),Math.abs(x)),M+=z[l]*(m+x),m=a(B(r,t,y[l+1])),x=a(B(t,r,y[l+1])),c=Math.max(c,Math.abs(m),Math.abs(x)),v+=z[l+1]*(m+x),m=a(B(r,t,y[l+2])),x=a(B(t,r,y[l+2])),c=Math.max(c,Math.abs(m),Math.abs(x)),b+=z[l+2]*(m+x),m=a(B(r,t,y[l+3])),x=a(B(t,r,y[l+3])),c=Math.max(c,Math.abs(m),Math.abs(x)),v+=z[l+3]*(m+x);var F=f+M,p=F+b,d=p+v,g=Math.abs(b-F),I=Math.abs(v-p),P=A*(t-r)*d,q=A*Math.abs(t-r)*c*z[0],w=0===g?A*Math.abs(t-r)*I:A*Math.abs(t-r)*I*(I/g)*(I/g);return C(r,t,P,w=Math.max(w,q),q)}function d(a){for(var r=-1/0,t=-1/0,i=-1,n=0,e=0;e<a.length;e++){var o=a[e];n+=o.value,o.error>r&&(r=o.error,i=e),o.minerror>t&&(t=o.minerror)}return{maxerror:r,maxminerror:t,maxindex:i,totalvalue:n}}return{quad:function a(r,t,i,n){if(void 0===n&&(n=32),isNaN(t)||isNaN(i))return NaN;var e,o=1;if(i<t&&(e=t,t=i,i=e,o=-1),t===1/0&&i===1/0)return NaN;if(t===-1/0&&i===-1/0)return NaN;if(t===-1/0&&i===1/0)return o*a(function(a){return r(a/((1+a)*(1-a)))*(1+a*a)/((1+a)*(1+a)*(1-a)*(1-a))},-1,1,n);if(t===-1/0)return o*a(function(a){return-r(i-a/(1-a))/((1-a)*(1-a))},1,0,n);if(i===1/0)return o*a(function(a){return r(t+a/(1-a))/((1-a)*(1-a))},0,1,n);for(var s,h,u,N,m,x=[p(r,t,i)],f=d(x),M=1;M<n&&!(Math.abs(f.maxerror/f.totalvalue)<=32*F||f.maxerror<=32*F||f.maxerror<=32*f.maxminerror)&&isFinite(f.maxerror)&&isFinite(f.maxminerror);M++){var b=x[x.length-1];x[x.length-1]=x[f.maxindex],x[f.maxindex]=b;var v=x.pop(),c=(s=r,h=B(v.x2,v.x1,.125),u=B(v.x1,v.x2,.125),m=N=void 0,N=.5*(h+u),(m=l(h,s(h),N,s(N),u,s(u),s,0))?.5*(m[0][0]+m[1][0]):N);x.push(p(r,v.x1,c)),x.push(p(r,c,v.x2)),f=d(x)}return isFinite(f.maxerror)&&isFinite(f.maxminerror)?Math.abs(f.totalvalue)<=10*f.maxminerror?0:o*f.totalvalue:NaN}}});
define('core/math/tofraction',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,r){if(void 0===r&&(r=1e6),e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};for(var n,t,i,u=0,f=1,d=1,o=0;t=(n=Math.floor(e))*f+u,!(r<(i=n*o+d))&&(u=f,d=o,f=t,o=i,e!==n);)e=1/(e-n);return{n:f,d:o}}});
!function(n){"use strict";function d(n,t){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}function f(n,t,r,e,o,u){return d((c=d(d(t,n),d(e,u)))<<(f=o)|c>>>32-f,r);var c,f}function l(n,t,r,e,o,u,c){return f(t&r|~t&e,n,t,o,u,c)}function v(n,t,r,e,o,u,c){return f(t&e|r&~e,n,t,o,u,c)}function g(n,t,r,e,o,u,c){return f(t^r^e,n,t,o,u,c)}function m(n,t,r,e,o,u,c){return f(r^(t|~e),n,t,o,u,c)}function i(n,t){var r,e,o,u;n[t>>5]|=128<<t%32,n[14+(t+64>>>9<<4)]=t;for(var c=1732584193,f=-271733879,i=-1732584194,a=271733878,h=0;h<n.length;h+=16)c=l(r=c,e=f,o=i,u=a,n[h],7,-680876936),a=l(a,c,f,i,n[h+1],12,-389564586),i=l(i,a,c,f,n[h+2],17,606105819),f=l(f,i,a,c,n[h+3],22,-1044525330),c=l(c,f,i,a,n[h+4],7,-176418897),a=l(a,c,f,i,n[h+5],12,1200080426),i=l(i,a,c,f,n[h+6],17,-1473231341),f=l(f,i,a,c,n[h+7],22,-45705983),c=l(c,f,i,a,n[h+8],7,1770035416),a=l(a,c,f,i,n[h+9],12,-1958414417),i=l(i,a,c,f,n[h+10],17,-42063),f=l(f,i,a,c,n[h+11],22,-1990404162),c=l(c,f,i,a,n[h+12],7,1804603682),a=l(a,c,f,i,n[h+13],12,-40341101),i=l(i,a,c,f,n[h+14],17,-1502002290),c=v(c,f=l(f,i,a,c,n[h+15],22,1236535329),i,a,n[h+1],5,-165796510),a=v(a,c,f,i,n[h+6],9,-1069501632),i=v(i,a,c,f,n[h+11],14,643717713),f=v(f,i,a,c,n[h],20,-373897302),c=v(c,f,i,a,n[h+5],5,-701558691),a=v(a,c,f,i,n[h+10],9,38016083),i=v(i,a,c,f,n[h+15],14,-660478335),f=v(f,i,a,c,n[h+4],20,-405537848),c=v(c,f,i,a,n[h+9],5,568446438),a=v(a,c,f,i,n[h+14],9,-1019803690),i=v(i,a,c,f,n[h+3],14,-187363961),f=v(f,i,a,c,n[h+8],20,1163531501),c=v(c,f,i,a,n[h+13],5,-1444681467),a=v(a,c,f,i,n[h+2],9,-51403784),i=v(i,a,c,f,n[h+7],14,1735328473),c=g(c,f=v(f,i,a,c,n[h+12],20,-1926607734),i,a,n[h+5],4,-378558),a=g(a,c,f,i,n[h+8],11,-2022574463),i=g(i,a,c,f,n[h+11],16,1839030562),f=g(f,i,a,c,n[h+14],23,-35309556),c=g(c,f,i,a,n[h+1],4,-1530992060),a=g(a,c,f,i,n[h+4],11,1272893353),i=g(i,a,c,f,n[h+7],16,-155497632),f=g(f,i,a,c,n[h+10],23,-1094730640),c=g(c,f,i,a,n[h+13],4,681279174),a=g(a,c,f,i,n[h],11,-358537222),i=g(i,a,c,f,n[h+3],16,-722521979),f=g(f,i,a,c,n[h+6],23,76029189),c=g(c,f,i,a,n[h+9],4,-640364487),a=g(a,c,f,i,n[h+12],11,-421815835),i=g(i,a,c,f,n[h+15],16,530742520),c=m(c,f=g(f,i,a,c,n[h+2],23,-995338651),i,a,n[h],6,-198630844),a=m(a,c,f,i,n[h+7],10,1126891415),i=m(i,a,c,f,n[h+14],15,-1416354905),f=m(f,i,a,c,n[h+5],21,-57434055),c=m(c,f,i,a,n[h+12],6,1700485571),a=m(a,c,f,i,n[h+3],10,-1894986606),i=m(i,a,c,f,n[h+10],15,-1051523),f=m(f,i,a,c,n[h+1],21,-2054922799),c=m(c,f,i,a,n[h+8],6,1873313359),a=m(a,c,f,i,n[h+15],10,-30611744),i=m(i,a,c,f,n[h+6],15,-1560198380),f=m(f,i,a,c,n[h+13],21,1309151649),c=m(c,f,i,a,n[h+4],6,-145523070),a=m(a,c,f,i,n[h+11],10,-1120210379),i=m(i,a,c,f,n[h+2],15,718787259),f=m(f,i,a,c,n[h+9],21,-343485551),c=d(c,r),f=d(f,e),i=d(i,o),a=d(a,u);return[c,f,i,a]}function a(n){for(var t="",r=32*n.length,e=0;e<r;e+=8)t+=String.fromCharCode(n[e>>5]>>>e%32&255);return t}function h(n){var t=[];for(t[(n.length>>2)-1]=void 0,e=0;e<t.length;e+=1)t[e]=0;for(var r=8*n.length,e=0;e<r;e+=8)t[e>>5]|=(255&n.charCodeAt(e/8))<<e%32;return t}function e(n){for(var t,r="0123456789abcdef",e="",o=0;o<n.length;o+=1)t=n.charCodeAt(o),e+=r.charAt(t>>>4&15)+r.charAt(15&t);return e}function r(n){return unescape(encodeURIComponent(n))}function o(n){return a(i(h(t=r(n)),8*t.length));var t}function u(n,t){return function(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,16<o.length&&(o=i(o,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}(r(n),r(t))}function t(n,t,r){return t?r?u(t,n):e(u(t,n)):r?o(n):e(o(n))}"function"==typeof define&&define.amd?define('core/lib/md5',[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:n.md5=t}(this);
define('core/vendor/d3-color',['require'],function(require){function e(e,t,r){(e.prototype=t.prototype=r).constructor=e}function t(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function h(){}var r=.7,n=1/r,i="\\s*([+-]?\\d+)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",s=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\("+[i,i,i]+"\\)$"),u=new RegExp("^rgb\\("+[o,o,o]+"\\)$"),g=new RegExp("^rgba\\("+[i,i,i,a]+"\\)$"),c=new RegExp("^rgba\\("+[o,o,o,a]+"\\)$"),d=new RegExp("^hsl\\("+[a,o,o]+"\\)$"),b=new RegExp("^hsla\\("+[a,o,o,a]+"\\)$"),p={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function m(){return this.rgb().formatHex()}function f(){return this.rgb().formatRgb()}function y(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=s.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?w(t):3===r?new v(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?k(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?k(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=l.exec(e))?new v(t[1],t[2],t[3],1):(t=u.exec(e))?new v(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=g.exec(e))?k(t[1],t[2],t[3],t[4]):(t=c.exec(e))?k(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=d.exec(e))?E(t[1],t[2]/100,t[3]/100,1):(t=b.exec(e))?E(t[1],t[2]/100,t[3]/100,t[4]):p.hasOwnProperty(e)?w(p[e]):"transparent"===e?new v(NaN,NaN,NaN,0):null}function w(e){return new v(e>>16&255,e>>8&255,255&e,1)}function k(e,t,r,n){return n<=0&&(e=t=r=NaN),new v(e,t,r,n)}function N(e){return e instanceof h||(e=y(e)),e?new v((e=e.rgb()).r,e.g,e.b,e.opacity):new v}function x(e,t,r,n){return 1===arguments.length?N(e):new v(e,t,r,null==n?1:n)}function v(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function M(){return"#"+q(this.r)+q(this.g)+q(this.b)}function R(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function q(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function E(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||1<=r?e=t=NaN:t<=0&&(e=NaN),new C(e,t,r,n)}function $(e){if(e instanceof C)return new C(e.h,e.s,e.l,e.opacity);if(e instanceof h||(e=y(e)),!e)return new C;if(e instanceof C)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(r-n)/s+6*(r<n):r===a?(n-t)/s+2:(t-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=0<l&&l<1?0:o,new C(o,s,l,e.opacity)}function H(e,t,r,n){return 1===arguments.length?$(e):new C(e,t,r,null==n?1:n)}function C(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function j(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}return e(h,y,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHsl:function(){return $(this).formatHsl()},formatRgb:f,toString:f}),e(v,x,t(h,{brighter:function(e){return e=null==e?n:Math.pow(n,e),new v(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?r:Math.pow(r,e),new v(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatRgb:R,toString:R})),e(C,H,t(h,{brighter:function(e){return e=null==e?n:Math.pow(n,e),new C(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?r:Math.pow(r,e),new C(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new v(j(240<=e?e-240:120+e,i,n),j(e,i,n),j(e<120?240+e:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}})),{Color:h,darker:r,brighter:n,color:y,rgbConvert:N,rgb:x,Rgb:v,hslConvert:$,hsl:H}});
define('core/math/builtin',['require','core/math/mathshim','core/math/distance','core/math/quadrature','core/math/tofraction','core/math/poi','core/lib/md5','core/vendor/d3-color'],function(require){"use strict";var e=require("core/math/mathshim"),a=require("core/math/distance"),r=require("core/math/quadrature"),t=require("core/math/tofraction").default,f=require("core/math/poi").floatMiddle,n=require("core/lib/md5"),u=require("core/vendor/d3-color");function o(r,t,n){return Math.max(t,Math.min(n,r))}var s={};s.cosh=e.cosh,s.sinh=e.sinh,s.tanh=e.tanh,s.acosh=e.acosh,s.asinh=e.asinh,s.atanh=e.atanh,s.expm1=e.expm1,s.log1p=e.log1p,s.sqrtxsqp1=e.sqrtxsqp1,s.sqrtxsqm1=e.sqrtxsqm1,s.mod=function(r,t){return r-t*Math.floor(r/t)},s.round=function(r,t){if(void 0===t&&(t=0),0===(t=Math.round(t)))return Math.round(r);var n=Math.pow(10,t);return Math.round(r*n)/n},s.sign=Math.sign||function(r){return 0===r?0:0<r?1:r<0?-1:NaN},s.lcm=function(r,t){r=Math.round(r),t=Math.round(t);var n=s.gcd(r,t);return Math.abs(r/n*t)},s.gcd=function(r,t){var n;if((r=Math.round(r))<0&&(r=-r),(t=Math.round(t))<0&&(t=-t),r<t&&(n=t,t=r,r=n),0===t)return r;for(var a=r%t;0<a;)a=(r=t)%(t=a);return t},s.listGCD=function(r){if(0===r.length)return NaN;for(var t=r[0],n=1;n<r.length;n++)t=s.gcd(t,r[n]);return t},s.listLCM=function(r){if(0===r.length)return NaN;for(var t=r[0],n=1;n<r.length;n++)t=s.lcm(t,r[n]);return t},s.nCr=function(r,t){if((r=Math.round(r))<(t=Math.round(t))||r<0||t<0)return 0;if(t===1/0||r===1/0)return NaN;for(var n=1,a=0;a<t;a++)n*=(r-a)/(a+1);return n},s.nPr=function(r,t){if((r=Math.round(r))<(t=Math.round(t))||r<0||t<0)return 0;if(t===1/0||r===1/0)return NaN;for(var n=1,a=0;a<t;a++)n*=r-a;return n},s.factorial=function(r){return s.gamma(r+1)},s.gamma=function(r){if(r<0)return Math.PI/(s.sin(Math.PI*r)*s.gamma(1-r));if(170<r)return 1/0;var t=Math.round(r)===r,n=r<15?i(r):r<120?h(r):Math.exp(c(r));return t?Math.round(n):n};var i=function(r){var t=1+r*(4.077131788261185+r*(7.024675027156382+r*(6.657107767450176+r*(3.766266976716022+r*(1.2792371666711133+r*(.24304596436338005+.020049769312165774*r)))))),n=1+r*(4.154347453162709+r*(7.270007565107539+r*(6.97805297331391+r*(3.989651532924167+r*(1.367176195613119+r*(.26175627691546965+.021742722739397567*r))))));return Math.E*Math.pow((1+r)/Math.E,1+r)/(r*Math.sqrt(1+r))*(t/n)},h=function(r){var t=r-1;return Math.pow(t,t)*Math.exp(m(t)-t)*Math.sqrt(2*Math.PI*t)},c=function(r){var t=r-1;return t*(Math.log(t)-1)+.5*Math.log(2*Math.PI*t)+m(t)};s.lnGamma=function(r){return r<0?NaN:r<15?Math.log(i(r)):c(r)},s.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],s.cotDerivative=function(r,t){if(r!==Math.floor(r))return NaN;if(r<0)return NaN;if(0===r)return 1/s.tan(t);var n=s.sin(t);if(1===r)return-1/(n*n);var a=s.cos(t);if(2===r)return 2*a/(n*n*n);for(var e,u,o,i=[0,2],f=3;f<=r;f++){for(e=[],c=0;c<f;c++)(o=u=0)<c&&(u=(f-c+1)*i[c-1]),c+2<f&&(o=(c+1)*i[c+1]),e.push(-(u+o));i=e}for(var h=0,c=r-1;0<=c;c--)h=e[c]+a*h;return h/Math.pow(n,r+1)},s.polyGamma=function(r,t){if(r<0)return NaN;if(r!==Math.floor(r))return NaN;var n=r%2==0?-1:1;if(t<0)return-n*s.polyGamma(r,1-t)-Math.pow(Math.PI,r+1)*s.cotDerivative(r,Math.PI*t);for(var a=s.factorial(r),e=0,u=Math.pow(t,-(r+1));t<10;)e+=u,t++,u=Math.pow(t,-(r+1));e+=0===r?-Math.log(t):u*t/r,e+=.5*u;for(var o=s.bernoulliTable,i=r+1,f=2,h=u*t*i/f,c=1/(t*t),M=1;M<=14;M++)e+=(h*=c)*o[M-1],h*=++i/++f,h*=++i/++f;return a*n*e},s.toFraction=t,s.log=function(r){var t=Math.log(r);return Math.exp(Math.round(t))===r?Math.round(t):t},s.log_base=function(r,t){if(0===t)return NaN;var n=t===Math.E?Math.log(r):2===t&&Math.log2?Math.log2(r):10===t&&Math.log10?Math.log10(r):Math.log(r)/Math.log(t);return Math.pow(t,Math.round(n))===r?Math.round(n):n},s.common_log=function(r){return s.log_base(r,10)},s.pow=function(r,t){if(!isFinite(r)&&0===t)return NaN;if(0<=r||t===Math.floor(t))return Math.pow(r,t);var n=s.toFraction(t,100);return a.approx(n.n/n.d,t,2)&&n.d%2==1?(n.n%2==0?1:-1)*Math.pow(-r,t):NaN},s.nthroot=function(r,t){return s.pow(r,1/t)};var M=1/Math.PI;function l(r){return!(1e12<r)&&Math.round(M*r)*Math.PI===r}function v(r){if(!(1e12<r)){var t=Math.round(2*M*r);return t%2==1&&t*Math.PI==2*r}}s.sin=function(r){return l(Math.abs(r))?0:Math.sin(r)},s.cos=function(r){return v(Math.abs(r))?0:Math.cos(r)},s.tan=function(r){var t=Math.abs(r);return l(t)?0:v(t)?1/0:Math.tan(r)},s.sec=function(r){return v(Math.abs(r))?1/0:1/Math.cos(r)},s.csc=function(r){return l(Math.abs(r))?1/0:1/Math.sin(r)},s.cot=function(r){var t=Math.abs(r);return l(t)?1/0:v(t)?0:1/Math.tan(r)},s.acot=function(r){return Math.PI/2-Math.atan(r)},s.acsc=function(r){return Math.asin(1/r)},s.asec=function(r){return Math.acos(1/r)},s.sech=function(r){return 1/s.cosh(r)},s.csch=function(r){return 1/s.sinh(r)},s.coth=function(r){return 1/s.tanh(r)},s.asech=function(r){return s.acosh(1/r)},s.acsch=function(r){return s.asinh(1/r)},s.acoth=function(r){return s.atanh(1/r)},s.mean=function(r){for(var t=0,n=0;n<r.length;n++)t+=r[n];return t/r.length},s.total=function(r){for(var t=0,n=0;n<r.length;n++)t+=r[n];return t};function N(r){return 50<r?Math.exp(.5*((1-r)*e.log1p(-1/(r-1))-1)+m(.5*(r-1))-m(.5*(r-2)))*Math.sqrt((1-1/r)/(2*Math.PI)):s.gamma((r+1)/2)/(s.gamma(r/2)*Math.sqrt(r*Math.PI))}var m=function(r){var t=r*r;return(.08333333333333333-(.002777777777777778-(.0007936507936507937-(.0005952380952380953-.0008417508417508417/t)/t)/t)/t)/r};s.tpdf=function(r,t){return t<=0?NaN:N(t)*Math.pow(1+r*r/t,-(t+1)/2)};var d=function(r,t){if(0<t)return 1-d(r,-t);if(t===-1/0)return 0;var n=Math.sqrt(2*r/(r+1));if(Math.abs(t/n)<.001)return.5*(1+Math.sqrt(Math.PI)*N(r)*n*s.erf(t/n));if(t/r<-1e3){var a=t*t;return N(r)*Math.pow(r,.5*(r-1))*Math.pow(Math.abs(t),-r)*(1-r*r*(r+1)*(1/(2+r)+r*(r+3)/(4*(4+r)*a))/(2*a))}var e=Math.sqrt(t*t+r);return q((t+e)/(2*e),r/2,r/2)};s.tcdf=function(r,t,n){return n<=0?NaN:r===-1/0?d(n,t):0<r&&0<t?d(n,-r)-d(n,-t):d(n,t)-d(n,r)};function p(r,t,n){return(r-t)/(Math.SQRT2*Math.abs(n))}function g(r){return r<0?.5*Math.exp(-r*r)*s.erfcx(-r):1-.5*Math.exp(-r*r)*s.erfcx(r)}var q=function(r,t,n){if(r<0||1<r)throw new RangeError("First argument must be between 0 and 1.");if(1===t&&1===n)return r;if(0===r)return 0;if(1===r)return 1;if(0===t)return 1;if(0===n)return 0;var a=Math.exp(s.lnGamma(t+n)-s.lnGamma(t)-s.lnGamma(n)+t*Math.log(r)+n*e.log1p(-r));return r<(t+1)/(t+n+2)?a*x(r,t,n)/t:1-a*x(1-r,n,t)/n},x=function(r,t,n){var a,e,u,o,i=1e-30,f=1,h=t+n,c=t+1,M=t-1,s=1,l=1-h*r/c;for(Math.abs(l)<i&&(l=i),o=l=1/l;f<=100&&(l=1+(e=f*(n-f)*r/((M+(a=2*f))*(t+a)))*l,Math.abs(l)<i&&(l=i),s=1+e/s,Math.abs(s)<i&&(s=i),o*=(l=1/l)*s,l=1+(e=-(t+f)*(h+f)*r/((t+a)*(c+a)))*l,Math.abs(l)<i&&(l=i),s=1+e/s,Math.abs(s)<i&&(s=i),o*=u=(l=1/l)*s,!(Math.abs(u-1)<3e-7));f++);return o};s.normalcdf=function(r,t,n,a){var e=p(t,n,a);if(r===-1/0)return g(e);var u=p(r,n,a);return 0<r&&0<t?g(-u)-g(-e):g(e)-g(u)},s.normalpdf=function(r,t,n){return 1/Math.sqrt(2*Math.PI*n*n)*Math.exp(-(r-t)*(r-t)/(2*n*n))},s.random=function(r){var t=n(r);return(4294967296*(2097151&parseInt(t.slice(0,8),16))+parseInt(t.slice(8,16),16))/9007199254740992},s.shuffle=function(r,t){for(var n=t.length-1;0<n;n--){var a=r+"::sc"+n,e=Math.floor(s.random(a)*(n+1)),u=t[n];t[n]=t[e],t[e]=u}},s.randomPerm=function(r,t){for(var n=[],a=0;a<t;a++)n.push(a);return s.shuffle(r,n),n},s.uniformSample=function(r,t,n){return s.random(r)*(n-t)+t},s.normalSample=function(r,t,n){for(var a,e,u,o,i=0;a=r+"::sc"+i,i+=1,e=2*s.uniformSample(a,0,1)-1,a=r+"::sc"+i,i+=1,1<=(o=e*e+(u=2*s.uniformSample(a,0,1)-1)*u)||0===o;);return t+n*e*Math.sqrt(-2*Math.log(o)/o)},s.tSample=function(r,t){if(t<=0)return NaN;for(var n,a,e,u=0;f=r+"::sc"+u,u+=1,n=2*s.uniformSample(f,0,1)-1,f=r+"::sc"+u,u+=1,1<(e=n*n+(a=2*s.uniformSample(f,0,1)-1)*a););var o=n*n/e,i=t*(Math.pow(e,-2/t)-1),f=r+"::sc"+u;return u+=1,(s.uniformSample(f,0,1)<.5?-1:1)*Math.sqrt(o*i)},s.binomSample=function(r,t,n){return(t=o(Math.round(t),0,1/0))===1/0?NaN:(n=o(n,0,1),s.invBinom(s.uniformSample(r,0,1),t,n))},s.poissonSample=function(r,t){return t<=0?NaN:s.invPoisson(s.uniformSample(r,0,1),t)};function b(r,t,n){if(t<=r)return 1;if(r<0)return 0;for(var a=n/(1-n),e=Math.pow(1-n,t),u=e,o=1;o<=Math.min(t,r);o++)u+=e*=(t-o+1)/o*a;return u}s.binomcdf=function(r,t,n,a){return(n=o(Math.round(n),0,1/0))===1/0?NaN:(a=o(a,0,1),t<0?0:(r=Math.ceil(r),t=Math.floor(t),r===-1/0?b(t,n,a):b(t,n,a)-b(r-1,n,a)))},s.binompdf=function(r,t,n){return r=Math.round(r),(t=o(Math.round(t),0,1/0))===1/0?NaN:(n=o(n,0,1),r<0||t<r?0:s.nCr(t,r)*Math.pow(n,r)*Math.pow(1-n,t-r))},s.poissonpdf=function(r,t){return t<=0?NaN:(r=Math.round(r))<0?0:Math.exp(-t+r*Math.log(t)-s.lnGamma(r+1))};function P(r,t){if(r===1/0)return 1;if(r<0)return 0;for(var n=1,a=1,e=1;e<=r;e++){var u=a;if((a+=n*=t/e)===u)break}return Math.exp(-t)*a}s.poissoncdf=function(r,t,n){return n<=0?NaN:(r=Math.ceil(r),(t=Math.floor(t))<0?0:r===-1/0?P(t,n):P(t,n)-P(r-1,n))},s.uniformpdf=function(r,t,n){return n<=t?NaN:r<t||n<r?0:1/(n-t)};function w(r,t,n){return n<=t?NaN:r<t?0:n<r?1:(r-t)/(n-t)}s.uniformcdf=function(r,t,n,a){return w(t,n,a)-w(r,n,a)},s.erf=function(r){var t=-r*r;if(t<-750)return 0<=r?1:-1;if(.065<=r)return 1-Math.exp(t)*s.erfcx(r);if(r<=-.065)return Math.exp(t)*s.erfcx(-r)-1;return r*(1.1283791670955126+t*(.37612638903183754+t*(.11283791670955126+t*(.026866170645131252+.005223977625442188*t))))},s.erfcx=function(r){if(r<0)return r<-6.1?2*Math.exp(r*r):2*Math.exp(r*r)-s.erfcx(-r);if(50<r){var t=.5641895835477563,n=r*r;return 5e7<r?t/r:t*(n*(4.5+n)+2)/(r*(n*(5+n)+3.75))}return(.9999999999999999+r*(2.224574423459406+r*(2.444115549920689+r*(1.7057986861852539+r*(.8257463703357973+r*(.28647031042892007+r*(.07124513844341643+r*(.012296749268608364+r*(.001347817214557592+7263959403471071e-20*r)))))))))/(1+r*(3.352953590554884+r*(5.227518529742423+r*(5.003720878235473+r*(3.266590890998987+r*(1.5255421920765353+r*(.5185887413188858+r*(.12747319185915415+r*(.02185979575963238+r*(.0023889438122503674+.00012875032817508128*r))))))))))},s.invNorm=function(r){var t,n,a;return.5<r?-s.invNorm(1-r):.5===r?0:r<0?NaN:0===r?-1/0:(a=r<.02425?(((((-.00778489400243029*(t=Math.sqrt(-2*Math.log(r)))-.322396458041136)*t-2.40075827716184)*t-2.54973253934373)*t+4.37466414146497)*t+2.93816398269878)/((((.00778469570904146*t+.32246712907004)*t+2.445134137143)*t+3.75440866190742)*t+1):(((((-39.6968302866538*(n=(t=r-.5)*t)+220.946098424521)*n-275.928510446969)*n+138.357751867269)*n-30.6647980661472)*n+2.50662827745924)*t/(((((-54.4760987982241*n+161.585836858041)*n-155.698979859887)*n+66.8013118877197)*n-13.2806815528857)*n+1))-Math.sqrt(2*Math.PI)*(.5*s.erfcx(-a/Math.SQRT2)-Math.exp(.5*a*a)*r)},s.invPoisson=function(r,t){if(t<=0||r<0||1<r)return NaN;if(0===r)return 0;if(1===r)return 1/0;for(var n=1,a=1,e=1;Math.exp(-t)*a<r;){if(a+(n*=t/e)===a)return 1/0;a+=n,e+=1}return e-1},s.invBinom=function(r,t,n){if(t!==Math.round(t))return NaN;if(n<0||1<n)return NaN;if(r<0||1<r)return NaN;if(0===r)return 0;if(1===r)return t;if(0===t)return 0;if(1===n)return t;if(0===n)return 0;for(var a=n/(1-n),e=Math.pow(1-n,t),u=e,o=1;u<r;){if(u+(e*=(t-o+1)/o*a)===u)return t;if(t<o)return t;u+=e,o+=1}return o-1},s.invT=function(r,t){return isNaN(t)||t<=0||r<0||1<r?NaN:0===r?-1/0:1===r?1/0:1===t||2===t||4===t?I(t,r):.5===r?0:.5<r?(n=1<t?s.invNorm(r):I(1,r),a=1<t?I(1,r):Math.pow(s.tpdf(0,t)*Math.pow(t,(t-1)/2)/(1-r),1/t),S(t,r,n,a)):-s.invT(1-r,t);var n,a};var I=function(r,t){var n=4*t*(1-t);switch(r){case 1:return Math.tan(Math.PI*(t-.5));case 2:return 2*(t-.5)*Math.sqrt(2/n);case 4:var a=Math.cos(Math.acos(Math.sqrt(n))/3)/Math.sqrt(n);return 2*Math.sign(t-.5)*Math.sqrt(a-1);default:throw new Error("_invTSimple() must be called with 1, 2, or 4 df.")}},S=function(r,t,n,a){if(!isFinite(n)||!isFinite(a))return NaN;for(var e,u,o=n,i=a;;){if(e=f(o,i),u=d(r,e),e===o||e===i)return t<u?o:i;u<t?o=e:i=e}};function T(r,t,n){return n<0?s.tcdf(-1/0,r,t):0<n?s.tcdf(-1/0,-r,t):2*s.tcdf(-1/0,-Math.abs(r),t)}return s.invUniform=function(r,t,n){return r<0||1<r||n<=t?NaN:0===r?t:1===r?n:t+r*(n-t)},s.tscore=function(r,t){var n=s.stdev(r);return(s.mean(r)-t)*Math.sqrt(r.length)/n},s.itscore=function(r,t){var n=r.length,a=s.mean(r),e=s.stdev(r),u=t.length,o=s.mean(t),i=s.stdev(t);return(a-o)/(Math.sqrt(((n-1)*e*e+(u-1)*i*i)/(n+u-2))*Math.sqrt(1/n+1/u))},s.ttest=function(r,t){1===arguments.length&&(t=0);var n=s.tscore(r,t),a=r.length-1;return{lessThan:T(n,a,-1),greaterThan:T(n,a,1),notEqual:T(n,a,0)}},s.ittest=function(r,t){var n=s.itscore(r,t),a=r.length+t.length-2;return{lessThan:T(n,a,-1),greaterThan:T(n,a,1),notEqual:T(n,a,0)}},s.stats=function(r){return{min:s.listMin(r),q1:s.quartile(r,1),median:s.median(r),q3:s.quartile(r,3),max:s.listMax(r)}},s.length=function(r){return r.length},s.listMin=function(r){if(r.length<1)return NaN;var t=r[0];if(isNaN(t))return NaN;for(var n=1;n<r.length;n++){if(isNaN(r[n]))return NaN;r[n]<t&&(t=r[n])}return t},s.listMax=function(r){if(r.length<1)return NaN;var t=r[0];if(isNaN(t))return NaN;for(var n=1;n<r.length;n++){if(isNaN(r[n]))return NaN;r[n]>=t&&(t=r[n])}return t},s.quantile=function(r,t){if(!isFinite(t)||t<0||1<t)return NaN;if(r.some(isNaN))return NaN;if(0===r.length)return NaN;var n=r.length,a=s.sortPerm(r),e=t*(n-1);return Math.floor(e)===e?r[a[e]]:(Math.ceil(e)-e)*r[a[Math.floor(e)]]+(e-Math.floor(e))*r[a[Math.ceil(e)]]},s.quartile=function(r,t){if(!isFinite(t)||t<0||4<t)return NaN;if(r.some(isNaN))return NaN;var n=s.sortPerm(r),a=s.quartileIndex(r,t),e=Math.floor(a),u=Math.ceil(a);return(r[n[e]]+r[n[u]])/2},s.sortPerm=function(n){for(var r=n.length,t=[],a=0;a<r;a++)t.push(a);return t.sort(function(r,t){return n[r]-n[t]}),t},s.quartileIndex=function(r,t){t=Math.round(t);var n,a=r.length,e=a%2==1;return 1===a?0:(0===t&&(n=0),2===t&&(n=(a-1)/2),4===t&&(n=a-1),1===t&&(n=e?(a+1)/4-1:(a+2)/4-1),3===t&&(n=e?(3*a+3)/4-1:(3*a+2)/4-1),n)},s.upperQuantileIndex=function(r,t){return s.sortPerm(r)[Math.ceil(t*(r.length-1))]+1},s.lowerQuantileIndex=function(r,t){return s.sortPerm(r)[Math.floor(t*(r.length-1))]+1},s.upperQuartileIndex=function(r,t){return s.sortPerm(r)[Math.ceil(s.quartileIndex(r,t))]+1},s.lowerQuartileIndex=function(r,t){return s.sortPerm(r)[Math.floor(s.quartileIndex(r,t))]+1},s.median=function(r){return s.quantile(r,.5)},s.argMin=function(r){if(r.length<1)return 0;var t=r[0];if(isNaN(t))return 0;for(var n=0,a=1;a<r.length;a++){if(isNaN(r[a]))return 0;r[a]<t&&(t=r[n=a])}return n+1},s.argMax=function(r){if(r.length<1)return 0;var t=r[0];if(isNaN(t))return 0;for(var n=0,a=1;a<r.length;a++)if(r[a]>=t){if(isNaN(r[a]))return 0;t=r[n=a]}return n+1},s.varp=function(r){for(var t=s.mean(r),n=0,a=0;a<r.length;a++){var e=r[a]-t;n+=e*e}return n/r.length},s.mad=function(r){for(var t=s.mean(r),n=0,a=0;a<r.length;a++)n+=Math.abs(r[a]-t);return n/r.length},s.var=function(r){var t=r.length;return s.varp(r)*t/(t-1)},s.covp=function(r,t){if(r.length!==t.length)return NaN;for(var n=r.length,a=s.mean(r),e=s.mean(t),u=0,o=0;o<n;o++)u+=(r[o]-a)*(t[o]-e);return u/n},s.cov=function(r,t){if(r.length!==t.length)return NaN;var n=r.length;return s.covp(r,t)*n/(n-1)},s.corr=function(r,t){if(r.length!==t.length)return NaN;for(var n,a,e=r.length,u=s.mean(r),o=s.mean(t),i=0,f=0,h=0,c=0;c<e;c++)i+=(n=r[c]-u)*n,f+=(a=t[c]-o)*a,h+=n*a;return h/Math.sqrt(i*f)},s.rank=function(r){var t=r.length;if(0===t)return[];for(var n=[],a=[],e=0;e<t;e++)a.push([r[e],e]);a.sort(function(r,t){var n=r[0],a=t[0];return n===1/0&&a===1/0||n===-1/0&&a===-1/0?0:n-a}),e=0;for(var u=1;e<t;){for(f=e;f<t-1&&a[f][0]===a[f+1][0];)f+=1;for(var o,i=f-e+1,f=0;f<i;f++)n[o=a[e+f][1]]=isNaN(r[o])?NaN:u+.5*(i-1);u+=i,e+=i}return n},s.spearman=function(r,t){return s.corr(s.rank(r),s.rank(t))},s.stdev=function(r){return Math.sqrt(s.var(r))},s.stdevp=function(r){return Math.sqrt(s.varp(r))},s.quad=r.quad,s.distance=function(r,t){return a.hypot(t[0]-r[0],t[1]-r[1])},s.midpoint=function(r,t){return[.5*(r[0]+t[0]),.5*(r[1]+t[1])]},s.addPoints=function(r,t){return[r[0]+t[0],r[1]+t[1]]},s.subtractPoints=function(r,t){return[r[0]-t[0],r[1]-t[1]]},s.negatePoint=function(r){return[-r[0],-r[1]]},s.multiplyPoint=function(r,t){return[t*r[0],t*r[1]]},s.dividePoint=function(r,t){return[r[0]/t,r[1]/t]},s.rgb=function(r,t,n){return[o(Math.round(r),0,255),o(Math.round(t),0,255),o(Math.round(n),0,255)]},s.hsv=function(r,t,n){r=o(r,0,360),t=o(t,0,1);var a=(n=o(n,0,1))*(1-t/2);t=0==a||1==a?0:(n-a)/Math.min(a,1-a);var e=u.hsl(r,t,a).rgb();return s.rgb(e.r,e.g,e.b)},s});
define('core/math/rational-arithmetic-sequence',['require','core/math/distance','core/math/builtin'],function(require){"use strict";var o=require("core/math/distance"),e=require("core/math/builtin");return function(n,t){var r=e.toFraction(n),a=e.toFraction(t);if(o.approx(r.n/r.d,n)&&o.approx(a.n/a.d,t)){var c=e.lcm(r.d,a.d),i=r.n*(c/r.d);return{nstart:i,nstep:a.n*(c/a.d)-i,lcm:c}}}});
define('lib/named-colors',['require'],function(require){"use strict";return{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});
define('lib/color-distance',['require','underscore','lib/named-colors'],function(require){"use strict";var c=require("underscore"),a=require("lib/named-colors");function M(n){var r,t=[];if("rgb"===(e=n.toLowerCase()).slice(0,3))try{t=e.replace(/[^\d,]/g,"").split(",").slice(0,3),t=c.map(t,function(r){return parseInt(r,10)})}catch(r){i(n)}else if("#"===e[0]){var e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/,function(r,n,t,e){return n+n+t+t+e+e});try{t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/.exec(e).slice(1),t=c.map(t,function(r){return parseInt(r,16)})}catch(r){i(n)}}else t=a[e];return r=t,c.isArray(r)&&3===r.length&&c.every(r,function(r){return Number.isInteger(r)&&0<=r&&r<=255})||i(n),{R:t[0],G:t[1],B:t[2]}}function i(r){throw new Error("Invalid color string: "+r)}function w(r){var n=r.R,t=r.G,e=r.B,a=[];return a[0]=.49*n+.31*t+.2*e,a[1]=.17697*n+.8124*t+.01063*e,a[2]=.01*t+.99*e,{X:(a=c.map(a,function(r){return r/.17697}))[0],Y:a[1],Z:a[2]}}function q(r){var n=r.X,t=r.Y,e=r.Z,a=[];return a[0]=116*u(t/100)-16,a[1]=500*(u(n/95.047)-u(t/100)),a[2]=200*(u(t/100)-u(e/108.883)),{L:a[0],a:a[1],b:a[2]}}function u(r){var n=6/29;return r>Math.pow(n,3)?Math.pow(r,1/3):r/(3*n*n)+4/29}function o(r,n){var t,e,a,c,i,u,o,f,s,l,d,p,h,v,b,m=q(w(M(r))),g=q(w(M(n)));return e=g,a=(t=m).L,c=t.a,i=t.b,u=e.L,o=e.a,f=e.b,s=a-u,l=Math.sqrt(c*c+i*i),d=l-Math.sqrt(o*o+f*f),p=c-o,h=i-f,v=d/(1+.045*l),b=Math.sqrt(p*p+h*h-d*d)/(1+.015*l),Math.sqrt(s*s+v*v+b*b)}return{str2rgb:M,difference:o,closestColor:function(n,r){var t=c.map(r,function(r){return o(n,r)}),e=c.min(t);return r[t.indexOf(e)]}}});
define('core/math/functions',["require","exports","core/math/builtin"],function(require,e,r){"use strict";function u(e){delete e.fn}function a(e){e.fn=i(e.args,e.source)}function i(e,t){var n=e.join(",");return new Function("BuiltIn","return (function("+n+'){"use strict"; '+t+"})")(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.closureFunctionWithBuiltIn=e.createEvaluateFunction=e.rehydrateCompiledFunction=e.dehydrateCompiledFunction=e.rehydrateGraphData=e.dehydrateGraphData=void 0,e.dehydrateGraphData=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t].compiled;r&&u(r)}},e.rehydrateGraphData=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t].compiled;r&&a(r)}},e.dehydrateCompiledFunction=u,e.rehydrateCompiledFunction=a,e.createEvaluateFunction=function(e,t){for(var n=[],r=0;r<t;r++)n.push("values["+r+"]");return i(["values"],"return "+e(n))},e.closureFunctionWithBuiltIn=i});
define('core/math/parser/input-span',["require","exports"],function(require,n){"use strict";function e(n,t,e){return{input:n,start:t,end:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.slice=n.joinSpans=n.emptySpanAt=n.Span=void 0,n.Span=e,n.emptySpanAt=function(n,t){return e(n,t,t)},n.joinSpans=function(n,t){if(n.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return e(n.input,n.start,t.end)},n.slice=function(n){return n.input.slice(n.start,n.end)}});
define('core/math/policy',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultPolicy=void 0;var n=["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"];e.defaultPolicy={assignmentForbidden:function(e){return!0},graphingEnabled:function(){return!1},isValidSlider:function(e){return!1},sliderVariables:function(e){return[]},ansEnabled:function(){return!1},disabledFeatures:function(){return n}}});
define('core/math/parsenode/base',['require','pjs','core/math/functions','core/math/parser/input-span','core/math/policy'],function(require){"use strict";var e=require("pjs"),s=require("core/math/functions"),r=require("core/math/parser/input-span"),u=require("core/math/policy").defaultPolicy;return e(function(e,n,t){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._exports=[]};var i=e.exportPenalty=0;e.tmpVar=function(){return"tmp"+i++},e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var n=this.getConcreteTree(u,e).getEvaluationInfo();return n?n[0].val:NaN},e.setInputSpan=function(e){this._inputSpan=e},e.getInputString=function(){return void 0===this._inputSpan?"":r.slice(this._inputSpan)},e.getInputSpan=function(){return this._inputSpan},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var n=0;n<e.length;n++)this.addDependency(e[n])},e.addDummyDependency=function(e){-1===this._dummyDependencies.indexOf(e)&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var n=0;n<e.length;n++)this.addDummyDependency(e[n])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var n=this._dependencies.indexOf(e);0<=n&&this._dependencies.splice(n,1)},e.dependsOn=function(e){return-1<this._dependencies.indexOf(e)},e.getExports=function(){return(this._exports||[]).concat(this.getAnsVariable())},e.getLegalExports=function(n){return this.getExports().filter(function(e){return!n.assignmentForbidden(e)})},e.exportsSymbol=function(e){return-1<this._exports.indexOf(e)},e.exportTo=function(e,n,t){for(var i=this.getLegalExports(e),r=0;r<i.length;r++){var s=i[r];if(t[s])return;t[s]=n.blocksExport?n:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.shouldPromoteToSlider=function(e){return!1},e.getSliderVariables=function(e,n){return e.sliderVariables(n.getDependencies())},e.getCompiledFunction=function(e){var n,t,i=this.getEvalStrings(),r=i.statements.join(";")+";return "+i.expression;return void 0!==e||-1!==(n=(e=this.getDependencies()).indexOf("x"))&&(t=e[0],e[0]=e[n],e[n]=t),{args:e,source:r,fn:s.closureFunctionWithBuiltIn(e,r)}},e.getCompiledDerivative=function(){var e=this.getDependencies();return this.takeDerivative(e[0]||"x").getCompiledFunction()},e.asValue=function(){}})});
define('core/math/parsenode/error',['require','pjs','./base'],function(require){"use strict";return require("pjs")(require("./base"),function(t,i){t.init=function(t){i.init.call(this),this._msg=t,this._sliderVariables=[],this.blocksExport=!0},t.evaluateOnce=function(t){return this._msg},t.isError=!0,t.getError=function(){return this._msg},t.setDependencies=function(t){return this._dependencies=t,this},t.allowExport=function(){return this.blocksExport=!1,this}})});
define('core/lib/label',["require","exports","underscore","core/math/distance","core/math/tofraction"],function(require,e,r,c,d){"use strict";function i(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var n=d.default(e/Math.PI,24);if(m(t)&&c.approx(n.n/n.d*Math.PI,e,3))return{ariaString:s(r=(0===n.n?"0":1===n.n?"":-1===n.n?"-":n.n.toString()+"")+(1===n.d?"":"/"+n.d.toString())),string:r,value:n.n/n.d*Math.PI};if(m(t))return{ariaString:s(r="-0"===(a=l(e.toFixed(v(t))))?"0":a),string:r,value:parseFloat(r)};var r,a,i=p(e.toExponential(v(t/e))).split("e"),u=i[0]+"10",o=i[1].replace("+","");return{ariaString:s(r=p(e.toExponential(v(t/e))).replace("+","")),string:r,mantissa:u,superscript:o,value:parseFloat(r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.trimLatex=e.latexToIdentifier=e.identifierToHTML=e.identifierToLatex=e.formatSymbol=e.truncatedAriaLabel=e.truncatedLatexLabel=e.truncatedPlainmathLabel=e.truncatedHTMLLabel=e.numericLabel=e.canDisplayAsFraction=e.point=e.value=void 0,e.value=i;var t={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[]":" pi ","[]":" tau ","[]":" theta ","[]":" phi "},n=new RegExp(Object.keys(t).join("|"),"gi");function a(e){return t["["+e+"]"]}var u=/\.\d+/g;function o(e){return e[0]+e.slice(1).split("").join(" ")}function s(e){return e.replace(u,o).replace(n,a).replace(/ +/gi," ").trim()}e.point=function(e,t,n,r){var a=i(e,t);return[a,i(r(a.value),n)]};var f=/\.?0+$/;function l(e){return-1===e.indexOf(".")?e:e.replace(f,"")}function p(e){return e.replace(/\.?0+e/,"e")}function m(e){return 1e-4<(e=Math.abs(e))&&e<1e7}function v(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function h(e){return 1e6/Math.sqrt(Math.abs(e))}function b(e){var t=h(e);if(t<1)return!1;if(1e12<t)return!1;var n=d.default(e,t),r=n.n,a=n.d;return 1!==a&&e===e+Math.pow(2,-3)*Math.abs(r/a-e)}function g(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};var n=t.smallCutoff||.001,r=t.bigCutoff||1e6,a=t.digits||10,i=p(e.toExponential(a-2)).match(/([\d\.\-]+)e\+?([\d\-]+)/);if(!i)return{type:"undefined"};var u=parseInt(i[2],10)>=a,o=b(e);if(Math.abs(e)>r||Math.abs(e)<n||u)return{type:"scientific",mantissa:i[1],exponent:i[2]};if(o&&t.displayAsFraction){var c=d.default(e,h(e));return{type:"fraction",numerator:c.n.toString(),denominator:c.d.toString()}}var s=l(e.toPrecision(a));return e!==Number(s)&&t.addEllipses&&(s+="..."),{type:"decimal",value:s}}function x(e){e=e.replace("\\","");var t={pi:"",tau:"",theta:"",phi:"",div:"",cdot:"",times:"",lt:"<",gt:">",le:"",ge:"",sim:"",ldots:"",prime:"",approx:""};return t.hasOwnProperty(e)?t[e]:e}e.canDisplayAsFraction=b,e.numericLabel=g,e.truncatedHTMLLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"<span class='dcg-cross'></span>10<sup>"+n.exponent+"</sup>";case"fraction":return"1"===n.denominator?n.numerator:n.numerator+"/"+n.denominator;default:return n}},e.truncatedPlainmathLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+" * 10^"+n.exponent;case"fraction":return"1"===n.denominator?n.numerator:n.numerator+"/"+n.denominator;default:return n}},e.truncatedLatexLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"\\times10^{"+n.exponent+"}";case"fraction":return"1"===n.denominator?n.numerator:"-"===n.numerator[0]?"-\\frac{"+n.numerator.slice(1)+"}{"+n.denominator+"}":"\\frac{"+n.numerator+"}{"+n.denominator+"}";default:return n}},e.truncatedAriaLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return s(n.value);case"scientific":return s(n.mantissa+"e"+n.exponent);case"fraction":return s(n.numerator+"/"+n.denominator);default:return n}},e.formatSymbol=x,e.identifierToLatex=function(e){var t=e.split("_"),n="";return 1<t[0].length&&(n+="\\"),n+=t[0],t[1]&&(n+="_{"+t[1]+"}"),n},e.identifierToHTML=function(e){if(!e)return"";var t=e.split("_").map(x).map(r.escape),n=t[0];return t[1]&&(n+="<sub>"+t[1]+"</sub>"),n},e.latexToIdentifier=function(e){return(e=e.replace(/\\operatorname\{(.*)\}/,"$1")).replace(/[{}\\]/g,"")},e.trimLatex=function(e){return e.replace(/^(\\ | |\\space)+/,"").replace(/(\\ | |\\space)+$/,"")}});
define('core/math/types',["require","exports","core/lib/worker-i18n"],function(require,t,r){"use strict";function s(e){switch(e){case t.Any:return"Any";case t.Number:return"Number";case t.Bool:return"Bool";case t.Point:return"Point";case t.Distribution:return"Distribution";case t.ListOfAny:return"ListOfAny";case t.ListOfNumber:return"ListOfNumber";case t.ListOfBool:return"ListOfBool";case t.ListOfPoint:return"ListOfPoint";case t.ListOfDistribution:return"ListOfDistribution";case t.EmptyList:return"EmptyList";case t.ErrorType:return"ErrorType";case t.SeedType:return"SeedType";case t.RGBColor:return"RGBColor";case t.ListOfColor:return"ListOfColor";default:throw new Error("Invalid type: "+e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.isOneOf=t.hasListType=t.listType=t.elementType=t.isList=t.prettyPrint=t.repr=t.ListOfColor=t.RGBColor=t.SeedType=t.ErrorType=t.EmptyList=t.ListOfDistribution=t.ListOfPoint=t.ListOfBool=t.ListOfNumber=t.ListOfAny=t.Distribution=t.Point=t.Bool=t.Number=t.Any=void 0,t.Any=0,t.Number=1,t.Bool=2,t.Point=3,t.Distribution=4,t.ListOfAny=5,t.ListOfNumber=6,t.ListOfBool=7,t.ListOfPoint=8,t.ListOfDistribution=9,t.EmptyList=10,t.ErrorType=11,t.SeedType=12,t.RGBColor=13,t.ListOfColor=14,t.repr=s,t.prettyPrint=function(e){switch(e){case t.Any:return r.s("shared-calculator-label-value-type-any");case t.Number:return r.s("shared-calculator-label-value-type-number");case t.Bool:return r.s("shared-calculator-label-value-type-bool");case t.Point:return r.s("shared-calculator-label-value-type-point");case t.Distribution:return r.s("shared-calculator-label-value-type-distribution");case t.ListOfAny:return r.s("shared-calculator-label-value-type-list-of-any");case t.ListOfNumber:return r.s("shared-calculator-label-value-type-list-of-numbers");case t.ListOfBool:return r.s("shared-calculator-label-value-type-list-of-bool");case t.ListOfPoint:return r.s("shared-calculator-label-value-type-list-of-points");case t.ListOfDistribution:return r.s("shared-calculator-label-value-type-list-of-distributions");case t.EmptyList:return r.s("shared-calculator-label-value-type-empty-list");case t.ErrorType:return r.s("shared-calculator-label-value-type-error");case t.SeedType:return r.s("shared-calculator-label-value-type-seed");case t.RGBColor:return r.s("shared-calculator-label-value-type-color");case t.ListOfColor:return r.s("shared-calculator-label-value-type-list-of-colors");default:throw new Error("Invalid type: "+e)}},t.isList=function(e){switch(e){case t.ListOfAny:case t.ListOfNumber:case t.ListOfBool:case t.ListOfPoint:case t.ListOfDistribution:case t.ListOfColor:case t.EmptyList:return!0;case t.Any:case t.Number:case t.Bool:case t.Point:case t.Distribution:case t.ErrorType:case t.SeedType:case t.RGBColor:return!1;default:throw new Error("Invalid type: "+e)}},t.elementType=function(e){switch(e){case t.EmptyList:case t.ListOfNumber:return t.Number;case t.ListOfBool:return t.Bool;case t.ListOfPoint:return t.Point;case t.ListOfDistribution:return t.Distribution;case t.ListOfColor:return t.RGBColor;case t.ListOfAny:return t.Any;case t.Any:case t.Number:case t.Bool:case t.Point:case t.Distribution:case t.ErrorType:case t.SeedType:case t.RGBColor:return t.Any;default:throw new Error("Invalid type: "+e)}},t.listType=function(e){switch(e){case t.Any:return t.ListOfAny;case t.Number:return t.ListOfNumber;case t.Bool:return t.ListOfBool;case t.Point:return t.ListOfPoint;case t.Distribution:return t.ListOfDistribution;case t.RGBColor:return t.ListOfColor;case t.EmptyList:case t.ListOfNumber:case t.ListOfBool:case t.ListOfPoint:case t.ListOfDistribution:case t.ListOfColor:case t.ListOfAny:case t.ErrorType:case t.SeedType:throw new Error("Type "+s(e)+" does not implement listType.");default:throw new Error("Invalid type: "+e)}},t.hasListType=function(e){switch(e){case t.Any:case t.Number:case t.Bool:case t.Point:case t.Distribution:case t.RGBColor:return!0;case t.EmptyList:case t.ListOfNumber:case t.ListOfBool:case t.ListOfPoint:case t.ListOfDistribution:case t.ListOfColor:case t.ListOfAny:case t.ErrorType:case t.SeedType:return!1;default:throw new Error("Invalid type: "+e)}},t.isOneOf=function(e,t){for(var r=0,s=t;r<s.length;r++){if(e===s[r])return!0}return!1}});
define('core/math/errormsg',['require','core/lib/worker-i18n','core/math/parsenode/error','core/lib/label','core/math/types'],function(require){"use strict";var s=require("core/lib/worker-i18n"),u=require("core/math/parsenode/error"),c=require("core/lib/label"),e=require("core/math/types");return{parseError:function(){return u(s.s("shared-calculator-error-parse-error"))},unrecognizedSymbol:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-unrecognized-symbol",{symbol:r}))},unexpectedInequality:function(){return u(s.s("shared-calculator-error-unexpected-inequality"))},unexpectedSymbol:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-unexpected-symbol",{symbol:r}))},addTypeError:function(r){return u(s.s("shared-calculator-error-add-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},subtractTypeError:function(r){return u(s.s("shared-calculator-error-subtract-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},multiplyTypeError:function(r){return u(s.s("shared-calculator-error-multiply-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},divideTypeError:function(r){return u(s.s("shared-calculator-error-divide-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},exponentTypeError:function(r){return u(s.s("shared-calculator-error-exponent-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},negativeTypeError:function(r){return u(s.s("shared-calculator-error-negative-type-error",{symbol:r[0]})).allowExport()},comparatorTypeError:function(r){return u(s.s("shared-calculator-error-comparator-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},andTypeError:function(r){return u(s.s("shared-calculator-error-and-type-error",{symbol:"and",symbol1:r[0],symbol2:r[1]})).allowExport()},listTypeError:function(r){return u(s.s("shared-calculator-error-list-type-error",{symbol1:r[0]})).allowExport()},pointTypeError:function(r){return u(s.s("shared-calculator-error-point-type-error",{symbol1:r,symbol2:e.prettyPrint(e.Point)})).allowExport()},indexTypeError:function(r){return u(s.s("shared-calculator-error-index-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},orderedPairAccessTypeError:function(r){return u(s.s("shared-calculator-error-ordered-pair-access-type-error",{symbol:r[0]})).allowExport()},functionTypeError:function(r,e){switch(e.length){case 1:return u(s.s("shared-calculator-error-function-type-error-1",{fn:c.formatSymbol(r),arg:e[0]})).allowExport();case 2:return u(s.s("shared-calculator-error-function-type-error-2",{fn:c.formatSymbol(r),arg1:e[0],arg2:e[1]})).allowExport();default:return u(s.s("shared-calculator-error-function-type-error-many",{fn:c.formatSymbol(r)})).allowExport()}},illegalDotCall:function(r){return u(s.s("shared-calculator-error-illegal-dot-call",{symbol:c.formatSymbol(r)}))},dotLHSTypeError:function(r,e){return u(s.s("shared-calculator-error-dot-lhs-type-error",{symbol:c.formatSymbol(r),type:e}))},sumLowerBoundTypeError:function(r){return u(s.s("shared-calculator-error-sum-lower-bound-type-error",{symbol:r[0]})).allowExport()},sumUpperBoundTypeError:function(r){return u(s.s("shared-calculator-error-sum-upper-bound-type-error",{symbol:r[0]})).allowExport()},sumInfiniteBoundError:function(){return u(s.s("shared-calculator-error-sum-infinite-bound-type-error"))},sumArgumentTypeError:function(r){return u(s.s("shared-calculator-error-sum-argument-type-error",{symbol:r[0]})).allowExport()},productLowerBoundTypeError:function(r){return u(s.s("shared-calculator-error-product-lower-bound-type-error",{symbol:r[0]})).allowExport()},productUpperBoundTypeError:function(r){return u(s.s("shared-calculator-error-product-upper-bound-type-error",{symbol:r[0]})).allowExport()},productInfiniteBoundError:function(){return u(s.s("shared-calculator-error-product-infinite-bound-type-error"))},productArgumentTypeError:function(r){return u(s.s("shared-calculator-error-product-argument-type-error",{symbol:r[0]})).allowExport()},integralLowerBoundTypeError:function(r){return u(s.s("shared-calculator-error-integral-lower-bound-type-error",{symbol:r[0]})).allowExport()},integralUpperBoundTypeError:function(r){return u(s.s("shared-calculator-error-integral-upper-bound-type-error",{symbol:r[0]})).allowExport()},integralArgumentTypeError:function(r){return u(s.s("shared-calculator-error-integral-argument-type-error",{symbol:r[0]})).allowExport()},derivativeTypeError:function(r){return u(s.s("shared-calculator-error-derivative-type-error",{symbol:r[0]})).allowExport()},derivativeVariableTypeError:function(r,e){return u(s.s("shared-calculator-error-derivative-variable-type-error",{symbol1:c.formatSymbol(r),symbol2:e[0]}))},piecewiseConditionTypeError:function(r){return u(s.s("shared-calculator-error-piecewise-condition-type-error",{symbol1:e.prettyPrint(e.Bool),symbol2:r[0]})).allowExport()},piecewiseBranchTypeError:function(r){return u(s.s("shared-calculator-error-piecewise-branch-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},piecewiseBranchLengthError:function(r){return u(s.s("shared-calculator-error-piecewise-branch-length-error",{symbol:r})).allowExport()},tableHeaderTypeError:function(r){return u(s.s("shared-calculator-error-table-header-type-error",{symbol:r[0]}))},tableEntryTypeError:function(r){return u(s.s("shared-calculator-error-table-entry-type-error",{symbol:r[0]}))},regressionTypeError:function(r){return u(s.s("shared-calculator-error-regression-type-error",{symbol1:r[0],symbol2:r[1]}))},heterogeneousList:function(){return u(s.s("shared-calculator-error-heterogeneous-list")).allowExport()},deeplyNested:function(){return u(s.s("shared-calculator-error-deeply-nested")).allowExport()},polygonListTypeError:function(r){return u(s.s("shared-calculator-error-polygon-list-type-error",{type:r[0]}))},polygonPointArgsError:function(){return u(s.s("shared-calculator-error-polygon-point-args-error"))},polygonTwoNumbersError:function(){return u(s.s("shared-calculator-error-two-numbers-error"))},boxplotOffsetInvalid:function(){return u(s.s("shared-calculator-error-boxplot-offset-invalid"))},boxplotBreadthInvalid:function(){return u(s.s("shared-calculator-error-boxplot-breadth-invalid"))},tooManyArguments:function(r,e){return u(s.s("shared-calculator-error-too-many-arguments",{symbol:r,max:e}))},pdfWrongArity:function(){var r=s.s("shared-calculator-error-pdf-wrong-arity-recommendation"),e=s.s("shared-calculator-error-pdf-wrong-arity",{recommendation:r});return u(e)},cdfRequiresArguments:function(){var r=s.s("shared-calculator-error-cdf-wrong-arity-recommendation"),e=s.s("shared-calculator-error-cdf-wrong-arity",{recommendation:r});return u(e)},cdfTooManyArguments:function(){var r=s.s("shared-calculator-error-cdf-too-many-arguments-recommendation"),e=s.s("shared-calculator-error-cdf-too-many-arguments",{recommendation:r});return u(e)},tdistWrongArity:function(){return u(s.s("shared-calculator-error-tdist-wrong-arity"))},randomArity:function(){return u(s.s("shared-calculator-error-random-arity"))},randomFromBroadcastDistribution:function(){return u(s.s("shared-calculator-error-random-from-broadcast-distribution"))},wrongArity:function(r,e,o,n){var t,a;if(r=c.formatSymbol(r),1===e)n=n||r+"(x)",a=s.s("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),t=1<o?s.s("shared-calculator-error-wrong-arity-single-arg-too-many",{dependency:r,supplement:a}):s.s("shared-calculator-error-wrong-arity-single-arg-too-few",{dependency:r,supplement:a});else{var l=[];if(!n){for(var i=0;i<e;i++)l[i]=i+1;n=c.formatSymbol(r)+"("+l.join(", ")+")"}a=s.s("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),t=s.s("shared-calculator-error-wrong-arity-many-arg",{dependency:r,assignment_arity:e,supplement:a})}return u(t)},wrongParametrizedReducerArity:function(r){return u(s.s("shared-calculator-error-wrong-two-arg-arity",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(r){return u(s.s("shared-calculator-error-wrong-two-arg-arity",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return u(s.s("shared-calculator-error-primed-function-arity"))},zeroArgReducer:function(r){return u(s.s("shared-calculator-error-zero-arg-reducer",{symbol:c.formatSymbol(r)}))},malformedPoint:function(){return u(s.s("shared-calculator-error-malformed-point"))},badTupleDimensions:function(r){return u(s.s("shared-calculator-error-bad-tuple-dimensions",{symbol:r}))},badImplicitCall:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-bad-implicit-call",{symbol:r}))},adjacentNumbers:function(r,e){return u(s.s("shared-calculator-error-adjacent-numbers",{left:r,right:e}))},identifierAsFunction:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-identifier-as-function",{symbol:r}))},binaryOperatorMissingOperand:function(r){return"%"===(r=c.formatSymbol(r))&&(r="% of"),u(s.s("shared-calculator-error-binary-operator-missing-operand",{symbol:r}))},unaryOperatorMissingLeft:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-unary-operator-missing-left",{symbol:r}))},unaryOperatorMissingRight:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-unary-operator-missing-right",{symbol:r}))},fractionMissingNumerator:function(){return u(s.s("shared-calculator-error-fraction-missing-numerator"))},fractionMissingDenominator:function(){return u(s.s("shared-calculator-error-fraction-missing-denominator"))},fractionEmpty:function(){return u(s.s("shared-calculator-error-fraction-empty"))},emptySubscript:function(){return u(s.s("shared-calculator-error-empty-subscript"))},emptySuperscript:function(){return u(s.s("shared-calculator-error-empty-superscript"))},invalidSubscript:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-invalid-subscript",{symbol:r}))},invalidOperatorName:function(){return u(s.s("shared-calculator-error-invalid-operator-name"))},unexpectedSubscript:function(){return u(s.s("shared-calculator-error-unexpected-subscript"))},superscriptWithPrime:function(){return u(s.s("shared-calculator-error-superscript-with-prime"))},unexpectedPrime:function(){return u(s.s("shared-calculator-error-unexpected-prime"))},primeWithoutParen:function(){return u(s.s("shared-calculator-error-prime-without-paren"))},emptyRadical:function(){return u(s.s("shared-calculator-error-empty-radical"))},emptyRadicalIndex:function(){return u(s.s("shared-calculator-error-empty-radical-index"))},emptyParen:function(){return u(s.s("shared-calculator-error-empty-paren"))},emptySquareBracket:function(){return u(s.s("shared-calculator-error-empty-square-bracket"))},emptyPipe:function(){return u(s.s("shared-calculator-error-empty-pipe"))},badTrigExponent:function(r){var e=r+"^2",o=r+"^-1";return u(s.s("shared-calculator-error-bad-trig-exponent",{form1:e,form2:o}))},badLogExponent:function(r){var e=r+"^2";return u(s.s("shared-calculator-error-bad-log-exponent",{form:e}))},inequalityChainTooLong:function(){return u(s.s("shared-calculator-error-inequality-chain-too-long"))},piecewiseMissingCondition:function(){return u(s.s("shared-calculator-error-piecewise-missing-condition"))},piecewisePartMissingCondition:function(){return u(s.s("shared-calculator-error-piecewise-part-missing-condition"))},colonMissingCondition:function(){return u(s.s("shared-calculator-error-colon-missing-condition"))},blankExpression:function(){return u(s.s("shared-calculator-error-blank-expression"))},functionNotDefined:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-function-not-defined",{dependency:r}))},parameterAlreadyDefined:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-parameter-already-defined",{dependency:r}))},cannotRedefine:function(r,e){return r=c.formatSymbol(r),u(void 0===e?s.s("shared-calculator-error-cannot-redefine",{symbol:r}):s.s("shared-calculator-error-cannot-redefine-root",{symbol:r,symbolRoot:e}))},cannotSubscript:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-cannot-subscript",{symbol:r}))},multiplyDefined:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-multiply-defined",{dependency:r}))},shadowedIndex:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-shadowed-index",{symbol:r}))},cycle:function(r){var e=(r=r.map(c.formatSymbol)).pop();return u(s.s("shared-calculator-error-dependency-cycle",{symbols:r.join("', '"),lastSymbol:e}))},selfReferentialFunction:function(r){return u(s.s("shared-calculator-error-self-referential-function",{symbol:c.formatSymbol(r)}))},simulationFPSNonNegativeNumber:function(){return u(s.s("shared-calculator-error-simulation-fps-nonnegative"))},sliderLimitReferencesExport:function(r){return u(s.s("shared-calculator-error-slider-limit-references-export",{symbol:c.formatSymbol(r)}))},sliderMinInvalid:function(){return u(s.s("shared-calculator-error-slider-min-invalid"))},sliderMaxInvalid:function(){return u(s.s("shared-calculator-error-slider-max-invalid"))},sliderMaxLessThanMin:function(){return u(s.s("shared-calculator-error-slider-max-less-than-min"))},sliderStepInvalid:function(){return u(s.s("shared-calculator-error-slider-step-invalid"))},domainMinInvalid:function(){return u(s.s("shared-calculator-error-domain-min-invalid"))},domainMaxInvalid:function(){return u(s.s("shared-calculator-error-domain-max-invalid"))},domainMaxLessThanMin:function(){return u(s.s("shared-calculator-error-domain-max-less-than-min"))},cdfMinInvalid:function(){return u(s.s("shared-calculator-error-cdf-min-invalid"))},cdfMaxInvalid:function(){return u(s.s("shared-calculator-error-cdf-max-invalid"))},cdfMaxLessThanMin:function(){return u(s.s("shared-calculator-error-cdf-max-less-than-min"))},tooManyVariables:function(r){if(0===(r=r.map(c.formatSymbol)).length)return u(s.s("shared-calculator-error-too-many-variables-no-symbols"));var e=r.pop();return 0<r.length?u(s.s("shared-calculator-error-too-many-variables-many-symbols",{variables:r.join("', '"),lastVariable:e})):u(s.s("shared-calculator-error-too-many-variables-one-symbol",{variable:e}))},addArgumentsToDefinition:function(r,e,o){r=r.map(c.formatSymbol);var n=(e=c.formatSymbol(e))+"("+(o=o.map(c.formatSymbol)).join(",")+","+r.join(",")+")",t=r.pop(),a={symbols:r.join("', '"),lastSymbol:t,newSignature:n};return r.length?u(s.s("shared-calculator-error-add-arguments-to-definition-many",a)):u(s.s("shared-calculator-error-add-arguments-to-definition-one",a))},invalidLHS:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-invalid-lhs",{symbol:r}))},unplottablePolarFunction:function(){return u(s.s("shared-calculator-error-unplottable-polar-function"))},invalidInequalityVariables:function(){return u(s.s("shared-calculator-error-invalid-inequality-variables"))},invalidImplicitVariables:function(){return u(s.s("shared-calculator-error-invalid-implicit-variables"))},singleVariableImplicitEquationsDisabled:function(){return u(s.s("shared-calculator-error-single-variable-implicit-equations-disabled"))},implicitsDisabled:function(){return u(s.s("shared-calculator-error-implicits-disabled"))},inequalitiesDisabled:function(){return u(s.s("shared-calculator-error-inequalities-disabled"))},complicatedPolarImplicit:function(){return u(s.s("shared-calculator-error-complicated-polar-implicit"))},invalidDoubleInequalityVariables:function(){return u(s.s("shared-calculator-error-invalid-double-inequality-variables"))},mismatchedDoubleInequality:function(){return u(s.s("shared-calculator-error-mismatched-double-inequality",{example:"1 < y < 2"}))},complicatedDoubleInequality:function(){return u(s.s("shared-calculator-error-complicated-double-inequality"))},equationRequired:function(r){return r?(r=c.formatSymbol(r),u(s.s("shared-calculator-error-equation-required-symbol",{lhs:r+"="}))):u(s.s("shared-calculator-error-equation-required"))},variableAsFunction:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-variable-as-function",{dependency:r}))},distributionAsFunction:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-distribution-as-function",{symbol:r}))},invalidTableHeader:function(r){return u(s.s("shared-calculator-error-invalid-table-header",{supplement:r}))},invalidTableEntry:function(r){return u(s.s("shared-calculator-error-invalid-table-entry",{supplement:r}))},invalidFirstTableColumn:function(){return u(s.s("shared-calculator-error-invalid-first-table-column",{most:"'y', 'r',",last:"''"}))},invalidDependentFirstTableColumn:function(){return u(s.s("shared-calculator-error-invalid-dependent-first-table-column"))},invalidRegressionParameter:function(r){return u(s.s("shared-calculator-error-invalid-regression-parameter",{symbol:c.formatSymbol(r)}))},optimizationError:function(){return u(s.s("shared-calculator-error-optimization-error"))},nonListDoubleReducer:function(r){return u(s.s("shared-calculator-error-non-list-double-reducer",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(r){return u(s.s("shared-calculator-error-non-list-parameterized-reducer",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3], 1)"})).allowExport()},methodRequiresList:function(r){return u(s.s("shared-calculator-error-method-requires-list",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3])"})).allowExport()},variableRange:function(r){return u(s.s("shared-calculator-error-variable-range",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},variableListIndicies:function(r){return u(s.s("shared-calculator-error-variable-list-indices",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},variableFilter:function(r){return u(s.s("shared-calculator-error-variable-filter",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},functionFreeVariable:function(r,e){return u(s.s("shared-calculator-error-variable-function-free-variable",{functionSymbol:r,variableSymbol:e})).allowExport()},nonArithmeticRange:function(r){return u(s.s("shared-calculator-error-non-arithmetic-range")).allowExport()},invalidHalfEmptyRange:function(){return u(s.s("shared-calculator-error-invalid-half-empty-range"))},sumMissingBound:function(){return u(s.s("shared-calculator-error-sum-missing-bound"))},productMissingBound:function(){return u(s.s("shared-calculator-error-product-missing-bound"))},incorrectSumLowerBound:function(){return u(s.s("shared-calculator-error-incorrect-sum-lower-bound"))},incorrectProductLowerBound:function(){return u(s.s("shared-calculator-error-incorrect-product-lower-bound"))},badSumBoundDependency:function(r){return u(s.s("shared-calculator-error-bad-sum-bound-dependency",{symbol:c.formatSymbol(r)}))},badProductBoundDependency:function(r){return u(s.s("shared-calculator-error-bad-product-bound-dependency",{symbol:c.formatSymbol(r)}))},integralMissingBound:function(){return u(s.s("shared-calculator-error-integral-missing-bound"))},integralMissingDifferential:function(){return u(s.s("shared-calculator-error-integral-missing-differential"))},differentialWithSuperscript:function(){return u(s.s("shared-calculator-error-differential-with-superscript"))},sumMissingBody:function(){return u(s.s("shared-calculator-error-sum-missing-body"))},productMissingBody:function(){return u(s.s("shared-calculator-error-product-missing-body"))},integralMissingBody:function(){return u(s.s("shared-calculator-error-integral-missing-body"))},derivativeMissingBody:function(){return u(s.s("shared-calculator-error-derivative-missing-body"))},mismatchedBraces:function(r,e){return r=c.formatSymbol(r),e=c.formatSymbol(e),u(s.s("shared-calculator-error-mismatched-braces",{symbol1:r,symbol2:e}))},shadowedIntegrationVariable:function(r){return u(s.s("shared-calculator-error-shadowed-integration-variable",{symbol:c.formatSymbol(r)}))},badIntegralBoundDependency:function(r){return u(s.s("shared-calculator-error-bad-integral-bound-dependency",{symbol:c.formatSymbol(r)}))},percentMissingOf:function(){return u(s.s("shared-calculator-error-percent-missing-of"))},illegalBinWidth:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-illegal-bin-width",{symbol:r}))},ttestListTooShort:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-ttest-list-too-short",{symbol:r}))},badSampleSize:function(){return u(s.s("shared-calculator-error-bad-sample-size"))},variableSampleSize:function(r){return u(s.s("shared-calculator-error-variable-sample-size",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},variableSeed:function(r){return u(s.s("shared-calculator-error-variable-seed",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},badAnsContext:function(){return u(s.s("shared-calculator-error-bad-ans-context"))},ansUndefined:function(){return u(s.s("shared-calculator-error-ans-undefined"))},variablesUnsupported:function(r){return u(s.s("shared-calculator-error-variables-unsupported",{variable:c.formatSymbol(r)}))},functionUnsupported:function(r){return u(s.s("shared-calculator-error-function-unsupported",{symbol:c.formatSymbol(r)}))},logbaseUnsupported:function(){return u(s.s("shared-calculator-error-logbase-unsupported"))},constantUnsupported:function(r){return u(s.s("shared-calculator-error-constant-unsupported",{symbol:c.formatSymbol(r)}))},assignmentsUnsupported:function(){return u(s.s("shared-calculator-error-assignments-unsupported"))},functionDefinitionsUnsupported:function(){return u(s.s("shared-calculator-error-function-definition-unsupported"))},equationsUnsupported:function(){return u(s.s("shared-calculator-error-equations-unsupported"))},inequalitiesUnsupported:function(){return u(s.s("shared-calculator-error-inequalities-unsupported"))},regressionsUnsupported:function(){return u(s.s("shared-calculator-error-regressions-unsupported"))},pointsUnsupported:function(){return u(s.s("shared-calculator-error-points-unsupported"))},colorsUnsupported:function(){return u(s.s("shared-calculator-error-colors-unsupported"))},featureUnavailable:function(){return u(s.s("shared-calculator-error-feature-unavailable"))},fractionsUnavailable:function(){return u(s.s("basic-calculator-error-fractions-unavailable"))},nonSquareDeterminant:function(){return u(s.s("shared-calculator-error-non-square-determinant"))},nonSquareTrace:function(){return u(s.s("shared-calculator-error-non-square-trace"))},nonSquareInverse:function(){return u(s.s("shared-calculator-error-non-square-inverse"))},singularInverse:function(){return u(s.s("shared-calculator-error-non-singular-inverse"))},clickableObjectAssignmentNotDefined:function(r){return u(s.s("shared-calculator-error-clickable-object-assignment-not-defined",{symbol:r}))},clickableObjectAlreadyAssigned:function(r){return u(s.s("shared-calculator-error-multiply-defined",{dependency:r}))},clickableObjectAssignmentNotIdentifier:function(){return u(s.s("shared-calculator-error-clickable-object-assignment-not-identifier"))},clickableObjectInvalidExpression:function(){return u(s.s("shared-calculator-error-clickable-object-invalid-expression"))},matrixAssignment:function(){return u(s.s("shared-calculator-error-matrix-assignment"))},matrixAddDimensions:function(){return u(s.s("shared-calculator-error-matrix-add-dimensions"))},matrixSubtractDimensions:function(){return u(s.s("shared-calculator-error-matrix-subtract-dimensions"))},matrixMultiplyDimensions:function(){return u(s.s("shared-calculator-error-matrix-multiply-dimensions"))},matrixFractionalPower:function(){return u(s.s("shared-calculator-error-matrix-fractional-power"))},matrixPowerDimensions:function(){return u(s.s("shared-calculator-error-matrix-power-dimensions"))},matrixElementTypeError:function(r){return u(s.s("shared-calculator-error-matrix-element-type-error",{arg:r[0]}))},matrixInvalidVariable:function(r){return u(s.s("shared-calculator-error-matrix-invalid-variable",{symbol:c.formatSymbol(r)}))}}});
define('core/math/parsenode/expression',['require','pjs','./base','core/math/errormsg','core/math/types'],function(require){"use strict";var e=require("pjs"),t=require("./base"),r=require("core/math/errormsg"),i=require("core/math/types");return e(t,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){for(var e=0;e<this.args.length;e++)this.mergeDependencies(this.args[e])},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,1e4<e)throw r.deeplyNested()},e.copyWithArgs=function(e){return new this.constructor(e)}})});
define('core/math/parsenode/scalarexpression',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,s){t.init=function(t){s.init.call(this,t)},t.getEvalStrings=function(){for(var t=[],s=[],n=0;n<this.args.length;n++){var i=this.args[n].getEvalStrings(),t=t.concat(i.statements);s.push(i.expression)}return{statements:t,expression:this.scalarEvalExpression(s)}}})});
define('core/math/parsenode/expressionTypes',['require','pjs','./scalarexpression'],function(require){"use strict";var n=require("pjs"),t=require("./scalarexpression"),e={Add:n(t,{}),Subtract:n(t,{}),Multiply:n(t,{}),Divide:n(t,{}),Exponent:n(t,{}),Negative:n(t,{}),And:n(t,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:n(t,{})};return e.RawExponent=n(e.Exponent,{}),e});
define('core/math/maybe-rational',["require","exports","core/math/builtin"],function(require,t,i){"use strict";function o(t,n){return{n:t,d:n}}function d(t){return"object"==typeof t&&"number"==typeof t.n&&"number"==typeof t.d}Object.defineProperty(t,"__esModule",{value:!0}),t.total=t.mod=t.nthroot=t.sqrt=t.pow=t.div=t.sub=t.mul=t.add=t.reciprocal=t.abs=t.neg=t.maybeRational=t.asFloat=t.fromDecimalString=t.isRational=void 0,t.isRational=d;var h=Math.pow(2,53)-1;function f(t){return d(t)?t.n/t.d:t}function c(t,n){if(!isFinite(t)||!isFinite(n)||0===n||Math.floor(t)!==t||Math.floor(n)!==n||Math.abs(t)>h||Math.abs(n)>h)return t/n;n<0&&(t=-t,n=-n);var r=i.gcd(t,n);return o(t/r,n/r)}function s(t){return d(t)?o(-t.n,t.d):-t}function M(t){return d(t)?0===t.n?t.d/t.n:o(t.n<0?-t.d:t.d,Math.abs(t.n)):1/t}function e(t,n){if(!d(t)||!d(n))return f(t)+f(n);var r=i.gcd(t.d,n.d);return c(t.n*(n.d/r)+n.n*(t.d/r),t.d/r*n.d)}function u(t,n){if(!d(t)||!d(n))return f(t)*f(n);var r=i.gcd(t.n,n.d),a=i.gcd(n.n,t.d);return c(t.n/r*(n.n/a),t.d/a*(n.d/r))}function p(t,n){return e(t,s(n))}function l(t,n){return d(t)&&d(n)?u(t,M(n)):f(t)/f(n)}function r(t,n){if(!d(t)||!d(n))return i.pow(f(t),f(n));var r=function(t,n){var r=t,a=n;if(n.n<0&&(a=s(n),r=M(t)),!d(r)||!d(a))return i.pow(f(t),f(n));if(t=r,1===(n=a).d)return c(Math.pow(t.n,n.n),Math.pow(t.d,n.n));var o=t.n<0;if(o&&n.d%2!=1)return NaN;var e=(o?-1:1)*Math.round(Math.pow(Math.abs(t.n),1/n.d)),u=Math.round(Math.pow(Math.abs(t.d),1/n.d));return Math.pow(e,n.d)!==t.n||Math.pow(u,n.d)!==t.d?i.pow(f(t),f(n)):c(Math.pow(e,n.n),Math.pow(u,n.n))}(t,n);return d(r)?r:i.pow(f(t),f(n))}t.fromDecimalString=function(t){var n=t.match(/^(-)?(\d*)?(?:\.(\d*))?$/);if(!n)return NaN;var r=n[1],a=n[2],o=n[3];if(!a&&!o)return NaN;var e=!!r;if(o){var u=o.replace(/0+$/,""),i=u.length,d=Math.pow(10,i),f=parseInt(a||"0",10)*d+parseInt(u||"0",10);return h<f||h<d?parseFloat(t):c(e?-f:f,d)}return f=parseInt(a,10),h<f?parseFloat(t):c(e?-f:f,1)},t.asFloat=f,t.maybeRational=c,t.neg=s,t.abs=function(t){return d(t)?o(Math.abs(t.n),Math.abs(t.d)):Math.abs(t)},t.reciprocal=M,t.add=e,t.mul=u,t.sub=p,t.div=l,t.pow=r,t.sqrt=function(t){if(!d(t))return Math.sqrt(t);var n=Math.round(Math.sqrt(t.n)),r=Math.round(Math.sqrt(t.d));return n*n!==t.n||r*r!==t.d?Math.sqrt(f(t)):c(n,r)},t.nthroot=function(t,n){return r(t,M(n))},t.mod=function(t,n){if(d(t)&&d(n))return p(t,u(n,o(Math.floor(f(l(t,n))),1)));var r=f(t),a=f(n);return r-a*Math.floor(r/a)},t.total=function(t){for(var n=o(0,1),r=0,a=t;r<a.length;r++)n=e(n,a[r]);return n}});
define('core/math/parsenode/constant',['require','pjs','./scalarexpression','core/math/maybe-rational','core/math/types'],function(require){"use strict";var t=require("pjs"),a=require("./scalarexpression"),n=require("core/math/maybe-rational"),e=require("core/math/types");return t(a,function(t,a){t.init=function(t){"number"==typeof t&&(t=n.maybeRational(t,1)),this._constantValue=t,a.init.call(this,[])},t.isConstant=!0,t.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},t.asValue=function(){return"boolean"==typeof this._constantValue?this._constantValue:n.asFloat(this._constantValue)},t.asMaybeRationalValue=function(){return"boolean"==typeof this._constantValue?NaN:this._constantValue},t.scalarExprString=function(){return 0<this.asValue()?String(this.asValue()):"("+String(this.asValue())+")"},t.getEvaluationInfo=function(){return[{val:this.asValue()}]},t.isNaN=function(){return"number"==typeof this.asValue()&&isNaN(this.asValue())},t._getValueType=function(){switch(typeof this.asValue()){case"number":return e.Number;case"boolean":return e.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}}})});
define('core/math/parsenode/mixednumber',['require','pjs','./constant'],function(require){"use strict";return require("pjs")(require("./constant"),function(n,i){n.init=function(n){i.init.call(this,n)},n.is_mixed_number=!0})});
define('core/math/parsenode/identifier',['require','pjs','./expression','core/lib/label','core/math/parser/input-span'],function(require){"use strict";var n=require("pjs"),e=require("./expression"),i=require("core/lib/label"),a=require("core/math/parser/input-span");return n(e,function(n,e,t){n.init=function(n){e.init.call(this,[]),this._symbol=i.latexToIdentifier(n),this.setInputSpan(new a.Span(n,0,n.length)),this.addDependency(this._symbol)},n.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol}})});
define('core/math/parsenode/ans',['require','pjs','./identifier'],function(require){"use strict";return require("pjs")(require("./identifier"),function(i,n,e){})});
define('core/math/parsenode/freevariable',['require','pjs','./scalarexpression'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(i,n){i.init=function(i){n.init.call(this,[]),this.addDependency(i),this._symbol=i},i.isFreeVariable=!0,i.scalarEvalExpression=function(i){return this._symbol},i.copyWithArgs=function(i){return this}})});
define('core/math/parsenode/dummyindex',['require','pjs','./freevariable'],function(require){"use strict";return require("pjs")(require("./freevariable"),function(){})});
define('core/math/parsenode/list',['require','pjs','./expression','core/math/types'],function(require){"use strict";var t=require("pjs"),n=require("./expression"),u=require("core/math/types");return t(n,function(t,n,i){t.init=function(t){n.init.call(this,t),this.length=t.length},t.isList=!0,t.getEvalStrings=function(){for(var t=[],n=[],s=0;s<this.args.length;s++){var r=this.args[s].getEvalStrings();Array.prototype.push.apply(t,r.statements),n.push(r.expression)}return{statements:t,expression:"["+n.join(",")+"]"}},t.asValue=function(){for(var t=[],n=0;n<this.args.length;n++)t.push(this.args[n].asValue());return t},t.asMaybeRationalValue=function(){for(var t=[],n=0;n<this.args.length;n++)t.push(this.args[n].asMaybeRationalValue());return t},t.getEvaluationInfo=function(){if(this.args.every(function(t){return t.isConstant}))return[{val:this.args.map(function(t){return t.asValue()})}]},i.eachArgs=function(t,n,s){var r=function(t){for(var n=1/0,s=0;s<t.length;s++)(t[s].isList||t[s].isBroadcast)&&(n=Math.min(n,t[s].length));return n}(n);if(isFinite(r))for(var i=0;i<r;i++){for(var e=[],a=0;a<n.length;a++)e.push(n[a].isList||u.isList(n[a].valueType)?n[a].elementAt(t,i):n[a]);s(e)}else s(n)},i.mapArgs=function(t,n,s){var r=[];return i.eachArgs(t,n,function(t){r.push(s(t))}),r},i.wrap=function(t){return t.isList||u.isList(t.valueType)?t:i([t])}})});
define('core/math/parsenode/range',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(n,i,t){n.init=function(n){i.init.call(this,n),this.beginning=n[0],this.end=n[1]},n.isHalfEmpty=function(){return this.end&&this.end.args&&0===this.end.args.length}})});
define('core/math/parsenode/broadcast',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,n,s){t.init=function(t,s){if(n.init.call(this,s),this._replacedSymbols=t,this._expression=s[0],this._lists=s.slice(1),!t.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var r=0;r<t.length;r++)this.removeDependency(t[r]);for(var e=1/0,i=0;i<this._lists.length;i++){if(!this._lists[i].isList)throw new Error("List arguments of broadcast must be list literals");e=Math.min(e,this._lists[i].length)}this.length=e},t.isBroadcast=!0,t.copyWithArgs=function(t){return new this.constructor(this._replacedSymbols,t)},t.getEvalStrings=function(){var t=[],s=this._expression.getEvalStrings();Array.prototype.push.apply(t,s.statements);for(var r=[],e=[],i=0;i<this._lists.length;i++){var n=this._lists[i].getEvalStrings();Array.prototype.push.apply(t,n.statements);var a=this.tmpVar();e.push(a),r.push("var "+a+" = "+n.expression)}var o=this.tmpVar(),h=this.tmpVar();r.push("var "+o+" = []");var l=[];for(i=0;i<e.length;i++)l.push("var "+this._replacedSymbols[i]+" = "+e[i]+"["+h+"]");return r.push("for (var "+h+" = 0; "+h+" < "+this.length+"; "+h+"++) {\n  "+l.join(";\n  ")+";\n  "+o+".push("+s.expression+");\n}"),{statements:t.concat(r),expression:o}}})});
define('core/math/parsenode/listaccess',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,s){t.init=function(t){s.init.call(this,t),this.list=t[0],this.index=t[1]},t.getEvalStrings=function(){var t=this.index.getEvalStrings(),s=this.list.getEvalStrings(),i=t.statements.concat(s.statements),n=this.tmpVar();i.push("var "+n+" = "+s.expression);var e=this.tmpVar();return i.push("var "+e+" = Math.floor("+t.expression+") - 1"),{statements:i,expression:"("+e+" >= 0 && "+e+" < "+n+".length ? "+n+"["+e+"] : NaN)"}}})});
define('core/math/parsenode/dotaccess',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),{})});
define('core/math/parsenode/dotaccessexponent',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),{})});
define('core/math/parsenode/orderedpair',['require','pjs','./scalarexpression'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(e,r,s){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(r,e){return r.sliderVariables(e.getDependencies()).filter(function(e){return!r.validParametricVariable(e)})},e.getEvalStrings=function(){for(var e=[],r=[],s=0;s<this.args.length;s++){var t=this.args[s].getEvalStrings(),e=e.concat(t.statements);r.push(t.expression)}return{statements:e,expression:"["+r.join(",")+"]"}}})});
define('core/math/parsenode/movablepoint',['require','pjs','./orderedpair'],function(require){"use strict";return require("pjs")(require("./orderedpair"),function(i,n){i.init=function(i,t,e){n.init.call(this,i),this.moveStrategy=t,this.defaultDragMode=e},i.isMovablePoint=!0})});
define('core/math/parsenode/orderedpairaccess',['require','pjs','./scalarexpression'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(t,s){t.init=function(t){s.init.call(this,t),this.point=t[0],this.index=t[1]},t.getEvalStrings=function(){var t=this.index.getEvalStrings(),s=this.point.getEvalStrings(),n=[];return Array.prototype.push.apply(n,t.statements),Array.prototype.push.apply(n,s.statements),{statements:n,expression:s.expression+"["+t.expression+"-1]"}}})});
define('core/math/parsenode/polygon',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,n){i.init=function(i){n.init.call(this,i),this._symbol="polygon"}})});
define('core/math/comparators',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.get=e.table=void 0,e.table={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},e.get=function(e,i){switch(i){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}}});
define('core/math/parsenode/basecomparator',['require','pjs','./scalarexpression','./expressionTypes','core/math/comparators','core/math/functions'],function(require){"use strict";var a=require("pjs"),t=require("./scalarexpression"),n=require("./expressionTypes").Subtract,o=require("core/math/comparators").table,c=require("core/math/functions");return a(t,function(t,e,i){i.create=function(n,r){return r=r||n,a(i,function(t,e){t.operator=n,t.isInequality=function(){return 0!==o[n].direction},t.compiledOperator=r,t.scalarEvalExpression=function(t){return t.join(r)},t.evaluate=c.createEvaluateFunction(t.scalarEvalExpression,2)})},t.init=function(t){e.init.call(this,t),this._difference=-1===o[this.operator].direction?n([t[1],t[0]]):n([t[0],t[1]])}})});
define('core/math/parsenode/comparator',['require','core/math/parsenode/basecomparator'],function(require){"use strict";var e=require("core/math/parsenode/basecomparator");return{"<":e.create("<"),">":e.create(">"),"<=":e.create("<="),">=":e.create(">="),"=":e.create("=","===")}});
define('core/math/parsenode/doubleinequality',['require','pjs','./base','core/math/comparators','./comparator'],function(require){"use strict";var i=require("pjs"),e=require("./base"),t=require("core/math/comparators"),n=require("./comparator");return i(e,function(i,s){i.init=function(i){s.init.call(this),this.args=i,this._symbol=i[2]._symbol,this._operators=[i[1],i[3]],this._expressions=[i[0],i[4]];var e=t.get(t.table[i[1]].inclusive&&t.table[i[3]].inclusive,t.table[i[1]].direction);this._indicator=n[e]([i[0],i[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},i.isInequality=function(){return!0},i.isShadeBetween=function(){return!0}})});
define('core/math/parsenode/repeatedoperator',['require','pjs','./scalarexpression','./dummyindex'],function(require){"use strict";var t=require("pjs"),s=require("./scalarexpression"),i=require("./dummyindex");return t(s,function(t,s){t.init=function(t){s.init.call(this,t),this._index=t[0],this.addDummyDependency(this._index._symbol),this._index instanceof i&&this.removeDependency(this._index._symbol)},t.getEvalStrings=function(){var t=[],s=this.tmpVar(),i=this._index._symbol,e=this.tmpVar(),n=this.tmpVar(),r=this.args[1].getEvalStrings(),a=this.args[2].getEvalStrings(),h=this.args[3].getEvalStrings();Array.prototype.push.apply(t,r.statements),t.push("var "+e+" = Math.round("+r.expression+")"),Array.prototype.push.apply(t,a.statements),t.push("var "+n+" = Math.round("+a.expression+")"),t.push("var "+s+"="+this.starting_value);var o="for (var "+i+"="+e+";"+i+"<="+n+";"+i+"++) {"+h.statements.join(";")+";"+s+this.in_place_operator+h.expression+"};",p="if(!isFinite("+n+"-"+e+")) {"+s+"=("+n+"<"+e+"?"+this.starting_value+":NaN);}else{"+o+"}";return t.push(p),{statements:t,expression:s}},t.evaluate=function(t,s,i){var e=i.getCompiledFunction([this._index._symbol]).fn;if(s=Math.round(s),t=Math.round(t),!isFinite(s-t))return s<t?this.starting_value:NaN;for(var n=this.starting_value,r=t;r<=s;r++)n=this.update(n,e(r));return n}})});
define('core/math/parsenode/sum',['require','pjs','./repeatedoperator'],function(require){"use strict";return require("pjs")(require("./repeatedoperator"),function(t,n){t.in_place_operator="+=",t.starting_value=0,t.evaluateConstant=function(t){var n=1+Math.round(t[1])-Math.round(t[0]);return n<=0?this.starting_value:n*t[2]},t.update=function(t,n){return t+n}})});
define('core/math/parsenode/product',['require','pjs','./repeatedoperator'],function(require){"use strict";return require("pjs")(require("./repeatedoperator"),function(t,n){t.in_place_operator="*=",t.starting_value=1,t.evaluateConstant=function(t){var n=1+Math.round(t[1])-Math.round(t[0]);return n<=0?this.starting_value:Math.pow(t[2],n)},t.update=function(t,n){return t*n}})});
define('core/math/parsenode/integral',['require','pjs','./scalarexpression','./dummyindex','core/math/builtin'],function(require){"use strict";var t=require("pjs"),s=require("./scalarexpression"),e=require("./dummyindex"),r=require("core/math/builtin");return t(s,function(t,s){t.init=function(t){s.init.call(this,t),this._differential=t[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof e&&this.removeDependency(this._differential._symbol)},t.getEvalStrings=function(){var t=this.args[0],s=this.args[1],e=this.args[2],i=this.args[3],n=[],r=this.tmpVar(),a=t._symbol,o=this.tmpVar(),p=this.tmpVar(),u=s.getEvalStrings(),h=e.getEvalStrings(),l=i.getEvalStrings();return Array.prototype.push.apply(n,u.statements),Array.prototype.push.apply(n,h.statements),n.push("var "+o+" = "+u.expression),n.push("var "+p+" = "+h.expression),n.push("var "+r+" = function ("+a+") { "+l.statements.join("; ")+"; return "+l.expression+";}"),{statements:n,expression:"BuiltIn.quad("+[r,o,p].join(", ")+")"}},t.evaluate=function(t,s,e){var i=this.args[0],n=e.getCompiledFunction([i._symbol]).fn;return r.quad(n,t,s)}})});
define('core/math/parsenode/functioncall',['require','pjs','./expression','./identifier'],function(require){"use strict";var i=require("pjs"),t=require("./expression"),s=require("./identifier");return i(t,function(i,n){i.init=function(i,t){"string"==typeof i&&(i=s(i)),this._identifier=i,this._symbol=i._symbol,n.init.call(this,t),this.addDependency(this._symbol)},i.copyWithArgs=function(i){return new this.constructor(s(this._symbol),i)}})});
define('core/math/parsenode/seededfunctioncall',['require','pjs','./functioncall'],function(require){"use strict";return require("pjs")(require("./functioncall"),function(i,t){i.init=function(i,n){t.init.call(this,i,n),this.seed=n[0]}})});
define('core/math/parsenode/functionexponent',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(n,e){})});
define('core/math/parsenode/functionfactorial',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(n,e){})});
define('core/math/parsenode/prime',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,n){t.init=function(t,i){n.init.call(this,i),this.order=t},t.copyWithArgs=function(t){return new this.constructor(this.order,t)}})});
define('core/math/parsenode/piecewise',['require','pjs','./scalarexpression','./constant','core/math/maybe-rational'],function(require){"use strict";var n=require("pjs"),t=require("./scalarexpression"),r=require("./constant"),a=require("core/math/maybe-rational").maybeRational,e=n(t,{});return e.chain=function(n,t){for(var r,a=t;n.length;)r=n.pop(),a=e([r.condition,r.if_expr,a]);return a},e.empty=function(){return e([r(!0),r(a(1,1)),r(NaN)])},e});
define('core/math/parsenode/derivative',['require','pjs','./scalarexpression','./identifier'],function(require){"use strict";var i=require("pjs"),n=require("./scalarexpression"),t=require("./identifier");return i(n,function(i,s){i.init=function(i,n){this._symbol=i instanceof t?i._symbol:t(i)._symbol,s.init.call(this,n)}})});
define('core/math/parsenode/nativefunction',['require','pjs','./scalarexpression','core/math/functions'],function(require){"use strict";var n=require("pjs"),t=require("./scalarexpression"),a=require("core/math/functions");return n(t,function(t,e,r){t.init=function(t,r){if(t.length>=this._requiredArity)for(;t.length<this._maxArity;)t.push(this._optionalArguments[t.length-this._requiredArity]);this._errorSymbol="logbase"===this._symbol?"log":r||this._symbol,e.init.call(this,t)},t.copyWithArgs=function(t){var r=e.copyWithArgs.call(this,t);return r._errorSymbol=this._errorSymbol,r},t.scalarEvalExpression=function(t){return this.head+"("+t.join(",")+")"},r.create=function(e,i,o,s){return n(this,function(t,r,n){n.isFunction=!0,t._symbol=e,t.head=i,t._requiredArity=o,t._optionalArguments=s||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=a.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),n.getConcreteInvocationTree=function(t,r,e,i){return n(e,i).getConcreteTree(t,r)},n.getCacheKeys=function(){return[]}})}})});
define('core/math/parsenode/typedfunction',['require','pjs','./nativefunction'],function(require){"use strict";return require("pjs")(require("./nativefunction"),function(t,e,n,o){n.create=function(t,e,n,r){var u=n.length,i=o.create.call(this,t,e,u);return i.prototype._inputTypes=n,i.prototype._outputType=r,i}})});
define('core/math/parsenode/trigfunction',['require','pjs','./nativefunction','./expressionTypes','core/math/errormsg'],function(require){"use strict";var e=require("pjs"),t=require("./nativefunction"),o=require("./expressionTypes").Multiply,u=require("core/math/errormsg");return e(t,function(e,t,r,n){r.create=function(e,t){var c=n.create(e,t,1);return c.getConcreteInvocationTree=function(e,t,r,n){if(r.length<1)throw u.wrongArity(n,1,r.length);var i=t.trigAngleMultiplier?[o([r[0],t.trigAngleMultiplier])].concat(r.slice(1)):r;return c(i,n).getConcreteTree(e,t)},c.getCacheKeys=function(){return["trigAngleMultiplier"]},c}})});
define('core/math/parsenode/inversetrigfunction',['require','pjs','./nativefunction','./expressionTypes'],function(require){"use strict";var e=require("pjs"),t=require("./nativefunction"),c=require("./expressionTypes").Divide;return e(t,function(e,t,n,r){n.create=function(e,t,n){var u=r.create(e,t,1,n);return u.getConcreteInvocationTree=function(e,t,n,r){var i=u(n,r);return(t.trigAngleMultiplier?c([i,t.trigAngleMultiplier]):i).getConcreteTree(e,t)},u.getCacheKeys=function(){return["trigAngleMultiplier"]},u}})});
define('core/math/parsenode/distribution',['require','pjs','./scalarexpression','core/math/errormsg'],function(require){"use strict";var e=require("pjs"),t=require("./scalarexpression"),o=require("core/math/errormsg");return e(t,function(t,n,i){t.init=function(t,i){var r="tdist"===this._symbol;if(t.length<this._requiredArity){if(r)throw o.tdistWrongArity();throw o.wrongArity(i,this._requiredArity,t.length)}if(t.length>this._maxArity){if(r)throw o.tdistWrongArity();throw o.wrongArity(this._symbol,this._maxArity,t.length)}for(;t.length<this._maxArity;)t.push(this._optionalArguments[t.length-this._requiredArity]);n.init.call(this,t)},t.scalarEvalExpression=function(t){return this.head+"("+t.join(",")+")"},i.create=function(r,n,o){return e(this,function(t,i,e){e.isFunction=!0,t._symbol=r,t._requiredArity=n,t._optionalArguments=o||[],t._maxArity=t._requiredArity+t._optionalArguments.length,e.getConcreteInvocationTree=function(t,i,r,n){return e(r,n)},e.getCacheKeys=function(){return[]}})}})});
define('core/math/parsenode/reducerfunction',['require','pjs','./expression','core/math/functions','core/math/errormsg','./distribution','core/math/types'],function(require){"use strict";var i=require("pjs"),t=require("./expression"),s=require("core/math/functions"),r=require("core/math/errormsg"),o=require("./distribution"),a=require("core/math/types");return i(t,function(t,n,e){t.init=function(t,e){if(0===t.length)throw r.zeroArgReducer(e);if(t[0]instanceof o&&"length"!==this._symbol&&!t[0][this._symbol])throw r.functionTypeError(this._symbol,[a.prettyPrint(this.args[0].valueType)]);n.init.call(this,t)},t.evalExpression=function(t){return this.head+"("+t+")"},t.getEvalStrings=function(){var t=this.args[0].getEvalStrings();return{statements:t.statements,expression:this.evalExpression(t.expression)}},e.create=function(n,r){return i(e,function(t,e,i){t._symbol=n,t.head=r,t._arity=1,i.isFunction=!0,i.allowDotCalls=!0,i.dotMinArity=0,i.dotMaxArity=0,t.evaluate=s.createEvaluateFunction(t.evalExpression.bind(t),t._arity),i.getConcreteInvocationTree=function(t,e,n,r){return i(n,r).getConcreteTree(t,e)},i.getCacheKeys=function(){return[]}})}})});
define('core/math/parsenode/doublereducerfunction',['require','pjs','./expression','core/math/functions','core/math/errormsg'],function(require){"use strict";var i=require("pjs"),e=require("./expression"),s=require("core/math/functions"),r=require("core/math/errormsg");return i(e,function(e,n,t){e.init=function(e,t){if(n.init.call(this,e),2!==this.args.length)throw r.wrongDoubleReducerArity(t)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],n=Math.min(this.args[0].length,this.args[1].length),r=0;r<this.args.length;r++){var i=this.args[r],s=i.getEvalStrings();Array.prototype.push.apply(e,s.statements),t.push(i.length===n?s.expression:s.expression+".slice(0,"+n+")")}return{statements:e,expression:this.evalExpression(t)}},t.create=function(n,r){return i(t,function(e,t,i){e._symbol=n,e.head=r,e._arity=2,i.isFunction=!0,e.evaluate=s.createEvaluateFunction(e.evalExpression.bind(e),e._arity),i.getConcreteInvocationTree=function(e,t,n,r){return i(n,r).getConcreteTree(e,t)},i.getCacheKeys=function(){return[]}})}})});
define('core/math/parsenode/parametrizedreducerfunction',['require','pjs','./expression','core/math/functions','core/math/errormsg','./distribution','core/math/types'],function(require){"use strict";var i=require("pjs"),t=require("./expression"),s=require("core/math/functions"),r=require("core/math/errormsg"),o=require("./distribution"),a=require("core/math/types");return i(t,function(t,n,e){t.init=function(t,e){if(t.length<2&&void 0!==this._optionalArgument&&t.push(this._optionalArgument),2!==t.length)throw r.wrongParametrizedReducerArity(e);if(t[0]instanceof o&&!t[0][this._symbol])throw r.functionTypeError(e,[a.prettyPrint(this.args[0].valueType)]);n.init.call(this,t)},t.evalExpression=function(t){return this.head+"("+t.join(",")+")"},t.getEvalStrings=function(){var t=[],e=this.args[0].getEvalStrings(),n=this.args[1].getEvalStrings();return Array.prototype.push.apply(t,e.statements),Array.prototype.push.apply(t,n.statements),{statements:t,expression:this.evalExpression([e.expression,n.expression])}},e.create=function(n,r,o){return i(e,function(t,e,i){t._symbol=n,t.head=r,t._optionalArgument=o,t._arity=2,i.isFunction=!0,i.allowDotCalls=!0,i.dotMinArity=void 0===o?1:0,i.dotMaxArity=1,t.evaluate=s.createEvaluateFunction(t.evalExpression.bind(t),t._arity),i.getConcreteInvocationTree=function(t,e,n,r){return i(n,r).getConcreteTree(t,e)},i.getCacheKeys=function(){return[]}})}})});
define('core/math/parsenode/toplevelfunction',['require','pjs','./nativefunction','core/math/errormsg'],function(require){"use strict";var c=require("pjs"),n=require("./nativefunction"),o=require("core/math/errormsg");return c(n,function(n,e,t,r){t.create=function(n){return c(t,function(n,e,t){t.isFunction=!0,t.getConcreteInvocationTree=function(n,e,t,r){throw o.unexpectedSymbol(r)},t.getCacheKeys=function(){return[]}})}})});
define('core/math/parsenode/builtinfunction',['require','core/math/parsenode/nativefunction','core/math/parsenode/typedfunction','core/math/parsenode/trigfunction','core/math/parsenode/inversetrigfunction','core/math/parsenode/reducerfunction','core/math/parsenode/doublereducerfunction','core/math/parsenode/parametrizedreducerfunction','core/math/parsenode/distribution','core/math/parsenode/toplevelfunction','core/math/types','core/math/maybe-rational','core/math/parsenode/constant'],function(require){"use strict";var e=require("core/math/parsenode/nativefunction"),t=require("core/math/parsenode/typedfunction"),a=require("core/math/parsenode/trigfunction"),r=require("core/math/parsenode/inversetrigfunction"),n=require("core/math/parsenode/reducerfunction"),i=require("core/math/parsenode/doublereducerfunction"),o=require("core/math/parsenode/parametrizedreducerfunction"),c=require("core/math/parsenode/distribution"),l=require("core/math/parsenode/toplevelfunction"),s=require("core/math/types"),u=require("core/math/maybe-rational").maybeRational,m=require("core/math/parsenode/constant"),d=m(u(1,1)),p=m(u(0,1)),I=m(u(1,2));return{sin:a.create("sin","BuiltIn.sin"),cos:a.create("cos","BuiltIn.cos"),tan:a.create("tan","BuiltIn.tan"),cot:a.create("cot","BuiltIn.cot"),sec:a.create("sec","BuiltIn.sec"),csc:a.create("csc","BuiltIn.csc"),arcsin:r.create("arcsin","Math.asin"),arccos:r.create("arccos","Math.acos"),arctan:r.create("arctan","Math.atan2",[d]),arccot:r.create("arccot","BuiltIn.acot"),arcsec:r.create("arcsec","BuiltIn.asec"),arccsc:r.create("arccsc","BuiltIn.acsc"),sinh:e.create("sinh","BuiltIn.sinh",1),cosh:e.create("cosh","BuiltIn.cosh",1),tanh:e.create("tanh","BuiltIn.tanh",1),coth:e.create("coth","BuiltIn.coth",1),sech:e.create("sech","BuiltIn.sech",1),csch:e.create("csch","BuiltIn.csch",1),arcsinh:e.create("arcsinh","BuiltIn.asinh",1),arccosh:e.create("arccosh","BuiltIn.acosh",1),arctanh:e.create("arctanh","BuiltIn.atanh",1),arccoth:e.create("arccoth","BuiltIn.acoth",1),arcsech:e.create("arcsech","BuiltIn.asech",1),arccsch:e.create("arccsch","BuiltIn.acsch",1),sqrt:e.create("sqrt","Math.sqrt",1),rtxsqpone:e.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:e.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:e.create("nthroot","BuiltIn.nthroot",2),log:e.create("log","BuiltIn.common_log",1),logbase:e.create("logbase","BuiltIn.log_base",2),ln:e.create("ln","BuiltIn.log",1),exp:e.create("exp","Math.exp",1),floor:e.create("floor","Math.floor",1),ceil:e.create("ceil","Math.ceil",1),round:e.create("round","BuiltIn.round",1,[p]),abs:e.create("abs","Math.abs",1),sign:e.create("sign","BuiltIn.sign",1),mod:e.create("mod","BuiltIn.mod",2),nCr:e.create("nCr","BuiltIn.nCr",2),nPr:e.create("nPr","BuiltIn.nPr",2),factorial:e.create("factorial","BuiltIn.factorial",1),polyGamma:e.create("polyGamma","BuiltIn.polyGamma",2),lcm:n.create("lcm","BuiltIn.listLCM"),gcd:n.create("gcd","BuiltIn.listGCD"),mean:n.create("mean","BuiltIn.mean"),total:n.create("total","BuiltIn.total"),stdev:n.create("stdev","BuiltIn.stdev"),stdevp:n.create("stdevp","BuiltIn.stdevp"),mad:n.create("mad","BuiltIn.mad"),length:n.create("length","BuiltIn.length"),min:n.create("min","BuiltIn.listMin"),max:n.create("max","BuiltIn.listMax"),argmin:n.create("argmin","BuiltIn.argMin"),argmax:n.create("argmax","BuiltIn.argMax"),median:n.create("median","BuiltIn.median"),var:n.create("var","BuiltIn.var"),varp:n.create("varp","BuiltIn.varp"),cov:i.create("cov","BuiltIn.cov"),covp:i.create("covp","BuiltIn.covp"),corr:i.create("corr","BuiltIn.corr"),spearman:i.create("spearman","BuiltIn.spearman"),quantile:o.create("quantile","BuiltIn.quantile"),quartile:o.create("quartile","BuiltIn.quartile"),upperQuantileIndex:o.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:o.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:o.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:o.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:o.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:e.create("normalcdf","BuiltIn.normalcdf",2,[p,d]),normalpdf:e.create("normalpdf","BuiltIn.normalpdf",1,[p,d]),normalSample:t.create("normalSample","BuiltIn.normalSample",[s.SeedType,s.Number,s.Number],s.Number),uniformSample:t.create("uniformSample","BuiltIn.uniformSample",[s.SeedType,s.Number,s.Number],s.Number),tSample:t.create("tSample","BuiltIn.tSample",[s.SeedType,s.Number],s.Number),poissonSample:t.create("poissonSample","BuiltIn.poissonSample",[s.SeedType,s.Number],s.Number),binomSample:t.create("binomSample","BuiltIn.binomSample",[s.SeedType,s.Number,s.Number],s.Number),binomcdf:e.create("binomcdf","BuiltIn.binomcdf",3,[I]),binompdf:e.create("binompdf","BuiltIn.binompdf",2,[I]),poissoncdf:e.create("poissoncdf","BuiltIn.poissoncdf",3),poissonpdf:e.create("poissonpdf","BuiltIn.poissonpdf",2),uniformcdf:e.create("uniformcdf","BuiltIn.uniformcdf",2,[p,d]),uniformpdf:e.create("uniformpdf","BuiltIn.uniformpdf",1,[p,d]),invNorm:e.create("invNorm","BuiltIn.invNorm",1),invT:e.create("invT","BuiltIn.invT",2),invPoisson:e.create("invPoisson","BuiltIn.invPoisson",2),invBinom:e.create("invBinom","BuiltIn.invBinom",3),invUniform:e.create("invUniform","BuiltIn.invUniform",3),erf:e.create("erf","BuiltIn.erf",1),tpdf:e.create("tpdf","BuiltIn.tpdf",2),tcdf:e.create("tcdf","BuiltIn.tcdf",3),tscore:o.create("tscore","BuiltIn.tscore",p),distance:t.create("distance","BuiltIn.distance",[s.Point,s.Point],s.Number),midpoint:t.create("midpoint","BuiltIn.midpoint",[s.Point,s.Point],s.Point),addPoints:t.create("addPoints","BuiltIn.addPoints",[s.Point,s.Point],s.Point),subtractPoints:t.create("addPoints","BuiltIn.subtractPoints",[s.Point,s.Point],s.Point),negatePoint:t.create("negatePoint","BuiltIn.negatePoint",[s.Point],s.Point),multiplyPoint:t.create("multiplyPoint","BuiltIn.multiplyPoint",[s.Point,s.Number],s.Point),dividePoint:t.create("dividePoint","BuiltIn.dividePoint",[s.Point,s.Number],s.Point),normaldist:c.create("normaldist",0,[p,d]),tdist:c.create("tdist",1),binomialdist:c.create("binomialdist",1,[I]),poissondist:c.create("poissondist",1),uniformdist:c.create("uniformdist",0,[p,d]),pdf:t.create("pdf","BuiltIn.normpdf",[s.Distribution,[s.Number,s.ListOfNumber,s.EmptyList]],s.Number).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=1}),cdf:t.create("cdf","BuiltIn.normcdf",[s.Distribution,[s.Number,s.ListOfNumber,s.EmptyList],[s.Number,s.ListOfNumber,s.EmptyList]],s.Number).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=2}),random:e.create("random","",2).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=3}),rgb:t.create("rgb","BuiltIn.rgb",[s.Number,s.Number,s.Number],s.RGBColor),hsv:t.create("hsv","BuiltIn.hsv",[s.Number,s.Number,s.Number],s.RGBColor),shuffle:e.create("shuffle","",2).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=2,a.minArityUsageExample="shuffle([1,2,3])",e.minArityUsageExample=a.minArityUsageExample,a.maxArityUsageExample="shuffle([1,2,3],2)",e.maxArityUsageExample=a.maxArityUsageExample,a.dotMaxArityUsageExample=".shuffle(2)"}),sort:e.create("sort","",1).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=0,a.dotMaxArity=1,a.minArityUsageExample="sort([3,2,1])",e.minArityUsageExample=a.minArityUsageExample,a.maxArityUsageExample="sort([1,2,3],[3,2,1])",e.maxArityUsageExample=a.maxArityUsageExample,a.dotMaxArityUsageExample=".sort([3,4])"}),join:e.create("join","",2).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=1/0,a.minArityUsageExample="join([1,2],[3,4])",e.minArityUsageExample=a.minArityUsageExample,a.dotMinArityUsageExample=".join([3,4])"}),polygon:l.create("polygon"),histogram:l.create("histogram"),dotplot:l.create("dotplot"),boxplot:l.create("boxplot"),ttest:l.create("ttest"),ittest:l.create("ittest"),stats:l.create("stats"),det:l.create("det"),inv:l.create("inv"),transpose:l.create("transpose"),rref:l.create("rref"),trace:l.create("trace")}});
define('core/math/parsenode/histogram',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,n){i.init=function(i){n.init.call(this,i),this._symbol="histogram"}})});
define('core/math/parsenode/object3d',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(i,n){t.init.call(this,i),this._symbol=n}})});
define('core/math/parsenode/dotplot',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(i){t.init.call(this,i),this._symbol="dotplot"}})});
define('core/math/parsenode/boxplot',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,n){i.init=function(i){n.init.call(this,i),this._symbol="boxplot"}})});
define('core/math/parsenode/ttest',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,i){t.init=function(){i.init.apply(this,arguments),this._symbol="ttest"}})});
define('core/math/parsenode/independent-ttest',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(){t.init.apply(this,arguments),this._symbol="ittest"}})});
define('core/math/parsenode/stats',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(){t.init.apply(this,arguments),this._symbol="stats"}})});
define('core/math/parsenode/equation',['require','./base','pjs','./expressionTypes','core/math/parsenode/comparator'],function(require){"use strict";var s=require("./base"),t=require("pjs"),e=require("./expressionTypes").Subtract,r=require("core/math/parsenode/comparator");return t(s,function(s,i){s.init=function(s,t){i.init.call(this),this.mergeDependencies(s,t),this._lhs=s,this._rhs=t,this._difference=e([this._lhs,this._rhs])},s.asComparator=function(){return r["="]([this._lhs,this._rhs])}})});
define('core/math/parsenode/assignment',['require','./base','./equation','./identifier','pjs'],function(require){"use strict";var e=require("./base"),t=require("./equation"),s=require("./identifier");return require("pjs")(e,function(e,i){e.init=function(e,t){i.init.call(this),e=e._symbol,this.mergeDependencies(t),this._expression=t,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),i=0;i<t.length;i++)if(t[i]===e)return[];return[e]},e.isEquation=function(e){return-1!==e.getDependencies().indexOf(this._symbol)},e.asEquation=function(){var e=t(s(this._symbol),this._expression);return e.userData=this.userData,e.metaData=this.metaData,e},e.shouldPromoteToSlider=function(e){return!!this._expression.isConstant&&(!this._expression.is_mixed_number&&("number"==typeof this._expression.asValue()&&(!!isFinite(this._expression.asValue())&&e.isValidSlider(this._symbol))))}})});
define('core/math/parsenode/functiondefinition',['require','pjs','./base','core/math/errormsg','./equation','./identifier','./functioncall'],function(require){"use strict";var e=require("pjs"),t=require("./base"),a=require("core/math/errormsg"),i=require("./equation"),n=require("./identifier"),r=require("./functioncall");return e(t,function(e,s){e.init=function(e,t,i){s.init.call(this),e=e._symbol,this._argSymbols=t.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=i,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,i,s){if(i.length!==this._argSymbols.length)throw a.wrongArity(s,this._argSymbols.length,i.length);for(var n=Object.create(t),r=0;r<this._argSymbols.length;r++)n[this._argSymbols[r]]=i[r];return this._expression.getConcreteTree(e,n)},e.getSliderVariables=function(e,t){var i=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return-1===i.indexOf(e)})},e.asEquation=function(){var e=this._argSymbols.map(function(e){return n(e)}),t=i(r(n(this._symbol),e),this._expression);return t.userData=this.userData,t.metaData=this.metaData,t}})});
define('core/math/parsenode/optimizedregression',['require','pjs','./base'],function(require){"use strict";return require("pjs")(require("./base"),function(i,n){i.init=function(i,e,t,s,a){for(var r in n.init.call(this),this.parameters=i,this.residuals=e,this.statistics=t,this.model=s,this.isModelValid=a.isModelValid,this.residualVariable=a.residualVariable,this.residualSuggestionId=a.residualSuggestionId,this.shouldSuggestLogMode=a.shouldSuggestLogMode,this.isLinear=a.isLinear,this.parameterWarning=a.parameterWarning,this._exports=[this.residualVariable],i)i.hasOwnProperty(r)&&this._exports.push(r);this.mergeDependencies(s)},i.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments)},i.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},i.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})});
define('numeric',[],function(){"use strict";var y="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=y),y.version="1.2.6",y._myIndexOf=function(r){for(var n=this.length,e=0;e<n;++e)if(this[e]===r)return e;return-1},y.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:y._myIndexOf,y.precision=4,y.largeArray=50,y.compile=function(){var r=Array.prototype.slice.call(arguments),n=r.pop(),n="return function ("+r.join(",")+") {"+n+"}";return new Function(["numeric"],n)(y)},y._dim=function(r){for(var n=[];"object"==typeof r;)n.push(r.length),r=r[0];return n},y.dim=function(r){var n;return"object"==typeof r?"object"==typeof(n=r[0])?"object"==typeof n[0]?y._dim(r):[r.length,n.length]:[r.length]:[]},y.mapreduce=function(r,n){return y.compile("x","accum","_s","_k",'if(typeof accum === "undefined") accum = '+n+';\nif(typeof x === "number") { var xi = x; '+r+'; return accum; }\nif(typeof _s === "undefined") _s = numeric.dim(x);\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i,xi;\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) {\n        accum = arguments.callee(x[i],accum,_s,_k+1);\n    }    return accum;\n}\nfor(i=_n-1;i>=1;i-=2) { \n    xi = x[i];\n    '+r+";\n    xi = x[i-1];\n    "+r+";\n}\nif(i === 0) {\n    xi = x[i];\n    "+r+"\n}\nreturn accum;")},y.mapreduce2=function(r,n){return y.compile("x","var n = x.length;\nvar i,xi;\n"+n+"\nfor(i=n-1;i!==-1;--i) { \n    xi = x[i];\n    "+r+"\n}\nreturn accum;")},y.rep=function(r,n,e){void 0===e&&(e=0);var t,i=r[e],o=Array(i);if(e===r.length-1){for(t=i-2;0<=t;t-=2)o[t+1]=n,o[t]=n;return-1===t&&(o[0]=n),o}for(t=i-1;0<=t;t--)o[t]=y.rep(r,n,e+1);return o},y.dotMMsmall=function(r,n){for(var e,t,i,o,a,f,u=r.length,c=n.length,s=n[0].length,m=Array(u),l=u-1;0<=l;l--){for(i=Array(s),o=r[l],t=s-1;0<=t;t--){for(a=o[c-1]*n[c-1][t],e=c-2;1<=e;e-=2)f=e-1,a+=o[e]*n[e][t]+o[f]*n[f][t];0===e&&(a+=o[0]*n[0][t]),i[t]=a}m[l]=i}return m},y._getCol=function(r,n,e){for(var t=r.length-1;0<t;--t)e[t]=r[t][n],e[--t]=r[t][n];0===t&&(e[0]=r[0][n])},y.dotMMbig=function(r,n){var e,t,i,o=y._getCol,a=n.length,f=Array(a),u=r.length,c=n[0].length,s=new Array(u),m=y.dotVV;for(t=--u;-1!==t;--t)s[t]=Array(c);for(t=--c;-1!==t;--t)for(o(n,t,f),i=u;-1!==i;--i)e=r[i],s[i][t]=m(e,f);return s},y.dotMV=function(r,n){for(var e=r.length,t=(n.length,Array(e)),i=y.dotVV,o=e-1;0<=o;o--)t[o]=i(r[o],n);return t},y.dotVM=function(r,n){for(var e,t,i,o=r.length,a=n[0].length,f=Array(a),u=a-1;0<=u;u--){for(t=r[o-1]*n[o-1][u],e=o-2;1<=e;e-=2)i=e-1,t+=r[e]*n[e][u]+r[i]*n[i][u];0===e&&(t+=r[0]*n[0][u]),f[u]=t}return f},y.dotVV=function(r,n){for(var e,t=r.length,i=r[t-1]*n[t-1],o=t-2;1<=o;o-=2)e=o-1,i+=r[o]*n[o]+r[e]*n[e];return 0===o&&(i+=r[0]*n[0]),i},y.dot=function(r,n){var e=y.dim;switch(1e3*e(r).length+e(n).length){case 2002:return n.length<10?y.dotMMsmall(r,n):y.dotMMbig(r,n);case 2001:return y.dotMV(r,n);case 1002:return y.dotVM(r,n);case 1001:return y.dotVV(r,n);case 1e3:return y.mulVS(r,n);case 1:return y.mulSV(r,n);case 0:return r*n;default:throw new Error("numeric.dot only works on vectors and matrices")}},y.diag=function(r){for(var n,e,t,i=r.length,o=Array(i),a=i-1;0<=a;a--){for(t=Array(i),n=a+2,e=i-1;n<=e;e-=2)t[e]=0,t[e-1]=0;for(a<e&&(t[e]=0),t[a]=r[a],e=a-1;1<=e;e-=2)t[e]=0,t[e-1]=0;0===e&&(t[0]=0),o[a]=t}return o},y.getDiag=function(r){for(var n=Math.min(r.length,r[0].length),e=Array(n),t=n-1;1<=t;--t)e[t]=r[t][t],e[--t]=r[t][t];return 0===t&&(e[0]=r[0][0]),e},y.identity=function(r){return y.diag(y.rep([r],1))},y.pointwise=function(r,n,e){void 0===e&&(e="");for(var t,i=[],o=/\[i\]$/,a="",f=!1,u=0;u<r.length;u++)o.test(r[u])?a=t=r[u].substring(0,r[u].length-3):t=r[u],"ret"===t&&(f=!0),i.push(t);return i[r.length]="_s",i[r.length+1]="_k",i[r.length+2]='if(typeof _s === "undefined") _s = numeric.dim('+a+');\nif(typeof _k === "undefined") _k = 0;\nvar _n = _s[_k];\nvar i'+(f?"":", ret = Array(_n)")+";\nif(_k < _s.length-1) {\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+r.join(",")+",_s,_k+1);\n    return ret;\n}\n"+e+"\nfor(i=_n-1;i!==-1;--i) {\n    "+n+"\n}\nreturn ret;",y.compile.apply(null,i)},y.pointwise2=function(r,n,e){void 0===e&&(e="");for(var t,i=[],o=/\[i\]$/,a="",f=!1,u=0;u<r.length;u++)o.test(r[u])?a=t=r[u].substring(0,r[u].length-3):t=r[u],"ret"===t&&(f=!0),i.push(t);return i[r.length]="var _n = "+a+".length;\nvar i"+(f?"":", ret = Array(_n)")+";\n"+e+"\nfor(i=_n-1;i!==-1;--i) {\n"+n+"\n}\nreturn ret;",y.compile.apply(null,i)},y._biforeach=function r(n,e,t,i,o){if(i!==t.length-1)for(var a=t[i]-1;0<=a;a--)r("object"==typeof n?n[a]:n,"object"==typeof e?e[a]:e,t,i+1,o);else o(n,e)},y._biforeach2=function r(n,e,t,i,o){if(i===t.length-1)return o(n,e);for(var a=t[i],f=Array(a),u=a-1;0<=u;--u)f[u]=r("object"==typeof n?n[u]:n,"object"==typeof e?e[u]:e,t,i+1,o);return f},y._foreach=function r(n,e,t,i){if(t!==e.length-1)for(var o=e[t]-1;0<=o;o--)r(n[o],e,t+1,i);else i(n)},y._foreach2=function r(n,e,t,i){if(t===e.length-1)return i(n);for(var o=e[t],a=Array(o),f=o-1;0<=f;f--)a[f]=r(n[f],e,t+1,i);return a},y.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},y.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},y.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],y.mathfuns2=["atan2","pow","max","min"],y.ops1={neg:"-",not:"!",bnot:"~",clone:""},y.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){for(var t,r,n,e,i=0;i<y.mathfuns2.length;++i)t=y.mathfuns2[i],y.ops2[t]=t;for(i in y.ops2){y.ops2.hasOwnProperty(i)&&(t=y.ops2[i],n="",e=-1!==y.myIndexOf.call(y.mathfuns2,i)?(n="var "+t+" = Math."+t+";\n",r=function(r,n,e){return r+" = "+t+"("+n+","+e+")"},function(r,n){return r+" = "+t+"("+r+","+n+")"}):(r=function(r,n,e){return r+" = "+n+" "+t+" "+e},y.opseq.hasOwnProperty(i+"eq")?function(r,n){return r+" "+t+"= "+n}:function(r,n){return r+" = "+r+" "+t+" "+n}),y[i+"VV"]=y.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),n),y[i+"SV"]=y.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),n),y[i+"VS"]=y.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),n),y[i]=y.compile("var n = arguments.length, i, x = arguments[0], y;\nvar VV = numeric."+i+"VV, VS = numeric."+i+"VS, SV = numeric."+i+'SV;\nvar dim = numeric.dim;\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof x === "object") {\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\n  else '+e("x","y")+"\n}\nreturn x;\n"),y[t]=y[i],y[i+"eqV"]=y.pointwise2(["ret[i]","x[i]"],e("ret[i]","x[i]"),n),y[i+"eqS"]=y.pointwise2(["ret[i]","x"],e("ret[i]","x"),n),y[i+"eq"]=y.compile("var n = arguments.length, i, x = arguments[0], y;\nvar V = numeric."+i+"eqV, S = numeric."+i+'eqS\nvar s = numeric.dim(x);\nfor(i=1;i!==n;++i) { \n  y = arguments[i];\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\n  else numeric._biforeach(x,y,s,0,S);\n}\nreturn x;\n'))}for(i=0;i<y.mathfuns2.length;++i)t=y.mathfuns2[i],delete y.ops2[t];for(i=0;i<y.mathfuns.length;++i)t=y.mathfuns[i],y.ops1[t]=t;for(i in y.ops1)y.ops1.hasOwnProperty(i)&&(n="",t=y.ops1[i],-1!==y.myIndexOf.call(y.mathfuns,i)&&Math.hasOwnProperty(t)&&(n="var "+t+" = Math."+t+";\n"),y[i+"eqV"]=y.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",n),y[i+"eq"]=y.compile("x",'if(typeof x !== "object") return '+t+"x\nvar i;\nvar V = numeric."+i+"eqV;\nvar s = numeric.dim(x);\nnumeric._foreach(x,s,0,V);\nreturn x;\n"),y[i+"V"]=y.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",n),y[i]=y.compile("x",'if(typeof x !== "object") return '+t+"(x)\nvar i;\nvar V = numeric."+i+"V;\nvar s = numeric.dim(x);\nreturn numeric._foreach2(x,s,0,V);\n"));for(i=0;i<y.mathfuns.length;++i)t=y.mathfuns[i],delete y.ops1[t];for(i in y.mapreducers)y.mapreducers.hasOwnProperty(i)&&(t=y.mapreducers[i],y[i+"V"]=y.mapreduce2(t[0],t[1]),y[i]=y.compile("x","s","k",t[1]+'if(typeof x !== "object") {    xi = x;\n'+t[0]+'\n    return accum;\n}if(typeof s === "undefined") s = numeric.dim(x);\nif(typeof k === "undefined") k = 0;\nif(k === s.length-1) return numeric.'+i+"V(x);\nvar xi;\nvar n = x.length, i;\nfor(i=n-1;i!==-1;--i) {\n   xi = arguments.callee(x[i]);\n"+t[0]+"\n}\nreturn accum;\n"))}(),y.inv=function(r){for(var n,e,t,i,o,a=y.dim(r),f=Math.abs,u=a[0],c=a[1],s=y.clone(r),m=y.identity(u),l=0;l<c;++l){for(var h=-1,d=-1,p=l;p!==u;++p)d<(o=f(s[p][l]))&&(h=p,d=o);for(e=s[h],s[h]=s[l],s[l]=e,i=m[h],m[h]=m[l],m[l]=i,r=e[l],o=l;o!==c;++o)e[o]/=r;for(o=c-1;-1!==o;--o)i[o]/=r;for(p=u-1;-1!==p;--p)if(p!==l){for(n=s[p],t=m[p],r=n[l],o=l+1;o!==c;++o)n[o]-=e[o]*r;for(o=c-1;0<o;--o)t[o]-=i[o]*r,t[--o]-=i[o]*r;0===o&&(t[0]-=i[0]*r)}}return m},y.det=function(r){var n=y.dim(r);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: det() only works on square matrices");for(var e,t,i,o,a,f,u,c=n[0],s=1,m=y.clone(r),l=0;l<c-1;l++){for(e=(t=l)+1;e<c;e++)Math.abs(m[e][l])>Math.abs(m[t][l])&&(t=e);for(t!==l&&(f=m[t],m[t]=m[l],m[l]=f,s*=-1),i=m[l],e=l+1;e<c;e++){for(a=(o=m[e])[l]/i[l],t=l+1;t<c-1;t+=2)u=t+1,o[t]-=i[t]*a,o[u]-=i[u]*a;t!==c&&(o[t]-=i[t]*a)}if(0===i[l])return 0;s*=i[l]}return s*m[l][l]},y.transpose=function(r){for(var n,e,t,i,o=r.length,a=r[0].length,f=Array(a),u=0;u<a;u++)f[u]=Array(o);for(n=o-1;1<=n;n-=2){for(t=r[n],e=r[n-1],u=a-1;1<=u;--u)(i=f[u])[n]=t[u],i[n-1]=e[u],(i=f[--u])[n]=t[u],i[n-1]=e[u];0===u&&((i=f[0])[n]=t[0],i[n-1]=e[0])}if(0===n){for(e=r[0],u=a-1;1<=u;--u)f[u][0]=e[u],f[--u][0]=e[u];0===u&&(f[0][0]=e[0])}return f},y.negtranspose=function(r){for(var n,e,t,i,o=r.length,a=r[0].length,f=Array(a),u=0;u<a;u++)f[u]=Array(o);for(n=o-1;1<=n;n-=2){for(t=r[n],e=r[n-1],u=a-1;1<=u;--u)(i=f[u])[n]=-t[u],i[n-1]=-e[u],(i=f[--u])[n]=-t[u],i[n-1]=-e[u];0===u&&((i=f[0])[n]=-t[0],i[n-1]=-e[0])}if(0===n){for(e=r[0],u=a-1;1<=u;--u)f[u][0]=-e[u],f[--u][0]=-e[u];0===u&&(f[0][0]=-e[0])}return f},y.norm2=function(r){return Math.sqrt(y.norm2Squared(r))},y.linspace=function(r,n,e){if(void 0===e&&(e=Math.max(Math.round(n-r)+1,1)),e<2)return 1===e?[r]:[];for(var t=Array(e),i=--e;0<=i;i--)t[i]=(i*n+(e-i)*r)/e;return t},y.getBlock=function(r,f,u){var c=y.dim(r);return function r(n,e){var t,i=f[e],o=u[e]-i,a=Array(o);if(e===c.length-1){for(t=o;0<=t;t--)a[t]=n[t+i];return a}for(t=o;0<=t;t--)a[t]=r(n[t+i],e+1);return a}(r,0)},y.setBlock=function(r,f,u,n){var c=y.dim(r);return function r(n,e,t){var i,o=f[t],a=u[t]-o;if(t===c.length-1)for(i=a;0<=i;i--)n[i+o]=e[i];for(i=a;0<=i;i--)r(n[i+o],e[i],t+1)}(r,n,0),r},y.getRange=function(r,n,e){for(var t,i,o,a=n.length,f=e.length,u=Array(a),c=a-1;-1!==c;--c)for(u[c]=Array(f),i=u[c],o=r[n[c]],t=f-1;-1!==t;--t)i[t]=o[e[t]];return u},y.blockMatrix=function(r){var n=y.dim(r);if(n.length<4)return y.blockMatrix([r]);for(var e,t,i=n[0],o=n[1],a=0,f=0,u=0;u<i;++u)a+=r[u][0].length;for(e=0;e<o;++e)f+=r[0][e][0].length;var c=Array(a);for(u=0;u<a;++u)c[u]=Array(f);var s,m,l,h,d,p=0;for(u=0;u<i;++u){for(s=f,e=o-1;-1!==e;--e)for(s-=(t=r[u][e])[0].length,l=t.length-1;-1!==l;--l)for(d=t[l],m=c[p+l],h=d.length-1;-1!==h;--h)m[s+h]=d[h];p+=r[u][0].length}return c},y.tensor=function(r,n){if("number"==typeof r||"number"==typeof n)return y.mul(r,n);var e=y.dim(r),t=y.dim(n);if(1!==e.length||1!==t.length)throw new Error("numeric: tensor product is only defined for vectors");for(var i,o,a,f=e[0],u=t[0],c=Array(f),s=f-1;0<=s;s--){for(i=Array(u),a=r[s],o=u-1;3<=o;--o)i[o]=a*n[o],i[--o]=a*n[o],i[--o]=a*n[o],i[--o]=a*n[o];for(;0<=o;)i[o]=a*n[o],--o;c[s]=i}return c},y.epsilon=2220446049250313e-31,y.LU=function(r,n){n=n||!1;var e,t,i,o,a,f,u,c,s,m=Math.abs,l=r.length,h=l-1,d=new Array(l);for(n||(r=y.clone(r)),i=0;i<l;++i){for(s=m((f=r[u=i])[i]),t=i+1;t<l;++t)s<(o=m(r[t][i]))&&(s=o,u=t);for((d[i]=u)!=i&&(r[i]=r[u],r[u]=f,f=r[i]),a=f[i],e=i+1;e<l;++e)r[e][i]/=a;for(e=i+1;e<l;++e){for(c=r[e],t=i+1;t<h;++t)c[t]-=c[i]*f[t],c[++t]-=c[i]*f[t];t===h&&(c[t]-=c[i]*f[t])}}return{LU:r,P:d}},y.LUsolve=function(r,n){for(var e,t,i,o,a=r.LU,f=a.length,u=y.clone(n),c=r.P,s=f-1;-1!==s;--s)u[s]=n[s];for(s=0;s<f;++s)for(t=c[s],c[s]!==s&&(o=u[s],u[s]=u[t],u[t]=o),i=a[s],e=0;e<s;++e)u[s]-=u[e]*i[e];for(s=f-1;0<=s;--s){for(i=a[s],e=s+1;e<f;++e)u[s]-=u[e]*i[e];u[s]/=i[s]}return u},y.solve=function(r,n,e){return y.LUsolve(y.LU(r,e),n)},y});
define('core/math/qr',["require","exports"],function(require,r){"use strict";function f(r,t,n){for(var e=r.reflectors,a=r.r,l=r.p,h=t.slice(),o=0;o<e.length;o++)!function(r,t){for(var n=r.length,e=t.length,a=0,l=0,h=e-n;h<e;h++)a+=r[h+n-e]*t[h],l+=r[h+n-e]*r[h+n-e];for(var o=a/l,h=e-n;h<e;h++)t[h]=2*o*r[h+n-e]-t[h]}(e[o],h);for(o=e.length;o<a[0].length;o++)h[o]=0;h.length=a[0].length;for(var f=Math.pow(2,-52),g=n.regularize?f*Math.abs(a[0][0])*Math.max(a.length,a[0].length):0,o=e.length-1;0<=o;o--){var i=a[o];if(Math.abs(i[o])<=g)h[o]=0;else{for(var u=o+1;u<e.length;u++)h[o]-=h[u]*i[u];h[o]/=i[o]}}for(var v,o=l.length-1;0<=o;o--){l[o]!==o&&(v=h[o],h[o]=h[l[o]],h[l[o]]=v)}return h}function n(r){var t=r.r,n=Math.min(t.length,t[0].length),e=t[0][0],a=t[n-1][n-1];return 0===e?1/0:Math.abs(e/a)}Object.defineProperty(r,"__esModule",{value:!0}),r.isNumericallyFullRank=r.conditionNumber=r.qrSolve=r.qr=void 0,r.qr=function(r,t){if(!t||!t.mutateInput){var n=r;r=Array(r.length);for(var e=0;e<n.length;e++)r[e]=n[e].slice()}for(var a=Math.min(r.length,r[0].length),l=Array(a),h=[],o=0;o<a;o++){for(var f=-1/0,g=o,i=o;i<r[o].length;i++){var u=function(r,t,n){for(var e=0;t<r.length;t++)e+=r[t][n]*r[t][n];return e}(r,o,i);f<u&&(f=u,g=i)}if((l[o]=g)!==o)for(e=0;e<r.length;e++){var v=r[e][g];r[e][g]=r[e][o],r[e][o]=v}for(var c=function(r,t,n,e){var a=Array(r.length-t);if(1===a.length)return a[0]=1,a;if(0===e){for(var l=a[0]=1;l<a.length;l++)a[l]=0;return a}var h=r[t][n]<0?-1:1;a[0]=r[t][n]+h*Math.sqrt(e);for(var o=t+1;o<r.length;o++)a[o-t]=r[o][n];return a}(r,o,o,f),i=o;i<r[o].length;i++)!function(r,t,n){for(var e=r.length,a=t.length,l=0,h=0,o=a-e;o<a;o++)l+=r[o+e-a]*t[o][n],h+=r[o+e-a]*r[o+e-a];for(var f=l/h,o=a-e;o<a;o++)t[o][n]=2*f*r[o+e-a]-t[o][n]}(c,r,i);h.push(c)}return{reflectors:h,r:r,p:l}},r.qrSolve=function(r,t,n){return(Array.isArray(t[0])?function(r,t,n){for(var e=Array(r.r[0].length),a=0;a<e.length;a++)e[a]=Array(t[0].length);for(var l=Array(t.length),h=0;h<t[0].length;h++){for(a=0;a<t.length;a++)l[a]=t[a][h];for(var o=f(r,l,n),a=0;a<o.length;a++)e[a][h]=o[a]}return e}:f)(r,t,n)},r.conditionNumber=n,r.isNumericallyFullRank=function(r){var t=Math.pow(2,-52);return Math.max(r.r.length,r.r[0].length)*t*n(r)<1}});
define('core/math/least-squares',["require","exports","numeric","core/math/distance","./qr"],function(require,r,N,v,G){"use strict";function L(r,e){for(var n=[],t=0;t<e;t++)n.push(r);return n}function J(r,e){for(var n=O(r,e),t=0,a=0,o=n;a<o.length;a++){var i=o[a];t+=i*i}return t/n.length}function O(r,e){return r.apply(void 0,e)}function P(r,e){for(var n=[],t=0,a=r;t<a.length;t++){var o=a[t].apply(void 0,e);n.push(o)}return n}function R(r,e){for(var n=[],t=0;t<r.length;t++)e[t]&&n.push(r[t]);return n}function k(r,e,n){for(var t=[],a=0,o=0;a<r.length;a++){var i=0;n[a]&&(i=e[o],o+=1),t.push(r[a]+i)}return t}function f(r,e,n,t){var a,o=t.maxIterations,i=t.linearSubset||L(!1,n.length),u=N.not(i),s=R(e,i),l=R(e,u),v=n,f=0,S=.001;N.any(i)&&(a={Jv:x=N.transpose(P(s,v)),F:y=G.qr(x)},h=O(r,v),v=k(v,N.neg(G.qrSolve(y,h,{regularize:!0})),i));for(var p=!1,g=J(r,v);f<o&&!p&&isFinite(g);){var h=O(r,v),d=P(l,v),M=N.transpose(d),c=void 0,E=void 0;E=a?(y=a.F,x=a.Jv,c=N.dot(d,N.sub(h,N.dot(x,G.qrSolve(y,h,{regularize:!0})))),N.dot(d,N.sub(M,N.dot(x,G.qrSolve(y,M,{regularize:!0}))))):(c=N.dot(d,h),N.dot(d,M));for(var m=v,q=!1;f<o&&!p&&!q;){f+=1;var b=N.add(E,N.diag(L(S,l.length)));m=k(v,N.neg(N.solve(b,c,!0)),u),p=N.all(N.eq(m,v));var x,y,z,I=void 0;a&&(I={Jv:x=N.transpose(P(s,m)),F:y=G.qr(x)},z=O(r,m),m=k(m,N.neg(G.qrSolve(y,z,{regularize:!0})),i));var F=J(r,m);(q=F<g)?(v=m,g=F,a=I,S*=.1):(S=Math.max(S,1e-64),S*=2)}}return{solution:v,MSE:g}}Object.defineProperty(r,"__esModule",{value:!0}),r.testOnlyExports=r.optimizeNonLinear=r.optimizeLinear=r.tryRoundingSmallParametersToZero=r.evaluateMeanSquare=void 0,r.evaluateMeanSquare=J,r.tryRoundingSmallParametersToZero=function(r,e){var n=e.solution.map(function(r){return Math.abs(r)<1e-6?0:r}),t=J(r,n);return isFinite(e.MSE)&&!isFinite(e.MSE)||t<e.MSE||e.MSE!==e.MSE+Math.pow(.5,8)*(t-e.MSE)?e:{solution:n,MSE:t}},r.optimizeLinear=function(r,e){for(var n=P(e,u=L(0,e.length)),t=G.qr(N.transpose(n),{mutateInput:!0}),a=0;a<2;a++)var o=O(r,u),i=N.neg(G.qrSolve(t,o,{regularize:!1})),u=N.add(u,i);var s=J(r,u);if(G.isNumericallyFullRank(t))return{solution:u,MSE:s};for(var l=L(0,e.length),a=0;a<2;a++)o=O(r,l),i=N.neg(G.qrSolve(t,o,{regularize:!0})),l=N.add(l,i);var v=J(r,l);return.999*v<=s?{solution:l,MSE:v}:{solution:u,MSE:s}};function S(r){for(var e=[],n=0;n<o.length;n++){for(var t=[],a=0;a<r;a++)t[a]=0===n&&1!==r?0:1===n&&1!==r?1:o[503*(n*r+a)%o.length];e.push(t)}return e}function p(r,e,n,t,a){for(var o=[],i=0,u=n;i<u.length;i++){var s=u[i];o.push({soln:f(r,e,s,a),initialGuess:s})}o.sort(function(r,e){return isNaN(r.soln.MSE)?1:isNaN(e.soln.MSE)?-1:r.soln.MSE-e.soln.MSE});for(var l=[],v=0;v<t;v++)l.push(o[v].initialGuess);return l}var o=[18.9,.105,.0113,.089,4.414,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777,-500];var s=[3,5,7,11,13,17,19];function g(r,e){for(var n=[],t=0;t<r.length;t++){for(var a=r[t],o=[],i=0;i<a.length;i++){var u=s[i%s.length]*t%r.length;o.push(function(r,e,n,t){if(!e)return r;if("known"!==e.type)return r;var a=e.bounds;return a[0]===-1/0&&a[1]===1/0?r:a[0]===-1/0?a[1]-Math.exp(-r):a[1]===1/0?a[0]+Math.exp(r):n/(t-1)*a[1]+(t-1-n)/(t-1)*a[0]}(a[i],e[i],u,r.length))}n.push(o)}return n}r.optimizeNonLinear=function(r,e,n){var t=(n=n||{}).linearSubset,a=n.bounds,o=n.preferredInitialGuess,i=S(e.length);a&&(i=g(i,a));var u=p(r,e,i,5,{maxIterations:3,linearSubset:t}),s=f(r,e,p(r,e,u,1,{maxIterations:60,linearSubset:t})[0],{maxIterations:250,linearSubset:t});if(!o)return s;var l=f(r,e,o,{maxIterations:100,linearSubset:t});return isFinite(l.MSE)&&(l.MSE<s.MSE||v.approx(l.MSE,s.MSE,8))?l:s},r.testOnlyExports={generateInitialGuesses:S,mapInitialGuesses:g}});
define('core/math/builtinconstants',['require','core/math/parsenode/constant','core/math/maybe-rational'],function(require){"use strict";var t=require("core/math/parsenode/constant"),a=require("core/math/maybe-rational").maybeRational;return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(a(1,1)),infty:t(1/0)}});
define('core/math/builtinframe',['require','core/math/builtinconstants','core/math/parsenode/builtinfunction'],function(require){"use strict";var n,r=require("core/math/builtinconstants"),t=require("core/math/parsenode/builtinfunction"),e={};for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e});
define('core/math/reparameterization',["require","exports","core/math/parsenode/constant","core/math/builtinframe","tslib","core/math/distance","core/math/policy"],function(require,e,C,h,T,k,y){"use strict";function D(e,t,a){var r=e.getPolynomialCoefficients(t).map(function(e){return e.getConcreteTree(y.defaultPolicy,h)});return(a-r[0].asValue())/r[1].asValue()}function O(e,t){return e.map(function(e){return t[e]?+t[e].asValue():NaN})}Object.defineProperty(e,"__esModule",{value:!0}),e.solveForOriginalParameters=e.mapInitialGuesses=void 0,e.mapInitialGuesses=function(e,t){var a={};for(var r in e)e[r].isConstant&&(a[r]=e[r]);var n,s,o,i,l,u=t.model;switch(u.type){case"trig":for(var c=[(l=[u.amplitudeNode,u.frequencyNode,u.phaseNode].map(function(e){return+e.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()}))[0]*Math.cos(l[2]),l[0]*Math.sin(l[2]),l[1]],d=0;d<u.newParameterSymbols.length;d++)a[u.newParameterSymbols[d]]=C(c[d]);break;case"exp":if(u.intercept&&(a[u.intercept.newParameterSymbols[0]]=C(Math.log(u.intercept.sign*u.intercept.node.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()))),u.base&&(a[u.base.newParameterSymbols[0]]=C(Math.log(+u.base.node.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()))),u.shiftScale)for(var m=u.shiftScale,p=m.mulNode,f=m.addNode,b=m.newParameterSymbols,g=m.stats,c=(n=[p,f].map(function(e){return+e.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()}),o=(s=g).range,i=s.midrange,[o*n[0],n[1]+i*n[0]]),d=0;d<b.length;d++)a[b[d]]=C(c[d]);break;default:throw new Error("Unexpected model type "+u.type)}for(var r in a)t.expression.dependsOn(r)||delete a[r];return a},e.solveForOriginalParameters=function(e,t,a){e=T.__assign({},e);var r,n,s,o,i,l,u,c,d,m=t.model;switch(m.type){case"trig":for(var p=(d=O(m.newParameterSymbols,e),[k.hypot(d[0],d[1]),d[2],Math.atan2(d[1],d[0])]),f=[m.amplitudeNode,m.frequencyNode,m.phaseNode],b=0;b<f.length;b++){var g=f[b].substitute(e),h=p[b];e[N=g.getDependencies()[0]]=C(D(g,N,h))}break;case"exp":if(m.shiftScale)for(var y=m.shiftScale,P=y.mulNode,v=y.addNode,w=y.stats,S=y.newParameterSymbols,p=(i=O(S,e),u=(l=w).range,c=l.midrange,[i[0]/u,i[1]-c*i[0]/u]),f=[P,v],b=0;b<f.length;b++){g=f[b].substitute(e),h=p[b];e[N=g.getDependencies()[0]]=C(D(g,N,h))}m.intercept&&(r=m.intercept.node.getDependencies()[0],n=D(m.intercept.node,r,m.intercept.sign*Math.exp(+e[m.intercept.newParameterSymbols[0]].asValue())),e[r]=C(n)),m.base&&(s=m.base.node.getDependencies()[0],o=D(m.base.node,s,Math.exp(+e[m.base.newParameterSymbols[0]].asValue())),e[s]=C(o));break;default:throw new Error("Unimplemented model "+m.type)}for(var N,V={},M=0,x=a;M<x.length;M++){V[N=x[M]]=e[N]}return V}});
define('core/math/parsenode/regression',['require','pjs','./base','core/math/distance','core/math/builtin','core/lib/label','core/math/errormsg','./error','./optimizedregression','./list','./functioncall','./identifier','./constant','./freevariable','./expressionTypes','core/math/types','core/math/least-squares','core/math/reparameterization'],function(require){"use strict";var e=require("pjs"),r=require("./base"),p=require("core/math/distance"),v=require("core/math/builtin"),D=require("core/lib/label"),S=require("core/math/errormsg"),t=require("./error"),T=require("./optimizedregression"),V=require("./list"),n=require("./functioncall"),a=require("./identifier"),R=require("./constant"),h=require("./freevariable"),i=require("./expressionTypes"),y=require("core/math/types"),g=require("core/math/least-squares"),s=require("core/math/reparameterization"),M=s.solveForOriginalParameters,G=s.mapInitialGuesses,_=g.optimizeLinear,d=g.optimizeNonLinear,F=g.evaluateMeanSquare,o=i.Subtract;return e(r,function(e,i,r){function m(e,r,i,t){var n=r.getDependencies();for(h=0;h<n.length;h++)if(!e.validRegressionParameter(n[h]))throw S.invalidRegressionParameter(n[h]);var a=r.getCompiledFunction(n).fn;if(n.length){for(var s,o,u=r.findLinearSubset(n),l=u.every(function(e){return e}),f=[],h=0;h<n.length;h++)f.push(r.takeDerivative(n[h]).getCompiledFunction(n).fn);l?(o=g.tryRoundingSmallParametersToZero(a,_(a,f))).isLinear=!0:(s={linearSubset:u,bounds:function(e,r){for(var i=[],t=0;t<e.length;t++)i.push(r.boundDomain(e[t]));return i}(n,r),preferredInitialGuess:function(e,r,i){var t=[];r=r||{},i=i||{};for(var n=0;n<e.length;n++){var a=e[n],s=D.identifierToLatex(a);i[a]&&isFinite(i[a].asValue())?t.push(+i[a].asValue()):r.hasOwnProperty(s)&&isFinite(r[s])?t.push(+r[s].asValue()):t.push(1)}return t}(n,i,t)},(o=g.tryRoundingSmallParametersToZero(a,d(a,f,s))).isLinear=!1)}else o={solution:[],MSE:F(a,[]),isLinear:!0};return o}function L(e,r){for(var i={},t=r.getDependencies(),n=0;n<t.length;n++)i[t[n]]=R(e.solution[n]);return i}function c(e,r){var i=e.length,t=e[0],n=r[0],a=e[i-1],s=r[i-1];if(isFinite(t)&&isFinite(a)&&isFinite(n)&&isFinite(s)&&s-n!=0){var o=a-t;if(0!=o){for(var u=1;u<i-1;u++){var l=e[u],f=r[u],h=(s*(l-t)+n*(a-l))/o;if(!p.approx(f,h,5))return}return 1}}}e.init=function(e,r){i.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof a,this._logLhs=n("ln",[e]),this._rhs=r,this._difference=o([e,r]),this._logDifference=o([n("ln",[e]),n("ln",[r])]),this.mergeDependencies(e,r)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var r=D.latexToIdentifier(this.userData.residualVariable);if(!e[r])return r}for(var i,t=this.getDependencies(),n=0;n<t.length;n++){var a=t[n].match(/_(.*)/);if(a&&!e[i="e_"+a[1]])return i}for(var s=1;;){if(!e[i="e_"+s])return i;s++}},e.getRHSModel=function(e,r,i){for(var t,n,a=this._rhs.getDependencies(),s=0;s<a.length;s++){var o=a[s];if(r[o]&&r[o].tryGetConcreteTree){var u=r[o].tryGetConcreteTree(e,r);if(!u.isError&&u.valueType===y.ListOfNumber){if(void 0!==t){t=void 0;break}0===u.getDependencies().length&&(t=o,n=u)}}}var l=Object.create(r);void 0!==t&&(l[t]=h(this.tmpVar()));var f=this._rhs.tryGetConcreteTree(e,l);return{node:f,substituted:f.isError?f:f.substitute(i),listNode:n,isValid:void 0!==t}},e.computeStatistics=function(e,r,i,t,n,a){if(t.getDependencies().length)throw S.optimizationError();var s=O(e,t);if(!isFinite(s))throw S.optimizationError();if(0<r.getDependencies().length)return{RMSE:Math.sqrt(s)};var o=y.isList(r.valueType)?v.varp(r.asValue()):0;if(r.getDependencies().length||!isFinite(o)||o<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(s)};var u,l,f=1-s/o;if(i.isValid){var h=[],c=[],g=n&&(a===N.LINLOG||a===N.LOGLOG);V.eachArgs(e,[i.listNode,r],function(e){h.push(g?Math.log(e[0].asValue()):+e[0].asValue()),c.push(+e[1].asValue())});var d=v.corr(h,c);if(p.approx((u=h,l=c,_(function(e,r){for(var i=[],t=0;t<u.length;t++)i.push(l[t]-(e*u[t]+r));return i},[function(){return u.map(function(e){return-e})},function(){return u.map(function(){return-1})}],[0,0])).MSE,s,8))return{r:d,rsquared:d*d}}return{Rsquared:f}},e.getResidualSuggestionId=function(e,r){var i,t=this._rhs.getDependencies();for(var n in r)if(r.hasOwnProperty(n)&&r[n].concreteTree.isTable&&r[n].concreteTree.columns[0]){var a=r[n].rawTree.columns;if(a&&a.length){var s=a[0].getExports();if(1===s.length&&-1!==t.indexOf(s[0])){for(var o=1;o<a.length;o++)if(-1!==a[o].getDependencies().indexOf(e))return;i=i||n}}}return i||void 0};var N={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};function b(e,r,i,t){var n=Object.create(i);for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);return V.wrap(r.getConcreteTree(e,n))}function O(e,r){var i=0;return r.eachElement(e,function(e){var r=e.asValue();i+=r*r}),i/r.length}function E(e,r,i,t,n){var a=i.reparameterizeRegression();if(!a||0===a.length)return{parameters:L(h=m(e,i=i.deriveRegressionRestrictions(),t,n),i),isLinear:h.isLinear,parameterWarning:!1};for(var s=i.getDependencies(),o=1/0,u={},l=!1,f=0;f<a.length;f++){var h,c=a[f],g=c.expression;if((h=m(e,g=g.deriveRegressionRestrictions(),G(t,c),G(n,c))).MSE<o){var d=L(h,g),p=M(d,c,s),v=O(e,b(e,i.substitute(p),r,p));if(u&&(!isFinite(v)||o<=v)){isFinite(v)||(l=!0);continue}o=h.MSE,u=p}}return{parameters:u,isLinear:!1,parameterWarning:l}}e.linearizingTransformation=function(e,r,i){if(!this.isLhsSimple)return N.NONE;if(!i.isValid)return N.NONE;var t=i.substituted;if(t.isError)return N.NONE;if(t.valueType!==y.Number)return N.NONE;var n=t.getDependencies();if(1!==n.length)return N.NONE;if(isFinite(i.node.polynomialOrder(n[0])))return N.NONE;var a=t.getCompiledFunction(n).fn,s=i.listNode;if(t.valueType!==y.Number)return N.NONE;var o=s.mapElements(e,function(e){return+e.asValue()});if(o.length<3)return N.NONE;o.sort(function(e,r){return e-r});var u=o.map(a),l=u.map(Math.log),f=o.map(Math.log),h=!0;return V.wrap(r).eachElement(e,function(e){isFinite(Math.log(+e.asValue()))||(h=!1)}),c(o,l)&&h?N.LOGLIN:c(f,l)&&h?N.LOGLOG:c(f,u)?N.LINLOG:N.NONE},e.optimize=function(e,r,i,t,n){var a=this._lhs.getConcreteTree(e,r),s=this._rhs.getConcreteTree(e,r);this.typeCheck(e,[a,s]);var o,u,l,f,h=function(e){var r={};for(var i in e)r[i]=R(e[i]);return r}(this.userData.regressionParameters),c=E(e,r,V.wrap(this._difference.getConcreteTree(e,r)),h,t),g=c.parameters,d=c.isLinear,p=this.getRHSModel(e,r,g),v=b(e,this._difference,r,g),m=this.linearizingTransformation(e,a,p);f=!this.userData.isLogModeRegression||m!==N.LOGLIN&&m!==N.LOGLOG?this.computeStatistics(e,a,p,v,this.userData.isLogModeRegression,m):(o=this._logDifference.getConcreteTree(e,r),u=this._logLhs.getConcreteTree(e,r),g=(c=E(e,r,o,h,t)).parameters,d=c.isLinear,p=this.getRHSModel(e,r,g),v=b(e,this._difference,r,g),l=b(e,this._logDifference,r,g),this.computeStatistics(e,u,p,l,this.userData.isLogModeRegression,m));var L=this.chooseResidualVariable(i),O=this.getResidualSuggestionId(L,n);return this.userData.residualVariable=D.identifierToLatex(L),T(g,v,f,p.substituted,{isModelValid:p.isValid,residualVariable:L,residualSuggestionId:O,shouldSuggestLogMode:m!==N.NONE,isLinear:d,parameterWarning:c.parameterWarning})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){return e instanceof t?e:S.parseError()}},e.exportTo=function(e,r,i){if(!r.isError){for(var t in r.parameters)r.parameters.hasOwnProperty(t)&&(e.assignmentForbidden(t)||(i[t]=i[t]?S.multiplyDefined(t):r.parameters[t]));e.assignmentForbidden(r.residualVariable)||(i[r.residualVariable]=r.residuals)}},e.getSliderVariables=function(){return[]}})});
define('core/math/parsenode/image',['require','pjs','./base'],function(require){"use strict";return require("pjs")(require("./base"),function(i,e,t,h){i.isImage=!0,i.init=function(i,t){e.init.call(this),this.center=i.center,this.radianAngle=i.radianAngle,this.width=i.width,this.height=i.height,this.opacity=i.opacity,this.moveStrategy=t,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}})});
define('core/math/parsenode/simulation',['require','pjs','./base'],function(require){"use strict";return require("pjs")(require("./base"),function(i,n,t,s){i.isSimulation=!0,i.init=function(i){n.init.call(this),this.fps=i,this.mergeDependencies(this.fps)}})});
define('core/math/parsenode/slider',['require','pjs','./assignment','./identifier'],function(require){"use strict";var i=require("pjs"),n=require("./assignment"),r=require("./identifier");return i(n,function(i,e,s,t){i.isSlider=!0,i.init=function(i,s){e.init.call(this,r(i._symbol),i._expression),this.setInputSpan(i._inputSpan),this.sliderAssignment=i,this.sliderMin=s.sliderMin,this.sliderMax=s.sliderMax,this.sliderSoftMin=s.sliderSoftMin,this.sliderSoftMax=s.sliderSoftMax,this.sliderStep=s.sliderStep,this.sliderIsPlayingOnce=s.sliderIsPlayingOnce,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)},i.shouldPromoteToSlider=function(i){return!1},i.asAssignment=function(){return n(this._symbol,this._expression)}})});
define('core/math/parsenode/table',['require','pjs','./base'],function(require){"use strict";return require("pjs")(require("./base"),function(t,e){t.init=function(t){e.init.call(this),this.columns=t,this._exports=[],this.mergeDependencies.apply(this,t);for(var n=0;n<t.length;n++)Array.prototype.push.apply(this._exports,t[n].getExports())},t.exportPenalty=1,t.isTable=!0,t.exportTo=function(t,n,e){for(var s=0;s<this.columns.length;s++){var r,i=this.columns[s].getExports();i.length&&(r=i[0],t.assignmentForbidden(r)||e[r]||(n.isError?e[r]=n:this.columns[s].exportTo(t,n.columns[s],e)))}},t.getAllIds=function(){return this.columns.map(function(t){return t.header.userData.id})}})});
define('core/math/parsenode/tablecolumn',['require','pjs','./base','./list','./constant','./identifier'],function(require){"use strict";var e=require("pjs"),r=require("./base"),o=require("./list"),t=require("./constant"),i=require("./identifier");return e(r,function(e,n){function s(e){return e.isError?t(NaN):e}e.init=function(e,t,i){n.init.call(this),this.header=e,this.length=t,this.values=i,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof i?[this.header._symbol]:[]},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var n=e[0];if(t.isError)i[n]=t;else try{i[n]=o(t.values.map(s))}catch(e){if(!(e instanceof r))throw e;i[n]=e}}},e.exportTo=function(e,t,i){var n=this.getLegalExports(e);this._exportSymbolsTo(n,t,i)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})});
define('core/math/parsenode/solvedequation',['require','pjs','./base'],function(require){"use strict";return require("pjs")(require("./base"),function(e,t){e.init=function(e,i){t.init.call(this),this._symbol=e,this._expression=i,this.mergeDependencies(i)},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})});
define('core/math/parsenode/seed',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,n){t.init=function(t){"string"!=typeof t&&(t=""+t),this._stringValue=t,n.init.call(this,[])},t.isString=!0,t.getEvalStrings=function(){return{statements:[],expression:"'"+this.asValue()+"'"}},t.asValue=function(){return this._stringValue}})});
define('core/math/parsenode/extendseed',['require','pjs','./expression'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,s){t.init=function(t,e){s.init.call(this,e),this.seed=e[0],this.userSeed=e[1],this.tag=t},t.getEvalStrings=function(){var t=this.seed.getEvalStrings(),e=this.userSeed.getEvalStrings(),s=[];return Array.prototype.push.apply(s,t.statements),Array.prototype.push.apply(s,e.statements),{statements:s,expression:"("+t.expression+") + '::"+this.tag+"' + ("+e.expression+")"}},t.asValue=function(){return this.seed.asValue()+"::"+this.tag+this.userSeed.asValue()},t.copyWithArgs=function(t){return new this.constructor(this.tag,t)}})});
define('core/math/parsenode/rgbcolor',['require','pjs','./scalarexpression'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(s,a,t){s.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue(),+this.args[2].asValue()]},s.asValue=s.asArray,s.getEvalStrings=function(){for(var s=[],a=[],t=0;t<this.args.length;t++){var r=this.args[t].getEvalStrings(),s=s.concat(r.statements);a.push(r.expression)}return{statements:s,expression:"["+a.join(",")+"]"}}})});
define('parsenodes',['require','core/math/parsenode/expressionTypes','core/math/parsenode/base','core/math/parsenode/expression','core/math/parsenode/scalarexpression','core/math/parsenode/error','core/math/parsenode/constant','core/math/parsenode/mixednumber','core/math/parsenode/identifier','core/math/parsenode/ans','core/math/parsenode/freevariable','core/math/parsenode/dummyindex','core/math/parsenode/list','core/math/parsenode/range','core/math/parsenode/broadcast','core/math/parsenode/listaccess','core/math/parsenode/dotaccess','core/math/parsenode/dotaccessexponent','core/math/parsenode/orderedpair','core/math/parsenode/movablepoint','core/math/parsenode/orderedpairaccess','core/math/parsenode/polygon','core/math/parsenode/basecomparator','core/math/parsenode/comparator','core/math/parsenode/doubleinequality','core/math/parsenode/repeatedoperator','core/math/parsenode/sum','core/math/parsenode/product','core/math/parsenode/integral','core/math/parsenode/functioncall','core/math/parsenode/seededfunctioncall','core/math/parsenode/functionexponent','core/math/parsenode/functionfactorial','core/math/parsenode/prime','core/math/parsenode/piecewise','core/math/parsenode/derivative','core/math/parsenode/builtinfunction','core/math/parsenode/nativefunction','core/math/parsenode/typedfunction','core/math/parsenode/reducerfunction','core/math/parsenode/parametrizedreducerfunction','core/math/parsenode/doublereducerfunction','core/math/parsenode/toplevelfunction','core/math/parsenode/distribution','core/math/parsenode/histogram','core/math/parsenode/object3d','core/math/parsenode/dotplot','core/math/parsenode/boxplot','core/math/parsenode/ttest','core/math/parsenode/independent-ttest','core/math/parsenode/stats','core/math/parsenode/assignment','core/math/parsenode/functiondefinition','core/math/parsenode/equation','core/math/parsenode/regression','core/math/parsenode/image','core/math/parsenode/simulation','core/math/parsenode/slider','core/math/parsenode/table','core/math/parsenode/tablecolumn','core/math/parsenode/solvedequation','core/math/parsenode/optimizedregression','core/math/parsenode/seed','core/math/parsenode/extendseed','core/math/parsenode/rgbcolor'],function(require){"use strict";var e=require("core/math/parsenode/expressionTypes"),o={Base:require("core/math/parsenode/base"),Expression:require("core/math/parsenode/expression"),ScalarExpression:require("core/math/parsenode/scalarexpression"),Error:require("core/math/parsenode/error"),Constant:require("core/math/parsenode/constant"),MixedNumber:require("core/math/parsenode/mixednumber"),Identifier:require("core/math/parsenode/identifier"),Ans:require("core/math/parsenode/ans"),FreeVariable:require("core/math/parsenode/freevariable"),DummyIndex:require("core/math/parsenode/dummyindex"),List:require("core/math/parsenode/list"),Range:require("core/math/parsenode/range"),Broadcast:require("core/math/parsenode/broadcast"),ListAccess:require("core/math/parsenode/listaccess"),DotAccess:require("core/math/parsenode/dotaccess"),DotAccessExponent:require("core/math/parsenode/dotaccessexponent"),OrderedPair:require("core/math/parsenode/orderedpair"),MovablePoint:require("core/math/parsenode/movablepoint"),OrderedPairAccess:require("core/math/parsenode/orderedpairaccess"),Polygon:require("core/math/parsenode/polygon"),BaseComparator:require("core/math/parsenode/basecomparator"),Comparator:require("core/math/parsenode/comparator"),DoubleInequality:require("core/math/parsenode/doubleinequality"),RepeatedOperator:require("core/math/parsenode/repeatedoperator"),Sum:require("core/math/parsenode/sum"),Product:require("core/math/parsenode/product"),Integral:require("core/math/parsenode/integral"),FunctionCall:require("core/math/parsenode/functioncall"),SeededFunctionCall:require("core/math/parsenode/seededfunctioncall"),FunctionExponent:require("core/math/parsenode/functionexponent"),FunctionFactorial:require("core/math/parsenode/functionfactorial"),Prime:require("core/math/parsenode/prime"),Piecewise:require("core/math/parsenode/piecewise"),Derivative:require("core/math/parsenode/derivative"),BuiltInFunction:require("core/math/parsenode/builtinfunction"),NativeFunction:require("core/math/parsenode/nativefunction"),TypedFunction:require("core/math/parsenode/typedfunction"),ReducerFunction:require("core/math/parsenode/reducerfunction"),ParametrizedReducerFunction:require("core/math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:require("core/math/parsenode/doublereducerfunction"),TopLevelFunction:require("core/math/parsenode/toplevelfunction"),Distribution:require("core/math/parsenode/distribution"),Histogram:require("core/math/parsenode/histogram"),Object3D:require("core/math/parsenode/object3d"),DotPlot:require("core/math/parsenode/dotplot"),BoxPlot:require("core/math/parsenode/boxplot"),TTest:require("core/math/parsenode/ttest"),IndependentTTest:require("core/math/parsenode/independent-ttest"),Stats:require("core/math/parsenode/stats"),Assignment:require("core/math/parsenode/assignment"),FunctionDefinition:require("core/math/parsenode/functiondefinition"),Equation:require("core/math/parsenode/equation"),Regression:require("core/math/parsenode/regression"),Image:require("core/math/parsenode/image"),Simulation:require("core/math/parsenode/simulation"),Slider:require("core/math/parsenode/slider"),Table:require("core/math/parsenode/table"),TableColumn:require("core/math/parsenode/tablecolumn"),SolvedEquation:require("core/math/parsenode/solvedequation"),OptimizedRegression:require("core/math/parsenode/optimizedregression"),Seed:require("core/math/parsenode/seed"),ExtendSeed:require("core/math/parsenode/extendseed"),RGBColor:require("core/math/parsenode/rgbcolor")};for(var r in e)o[r]=e[r];for(var a in o)o.hasOwnProperty(a)&&"Comparator"!==a&&"BuiltInFunction"!==a&&(o[a].prototype.type=a);for(var t in o.Comparator)o.Comparator.hasOwnProperty(t)&&(o.Comparator[t].prototype.type="Comparator['"+t+"']");for(var n in o.BuiltInFunction)o.BuiltInFunction.hasOwnProperty(n)&&(o.BuiltInFunction[n].prototype.type="BuiltInFunction['"+n+"']");return o});
define('core/math/parser/char-codes',["require","exports"],function(require,e){"use strict";function t(e){return 97<=e&&e<=122}function i(e){return 65<=e&&e<=90}Object.defineProperty(e,"__esModule",{value:!0}),e.isWhitespace=e.isSingleQuote=e.isDot=e.isBackslash=e.isLetter=e.isUpperCaseLetter=e.isLowerCaseLetter=e.isDigit=void 0,e.isDigit=function(e){return 48<=e&&e<=57},e.isLowerCaseLetter=t,e.isUpperCaseLetter=i,e.isLetter=function(e){return t(e)||i(e)},e.isBackslash=function(e){return 92===e},e.isDot=function(e){return 46===e},e.isSingleQuote=function(e){return 39===e},e.isWhitespace=function(e){if(9<=e&&e<=13)return!0;if(8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}});
define('core/math/parser/latex-lexer',["require","exports","./char-codes","./input-span"],function(require,e,o,p){"use strict";function s(e,t,n){return{type:e,span:t,val:n}}function t(e,t,n){for(;o.isWhitespace(e.charCodeAt(t));)t+=1;return{input:e,prevSpan:n,pos:t,token:function(e,t){var n=t;if(t>=e.length)return s("End",p.emptySpanAt(e,t),"");var r=e.charCodeAt(t);{if(o.isDigit(r))return s("Digit",a=p.Span(e,n,t+1),e.charAt(n));if(o.isLetter(r))return s("Letter",a=p.Span(e,n,t+1),e.charAt(n));if(o.isBackslash(r)){if(t+=1,o.isLetter(e.charCodeAt(t))){for(;o.isLetter(e.charCodeAt(t));)t+=1;var a=p.Span(e,n,t),i=p.slice(a);return s(u[i]||"Cmd",a,i)}t+=1;a=p.Span(e,n,t),i=p.slice(a);return s("EscapedSymbol",a,i)}if(o.isSingleQuote(r)){for(t+=1;o.isSingleQuote(e.charCodeAt(t));)t+=1;if("^"===e.charAt(t)){t+=1;a=p.Span(e,n,t),i=p.slice(a);return s("Primes^",a,i)}a=p.Span(e,n,t),i=p.slice(a);return s("Primes",a,i)}a=p.Span(e,n,t+1),i=e.charAt(n);return s(c[i]||"Symbol",a,i)}}(e,t)}}function n(e){return t(e.input,e.token.span.end,e.token.span)}function r(e){return e.token}Object.defineProperty(e,"__esModule",{value:!0}),e.isDone=e.isAt=e.eat=e.peek=e.advance=e.lex=e.LatexToken=e.spanStates=void 0,e.spanStates=function(e,t){return p.joinSpans(e.token.span,t.prevSpan)},e.LatexToken=s,e.lex=function(e){return t(e,0,p.emptySpanAt(e,0))},e.advance=n,e.peek=r,e.eat=function(e,t){if(r(e).type!==t)throw"Parse Error: expected "+t+".";return n(e)},e.isAt=function(e,t){return r(e).type===t},e.isDone=function(e){return e.pos>=e.input.length};var u={"\\left":"Left","\\right":"Right","\\sqrt":"Sqrt","\\frac":"Frac","\\operatorname":"OperatorName"},c={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"}});
define('core/math/parser/latex-node',["require","exports"],function(require,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Symbol=r.OperatorName=r.LeftRight=r.SupSub=r.Frac=r.Sqrt=r.Group=void 0,r.Group=function(r,t){return{type:"Group",span:r,args:t}},r.Sqrt=function(r,t,e){return{type:"Sqrt",span:r,optArg:t,arg:e}},r.Frac=function(r,t,e){return{type:"Frac",span:r,num:t,den:e}},r.SupSub=function(r,t,e,n){return{type:"SupSub",span:r,sup:t,sub:e,nprimes:n}},r.LeftRight=function(r,t,e,n){return{type:"LeftRight",span:r,left:t,right:e,arg:n}},r.OperatorName=function(r,t){return{type:"OperatorName",span:r,arg:t}},r.Symbol=function(r,t){return{type:"Symbol",span:r,val:t}}});
define('core/math/parser/latex-parser',["require","exports","./latex-lexer","./input-span","./latex-node"],function(require,e,v,o,f){"use strict";function p(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":return 1;default:return 0}}function d(e,r){return{state:e,tree:r}}function u(e,r){var a=e,t=[];e:for(;!v.isDone(e);){var s=v.peek(e);switch(s.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"]":if("]"===s.type&&r)break e;var c,n;if(e=(n=l(e)).state,"Group"===(c=n.tree).type)for(var o=0,p=c.args;o<p.length;o++){var u=p[o];t.push(u)}else t.push(c);break;case"}":case"Right":case"End":break e;default:throw"Unexpected token type "+s.type+"."}}var i=v.spanStates(a,e);return d(e,f.Group(i,t))}function l(e){var r=v.peek(e);switch(r.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return d(e=v.advance(e),r);case"[":case"]":return d(e=v.advance(e),f.Symbol(r.span,r.val));case"{":var a,t;return e=(t=u(e=v.advance(e),!1)).state,a=t.tree,d(e=v.eat(e,"}"),a);case"^":case"_":case"Primes":case"Primes^":return function(e){var r,a,t,s,c,n=e,o=0;e:for(;!v.isDone(e);){var p=v.peek(e);switch(p.type){case"^":if(e=v.advance(e),s)throw"Parse Error: double superscript.";r=i(e,p),e=r.state,s=r.tree;break;case"_":if(e=v.advance(e),c)throw"Parse Error: double subscript.";a=i(e,p),e=a.state,c=a.tree;break;case"Primes":if(e=v.advance(e),0<o)throw"Parse Error: double primes.";o=p.val.length;break;case"Primes^":if(e=v.advance(e),0<o)throw"Parse Error: double primes.";if(s)throw"Parse Error: double superscript";o=p.val.length-1,t=i(e,p),e=t.state,s=t.tree;break;default:break e}}var u=v.spanStates(n,e);return d(e,f.SupSub(u,s,c,o))}(e);case"Left":return function(e){var r,a=e;e=v.eat(e,"Left");var t,s=v.peek(e);e=v.advance(e),r=u(e,!1),e=r.state,t=r.tree,e=v.eat(e,"Right");var c=v.peek(e);e=v.advance(e);var n=v.spanStates(a,e);return d(e,f.LeftRight(n,s,c,t))}(e);case"Frac":return function(e){var r,a,t,s,c=e,n=v.peek(e);e=v.eat(e,"Frac"),r=i(e,n),e=r.state,t=r.tree,a=i(e,n),e=a.state,s=a.tree;var o=v.spanStates(c,e);return d(e,f.Frac(o,t,s))}(e);case"Sqrt":return function(e){var r,a,t,s,c=e,n=v.peek(e);e=v.eat(e,"Sqrt"),v.isAt(e,"[")&&(r=function(e){var r,a;return e=v.eat(e,"["),r=u(e,!0),e=r.state,a=r.tree,d(e=v.eat(e,"]"),a)}(e),e=r.state,t=r.tree);a=i(e,n),e=a.state,s=a.tree;var o=v.spanStates(c,e);return d(e,f.Sqrt(o,t,s))}(e);case"OperatorName":return function(e){var r,a,t=e,s=v.peek(e);e=v.eat(e,"OperatorName"),r=i(e,s),e=r.state,a=r.tree;var c=v.spanStates(t,e);return d(e,f.OperatorName(c,a))}(e);case"}":case"Right":throw"Parse Error: unexpected "+r.val+".";case"End":throw"Parse Error: unexpected end.";default:throw"Unexpected token type "+r.type+"."}}function i(e,r){var a,t,s=p(r.type);if(s<=0)throw new Error("Programming Error: greediness must be greater than 0.");var c=p(v.peek(e).type);if(0<c&&c<=s){var n=o.slice(r.span);throw"Parse Error: can't use "+o.slice(v.peek(e).span)+" as argument of "+n+". Use {}."}return e=(a=l(e)).state,"Group"!==(t=a.tree).type&&(t=f.Group(t.span,[t])),d(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0,e.parse=function(e){var r=u(v.lex(e),!1),a=r.state,t=r.tree;if(!v.isDone(a))throw"Parse error: unexpected "+o.slice(v.peek(a).span)+".";return t}});
define('core/math/parser/command-aliases',["require","exports","./char-codes"],function(require,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.translateCmd=void 0;var c={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var",TTest:"ttest",TScore:"tscore",IndependentTTest:"ittest",iTTest:"ittest",inverseCdf:"quantile",inversecdf:"quantile",arsinh:"arcsinh",arcosh:"arccosh",artanh:"arctanh",arcsch:"arccsch",arsech:"arcsech",arcoth:"arccoth"};e.translateCmd=function(e){for(var t=0;s.isBackslash(e.charCodeAt(t));)t+=1;return 0<t&&(e=e.slice(t)),c[e]||e}});
define('core/math/parser/surface-node',["require","exports","./command-aliases"],function(require,n,t){"use strict";function a(n){if("Subscript"===n.type){if("Alphanumeric"!==n.args[1].type)return!1;n=n.args[0]}switch(n.type){case"Cmd":case"Letter":return!0;default:return!1}}Object.defineProperty(n,"__esModule",{value:!0}),n.unwrapSeq=n.isDerivative=n.isSuperscriptedIdentifier=n.isIdentifier=n.MixedNumber=n.Alphanumeric=n.Cmd=n.Decimal=n.Letter=n.Juxt=n.PercentOf=n.Dot=n.Ellipsis=n.Colon=n.EmptyRangeEnd=n.EmptyPiecewise=n.Piecewise=n.Product=n.Sum=n.EmptyIntegral=n.Integral=n.Derivative=n.Frac=n.Nthroot=n.Sqrt=n.Seq=n.Prime=n.Superscript=n.Subscript=n.Pipes=n.List=n.Paren=n.Index=n.ImplicitCall=n.Call=n.Bang=n.Div=n.Mul=n.Sub=n.Add=n.Neg=n.Pos=n.Tilde=n.InequalityChain=n.TrailingInequalityPiece=n.Inequality=n.Equals=void 0,n.Equals=function(n,e){return{type:"Equals",span:n,args:e}},n.Inequality=function(n,e,t){return{type:"Inequality",span:n,symbol:e,args:t}},n.TrailingInequalityPiece=function(n,e,t){return{type:"TrailingInequalityPiece",span:n,symbol:e,args:t}},n.InequalityChain=function(n,e,t){return{type:"InequalityChain",span:n,first:e,chain:t}},n.Tilde=function(n,e){return{type:"Tilde",span:n,args:e}},n.Pos=function(n,e){return{type:"Pos",span:n,args:e}},n.Neg=function(n,e){return{type:"Neg",span:n,args:e}},n.Add=function(n,e){return{type:"Add",span:n,args:e}},n.Sub=function(n,e){return{type:"Sub",span:n,args:e}},n.Mul=function(n,e){return{type:"Mul",span:n,args:e}},n.Div=function(n,e){return{type:"Div",span:n,args:e}},n.Bang=function(n,e){return{type:"Bang",span:n,args:e}},n.Call=function(n,e){return{type:"Call",span:n,args:e}},n.ImplicitCall=function(n,e){return{type:"ImplicitCall",span:n,args:e}},n.Index=function(n,e){return{type:"Index",span:n,args:e}},n.Paren=function(n,e){return{type:"Paren",span:n,args:e}},n.List=function(n,e){return{type:"List",span:n,args:e}},n.Pipes=function(n,e){return{type:"Pipes",span:n,args:e}},n.Subscript=function(n,e){return{type:"Subscript",span:n,args:e}},n.Superscript=function(n,e){return{type:"Superscript",span:n,args:e}},n.Prime=function(n,e,t){return{type:"Prime",span:n,nprimes:e,args:t}},n.Seq=function(n,e){return{type:"Seq",span:n,args:e}},n.Sqrt=function(n,e){return{type:"Sqrt",span:n,args:e}},n.Nthroot=function(n,e){return{type:"Nthroot",span:n,args:e}},n.Frac=function(n,e){return{type:"Frac",span:n,args:e}},n.Derivative=function(n,e){return{type:"Derivative",span:n,args:e}},n.Integral=function(n,e){return{type:"Integral",span:n,args:e}},n.EmptyIntegral=function(n,e){return{type:"EmptyIntegral",span:n,args:e}},n.Sum=function(n,e){return{type:"Sum",span:n,args:e}},n.Product=function(n,e){return{type:"Product",span:n,args:e}},n.Piecewise=function(n,e){return{type:"Piecewise",span:n,args:e}},n.EmptyPiecewise=function(n){return{type:"EmptyPiecewise",span:n}},n.EmptyRangeEnd=function(n){return{type:"EmptyRangeEnd",span:n}},n.Colon=function(n,e){return{type:"Colon",span:n,args:e}},n.Ellipsis=function(n,e){return{type:"Ellipsis",span:n,args:e}},n.Dot=function(n,e){return{type:"Dot",span:n,args:e}},n.PercentOf=function(n,e){return{type:"PercentOf",span:n,args:e}},n.Juxt=function(n,e){return{type:"Juxt",span:n,args:e}},n.Letter=function(n,e){return{type:"Letter",span:n,val:e}},n.Decimal=function(n,e){return{type:"Decimal",span:n,val:e}},n.Cmd=function(n,e){return{type:"Cmd",span:n,val:t.translateCmd(e)}},n.Alphanumeric=function(n,e){return{type:"Alphanumeric",span:n,val:e}},n.MixedNumber=function(n,e,t,r){return{type:"MixedNumber",span:n,whole:e,num:t,den:r}},n.isIdentifier=a,n.isSuperscriptedIdentifier=function(n){return"Superscript"===n.type&&a(n.args[0])},n.isDerivative=function(n,e){if("Letter"!==n.type||"d"!==n.val)return!1;if("Juxt"!==e.type)return!1;var t=e.args,r=t[0],i=t[1];return"Letter"===r.type&&"d"===r.val&&a(i)},n.unwrapSeq=function(n){return"Seq"===n.type?n.args:[n]}});
define('core/math/parser/surface-node-error',["require","exports"],function(require,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdjacentNumbers=n.FractionEmpty=n.FractionMissingDenominator=n.FractionMissingNumerator=n.DifferentialWithSuperscript=n.IntegralMissingDifferential=n.DerivativeMissingBody=n.IntegralMissingBody=n.ProductMissingBody=n.SumMissingBody=n.IntegralMissingBound=n.MissingBound=n.ProductMissingBound=n.SumMissingBound=n.UnexpectedPrime=n.SuperscriptWithPrime=n.PrimeWithoutParen=n.PercentMissingOf=n.FunctionMissingArgument=n.UnexpectedSubscript=n.InvalidSubscript=n.InvalidOperatorName=n.UnrecognizedSymbol=n.UnexpectedDifferential=n.UnexpectedCloseDelimiter=n.MissingCloseDelimiter=n.UnaryOperatorMissingLeft=n.UnaryOperatorMissingRight=n.BinaryOperatorMissingLeft=n.BinaryOperatorMissingRight=n.UnexpectedEnd=n.EmptyRadicalIndex=n.EmptyPipe=n.EmptySquareBracket=n.EmptyRadical=n.EmptySuperscript=n.EmptySubscript=n.EmptyGroup=n.EmptyInput=n.UnexpectedParseError=n.Err=void 0,n.Err=function(n,t){return{type:"Err",span:n,error:t}},n.UnexpectedParseError=function(){return{type:"UnexpectedParseError"}},n.EmptyInput=function(){return{type:"EmptyInput"}},n.EmptyGroup=function(){return{type:"EmptyGroup"}},n.EmptySubscript=function(){return{type:"EmptySubscript"}},n.EmptySuperscript=function(){return{type:"EmptySuperscript"}},n.EmptyRadical=function(){return{type:"EmptyRadical"}},n.EmptySquareBracket=function(){return{type:"EmptySquareBracket"}},n.EmptyPipe=function(){return{type:"EmptyPipe"}},n.EmptyRadicalIndex=function(){return{type:"EmptyRadicalIndex"}},n.UnexpectedEnd=function(){return{type:"UnexpectedEnd"}},n.BinaryOperatorMissingRight=function(n){return{type:"BinaryOperatorMissingRight",val:n}},n.BinaryOperatorMissingLeft=function(n){return{type:"BinaryOperatorMissingLeft",val:n}},n.UnaryOperatorMissingRight=function(n){return{type:"UnaryOperatorMissingRight",val:n}},n.UnaryOperatorMissingLeft=function(n){return{type:"UnaryOperatorMissingLeft",val:n}},n.MissingCloseDelimiter=function(n,t){return{type:"MissingCloseDelimiter",open:n,close:t}},n.UnexpectedCloseDelimiter=function(n,t){return{type:"UnexpectedCloseDelimiter",open:n,close:t}},n.UnexpectedDifferential=function(){return{type:"UnexpectedDifferential"}},n.UnrecognizedSymbol=function(n){return{type:"UnrecognizedSymbol",val:n}},n.InvalidOperatorName=function(n){return{type:"InvalidOperatorName",val:n}},n.InvalidSubscript=function(n){return{type:"InvalidSubscript",val:n}},n.UnexpectedSubscript=function(n){return{type:"UnexpectedSubscript",base:n}},n.FunctionMissingArgument=function(n){return{type:"FunctionMissingArgument",val:n}},n.PercentMissingOf=function(){return{type:"PercentMissingOf"}},n.PrimeWithoutParen=function(){return{type:"PrimeWithoutParen"}},n.SuperscriptWithPrime=function(){return{type:"SuperscriptWithPrime"}},n.UnexpectedPrime=function(){return{type:"UnexpectedPrime"}},n.SumMissingBound=function(){return{type:"SumMissingBound"}},n.ProductMissingBound=function(){return{type:"ProductMissingBound"}},n.MissingBound=function(){return{type:"MissingBound"}},n.IntegralMissingBound=function(){return{type:"IntegralMissingBound"}},n.SumMissingBody=function(){return{type:"SumMissingBody"}},n.ProductMissingBody=function(){return{type:"ProductMissingBody"}},n.IntegralMissingBody=function(){return{type:"IntegralMissingBody"}},n.DerivativeMissingBody=function(){return{type:"DerivativeMissingBody"}},n.IntegralMissingDifferential=function(){return{type:"IntegralMissingDifferential"}},n.DifferentialWithSuperscript=function(){return{type:"DifferentialWithSuperscript"}},n.FractionMissingNumerator=function(){return{type:"FractionMissingNumerator"}},n.FractionMissingDenominator=function(){return{type:"FractionMissingDenominator"}},n.FractionEmpty=function(){return{type:"FractionEmpty"}},n.AdjacentNumbers=function(n){return{type:"AdjacentNumbers",args:n}}});
define('core/math/parser/expression-token-tables',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allTokenTypes=e.rightTable=e.leftTable=e.escapedSymbolTable=e.symbolTable=e.commandTable=void 0;e.commandTable={"\\lt":"<","\\gt":">","\\le":"<=","\\ge":">=","\\leq":"<=","\\geq":">=","\\ldots":"...","\\sim":"~","\\cdot":"*","\\times":"*","\\div":"/","\\ln":"Ln","\\log":"Log","\\int":"Int","\\sum":"Sum","\\prod":"Prod","\\backslash":"Err"};for(var a=0,l=["sin","cos","tan","cot","sec","csc"];a<l.length;a++){var o=l[a];e.commandTable["\\"+o]="Trig",e.commandTable["\\"+o+"h"]="Trig",e.commandTable["\\arc"+o]="Trig",e.commandTable["\\arc"+o+"h"]="Trig",e.commandTable["\\ar"+o+"h"]="Trig"}e.symbolTable={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~",".":"."},e.escapedSymbolTable={"\\{":"\\{","\\}":"\\}","\\%":"%"},e.leftTable={"|":"(|","\\{":"\\{","[":"[","(":"("},e.rightTable={"|":"|)","\\}":"\\}","]":"]",")":")"},e.allTokenTypes=Object.keys({"+":!0,"-":!0,"*":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\{":!0,"\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"~":!0,"%":!0,".":!0,Letter:!0,Decimal:!0,Cmd:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0})});
define('core/math/parser/expression-lexer',["require","exports","./expression-token-tables","./input-span","./input-span","./surface-node"],function(require,e,E,I,n,d){"use strict";function v(e,n,r,t,a,i,s,p){return{opts:e,input:n,prevSpan:r,startIndex:t,endIndex:a,token:i,mode:s,parent:p}}function D(e,n,r){return{type:e,span:n,val:r}}function s(e,n,r,t,a,i){var s=n.args;if(r>s.length&&i)return c(i,t);var p=function e(n,r,t){var a=n.args;if(r>=a.length){var i=I.emptySpanAt(n.span.input,n.span.end);return A(r,D("End",i,""))}var s=n.args[r];switch(s.type){case"Sqrt":case"Frac":case"SupSub":return A(r,s);case"Letter":if(!t||"integral"!==t.type)return A(r,s);if("d"!=s.val)return A(r,s);var p=e(n,r+1,t),o=p.endIndex,u=p.token;if("Letter"!==u.type&&"Cmd"!==u.type)return A(r,s);var l={type:"Differential",span:I.joinSpans(s.span,u.span),val:u.val};return A(o,l);case"LeftRight":var f=s.left,v=E.leftTable[f.val]||"Err",c=I.joinSpans(s.span,f.span);return A(r,D(v,c,f.val));case"OperatorName":for(var g=[],d=0,m=s.arg.args;d<m.length;d++){var y=m[d];if("Letter"!==y.type)return A(r,D("Err",s.span,I.slice(s.arg.span)));g.push(y.val)}var S="\\"+g.join(""),h=E.commandTable[S]||"Cmd";return A(r,D(h,s.span,S));case"Cmd":var b=E.commandTable[s.val]||"Cmd";return A(r,D(b,s.span,s.val));case"EscapedSymbol":var x=E.escapedSymbolTable[s.val]||"Err";return A(r,D(x,s.span,s.val));case"Symbol":if(T(s))return w(n,r);var k=E.symbolTable[s.val]||"Err";return A(r,D(k,s.span,s.val));case"Digit":return L(n,r);default:var j=s;throw"Unexpected atom "+j.type+"."}}(n,r=S(s,r),a),o=p.token,u=p.endIndex;if("End"===o.type&&i){var l=i.input.args[i.startIndex];if("LeftRight"===l.type){var f=l.right;return v(e,n,t,r,u,D(E.rightTable[f.val]||"Err",f.span,f.val),a,i)}}else"Int"===o.type?a=g(a):"Differential"===o.type&&(a=m(a));return v(e,n,t,r,u,o,a,i)}function c(e,n){var r=e.input,t=e.endIndex,a=e.mode,i=e.parent;return s(e.opts,r,t+1,n,a,i)}function r(e){return e.token}function g(e){return{type:"integral",parent:e}}function m(e){if(!e||"integral"!==e.type)throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function A(e,n){return{token:n,endIndex:e}}function w(e,n){var r=e.args[n];if("Symbol"!==r.type||"."!==r.val)throw new Error("Programming Error: expected '.'");if(n+2<e.args.length&&T(e.args[n+1])&&T(e.args[n+2])){var t=I.joinSpans(r.span,e.args[n+2].span);return A(n+2,D("...",t,I.slice(t)))}var a=S(e.args,n+1);return a<e.args.length&&"Digit"===e.args[a].type?L(e,n):A(n,D(E.symbolTable[r.val]||"Err",r.span,r.val))}function L(e,n){var r=function(e,n){for(var r=e.args,t=r[n].span,a=[];n<r.length;n++){var i=S(r,n);if(i>=r.length)break;if("Digit"!==(c=r[i]).type)break;n=i,a.push(c.val)}if((n=S(r,n))>=r.length)return;var s=r[n];if("Frac"!==s.type)return;for(var p=[],o=[],u=0,l=s.num.args;u<l.length;u++){if(!y(c=l[u])){if("Digit"!==c.type)return;p.push(c.val)}}for(var f=0,v=s.den.args;f<v.length;f++){var c;if(!y(c=v[f])){if("Digit"!==c.type)return;o.push(c.val)}}var g=I.joinSpans(t,s.span);return A(n,d.MixedNumber(g,a.join(""),p.join(""),o.join("")))}(e,n);if(r)return r;for(var t=e.args,a=e.args[n].span,i=[],s=!1,p=!1;n<t.length;n++){var o=S(t,n);if(o>=t.length)break;var u=t[o];if("Digit"===u.type)n=o,s=!0,i.push(u.val);else{if(p||!T(u))break;if(o+1<t.length&&T(e.args[o+1]))break;n=o,p=!0,i.push(".")}}if(!s)throw new Error("Programming Error: decimals must have at least one digit.");return A(n-1,D("Decimal",I.joinSpans(a,e.args[n-1].span),i.join("")))}function y(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"Symbol":case"Letter":case"Digit":return;case"Cmd":return"\\space"===e.val;case"EscapedSymbol":return"\\ "===e.val||"\\:"===e.val||"\\,"===e.val||"\\;"===e.val;default:throw"Unexpected atom "+e.type+"."}}function S(e,n){for(;n<e.length&&y(e[n]);)n+=1;return n}function T(e){return"Symbol"===e.type&&"."===e.val}Object.defineProperty(e,"__esModule",{value:!0}),e.didAdvance=e.isDone=e.isAt=e.endIntegral=e.beginIntegral=e.peek=e.advance=e.lexAt=e.lex=e.emptySpanAtState=e.joinState=e.spanStates=e.Span=void 0,Object.defineProperty(e,"Span",{enumerable:!0,get:function(){return n.Span}}),e.spanStates=function(e,n){return I.joinSpans(e.token.span,n.prevSpan)},e.joinState=function(e,n){return I.joinSpans(e,n.prevSpan)},e.emptySpanAtState=function(e){return I.emptySpanAt(e.token.span.input,e.token.span.start)},e.lex=function(e,n){return s(n,e,0,I.emptySpanAt(e.span.input,e.span.start),void 0,void 0)},e.lexAt=s,e.advance=function(e){var n=e.input.args[e.startIndex],r=e.token.span;return n&&"LeftRight"===n.type?s(e.opts,n.arg,0,r,e.mode,e):c(e,r)},e.peek=r,e.beginIntegral=g,e.endIntegral=m,e.isAt=function(e,n){return r(e).type===n},e.isDone=function(e){return e.startIndex>=e.input.args.length},e.didAdvance=function(e,n){return n.token.span.start>e.token.span.start}});
define('core/math/parser/precspec',["require","exports","./expression-token-tables"],function(require,e,o){"use strict";function p(e,r){for(var t=0,n=o.allTokenTypes;t<n.length;t++){var i=n[t];if(void 0===r[i])throw new Error("Programming Error: token "+i+" must be a assigned a "+e+" precedence")}}function s(e,r,t,n){if(void 0!==r[t])throw new Error("Programming Error: duplicate "+e+" entry for token "+t+".");r[t]=n}Object.defineProperty(e,"__esModule",{value:!0}),e.precSpec=e.ra=e.la=e.r=e.l=e.initial=void 0,e.initial=function(e){return{type:"initial",tokenType:e}},e.l=function(e){return{type:"l",tokenType:e}},e.r=function(e){return{type:"r",tokenType:e}},e.la=function(e){return{type:"la",tokenType:e}},e.ra=function(e){return{type:"ra",tokenType:e}},e.precSpec=function(e){for(var t={},r={},n={},i=0;i<e.length;i++)for(var o=0,a=e[i];o<a.length;o++){var c=a[o],l=c.type,u=c.tokenType;switch(l){case"initial":s("initial",t,u,i);break;case"l":s("left",r,u,i);break;case"r":s("right",n,u,i);break;case"la":s("left",r,u,i),s("right",n,u,i);break;case"ra":s("left",r,u,i),s("right",n,u,i-1)}}function f(e){return n[e]}return p("left",r),p("right",n),{rightPrec:f,leftPrec:function(e){return r[e]},initialPrec:function(e){var r=t[e];return void 0===r?f(e):r}}}});
define('core/math/parser/expression-parser',["require","exports","core/math/errormsg","tslib","./surface-node","./surface-node-error","./input-span","./expression-lexer","./precspec"],function(require,e,z,a,H,K,p,Q,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0;var t=[[r.initial("("),r.la(")"),r.initial("\\{"),r.la("\\}"),r.r("["),r.la("]"),r.initial("(|"),r.la("|)"),r.la("Differential"),r.la("End")],[r.ra("...")],[r.la(",")],[r.ra(":")],[r.la("="),r.la(">"),r.la("<"),r.la(">="),r.la("<="),r.la("~")],[r.la("+"),r.la("-")],[r.la("*"),r.la("/"),r.la("Decimal"),r.la("MixedNumber"),r.la("Letter"),r.la("Cmd"),r.la("%"),r.r("("),r.la("\\{"),r.la("(|"),r.la("Frac"),r.la("Sqrt"),r.la("Trig"),r.la("Ln"),r.la("Log"),r.ra("Int"),r.ra("Sum"),r.ra("Prod")],[r.initial("+"),r.initial("-")],[r.la("!")],[r.la("SupSub")],[r.l("["),r.la(".")],[r.l("(")],[r.la("Err")]],n=r.precSpec(t),V=n.leftPrec,k=n.rightPrec,X=n.initialPrec,s={trailingComma:!1};function Y(e,r){var t=Q.lex(e,r);if(Q.isDone(t))return K.Err(Q.spanStates(t,t),K.EmptyGroup());var a=$(t,0),n=a.state,s=a.tree;return"Err"===s.type||Q.isDone(n)?s:pe(n).tree}function Z(e,r){return{state:e,tree:r}}function $(e,r){var t,a,n=e,s=function(e){var r,t,a,n,s,i,p,u,c,o,l,d,y,E,f,v,S,m,g,b=e,M=Q.peek(e),P=X(M.type);switch(M.type){case"+":if(e=Q.advance(e),r=$(e,P),e=r.state,"Err"!==(g=r.tree).type)return Z(e,H.Pos(Q.spanStates(b,e),[g]));if(!ee(g.error))return Z(e,g);var h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingRight(M.val));return Z(e,x);case"-":if(e=Q.advance(e),t=$(e,P),e=t.state,"Err"!==(g=t.tree).type)return Z(e,H.Neg(Q.spanStates(b,e),[g]));if(!ee(g.error))return Z(e,g);h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingRight(M.val));return Z(e,x);case"(":return ne(e);case"\\{":return e=Q.advance(e),Q.isAt(e,"\\}")?Z(e=Q.advance(e),H.EmptyPiecewise(Q.spanStates(b,e))):(a=$(e,P),e=a.state,g=a.tree,n=ie(b,e,g,"\\{","\\}"),e=n.state,"Err"===(g=n.tree).type?Z(e,g):Z(e,H.Piecewise(Q.spanStates(b,e),[g])));case"[":return e=Q.advance(e),Q.isAt(e,"]")?Z(e=Q.advance(e),H.List(Q.spanStates(b,e),[])):(s=$(e,P),e=s.state,g=s.tree,i=ie(b,e,g,"[","]"),e=i.state,"Err"===(g=i.tree).type?Z(e,g):Z(e,H.List(Q.spanStates(b,e),[g])));case"(|":if(e=Q.advance(e),Q.isAt(e,"|)")){e=Q.advance(e);h=Q.spanStates(b,e);return Z(e,K.Err(h,K.EmptyPipe()))}return p=$(e,P),e=p.state,g=p.tree,u=ie(b,e,g,"(|","|)"),e=u.state,"Err"===(g=u.tree).type?Z(e,g):Z(e,H.Pipes(Q.spanStates(b,e),[g]));case"Frac":if(e.opts.disallowFrac)throw z.fractionsUnavailable();e=Q.advance(e);var D=Y(M.num,e.opts),A=Y(M.den,e.opts);if("Err"===D.type&&"EmptyGroup"===D.error.type&&"Err"===A.type&&"EmptyGroup"===A.error.type){h=Q.spanStates(b,e),x=K.Err(h,K.FractionEmpty());return Z(e,x)}if("Err"===D.type&&"EmptyGroup"===D.error.type){h=Q.spanStates(b,e),x=K.Err(h,K.FractionMissingNumerator());return Z(e,x)}if("Err"===A.type&&"EmptyGroup"===A.error.type){h=Q.spanStates(b,e),x=K.Err(h,K.FractionMissingDenominator());return Z(e,x)}if("Err"===D.type)return Z(e,D);if("Err"===A.type)return Z(e,A);if(H.isDerivative(D,A)&&"Juxt"===A.type){var j=A.args[1],U=void 0;if(c=$(e,V("*")-1),e=c.state,"Err"!==(U=c.tree).type)return Z(e,H.Derivative(Q.spanStates(b,e),[j,U]));if(ee(U.error)){h=Q.spanStates(b,e);return Z(e,K.Err(h,K.DerivativeMissingBody()))}return Z(e,U)}return Z(e,H.Frac(Q.spanStates(b,e),[D,A]));case"Sqrt":if(e=Q.advance(e),M.optArg){var C=Y(M.optArg,e.opts);return"Err"===C.type?"EmptyGroup"===C.error.type?Z(e,K.Err(C.span,K.EmptyRadicalIndex())):Z(e,C):"Err"===(k=Y(M.arg,e.opts)).type?"EmptyGroup"===k.error.type?Z(e,K.Err(k.span,K.EmptyRadical())):Z(e,k):Z(e,H.Nthroot(Q.spanStates(b,e),[C,k]))}var k;return"Err"===(k=Y(M.arg,e.opts)).type?"EmptyGroup"===k.error.type?Z(e,K.Err(k.span,K.EmptyRadical())):Z(e,k):Z(e,H.Sqrt(Q.spanStates(b,e),[k]));case"Trig":case"Ln":e=Q.advance(e);var w=H.Cmd(Q.spanStates(b,e),M.val),B=0;if("SupSub"===(R=Q.peek(e)).type){if(e=Q.advance(e),R.sub){h=Q.spanStates(b,e),x=K.Err(h,K.UnexpectedSubscript(w.val));return Z(e,x)}if(O=te(R,e.opts)){if("Err"===O.type)return Z(e,O);w=H.Superscript(Q.spanStates(b,e),[w,O])}B=R.nprimes}if(I=Q.isAt(e,"(")){if(o=ne(e),e=o.state,"Err"===(g=o.tree).type)return Z(e,g);g=H.Call(Q.spanStates(b,e),[w,g.args[0]])}else{if(l=$(e,P-1),e=l.state,"Err"===(g=l.tree).type)return ee(g.error)?Z(e,K.Err(Q.spanStates(b,e),K.FunctionMissingArgument(M.val))):Z(e,g);g=H.ImplicitCall(Q.spanStates(b,e),[w,g])}if(0<B){h=Q.spanStates(b,e);if(!I){x=K.Err(h,K.PrimeWithoutParen());return Z(e,x)}g=H.Prime(h,B,[g])}return Z(e,g);case"Log":e=Q.advance(e);var I,w=H.Cmd(Q.spanStates(b,e),M.val),B=0,L=void 0,O=void 0;if("SupSub"===(R=Q.peek(e)).type&&(e=Q.advance(e),L=re(R,e.opts),O=te(R,e.opts),B=R.nprimes),L&&"Err"===L.type)return Z(e,L);if(O&&"Err"===O.type)return Z(e,O);if(I=Q.isAt(e,"(")){if(d=ne(e),e=d.state,"Err"===(g=d.tree).type)return Z(e,g);g=g.args[0]}else if(y=$(e,P-1),e=y.state,"Err"===(g=y.tree).type)return ee(g.error)?Z(e,K.Err(Q.spanStates(b,e),K.FunctionMissingArgument(M.val))):Z(e,g);var q=L?H.Seq(Q.spanStates(b,e),H.unwrapSeq(g).concat(L)):g,N=L?H.Cmd(Q.spanStates(b,e),"\\logbase"):w;if(O&&(N=H.Superscript(Q.spanStates(b,e),[N,O])),g=I?H.Call(Q.spanStates(b,e),[N,q]):H.ImplicitCall(Q.spanStates(b,e),[N,q]),0<B){h=Q.spanStates(b,e);if(!I){x=K.Err(h,K.PrimeWithoutParen());return Z(e,x)}g=H.Prime(h,B,[g])}return Z(e,g);case"Int":e=Q.advance(e);var R=Q.peek(e);if(e=Q.advance(e),"Err"===(G=ae(R,b,e)).type)return"MissingBound"===G.error.type?Z(e,K.Err(G.span,K.IntegralMissingBound())):Z(e,G);O=G.sup,L=G.sub,j=void 0;if(Q.isAt(e,"Differential"))return E=se(e),e=E.state,"Err"===(j=E.tree).type?Z(e,j):Z(e,H.EmptyIntegral(Q.spanStates(b,e),[j,L,O]));if(f=$(e,P),e=f.state,"Err"===(g=f.tree).type)return ee(g.error)?Z(e,K.Err(g.span,K.IntegralMissingBody())):Z(e,g);var F=g;return Q.isAt(e,"Differential")?(v=se(e),e=v.state,"Err"===(j=v.tree).type?Z(e,j):Z(e,H.Integral(Q.spanStates(b,e),[j,L,O,F]))):Z(e,K.Err(Q.spanStates(b,e),K.IntegralMissingDifferential()));case"Sum":e=Q.advance(e);R=Q.peek(e);if(e=Q.advance(e),"Err"===(G=ae(R,b,e)).type)return"MissingBound"===G.error.type?Z(e,K.Err(G.span,K.SumMissingBound())):Z(e,G);O=G.sup,L=G.sub;return S=$(e,P),e=S.state,"Err"===(g=S.tree).type?ee(g.error)?Z(e,K.Err(g.span,K.SumMissingBody())):Z(e,g):Z(e,H.Sum(Q.spanStates(b,e),[g,L,O]));case"Prod":e=Q.advance(e);var G,R=Q.peek(e);if(e=Q.advance(e),"Err"===(G=ae(R,b,e)).type)return"MissingBound"===G.error.type?Z(e,K.Err(G.span,K.ProductMissingBound())):Z(e,G);O=G.sup,L=G.sub;return m=$(e,P),e=m.state,"Err"===(g=m.tree).type?ee(g.error)?Z(e,K.Err(g.span,K.ProductMissingBody())):Z(e,g):Z(e,H.Product(Q.spanStates(b,e),[g,L,O]));case"Cmd":return e=Q.advance(e),g=H.Cmd(Q.spanStates(b,e),M.val),Z(e,g);case"Letter":return e=Q.advance(e),g=H.Letter(Q.spanStates(b,e),M.val),Z(e,g);case"Decimal":e=Q.advance(e);var _=H.Decimal(Q.spanStates(b,e),M.val);if("Decimal"!==(R=e.token).type&&"MixedNumber"!==R.type)return Z(e,_);var T=e;e=Q.advance(e);var h=Q.spanStates(b,e),W="MixedNumber"===R.type?R:H.Decimal(Q.spanStates(T,e),R.val);return Z(e,K.Err(h,K.AdjacentNumbers([_,W])));case"MixedNumber":if(e.opts.disallowFrac)throw z.fractionsUnavailable();if(e=Q.advance(e),"Decimal"!==(R=e.token).type&&"MixedNumber"!==R.type)return Z(e,M);T=e;e=Q.advance(e);h=Q.spanStates(b,e),W="MixedNumber"===R.type?R:H.Decimal(Q.spanStates(T,e),R.val);return Z(e,K.Err(h,K.AdjacentNumbers([M,W])));case"*":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"~":case":":case"...":case"%":case".":e=Q.advance(e);h=Q.spanStates(b,e),x=K.Err(h,K.BinaryOperatorMissingLeft(M.val));return Z(e,x);case"!":e=Q.advance(e);h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingLeft(M.val));return Z(e,x);case"SupSub":e=Q.advance(e);var J="supsub";M.sub?J="subscript":M.sup?J="superscript":0<M.nprimes&&(J="prime");h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingLeft(J));return Z(e,x);case")":case"\\}":case"]":case"|)":case"Differential":return pe(e);case"Err":e=Q.advance(e);h=Q.spanStates(b,e),x=K.Err(h,K.UnrecognizedSymbol(M.val));return Z(e,x);case"End":h=Q.spanStates(b,e),x=K.Err(h,K.UnexpectedEnd());return Z(e,x);default:throw"Unexpected token type "+M.type+"."}}(e);if(e=s.state,"Err"===(t=s.tree).type)return Z(e,t);if(!Q.didAdvance(n,e))throw new Error("Programming Error: parseInitial did not advance state.");for(;!Q.isDone(e);){if((!Q.isAt(e,"(")||(a=t,H.isIdentifier(a)||"Prime"===a.type&&H.isIdentifier(a.args[0]))?V(Q.peek(e).type):k("("))<=r)break;var i,p=e;if(e=(i=function(e,r){var t,a,n,s,i,p,u,c,o,l,d,y,E,f,v,S=Q.peek(e),m=k(S.type);switch(S.type){case"+":case"-":case"*":case"/":case"=":case"~":case":":case".":if(e=Q.advance(e),t=$(e,m),e=t.state,"Err"!==(v=t.tree).type)return Z(e,function(e,r,t){switch(e){case"+":return H.Add(r,t);case"-":return H.Sub(r,t);case"*":return H.Mul(r,t);case"/":return H.Div(r,t);case"=":return H.Equals(r,t);case"~":return H.Tilde(r,t);case":":return H.Colon(r,t);case".":return H.Dot(r,t);default:throw"Unexpected token type "+e+"."}}(S.type,Q.joinState(r.span,e),[r,v]));if(ee(v.error)){var g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v);case"%":e=Q.advance(e);var M=Q.peek(e);if("Cmd"!==M.type||"of"!==M.val&&"\\of"!==M.val){b=K.Err(S.span,K.PercentMissingOf());return Z(e,b)}if(e=Q.advance(e),a=$(e,m),e=a.state,"Err"!==(v=a.tree).type)return Z(e,H.PercentOf(Q.joinState(r.span,e),[r,v]));if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v);case">=":case"<=":case">":case"<":var P=S.type;if(e=Q.advance(e),n=w(e,P),e=n.state,P=n.symbol,s=$(e,m),e=s.state,"Err"===(v=s.tree).type){if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v)}for(var h=H.Inequality(Q.joinState(r.span,e),P,[r,v]),x=[],D=Q.peek(e).type;">="===D||"<="===D||">"===D||"<"===D;){var A=e;if(P=D,e=Q.advance(e),i=w(e,P),e=i.state,P=i.symbol,p=$(e,m),e=p.state,"Err"===(v=p.tree).type){if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v)}x.push(H.TrailingInequalityPiece(Q.spanStates(A,e),P,[v])),D=Q.peek(e).type}return x.length?Z(e,H.InequalityChain(Q.joinState(r.span,e),h,x)):Z(e,h);case"!":return Z(e=Q.advance(e),H.Bang(Q.joinState(r.span,e),[r]));case"[":A=e;if(e=Q.advance(e),Q.isAt(e,"]")){e=Q.advance(e);g=Q.spanStates(A,e);return Z(e,K.Err(g,K.EmptySquareBracket()))}return u=$(e,m),e=u.state,v=u.tree,c=ie(A,e,v,"[","]"),e=c.state,"Err"===(v=c.tree).type?Z(e,v):Z(e,H.Index(Q.joinState(r.span,e),[r,v]));case"Sqrt":case"Frac":case"Letter":case"Cmd":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\{":case"(|":return o=$(e,m),e=o.state,"Err"===(v=o.tree).type?Z(e,v):Z(e,H.Juxt(Q.joinState(r.span,e),[r,v]));case"(":if(H.isIdentifier(r)){if(l=ne(e),e=l.state,"Err"===(v=l.tree).type)return Z(e,v);g=Q.joinState(r.span,e);return Z(e,H.Call(g,[r,v.args[0]]))}if("Prime"===r.type&&H.isIdentifier(r.args[0])){if(d=ne(e),e=d.state,"Err"===(v=d.tree).type)return Z(e,v);g=Q.joinState(r.span,e);return Z(e,H.Prime(g,r.nprimes,[H.Call(g,[r.args[0],v.args[0]])]))}return y=$(e,m),e=y.state,"Err"===(v=y.tree).type?Z(e,v):Z(e,H.Juxt(Q.joinState(r.span,e),[r,v]));case"SupSub":e=Q.advance(e);var j=B(S),U=te(S,e.opts);if(j&&"Err"===j.type)return Z(e,j);if(U&&"Err"===U.type)return Z(e,U);if(j&&(r=H.Subscript(Q.joinState(r.span,e),[r,j])),U&&(r=H.Superscript(Q.joinState(r.span,e),[r,U])),0<S.nprimes){g=Q.joinState(r.span,e);if(!H.isIdentifier(r)){b=K.Err(g,K.UnexpectedPrime());return Z(e,b)}r=H.Prime(g,S.nprimes,[r])}return Z(e,r);case",":for(var C=[r];Q.isAt(e,",")&&(e=Q.advance(e),!Q.isAt(e,"..."))&&(!e.opts.trailingComma||!function(e){return Q.isAt(e,")")||Q.isAt(e,"]")||Q.isAt(e,"\\}")}(e));){if(E=$(e,m),e=E.state,"Err"===(v=E.tree).type){if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v)}C.push(v)}return Z(e,H.Seq(Q.joinState(r.span,e),C));case"...":if(e=Q.advance(e),Q.isAt(e,",")&&(e=Q.advance(e)),m>=V(Q.peek(e).type))return Z(e,H.Ellipsis(Q.joinState(r.span,e),[r,H.EmptyRangeEnd(Q.emptySpanAtState(e))]));if(f=$(e,m),e=f.state,"Err"!==(v=f.tree).type)return Z(e,H.Ellipsis(Q.joinState(r.span,e),[r,v]));if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v);case"]":case")":case"\\}":case"|)":case"Differential":return pe(e);case"Err":return $(e,m);case"End":g=Q.spanStates(e,e),b=K.Err(g,K.UnexpectedEnd());return Z(e,b);default:throw"Unexpected token type "+S.type+"."}}(e,t)).state,"Err"===(t=i.tree).type)return Z(e,t);if(!Q.didAdvance(p,e))throw new Error("Programming Error: parseSuccessor did not advance state.")}return Z(e,t)}function ee(e){return"UnexpectedDifferential"===e.type||"UnexpectedCloseDelimiter"===e.type||"UnexpectedEnd"===e.type||"BinaryOperatorMissingLeft"===e.type}function w(e,r){if(!Q.isAt(e,"="))return{state:e,symbol:r};switch(r){case">":e=Q.advance(e),r=">=";break;case"<":e=Q.advance(e),r="<="}return{state:e,symbol:r}}function re(e,r){if(e.sub){var t=Y(e.sub,r);return"Err"===t.type&&"EmptyGroup"===t.error.type?K.Err(t.span,K.EmptySubscript()):t}}function B(e){if(e.sub){var r=e.sub;if(0===r.args.length)return K.Err(r.span,K.EmptySubscript());for(var t=[],a=0,n=r.args;a<n.length;a++){var s=n[a];if("Digit"!==s.type&&"Letter"!==s.type){var i=s.span;return K.Err(i,K.InvalidSubscript(p.slice(i)))}t.push(s.val)}return H.Alphanumeric(r.span,t.join(""))}}function te(e,r){if(e.sup){var t=Y(e.sup,r);return"Err"===t.type?"EmptyGroup"===t.error.type?K.Err(t.span,K.EmptySuperscript()):t:0<e.nprimes?K.Err(e.span,K.SuperscriptWithPrime()):t}}function ae(e,r,t){if("SupSub"!==e.type){var a=Q.spanStates(r,t);return K.Err(a,K.MissingBound())}if(0<e.nprimes){a=Q.spanStates(r,t);return K.Err(a,K.UnexpectedPrime())}var n=re(e,t.opts),s=te(e,t.opts);if(!n||"Err"===n.type&&"EmptySubscript"===n.error.type||!s||"Err"===s.type&&"EmptySuperscript"===s.error.type){a=Q.spanStates(r,t);return K.Err(a,K.MissingBound())}return"Err"===n.type?n:"Err"===s.type?s:{type:"Bounds",sup:s,sub:n}}function ne(e){var r,t,a,n=e,s=Q.peek(e),i=X(s.type);if(!Q.isAt(e,"("))throw new Error("Programming Error: expected '(' at start of parseParen.");if(e=Q.advance(e),Q.isAt(e,")")){var p=H.Seq(Q.emptySpanAtState(e),[]);e=Q.advance(e);var u=Q.spanStates(n,e);return Z(e,H.Paren(u,[p]))}return e=(t=ie(n,e=(r=$(e,i)).state,r.tree,"(",")")).state,"Err"===(a=t.tree).type?Z(e,a):Z(e,H.Paren(Q.spanStates(n,e),[a]))}function se(e){var r=e,t=Q.peek(e);if("Differential"!==t.type)throw new Error("Programming Error: expected differential");e=Q.advance(e);var a=H.Cmd(t.span,t.val),n=Q.peek(e);if("SupSub"===n.type){e=Q.advance(e);var s=Q.spanStates(r,e),i=B(n);if(i){if("Err"===i.type)return Z(e,i);a=H.Subscript(s,[a,i])}if(n.sup)return Z(e,K.Err(s,K.DifferentialWithSuperscript()));if(0<n.nprimes)return Z(e,K.Err(s,K.UnexpectedPrime()))}return Z(e,a)}function ie(e,r,t,a,n){if("Err"===t.type&&"UnexpectedEnd"!==t.error.type)return Z(r,t);if("Err"!==t.type&&Q.isAt(r,n))return Z(r=Q.advance(r),t);var s=Q.spanStates(e,r);return Z(r,K.Err(s,K.MissingCloseDelimiter(a,n)))}function pe(e){var r=e;switch(Q.peek(e).type){case")":e=Q.advance(e);var t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("(",")")));case"]":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("[","]")));case"\\}":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("\\{","\\}")));case"|)":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("|","|")));case"Differential":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedDifferential()));default:e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedParseError()))}}e.parse=function(e,r){var t=Y(e,r?a.__assign(a.__assign({},s),r):s);return"Err"===t.type&&"EmptyGroup"===t.error.type?K.Err(t.span,K.EmptyInput()):t}});
define('core/math/inverses',[],function(){"use strict";var n={};return["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"].forEach(function(c){n[c]="arc"+c,n["arc"+c]=c}),n});
define('core/math/parser/lower',["require","exports","core/math/inverses","core/math/errormsg","tslib","./input-span","./surface-node","../maybe-rational"],function(require,e,m,V,a,X,Y,Z){"use strict";function $(e,r){for(var t=[],a=0;a<r.length;a++)t.push(re(e,r[a]));return t}function ee(e){if("Paren"!==e.type)return!1;var r=e.args[0];return"Seq"===r.type&&2===r.args.length}function re(e,r){return e.setInput(te(e,r),r.span)}function te(e,r){var t=e.nodes;switch(r.type){case"Pos":return te(e,r.args[0]);case"Neg":for(var a=-1,n=r.args[0];;)if("Pos"===n.type||"Paren"===n.type&&!ee(n))n=n.args[0];else{if("Neg"!==n.type)break;n=n.args[0],a*=-1}switch(n.type){case"Decimal":var s=ue(n);return t.Constant(-1===a?Z.neg(s):s);case"MixedNumber":s=oe(n);return t.MixedNumber(-1===a?Z.neg(s):s);default:return-1===a?t.Negative([re(e,n)]):te(e,n)}case"Add":return t.Add($(e,r.args));case"Sub":return t.Subtract($(e,r.args));case"Mul":return t.Multiply($(e,r.args));case"Div":return t.Divide($(e,r.args));case"Bang":var i=r.args[0];return"Call"===i.type?t.FunctionFactorial($(e,i.args)):t.FunctionCall("\\factorial",$(e,r.args));case"PercentOf":return t.PercentOf($(e,r.args));case"Call":return se(e,r);case"ImplicitCall":return function(e){var r=e.args,t=r[0],a=r[1];"Superscript"===t.type&&(t=t.args[0]);if("Cmd"===t.type&&"logbase"===t.val&&"Seq"===a.type&&2===a.args.length){if(!le(a.args[0]))throw V.badImplicitCall("log")}else if(!le(a)){if("Cmd"===t.type)throw V.badImplicitCall(t.val);throw V.parseError()}}(r),se(e,r);case"Dot":var c=r.args[1],u=$(e,r.args),o=u[0],p=u[1];if(de(c)){var l=X.emptySpanAt(c.span.input,c.span.end),d=e.setInput(ge(e),l);p=e.setInput(t.SeededFunctionCall(p,[d]),c.span)}else if("Letter"===c.type)switch(c.val){case"x":return t.OrderedPairAccess([o,t.Constant(1)]);case"y":return t.OrderedPairAccess([o,t.Constant(2)])}return t.DotAccess([o,p]);case"Prime":var g=r.args[0];if("Call"!==g.type)throw"ImplicitCall"===g.type?V.primeWithoutParen():V.unexpectedPrime();var y=g.args,f=y[0],m=y[1],v=Y.unwrapSeq(m).length;if("Cmd"===f.type&&"logbase"===f.val){if(2!==v)throw V.primedFunctionArity()}else if(1!==v)throw V.primedFunctionArity();return t.Prime(r.nprimes,$(e,r.args));case"Index":var h=r.args,w=h[0],S=h[1];if("Seq"===S.type)return t.ListAccess([te(e,w),t.List($(e,S.args))]);if("Ellipsis"!==S.type)return ie(S)?t.ListAccess([te(e,w),ce(e,S)]):t.ListAccess($(e,r.args));var b=S.args,x=b[0],C=b[1];return t.ListAccess([te(e,w),t.Range([t.List($(e,Y.unwrapSeq(x))),t.List("EmptyRangeEnd"===C.type?[]:$(e,Y.unwrapSeq(C)))])]);case"Paren":var q=r.args[0];return"Seq"===q.type?t.OrderedPair($(e,q.args)):te(e,q);case"List":if(0===r.args.length)return t.List([]);var E=r.args[0];if("Ellipsis"!==E.type)return t.List($(e,Y.unwrapSeq(E)));var I=E.args,x=I[0],C=I[1];return t.Range([t.List($(e,Y.unwrapSeq(x))),t.List($(e,Y.unwrapSeq(C)))]);case"Pipes":return t.FunctionCall("\\abs",$(e,r.args));case"Subscript":var P=r.args,M=P[0],D=P[1];if(0===D.val.length)throw V.emptySubscript();var L=void 0;switch(M.type){case"Letter":case"Cmd":L=M.val;break;default:throw V.unexpectedSubscript()}return t.Identifier(L+"_"+D.val);case"Superscript":var A=r.args,M=A[0],B=A[1];if("Call"!==M.type||"Seq"===M.args[1].type||function(e){if("Call"!==e.type)return!1;var r=e.args[0];for(;"Superscript"===r.type||"Subscript"===r.type||"Prime"===r.type;)r=r.args[0];return"Cmd"===r.type&&(ae(r.val)||ne(r.val))}(M)){if("Dot"!==M.type)return t.Exponent($(e,r.args));var c=M.args[1],O=$(e,M.args),o=O[0],p=O[1],N=re(e,B);if("Letter"===c.type)switch(c.val){case"x":return t.Exponent([t.OrderedPairAccess([o,t.Constant(1)]),N]);case"y":return t.Exponent([t.OrderedPairAccess([o,t.Constant(2)]),N])}else if("Call"===c.type){if("Letter"===(f=c.args[0]).type)switch(f.val){case"x":return t.Multiply([t.OrderedPairAccess([o,t.Constant(1)]),t.Exponent([re(e,c.args[1]),N])]);case"y":return t.Exponent([t.OrderedPairAccess([o,t.Constant(2)]),t.Exponent([re(e,c.args[1]),N])])}}return t.DotAccessExponent([o,p,N])}return t.FunctionExponent($(e,[M.args[0],M.args[1],B]));case"Sqrt":return t.FunctionCall("sqrt",$(e,r.args));case"Nthroot":return t.FunctionCall("nthroot",$(e,[r.args[1],r.args[0]]));case"Frac":return t.Divide($(e,r.args));case"Derivative":var F=$(e,r.args);if(!Y.isIdentifier(r.args[0]))throw V.parseError();return t.Derivative(F[0],[F[1]]);case"Integral":var R=r.args,F=$(e,[T=R[0],R[1],k=R[2],W=R[3]]);return t.Integral(F);case"EmptyIntegral":var U=$(e,r.args),T=U[0],_=U[1],k=U[2],W=t.Constant(Z.maybeRational(1,1));return t.Integral([T,_,k,W]);case"Sum":var j=r.args,z=j[0],H=j[1],k=j[2];if("Equals"!=H.type)throw V.incorrectSumLowerBound();if(!Y.isIdentifier(H.args[0]))throw V.incorrectSumLowerBound();var J=re(ye(e,(F=$(e,[H.args[0],H.args[1],k]))[0]),z);return t.Sum(F.concat(J));case"Product":var G=r.args,z=G[0],K=G[1],k=G[2];if("Equals"!=K.type)throw V.incorrectProductLowerBound();if(!Y.isIdentifier(K.args[0]))throw V.incorrectProductLowerBound();J=re(ye(e,(F=$(e,[K.args[0],K.args[1],k]))[0]),z);return t.Product(F.concat(J));case"Juxt":return t.Multiply($(e,r.args));case"Letter":return t.Identifier(r.val);case"Cmd":var Q=r.val;if("ans"===Q){if(void 0===e.currentIndex)throw V.badAnsContext();return t.Ans("ans_{"+(e.currentIndex-1)+"}")}if("approx"===Q)throw V.unrecognizedSymbol(Q);return t.Identifier(Q);case"Decimal":return t.Constant(ue(r));case"MixedNumber":return t.MixedNumber(oe(r));case"Piecewise":return function(e,r){var t,a=e.nodes,n=r.args[0],s=Y.unwrapSeq(n),i=[];e:for(t=0;t<s.length;t++){var c=s[t];switch(c.type){case"Colon":var u=c.args,o=u[0],p=u[1];if(!ie(o))throw V.colonMissingCondition();i.push({condition:ce(e,o),if_expr:re(e,p)});break;case"Equals":case"Inequality":case"InequalityChain":i.push({condition:ce(e,c),if_expr:a.Constant(Z.maybeRational(1,1))});break;default:break e}}if(0===t)throw V.piecewiseMissingCondition();if(t<s.length-1)throw V.piecewisePartMissingCondition();var l=t===s.length-1?re(e,s[t]):a.Constant(NaN);if(!a.Piecewise.chain)throw V.featureUnavailable();return a.Piecewise.chain(i,l)}(e,r);case"EmptyPiecewise":if(!t.Piecewise.empty)throw V.featureUnavailable();return t.Piecewise.empty();case"Equals":throw V.unexpectedSymbol("=");case"Inequality":case"InequalityChain":throw V.unexpectedInequality();case"Tilde":throw V.unexpectedSymbol("~");case"Seq":throw V.unexpectedSymbol(",");case"Colon":throw V.unexpectedSymbol(":");case"Ellipsis":throw V.unexpectedSymbol("...");case"EmptyRangeEnd":throw V.invalidHalfEmptyRange();case"Err":throw function(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return V.parseError();case"InvalidOperatorName":return V.invalidOperatorName();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return V.mismatchedBraces(e.open,e.close);case"UnrecognizedSymbol":return"."===e.val?V.unexpectedSymbol(e.val):V.unrecognizedSymbol(e.val);case"EmptyInput":return V.blankExpression();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return V.binaryOperatorMissingOperand("%"===e.val?"% of":e.val);case"UnaryOperatorMissingLeft":return V.unaryOperatorMissingLeft(e.val);case"UnaryOperatorMissingRight":return V.unaryOperatorMissingRight(e.val);case"UnexpectedSubscript":return V.cannotSubscript(e.base);case"PercentMissingOf":return V.percentMissingOf();case"SumMissingBound":return V.sumMissingBound();case"ProductMissingBound":return V.productMissingBound();case"IntegralMissingBound":return V.integralMissingBound();case"SumMissingBody":return V.sumMissingBody();case"ProductMissingBody":return V.productMissingBody();case"IntegralMissingBody":return V.integralMissingBody();case"DerivativeMissingBody":return V.derivativeMissingBody();case"IntegralMissingDifferential":return V.integralMissingDifferential();case"DifferentialWithSuperscript":return V.differentialWithSuperscript();case"FractionMissingNumerator":return V.fractionMissingNumerator();case"FractionMissingDenominator":return V.fractionMissingDenominator();case"FractionEmpty":return V.fractionEmpty();case"EmptySuperscript":return V.emptySuperscript();case"EmptySubscript":return V.emptySubscript();case"InvalidSubscript":return V.invalidSubscript(e.val);case"SuperscriptWithPrime":return V.superscriptWithPrime();case"PrimeWithoutParen":return V.primeWithoutParen();case"UnexpectedPrime":return V.unexpectedPrime();case"EmptyRadical":return V.emptyRadical();case"EmptyRadicalIndex":return V.emptyRadicalIndex();case"EmptySquareBracket":return V.emptySquareBracket();case"EmptyPipe":return V.emptyPipe();case"FunctionMissingArgument":return V.wrongArity(e.val,1,0);case"AdjacentNumbers":return V.adjacentNumbers(pe(e.args[0]),pe(e.args[1]));default:throw"Unexpected surface node "+e.type+"."}}(r.error);default:throw"Unexpected surface node "+r.type+"."}}function ae(e){return m.hasOwnProperty(e)}function ne(e){return"ln"===e||"log"===e||"logbase"===e}function se(e,r){var t,a,n=e.nodes,s=r.args,i=s[0],c=s[1],u=re(e,i),o=$(e,Y.unwrapSeq(c));if(de(i)){var p=X.emptySpanAt(c.span.input,c.span.start),l=e.setInput(ge(e),p);return n.SeededFunctionCall(u,[l].concat(o))}if(Y.isIdentifier(i))return n.FunctionCall(u,o);if("Superscript"===i.type){var d=i.args,g=d[0],y=d[1];if("Cmd"===g.type){var f=g.val;if(ae(f)||ne(f)){if("Decimal"===(a=y).type&&"2"===a.val)return n.Exponent([n.FunctionCall(f,o),re(e,y)]);if("Neg"===(t=y).type&&"Decimal"===(t=t.args[0]).type&&"1"===t.val&&void 0!==m[f])return n.FunctionCall(m[f],o);throw ae(f)?V.badTrigExponent(f):V.badLogExponent("logbase"===f?"log":f)}}}return n.Multiply([u,re(e,c)])}function ie(e){return"Equals"===e.type||"Inequality"===e.type||"InequalityChain"===e.type}function ce(e,r){var t=e.nodes;switch(r.type){case"Equals":return t.Comparator["="]($(e,r.args));case"Inequality":return t.Comparator[r.symbol]($(e,r.args));case"InequalityChain":if(1<r.chain.length)throw V.inequalityChainTooLong();var a=r.first,n=a.symbol,s=a.args,i=s[0],c=s[1],u=r.chain[0],o=u.symbol,p=u.args[0],l=X.emptySpanAt(r.span.input,r.span.start);return t.And([ce(e,Y.Inequality(l,n,[i,c])),ce(e,Y.Inequality(l,o,[c,p]))]);default:throw V.parseError()}}function ue(e){return Z.fromDecimalString(e.val)}function oe(e){var r=Z.fromDecimalString(e.whole),t=Z.fromDecimalString(e.num),a=Z.fromDecimalString(e.den);return Z.add(r,Z.div(t,a))}function pe(e){switch(e.type){case"Decimal":return e.val;case"MixedNumber":return e.whole+" "+e.num+"/"+e.den;default:throw new Error("Unexpected node type "+e.type)}}function le(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":for(var r=e.args[0];;)if("Pos"===r.type||"Paren"===r.type&&!ee(r))r=r.args[0];else{if("Neg"!==r.type)break;r=r.args[0]}return"Decimal"===r.type||"MixedNumber"===r.type;case"Pos":case"Paren":return le(e.args[0]);case"Juxt":case"Mul":case"Div":return le(e.args[0])&&le(e.args[1]);case"Subscript":return le(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return le(e.args[0])&&le(e.args[1]);case"Piecewise":return"Equals"===(r=e.args[0]).type||"Inequality"===r.type||"InequalityChain"===r.type;case"Call":var t=e.args,a=t[0],n=t[1];return Y.isIdentifier(a)||Y.isSuperscriptedIdentifier(a)?!1:le(a)&&le(n);case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Neg":case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"Dot":case"PercentOf":case"Prime":case"EmptyRangeEnd":return!1;default:throw"Unexpected surface node "+e.type+"."}}function de(e){return"Cmd"===e.type&&("random"===e.val||"shuffle"===e.val)}function ge(e){var r=e.nodes.ExtendSeed("",[e.nodes.Identifier("globalRandomSeed"),e.nodes.Seed(e.nextSeed())]);if(!e.seedExtensions)return r;for(var t=0,a=e.seedExtensions;t<a.length;t++)var n=a[t],r=e.nodes.ExtendSeed("ro",[r,n]);return r}function ye(e,r){var t=e.seedExtensions||[];return a.__assign(a.__assign({},e),{seedExtensions:t.concat(r)})}Object.defineProperty(e,"__esModule",{value:!0}),e.lower=void 0,e.lower=function(e,r){return a=r,(t=e).setInput(function(e,r){var t=e.nodes;switch(r.type){case"Equals":var a=r.args,n=a[0],s=a[1];if("Call"===n.type){var i=n.args,c=i[0],u=i[1],o=Y.unwrapSeq(u);if(Y.isIdentifier(c)&&o.every(Y.isIdentifier))return t.FunctionDefinition(re(e,c),$(e,o),re(e,s))}else if(Y.isIdentifier(n))return t.Assignment(re(e,n),re(e,s));return t.Equation(re(e,n),re(e,s));case"Tilde":var p=$(e,r.args),n=p[0],s=p[1];return t.Regression(n,s);case"Inequality":return ce(e,r);case"InequalityChain":if(1<r.chain.length)throw V.inequalityChainTooLong();var l=r.first,d=l.symbol,g=l.args,y=g[0],f=g[1],m=r.chain[0],v=m.symbol,h=m.args[0];return Y.isIdentifier(f)?t.DoubleInequality([re(e,y),d,re(e,f),v,re(e,h)]):ce(e,r);case"Seq":if(!r.args.every(ee))throw V.malformedPoint();return t.List($(e,r.args));case"Call":var w=r.args,S=w[0],b=w[1];if("Cmd"===S.type)switch(S.val){case"polygon":return t.Polygon($(e,Y.unwrapSeq(b)));case"histogram":return t.Histogram($(e,Y.unwrapSeq(b)));case"cube":case"sphere":case"cone":case"dodecahedron":case"octahedron":case"tetrahedron":return t.Object3D($(e,Y.unwrapSeq(b)),S.val);case"dotplot":return t.DotPlot($(e,Y.unwrapSeq(b)));case"boxplot":return t.BoxPlot($(e,Y.unwrapSeq(b)));case"ttest":return t.TTest($(e,Y.unwrapSeq(b)));case"ittest":return t.IndependentTTest($(e,Y.unwrapSeq(b)));case"stats":return t.Stats($(e,Y.unwrapSeq(b)));default:return te(e,r)}return te(e,r);default:return te(e,r)}}(t,a),a.span);var t,a}});
define('core/math/baseparser',["require","exports","core/math/errormsg","parsenodes","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/parser/lower"],function(require,r,f,m,v,g,h){"use strict";function w(){throw f.featureUnavailable()}function b(r,e){return r.setInputSpan(e),r}Object.defineProperty(r,"__esModule",{value:!0}),r.parse=void 0,r.parse=function(r,e){var a=typeof r;if("string"!=a)throw new Error("Type Error: parse can only be called with strings, got "+JSON.stringify(r)+" of type "+a);var t=m;if((e=e||{}).disabledFeatures){t=Object.create(t);for(var o=0,n=e.disabledFeatures;o<n.length;o++){var i=n[o];if(!t[i])throw new Error("Programming Error: "+i+" cannot be disabled because it is not a parsenode.");t[i]=w}}var s=void 0===e.seedPrefix?"":e.seedPrefix,c=0,d={nodes:t,currentIndex:e.index,setInput:b,nextSeed:function(){var r=s+"::vc"+c;return c+=1,r}},p={};void 0!==e.trailingComma&&(p.trailingComma=e.trailingComma),e.disallowFrac&&(p.disallowFrac=!0);try{var l=v.parse(r),u=g.parse(l,p);return h.lower(d,u)}catch(r){return r instanceof m.Error?r:"string"==typeof r?m.Error(r):f.parseError()}}});
define('core/math/sliders',["require","exports"],function(require,e){"use strict";function u(e,a){var r=Math.round(1e6*e)/1e6;return Math.abs(r-e)<a?r:e}function d(e){var a,r=e.target,t=e.hardMin,i=e.hardMax,n=e.step,o=1e-10;if(void 0!==t&&void 0!==i&&(o=Math.min(o,Math.abs(i-t)/1e3)),n&&(o=Math.min(o,n/10)),void 0!==t&&(t=u(t,o)),void 0!==i&&(i=u(i,o)),e.forceSliderToMax&&void 0!==i&&(r=i),i<t)return t;if(r<=t)return t;if(i<=r)return i;n&&(a=void 0!==t?t:0,r=n*Math.round((r-a)/n)+a);var d=u(r,o);return!n&&t!==d&&i!==d||(r=d),r<=t?t:i<=r?i:r}Object.defineProperty(e,"__esModule",{value:!0}),e.computeSoftMax=e.constrainSliderValueLikeEvaluator=e.determineWhichLimitsAreCompatibleWithValue=e.roundToReasonableDecimal=void 0,e.roundToReasonableDecimal=u,e.determineWhichLimitsAreCompatibleWithValue=function(e){var a=!0,r=!0,t=!0;return void 0!==e.hardMin&&e.target<e.hardMin&&(a=!1),void 0!==e.hardMax&&e.target>e.hardMax&&(r=!1),e.step&&d({target:e.target,step:e.step,hardMin:a?e.hardMin:void 0,hardMax:r?e.hardMax:void 0})!==e.target&&(t=!1),{min:a,max:r,step:t}},e.constrainSliderValueLikeEvaluator=d,e.computeSoftMax=function(e){var a,r=e.storedMax,t=e.sliderValue,i=e.hardMin,n=e.step,o=10;return o<r&&(o=r),o<t&&(o=t),o<i&&(o=i),n&&(o=o<=(a=d({target:o,hardMin:i,hardMax:void 0,step:n}))?a:a+n),o}});
define('core/math/features/getConcreteTree',['require','parsenodes','core/math/errormsg','core/math/types','core/lib/label','core/math/builtin','core/math/distance','core/math/maybe-rational','core/math/rational-arithmetic-sequence','core/math/sliders'],function(require){"use strict";var p=require("parsenodes"),d=require("core/math/errormsg"),u=require("core/math/types"),o=require("core/lib/label"),g=require("core/math/builtin"),a=require("core/math/distance"),m=require("core/math/maybe-rational"),y=m.maybeRational,f=require("core/math/rational-arithmetic-sequence"),C=p.List,h=p.Range,i=p.OrderedPair,c=p.ScalarExpression,T=p.Constant,v=p.ExtendSeed,l=p.Multiply,_=p.Identifier,b=p.DummyIndex,w=p.BuiltInFunction,L=require("core/math/sliders");function x(e,t,r){for(var i=[],n=0;n<e.length;n++)i.push(e[n].getConcreteTree(t,r));return i}function e(){return this.getDependencies().concat([this._symbol])}function A(e,t,r,i){var n=i.length-1,s=e[t];if(!s)throw d.unexpectedSymbol(".");if(s.isError)throw s;if(!s.isFunction)throw d.unexpectedSymbol(".");if(!s.allowDotCalls)throw d.illegalDotCall(r);var o,a="random"===t,c="random"===t||"shuffle"===t,h=c?i[1].valueType:i[0].valueType;if((o=h)!==u.Distribution&&!u.isList(o))throw d.dotLHSTypeError("."+r,u.prettyPrint(h));var l=c?1:0;if(n<s.dotMinArity){if(a)throw d.randomArity();throw d.wrongArity("."+r,s.dotMinArity-l,n-l,s.dotMinArityUsageExample)}if(n>s.dotMaxArity){if(a)throw d.randomArity();throw d.wrongArity("."+r,s.dotMaxArity-l,n-l,s.dotMaxArityUsageExample)}}function O(e,t,r,i,n){var s=x(r,i,n);return A(n,e,t,s),n[e].getConcreteInvocationTree(i,n,s,t)}function D(e,t){return!e.isError&&-1===t.indexOf(e.valueType)?d.parseError():e}function P(e,t,r){if(t){var i=t.getDependencies();if(t.isError)r.errors[e]=!0;else if(0<i.length){r.errors[e]=!0;for(var n=0;n<i.length;n++)i[n]===r.exportedSymbol?r.errors.cycle=!0:r.missingVars.push(i[n])}else r.values[e]=+t.asValue();r.valids[e]=isFinite(r.values[e]),r.valids[e]||(r.values[e]=void 0)}else r.valids[e]=!0}function E(e){return e&&e.valueType===u.ListOfNumber&&1===e.length&&e.args?e.args[0]:e}function S(e,t,r,i,n,s){if(i<t.length&&!a.approx(s,t.elementAt(e,i).asValue(),10))throw d.nonArithmeticRange();if(n-i<=r.length&&1<n-i&&!a.approx(s,r.elementAt(e,r.length-n+i).asValue(),10))throw d.nonArithmeticRange()}function s(e,t){for(var r=!1,i=!1,n=!1,s=0;s<e.length;s++){var o=e[s];(o.isList||o.isBroadcast)&&(i=!0,0===o.length&&(n=!0));for(var a=o.getDependencies(),c=0;c<a.length;c++)if(-1!==t.indexOf(a[c])){if(o.isList||o.isBroadcast)return"list"}else r=!0}return i?n?"empty":r?"broadcast":"list":"none"}function F(e){for(var t=[],r=[],i=[],n=0;n<e.length;n++){var s,o=e[n];if(o.isList){for(var a,c=!1,h=0;h<i.length;h++)if(o===i[h]){c=!0,(s=p.DummyIndex(r[h])).valueType=u.elementType(o.valueType),t.push(s);break}c||(a=p.Base.prototype.tmpVar(),r.push(a),i.push(o),(s=p.DummyIndex(a)).valueType=u.elementType(o.valueType),t.push(s))}else o.isBroadcast?(Array.prototype.push.apply(r,o._replacedSymbols),Array.prototype.push.apply(i,o._lists),t.push(o._expression)):t.push(o)}return{replacedArgs:i,concreteArgs:t,replacedSymbols:r}}p.Base.prototype.tryGetConcreteTree=function(){var t;try{t=this.getConcreteTree.apply(this,arguments)}catch(e){t=e instanceof p.Base?e:d.parseError()}return t},p.Base.prototype.getConcreteTree=function(e,t,r){if(this.isConcreteTreeCacheValid(t))return this.__cachedConcreteTree.value;for(var i=this._getConcreteTree(e,t,r),n={},s=this.getCacheKeys().slice();s.length;){var o,a=s.pop();n.hasOwnProperty(a)||(o=t[a],(n[a]=o)&&Array.prototype.push.apply(s,o.getCacheKeys()))}return this.__cachedConcreteTree={keys:n,value:i},i},p.Base.prototype.getCacheKeys=function(){return this.getDependencies()},p.Histogram.prototype.getCacheKeys=e,p.Object3D.prototype.getCacheKeys=e,p.DotPlot.prototype.getCacheKeys=e,p.BoxPlot.prototype.getCacheKeys=e,p.TTest.prototype.getCacheKeys=e,p.IndependentTTest.prototype.getCacheKeys=e,p.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},p.PercentOf.prototype._getConcreteTree=function(e,t){return p.Divide([p.Multiply(this.args),p.Constant(y(100,1))]).getConcreteTree(e,t)},p.Assignment.prototype._getConcreteTree=function(e,t){return this._expression.getConcreteTree(e,t)},p.Identifier.prototype._getConcreteTree=function(e,t){var r=o.latexToIdentifier(this.getInputString()),i=t[this._symbol];if(i){if(i.isError)throw i;if(i.isFunction)throw d.identifierAsFunction(r);return i.getConcreteTree(e,t)}if(w.hasOwnProperty(this._symbol))throw d.functionUnsupported(r);return p.FreeVariable(this._symbol)},p.Ans.prototype._getConcreteTree=function(e,t){if(void 0===t[this._symbol])throw d.ansUndefined();return _.prototype._getConcreteTree.call(this,e,t)},p.Equation.prototype._getConcreteTree=function(e,t){return this.asComparator().getConcreteTree(e,t)},p.Constant.prototype._getConcreteTree=function(e,t){return new this.constructor(this._constantValue)},p.Seed.prototype._getConcreteTree=function(e,t){return new this.constructor(this._stringValue)},p.Derivative.prototype._getConcreteTree=function(e,t){var r;if(t[this._symbol]){var i=Object.create(t);i[this._symbol]=p.FreeVariable(this._symbol);var n=t[this._symbol].getConcreteTree(e,t);if(n.valueType!==u.Number&&n.valueType!==u.ListOfNumber)throw d.derivativeVariableTypeError(this._symbol,[u.prettyPrint(n.valueType)]);var s={};return s[this._symbol]=n,r=this.args[0].getConcreteTree(e,i),this.typeCheck(e,[r]),r.takeDerivative(this._symbol).substitute(s).getConcreteTree(e,t)}return r=this.args[0].getConcreteTree(e,t),this.typeCheck(e,[r]),r.takeDerivative(this._symbol).getConcreteTree(e,t)},p.DoubleInequality.prototype._getConcreteTree=function(e,t){return new this.constructor([p.Piecewise([this._indicator,this._expressions[0],T(NaN)]).getConcreteTree(e,t),this._operators[0],_(this._symbol),this._operators[1],p.Piecewise([this._indicator,this._expressions[1],T(NaN)]).getConcreteTree(e,t)])},p.Expression.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return this.typeCheck(e,r),this._constantCollapsedCopy(e,r)},p.Add.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.addPoints(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Subtract.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.subtractPoints(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Multiply.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Number,u.ListOfNumber])?p.BuiltInFunction.multiplyPoint(this.args).getConcreteTree(e,t):u.isOneOf(r[0].valueType,[u.Number,u.ListOfNumber])&&u.isOneOf(r[1].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.multiplyPoint([this.args[1],this.args[0]]).getConcreteTree(e,t):n.call(this,e,t)},p.Divide.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Number,u.ListOfNumber])?p.BuiltInFunction.dividePoint(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Negative.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.negatePoint(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Error.prototype._getConcreteTree=function(e,t){return this},p.FreeVariable.prototype._getConcreteTree=function(e,t){return this},p.FunctionCall.prototype._getConcreteTree=function(e,t){var r="logbase"===this._symbol?"log":o.latexToIdentifier(this._identifier.getInputString()),i=t[this._symbol];if(i&&i.isError)throw i;if(!i||!i.isFunction){if(w.hasOwnProperty(this._symbol))throw"logbase"===this._symbol&&t.ln&&t.log?d.logbaseUnsupported():d.functionUnsupported(r);if(i&&i.getConcreteTree(e,t).valueType===u.Distribution)throw d.distributionAsFunction(i._symbol);if(1==this.args.length){var n=[_(this._symbol),this.args[0]];return l(n).getConcreteTree(e,t)}if(i)throw d.variableAsFunction(r);throw d.functionNotDefined(r)}var s=x(this.args,e,t);return i.getConcreteInvocationTree(e,t,s,r)},p.DotAccess.prototype._getConcreteTree=function(e,t){var r,i,n=this.args[0],s=this.args[1];if(s instanceof p.Identifier)return i=o.latexToIdentifier(s.getInputString()),r=[n],O(s._symbol,i,r,e,t);if(s instanceof p.SeededFunctionCall)return i=o.latexToIdentifier(s._identifier.getInputString()),r=[s.seed,n].concat(s.args.slice(1)),O(s._symbol,i,r,e,t);if(s instanceof p.FunctionCall)return"x"===s._symbol&&1===s.args.length?p.Multiply([p.OrderedPairAccess([n,p.Constant(1)]),s.args[0]]).getConcreteTree(e,t):"y"===s._symbol&&1===s.args.length?p.Multiply([p.OrderedPairAccess([n,p.Constant(2)]),s.args[0]]).getConcreteTree(e,t):(i=o.latexToIdentifier(s._identifier.getInputString()),r=[n].concat(s.args),O(s._symbol,i,r,e,t));throw d.unexpectedSymbol(".")},p.DotAccessExponent.prototype._getConcreteTree=function(e,t){return"FunctionCall"!==this.args[1].type||1!==this.args[1].args.length||t[this.args[1]._symbol]&&t[this.args[1]._symbol].isFunction?p.Exponent([p.DotAccess([this.args[0],this.args[1]]),this.args[2]]).getConcreteTree(e,t):p.Multiply([p.DotAccess([this.args[0],p.Identifier(this.args[1]._symbol)]),p.Exponent([this.args[1].args[0],this.args[2]])]).getConcreteTree(e,t)},p.FunctionExponent.prototype._getConcreteTree=function(e,t){var r=this.args[0]._symbol;return t[r]&&t[r].isFunction?p.Exponent([p.FunctionCall(r,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):l([this.args[0],p.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t)},p.FunctionFactorial.prototype._getConcreteTree=function(e,t){var r=this.args[0]._symbol;return t[r]&&t[r].isFunction?p.FunctionCall("\\factorial",[p.FunctionCall(r,[this.args[1]])]).getConcreteTree(e,t):l([this.args[0],p.FunctionCall("\\factorial",[this.args[1]])]).getConcreteTree(e,t)},p.FunctionDefinition.prototype._getConcreteTree=function(e,t){for(var r=0;r<this._argSymbols.length;r++){if(t[this._argSymbols[r]])throw d.parameterAlreadyDefined(this._argSymbols[r]);if(this._argSymbols[r]===this._symbol)throw d.parameterAlreadyDefined(this._argSymbols[r])}return this._expression.getConcreteTree(e,t)},p.Image.prototype._getConcreteTree=function(e,t){var r=this.center.tryGetConcreteTree(e,t),i=this.radianAngle.tryGetConcreteTree(e,t),n=this.width.tryGetConcreteTree(e,t),s=this.height.tryGetConcreteTree(e,t),o=this.opacity.tryGetConcreteTree(e,t),a=[u.Point,u.ListOfPoint],c=[u.Number,u.ListOfNumber],r=D(r,a),i=D(i,c),n=D(n,c),s=D(s,c),o=D(o,c);return p.Image({center:r,radianAngle:i,width:n,height:s,opacity:o},this.moveStrategy)},p.Simulation.prototype._getConcreteTree=function(e,t){var r=this.fps.tryGetConcreteTree(e,t);return p.Simulation(r)},p.Slider.prototype._getConcreteTree=function(e,t){var r,i,n,s,o,a,c,h,l,u=this._expression.getConcreteTree(e,t),p=E(this.sliderMin&&this.sliderMin.tryGetConcreteTree(e,t)),g=E(this.sliderMax&&this.sliderMax.tryGetConcreteTree(e,t)),y=E(this.sliderStep&&this.sliderStep.tryGetConcreteTree(e,t)),f={exportedSymbol:this._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};return P("min",p,f),P("max",g,f),P("step",y,f),y&&f.valids.step&&(0===f.values.step?delete f.values.step:f.values.step=Math.abs(f.values.step)),f.errors.cycle?u=d.sliderLimitReferencesExport(f.exportedSymbol):(f.errors.min||!f.valids.min?f.errMsg=d.sliderMinInvalid():f.errors.max||!f.valids.max?f.errMsg=d.sliderMaxInvalid():!f.errors.step&&f.valids.step||(f.errMsg=d.sliderStepInvalid()),f.values.min>f.values.max&&(f.valids.min=!1,f.valids.max=!1,f.errMsg||(f.errMsg=d.sliderMaxLessThanMin()))),u.isConstant&&(r=t.initialEvaluation&&t.initialEvaluation.asValue()&&this.sliderIsPlayingOnce,i=f.values.max,n=+u.asValue(),s=f.values.min,o=f.values.step,!r||isFinite(i)||(a=E(this.sliderSoftMax&&this.sliderSoftMax.tryGetConcreteTree(e,t)))&&(i=L.computeSoftMax({storedMax:+a.asValue(),sliderValue:n,step:o,hardMin:s})),c=L.constrainSliderValueLikeEvaluator({target:n,hardMin:s,hardMax:i,step:o,forceSliderToMax:r}),h=m.fromDecimalString(c.toString()),l=isFinite(m.asFloat(h))?h:c,u=T(l)),u.sliderInfo=f,u},p.Integral.prototype._getConcreteTree=function(e,t){if(t[this._differential._symbol])throw d.shadowedIntegrationVariable(this._differential._symbol);var r=this.args[0],i=this.args[1].getConcreteTree(e,t),n=this.args[2].getConcreteTree(e,t);if(i.dependsOn(r._symbol)||n.dependsOn(r._symbol))throw d.badIntegralBoundDependency(r._symbol);var s=Object.create(t);return s[this._differential._symbol]=b(this._differential._symbol),c.prototype._getConcreteTree.call(this,e,s)},p.ListAccess.prototype._getConcreteTree=function(e,t){var r,i=this.list.getConcreteTree(e,t);if(this.index instanceof h&&this.index.isHalfEmpty()){if(r=h([this.index.beginning,C([T(y(i.length,1))])]).getConcreteTree(e,t),Math.round(+r.args[0].asValue())>i.length)return C([])}else r=this.index.getConcreteTree(e,t);var n=[i,r];this.typeCheck(e,n);var s=r.getDependencies();if(s.length){if(r.isList)throw d.variableListIndicies(s);if(r.valueType===u.ListOfBool)throw d.variableFilter(s)}if(r.isList){if(r.valueType===u.EmptyList)return C([]);var o=[],a=0;if(r.valueType===u.ListOfNumber){for(;a<r.length;a++){var c=r.args[a];o.push(i.elementAt(e,c.asValue()-1))}return C(o)}if(r.valueType===u.ListOfBool){for(;a<r.length;a++){r.args[a]._constantValue&&o.push(i.elementAt(e,a))}return C(o)}}return this._constantCollapsedCopy(e,n)},p.List.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return this.typeCheck(e,r),new this.constructor(r)},p.ParametrizedReducerFunction.prototype._getConcreteTree=function(t,r){if(this.args[0]instanceof p.List&&this.args[0].valueType===u.ListOfDistribution)return p.List(p.List.mapArgs(t,[this.args[0]],function(e){return this.copyWithArgs([e[0],this.args[1]]).getConcreteTree(t,r)}.bind(this)));if(this.args[0]instanceof p.Distribution)return this.args[0][this._symbol](this.args.slice(1)).getConcreteTree(t,r);var i=x(this.args,t,r);switch(s([i[1]],this.getDummyDependencies())){case"none":return this.typeCheck(t,i),this._constantCollapsedCopy(t,i);case"empty":return p.List([]);case"list":return p.List(p.List.mapArgs(t,[i[1]],function(e){return e=[i[0]].concat(e),this.typeCheck(t,e),this._constantCollapsedCopy(t,e)}.bind(this)));case"broadcast":var e=F([i[1]]),n=[i[0]].concat(e.concreteArgs);return this.typeCheck(t,n),p.Broadcast(e.replacedSymbols,[this.copyWithArgs(n)].concat(e.replacedArgs))}},p.Prime.prototype._getConcreteTree=function(e,t){var r=this.args[0],i=r.args[0];if(!t[r._symbol])throw d.functionNotDefined(r._symbol);var n,s=this.tmpVar();if("logbase"===r._symbol){if(2!==r.args.length)throw d.primedFunctionArity();n=[_(s),r.args[1]]}else{if(1!==r.args.length)throw d.primedFunctionArity();n=[_(s)]}for(var o=r.copyWithArgs(n).getConcreteTree(e,t),a=0;a<this.order;a++)o=o.takeDerivative(s);var c={};return c[s]=i,o.substitute(c).getConcreteTree(e,t)},p.Range.prototype._getConcreteTree=function(e,t){var r=this.beginning.getConcreteTree(e,t),i=this.end.getConcreteTree(e,t);if(r.getDependencies().length)throw d.variableRange(r.getDependencies());if(i.getDependencies().length)throw d.variableRange(i.getDependencies());if(!r.isList||!i.isList)throw new Error("Programming Error: range bounds must be List nodes.");var n,s,o,a=r.elementAt(e,0).asValue(),c=i.elementAt(e,i.length-1).asValue()-a;o=1===r.length?0<=c?1:-1:(n=r.elementAt(e,1).asValue(),s=f(a,n),r.elementAt(e,1).asValue()-a);var h=Math.round(c/o)+1;if(!isFinite(h)||h<r.length||h<i.length)throw d.nonArithmeticRange();var l,u=[];if(s)for(var p=s.nstart,g=0;g<h;g++)S(e,r,i,g,h,p/s.lcm),u.push(T(y(p,s.lcm))),p+=s.nstep;else for(u.push(T(a)),g=1;g<h;g++)S(e,r,i,g,h,l=a+g*o),u.push(T(y(l,1)));return C(u)},p.ReducerFunction.prototype._getConcreteTree=function(t,r){if(this.args[0]instanceof p.List&&this.args[0].valueType===u.ListOfDistribution&&"length"!==this._symbol)return p.List(p.List.mapArgs(t,this.args,function(e){return this.copyWithArgs(e).getConcreteTree(t,r)}.bind(this)));if(this.args[0]instanceof p.Distribution&&"length"!==this._symbol)return this.args[0][this._symbol]().getConcreteTree(t,r);var e=x(this.args,t,r);if(1===this.args.length)return e=[p.List.wrap(e[0])],this.typeCheck(t,e),this._constantCollapsedCopy(t,e);switch(s(e,this.getDummyDependencies())){case"none":return e=[p.List(e)],this.typeCheck(t,e),this._constantCollapsedCopy(t,e);case"empty":return p.List([]);case"list":return p.List(p.List.mapArgs(t,e,function(e){return e=[p.List(e)],this.typeCheck(t,e),this._constantCollapsedCopy(t,e)}.bind(this)));case"broadcast":var i=F(e),e=[p.List(i.concreteArgs)];return this.typeCheck(t,e),p.Broadcast(i.replacedSymbols,[this.copyWithArgs(e)].concat(i.replacedArgs))}},p.RepeatedOperator.prototype._getConcreteTree=function(e,t){if(t[this._index._symbol])throw d.shadowedIndex(this._index._symbol);var r=this.args[1].getConcreteTree(e,t),i=this.args[2].getConcreteTree(e,t);if(r.dependsOn(this._index._symbol)||i.dependsOn(this._index._symbol))throw this instanceof p.Sum?d.badSumBoundDependency(this._index._symbol):this instanceof p.Product?d.badProductBoundDependency(this._index._symbol):d.parseError();var n=Object.create(t);return n[this._index._symbol]=b(this._index._symbol),c.prototype._getConcreteTree.call(this,e,n)};var n=function(t,e){var r=x(this.args,t,e);switch(s(r,this.getDummyDependencies())){case"none":return this.typeCheck(t,r),this._constantCollapsedCopy(t,r);case"empty":return p.List([]);case"list":return p.List(p.List.mapArgs(t,r,function(e){return this.typeCheck(t,e),this._constantCollapsedCopy(t,e)}.bind(this)));case"broadcast":var i=F(r);return this.typeCheck(t,i.concreteArgs),p.Broadcast(i.replacedSymbols,[this.copyWithArgs(i.concreteArgs)].concat(i.replacedArgs))}};function t(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});if(0<e.length){if(1===e.length&&e.push(p.Constant(1)),e[1].getDependencies().length)throw d.illegalBinWidth(this._symbol).setDependencies(e[1].getDependencies());if(e[1].valueType!==u.Number)throw d.illegalBinWidth(this._symbol);var i=e[1].asValue();if(!isFinite(i)||i<=0)throw d.illegalBinWidth(this._symbol)}return this.typeCheck(t,e),new this.constructor(e)}p.ScalarExpression.prototype._getConcreteTree=n,p.Object3D.prototype._getConcreteTree=n,p.Piecewise.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t),i=r[0];if(i.isConstant&&i.valueType===u.Bool&&r[1].valueType===r[2].valueType)return i.asValue()?r[1]:r[2];if(i.valueType===u.Bool&&u.isList(r[1].valueType)&&u.isList(r[2].valueType)&&r[1].length!==r[2].length)throw d.piecewiseBranchLengthError(i.getDependencies()[0]);return n.call(this,e,t)},p.Regression.prototype._getConcreteTree=function(e,t){return new this.constructor(this._lhs,this._rhs)},p.Polygon.prototype._getConcreteTree=function(t,r){var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),1===e.length&&e[0].valueType===u.ListOfPoint?new this.constructor(e):e.every(function(e){return e.valueType===u.Point})?new this.constructor([C(e)]):2===e.length?new this.constructor([i(this.args).getConcreteTree(t,r)]):d.parseError()},p.Histogram.prototype._getConcreteTree=t,p.DotPlot.prototype._getConcreteTree=t,p.BoxPlot.prototype._getConcreteTree=function(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),1!==e.length||e[0].valueType!==u.ListOfNumber&&e[0].valueType!==u.EmptyList?d.parseError():new this.constructor(e)},p.TTest.prototype._getConcreteTree=function(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),new this.constructor(e)},p.IndependentTTest.prototype._getConcreteTree=function(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),new this.constructor(e)},p.SolvedEquation.prototype._getConcreteTree=function(e,t){return new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},p.Table.prototype._getConcreteTree=function(e,t){for(var r=[],i=Object.create(t),n=0;n<this.columns.length;n++){var s=this.columns[n].getConcreteTree(e,i,t);s.isIndependent&&this.columns[n].exportToLocal(s,i),r.push(s)}return new this.constructor(r)},p.TableColumn.prototype._getConcreteTree=function(e,t,r){var i,n,s=this.header.getConcreteTree(e,t);if(s.isFreeVariable){i=[];for(var o,a=0;a<this.values.length;a++){this.values[a].tableError()?i.push(d.invalidTableEntry(this.values[a].tableError())):(o=this.values[a].tryGetConcreteTree(e,t)).isError?i.push(o):o.tableError()?i.push(d.invalidTableEntry(o.tableError())):o.valueType===u.Number?i.push(o):i.push(d.tableEntryTypeError([u.prettyPrint(o.valueType)]))}return(n=new this.constructor(s,this.length,i)).isIndependent=!0,n}if(s.isConstant){for(var c=[],h=0;h<this.length;h++)c.push(s);i=c}else i=s.isList?s.args.slice():[];return(s=this.header.getConcreteTree(e,r)).isError||s.valueType===u.Number||s.valueType===u.ListOfNumber||s.valueType===u.EmptyList||(s=d.tableHeaderTypeError([u.prettyPrint(s.valueType)])),n=new this.constructor(s,this.length,i)},p.BuiltInFunction.pdf.prototype._getConcreteTree=function(t,r){if(this.args[0]instanceof C)return p.List(p.List.mapArgs(t,this.args,function(e){return this.copyWithArgs(e).getConcreteTree(t,r)}.bind(this)));if(this.typeCheck(t,this.args),!(this.args[0]instanceof p.Distribution))throw d.functionTypeError(this._symbol,[u.prettyPrint(this.args[0].valueType)]);return this.args[0].pdf([this.args[1]]).getConcreteTree(t,r)},p.BuiltInFunction.cdf.prototype._getConcreteTree=function(t,r){var e=this.args;if(2===e.length&&(e=[e[0],p.Constant(-1/0),e[1]]),e[0]instanceof p.List)return p.List(p.List.mapArgs(t,e,function(e){return this.copyWithArgs(e).getConcreteTree(t,r)}.bind(this)));if(this.typeCheck(t,e),!(e[0]instanceof p.Distribution))throw d.functionTypeError(this._symbol,[u.prettyPrint(e[0].valueType)]);return e[0].cdf(e.slice(1)).getConcreteTree(t,r)},p.BuiltInFunction.random.prototype._getConcreteTree=function(e,t){var r=this.args;(r.length<=1||!(r[1]instanceof p.Distribution)&&!(r[1]instanceof p.List)&&r.length<4)&&(r=[r[0],w.uniformdist([])].concat(r.slice(1)));var i=r[0],n=r[1],s=r[2],o=r[3];if(this.typeCheck(e,r.slice(1)),s&&s.getDependencies().length)throw d.variableSampleSize(s.getDependencies());if(o&&o.getDependencies().length)throw d.variableSeed(o.getDependencies());if(o&&(i=v("us",[i,o])),s){var a=s.asValue();if(a<1)throw d.badSampleSize();a=Math.round(a);for(var c,h=[],l=0;l<a;l++)c=v("lc",[i,T(y(l,1))]),h.push(n.sample([c]).getConcreteTree(e,t));return C(h)}return n.sample([i]).getConcreteTree(e,t)},p.BuiltInFunction.shuffle.prototype._getConcreteTree=function(e,t){var r=this.args;this.typeCheck(e,r.slice(1));var i,n=r[0],s=r[1],o=r[2];if(o&&o.getDependencies().length)throw d.variableSeed(o.getDependencies());if(o&&(n=v("us",[n,o])),"List"===s.type)return i=s.args.slice(),g.shuffle(n.asValue(),i),C(i);if("Broadcast"!==s.type)throw d.parseError();for(var a=s,c=[a._expression],h=g.randomPerm(n.asValue(),a.length),l=0;l<a._lists.length;l++){i=[];for(var u=0;u<h.length;u++)i.push(a._lists[l].args[h[u]]);c.push(p.List(i))}return a.copyWithArgs(c)},p.BuiltInFunction.sort.prototype._getConcreteTree=function(e,t){var r=this.args;if(1===r.length&&(r=r.concat(r[0])),this.typeCheck(e,r),0!==r[1].getDependencies().length)throw d.functionFreeVariable(this._errorSymbol,r[1].getDependencies()[0]);if("List"!==r[1].type)throw d.parseError();var i,n=r[1].asValue(),s=g.sortPerm(n);if("List"===r[0].type){for(i=[],h=0;h<Math.min(s.length,r[0].args.length);h++)i.push(r[0].args[s[h]]);return p.List(i)}if("Broadcast"!==r[0].type)throw d.parseError();for(var o=[r[0]._expression],a=0;a<r[0]._lists.length;a++){i=[];for(var c=r[0]._lists[a].args,h=0;h<Math.min(s.length,c.length);h++)i.push(c[s[h]]);o.push(p.List(i))}return r[0].copyWithArgs(o)},p.BuiltInFunction.join.prototype._getConcreteTree=function(e,t){var r=this.args;this.typeCheck(e,r);for(var i=[],n=0;n<r.length;n++){var s=r[n];if("Broadcast"===s.type&&(s=s.asList(e)),"List"===s.type)for(var o=0;o<s.args.length;o++)i.push(s.args[o]);else i.push(s)}return p.List(i)}});
define('core/math/features/getValueType',['require','parsenodes','core/math/types'],function(require){"use strict";var e=require("parsenodes"),r=require("core/math/types");function t(){return r.Number}function n(){return r.Bool}function i(e){for(var t=0;t<e.length;t++)if(e[t].valueType===r.Point)return r.Point;return r.Number}var u={Add:i,Multiply:i,Divide:i,Subtract:i,Exponent:t,Negative:i,And:n,Piecewise:function(e){return e[1].valueType},BaseComparator:n,RepeatedOperator:t,List:function(e){if(0===e.length)return r.EmptyList;for(var t=e[0].valueType,n=1;n<e.length;n++)if(e[n].valueType!==t)return r.ListOfAny;return r.hasListType(t)?r.listType(t):r.ListOfAny},ListAccess:function(e){return r.elementType(e[0].valueType)},Broadcast:function(e){return r.listType(e[0].valueType)},Seed:function(e){return r.SeedType},ExtendSeed:function(e){return r.SeedType},OrderedPairAccess:t,OrderedPair:function(){return r.Point},RGBColor:function(){return r.RGBColor},NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,Distribution:function(){return r.Distribution},DummyIndex:t,FreeVariable:t,TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:function(){return r.Any}};for(var o in u)e[o].prototype._getValueType=u[o]});
define('core/math/features/typeCheck',['require','parsenodes','core/math/types','core/math/errormsg'],function(require){"use strict";var u=require("parsenodes"),s=require("core/math/types"),h=require("core/math/errormsg"),a=s.isOneOf;function l(r){for(var t=[],e=0;e<r.length;e++)t.push(s.prettyPrint(r[e].valueType));return t}function r(i,o){return function(r,t){for(var e=0;e<t.length;e++)if(t[e].valueType!==i[e])throw o(l(t))}}function t(r,t){var e=t.length,i=t[0];if(e<2)throw h.methodRequiresList(this._symbol);if(!a(i.valueType,[s.ListOfNumber,s.EmptyList]))throw h.methodRequiresList(this._symbol);if(2<e)throw h.tooManyArguments(this._symbol,2)}var e={Add:r([s.Number,s.Number],h.addTypeError),Multiply:r([s.Number,s.Number],h.multiplyTypeError),Divide:r([s.Number,s.Number],h.divideTypeError),Subtract:r([s.Number,s.Number],h.subtractTypeError),Exponent:r([s.Number,s.Number],h.exponentTypeError),Negative:r([s.Number],h.negativeTypeError),BaseComparator:r([s.Number,s.Number],h.comparatorTypeError),And:r([s.Bool,s.Bool],h.andTypeError),ExtendSeed:function(r,t){if(2!==t.length||t[0].valueType!==s.SeedType||!a(t[1].valueType,[s.SeedType,s.Number]))throw h.functionUnsupported("random")},List:function(r,t){if(0!==t.length){var e=t[0].valueType;if(!s.hasListType(e))throw h.listTypeError([s.prettyPrint(e)]);for(var i=0;i<t.length;i++){var o=t[i].valueType;if(!s.hasListType(o))throw h.listTypeError([s.prettyPrint(o)]);if(o!==e)throw h.heterogeneousList()}}},Broadcast:function(r,t){},Distribution:function(r,t){},RGBColor:function(r,t){},OrderedPair:function(r,t){if(0===t.length)throw h.emptyParen();if(r.dimensions&&t.length!==r.dimensions())throw h.badTupleDimensions(r.dimensions());for(var e=0;e<t.length;e++){var i=t[e].valueType;if(i!==s.Number)throw h.pointTypeError(s.prettyPrint(i))}},Piecewise:function(r,t){if(t[0].valueType!==s.Bool)throw h.piecewiseConditionTypeError(l(t));if(t[1].valueType!==t[2].valueType)throw h.piecewiseBranchTypeError([s.prettyPrint(t[1].valueType),s.prettyPrint(t[2].valueType)])},ListAccess:function(r,t){var e=s.isList(t[0].valueType),i=t[1].valueType,o=i===s.EmptyList||i===s.Number||i===s.ListOfNumber||i===s.ListOfBool;if(!e||!o)throw h.indexTypeError(l(t))},OrderedPairAccess:r([s.Point,s.Number],h.orderedPairAccessTypeError),Sum:function(r,t){if(t[1].valueType!==s.Number)throw h.sumLowerBoundTypeError([s.prettyPrint(t[1].valueType)]);if(t[2].valueType!==s.Number)throw h.sumUpperBoundTypeError([s.prettyPrint(t[2].valueType)]);if(t[3].valueType!==s.Number)throw h.sumArgumentTypeError([s.prettyPrint(t[3].valueType)])},Product:function(r,t){if(t[1].valueType!==s.Number)throw h.productLowerBoundTypeError([s.prettyPrint(t[1].valueType)]);if(t[2].valueType!==s.Number)throw h.productUpperBoundTypeError([s.prettyPrint(t[2].valueType)]);if(t[3].valueType!==s.Number)throw h.productArgumentTypeError([s.prettyPrint(t[3].valueType)])},Integral:function(r,t){if(t[1].valueType!==s.Number)throw h.integralLowerBoundTypeError([s.prettyPrint(t[1].valueType)]);if(t[2].valueType!==s.Number)throw h.integralUpperBoundTypeError([s.prettyPrint(t[2].valueType)]);if(t[3].valueType!==s.Number)throw h.integralArgumentTypeError([s.prettyPrint(t[3].valueType)])},NativeFunction:function(r,t){var e=this._errorSymbol,i=t.length,o="logbase"===this._symbol?1:0;if(i<this._requiredArity)throw h.wrongArity(e,this._requiredArity-o,i-o);if(i>this._maxArity)throw h.wrongArity(e,this._maxArity-o,i-o);for(var n=0;n<t.length;n++){if(t[n].valueType!==s.Number)throw h.functionTypeError(e,l(t))}},ReducerFunction:function(r,t){if(!a(t[0].valueType,[s.ListOfNumber,s.EmptyList]))throw h.functionTypeError(this._symbol,l(t))},DoubleReducerFunction:function(r,t){var e=t[0],i=t[1];if(!s.isList(e.valueType)||!s.isList(i.valueType))throw h.nonListDoubleReducer(this._symbol);if(!a(e.valueType,[s.ListOfNumber,s.EmptyList])||!a(i.valueType,[s.ListOfNumber,s.EmptyList]))throw h.functionTypeError(this._symbol,l(t))},ParametrizedReducerFunction:function(r,t){if(!a(t[0].valueType,[s.ListOfNumber,s.EmptyList]))throw h.nonListParametrizedReducer(this._symbol);if(t[1].valueType!==s.Number)throw h.functionTypeError(this._symbol,l(t))},TypedFunction:function(r,t){var e=this._errorSymbol,i=t.length,o="pdf"===this._symbol,n="cdf"===this._symbol;if(i<this._requiredArity){if(o)throw h.pdfWrongArity();if(n)throw h.cdfRequiresArguments();throw h.wrongArity(e,this._requiredArity,i)}if(i>this._maxArity){if(o)throw h.pdfWrongArity();if(n)throw h.cdfTooManyArguments();throw h.wrongArity(e,this._maxArity,i)}for(var u=0;u<t.length;u++){var s=t[u].valueType,y=this._inputTypes[u],p=Array.isArray(y);if(!p&&s!==y||p&&!a(s,y))throw h.functionTypeError(e,l(t))}},Derivative:function(r,t){if(!a(t[0].valueType,[s.Number,s.ListOfNumber,s.EmptyList,s.Point,s.ListOfPoint]))throw h.derivativeTypeError(l(t))},Regression:function(r,t){if(!a(t[0].valueType,[s.Number,s.ListOfNumber])||!a(t[1].valueType,[s.Number,s.ListOfNumber]))throw h.regressionTypeError(l(t))},Polygon:function(r,t){if(1===t.length&&t[0].valueType!==s.ListOfPoint)throw h.polygonListTypeError(l(t));if(2===t.length&&t[0].valueType===s.Number&&t[1].valueType===s.Number)throw h.polygonTwoNumbersError();if(2<t.length&&!t.every(function(r){return r.valueType===s.Point}))throw h.polygonPointArgsError()},Object3D:function(r,t){if(t.length<3)throw h.wrongArity(this._symbol,3,t.length)},Histogram:t,DotPlot:t,BoxPlot:function(r,t){var e=t.length,i=t[0];if(0===e)throw h.methodRequiresList(this._symbol);if(!a(i.valueType,[s.ListOfNumber,s.EmptyList]))throw h.methodRequiresList(this._symbol);if(1<e)throw h.methodRequiresList(this._symbol)},TTest:function(r,t){var e=this._symbol;if(0===t.length)throw h.methodRequiresList(e);if(t[0].valueType===s.EmptyList)throw h.ttestListTooShort(e);if(t[0].valueType!==s.ListOfNumber)throw h.methodRequiresList(e);if(2<t.length)throw h.tooManyArguments(e,2);if(t[0].length<2)throw h.ttestListTooShort(e);if(t[1]&&t[1].valueType!==s.Number)throw h.functionTypeError(e,l(t))},IndependentTTest:function(r,t){var e=this._symbol;if(2!==t.length)throw h.wrongDoubleReducerArity(e);if(!s.isList(t[0].valueType)||!s.isList(t[1].valueType))throw h.nonListDoubleReducer(e);if(t[0].valueType===s.EmptyList||t[1].valueType===s.EmptyList)throw h.ttestListTooShort("ittest");if(t[0].valueType!==s.ListOfNumber||t[1].valueType!==s.ListOfNumber)throw h.functionTypeError(e,l(t));if(t[0].args.length<2||t[1].args.length<2)throw h.ttestListTooShort("ittest")},Stats:function(r,t){var e=t.length,i=t[0];if(0===e)throw h.methodRequiresList(this._symbol);if(i.valueType===s.EmptyList)throw h.functionTypeError(this._symbol,l(t));if(i.valueType!==s.ListOfNumber)throw h.methodRequiresList(this._symbol);if(1<e)throw h.methodRequiresList(this._symbol)}};for(var i in e)u[i].prototype.typeCheck=e[i];u.BuiltInFunction.random.prototype.typeCheck=function(r,t){var e=t.length,i=t[0],o=t[1],n=t[2];if(3<e)throw h.randomArity();if(!i)throw h.randomArity();if(!(i instanceof u.Distribution||i instanceof u.List))throw h.randomArity();if(i instanceof u.Distribution&&i.args&&(i.args[0]instanceof u.List||i.args[1]instanceof u.List))throw h.randomFromBroadcastDistribution();if(o&&o.valueType!==s.Number)throw h.randomArity();if(n&&n.valueType!==s.Number)throw h.randomArity()},u.BuiltInFunction.shuffle.prototype.typeCheck=function(r,t){var e=t.length;if(e<1)throw h.wrongArity(this._errorSymbol,1,e,this.minArityUsageExample);if(2<e)throw h.wrongArity(this._errorSymbol,2,e,this.maxArityUsageExample);if(!s.isList(t[0].valueType)||2===e&&t[1].valueType!==s.Number)throw h.functionTypeError(this._errorSymbol,l(t))},u.BuiltInFunction.length.prototype.typeCheck=function(r,t){if(1!==t.length||!s.isList(t[0].valueType))throw h.parseError()},u.BuiltInFunction.sort.prototype.typeCheck=function(r,t){var e=t.length;if(e<1)throw h.wrongArity(this._errorSymbol,1,e,this.minArityUsageExample);if(2<e)throw h.wrongArity(this._errorSymbol,2,e,this.maxArityUsageExample);if(!s.isList(t[0].valueType)||!a(t[1].valueType,[s.ListOfNumber,s.EmptyList]))throw h.functionTypeError(this._errorSymbol,l(t))},u.BuiltInFunction.join.prototype.typeCheck=function(r,t){var e=t.length;if(e<this._requiredArity)throw h.wrongArity(this._errorSymbol,this._requiredArity,e,this.minArityUsageExample);var i=t[0].valueType;s.isList(i)||(i=s.listType(i));for(var o=1;o<t.length;o++){var n=t[o].valueType;if(s.isList(n)||(n=s.listType(n)),n!==s.EmptyList&&(i===s.EmptyList&&(i=n),n!==i))throw h.functionTypeError(this._errorSymbol,l(t))}}});
define('core/math/features/repr',['require','parsenodes'],function(require){"use strict";function e(r,t,e){e=e||0;var i=Array(e+1).join("  "),s=i+"  ";return"[\n"+s+r.map(function(r){return r.repr(t,e+1)}).join(",\n"+s)+"\n"+i+"]"}function s(r,t){return""+(t=t||"")+r}var i=require("parsenodes");i.Expression.prototype.repr=function(r,t){return s(this.type,r)+"("+e(this.args,r,t)+")"},i.DoubleInequality.prototype.repr=function(r,t){t=t||0;var e=Array(t+1).join("  "),i=e+"  ";return s(this.type,r)+"([\n"+i+this.args[0].repr(r,t+1)+",\n"+i+"'"+this.args[1]+"',\n"+i+this.args[2].repr(r,t+1)+",\n"+i+"'"+this.args[3]+"',\n"+i+this.args[4].repr(r,t+1)+"\n"+e+"])"},i.Identifier.prototype.repr=i.FreeVariable.prototype.repr=function(r){return s(this.type,r)+"('"+this._symbol+"')"},i.Constant.prototype.repr=function(r){return s(this.type,r)+"("+this.asValue()+")"},i.ExtendSeed.prototype.repr=function(r,t){return s(this.type,r)+"('"+this.tag+"', "+e(this.args,r,t)+")"},i.Seed.prototype.repr=function(r){return s(this.type,r)+"("+this.asValue()+")"},i.FunctionCall.prototype.repr=function(r,t){return s(this.type,r)+"('"+this._symbol+"', "+e(this.args,r,t)+")"},i.Assignment.prototype.repr=function(r,t){return s(this.type,r)+"("+i.Identifier(this._symbol).repr(r,t)+", "+this._expression.repr(r,t)+")"},i.Regression.prototype.repr=i.Equation.prototype.repr=function(r,t){return s(this.type,r)+"("+this._lhs.repr(r,t)+", "+this._rhs.repr(r,t)+")"},i.FunctionDefinition.prototype.repr=function(r,t){return s(this.type,r)+"("+i.Identifier(this._symbol).repr(r,t)+", "+e(this._argSymbols.map(function(r){return i.Identifier(r)}),r,t)+", "+this._expression.repr(r,t)+")"},i.Error.prototype.repr=function(r,t){return s(this.type,r)+"('"+this._msg+"')"},i.Derivative.prototype.repr=function(r,t){return s(this.type,r)+"('"+this._symbol+"', "+e(this.args,r,t)+")"},i.SolvedEquation.prototype.repr=function(r,t){return s(this.type,r)+"('"+this._symbol+"', "+this._expression.repr(r,t)+")"},i.OptimizedRegression.prototype.repr=function(r,t){return s(this.type,r)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(r,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode,isLinear:this.isLinear,parameterWarning:this.parameterWarning})+")"},i.Table.prototype.repr=function(r,t){return s(this.type,r)+"("+e(this.columns,r,t)+")"},i.TableColumn.prototype.repr=function(r,t){return s(this.type,r)+"("+this.header.repr(r,t)+", "+this.length+", "+e(this.values,r,t)+")"},i.Image.prototype.repr=function(r,t){var e=Array(t+1).join("  "),i=e+"  ";return s(this.type,r)+"({\n"+i+"center: "+this.center.repr(r,t+1)+",\n"+i+"radianAngle: "+this.radianAngle.repr(r,t+1)+",\n"+i+"width: "+this.width.repr(r,t+1)+",\n"+i+"height: "+this.height.repr(r,t+1)+"},\n"+i+"opacity: "+this.opacity.repr(r,t+1)+",\n"+i+JSON.stringify(this.moveStrategy)+"\n"+e+")"},i.Simulation.prototype.repr=function(r){return s(this.type,r)+"({\n)"},i.Slider.prototype.repr=function(r,t){var e=Array(t+1).join("  "),i=e+"  ";return s(this.type,r)+"({\n"+i+"sliderAssignment: "+this.sliderAssignment.repr(r,t+1)+",\n"+i+"sliderMin: "+(this.sliderMin&&this.sliderMin.repr(r,t+1))+",\n"+i+"sliderMax: "+(this.sliderMax&&this.sliderMax.repr(r,t+1))+",\n"+i+"sliderStep: "+(this.sliderStep&&this.sliderStep.repr(r,t+1))+"},\n"+e+")"},i.Broadcast.prototype.repr=function(r,t){return s(this.type,r)+"(['"+this._replacedSymbols.join("', ")+"'], "+e(this.args,r,t)+")"}});
define('core/math/features/scalarEvalExpression',['require','parsenodes','core/math/functions'],function(require){"use strict";var n=require("parsenodes"),t=require("core/math/functions"),e={Add:function(n){return"("+n.join("+")+")"},Multiply:function(n){return"("+n.join("*")+")"},Divide:function(n){return"("+n.join("/")+")"},Subtract:function(n){return"("+n.join("-")+")"},Exponent:function(n){return"BuiltIn.pow("+n.join(",")+")"},RawExponent:function(n){return"Math.pow("+n.join(",")+")"},Negative:function(n){return"(-"+n[0]+")"},And:function(n){return n.join("&&")},Piecewise:function(n){return"("+n[0]+"?"+n[1]+":"+n[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var r in e){var o=n[r].prototype;o.scalarEvalExpression=e[r],o.evaluate=t.createEvaluateFunction(o.scalarEvalExpression,i[r])}});
define('core/math/reconstitute-node',['require','parsenodes','core/math/types'],function(require){"use strict";var s=require("parsenodes"),u=require("core/math/types");return function t(e,n){if(u.isList(e)){for(var r=[],o=0;o<n.length;o++)r.push(t(u.elementType(e),n[o]));var a=s.List(r);return a.valueType=e,a}switch(e){case u.Number:case u.Bool:return s.Constant(n);case u.Point:return s.OrderedPair([s.Constant(n[0]),s.Constant(n[1])]);case u.RGBColor:return s.RGBColor([s.Constant(n[0]),s.Constant(n[1]),s.Constant(n[2])]);default:throw new Error("Cannot reconstitute value of a "+u.prettyPrint(e)+".")}}});
define('core/math/features/constantcollapsedcopy',['require','parsenodes','core/math/reconstitute-node','core/math/maybe-rational','core/math/errormsg'],function(require){"use strict";var e=require("parsenodes"),u=e.Constant,l=e.Multiply,c=e.Subtract,i=e.Exponent,s=e.RawExponent,r=e.Seed,o=e.BuiltInFunction,h=require("core/math/reconstitute-node"),p=require("core/math/maybe-rational"),y=require("core/math/errormsg");function f(t){if(t.isConstant){var n=t.asValue();return"number"==typeof n&&!isFinite(n)}}var t={Expression:function(t,n){return this.copyWithArgs(n)},FreeVariable:function(t,n){return this},ScalarExpression:function(t,n){for(var e=[],a=0;a<n.length;a++){if(!n[a].isConstant&&!n[a].isString)return this.copyWithArgs(n);e.push(n[a].asValue())}return u(this.evaluate(e))},TypedFunction:function(t,n){for(var e=[],a=0;a<n.length;a++){if(0!==n[a].getDependencies().length)return this.copyWithArgs(n);e.push(n[a].asValue())}return h(this._outputType,this.evaluate(e))},OrderedPair:function(t,n){return this.copyWithArgs(n)},RGBColor:function(t,n){return this.copyWithArgs(n)},Distribution:function(t,n){return this.copyWithArgs(n)},Add:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.add(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):0===n[0].asValue()?n[1]:0===n[1].asValue()?n[0]:this.copyWithArgs(n)},Multiply:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.mul(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):1===n[0].asValue()?n[1]:1===n[1].asValue()?n[0]:this.copyWithArgs(n)},Subtract:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.sub(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):0===n[0].asValue()?e.Negative([n[1]]):0===n[1].asValue()?n[0]:this.copyWithArgs(n)},Divide:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.div(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):1===n[1].asValue()?n[0]:this.copyWithArgs(n)},Exponent:function(t,n){if(n[0].isConstant&&n[1].isConstant)return u(p.pow(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue()));if(n[0].isConstant){if(n[0].asValue()===Math.E)return o.exp([n[1]]);if(0<n[0].asValue())return s(n)}if(n[1].isConstant){var e=n[1].asValue();if(1===e)return n[0];if(e===Math.floor(e))return s(n);var a=n[1].asMaybeRationalValue();return p.isRational(a)?a.d%2==1?l([a.n%2==0?u(p.maybeRational(1,1)):o.sign([n[0]]),s([o.abs([n[0]]),n[1]])]):s(n):this.copyWithArgs(n)}return this.copyWithArgs(n)},RawExponent:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.pow(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):this.copyWithArgs(n)},Negative:function(t,n){return n[0].isConstant?u(p.neg(n[0].asMaybeRationalValue())):n[0]instanceof e.Negative?n[0].args[0]:this.copyWithArgs(n)},And:function(t,n){return n[0].isConstant&&n[1].isConstant?u(n[0].asValue()&&n[1].asValue()):n[0].isConstant&&!0===n[0]?n[1]:n[0].isConstant&&!1===n[0]?u(!1):n[1].isConstant&&!0===n[1]?n[0]:n[1].isConstant&&!1===n[1]?u(!1):this.copyWithArgs(n)},Piecewise:function(t,n){return n[0].isConstant&&!0===n[0].asValue()?n[1]:n[0].isConstant&&!1===n[0].asValue()?n[2]:this.copyWithArgs(n)},Integral:function(t,n){var e=n[0],a=n[1],s=n[2],i=n[3],r=i.getDependencies();if(a.isConstant&&s.isConstant){var o=s.asValue()-a.asValue();if(i.isConstant)return u(i.asValue()*o);if(!i.dependsOn(e._symbol))return l([i,u(o)]);if(1===r.length&&r[0]===e._symbol)return u(this.evaluate(a.asValue(),s.asValue(),i))}else if(!i.dependsOn(e._symbol))return l([i,c([s,a])]);return this.copyWithArgs(n)},ListAccess:function(t,n){return n[1].isConstant?n[0].elementAt(t,n[1].asValue()-1):this.copyWithArgs(n)},OrderedPairAccess:function(t,n){return n[1].isConstant&&n[0]instanceof e.OrderedPair?n[0].elementAt(t,n[1].asValue()-1):this.copyWithArgs(n)},Broadcast:function(t,n){for(var e=n[0].getDependencies(),a=0;a<e.length;a++)if(-1===this._replacedSymbols.indexOf(e[a]))return this.copyWithArgs(n);for(a=1;a<n.length;a++)if(0!==n[a].getDependencies().length)return this.copyWithArgs(n);var s=n[0].getCompiledFunction(this._replacedSymbols).fn,i=n.slice(1).map(function(t){return t.asValue()}),r=[];for(a=0;a<this.length;a++){for(var o=[],u=0;u<i.length;u++)o.push(i[u][a]);r.push(s.apply(void 0,o))}return h(this.valueType,r)},ReducerFunction:function(t,n){return 0===n[0].getDependencies().length?h(this.valueType,this.evaluate([n[0].asValue()])):this.copyWithArgs(n)},DoubleReducerFunction:function(t,n){if(0!==n[0].getDependencies().length||0!==n[1].getDependencies().length)return this.copyWithArgs(n);var e=Math.min(n[0].length,n[1].length);return h(this.valueType,this.evaluate([n[0].asValue().slice(0,e),n[1].asValue().slice(0,e)]))},ParametrizedReducerFunction:function(t,n){var e=n[0],a=n[1];return a.isConstant&&0===e.getDependencies().length?h(this.valueType,this.evaluate([e.asValue(),a.asValue()])):this.copyWithArgs(n)},RepeatedOperator:function(t,n){var e=n[1],a=n[2];if(f(e)||f(a))switch(this.type){case"Sum":throw y.sumInfiniteBoundError();case"Product":throw y.productInfiniteBoundError();default:throw y.parseError()}if(e.isConstant&&a.isConstant){var s=e.asValue(),i=a.asValue(),r=n[3];if(r.isConstant)return u(this.evaluateConstant([s,i,r.asValue()]));var o=r.getDependencies();if(0===o.length||1===o.length&&o[0]===n[0]._symbol)return u(this.evaluate(s,i,r))}return this.copyWithArgs(n)},ExtendSeed:function(t,n){var e=n[0],a=n[1];return 0===e.getDependencies().length&&0===a.getDependencies().length?r(e.asValue()+"::"+this.tag+a.asValue()):this.copyWithArgs(n)}};for(var n in t)e[n].prototype._constantCollapsedCopy=t[n];o.mod.prototype._constantCollapsedCopy=function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.mod(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):this.copyWithArgs(n)},o.sqrt.prototype._constantCollapsedCopy=function(t,n){return n[0].isConstant?u(p.sqrt(n[0].asMaybeRationalValue())):this.copyWithArgs(n)},o.nthroot.prototype._constantCollapsedCopy=function(t,n){var e=n[0],a=n[1];if(a.isConstant){if(e.isConstant)return u(p.nthroot(e.asMaybeRationalValue(),a.asMaybeRationalValue()));var s=[e,u(p.reciprocal(a.asMaybeRationalValue()))];return i(s)._constantCollapsedCopy(t,s)}return this.copyWithArgs(n)},o.abs.prototype._constantCollapsedCopy=function(t,n){return n[0].isConstant?u(p.abs(n[0].asMaybeRationalValue())):this.copyWithArgs(n)},o.total.prototype._constantCollapsedCopy=function(t,n){if(!n[0].isList)return this.copyWithArgs(n);for(var e=n[0].args,a=0;a<e.length;a++)if(!e[a].isConstant)return this.copyWithArgs(n);return u(p.total(n[0].asMaybeRationalValue()))}});
define('core/math/features/polynomialorder',['require','parsenodes'],function(require){"use strict";var r,e=require("parsenodes"),o={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"};for(var t in o){var a=o[t];e[t].prototype.polynomialOrder=(r=(r=(r=a).replace("order0","this.args[0].polynomialOrder(symbol)")).replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+r))}e.Exponent.prototype.polynomialOrder=function(r){var e=this.args[0].polynomialOrder(r),o=this.args[1].polynomialOrder(r);if(0===e&&0===o)return 0;var t=this.args[1];return t.isConstant&&t.asValue()===Math.round(t.asValue())&&0<t.asValue()?e*t.asValue():1/0},e.Piecewise.prototype.polynomialOrder=function(r){return this.dependsOn(r)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(r):1/0:0},e.List.prototype.polynomialOrder=function(r){return 1/0}});
define('core/math/features/polynomialcoefficients',['require','parsenodes','core/math/maybe-rational'],function(require){"use strict";var g=require("parsenodes"),t=require("core/math/maybe-rational").maybeRational,n=g.Constant(t(0,1)),e=g.Constant(t(1,1));g.FreeVariable.prototype.getPolynomialCoefficients=function(t){return t===this._symbol?[n,e]:[this]},g.Constant.prototype.getPolynomialCoefficients=function(t){return[this]},g.Add.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1,n=i.length-1,s=[],a=0;a<=Math.max(o,n);a++)a<=o&&a<=n?s.push(g.Add([e[a],i[a]])):s.push(n<o?e[a]:i[a]);return s},g.Subtract.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1,n=i.length-1,s=[],a=0;a<=Math.max(o,n);a++)a<=o&&a<=n?s.push(g.Subtract([e[a],i[a]])):s.push(n<o?e[a]:g.Negative([i[a]]));return s},g.Negative.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=[],o=0;o<e.length;o++)i.push(g.Negative([e[o]]));return i},g.Exponent.prototype.getPolynomialCoefficients=function(t){var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1;if(0<i.length-1)throw"can't solve for variable in exponent";if(0==o)return[g.Exponent([e[0],i[0]])];if(this.args[1].isConstant)switch(this.args[1].asValue()){case 0:return[n];case 1:return e;case 2:return g.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(t)}throw"Unable to compile polynomial representation"},g.Multiply.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1,n=i.length-1,s=[],a=0;a<=o;a++)for(var r=0;r<=n;r++){var l=g.Multiply([e[a],i[r]]),f=s[a+r];s[a+r]=void 0===f?l:g.Add([f,l])}return s},g.Divide.prototype.getPolynomialCoefficients=function(t){var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=[];if(0<i.length-1)throw"Can't solve for variable in denominator";for(var n=0;n<e.length;n++)o.push(g.Divide([e[n],i[0]]));return o},g.Expression.prototype.getPolynomialCoefficients=function(t){if(this.dependsOn(t))throw"Unimplemented polynomialCoefficient call";return[this]},g.Piecewise.prototype.getPolynomialCoefficients=function(t){return this.dependsOn(t)?this.args[1].getPolynomialCoefficients(t):[this]}});
define('core/math/features/extractconditions',['require','parsenodes'],function(require){"use strict";var e=require("parsenodes");e.Expression.prototype.extractConditions=function(t,n){if(!this.dependsOn(t))return n;for(var s=0;s<this.args.length;s++){n=this.args[s].extractConditions(t,n)}return n},e.Piecewise.prototype.extractConditions=function(t,n){if(!this.dependsOn(t))return n;if(!this.args[0].dependsOn(t))return n=this.args[1].extractConditions(t,n),n=this.args[2].extractConditions(t,n);var s={};return s[t]=n,e.Piecewise([this.args[0].substitute(s),n,e.Constant(NaN)])}});
define('core/math/features/piecewiseDependsOn',['require','parsenodes'],function(require){"use strict";var e=require("parsenodes");e.Expression.prototype.piecewiseDependsOn=function(e){if(!this.dependsOn(e))return!1;for(var n=0;n<this.args.length;n++){if(this.args[n].piecewiseDependsOn(e))return!0}return!1},e.Piecewise.prototype.piecewiseDependsOn=function(e){return this.dependsOn(e)}});
define('core/math/domaintypes',["require","exports"],function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersectDomains=t.allReals=t.knownDomain=t.unknownDomain=t.emptyDomain=void 0,t.emptyDomain=function(){return{type:"empty"}},t.unknownDomain=function(){return{type:"unknown"}},t.knownDomain=function(n){return isNaN(n[0])||isNaN(n[1])||n[1]<n[0]?t.emptyDomain():{type:"known",bounds:n}},t.allReals=function(){return t.knownDomain([-1/0,1/0])},t.intersectDomains=function(n,e){if("empty"===n.type||"empty"===e.type)return t.emptyDomain();if("unknown"===n.type||"unknown"===e.type)return t.unknownDomain();if(n.bounds&&e.bounds){var o=[Math.max(n.bounds[0],e.bounds[0]),Math.min(n.bounds[1],e.bounds[1])];return t.knownDomain(o)}return t.emptyDomain()}});
define('core/math/features/bounddomain',['require','parsenodes','core/math/builtinframe','core/math/domaintypes','core/math/comparators','core/math/maybe-rational','core/math/policy'],function(require){"use strict";var n=require("parsenodes"),u=require("core/math/builtinframe"),m=require("core/math/domaintypes"),l=require("core/math/comparators").table,o=require("core/math/maybe-rational").maybeRational,d=require("core/math/policy").defaultPolicy,D=n.Constant(o(0,1));n.Base.prototype.boundDomain=function(n){return m.unknownDomain()},n.List.prototype.boundDomain=function(n){if(!this.dependsOn(n))return m.allReals();if(!this.args.length)return m.allReals();var o=this.args[0].boundDomain(n);if("known"!==o.type)return m.unknownDomain();for(var a=0;a<this.args.length;a++){var t=this.args[a].boundDomain(n);if("known"!==t.type)return m.unknownDomain();if(t.bounds[0]!==o.bounds[0]||t.bounds[1]!==o.bounds[1])return m.unknownDomain()}return o},n.Expression.prototype.boundDomain=function(n){for(var o=m.allReals(),a=0;a<this.args.length;a++)o=m.intersectDomains(o,this.args[a].boundDomain(n));return o},n.Constant.prototype.boundDomain=function(n){return this.isNaN()?m.emptyDomain():m.allReals()},n.Piecewise.prototype.boundDomain=function(n){return this.args[2].isConstant&&isNaN(this.args[2].asValue())?m.intersectDomains(this.args[0].boundDomain(n),this.args[1].boundDomain(n)):m.unknownDomain()},n.OrderedPair.prototype.boundDomain=function(n){return m.intersectDomains(this.args[0].boundDomain(n),this.args[1].boundDomain(n))},n.BaseComparator.prototype.boundDomain=function(n){if(!this.dependsOn(n))return m.allReals();if("="===this.operator)return m.unknownDomain();var o=this._difference,a=this._difference.boundDomain(n);if(1<o.polynomialOrder(n))return m.unknownDomain();var t=o.getPolynomialCoefficients(n),e=t[1]?t[1].getConcreteTree(d,u):D,i=t[0]?t[0].getConcreteTree(d,u):D;if(!e.isConstant||!i.isConstant)return m.unknownDomain();if(isNaN(e.asValue())||isNaN(i.asValue()))return m.emptyDomain();if(0===e.asValue())return l[this.operator].inclusive?0<=i.asValue()?a:m.emptyDomain():0<i.asValue()?a:m.emptyDomain();var r=-i.asValue()/e.asValue(),s=e.asValue()<0?[-1/0,r]:[r,1/0];return m.intersectDomains(a,m.knownDomain(s))}});
define('core/math/features/derivative',['require','parsenodes','core/math/baseparser','core/math/builtinframe','core/math/parsenode/builtinfunction','core/math/maybe-rational','core/math/policy','core/math/types','core/math/errormsg'],function(require){"use strict";var u=require("parsenodes"),t=require("core/math/baseparser"),o=require("core/math/builtinframe"),e=require("core/math/parsenode/builtinfunction"),r=require("core/math/maybe-rational").maybeRational,c=require("core/math/policy").defaultPolicy,i=require("core/math/types"),s=require("core/math/errormsg"),n=u.Constant(r(0,1)),x=u.Constant(r(1,1)),a=u.Constant(r(2,1)),y=u.OrderedPair([n,n]),d={FreeVariable:function(t){return t===this._symbol?x:n},Constant:function(t){return isFinite(this.asValue())?n:u.Constant(this.asValue())},Negative:function(t){return u.Negative([this.args[0].takeDerivative(t)])},Add:function(t){return u.Add([this.args[0].takeDerivative(t),this.args[1].takeDerivative(t)])},Subtract:function(t){return u.Subtract([this.args[0].takeDerivative(t),this.args[1].takeDerivative(t)])},Multiply:function(t){return u.Add([f(t,this.args[0],u.Multiply([this.args[0].takeDerivative(t),this.args[1]])),f(t,this.args[1],u.Multiply([this.args[0],this.args[1].takeDerivative(t)]))])},Divide:function(t){return u.Subtract([f(t,this.args[0],u.Divide([this.args[0].takeDerivative(t),this.args[1]])),f(t,this.args[1],u.Divide([u.Multiply([this.args[0],this.args[1].takeDerivative(t)]),u.Exponent([this.args[1],a])]))])},Exponent:function(t){return u.Add([f(t,this.args[0],u.Multiply([u.Multiply([this.args[1],u.Exponent([this.args[0],u.Subtract([this.args[1],x])])]),this.args[0].takeDerivative(t)])),f(t,this.args[1],u.Multiply([u.Piecewise([u.Comparator["="]([this.args[0],n]),u.Piecewise([u.Comparator[">"]([this.args[1],n]),n,u.Constant(NaN)]),u.Multiply([u.FunctionCall("\\ln",[this.args[0]]),u.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(t)]))]).getConcreteTree(c,o)},Sum:function(t){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(t)])},Product:function(t){var e=u.Sum([this.args[0],this.args[1],this.args[2],u.Piecewise([u.Comparator["="]([n,this.args[3]]),x,n])]),r=u.Multiply([u.Sum([this.args[0],this.args[1],this.args[2],u.Divide([this.args[3].takeDerivative(t),this.args[3]])]),u.Product(this.args)]),a=u.Product([this.args[0],this.args[1],this.args[2],u.Piecewise([u.Comparator["="]([n,this.args[3]]),this.args[3].takeDerivative(t),this.args[3]])]);return u.Piecewise([u.Comparator["="]([n,e]),r,u.Piecewise([u.Comparator["="]([x,e]),a,n])])},Piecewise:function(t){return 2===this.args.length?u.Piecewise([this.args[0],this.args[1].takeDerivative(t)]):3===this.args.length?u.Piecewise([this.args[0],this.args[1].takeDerivative(t),this.args[2].takeDerivative(t)]):void 0},List:function(e){return u.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(t){return new this.constructor([this.args[0].takeDerivative(t),this.args[1]])},OrderedPair:function(t){return new this.constructor([this.args[0].takeDerivative(t),this.args[1].takeDerivative(t)])},OrderedPairAccess:function(t){return new this.constructor([this.args[0].takeDerivative(t),this.args[1]])},Integral:function(t){var e=this.args[0],r=this.args[1],a=this.args[2],i=this.args[3],s={};s[e._symbol]=a;var n={};return n[e._symbol]=r,u.Add([f(t,i,this.copyWithArgs([e,r,a,i.takeDerivative(t)])),u.Subtract([f(t,a,u.Multiply([i.substitute(s),a.takeDerivative(t)])),f(t,r,u.Multiply([i.substitute(n),r.takeDerivative(t)]))])])},SolvedEquation:function(t){return this._expression.takeDerivative(t)},OptimizedRegression:function(t){return this.model.takeDerivative(t)},Broadcast:function(t){for(var e=this._replacedSymbols.slice(),r=this.args.slice(1),a=this._expression.takeDerivative(t),i=0;i<this._replacedSymbols.length;i++){var s,n,x=this._replacedSymbols[i],o=this.args[i+1];o.dependsOn(t)&&(s=this.tmpVar(),n=u.DummyIndex(s),e.push(s),r.push(o.takeDerivative(t)),a=u.Add([a,u.Multiply([this._expression.takeDerivative(x),n])]))}return u.Broadcast(e,[a].concat(r))},Seed:function(t){return u.Constant(NaN)}},v={exp:"\\exp(x)*x_1",ln:"\\{x >= 0: x_1/x \\}",log:"\\{ x >= 0: x_1/(x*\\ln(10)) \\}",sqrt:"x_1/(2*\\sqrt{x})",rtxsqpone:"x*x_1/\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\rtxsqmone(x)",sin:"\\cos(x)*x_1",cos:"-\\sin(x)*x_1",tan:"\\sec(x)^2*x_1",arcsin:"x_1/\\sqrt{1 - x^2}",arccos:"-x_1/\\sqrt{1 - x^2}",sinh:"\\cosh(x)*x_1",cosh:"\\sinh(x)*x_1",tanh:"(\\sech(x))^2*x_1",arcsinh:"x_1/\\sqrt{x^2 + 1}",arccosh:"\\{ x > 0: x_1/\\rtxsqmone(x) \\}",arctanh:"\\{ \\abs(x) < 1: x_1/(1 - x^2) \\}",csc:"-\\cot(x)*\\csc(x)*x_1",sec:"\\tan(x)*\\sec(x)*x_1",cot:"-\\csc(x)^2*x_1",arccsc:"-x_1/(\\abs(x)*\\rtxsqmone(x))",arcsec:"x_1/(\\abs(x)*\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\coth(x)*\\csch(x)*x_1",sech:"-\\tanh(x)*\\sech(x)*x_1",coth:"-(\\csch(x))^2*x_1",arccsch:"-x_1/(\\abs(x)*\\rtxsqpone(x))",arcsech:"\\{ x >= 0: -x_1/(x*\\sqrt{1 - x^2}) \\}",arccoth:"\\{ \\abs(x) > 1 : x_1/(1 - x^2) \\}",factorial:"(x)!*\\polyGamma(0, x + 1)*x_1",floor:"\\{ \\mod(x, 1) > 0: 0*x_1 \\}",ceil:"\\{ \\mod(x, 1) > 0: 0*x_1 \\}",abs:"\\{ \\abs(x) > 0: \\sign(x)*x_1 \\}",sign:"\\{ \\abs(x) > 0: 0*x_1 \\}",mean:"\\mean(x_1)",total:"\\total(x_1)",length:"0",var:"2*\\cov(x, x_1)",varp:"2*\\cov(x, x_1)*(\\length(x)-1)/\\length(x)",stdev:"\\cov(x, x_1)/\\stdev(x)",stdevp:"\\covp(x, x_1)/\\stdevp(x)",mad:"\\mean(\\sign(x-\\mean(x))*(x_1 - \\mean(x_1)))",min:"x_1[\\argmin(x)]",max:"x_1[\\argmax(x)]",median:"0.5*(x_1[\\lowerQuantileIndex(x, 0.5)] + x_1[\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\frac{2x_1}{\\sqrt{\\pi }}e^{-x^2}",invNorm:"\\frac{x_1}{\\pdf(\\normaldist(0,1),\\invNorm(x))}",negatePoint:"-x_1"},p={logbase:["\\{x > 0: \\frac{x_1}{x*\\ln(y)}\\}","\\frac{-\\log_{y}(x)*y_1}{y*\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\frac{x^{1/y}*\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\polyGamma(1 + x, y)*y_1"],mod:["\\{ \\abs(\\mod(x, y)) > 0: x_1 \\}","\\{ \\mod(x/y, 1) > 0: -\\floor(x/y)*y_1 \\}"],round:["\\{ \\abs(\\mod(x, 1) - 0.5) > 0: 0*x_1 \\}","0/0"],cov:["\\cov(x_1, y)","\\cov(x, y_1)"],covp:["\\covp(x_1, y)","\\covp(x, y_1)"],corr:["(\\cov(x_1, y) - (\\cov(x, y)*\\cov(x, x_1)/\\var(x)))/(\\stdevp(x)\\stdevp(y))","(\\cov(x, y_1) - (\\cov(x, y)*\\cov(y, y_1)/\\var(y)))/(\\stdevp(x)\\stdevp(y))"],spearman:["0/0","0/0"],quantile:["\\{ \\floor(y*(\\length(x)-1)) = y*(\\length(x)-1) :   x_1[\\upperQuantileIndex(x, y)],  (\\ceil(y*(\\length(x)-1)) - y*(\\length(x)-1))*x_1[\\lowerQuantileIndex(x, y)] +   (y*(\\length(x)-1) - \\floor(y*(\\length(x)-1)))*x_1[\\upperQuantileIndex(x, y)]\\}","\\{ \\floor(y*(\\length(x)-1)) < y*(\\length(x)-1) :   (x[\\upperQuantileIndex(x, y)] - x[\\lowerQuantileIndex(x, y)])*y_1\\}"],quartile:["0.5*(x_1[\\lowerQuartileIndex(x, y)] + x_1[\\upperQuartileIndex(x, y)])","0/0"],tscore:["\\frac{\\sqrt{\\length(x)}(\\stdev(x)*\\mean(x_1)-(\\mean(x)-y)*\\frac{\\cov(x,x_1)}{\\stdev(x)})}{\\stdev(x)^2}","-y_1*\\sqrt{\\length(x)}/\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\frac{e^{-y}(\\floor(x)-y)y^{(\\floor(x)-1)}}{\\floor(x)!}"],invPoisson:["0/0","0/0"],tpdf:["x_1*\\pdf(\\tdist(y),x)*\\frac{-(y+1)*x}{y+x^2}","y_1*\\frac{1}{2}\\pdf(\\tdist(y),x)(  \\frac{x^2-1}{y + x^2} + \\ln(\\frac{y}{y + x^2}) +   \\polyGamma(0, \\frac{1+y}{2}) - \\polyGamma(0, y/2))"],invT:["x_1/\\pdf(\\tdist(y),\\invT(x, y))","0/0"],addPoints:["x_1","y_1"],subtractPoints:["x_1","-y_1"],multiplyPoint:["x_1*y","x*y_1"],dividePoint:["x_1/y","-x*(y_1/y^2)"],midpoint:["x_1/2","y_1/2"],distance:["-((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y)/\\distance(x,y)","((y.x-x.x)*y_1.x+(y.y-x.y)*y_1.y)/\\distance(x,y)"]},h={tcdf:["-x_1*\\pdf(\\tdist(z),x)","y_1*\\pdf(\\tdist(z),y)","0/0"],poissoncdf:["0/0","0/0","z_1\\sum _{n=\\max(0,\\floor(\\min(x,y)))}^{\\floor(\\max(x,y))}\\frac{e^{-z}(n-z)z^{(n-1)}}{n!}"],normalpdf:["-x_1*\\frac{x-y}{z^2} \\pdf(\\normaldist(y,z),x)","y_1*\\frac{x-y}{z^2} \\pdf(\\normaldist(y,z),x)","z_1*(\\frac{(x-y-z)*(x-y+z)}{z^3}) \\pdf(\\normaldist(y,z),x)"],binompdf:["0/0","0/0","\\{0<=z<=1: z_1*\\pdf(\\binomialdist(y,z),x)*(\\frac{\\round(x)}{z}-\\frac{\\round(y)-\\round(x)}{1-z}), 0 \\}"],invBinom:["0/0","0/0","0/0"],uniformpdf:["0","\\{y<=x: \\frac{y_1}{(z-y)^2}, 0\\}","\\{z>=x: -\\frac{z_1}{(z-y)^2}, 0\\}"],invUniform:["\\{y<=x<=z: x_1*(z-y), 0\\}","\\{y<=x<=z: y_1*(1-x), 0\\}","\\{y<=x<=z: z_1*x, 0\\}"]},l={normalcdf:["-x_1\\pdf(\\normaldist(z,u), x)","y_1\\pdf(\\normaldist(z,u), y)","-z_1*(\\pdf(\\normaldist(z,u), y) - \\pdf(\\normaldist(z,u), x))","u_1*(  \\{\\abs(y)=1/0:0,\\frac{z-y}{u}\\pdf(\\normaldist(z,u),y)\\} -   \\{\\abs(x)=1/0:0,\\frac{z-x}{u}\\pdf(\\normaldist(z,u),x)\\})"],binomcdf:["0/0","0/0","0/0","\\{0<=u<=1: u_1*\\sum _{n=\\max(0,\\round(\\min(x,y)))}^{\\round(\\max(x,y))}(  \\pdf(\\binomialdist(z,u),n)*(\\frac{n}{u}-\\frac{\\round(z)-n}{1-u})), 0 \\}"],uniformcdf:["\\{z>u: 0/0, -x_1\\pdf(\\uniformdist(z,u), x)\\}","\\{z>u: 0/0, y_1\\pdf(\\uniformdist(z,u), y)\\}","\\{z>u: 0/0, z_1*(\\frac{\\{z<x<u:u-x,0\\} + \\{z<y<u:y-u,0\\}}{(u-z)^2})\\}","\\{z>u: 0/0, u_1*(\\frac{\\{z<x<u:x-z,0\\} + \\{z<y<u:z-y,0\\}}{(u-z)^2})\\}"]};for(var _ in v)e[_].prototype.takeDerivative=function(a,i){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t)};return f(t,e[0],a.substitute(r),i).getConcreteTree(c,o)}}(t.parse(v[_]),e[_].prototype._outputType||i.Number);for(_ in p)e[_].prototype.takeDerivative=function(a,i,s){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t),y:e[1],y_1:e[1].takeDerivative(t)};return u.Add([f(t,e[0],a.substitute(r),s),f(t,e[1],i.substitute(r),s)]).getConcreteTree(c,o)}}(t.parse(p[_][0]),t.parse(p[_][1]),e[_].prototype._outputType||i.Number);for(_ in h)e[_].prototype.takeDerivative=function(a,i,s,n){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t),y:e[1],y_1:e[1].takeDerivative(t),z:e[2],z_1:e[2].takeDerivative(t)};return u.Add([u.Add([f(t,e[0],a.substitute(r),n),f(t,e[1],i.substitute(r),n)]),f(t,e[2],s.substitute(r),n)]).getConcreteTree(c,o)}}(t.parse(h[_][0]),t.parse(h[_][1]),t.parse(h[_][2]),e[_].prototype._outputType||i.Number);for(_ in l)e[_].prototype.takeDerivative=function(a,i,s,n,x){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t),y:e[1],y_1:e[1].takeDerivative(t),z:e[2],z_1:e[2].takeDerivative(t),u:e[3],u_1:e[3].takeDerivative(t)};return u.Add([u.Add([f(t,e[0],a.substitute(r),x),f(t,e[1],i.substitute(r),x)]),u.Add([f(t,e[2],s.substitute(r),x),f(t,e[3],n.substitute(r),x)])]).getConcreteTree(c,o)}}(t.parse(l[_][0]),t.parse(l[_][1]),t.parse(l[_][2]),t.parse(l[_][3]),e[_].prototype._outputType||i.Number);var f=function(t,e,r,a){if(void 0===a&&(a=i.Number),e.dependsOn(t))return r;if(a===i.Number)return n;if(a===i.Point)return y;throw s.parseError()};for(var m in d){var g=d[m];u[m].prototype.takeDerivative=g}["tSample","poissonSample","uniformSample","normalSample","binomSample"].forEach(function(t){e[t].prototype.takeDerivative=function(t){for(var e=0;e<this.args.length;e++)if(this.args[e].dependsOn(t))return u.Constant(NaN);return n}})});
define('core/math/features/substitute',['require','parsenodes'],function(require){"use strict";var t=require("parsenodes"),s={Identifier:function(t){return t[this._symbol]?t[this._symbol]:this},FreeVariable:function(t){return t[this._symbol]?t[this._symbol]:this},Constant:function(t){return this},Expression:function(s){return this.copyWithArgs(this.args.map(function(t){return t.substitute(s)}))},List:function(s){return t.List(this.args.map(function(t){return t.substitute(s)}))},SolvedEquation:function(t){return new this.constructor(this._symbol,this._expression.substitute(t))},OptimizedRegression:function(t){return new this.constructor(this.model.substitute(t),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var i in s)t[i].prototype.substitute=s[i]});
define('core/math/features/isImplicit',['require','parsenodes'],function(require){"use strict";var i=require("parsenodes");function t(t){return!(t[0]instanceof i.FreeVariable)||t[1].dependsOn(t[0]._symbol)}i.Base.prototype.isImplicit=function(){return!1},i.Equation.prototype.isImplicit=function(){return t(this.args)},i.BaseComparator.prototype.isImplicit=function(){return t(this.args)},i.Broadcast.prototype.isImplicit=function(){return this._expression.isImplicit()}});
define('core/math/workerconfig',[],function(){"use strict";return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,sliders:!0}});
define('core/math/features/solve',['require','core/math/baseparser','parsenodes','core/math/errormsg','core/math/builtinframe','core/math/workerconfig','core/math/maybe-rational','core/math/policy'],function(require){"use strict";var e=require("core/math/baseparser"),t=require("parsenodes"),r=t.Base,d=t.Constant,a=t.Equation,C=t.SolvedEquation,i=t.BaseComparator,y=t.List,q=require("core/math/errormsg"),v=require("core/math/builtinframe"),V=require("core/math/workerconfig"),n=require("core/math/maybe-rational").maybeRational,h=require("core/math/policy").defaultPolicy,T=d(n(0,1));var s=e.parse("b*b"),o=e.parse("4*a*c"),l=e.parse("(-b+\\sqrt{b*b-4*a*c})/(2*a)"),c=e.parse("(-b-\\sqrt{b*b-4*a*c})/(2*a)"),u=e.parse("[\\{\\abs(b)>0:-c/b\\}]"),p=e.parse("[\\{\\abs(a)>0:-b/(2*a)\\}]"),f=e.parse("[\\{a=0:\\{b<0:-c/b\\},q\\},\\{a=0:\\{b>0:-c/b\\},p\\}]"),b=e.parse("[\\{a=0:\\{b<0:-c/b\\},a>0:q\\},\\{a=0:\\{b=0:\\{c>0:-m\\}\\},a>0:\\{f<g:-m\\},p\\},\\{a=0:\\{b=0:\\{c>0:m\\}\\},a>0:\\{f<g:m\\},q\\},\\{a=0:\\{b>0:-c/b\\},a>0:p\\}]");function I(e,r,t,a){for(var i,n,s,o,l=[],c=[],u=0;u<t.length;u++){var p=t[u],f=0;y.eachArgs(e,[r],function(e){var r=e[0];f=Math.max(f,r.polynomialOrder(p))});var b=2<f,g=1<t.length&&!e.validSolvedVariable(p),m=a&&r.piecewiseDependsOn(p);b||g||m?(c[u]={},l[u]=1/0):(c[u]=[],l[u]=0,y.eachArgs(e,[r],function(e){var r,t,a,i=e[0];r=i.getPolynomialCoefficients(p),(t=Object.create(v)).a=r[2]?r[2].tryGetConcreteTree(h,v):T,t.b=r[1]?r[1].tryGetConcreteTree(h,v):T,t.c=r[0]?r[0].tryGetConcreteTree(h,v):T,n=t,c[u].push(n),l[u]=Math.max(l[u],0===(a=n).a.asValue()?0===a.b.asValue()?0:1:2)}))}return o=1===t.length?(n=c[0],s=t[0],l[0]):(i=0!==l[0]&&(0===l[1]||l[0]<l[1])?0:1,n=c[i],s=t[i],l[i]),{localFrame:n,variableOfInterest:s,effectiveOrder:o}}var E={inequality:function(e){return g(e),b.getConcreteTree(h,e)},generalEquation:function(e){return g(e),e.a.isConstant&&0===e.a.asValue()?u.getConcreteTree(h,e):e.f.isConstant&&e.g.isConstant&&e.f.asValue()-e.g.asValue()==0?p.getConcreteTree(h,e):f.getConcreteTree(h,e)}};function g(e){e.f=s.getConcreteTree(h,e),e.g=o.getConcreteTree(h,e),e.p=l.getConcreteTree(h,e),e.q=c.getConcreteTree(h,e),e.m=d(n(1e305,1))}r.prototype.trySolve=function(e,r){try{return this.solve(e,r)}catch(e){if(e instanceof t.Error)return e;throw e}},a.prototype.solve=function(e,r){return this.asComparator().solve(e,r)},i.prototype.solve=function(e,r){var t=this.tryGetConcreteTree(e,r);if(t.isError)return t;if(t.isConstant)return t;var a="="!==this.getOperator();if(!V.plotImplicits&&t.isImplicit())throw new q.implicitsDisabled;var i=this._difference.tryGetConcreteTree(e,r);i.isBroadcast&&(i=i.asList(e));var n=i.getDependencies();if(0===n.length)return i.isList?y(i.args.map(function(e){return d(0===e.asValue())})):d(0===i.asValue());if(1===n.length&&i.isList&&!a)return i;if(1===n.length&&!a&&!V.plotSingleVariableImplicitEquations)return q.singleVariableImplicitEquationsDisabled();var s=y.wrap(i);if(2<n.length)return q.tooManyVariables(this.getSliderVariables(e,t)).setDependencies(n);if(a&&!e.validInequalityVariables(n))return q.invalidInequalityVariables().setDependencies(n);var o=I(e,s,n,a),l=o.localFrame,c=o.effectiveOrder,u=o.variableOfInterest;if(e.complicatedPolarImplicit(u,c))return q.complicatedPolarImplicit().setDependencies(n);if(!e.validImplicitVariables(n))return q.invalidImplicitVariables();if(2<c)return i;for(var p=a?E.inequality:E.generalEquation,f=[],b=0;b<l.length;b++){var g=p(l[b]);if(g.isError)return g;if(g.isConstant)f.push(g);else for(var m=0;m<g.args.length;m++){var v=g.args[m],h=s.args[b].extractConditions(u,v).getConcreteTree(e,r);f.push(h)}}return C(u,y(f))}});
define('core/math/distribution-spec',["require","exports","core/math/baseparser","tslib"],function(require,d,i,l){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.getFunctionSpecFromTree=d.parseToplevelFunction=d.DistributionParameterDefaultsMap=void 0,d.DistributionParameterDefaultsMap={normaldist:{type:"distribution",symbol:"normaldist",params:["mean","stdev"],defaults:["0","1"],discrete:!1},tdist:{type:"distribution",symbol:"tdist",params:["dof"],defaults:[void 0],discrete:!1},binomialdist:{type:"distribution",symbol:"binomialdist",params:["trials","probsuccess"],defaults:[void 0,"0.5"],discrete:!0},poissondist:{type:"distribution",symbol:"poissondist",params:["mean"],defaults:[void 0],discrete:!0},uniformdist:{type:"distribution",symbol:"uniformdist",params:["min","max"],defaults:["0","1"],discrete:!1}};var u={Histogram:{type:"visualization",symbol:"histogram",params:["data","binwidth"],defaults:[void 0,"1"]},DotPlot:{type:"visualization",symbol:"dotplot",params:["data","binwidth"],defaults:[void 0,"1"]},BoxPlot:{type:"visualization",symbol:"boxplot",params:["data"],defaults:[void 0]}};function s(t){var i=t,s=u[i.type];if(!s)switch("Assignment"===i.type&&(i=i._expression),i.type){case"FunctionCall":s=d.DistributionParameterDefaultsMap[i._symbol];break;default:return}if(s){for(var e={},a=s.params,o=i.args,r=0;r<a.length;r++){var n=o[r];e[a[r]]=n&&n.getInputString()||""}return l.__assign(l.__assign({},s),{span:i.getInputSpan(),values:e})}}d.parseToplevelFunction=function(t){return s(i.parse(t,{trailingComma:!0}))},d.getFunctionSpecFromTree=s});
define('core/math/evaluationstate',["require","exports","core/vendor/d3-color","parsenodes","./errormsg","core/types/graphmode","core/lib/label","core/math/distribution-spec","./types"],function(require,e,m,h,b,_,E,y,S){"use strict";function V(e){return e.isError?e.getError():void 0===e.asValue()?"":+e.asValue()}function M(){return{operator:"=",variables:[]}}function x(e,r,i){var a=e.variables;if(a&&a.length){for(var s={},t=0,n=a;t<n.length;t++){s[o=n[t]]=!0}for(var o in i)s[o]=!0;i=s}e.variables=r.sliderVariables(Object.keys(i))}Object.defineProperty(e,"__esModule",{value:!0}),e.addSliderPrompts=e.EvaluationState=e.defaultEvaluationState=void 0,e.defaultEvaluationState=M,e.EvaluationState=function(e,r,i){if(r.isTable)return function(e,r){for(var i=[],a=0;a<e.columns.length;a++){var s=r.columns[a],t=s.isError?[]:s.values.map(V),n={dependent:!s.isIndependent,discrete:!!s.isIndependent,values:t};s.isError&&(n.error=s.getError()),i.push(n)}return{column_data:i}}(r,i);if(r.isImage)return a=e,s=r,n={variables:[],errorMap:{},dimensions:{}},(t=i).center.isError&&(n.errorMap.center=!0),t.radianAngle.isError&&(n.errorMap.angle=!0),t.width.isError&&(n.errorMap.width=!0),t.height.isError&&(n.errorMap.height=!0),t.opacity.isError&&(n.errorMap.opacity=!0),t.center.isError||t.radianAngle.isError||t.width.isError||t.height.isError||t.opacity.isError?n.variables=s.getSliderVariables(a,t):(n.dimensions.x=[],n.dimensions.y=[],n.dimensions.radianAngle=[],n.dimensions.width=[],n.dimensions.height=[],n.dimensions.opacity=[],h.List.eachArgs(a,[t.center,t.radianAngle,t.width,t.height,t.opacity],function(e){var r=e[0].asValue(),i=+e[1].asValue(),a=Math.atan2(Math.sin(i),Math.cos(i));n.dimensions.x.push(+r[0]),n.dimensions.y.push(+r[1]),n.dimensions.radianAngle.push(a),n.dimensions.width.push(+e[2].asValue()),n.dimensions.height.push(+e[3].asValue()),n.dimensions.opacity.push(Math.max(0,Math.min(1,+e[4].asValue())))}),(a.graphingEnabled()?s.getGraphMode(a,t):_.NONE)!==_.NONE&&(n.is_graphable=!0),t.moveStrategy&&(n.move_strategy=t.moveStrategy)),n;var a,s,t,n;if(r.isSimulation)return function(e,r){var i=r.fps,a=i.asValue(),s=void 0;("number"!=typeof a||a<0)&&(a=0,s=b.simulationFPSNonNegativeNumber().getError());for(var t={},n=0,o=i.getDependencies();n<o.length;n++){t[o[n]]=!0}var l={variables:[],fps:a,fps_error:s};return x(l,e,t),l}(e,i);var o,l=M();if(i.isError&&(!(r instanceof h.FunctionDefinition)||i.blocksExport))return l.error=i.getError(),l.variables=r.getSliderVariables(e,i),l.is_single_identifier=r instanceof h.Identifier,l;i instanceof h.RGBColor&&(o=i.asValue(),l.rgb_value=m.rgb(o[0],o[1],o[2]).formatHex()),i.moveStrategy&&(l.move_strategy=i.moveStrategy,l.default_drag_mode=i.defaultDragMode),r.isInequality()&&(l.is_inequality=!0),l.operator=r.getOperator(),i instanceof h.SolvedEquation?!0!==i._expression.asValue()&&!1!==i._expression.asValue()&&(l.assignment=i._symbol):r instanceof h.Assignment&&(l.assignment=r._symbol);var d,u=e.graphingEnabled()?r.getGraphMode(e,i):_.NONE;u!==_.NONE&&(l.is_graphable=!0,l.expression_type=r.getExpressionType(u,i.valueType),i.isShadeBetween()&&(l.is_shade_between=!0),(d=r.tableInfo(e,i))&&(l.is_tableable=!0,l.table_info=d)),void 0!==i.valueType&&S.isList(i.valueType)&&(l.is_concrete_list=!0),l.variables=l.is_graphable?[]:r.getSliderVariables(e,i),l.is_single_identifier=r instanceof h.Identifier,i.isConstant&&(l.constant_value=i.asValue());var g=i.getEvaluationInfo();if(!g||"="!==l.operator||r.isConstant||r.isFunction||i.valueType===S.Bool||i.valueType===S.ListOfBool||r instanceof h.Equation||r instanceof h.And||(l.is_evaluable=!0,l.zero_values=g),i instanceof h.OptimizedRegression){var p=i,c={};for(var v in p.parameters)p.parameters.hasOwnProperty(v)&&(c[E.identifierToLatex(v)]=+p.parameters[v].asValue());l.is_regression=!0,l.regression={parameters:c,residualVariable:E.identifierToLatex(p.residualVariable),residualSuggestionId:p.residualSuggestionId,shouldSuggestLogMode:p.shouldSuggestLogMode,isLinear:p.isLinear,statistics:p.statistics,parameterWarning:p.parameterWarning}}var f=y.getFunctionSpecFromTree(r);return f&&f.discrete&&(l.is_discrete_distribution=!0),l},e.addSliderPrompts=x});
define('core/math/statementanalysis',['require','core/math/evaluationstate','pjs','core/types/graphmode','core/math/workerconfig'],function(require){"use strict";var i=require("core/math/evaluationstate").EvaluationState,e=require("pjs"),t=require("core/types/graphmode"),r=require("core/math/workerconfig");return e(function(e){e.init=function(e,t,r){this.policy=e,this.rawTree=t,this.concreteTree=r,this.evaluationState=i(e,t,r)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!r.pointsOfInterest)return!1;var e=this.getGraphMode();return e===t.X||e===t.Y}})});
define('core/math/expression-types',["require","exports"],function(require,T){"use strict";var l,i;Object.defineProperty(T,"__esModule",{value:!0}),T.isClickableExpressionType=T.getReconciledExpressionProps=T.EXPRESSION_PROP_DEFAULTS=T.ExpressionType=void 0,(i=l=T.ExpressionType||(T.ExpressionType={})).X_OR_Y="X_OR_Y",i.SINGLE_POINT="SINGLE_POINT",i.POINT_LIST="POINT_LIST",i.PARAMETRIC="PARAMETRIC",i.POLAR="POLAR",i.IMPLICIT="IMPLICIT",i.POLYGON="POLYGON",i.HISTOGRAM="HISTOGRAM",i.DOTPLOT="DOTPLOT",i.BOXPLOT="BOXPLOT",i.TTEST="TTEST",i.STATS="STATS",i.CUBE="CUBE",i.SPHERE="SPHERE",T.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},TTEST:{points:!1,lines:!1,fill:!1},STATS:{points:!1,lines:!1,fill:!1},CUBE:{points:!1,lines:!1,fill:!0},SPHERE:{points:!1,lines:!1,fill:!0}},T.getReconciledExpressionProps=function(i,s){if(void 0===i)return{points:!1,lines:!1,fill:!1};var e=T.EXPRESSION_PROP_DEFAULTS[i];switch(i){case l.SINGLE_POINT:return{points:!0,lines:!1,fill:!1};case l.POINT_LIST:case l.DOTPLOT:return{points:void 0===s.points?e.points:s.points,lines:void 0===s.lines?e.lines:s.lines,fill:!1};case l.PARAMETRIC:case l.POLYGON:case l.X_OR_Y:case l.POLAR:case l.IMPLICIT:case l.HISTOGRAM:case l.BOXPLOT:case l.TTEST:case l.STATS:case l.CUBE:case l.SPHERE:return{points:!1,lines:void 0===s.lines?e.lines:s.lines,fill:void 0===s.fill?e.fill:s.fill};default:return i}},T.isClickableExpressionType=function(i){if(void 0===i)return!1;switch(i){case l.SINGLE_POINT:case l.POINT_LIST:case l.PARAMETRIC:case l.POLYGON:case l.X_OR_Y:case l.POLAR:case l.IMPLICIT:return!0;case l.HISTOGRAM:case l.BOXPLOT:case l.DOTPLOT:case l.TTEST:case l.STATS:case l.CUBE:case l.SPHERE:return!1;default:return i}}});
define('core/math/features/analyze',['require','underscore','parsenodes','core/math/statementanalysis','core/math/builtin','core/math/builtinframe','core/math/parsenode/builtinfunction','core/math/errormsg','core/math/comparators','core/math/types','core/types/graphmode','core/math/expression-types','core/math/distribution-spec','core/math/workerconfig'],function(require){"use strict";var l=require("underscore"),u=require("parsenodes"),h=require("core/math/statementanalysis"),a=require("core/math/builtin"),c=require("core/math/builtinframe"),o=require("core/math/parsenode/builtinfunction"),p=require("core/math/errormsg"),n=require("core/math/comparators"),s=require("core/math/types"),d=require("core/types/graphmode"),y=require("core/math/expression-types").ExpressionType,g=require("core/math/distribution-spec").DistributionParameterDefaultsMap,b=require("core/math/workerconfig");function v(e,t,r,i){if(i.isError)return h(e,r,i);var n=i.getDependencies();switch(i.valueType){case s.Distribution:case s.ListOfDistribution:case s.RGBColor:case s.ListOfColor:case s.EmptyList:return h(e,r,i);case s.Point:case s.ListOfPoint:return n.length?e.validParametricVariables(n)?h(e,r,i):h(e,r,p.tooManyVariables(r.getSliderVariables(e,i)).setDependencies(n)):h(e,r,i);case s.Number:case s.ListOfNumber:return 0===n.length?h(e,r,i):n.length<=e.dimensions()-1?e.validExpressionVariables(n)?h(e,r,i):h(e,r,p.equationRequired(e.implicitDependency(n)).setDependencies(n)):e.validImplicitVariables(n)?h(e,r,p.equationRequired().setDependencies(n)):h(e,r,p.tooManyVariables(r.getSliderVariables(e,i)).setDependencies(n));default:return h(e,r,p.parseError())}}function m(e){return o.pdf([e,u.FreeVariable("x")])}function e(e,t){var r=this.tryGetConcreteTree(e,t),i=r.getDependencies();return i.length?h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i)):h(e,this,this.tryGetConcreteTree(e,t))}function t(a){return function(e,t){var r=this.tryGetConcreteTree(e,t),i=r.getDependencies();if(i.length)return h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i));var n,s=h(e,this,this.tryGetConcreteTree(e,t));return r.isError||(s.evaluationState.expression_type=y.TTEST,n=r.args.map(function(e){return e.asValue()}),s.evaluationState.ttest_results=a.apply(null,n)),s}}u.Base.prototype.analyze=function(e,t){return h(e,this,this.tryGetConcreteTree(e,t))},u.FunctionCall.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);return!r.isError&&g[this._symbol]&&0===r.getDependencies().length&&(r=m(r).tryGetConcreteTree(e,t)),v(e,0,this,r)},u.Expression.prototype.analyze=function(e,t){return v(e,0,this,this.tryGetConcreteTree(e,t))},u.FunctionDefinition.prototype.analyze=function(e,t){if(c[this._symbol])return this.asEquation().analyze(e,t);var r=this._symbol.split("_")[0];if(o[r])return h(e,this,p.cannotRedefine(this._symbol,r));var i=this.tryGetConcreteTree(e,t);if(i.isError)return h(e,this,i);var n=this._argSymbols,s=i.getDependencies();if(-1!==s.indexOf(this._symbol))return h(e,this,p.selfReferentialFunction(this._symbol));var a=s.filter(function(e){return-1===n.indexOf(e)});return e.unplottablePolarFunction(this._symbol,s)?h(e,this,p.unplottablePolarFunction()):a.some(e.assignmentForbidden)?h(e,this,p.addArgumentsToDefinition(a,this._symbol,n).setDependencies(s)):a.length?h(e,this,p.tooManyVariables(this.getSliderVariables(e,i)).setDependencies(s)):h(e,this,i)},u.Assignment.prototype.analyze=function(e,t,r){var i=this._symbol;if(!e.validLHS(i))return h(e,this,p.invalidLHS(i));if(c[i])return this.asEquation().analyze(e,t);var n=this.tryGetConcreteTree(e,t);if(!n.isError&&this._expression instanceof u.FunctionCall&&g[this._expression._symbol]&&0===n.getDependencies().length&&(n=m(n).tryGetConcreteTree(e,t)),n.isError)return h(e,this,n);var s=n.getDependencies();if(this.isEquation(n))return this.asEquation().analyze(e,t);if(1<s.length){var a=this.getSliderVariables(e,n);return a.length?h(e,this,p.tooManyVariables(a).allowExport().setDependencies(s)):h(e,this,n)}var o=this.getMoveStrategy(e,t,n,r,this.userData);if(o){var l=this.getDefaultDragMode(o);return h(e,this,u.MovablePoint(n.args,o,l))}return h(e,this,n)},u.Regression.prototype.analyze=function(e,t,r,i,n){return h(e,this,this.tryOptimize(e,t,r,i,n))},u.Polygon.prototype.analyze=e,u.Histogram.prototype.analyze=e,u.Object3D.prototype.analyze=e,u.DotPlot.prototype.analyze=e,u.BoxPlot.prototype.analyze=e,u.TTest.prototype.analyze=t(a.ttest),u.IndependentTTest.prototype.analyze=t(a.ittest),u.Stats.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t),i=r.getDependencies();if(i.length)return h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i));var n,s=h(e,this,this.tryGetConcreteTree(e,t));return r.isError||(s.evaluationState.expression_type=y.STATS,n=r.args.map(function(e){return e.asValue()}),s.evaluationState.stats_results=a.stats.apply(null,n)),s},u.Equation.prototype.analyze=u.BaseComparator.prototype.analyze=function(e,t){var r="="!==this.getOperator();if(!b.plotInequalities&&r)return h(e,this,p.inequalitiesDisabled());var i=this.trySolve(e,t);if(i.isError)return h(e,this,i);if(i instanceof u.SolvedEquation&&i.getDependencies().length){var n=i.getDependencies().concat(i._symbol);if(!e.validImplicitVariables(n))return h(e,this,p.invalidImplicitVariables().setDependencies(n))}return this.getGraphMode(e,i)!==d.IMPLICIT||e.validImplicitVariables(i.getDependencies())?h(e,this,i):h(e,this,p.invalidImplicitVariables().setDependencies(i.getDependencies()))},u.DoubleInequality.prototype.analyze=function(e,t){if(!b.plotInequalities)return h(e,this,p.inequalitiesDisabled());var r=this.tryGetConcreteTree(e,t);if(r.isError)return h(e,this,r);var i=r.getDependencies();return n.table[this._operators[0]].direction!==n.table[this._operators[1]].direction?h(e,this,p.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(r._symbol)&&e.validDoubleInequalityVariables(i)?2<i.length?h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i)):-1!==r._expressions[0].getDependencies().indexOf(r._symbol)||-1!==r._expressions[1].getDependencies().indexOf(r._symbol)?h(e,this,p.complicatedDoubleInequality().setDependencies(i)):h(e,this,r):h(e,this,p.invalidDoubleInequalityVariables().setDependencies(i))},u.And.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return h(e,this,r);var i=r.getDependencies();return i.length?e.validDoubleInequalityVariables(i)?h(e,this,p.complicatedDoubleInequality().setDependencies(i)):h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i)):h(e,this,r)},u.OrderedPair.prototype.analyze=function(e,t,r){var i=this.tryGetConcreteTree(e,t);if(i.isError)return h(e,this,i);var n=this.getMoveStrategy(e,t,i,r,this.userData);if(n){var s=this.getDefaultDragMode(n);return h(e,this,u.MovablePoint(i.args,n,s))}return v(e,0,this,i)},u.Table.prototype.analyze=function(e,t){for(var r=Object.create(t),i=[],n=0;n<this.columns.length;n++){var s,a=this.columns[n].analyze(e,r,t);0===n&&(a.concreteTree.isIndependent?e.validFirstColumnVariable(a.concreteTree.header._symbol)?a.concreteTree.header._symbol:a=h(e,this.columns[n],p.invalidFirstTableColumn()):a=h(e,this.columns[n],p.invalidDependentFirstTableColumn())),a.concreteTree.isIndependent?a.rawTree.exportToLocal(a.concreteTree,r):a.concreteTree.isError||(s=function(e,t){return e.filter(function(e){return!t[e]})}(a.concreteTree.header.getDependencies(),r)).length&&(a=h(e,this.columns[n],p.tooManyVariables(s).setDependencies(s))),i.push(a.concreteTree)}var o=u.Table(i),l=h(e,this,o);return l.evaluationState.is_graphable=!0,l},u.TableColumn.prototype.analyze=function(e,t,r){var i=this.header.tableError();if(i)return h(e,this,p.invalidTableHeader(i));var n=this.tryGetConcreteTree(e,t,r);if(n.isError)return h(e,this,n);if(n.header.isError)return h(e,this,n.header);if(n.values.isError)return h(e,this,n.values);for(var s,a,o=0;o<n.values.length;o++){n.values[o].isError||((s=this.values[o]&&this.values[o].tableError())?n.values[o]=p.invalidTableEntry(s):(a=n.values[o].getDependencies()).length&&(n.values[o]=p.tooManyVariables(a).setDependencies(a)))}return h(e,this,n)},u.Image.prototype.analyze=function(e,t,r){var i=this.tryGetConcreteTree(e,t);if(i.radianAngle.isError||i.center.isError||i.width.isError||i.height.isError||i.opacity.isError)return h(e,this,i);var n=i.center.getDependencies(),s=i.radianAngle.getDependencies(),a=i.width.getDependencies(),o=i.height.getDependencies(),l=i.opacity.getDependencies();return n.length||s.length||a.length||o.length||l.length?h(e,this,u.Image({center:n.length?p.tooManyVariables(s).setDependencies(n):i.center,radianAngle:s.length?p.tooManyVariables(s).setDependencies(s):i.radianAngle,width:a.length?p.tooManyVariables(a).setDependencies(a):i.width,height:o.length?p.tooManyVariables(o).setDependencies(o):i.height,opacity:l.length?p.tooManyVariables(l).setDependencies(l):i.opacity})):(i.moveStrategy=this.getMoveStrategy(e,t,i,r,this.userData),h(e,this,i))},u.Simulation.prototype.analyze=function(e,t,r){var i=this.tryGetConcreteTree(e,t);return h(e,this,i)},u.Slider.prototype.analyze=function(e,t){var r,i,n,s=this.tryGetConcreteTree(e,t),a=s.sliderInfo,o=(i=a.missingVars.length?(r=l.unique(a.missingVars),h(e,this,p.tooManyVariables(e.sliderVariables(r)).setDependencies(r).allowExport())):h(e,this,s)).evaluationState;return b.sliders&&(o.assignment=a.exportedSymbol,o.slider_min_number=a.values.min,o.slider_max_number=a.values.max,o.slider_step_number=a.values.step,o.slider_min_valid=a.valids.min,o.slider_max_valid=a.valids.max,o.slider_step_valid=a.valids.step,n=o.slider_min_valid&&o.slider_max_valid&&o.slider_step_valid,o.is_slider=!0,o.raw_slider_latex=this.getInputString(),o.is_slidable=n,o.is_animatable=o.is_slidable&&!o.is_graphable,a.errMsg&&(o.error=a.errMsg.getError())),delete o.is_evaluable,delete o.zero_values,i}});
define('core/math/features/analyzeFourFunction',['require','parsenodes','core/math/statementanalysis','core/math/errormsg','core/math/parsenode/builtinfunction','core/math/builtinconstants'],function(require){"use strict";var n=require("parsenodes"),u=require("core/math/statementanalysis"),s=require("core/math/errormsg"),a=require("core/math/parsenode/builtinfunction"),p=require("core/math/builtinconstants");function t(n,t){return u(n,this,s.inequalitiesUnsupported())}n.Base.prototype.analyzeFourFunction=function(n,t){var r=this.tryGetConcreteTree(n,t);return r.isError?u(n,this,r):u(n,this,s.parseError())},n.Expression.prototype.analyzeFourFunction=function(n,t){var r=this.tryGetConcreteTree(n,t);if(r.isError)return u(n,this,r);var o=r.getDependencies();if(0<o.length){var e=o[0],i=a.hasOwnProperty(e)?s.functionUnsupported(e):p.hasOwnProperty(e)?s.constantUnsupported(e):s.variablesUnsupported(e);return u(n,this,i)}return u(n,this,r)},n.Assignment.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.assignmentsUnsupported())},n.FunctionDefinition.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.functionDefinitionsUnsupported())},n.Equation.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.equationsUnsupported())},n.And.prototype.analyzeFourFunction=t,n.DoubleInequality.prototype.analyzeFourFunction=t,n.BaseComparator.prototype.analyzeFourFunction=t,n.Regression.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.regressionsUnsupported())},n.OrderedPair.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.pointsUnsupported())},n.RGBColor.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.colorsUnsupported())}});
define('core/math/features/analyzeScientific',['require','parsenodes','core/math/statementanalysis','core/math/errormsg','core/math/builtinframe'],function(require){"use strict";var t=require("parsenodes"),s=require("core/math/statementanalysis"),a=require("core/math/errormsg"),c=require("core/math/builtinframe");function e(t,e){return s(t,this,a.inequalitiesUnsupported())}t.Base.prototype.analyzeScientific=function(t,e){var i=this.tryGetConcreteTree(t,e);return i.isError?s(t,this,i):s(t,this,a.parseError())},t.Expression.prototype.analyzeScientific=function(t,e){var i=this.tryGetConcreteTree(t,e);if(i.isError)return s(t,this,i);var n=i.getDependencies();return 0<n.length?s(t,this,a.tooManyVariables(n)):s(t,this,i)},t.Assignment.prototype.analyzeScientific=function(t,e){var i=this._symbol;if(c[i])return s(t,this,a.cannotRedefine(i));var n=this.tryGetConcreteTree(t,e);if(n.isError)return s(t,this,n);var r=n.getDependencies();return this.isEquation(n)?s(t,this,a.equationsUnsupported()):0<r.length?s(t,this,a.tooManyVariables(r)):s(t,this,n)},t.FunctionDefinition.prototype.analyzeScientific=function(t,e){if(c[this._symbol])return s(t,this,a.cannotRedefine(this._symbol));var i=this.tryGetConcreteTree(t,e);if(i.isError)return s(t,this,i);var n=this._argSymbols,r=i.getDependencies();if(-1!==r.indexOf(this._symbol))return s(t,this,a.selfReferentialFunction(this._symbol));var o=r.filter(function(t){return-1===n.indexOf(t)});return o.length?s(t,this,a.addArgumentsToDefinition(o,this._symbol,n)):s(t,this,i)},t.Equation.prototype.analyzeScientific=function(t,e){return s(t,this,a.equationsUnsupported())},t.And.prototype.analyzeScientific=e,t.DoubleInequality.prototype.analyzeScientific=e,t.BaseComparator.prototype.analyzeScientific=e,t.Regression.prototype.analyzeScientific=function(t,e){return s(t,this,a.regressionsUnsupported())},t.OrderedPair.prototype.analyzeScientific=function(t,e){return s(t,this,a.pointsUnsupported())},t.RGBColor.prototype.analyzeScientific=function(t,e){return s(t,this,a.colorsUnsupported())}});
define('core/math/features/analyzeSingleExpressionScientific',['require','parsenodes','core/math/statementanalysis','core/math/errormsg','core/math/parsenode/builtinfunction','core/math/builtinconstants'],function(require){"use strict";var e=require("parsenodes"),s=require("core/math/statementanalysis"),p=require("core/math/errormsg"),a=require("core/math/parsenode/builtinfunction"),c=require("core/math/builtinconstants");function n(e,n){return s(e,this,p.inequalitiesUnsupported())}e.Base.prototype.analyzeSingleExpressionScientific=function(e,n){var t=this.tryGetConcreteTree(e,n);return t.isError?s(e,this,t):s(e,this,p.parseError())},e.Expression.prototype.analyzeSingleExpressionScientific=function(e,n){var t=this.tryGetConcreteTree(e,n);if(t.isError)return s(e,this,t);var i=t.getDependencies();if(0<i.length){var r=i[0],o=a.hasOwnProperty(r)?p.functionUnsupported(r):c.hasOwnProperty(r)?p.constantUnsupported(r):p.variablesUnsupported(r);return s(e,this,o)}return s(e,this,t)},e.Assignment.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.assignmentsUnsupported())},e.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.functionDefinitionsUnsupported())},e.Equation.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.equationsUnsupported())},e.And.prototype.analyzeSingleExpressionScientific=n,e.DoubleInequality.prototype.analyzeSingleExpressionScientific=n,e.BaseComparator.prototype.analyzeSingleExpressionScientific=n,e.Regression.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.regressionsUnsupported())},e.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.pointsUnsupported())},e.RGBColor.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.colorsUnsupported())}});
define('core/math/features/getgraphmode',['require','parsenodes','core/types/graphmode','core/lib/dragmode','core/lib/dragmode','core/math/types'],function(require){"use strict";var o=require("parsenodes"),i=require("core/types/graphmode"),a=require("core/lib/dragmode").reconcileDragMode,p=require("core/lib/dragmode").DragMode,u=require("core/math/types");function s(e,t){var r,o,s,n=t.getDependencies();switch(t.valueType){case u.Point:case u.ListOfPoint:return t.isMovablePoint&&(r=this.userData,o=t,s=!r||!r.hasOwnProperty("dragMode")||r.dragMode===p.AUTO?o.defaultDragMode:r.dragMode,a(s,o.moveStrategy)!==p.NONE)?i.XYPOINT_MOVABLE:0===n.length?i.XYPOINT:e.validParametricVariables(n)?2===e.dimensions()?i.PARAMETRIC:i.PARAMETRIC_CURVE_3D:i.NONE;case u.Number:case u.ListOfNumber:return 2===e.dimensions()&&1===n.length?i.Y:3===e.dimensions()&&2===n.length?i.Z_3D:i.NONE;default:return i.NONE}}function n(e,t){var r=t._expression.getDependencies();if(1<r.length)return i.NONE;if(t._expression.valueType!==u.Number&&t._expression.valueType!==u.ListOfNumber)return i.NONE;var o=t._symbol;return e.graphMode(o,r)}function e(e,t){return t.isError?i.NONE:i.VISUALIZATION}o.Base.prototype.getGraphMode=function(e,t){return i.NONE},o.Expression.prototype.getGraphMode=s,o.Equation.prototype.getGraphMode=o.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?i.NONE:t instanceof o.SolvedEquation?0===r.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):i.NONE:n(e,t):1===r.length||2===r.length?i.IMPLICIT:i.NONE},o.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},o.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof o.SolvedEquation)return n(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var r=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:case u.EmptyList:switch(r.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):i.NONE;case 1:return t.valueType!==u.ListOfNumber||e.graphableListVariables(this._symbol,r[0])?this.isSlider?i.NONE:e.graphMode(this._symbol,r):i.NONE;case 2:return 3===e.dimensions()&&"z"===this._symbol?i.Z_3D:i.NONE;default:return i.NONE}break;default:return s.call(this,e,t)}},o.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return i.NONE;var r=e.graphMode(this._symbol,this._argSymbols),o=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:switch(o.length){case 0:return r;case 1:return o[0]!==this._argSymbols[0]?i.NONE:r;default:return i.NONE}break;default:return i.NONE}},o.Regression.prototype.getGraphMode=function(e,t){return!this.isLhsSimple||!t.isModelValid||1!==t.model.getDependencies().length?i.NONE:i.Y},o.Polygon.prototype.getGraphMode=function(e,t){return t.isError?i.NONE:i.POLYGONFILL},o.Object3D.prototype.getGraphMode=function(e,t){return t.isError?i.NONE:i.OBJECT3D},o.Histogram.prototype.getGraphMode=e,o.DotPlot.prototype.getGraphMode=e,o.BoxPlot.prototype.getGraphMode=e,o.Image.prototype.getGraphMode=function(e,t){return!this.userData.showPoints||this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError||this.opacity.isError?i.NONE:i.XYPOINT}});
define('core/math/features/getgraphinfo',['require','parsenodes','core/math/builtinframe','core/math/domaintypes','core/math/policy','core/lib/color-helpers'],function(require){"use strict";var e=require("parsenodes"),i=require("core/math/builtinframe"),o=require("core/math/domaintypes"),r=require("core/math/policy").defaultPolicy,s=require("core/lib/color-helpers").getDisplayColor;e.Base.prototype.getGraphInfo=function(e,t,i){var r,n,a=t.getDependencies();switch(a.length){case 0:r=t.getLinearCoefficients(),n=t.boundDomain("x");break;case 1:"known"===(n=t.boundDomain(a[0])).type&&(r=t.getLinearCoefficients());break;case 2:n=o.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:s(this.userData,this.metaData,i),pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:!!r,linearCoefficients:r,domainBound:n}},e.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.asValue(),0];case 1:if(1<this.polynomialOrder(e[0]))return;var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].tryGetConcreteTree(r,i).asValue():0,t[1]?+t[1].tryGetConcreteTree(r,i).asValue():0];default:return}},e.OrderedPair.prototype.getLinearCoefficients=function(){var e=this.args[0].getLinearCoefficients(),t=this.args[1].getLinearCoefficients();if(e&&t)return[e,t]}});
define('core/math/features/getMoveStrategy',['require','parsenodes','core/math/types','core/math/maybe-rational','core/math/builtinframe','core/math/functions'],function(require){"use strict";var P=require("parsenodes"),V=require("core/math/types"),e=require("core/math/maybe-rational").maybeRational,h=require("core/math/builtinframe"),_=require("core/math/functions"),y=P.Constant(e(0,1));function F(e){return{type:"none",inputString:e}}function I(e){return{type:"updateCoordinate",inputString:e}}function M(e,t,n){return{type:"updateSlider",inputString:e,id:t,coefficients:n}}function x(e,t,n,r,i,a){for(var o=t.getDependencies(),s=0;s<o.length;s++)if(i[o[s]])return!1;for(var u=o.length-1;0<=u;u--){var c=o[u];if(!a[c]){var g=r[c];if(void 0!==g){var f=n[c];if(1===f.order){var p=f.tree.getPolynomialCoefficients(c),d=p[1]?p[1].getConcreteTree(e,h):y,l=p[0]?p[0].getConcreteTree(e,h):y;if(l.isConstant&&d.isConstant)if(isFinite(l.asValue())&&isFinite(d.asValue()))if(0!==d.asValue())return{symbol:c,id:g,coefficients:[-l.asValue()/d.asValue(),1/d.asValue()]}}}}}return!1}function D(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}(e),r={};for(var i in t){var a=t[i].evaluationState.assignment;t[i].evaluationState.is_slidable&&n[a]&&(r[a]=i)}return r}function T(e,t,n,r){for(var i=[],a=0;a<n.length;a++){var o=n[a],s={};i.push(s);for(var u=0;u<r.length;u++){var c=r[u],g=Object.create(t);g[c]=P.FreeVariable(c);var f=o.tryGetConcreteTree(e,g);f.isError?s[c]={tree:f,order:1/0}:s[c]={tree:f,order:f.polynomialOrder(c)}}}return i}function j(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];0!==t[i].order&&(n[i]=!0)}}P.Base.prototype.getMoveStrategy=function(){},P.Assignment.prototype.getMoveStrategy=function(e,t,n,r,i){if(this._expression instanceof P.OrderedPair)return this._expression.getMoveStrategy(e,t,n,r,i)},P.OrderedPair.prototype.getMoveStrategy=function(e,t,n,r,i){if((!i||!1!==i.shouldGraph)&&n.valueType===V.Point&&0===n.getDependencies().length){for(var a,o,s,u,c=D(this.getDependencies(),r),g=Object.keys(c),f=this.args,p=T(e,t,f,g),d=[],l={},h={},y=0;y<2;y++){var v,m=f[y],C=m.getInputString();m.isConstant?d[y]=I(C):((v=x(e,m,p[y],c,l,h))&&(d[y]=M(C,v.id,v.coefficients),l[v.symbol]=!0,j(g,p[y],h)),d[y]||(d[y]=F(C)))}if("none"!==d[0].type||"none"!==d[1].type)return d;if(1===g.length){var S,b=g[0],O=c[b];try{S=P.OrderedPair([p[0][b].tree,p[1][b].tree]).getCompiledFunction()}catch(e){return}return _.dehydrateCompiledFunction(S),[(a=f[0].getInputString(),s=r[o=O].evaluationState,u=S,{type:"updateSliderNonlinear",inputString:a,id:o,initialValue:s.constant_value,min:s.slider_min_number,max:s.slider_max_number,compiled:u}),F(f[1].getInputString())]}}},P.Image.prototype.getMoveStrategy=function(e,t,n,r,i){if((!i||!1!==i.shouldGraph)&&(!i||!1!==i.showPoints)&&"OrderedPair"===n.center.type&&n.center.args[0].isConstant&&n.center.args[1].isConstant&&n.width.isConstant&&n.height.isConstant&&n.radianAngle.isConstant&&n.opacity.isConstant){var a=D(this.getDependencies(),r),o=Object.keys(a),s=[this.width,this.height];"OrderedPair"===this.center.type&&s.push(this.center.args[0],this.center.args[1]);for(var u=[],c={},g={},f=T(e,t,s,o),p=[2,3,0,1],d=0;d<p.length;d++){var l,h,y=p[d],v=s[y];v?(l=v.getInputString(),v.isConstant?u[y]=I(l):((h=x(e,v,f[y],a,c,g))&&(u[y]=M(l,h.id,h.coefficients),c[h.symbol]=!0,j(o,f[y],g)),u[y]||(u[y]=F(l)))):u[y]=F("")}if("none"!==u[0].type||"none"!==u[1].type||"none"!==u[2].type||"none"!==u[3].type)return u}}});
define('core/math/features/getDefaultDragMode',['require','parsenodes','core/lib/dragmode'],function(require){"use strict";var e=require("parsenodes"),t=require("core/lib/dragmode").DragMode;e.Base.prototype.getMoveStrategy=function(){return t.NONE},e.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?t.XY:"none"!==e[0].type?t.X:"none"!==e[1].type?t.Y:t.NONE},e.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?t.XY:"updateSlider"===e[0].type?t.X:"updateSlider"===e[1].type?t.Y:t.NONE}});
define('core/math/features/tableinfo',['require','parsenodes','core/math/types','core/lib/label','core/math/distribution-spec'],function(require){"use strict";var i=require("parsenodes"),o=i.List,a=require("core/math/types"),s=require("core/lib/label"),l=require("core/math/distribution-spec").getFunctionSpecFromTree;i.Base.prototype.tableInfo=function(e,t){return!1},i.Identifier.prototype.tableInfo=function(e,t){return!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}},i.Expression.prototype.tableInfo=function(e,t){var n=t.getDependencies();if(l(this))return!1;switch(t.valueType){case a.Point:case a.ListOfPoint:return 0!==n.length?!1:(!t.isMovablePoint||"updateSlider"!==t.moveStrategy[0].type&&"updateSlider"!==t.moveStrategy[1].type)&&{independent_variable:"x",dependent_column:"y",by_reference:!1,values:o.wrap(t).mapElements(e,function(e){return e.asArray()})};case a.Number:if(1!==n.length)return!1;var r=n[0];return e.validFirstColumnVariable(r)?{independent_variable:r,dependent_column:this.getInputString(),by_reference:!1}:!1;default:return!1}},i.Assignment.prototype.tableInfo=function(e,t){if(t instanceof i.SolvedEquation)return!1;if(!this.getInputString().length)return!1;if(l(this))return!1;var n,r=t.getDependencies();if(1<r.length)return!1;if(0===r.length){if(!e.tableableAsConstant(this._symbol))return!1;n=e.implicitIndependent(this._symbol)}else n=r[0];return!!e.validFirstColumnVariable(n)&&{independent_variable:n,dependent_column:e.assignmentForbidden(this._symbol)?s.trimLatex(this.getInputString().replace(/[^=]*=/,"")):s.trimLatex(this.getInputString().split("=")[0]),by_reference:!e.assignmentForbidden(this._symbol)}},i.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this.getInputString().length)return!1;if(1<t.getDependencies().length)return!1;var n=this._argSymbols[0];if(!e.validFirstColumnVariable(n))return!1;var r=e.assignmentForbidden(this._symbol);return{independent_variable:n,dependent_column:r?s.trimLatex(this.getInputString().replace(/[^=]*=/,"")):s.trimLatex(this.getInputString().split("=")[0]),by_reference:!r}},i.BaseComparator.prototype.tableInfo=function(e,t){return!1},i.DoubleInequality.prototype.tableInfo=function(e,t){return!1},i.Equation.prototype.tableInfo=function(e,t){return!1}});
define('core/math/features/tableerror',['require','parsenodes','core/lib/worker-i18n'],function(require){"use strict";var r=require("parsenodes"),e=require("core/lib/worker-i18n");r.Base.prototype.tableError=function(){return this.isInequality()?e.s("shared-calculator-error-table-inequality-supplement"):!(this instanceof r.Expression)&&e.s("shared-calculator-error-table-generic-supplement")},r.List.prototype.tableError=function(){return e.s("shared-calculator-error-table-list-supplement")},r.Equation.prototype.tableError=r.Assignment.prototype.tableError=function(){return e.s("shared-calculator-error-table-equation-supplement")},r.FunctionDefinition.prototype.tableError=function(){return e.s("shared-calculator-error-table-function-definition-supplement")},r.Regression.prototype.tableError=function(){return e.s("shared-calculator-error-table-regression-supplement")}});
define('core/math/curve-accumulator',["require","exports","core/math/distance"],function(require,t,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accumulator=void 0;var e=(i.prototype.colinear=function(t,e,i){this.map&&(t=this.map(t),e=this.map(e),i=this.map(i));var n=h.pointToSegmentParameter(i[0],i[1],i[2]||0,t[0],t[1],t[2]||0,e[0],e[1],e[2]||0);if(n<1)return!1;var s=[t[0]+n*(e[0]-t[0]),t[1]+n*(e[1]-t[1]),3===t.length?t[2]+n*(e[2]-t[2]):0];return Math.abs(i[0]-s[0])<=this.xtolerance&&Math.abs(i[1]-s[1])<=this.ytolerance&&(2===t.length||Math.abs(i[2]-s[2])<=this.ztolerance)},i.prototype.addPoint=function(t){if(this.dimensions=t.length,this.xtolerance<0&&this.ytolerance<0&&(2===this.dimensions||this.ztolerance<0))this.segment.push.apply(this.segment,t);else if(this.segment.length){var e=2===this.dimensions?[this.segment[this.segment.length-2],this.segment[this.segment.length-1]]:[this.segment[this.segment.length-3],this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=t,void(this.pendingPoint=t);(!this.colinear(e,this.pivotPoint,t)||h.hypot(e[0]-t[0],e[1]-t[1],(e[2]||0)-(t[2]||0))<h.hypot(e[0]-this.pendingPoint[0],e[1]-this.pendingPoint[1],(e[2]||0)-(this.pendingPoint[2]||0)))&&(this.flushPending(),this.pivotPoint=t),this.pendingPoint=t}}else this.segment.push.apply(this.segment,t)},i.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push.apply(this.segment,this.pendingPoint),this.pivotPoint=void 0,this.pendingPoint=void 0)},i.prototype.breakSegment=function(){this.flushPending(),this.segment.length>(this.dimensions||2)&&this.segments.push(this.segment),this.segment=[]},i.prototype.getSegments=function(){return this.breakSegment(),this.segments},i.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},i);function i(t){t?(this.xtolerance=t.xtolerance||t.tolerance||0,this.ytolerance=t.ytolerance||t.tolerance||0,this.ztolerance=t.ztolerance||t.tolerance||0,this.map=t.map):this.xtolerance=this.ytolerance=this.ztolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}t.Accumulator=e});
define('core/math/implicit-plotter',["require","exports","core/math/distance","./curve-accumulator"],function(require,e,v,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.displayTriangles=e.traceContours=e.triangulate=e.buildQuadTree=e.sampleImplicitDiagnostic=e.sampleImplicit=void 0;var w=5,D=Math.pow(2,14);function n(e,r){var i=Math.pow(2,-w),n=s(r,i),t=s(r,2*i),c=u(e,n,t),a=o(c.root,e,n);return{paddedDomain:n,rootDomain:t,quadTree:c,triangles:a,contours:b(a,e,n)}}function y(e,r,i){return{x:e,y:r,z:i}}function N(e,r,i){return{x:e,y:r,isZero:i}}function c(e,r,i){return{vertices:[e,r,i],visited:!1,next:void 0}}function s(e,r){var i=(1+r)*e.xmin-r*e.xmax,n=(1+r)*e.xmax-r*e.xmin;return{xmin:i,ymin:(1+r)*e.ymin-r*e.ymax,xmax:n,ymax:(1+r)*e.ymax-r*e.ymin,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function F(e,r){return{depth:e,vertices:r,children:void 0,center:void 0}}function I(e,r,i){e.center=j(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],r,i)}function u(e,r,i){var n,t,c,a,s,u,o=(n=e,c=(t=i).xmin,a=t.xmax,s=t.ymin,u=t.ymax,F(0,[Q(c,u,n),Q(a,u,n),Q(a,s,n),Q(c,s,n)])),l=[];(T=[]).push(o);var v,f,d,h,x,z,m,y,N,p,g,b,k=1,M=!0;e:for(;T.length;)for(var A,S=l,l=T,T=S;A=l.pop();)if(function(e,r,i){if(e.depth<w)return!0;if(function(e,r){return e.vertices[0].x<r.xmin||e.vertices[0].y>r.ymax||e.vertices[2].x>r.xmax||e.vertices[2].y<r.ymin}(e,i))return!1;if(function(e,r){if(e.vertices[1].x-e.vertices[0].x<10*r.xtolerance)return!0;if(e.vertices[0].y-e.vertices[3].y<10*r.ytolerance)return!0;return!1}(e,i))return!1;var n=e.vertices[0],t=e.vertices[1],c=e.vertices[2],a=e.vertices[3];if(isNaN(n.z)&&isNaN(t.z)&&isNaN(c.z)&&isNaN(a.z))return!1;if(isNaN(n.z)||isNaN(t.z)||isNaN(c.z)||isNaN(a.z))return!0;var s=j(n,t,c,a,r,i),u=_(n,t,r,i),o=_(t,c,r,i),l=_(c,a,r,i),v=_(a,n,r,i);return P(n,u,r)||P(t,u,r)||P(t,o,r)||P(c,o,r)||P(c,l,r)||P(a,l,r)||P(a,v,r)||P(n,v,r)||q(n,u,s,r,i)||q(u,t,s,r,i)||q(t,o,s,r,i)||q(o,c,s,r,i)||q(c,l,s,r,i)||q(l,a,s,r,i)||q(a,v,s,r,i)||q(v,n,s,r,i)}(A,e,r)){if(f=e,b=g=p=N=y=m=z=x=h=d=void 0,d=(v=A).depth+1,h=v.vertices[0],x=v.vertices[1],z=v.vertices[2],m=v.vertices[3],y=Z(h,x,f),N=Z(x,z,f),p=Z(z,m,f),g=Z(m,h,f),b=Z(h,z,f),v.children=[F(d,[h,y,b,g]),F(d,[y,x,N,b]),F(d,[b,N,z,p]),F(d,[g,b,p,m])],!A.children){M=!1;break e}if(T.push(A.children[0]),T.push(A.children[1]),T.push(A.children[2]),T.push(A.children[3]),D<=(k+=3)){M=!1;break e}}else I(A,e,r);for(var C=0;C<l.length;C++)I(l[C],e,r);for(C=0;C<T.length;C++)I(T[C],e,r);return{root:o,resolved:M}}function q(e,r,i,n,t){if(0<e.z==0<r.z&&0<r.z==0<i.z)return!1;var c,a,s,u;if(0<e.z==0<r.z){if(0<(c=Z(e,r,n)).z!=0<e.z)return!0;a=f(e,i,n,t),s=f(r,i,n,t),u=f(c,i,n,t)}else if(0<r.z==0<i.z){if(0<(c=Z(r,i,n)).z!=0<r.z)return!0;a=f(r,e,n,t),s=f(i,e,n,t),u=f(c,e,n,t)}else{if(0<(c=Z(i,e,n)).z!=0<i.z)return!0;a=f(i,r,n,t),s=f(e,r,n,t),u=f(c,r,n,t)}var o=t.xtolerance,l=t.ytolerance;return o*l<v.pointToSegment(l*u.x,o*u.y,l*a.x,o*a.y,l*s.x,o*s.y)}function P(e,r,i){if(isNaN(e.z)&&isNaN(r.z))return!1;if(isNaN(e.z)||isNaN(r.z))return 0<e.z||0<r.z;var n=4*Z(e,r,i).z-r.z-3*e.z,t=1e-4,c=(i((1-t)*e.x+t*r.x,(1-t)*e.y+t*r.y)-e.z)/t,a=Math.max(Math.abs(e.z),Math.abs(r.z));return Math.abs(n-c)>.125*a}function p(e,r){return e.x<r.xmin||e.x>r.xmax||e.y<r.ymin||e.y>r.ymax}function Q(e,r,i){return y(e,r,i(e,r))}function Z(e,r,i){return Q(.5*(e.x+r.x),.5*(e.y+r.y),i)}function _(e,r,i,n){if(p(e,n)||p(r,n))return Z(e,r,i);if(isNaN(e.z)||isNaN(r.z))return function(e,r,i,n){if(isNaN(e.z)===isNaN(r.z))return Z(e,r,i);{var t;isNaN(e.z)&&(t=e,e=r,r=t)}var c=e.x,a=r.x,s=e.y,u=r.y,o=e.z,l=n.xtolerance,v=n.ytolerance;for(;Math.abs(c-a)>l||Math.abs(s-u)>v;){var f=.5*(c+a),d=.5*(s+u),h=i(f,d);isNaN(h)===isNaN(o)?(c=f,s=d,o=h):(a=f,u=d)}return y(c,s,o)}(e,r,i,n);if(0<e.z!=0<r.z)return Z(e,r,i);var t=.01,c=i(.99*e.x+t*r.x,.99*e.y+t*r.y)-e.z,a=r.z-i(t*e.x+.99*r.x,t*e.y+.99*r.y);return isNaN(c)||isNaN(a)||0<c==0<a?Z(e,r,i):g(y(e.x,e.y,c),y(r.x,r.y,a),i)}function j(e,r,i,n,t,c){var a=_(e,i,t,c);return 0<e.z==0<i.z&&0<a.z!=0<e.z?a:(a=_(r,n,t,c),0<r.z==0<n.z&&0<a.z!=0<r.z?a:Z(e,i,t))}function g(e,r,i){if(isNaN(e.z))return r;if(isNaN(r.z))return e;if(isFinite(e.z)||isFinite(r.z)){if(isFinite(e.z)){if(isFinite(r.z)){var n=1-e.z/r.z,t=1-r.z/e.z;return Q(e.x/n+r.x/t,e.y/n+r.y/t,i)}return e}return r}return Z(e,r,i)}function f(e,r,i,n){var t=e.x,c=r.x,a=e.y,s=r.y,u=e.z,o=r.z,l=n.xtolerance,v=n.ytolerance;if(p(e,n)||p(r,n)){var f=Z(e,r,i);return N(f.x,f.y,!1)}for(;Math.abs(t-c)>l||Math.abs(a-s)>v;){var d=.5*(t+c),h=.5*(a+s),x=i(d,h);0<x==0<u?(t=d,a=h,u=x):(c=d,s=h,o=x)}if(isNaN(u))return N(c,s,!1);if(isNaN(o))return N(t,a,!1);var z=g(y(t,a,u),y(c,s,o),i),m=0===u||0===o||0===z.z||z.z>=u==o>=z.z&&Math.abs(z.z)<1e250;return N(z.x,z.y,m)}function o(e,r,i){var n={triangles:[],edgeCache:{},domain:i,fn:r};return function e(r,i){if(!r.children)return;e(r.children[0],i);e(r.children[1],i);e(r.children[2],i);e(r.children[3],i);t(r.children[0],r.children[1],i);t(r.children[3],r.children[2],i);l(r.children[1],r.children[2],i);l(r.children[0],r.children[3],i)}(e,n),n.triangles}function t(e,r,i){e.children&&r.children?(t(e.children[1],r.children[0],i),t(e.children[2],r.children[3],i)):e.children?(t(e.children[1],r,i),t(e.children[2],r,i)):r.children?(t(e,r.children[0],i),t(e,r.children[3],i)):function(e,r,i){if(!e.center||!r.center)return;var n,t;t=e.depth>=r.depth?(n=_(e.vertices[1],e.vertices[2],i.fn,i.domain),d(e.vertices[1],r.center,e.vertices[2],e.center,n)):(n=_(r.vertices[0],r.vertices[3],i.fn,i.domain),d(r.vertices[0],r.center,r.vertices[3],e.center,n));z(t,i.edgeCache,i.domain);for(var c=0;c<4;c++)i.triangles.push(t[c])}(e,r,i)}function l(e,r,i){e.children&&r.children?(l(e.children[2],r.children[1],i),l(e.children[3],r.children[0],i)):e.children?(l(e.children[2],r,i),l(e.children[3],r,i)):r.children?(l(e,r.children[1],i),l(e,r.children[0],i)):function(e,r,i){if(!e.center||!r.center)return;var n,t;t=e.depth>=r.depth?(n=_(e.vertices[3],e.vertices[2],i.fn,i.domain),d(e.vertices[2],r.center,e.vertices[3],e.center,n)):(n=_(r.vertices[1],r.vertices[0],i.fn,i.domain),d(r.vertices[1],r.center,r.vertices[0],e.center,n));z(t,i.edgeCache,i.domain);for(var c=0;c<4;c++)i.triangles.push(t[c])}(e,r,i)}function d(e,r,i,n,t){return[c(e,t,r),c(r,t,i),c(i,t,n),c(n,t,e)]}function x(e,r,i){return 0<e.z&&!p(e,i)&&(!(0<r.z)||p(r,i))}function h(e,r){return e.x+","+e.y+","+r.x+","+r.y}function z(e,r,i){m(e[0],e[1],e[2],h(e[1].vertices[2],e[1].vertices[0]),r,i),m(e[1],e[2],e[3],h(e[2].vertices[0],e[2].vertices[2]),r,i),m(e[2],e[3],e[0],h(e[3].vertices[2],e[3].vertices[0]),r,i),m(e[3],e[0],e[1],h(e[0].vertices[0],e[0].vertices[2]),r,i)}function m(e,r,i,n,t,c){var a,s,u,o,l,v,f=r.vertices[0],d=r.vertices[1],h=r.vertices[2];x(d,h,c)&&(r.next=i),x(f,d,c)&&(r.next=e),x(h,f,c)&&(a=r,(u=t)[s=n]?a.next=u[s]:u[s]=a),x(f,h,c)&&(o=r,(v=t)[l=n]?v[l].next=o:v[l]=o)}function b(e,r,i){for(var n={fillAccumulator:new a.Accumulator(i),strokeAccumulator:new a.Accumulator(i),fn:r,domain:i},t=0;t<e.length;t++){var c=e[t];c.next&&!c.visited&&function(e,r){for(;;){var i=e.vertices[0],n=e.vertices[1],t=e.vertices[2];if(k(i,n,r),k(n,t,r),k(t,i,r),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}r.strokeAccumulator.breakSegment(),r.fillAccumulator.breakSegment()}(c,n)}return{strokeSegments:n.strokeAccumulator.finish().segments,fillSegments:n.fillAccumulator.finish().segments}}function k(e,r,i){var n;x(e,r,i.domain)&&(n=f(e,r,i.fn,i.domain),i.fillAccumulator.addPoint([n.x,n.y]),n.isZero?i.strokeAccumulator.addPoint([n.x,n.y]):i.strokeAccumulator.breakSegment())}e.sampleImplicit=function(e,r){var i=n(e,r);return{segments:i.contours.strokeSegments,fillSegments:i.contours.fillSegments,resolved:i.quadTree.resolved}},e.sampleImplicitDiagnostic=n,e.buildQuadTree=u,e.triangulate=o,e.traceContours=b,e.displayTriangles=function(e){for(var r=[],i=0;i<e.length;i++){var n=e[i];r.push([n.vertices[0].x,n.vertices[0].y,n.vertices[1].x,n.vertices[1].y,n.vertices[2].x,n.vertices[2].y,n.vertices[0].x,n.vertices[0].y])}return r}});
define('core/math/poi-finding-accumulator',["require","exports","core/math/workerconfig","tslib","./curve-accumulator","./poi"],function(require,e,t,i,r,o){"use strict";function s(e){return Math.abs(e)<5e-8}Object.defineProperty(e,"__esModule",{value:!0});var u,f=(u=r.Accumulator,i.__extends(h,u),h.prototype.getPOI=function(){return t.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},h.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},h.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},h.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||e<this.domain.min||e>this.domain.max||isNaN(e)},h.prototype.addPoint=function(e){0===this.segment.length&&s(e[1])&&(this.poiData.zeros.x.push(e[0]),this.poiData.zeros.y.push(e[1])),this.updateZeroBuffer(e),this.updateExtremumBuffer(e),u.prototype.addPoint.call(this,e)},h.prototype.updateZeroBuffer=function(e){if(this.fn)if(isFinite(e[0])&&isFinite(e[1]))switch(this.zeroBuffer.length){case 0:if(s(e[1]))return;return void this.zeroBuffer.push(e);case 1:return 0===e[1]||(0<e[1]==0<this.zeroBuffer[0][1]||(t=o.bisectZero(this.zeroBuffer[0][0],this.zeroBuffer[0][1],e[0],e[1],this.fn))&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0),void this.zeroBuffer.push(e);case 2:if(0===e[1])return;return 0<e[1]==0<this.zeroBuffer[0][1]||(t=o.flatCenter(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],e[0],e[1],this.fn))&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e);var t}else this.zeroBuffer.length=0},h.prototype.updateExtremumBuffer=function(e){if(this.fn)if(isFinite(e[0])&&isFinite(e[1]))switch(this.extremumBuffer.length){case 0:return void this.extremumBuffer.push(e);case 1:return e[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),void this.extremumBuffer.push(e);case 2:return e[1]===this.extremumBuffer[1][1]||(e[1]>this.extremumBuffer[1][1]==this.extremumBuffer[1][1]>this.extremumBuffer[0][1]||(t=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1]))&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1]),!o.bisectJump(this.extremumBuffer[0][0],this.extremumBuffer[0][1],t[0],t[1],e[0],e[1],this.fn,this.ytolerance)&&t[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=t)),this.extremumBuffer.shift()),void this.extremumBuffer.push(e);case 3:if(e[1]===this.extremumBuffer[1][1])return;if(e[1]>this.extremumBuffer[1][1]==this.extremumBuffer[1][1]>this.extremumBuffer[0][1])return this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e);var t=void 0,i=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),r=this.fn(i);return(t=r===this.extremumBuffer[1][1]?o.flatCenter(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1],this.fn):this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],i,r,this.extremumBuffer[2][0],this.extremumBuffer[2][1]))&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}else this.zeroBuffer.length=0},h.prototype.bisectExtremumUsingDerivative=function(e,t,i,r,s,u){var f,h,n,m;if(this.fn)return this.derivative&&(h=this.derivative(e),n=this.derivative(s),isNaN(h)||isNaN(n)||h<0==n<0||(m=o.bisectZero(e,h,s,n,this.derivative))&&(f=[m[0],this.fn(m[0])])),f=f||o.bisectExtremum(e,t,i,r,s,u,this.fn)},h.prototype.breakSegment=function(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),2<this.segment.length&&(this.segments.push(this.segment),s(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]},h.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},h.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},h);function h(e,t,i){var r=u.call(this,e)||this;return r.domain=e,r.fn=t,r.derivative=i,r.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},r.zeroBuffer=[],r.extremumBuffer=[],r}e.default=f});
define('core/math/plotter',["require","exports","tslib","core/math/distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","core/types/graphmode","./domaintypes"],function(require,e,t,F,v,b,o,a,k,g){"use strict";function A(e,i){var n=new a.default(i),t=e[0]+i.min*e[1],r=e[0]+i.max*e[1];return isFinite(t)&&isFinite(r)&&(n.addPoint([i.min,t]),n.addPoint([i.max,r]),n.addLinearZero(e),n.addLinearIntercept(e)),n.finish()}function I(e,i){var n=e(i);return{segments:[t.__spreadArrays(n,n)],resolved:!0}}function x(e,i,n){var t=n.fn,r=n.jumpTolerance,a=e[0],o=e[1],s=i[0],m=i[1],c=F.mean(a,s),l=t(c);return v.bisectJump(a,o,c,l,s,m,t,r)}Object.defineProperty(e,"__esModule",{value:!0});var y=function(e,i,n){var t=n.fn,r=n.jumpTolerance,a=n.accumulator;if(!isFinite(r)||r<=0)return i;var o=x(e,i,n);if(!o)return i;for(var s=(i[0]-e[0])/10,m=[-s,s],c=i,l=0;l<m.length;l++){var u=e[0]+m[l],p=t(u);isFinite(p)||(u=e[0],p=e[1],u=e[0],p=e[1]);var d=i[0]+m[l],f=t(d);if(isFinite(f)?c=[d,f]:(d=i[0],f=i[1]),x([u,p],[d,f],n)){var h=o[0],v=o[1];return a.addPoint(h),a.breakSegment(),a.addPoint(v),i}}return c},w=function(e,i,n){this.derivative=n,this.accumulator=new a.default(i,e,n),this.fn=e,this.jumpTolerance=i.ytolerance||i.tolerance||0};function P(e,i,n){var t=i,r=e(t);return isFinite(r)||(r=e(t=i+n)),isFinite(r)||(r=e(t=i-n)),[t,r]}function R(e,i,n){var t,r,a,o,s=new w(e,i,n),m=i.step/10,c=i.min,l=P(e,c,m),u=l[0],p=l[1],d=[u,p];isFinite(p)&&s.accumulator.addPoint([u,p]);for(var f=Math.ceil((i.max-i.min)/i.step),h=1;h<=f;h++)u=(t=P(e,(f-h)/f*i.min+h/f*i.max,m))[0],p=t[1],isFinite(p)&&isFinite(d[1])?(u=(r=y(d,[u,p],s))[0],p=r[1],s.accumulator.addPoint([u,p])):isFinite(p)&&!isFinite(d[1])?(o=v.bisectFinite(d[0],d[1],u,p,e))&&(o[0]!==u&&s.accumulator.addPoint(o),u=(a=y(o,[u,p],s))[0],p=a[1],s.accumulator.addPoint([u,p])):!isFinite(p)&&isFinite(d[1])&&(o=v.bisectFinite(d[0],d[1],u,p,e))&&((o=y(d,o,s))[0]!==d[0]&&s.accumulator.addPoint(o),s.accumulator.breakSegment()),d=[u,p];return s.accumulator.finish()}function M(e,i,l,u){var n,t,r,p=i.min,a=i.max-i.min,d=i.xtolerance&&i.ytolerance?Math.min(i.xtolerance,i.ytolerance):i.tolerance?i.tolerance:0,o=Math.floor(a/(Math.PI/l));function s(e,i){var n=i%2==0?1:-1;if(u||-1!=n){for(var t=i*(Math.PI/l),r=[p,p+1,p+2,p+3],a=!1,o=0,s=r.length;o<s;o++){var m=e(r[o]),c=e(r[o]+t);if(isFinite(m)&&isFinite(c)&&(a=!0),isFinite(m)!==isFinite(c)||Math.abs(m-n*c)>d)return}if(a)return 1}}for(n=1;n<=o;n++)if(s(e,n)){for(r=n,t=2;t*n<=o;t++)s(e,t*n)||(r=void 0);if(r)break}return r?r*(Math.PI/l):null}function u(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function S(e,i){return i.map=u,R(e,i)}function D(i,e){if(e.max<e.min)return{segments:[],resolved:!0};var n,t=new o.Accumulator(e),r=e.min,a=i(r);return isFinite(a[0])&&isFinite(a[1])&&t.addPoint(a),function(e,i){for(var n=e.min,t=e.max,r=e.step,a=t-n,o=Math.ceil(a/r),s=a/o,m=0;m<o;m++)i(n+m*s);i(t)}(e,function(e){n=i(e),E(i,r,a,e,n,10,t),r=e,a=n}),t.finish()}function E(e,i,n,t,r,a,o){if(t!==i){var s=o.xtolerance,m=o.ytolerance,c=o.ztolerance,l=F.mean(i,t),u=e(l),p=isFinite(n[0])&&isFinite(n[1])&&(2===n.length||isFinite(n[2])),d=isFinite(r[0])&&isFinite(r[1])&&(2===r.length||isFinite(r[2])),f=isFinite(u[0])&&isFinite(u[1])&&(2===u.length||isFinite(u[2]));if(0===a||l===i||l===t)return o.breakSegment(),void(d&&o.addPoint(r));if(p||d)if(p===d){if(p&&f&&d){var h=F.pointToSegmentParameter(u[0],u[1],u[2]||0,n[0],n[1],n[2]||0,r[0],r[1],r[2]||0);if(.2<h&&h<.8&&Math.abs(u[0]-(n[0]+h*(r[0]-n[0])))<=s&&Math.abs(u[1]-(n[1]+h*(r[1]-n[1])))<=m&&(2===n.length||Math.abs(u[2]-(n[2]+h*(r[2]-n[2])))<=c))return void o.addPoint(r)}n[0]===u[0]&&n[1]===u[1]||E(e,i,n,l,u,a-1,o),r[0]===u[0]&&r[1]===u[1]||E(e,l,u,t,r,a-1,o)}else{for(var v=i,x=t,g=n,y=r;i!==l&&l!==t;)f==p?(i=l,n=u,p=f):(t=l,r=u,d=f),u=e(l=i+(t-i)/2),f=isFinite(u[0])&&isFinite(u[1])&&(2===u.length||isFinite(u[2]));p?(E(e,v,g,i,n,a-1,o),o.breakSegment()):(o.breakSegment(),o.addPoint(r),E(e,t,r,x,y,a-1,o))}}}function _(e,i,n){var t=e.viewport.xmin,r=e.viewport.xmax,a=e.viewport.ymin,o=e.viewport.ymax,s=e.trigAngleMultiplier||1,m=e.oversample||4,c=1/m*(r-t)/e.screen.width,l=1/m*(o-a)/e.screen.height,u=i.domainBound;switch(i.graphMode){case k.X:switch((f=g.intersectDomains(g.knownDomain([a,o]),u)).type){case"empty":return!1;case"known":a=f.bounds[0],o=f.bounds[1]}d={min:a,max:o,xtolerance:l,ytolerance:c,step:l};break;case k.Y:switch((f=g.intersectDomains(g.knownDomain([t,r]),u)).type){case"empty":return!1;case"known":t=f.bounds[0],r=f.bounds[1]}d={min:t,max:r,xtolerance:c,ytolerance:l,step:c};break;case k.POLAR:if(!i.domain)throw new Error("Expected polar graph to have domain");var p,d={min:i.domain.min,max:i.domain.max,step:2*Math.PI/s/1e3,tolerance:Math.min(c,l)};i.domain.isExplicit||(p=M(n,d,s,"="===i.operator))&&(d.max=d.min+p),d.step=Math.max(d.step,(d.max-d.min)/11999);break;case k.PARAMETRIC:case k.PARAMETRIC_CURVE_3D:var f,h=i.domain?i.domain.min:0,v=i.domain?i.domain.max:1,x=i.domain?i.domain.step:.01;switch((f=g.intersectDomains(g.knownDomain([h,v]),u)).type){case"empty":return!1;case"known":h=f.bounds[0],v=f.bounds[1]}d={min:h,max:v,step:x,xtolerance:c,ytolerance:l,ztolerance:Math.min(c,l)};break;case k.IMPLICIT:d={xmin:t,xmax:r,ymin:a,ymax:o,xtolerance:c,ytolerance:l};break;case k.Z_3D:return{xmin:-10,xmax:10,ymin:-10,ymax:10};default:return!1}return d}e.default={sampleXYNaive:function(e,i){for(var n,t=new a.default(i,e),r=i.min;r<=i.max+i.step/2;r+=i.step)n=e(r),isFinite(n)?t.addPoint([r,n]):t.breakSegment();return t.finish()},sampleLinear:A,sampleXY:R,findPiPeriod:M,samplePolar:S,sampleParametricRecursive:D,subsampleParametricRecursive:E,validateViewState:function(e){if(!e)return!1;var i=e.viewport.xmin,n=e.viewport.xmax,t=e.viewport.ymin,r=e.viewport.ymax;return!(!isFinite(i)||!isFinite(n)||n<=i)&&(!(!isFinite(t)||!isFinite(r)||r<=t)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))},computeDomain:_,computeGraphData:function(e){var i,n,t,r,a,o,s,m=e.viewState,c=e.graphInfo,l=e.compiled,u=e.derivative,p=e.discrete,d=e.maxOverride,f=l.fn,h=_(m,c,f),v=c.graphMode;if(h){switch(v){case k.X:case k.Y:var x,g,y,F,w=u?u.fn:void 0;F=p?(x=h.min,g=h.max,y=h.step,function(e){for(var i=e.fn,n=e.domain,t=n.min,r=n.max,a=Math.floor(t),o=Math.ceil(r),s=[],m=a;m<=o;m++){var c=i(m);isFinite(m)&&isFinite(c)&&s.push([m,c])}return{segments:s,resolved:!0}}({fn:f,domain:{min:Math.max(x,0),max:void 0!==d?Math.min(d,g):g,step:y}})):c.isLinear?A(c.linearCoefficients,h):R(f,h,w);break;case k.POLAR:F=S(f,h);break;case k.IMPLICIT:F=b.sampleImplicit(f,h);break;case k.PARAMETRIC:h.step||(h.step=(h.max-h.min)/1e3),F=h.max===h.min?I(f,h.min):c.isLinear?(n=c.linearCoefficients,t=h,r=A(n[0],t),a=A(n[1],t),r.segments.length&&a.segments.length&&4===r.segments[0].length&&4===a.segments[0].length?{segments:[[r.segments[0][1],a.segments[0][1],r.segments[0][3],a.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}):D(f,h);break;case k.PARAMETRIC_CURVE_3D:return h.step||(h.step=(h.max-h.min)/1e3),F=h.max===h.min?I(f,h.min):D(f,h),{graphMode:k.PARAMETRIC_CURVE_3D,segments:F.segments,cacheKey:l.source+":"+JSON.stringify(h),color:c.color,style:"dummy"};case k.Z_3D:return{meshData:function(e,i){for(var n=e.fn,t=i.xmin,r=i.xmax,a=i.ymin,o=(r-t)/30,s=(i.ymax-a)/30,m=[],c=[],l=[],u=o/1e3,p=s/1e3,d=0;d<30;d++)for(var f=0;f<30;f++){var h=t+d*o,v=a+f*s,x=n(h,v);m.push(h,v,x);var g=(n(h+u,v)-x)*p,y=(n(h,v+p)-x)*u,F=-u*p,w=Math.sqrt(g*g+y*y+F*F);c.push(g/w,y/w,F/w)}for(d=0;d<29;d++)for(f=0;f<29;f++){var P=30*f+d,M=30*f+d+1,b=30*(f+1)+d,k=30*(f+1)+d+1;l.push(P,b,M),l.push(b,k,M)}return{cacheKey:e.source+":"+JSON.stringify(i),positions:new Float32Array(m),normals:new Float32Array(c),faces:new Int16Array(l)}}(l,h),color:c.color,graphMode:k.Z_3D,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},compiled:l,style:"dummy"};default:throw new Error("Programming Error: unexpected graphmode "+v)}i=F.poi}else F={segments:[],resolved:!0};if((!i||250<i.zeros.x.length+i.extrema.x.length+i.intercept.x.length)&&(i={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),v===k.X)for(var P in i){i.hasOwnProperty(P)&&(s=i[o=P].y,i[o].y=i[o].x,i[o].x=s)}var M={segments:F.segments,resolved:F.resolved,graphMode:v,color:c.color,style:p?c.pointStyle:c.lineStyle,lineWidth:c.lineWidth,lineOpacity:c.lineOpacity,operator:c.operator,poi:i,compiled:l};return v===k.POLAR&&(M.sampledDomain={min:h.min,max:h.max,step:h.step}),F.fillSegments&&(M.fillSegments=F.fillSegments),M},polygonsFromSegments:function(e,i,n){for(var t=function(e){var i=e[e.length-1];return i[i.length-2]},r=[],a=0,o=0,s=[],m=[],c=-1/0,l=-1/0;;){if(c<=l){if(a>=i.length)break;m.push(i[a++])}if(l<=c){if(o>=e.length)break;s.push(e[o++])}c=t(m),l=t(s),F.approx(c,l,4)&&(r.push(function(e,i,n){var t,r,a,o,s=[],m=null;switch(n){case k.POLAR:m=u;break;case k.X:m=function(e){return[e[1],e[0]]}}for(t=0;t<e.length;t++)for(o=e[t],r=0;r<o.length;r+=2)a=[o[r],o[r+1]],m&&(a=m(a)),s.push(a[0],a[1]);for(t=i.length-1;0<=t;t--)for(r=(o=i[t]).length-2;0<=r;r-=2)a=[o[r],o[r+1]],m&&(a=m(a)),s.push(a[0],a[1]);return s}(s,m,n)),m=[],s=[],l=c=Math.max(c,l))}return r}}});
define('core/math/cdf-branches',["require","exports","tslib","core/lib/deepCopy","core/math/plotter","core/math/domaintypes","core/types/styles"],function(require,e,b,p,y,v,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeCDFTopBranches=void 0;function _(e){var i=e.viewState,t=e.graphInfo,d=e.compiled,o=e.derivative,a=e.bounds,n=e.included,r=e.discrete,s=p.default(t),c=v.intersectDomains(t.domainBound,v.knownDomain(a));if("known"===c.type)return s.domainBound=c,r?s.pointStyle=n?u.PointStyle.POINT:u.PointStyle.OPEN:s.lineStyle=u.LineStyle.SOLID,y.default.computeGraphData({graphInfo:s,viewState:i,compiled:d,derivative:o,discrete:r})}e.makeCDFTopBranches=function(e){var i,t,d,o,a,n,r,s,c,p,v=e.viewState,u=e.graphInfo,l=e.compiled,h=e.derivative,m=e.bounds,f=e.discrete,S=e.maxOverride,g=m[0],w=m[1],I=[];return f?(g=Math.ceil(g),w=Math.floor(w),t=void 0!==S?S:1/0,g===-1/0&&t<=w?(i=_({bounds:[g,t],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(i)):g===-1/0&&w<1/0?(i=_({bounds:[g,w],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(i),I.push(_({bounds:[w+1,t],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}))):-1/0<g&&t<=w?(i=_({bounds:[g,t],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(_({bounds:[-1/0,g-1],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f})),I.push(i)):(i=_({bounds:[g,w],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),d=_({bounds:[-1/0,g-1],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),o=_({bounds:[w+1,t],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(i),a=void 0,d&&o&&(r=o,s=(n=d).segments,c=r.segments,p=b.__spreadArrays(s,c),a=b.__assign(b.__assign({},n),{segments:p}),I.push(a)))):(i=_({bounds:[g,w],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(y.default.computeGraphData({viewState:v,graphInfo:u,compiled:l,derivative:h}))),{cdfTopBranch:i,topBranches:I}}});
define('core/math/copy-defined-pois',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(e){for(var r=[],t=[],u=e.length,n=0;n<u;n++)r.push(e[n][0]),t.push(e[n][1]);return{defined:{x:r,y:t}}}});
define('core/types/opacity',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HIGH=e.DEFAULT=e.LOW=void 0,e.LOW=.2,e.DEFAULT=.4,e.HIGH=.8});
define('core/types/slider-loop-modes',["require","exports"],function(require,e){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.getSliderIcon=e.SliderLoopMode=void 0,(r=o=e.SliderLoopMode||(e.SliderLoopMode={})).LOOP_FORWARD_REVERSE="LOOP_FORWARD_REVERSE",r.LOOP_FORWARD="LOOP_FORWARD",r.PLAY_ONCE="PLAY_ONCE",r.PLAY_INDEFINITELY="PLAY_INDEFINITELY",e.getSliderIcon=function(e){switch(e){case o.LOOP_FORWARD:return"dcg-icon-arrow-one-way";case o.LOOP_FORWARD_REVERSE:return"dcg-icon-arrow-two-way";case o.PLAY_ONCE:return"dcg-icon-arrow-once";case o.PLAY_INDEFINITELY:return"dcg-icon-arrow-infinite"}}});
define('core/lib/default-spec',["require","exports","underscore","core/lib/deepCopy"],function(require,e,u,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.populateDefaults=e.stripDefaultsAndMaybeReturnUndefined=e.stripDefaults=void 0,e.stripDefaults=function(e,r){var t={};for(var n in r)r.hasOwnProperty(n)&&(u.isEqual(e[n],r[n])||(t[n]=r[n]));return t},e.stripDefaultsAndMaybeReturnUndefined=function(e,r){var t=void 0,n={};for(var a in r)r.hasOwnProperty(a)&&(u.isEqual(e[a],r[a])||(n[a]=r[a],t=n));return t},e.populateDefaults=function(e,r){r=r||{};var t={};for(var n in e)e.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(t[n]=a.default(e[n]));for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);return t}});
define('core/lib/copy-properties',["require","exports","core/lib/deepCopy"],function(require,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeTrueMap=r.extractPropertiesLike=r.copyAllProperties=r.copyProperties=void 0,r.copyProperties=function(r){var e=r.from,o=r.to,t=r.props;for(var i in t)t[i]&&e.hasOwnProperty(i)&&(o[i]=n.default(e[i]))},r.copyAllProperties=function(r,e){for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])},r.extractPropertiesLike=function(r,e){var o={};for(var t in e)e.hasOwnProperty(t)&&(o[t]=r[t]);return o},r.makeTrueMap=function(r){var e={};for(var o in r)r.hasOwnProperty(o)&&(e[o]=!0);return e}});
define('core/graphing-calc/json/expression',["require","exports","tslib","core/types/opacity","core/types/styles","core/lib/dragmode","core/types/slider-loop-modes","core/types/label-sizes","core/types/label-orientations","core/lib/default-spec","../../lib/copy-properties"],function(require,t,r,e,i,a,l,s,n,o,d){"use strict";var L,D;function c(e){return d.extractPropertiesLike(e,t.DEFAULTS_DYNAMIC)}Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.areDynamicPropertiesStrictEqual=t.extractDynamicProperties=t.stripDefaults=t.inflateDefaults=t.SLIDER_DEFAULTS=t.DEFAULTS=t.DEFAULTS_DYNAMIC=t.DEFAULT_SLIDER_PERIOD=t.EditableLabelMode=t.CLICKABLEINFO_DEFAULTS=t.VIZ_DEFAULTS=t.CDF_DEFAULTS=void 0,t.CDF_DEFAULTS={show:!1,min:"",max:""},t.VIZ_DEFAULTS={breadth:"",axisOffset:"",alignedAxis:"x",showBoxplotOutliers:!0,binAlignment:"center",dotplotXMode:"exact",dotplotSize:"medium",histogramMode:""},t.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",rules:[{id:"1",expression:"",assignment:""}]},(D=L=t.EditableLabelMode||(t.EditableLabelMode={})).None="NONE",D.Math="MATH",D.Text="TEXT",t.DEFAULT_SLIDER_PERIOD=4e3,t.DEFAULTS_DYNAMIC={polarDomain:{min:"",max:""},parametricDomain:{min:"",max:""},cdf:t.CDF_DEFAULTS,colorLatex:"",fillOpacity:""+e.DEFAULT,lineOpacity:"",pointOpacity:"",lineWidth:"",vizProps:t.VIZ_DEFAULTS,clickableInfo:t.CLICKABLEINFO_DEFAULTS},t.DEFAULTS=r.__assign(r.__assign({folderId:"",latex:"",color:"",showLabel:!1,label:"",hidden:!1,secret:!1,dragMode:a.DragMode.AUTO,labelSize:s.LabelSize.MEDIUM,labelOrientation:n.LabelOrientation.DEFAULT,verticalLabel:!1,suppressTextOutline:!1,interactiveLabel:!1,editableLabelMode:L.None,residualVariable:"",isLogModeRegression:!1,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID,regressionParameters:{},displayEvaluationAsFraction:!1,slider:{}},t.DEFAULTS_DYNAMIC),{points:void 0,lines:void 0,fill:void 0}),t.SLIDER_DEFAULTS={hardMin:!1,hardMax:!1,animationPeriod:t.DEFAULT_SLIDER_PERIOD,loopMode:l.SliderLoopMode.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:"-10",max:"10",step:""},t.inflateDefaults=function(e){return r.__assign(r.__assign(r.__assign({},t.DEFAULTS),e),{slider:r.__assign(r.__assign({},t.SLIDER_DEFAULTS),e.slider),cdf:r.__assign(r.__assign({},t.CDF_DEFAULTS),e.cdf),vizProps:r.__assign(r.__assign({},t.VIZ_DEFAULTS),e.vizProps),clickableInfo:r.__assign(r.__assign({},t.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})},t.stripDefaults=function(e){var i=o.stripDefaults(t.DEFAULTS,r.__assign(r.__assign({},e),{slider:o.stripDefaults(t.SLIDER_DEFAULTS,e.slider)})),a=o.stripDefaultsAndMaybeReturnUndefined(t.CDF_DEFAULTS,e.cdf);void 0===a?delete i.cdf:i.cdf=a;var l=o.stripDefaultsAndMaybeReturnUndefined(t.VIZ_DEFAULTS,e.vizProps);void 0===l?delete i.vizProps:i.vizProps=l;var s=o.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===s?delete i.clickableInfo:i.clickableInfo=s,i},t.extractDynamicProperties=c,t.areDynamicPropertiesStrictEqual=function(e,i){for(var a in t.DEFAULTS_DYNAMIC)if(t.DEFAULTS_DYNAMIC.hasOwnProperty(a)&&e[a]!==i[a])return!1;return!0},t.computeParsableState=function(e){return r.__assign({type:"statement",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,points:e.points,lines:e.lines,pointStyle:e.pointStyle,lineStyle:e.lineStyle,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,verticalLabel:e.verticalLabel,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,shouldGraph:e.hidden,slider:{min:e.slider.hardMin?e.slider.min:"",max:e.slider.hardMax?e.slider.max:"",softMin:e.slider.hardMin?"":e.slider.min,softMax:e.slider.hardMax?"":e.slider.max,step:e.slider.step,isPlayingOnce:e.slider.isPlaying&&e.slider.loopMode===l.SliderLoopMode.PLAY_ONCE}},c(e))}});
define('core/math/features/graph',["require","exports","parsenodes","core/math/comparators","core/math/builtin","tslib","core/math/plotter","core/types/graphmode","core/lib/dragmode","core/math/expression-types","core/math/cdf-branches","core/math/copy-defined-pois","core/math/distribution-spec","core/graphing-calc/json/expression","core/types/opacity","core/lib/color-helpers","core/types/styles","core/math/types"],function(require,e,v,D,S,A,V,_,B,f,F,Y,w,y,b,z,E,x){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var M=v.List;function G(e,a){for(var t=1/0,s=-1/0,r=1/0,i=-1/0,o=0,n=a;o<n.length;o++)for(var l=n[o],p=0;p<l.length;p+=2){var h=l[p],u=l[p+1];h<t&&(t=h),s<h&&(s=h),u<r&&(r=u),i<u&&(i=u)}if(isFinite(t)&&isFinite(r))return{type:e,xmin:t,ymin:r,xmax:s,ymax:i}}function O(e,a,t){var s={};t-=.5*a;for(var r=e.length-1;0<=r;r--){var i=e[r],o=Math.floor((i-t)/a);s[o]?s[o].data.push(i):s[o]={id:o,data:[i],min:o*a+t,max:o*a+t+a,center:o*a+t+a/2}}return s}v.Base.prototype._graph=function(I,e,P,N){var C=this;if(e instanceof v.SolvedEquation)return this._graph(I,e._expression,P,N);function a(e){var a=e.editableLabelMode;return a===y.EditableLabelMode.Text||a===y.EditableLabelMode.Math}var t=e.getExpressionType(N.graphMode,e.valueType),s=f.getReconciledExpressionProps(t,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(N.graphMode){case _.XYPOINT_MOVABLE:var r=X([e.asArray()]),i=this.userData.shouldGraph&&s.points,o=this.userData.showLabel&&!i;return i?[{segments:[r],graphMode:N.graphMode,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:a(this.userData),labels:this.computedLabels||[],poi:Y.default(r),movablePointInfo:[]}]:o?[{segments:[r],graphMode:_.XYPOINT,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:a(this.userData),labels:this.computedLabels||[],poi:Y.default(r),showPoint:!1}]:[];case _.XYPOINT:var n=[],l=M.wrap(e).mapElements(I,function(e){return e.asArray()}),p=this.userData.shouldGraph&&s.points,h=this.userData.shouldGraph&&s.lines,u=this.userData.showLabel&&!p&&!h;return(this.userData.showLabel||p)&&n.push({segments:[X(l)],graphMode:N.graphMode,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:p,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,interactiveLabel:!!this.userData.interactiveLabel,editableLabel:a(this.userData),nakedLabel:u,labels:this.computedLabels||[],poi:Y.default(l)}),h&&n.push({segments:L(l),graphMode:_.PARAMETRIC,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity,poi:{}}),n;case _.PARAMETRIC:case _.PARAMETRIC_CURVE_3D:var g=this.userData,m=this.metaData,d=[],n=M.wrap(e).mapElements(I,function(e,a){if(0===e.getDependencies().length){var t=X([e.asArray()]);return{segments:[t],graphMode:_.XYPOINT,color:z.getDisplayColor(g,m),style:g.lineStyle,lineWidth:C.metaData.computedLineWidth,lineOpacity:C.metaData.computedLineOpacity,poi:Y.default(t)}}var s=e.getCompiledFunction(),r=C.getGraphInfo(I,e,a);return r.graphMode=N.graphMode,r.domain={min:C.metaData.evaluatedDomainMin,max:C.metaData.evaluatedDomainMax},r.style=C.userData.lineStyle,r.lineWidth=C.metaData.computedLineWidth,r.lineOpacity=C.metaData.computedLineOpacity,V.default.computeGraphData({viewState:P,graphInfo:r,compiled:s})});if(s.fill){if(n.forEach(function(e){d.push({segments:e.segments,color:z.getDisplayColor(g,m),fillOpacity:C.metaData.computedFillOpacity,graphMode:_.POLYGONFILL,poi:{}})}),!s.lines)return d;n=n.concat(d)}return n;case _.X:case _.Y:case _.IMPLICIT:case _.POLAR:case _.Z_3D:var T=[],E=e.valueType===x.Number;return M.wrap(e).eachElement(I,function(e,a){var t,s=N.graphMode===_.IMPLICIT||N.graphMode===_.Z_3D?e.getCompiledFunction(["x","y"]):e.getCompiledFunction(),r=w.getFunctionSpecFromTree(C),i=r&&r.discrete,o=function(e,a){if(e){var t,s,r,i,o,n,l,p=e.discrete?"discreteDistribution":"continuousDistribution";if("binomialdist"===e.symbol)return t=a.args[1].asValue(),s=2<a.args.length?a.args[2].asValue():.5,{type:p,xmin:0,xmax:t,ymin:0,ymax:h=S.binompdf(s*t,t,s)};if("poissondist"===e.symbol)return{type:p,xmin:0,xmax:2.5*(r=a.args[1].asValue()),ymin:0,ymax:h=Math.max(S.poissonpdf(Math.floor(r),r),S.poissonpdf(Math.ceil(r),r))};if("normaldist"===e.symbol)return r=1<a.args.length?a.args[1].asValue():0,i=2<a.args.length?a.args[2].asValue():1,h=S.normalpdf(r,r,i),{type:p,xmin:r-2*Math.abs(i),xmax:r+2*Math.abs(i),ymin:0,ymax:h};if("uniformdist"===e.symbol)return r=((o=1<a.args.length?a.args[1].asValue():0)+(n=2<a.args.length?a.args[2].asValue():1))/2,{type:p,xmin:o-(l=n-o)/3,xmax:n+l/3,ymin:0,ymax:h=S.uniformpdf(r,o,n)};if("tdist"===e.symbol){var h,u=a.args[1].asValue();return{type:p,xmin:-3,xmax:3,ymin:0,ymax:h=S.tpdf(0,u)}}}}(r,e);try{t=e.getCompiledDerivative()}catch(e){}var n=C.getGraphInfo(I,e,a);n.graphMode=N.graphMode,n.style=C.userData.lineStyle,n.lineWidth=C.metaData.computedLineWidth,n.lineOpacity=C.metaData.computedLineOpacity,N.graphMode===_.POLAR&&(n.domain={min:C.metaData.evaluatedDomainMin,max:C.metaData.evaluatedDomainMax,isExplicit:C.metaData.isExplicitDomain});var l=z.getDisplayColor(C.userData,C.metaData),p=C.metaData.evaluatedCDFMin,h=C.metaData.evaluatedCDFMax;if(isNaN(p)||isNaN(h)||!E){var u={viewState:P,graphInfo:n,compiled:s,derivative:t,discrete:i,maxOverride:void 0};r&&"binomialdist"===r.symbol&&(u.maxOverride=e.args[1].asValue());var g=V.default.computeGraphData(u);o&&(g.boundingBox=o);var m,d=z.getDisplayColor(C.userData,C.metaData);g.fillSegments?(g.fillSegments,m=A.__rest(g,["fillSegments"]),T.push(m)):i?T.push({graphMode:_.XYPOINT,segments:[X(g.segments)],showPoint:C.userData.shouldGraph,color:d,style:g.style,boundingBox:o,poi:Y.default(g.segments)}):T.push(g),n.graphMode===_.IMPLICIT&&"="!==n.operator&&T.push({graphMode:_.POLYGONFILL,segments:g.fillSegments,poi:{},color:d})}else{var c={viewState:P,graphInfo:n,compiled:s,derivative:t,bounds:[p,h],discrete:i,maxOverride:void 0};r&&"binomialdist"===r.symbol&&(c.maxOverride=e.args[1].asValue());var v,D=F.makeCDFTopBranches(c),f=D.cdfTopBranch,y=D.topBranches;if(y.forEach(function(e){e&&o&&(e.boundingBox=o)}),y.every(function(e){return void 0!==e}))if(i)T=y.map(function(e){return{graphMode:_.XYPOINT,segments:[X(e.segments)],showPoint:C.userData.shouldGraph,color:l,style:e.style,poi:Y.default(e.segments),boundingBox:o}}),f&&f.segments.length&&(v=[],f.segments.forEach(function(e){isNaN(e[0])||isNaN(e[1])||v.push([e[0],0,e[0],e[1]])}),T.push({graphMode:_.PARAMETRIC,segments:v,boundingBox:o,poi:{},color:l}));else if(T=y,f&&f.segments.length){for(var b=void 0,x=void 0,M=0;M<f.segments.length;M++){if(4<=(O=f.segments[M]).length){b=O[0];break}}for(var O,L,M=f.segments.length-1;0<=M;M--){if(4<=(O=f.segments[M]).length){x=O[O.length-2];break}}void 0!==b&&void 0!==x&&isFinite(b)&&isFinite(x)&&(L=V.default.polygonsFromSegments(f.segments,[[b,0,x,0]],f.graphMode),T.push({graphMode:_.POLYGONFILL,segments:L,poi:{},color:l}))}}}),T;case _.POLYGONFILL:case _.VISUALIZATION:case _.OBJECT3D:case _.NONE:return!1;default:var c=N.graphMode;throw new Error("Unexpected graphMode: "+c)}},v.Base.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a);return this._graph(e,a,t,s)},v.BaseComparator.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a),r=s.graphMode;if(r===_.IMPLICIT)return this._graph(e,a,t,s);if(r===_.NONE)return!1;if(!(a instanceof v.SolvedEquation))return!1;var i=this.getOperator(),o=[],n=[],l=!0;a._expression.eachElement(e,function(e){o.push(e.getCompiledFunction());try{n.push(e.getCompiledDerivative())}catch(e){l=!1}}),l||(n=void 0);for(var p=[],h=[-1,0,0,1],u=o.length,g=0;g<u;g++){var m=this.getGraphInfo(e,a._expression.args[g]);m.graphMode=r,m.style=this.userData.lineStyle,s.graphMode===_.POLAR&&(m.domain={min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax,isExplicit:this.metaData.isExplicitDomain});var d=V.default.computeGraphData({viewState:t,graphInfo:m,compiled:o[g],derivative:n?n[g]:void 0});d.operator=D.get(D.table[i].inclusive,h[g%4]),p.push(d)}for(g=0;g<u;g+=4){var c=V.default.polygonsFromSegments(p[g+1].segments,p[g+2].segments,r);p.push({graphMode:_.POLYGONFILL,segments:c,poi:{},color:z.getDisplayColor(this.userData,this.metaData)})}return p},v.DoubleInequality.prototype.graph=function(r,e,i){var o=this,n=this.getGraphInfo(r,e);if(n.graphMode===_.NONE)return!1;var l=[],p=D.get(D.table[this._operators[0]].inclusive,0),h=D.get(D.table[this._operators[1]].inclusive,0),u=this.userData,g=this.metaData,m=z.getDisplayColor(this.userData,this.metaData);return M.eachArgs(r,e._expressions,function(e){e[0].userData=e[1].userData=u,e[0].metaData=e[1].metaData=g;var a=o._graph(r,e[0],i,n)[0];a.operator=p,l.push(a);var t=o._graph(r,e[1],i,n)[0];t.operator=h,l.push(t);var s=V.default.polygonsFromSegments(a.segments,t.segments,a.graphMode);l.push({graphMode:_.POLYGONFILL,segments:s,poi:{},color:m})}),l},v.Regression.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a);return this._graph(e,a.model,t,s)},v.Polygon.prototype.graph=function(e,a,t){var s=[],r=void 0===this.userData.lines||this.userData.lines,i=void 0===this.userData.fill||this.userData.fill;if(!i&&!r)return s;var o=this.getGraphInfo(e,a),n=a.args[0].asValue();if(!n.length)return s;var l=L(A.__spreadArrays(n,[n[0]]));return l.length&&(i&&s.push({segments:l,graphMode:_.POLYGONFILL,poi:{},color:o.color,fillOpacity:this.metaData.computedFillOpacity,style:o.style}),r&&s.push({segments:l,graphMode:_.PARAMETRIC,poi:{},color:o.color,style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity})),s};function R(e){return Array.prototype.concat.apply([],e)}function X(e){for(var a=[],t=0,s=e;t<s.length;t++){var r=s[t],i=r[0],o=r[1];isNaN(i)||isNaN(o)||a.push(r)}return a}function L(e){for(var a=[],t=[],s=0,r=e;s<r.length;s++){var i=r[s],o=i[0],n=i[1];isNaN(o)||isNaN(n)?(4<=a.length&&t.push(a),a=[]):a.push(o,n)}return 4<=a.length&&t.push(a),t}v.Object3D.prototype.graph=function(e,a,t){var s,r,i,o=this.getGraphInfo(e,a);return[{segments:[(s=e,r=a,i=[],M.wrap(r).eachElement(s,function(e){i.push(e.args.map(function(e){return e.asValue()}))}),i)],color:o.color,objectName:this._symbol,graphMode:_.OBJECT3D}]},v.Histogram.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a),r=a.args[0].asValue(),i=a.args[1].asValue(),o=O(r,i,this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?i/2:0),n=1;this.userData.vizProps&&"density"===this.userData.vizProps.histogramMode?n=1/(r.length*i):this.userData.vizProps&&"relative"===this.userData.vizProps.histogramMode&&(n=1/r.length);var l=[],p=[];for(var h in o){var u=o[h],g=u.data.length;p.push([u.min,0*n,u.min,g*n,u.max,g*n,u.max,0*n]);var m=0;o[u.id+1]&&(m=o[u.id+1].data.length);var d=[u.min,0*n,u.min,g*n,u.max,g*n];m<g&&d.push(u.max,m*n),l.push(d)}var c=G("histogram",p);return c&&i&&(c.binWidth=i),[{segments:p,graphMode:_.POLYGONFILL,boundingBox:c,poi:{},color:s.color,fillOpacity:b.DEFAULT},{segments:l,graphMode:_.Y,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:s.color}]},v.DotPlot.prototype.graph=function(e,a,t){var s,r=this.getGraphInfo(e,a),i=a.args[1].asValue(),o=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?i/2:0,n=O(a.args[0].asValue(),i,o),l=!1,p=[];for(var h in n)for(var u,g=(u=n[h]).data.length-1;0<=g;g--)u.center!==u.data[g]&&(l=!0);if(this.userData.vizProps&&"exact"===this.userData.vizProps.dotplotXMode)for(var h in n){(s=(u=n[h]).data).reverse();for(var m=0;m<s.length;m++)p.push([s[m],m+1])}else for(var h in n){s=(u=n[h]).data;for(m=0;m<s.length;m++)p.push([u.center,m+1])}var d=G("dotplot",p);return d&&i&&(d.ymin=0,d.xmin-=.5*i,d.xmax+=.5*i,d.binWidth=i),[{segments:[p],graphMode:_.XYPOINT,boundingBox:d,poi:Y.default(p),color:r.color,style:this.userData.pointStyle,pointSize:this.userData.vizProps&&this.userData.vizProps.dotplotSize,showPoint:!0,needsDotplotXMode:l}]},v.BoxPlot.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a),r=this.metaData.evaluatedAxisOffset,i=this.metaData.evaluatedBreadth,o=a.args[0].asValue();if(isNaN(i)||isNaN(r))return!1;var n,l,p,h=Math.min.apply(null,o),u=Math.max.apply(null,o),g=S.quartile(o,1),m=S.quartile(o,2),d=S.quartile(o,3),c=r,v=c-i/2,D=c+i/2,f=i/10,y=[];this.userData.vizProps.showBoxplotOutliers&&(l=g-1.5*(n=d-g),p=d+1.5*n,h=1/0,u=-1/0,o.forEach(function(e){l<=e&&e<h&&(h=e),u<e&&e<=p&&(u=e),(e<l||p<e)&&y.push([e,c])}));var b=[[g,v,d,v,d,D,g,D,g,v],[m,v,m,D],[g,c,h,c],[d,c,u,c],[h,c-f,h,c+f],[u,c-f,u,c+f]];if(this.userData.vizProps&&"y"===this.userData.vizProps.alignedAxis){for(var x=0,M=b;x<M.length;x++)for(var O=M[x],L=0;L<O.length;L+=2){var I=O[L];O[L]=O[L+1],O[L+1]=I}for(var P=0,N=y;P<N.length;P++){var C=N[P],I=C[0];C[0]=C[1],C[1]=I}}var T=[{segments:b,graphMode:_.PARAMETRIC,boundingBox:G("boxplot",b.concat(y)),poi:{},color:s.color}];return y.length&&T.push({segments:[y],graphMode:_.XYPOINT,color:s.color,style:E.PointStyle.OPEN,showPoint:!0,poi:Y.default(y)}),T},v.Table.prototype.isValueDraggable=function(e,a,t){if(!e.columns[a].isIndependent)return!1;var s=this.columns[a].values,r=s&&s[t];return!(!r||!isFinite(r.asValue())||0!==r._dependencies.length)},v.Table.prototype.graph=function(e,a,t){var s={};if(a.columns[0].isError)return s;for(var r=a.columns[0],i=r.values,o=1;o<this.columns.length;o++){var n=a.columns[o];if(!n.isError){var l=this.columns[o].header.userData,p=this.columns[o].header.metaData;if(!l.hidden){for(var h=l.dragMode,u=h===B.DragMode.X||h===B.DragMode.XY,g=h===B.DragMode.Y||h===B.DragMode.XY,m=!!l.points,d=!!l.lines,c=n.isDiscrete(r),v=d&&c,D=d&&!c,f=[],y=[],b=[],x=[],M=[],O=[],L=1/0,I=-1/0,P=1/0,N=-1/0,C=0;C<i.length;C++){var T,E,S,A,V=i[C],F=n.values[C];V&&F&&isFinite(V.asValue())&&isFinite(F.asValue())?(T=V.asValue(),E=F.asValue(),m&&(S=u&&this.isValueDraggable(a,0,C),A=g&&this.isValueDraggable(a,o,C),S||A?(b.push([T,E]),x.push({index:C,dragX:S,dragY:A})):y.push([T,E])),v&&O.push([T,E]),T<L&&(L=T),I<T&&(I=T),E<P&&(P=E),N<E&&(N=E)):v&&(1<O.length&&M.push(O),O=[])}var w,G={type:"table",xmin:L,xmax:I,ymin:P,ymax:N};b.length&&f.push({graphMode:_.XYPOINT_MOVABLE,segments:[b],color:z.getDisplayColor(l,p),tableId:l.tableId,poi:Y.default(b),movablePointInfo:x,boundingBox:G,pointOpacity:1}),y.length&&f.push({segments:[y],graphMode:_.XYPOINT,showPoint:!0,poi:Y.default(y),color:z.getDisplayColor(l,p),style:l.pointStyle,tableId:l.tableId,boundingBox:G}),(M.length||O.length)&&(M.push(O),f.push({segments:M.map(R),graphMode:_.PARAMETRIC,poi:{},color:z.getDisplayColor(l,p),style:l.lineStyle,tableId:l.tableId,boundingBox:G})),!D||(w=this.columns[o].header.graph(e,a.columns[o].header,t)).length&&Array.prototype.push.apply(f,w),f.length&&(s[l.id]=f)}}}return s},v.Image.prototype.graph=function(e,a,t){var s=[];if(!("OrderedPair"===a.center.type&&a.center.args[0].isConstant&&a.center.args[1].isConstant&&a.radianAngle.isConstant&&a.width.isConstant&&a.height.isConstant&&a.opacity.isConstant))return s;for(var r,i,o,n=[],l=[],p=a.width.asValue()/2,h=a.height.asValue()/2,u=a.radianAngle.asValue(),g=-1;g<=1;g++)for(var m=-1;m<=1;m++){var d=[a.center.args[0].asValue()+g*p*Math.cos(u)+m*h*Math.sin(u),a.center.args[1].asValue()-g*p*Math.sin(u)+m*h*Math.cos(u)];(r=a.moveStrategy,i=g,o=m,!!r&&(0===i&&0===o?"none"!==r[2].type||"none"!==r[3].type:0!==i&&0!==o?"none"!==r[0].type&&"none"!==r[1].type:0!==i?"none"!==r[0].type:0!==o&&"none"!==r[1].type))&&(n.push(d),l.push([g,m]))}return s.push({segments:[n],scaleFactors:[l],graphMode:_.XYPOINT_MOVABLE,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.style,poi:Y.default(n),movablePointInfo:[],pointOpacity:1}),s}});
define('core/math/features/elementAt',['require','parsenodes','core/math/builtinframe'],function(require){"use strict";var n=require("parsenodes"),o=require("core/math/builtinframe");function t(t,e){for(var r=0;r<this.length;r++)e(this.elementAt(t,r),r)}function e(t,e){for(var r=[],s=0;s<this.length;s++)r.push(e(this.elementAt(t,s),s));return r}n.List.prototype.elementAt=function(t,e){return 0<=(e=Math.floor(e))&&e<this.args.length?this.args[e]:n.Constant(NaN)},n.Broadcast.prototype.elementAt=function(t,e){if((e=Math.floor(e))<0||e>=this.length)return n.Constant(NaN);for(var r={},s=0;s<this._replacedSymbols.length;s++)r[this._replacedSymbols[s]]=this._lists[s].elementAt(t,e);return this._expression.substitute(r).getConcreteTree(t,o)},n.Broadcast.prototype.asList=function(t){for(var e=[],r=0;r<this.length;r++)e.push(this.elementAt(t,r));return n.List(e)},n.List.prototype.eachElement=t,n.Broadcast.prototype.eachElement=t,n.List.prototype.mapElements=e,n.Broadcast.prototype.mapElements=e,n.OrderedPair.prototype.elementAt=function(t,e){switch(e){case 0:return this.args[0];case 1:return this.args[1];default:return n.Constant(NaN)}},n.RGBColor.prototype.elementAt=function(t,e){switch(e){case 0:return this.args[0];case 1:return this.args[1];case 2:return this.args[2];default:return n.Constant(NaN)}}});
define('core/math/features/printLatex',['require','parsenodes','core/lib/label','core/lib/number-to-latex'],function(require){"use strict";var e=require("parsenodes"),t=require("core/lib/label"),r=require("core/lib/number-to-latex").default;function i(){return t.identifierToLatex(this._symbol)+" "}function n(t){switch(t){case">":return"\\gt ";case"<":return"\\lt ";case">=":return"\\ge ";case"<=":return"\\le ";case"=":return"="}}function a(t){return t.printLatex()}function s(){switch(this._symbol){case"sqrt":return"\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\log_{"+this.args[1].printLatex()+"}\\left("+this.args[0].printLatex()+"\\right)";default:return t.identifierToLatex(this._symbol)+"\\left("+this.args.map(a).join(", ")+"\\right)"}}function o(t){return t.isConstant&&!0===t.asValue()}e.Identifier.prototype.printLatex=i,e.FreeVariable.prototype.printLatex=i,e.Constant.prototype.printLatex=function(){return r(this.asValue())},e.Negative.prototype.printLatex=function(){return"-\\left("+this.args[0].printLatex()+"\\right)"},e.Add.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)+\\left("+this.args[1].printLatex()+"\\right)"},e.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\% \\operatorname{of} "+this.args[1].printLatex()},e.Subtract.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)-\\left("+this.args[1].printLatex()+"\\right)"},e.Multiply.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)*\\left("+this.args[1].printLatex()+"\\right)"},e.Divide.prototype.printLatex=function(){return"\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},e.Exponent.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)^{"+this.args[1].printLatex()+"}"},e.Assignment.prototype.printLatex=function(){return t.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},e.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},e.BaseComparator.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)"+n(this.operator)+"\\left("+this.args[1].printLatex()+"\\right)"},e.DoubleInequality.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)"+n(this.args[1])+this.args[2].printLatex()+n(this.args[3])+"\\left("+this.args[4].printLatex()+"\\right)"},e.And.prototype.printLatex=function(){if(!(this.args[0]instanceof e.BaseComparator&&this.args[1]instanceof e.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\left("+this.args[0].args[0].printLatex()+"\\right)"+n(this.args[0].operator)+"\\left("+this.args[0].args[1].printLatex()+"\\right)"+n(this.args[1].operator)+"\\left("+this.args[1].args[1].printLatex()+"\\right)"},e.NativeFunction.prototype.printLatex=s,e.TypedFunction.prototype.printLatex=s,e.ReducerFunction.prototype.printLatex=s,e.ParametrizedReducerFunction.prototype.printLatex=s,e.DoubleReducerFunction.prototype.printLatex=s,e.FunctionCall.prototype.printLatex=s,e.Distribution.prototype.printLatex=s,e.SeededFunctionCall.prototype.printLatex=function(){return t.identifierToLatex(this._symbol)+"\\left("+this.args.slice(1).map(a).join(", ")+"\\right)"},e.DotAccess.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")"},e.DotAccessExponent.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")^{"+this.args[2].printLatex()+"}"},e.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("'")+"\\left("+this.args[0].args[0].printLatex()+"\\right)";default:return t.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("'")+"\\left("+this.args[0].args.map(a).join(", ")+"\\right)"}},e.List.prototype.printLatex=function(){return"\\left["+this.args.map(a).join(", ")+"\\right]"},e.Range.prototype.printLatex=function(){return"\\left["+this.args[0].args.map(a).join(", ")+" ... "+this.args[1].args.map(a).join(", ")+"\\right]"},e.ListAccess.prototype.printLatex=function(){return"\\left("+this.args[0].printLatex()+"\\right)\\left["+this.args[1].printLatex()+"\\right]"},e.OrderedPair.prototype.printLatex=function(){return"\\left("+this.args.map(a).join(", ")+"\\right)"},e.Sum.prototype.printLatex=function(){return"\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)"},e.Product.prototype.printLatex=function(){return"\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)"},e.Integral.prototype.printLatex=function(){return"\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\left("+this.args[3].printLatex()+"\\right)d"+this.args[0].printLatex()},e.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\left("+this.args[1].printLatex()+"\\right)^{"+this.args[2].printLatex()+"}"},e.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+"\\left("+this.args[1].printLatex()+"\\right)!"},e.Piecewise.prototype.printLatex=function(){var t=this;if(o(t.args[0]))return t.args[1].printLatex();for(var r,i=["\\left\\{"];;){if(o(t.args[0])){i.push(t.args[1].printLatex());break}if(i.push(t.args[0].printLatex(),": "),(r=t.args[2]).isConstant&&r.isNaN()){i.push(t.args[1].printLatex());break}if(i.push(t.args[1].printLatex(),", "),!(t.args[2]instanceof e.Piecewise)){i.push(t.args[2].printLatex());break}t=t.args[2]}return i.push("\\right\\}"),i.join("")},e.FunctionDefinition.prototype.printLatex=function(){return t.identifierToLatex(this._symbol)+"\\left("+this._argSymbols.map(t.identifierToLatex).join(", ")+"\\right) = "+this._expression.printLatex()},e.Derivative.prototype.printLatex=function(){return"\\frac{d}{d"+t.identifierToLatex(this._symbol)+"}\\left("+this.args[0].printLatex()+"\\right)"},e.Regression.prototype.printLatex=function(){return"\\left("+this._lhs.printLatex()+"\\right)\\sim\\left("+this._rhs.printLatex()+"\\right)"},e.Polygon.prototype.printLatex=function(){return"\\polygon\\left("+this.args.map(a).join(", ")+"\\right)"},e.Histogram.prototype.printLatex=function(){return"\\histogram\\left("+this.args.map(a).join(", ")+"\\right)"},e.Object3D.prototype.printLatex=function(){return"\\"+this._symbol+"\\left("+this.args.map(a).join(", ")+"\\right)"},e.DotPlot.prototype.printLatex=function(){return"\\dotplot\\left("+this.args.map(a).join(", ")+"\\right)"},e.BoxPlot.prototype.printLatex=function(){return"\\boxplot\\left("+this.args.map(a).join(", ")+"\\right)"},e.TTest.prototype.printLatex=function(){return"\\TTest\\left("+this.args.map(a).join(", ")+"\\right)"},e.IndependentTTest.prototype.printLatex=function(){return"\\IndependentTTest\\left("+this.args.map(a).join(", ")+"\\right)"},e.Stats.prototype.printLatex=function(){return"\\Stats\\left("+this.args.map(a).join(", ")+"\\right)"}});
define('core/math/features/statistics',['require','parsenodes','core/math/maybe-rational'],function(require){"use strict";var r=require("parsenodes"),i=r.BuiltInFunction,n=require("core/math/maybe-rational").maybeRational,s=r.Constant(n(0,1)),o=r.Constant(n(1,1)),e=r.Constant(n(2,1)),t=r.Constant(n(1,2)),a=r.Constant(-1/0);i.normaldist.prototype.pdf=function(t){return i.normalpdf([t[0],this.args[0],this.args[1]])},i.normaldist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.normalcdf([n,r,this.args[0],this.args[1]])},i.normaldist.prototype.mean=function(){return this.args[0]},i.normaldist.prototype.median=function(){return this.args[0]},i.normaldist.prototype.stdev=function(){return i.abs([this.args[1]])},i.normaldist.prototype.var=function(){return r.Exponent([this.args[1],e])},i.normaldist.prototype.quantile=function(t){return r.Add([r.Multiply([i.invNorm(t),this.stdev()]),this.mean()])},i.normaldist.prototype.sample=function(t){return i.normalSample([t[0],this.args[0],this.args[1]])},i.tdist.prototype.pdf=function(t){return i.tpdf([t[0],this.args[0]])},i.tdist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.tcdf([n,r,this.args[0]])},i.tdist.prototype.mean=function(){return s},i.tdist.prototype.median=function(){return s},i.tdist.prototype.quantile=function(t){return i.invT([t[0],this.args[0]])},i.tdist.prototype.sample=function(t){return i.tSample([t[0],this.args[0]])},i.tdist.prototype.stdev=function(){return i.sqrt([this.var()])},i.tdist.prototype.var=function(){var t=this.args[0];return r.Piecewise([r.Comparator[">="]([t,e]),r.Divide([t,r.Subtract([t,e])]),r.Constant(NaN)])},i.poissondist.prototype.pdf=function(t){return i.poissonpdf([t[0],this.args[0]])},i.poissondist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.poissoncdf([n,r,this.args[0]])},i.poissondist.prototype.mean=function(){return this.args[0]},i.poissondist.prototype.median=function(){return i.invPoisson([t,this.args[0]])},i.poissondist.prototype.stdev=function(){return i.sqrt([this.args[0]])},i.poissondist.prototype.var=function(){return this.args[0]},i.poissondist.prototype.quantile=function(t){return i.invPoisson([t[0],this.args[0]])},i.poissondist.prototype.sample=function(t){return i.poissonSample([t[0],this.args[0]])},i.binomialdist.prototype.pdf=function(t){return i.binompdf([t[0],this.args[0],this.args[1]])},i.binomialdist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.binomcdf([n,r,this.args[0],this.args[1]])},i.binomialdist.prototype.mean=function(){return r.Multiply([this.args[0],this.args[1]])},i.binomialdist.prototype.median=function(){return i.invBinom([t,this.args[0],this.args[1]])},i.binomialdist.prototype.stdev=function(){return i.sqrt([this.var()])},i.binomialdist.prototype.var=function(){var t=this.args[0],n=this.args[1];return r.Multiply([t,r.Multiply([n,r.Subtract([o,n])])])},i.binomialdist.prototype.quantile=function(t){return i.invBinom([t[0],this.args[0],this.args[1]])},i.binomialdist.prototype.sample=function(t){return i.binomSample([t[0],this.args[0],this.args[1]])},i.uniformdist.prototype.pdf=function(t){return i.uniformpdf([t[0],this.args[0],this.args[1]])},i.uniformdist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.uniformcdf([n,r,this.args[0],this.args[1]])},i.uniformdist.prototype.mean=function(){return r.Divide([r.Add([this.args[0],this.args[1]]),e])},i.uniformdist.prototype.median=function(){return r.Divide([r.Add([this.args[0],this.args[1]]),e])},i.uniformdist.prototype.stdev=function(){return i.sqrt([this.var()])},i.uniformdist.prototype.var=function(){return r.Divide([r.Exponent([r.Subtract([this.args[1],this.args[0]]),e]),r.Constant(n(12,1))])},i.uniformdist.prototype.quantile=function(t){return i.invUniform([t[0],this.args[0],this.args[1]])},i.uniformdist.prototype.sample=function(t){return i.uniformSample([t[0],this.args[0],this.args[1]])},r.List.prototype.sample=function(t){return r.ListAccess([this,r.Add([i.floor([r.Multiply([i.uniformSample([t[0],s,o]),r.Constant(n(this.length,1))])]),o])])}});
define('core/math/features/getExpressionType',['require','parsenodes','core/types/graphmode','core/math/expression-types','core/math/types'],function(require){"use strict";var e=require("parsenodes"),o=require("core/types/graphmode"),r=require("core/math/expression-types").ExpressionType,n=require("core/math/types");e.Base.prototype.getExpressionType=function(e,t){return e===o.X||e===o.Y?r.X_OR_Y:e===o.XYPOINT||e===o.XYPOINT_MOVABLE?t===n.Point?r.SINGLE_POINT:r.POINT_LIST:e===o.PARAMETRIC||e===o.PARAMETRIC_CURVE_3D?r.PARAMETRIC:e===o.POLAR?r.POLAR:e===o.IMPLICIT?r.IMPLICIT:r.X_OR_Y},e.Polygon.prototype.getExpressionType=function(e,t){return r.POLYGON},e.Histogram.prototype.getExpressionType=function(e,t){return r.HISTOGRAM},e.Object3D.prototype.getExpressionType=function(e,t){return r.CUBE},e.DotPlot.prototype.getExpressionType=function(e,t){return r.DOTPLOT},e.BoxPlot.prototype.getExpressionType=function(e,t){return r.BOXPLOT}});
define('core/math/features/findLinearSubset',['require','parsenodes','core/math/maybe-rational'],function(require){"use strict";var d=require("parsenodes"),e=require("core/math/maybe-rational").maybeRational,f=d.Constant(e(0,1)),p=d.Constant(e(-1,0));d.Expression.prototype.findLinearSubset=function(e){for(var t=[],n=0;n<e.length;n++)t.push(!this.dependsOn(e[n]));return t},d.FreeVariable.prototype.findLinearSubset=function(e){for(var t=[],n=0;n<e.length;n++)t.push(!0);return t},d.Add.prototype.findLinearSubset=function(e){for(var t=[],n=this.args[0].findLinearSubset(e),r=this.args[1].findLinearSubset(e),i=0;i<e.length;i++)t.push(n[i]&&r[i]);return t},d.Subtract.prototype.findLinearSubset=d.Add.prototype.findLinearSubset,d.Negative.prototype.findLinearSubset=function(e){return this.args[0].findLinearSubset(e)},d.Multiply.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e).slice(),n=this.args[1].findLinearSubset(e).slice(),r=0,i=0,s=0;s<e.length;s++)t[s]=t[s]&&!this.args[1].dependsOn(e[s]),t[s]&&(r+=1),n[s]=n[s]&&!this.args[0].dependsOn(e[s]),n[s]&&(i+=1);return i<=r?t:n},d.Divide.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e),n=[],r=0;r<e.length;r++)n.push(t[r]&&!this.args[1].dependsOn(e[r]));return n},d.List.prototype.findLinearSubset=function(e){var t=[];for(i=0;i<e.length;i++)t.push(!0);for(var n=0;n<this.args.length;n++)for(var r=this.args[n].findLinearSubset(e),i=0;i<e.length;i++)t[i]=t[i]&&r[i];return t},d.Broadcast.prototype.findLinearSubset=function(e){for(var t=this._replacedSymbols,n=this._expression,r=this._lists,i={},s=0;s<r.length;s++){for(var a=r[s].findLinearSubset(e),o=f,u=0;u<e.length;u++)a[u]?r[s].dependsOn(e[u])&&(o=d.Add([o,d.FreeVariable(e[u])])):o=d.Add([o,d.Exponent([d.FreeVariable(e[u]),p])]);i[t[s]]=o}return n.substitute(i).findLinearSubset(e)},d.Piecewise.prototype.findLinearSubset=function(e){for(var t=this.args[0],n=this.args[1].findLinearSubset(e),r=this.args[2].findLinearSubset(e),i=[],s=0;s<e.length;s++)i.push(!t.dependsOn(e[s])&&n[s]&&r[s]);return i}});
define('core/math/features/deriveRegressionRestrictions',['require','parsenodes','core/math/types','core/math/domaintypes'],function(require){"use strict";var g=require("parsenodes"),c=require("core/math/types"),s=require("core/math/domaintypes");function e(e){for(var t,n=this.args[0],r=this.getDependencies(),i={},s=0;s<r.length;s++)if(e.listStatistics.hasOwnProperty(r[s])){if(void 0!==t)return{};t=r[s]}if(void 0===t)return{};if(1!==n.polynomialOrder(t))return{};var o=n.getPolynomialCoefficients(t),a=o[1],c=o[1].getDependencies();if(1!==c.length)return{};var p=c[0];if(1!==a.polynomialOrder(p))return{};var u=e.listStatistics[t],l=(u.max-u.min)/Math.min(u.length-1,31),f=Math.PI/l;return!isFinite(f)||f<=0?{}:(i[p]=g.Piecewise([g.And([g.Comparator["<="]([g.Constant(0),a]),g.Comparator["<"]([a,g.Constant(f)])]),g.Constant(1),g.Constant(NaN)]).boundDomain(p),i)}g.Base.prototype.deriveRegressionRestrictions=function(){return this},g.Broadcast.prototype.deriveRegressionRestrictions=function(){for(var e=this._replacedSymbols,t=this._expression,n=this._lists,r={},i=0;i<e.length;i++)0===n[i].getDependencies().length&&n[i].valueType===c.ListOfNumber&&(r[e[i]]=function(e){for(var t=1/0,n=-1/0,r=e.length,i=0;i<e.length;i++)t=Math.min(t,e[i]),n=Math.max(n,e[i]);return{min:t,max:n,length:r}}(n[i].asValue()));var s,o=t._deriveRegressionRestrictions({listStatistics:r});for(s in o)if("known"!==o[s].type)return this;var a=t;for(s in o)a=function(e,t,n){if("known"!==n.type)return e;var r=g.And([g.Comparator["<="]([g.Constant(n.bounds[0]),g.FreeVariable(t)]),g.Comparator["<="]([g.FreeVariable(t),g.Constant(n.bounds[1])])]);return g.Multiply([e,g.Piecewise([r,g.Constant(1),g.Constant(NaN)])])}(a,s,o[s]);return g.Broadcast(e,[a].concat(n))},g.Base.prototype._deriveRegressionRestrictions=function(e){return{}},g.Expression.prototype._deriveRegressionRestrictions=function(e){for(var t={},n=0;n<this.args.length;n++){var r=this.args[n]._deriveRegressionRestrictions(e);for(var i in r)t[i]=t[i]?s.intersectDomains(t[i],r[i]):r[i]}return t},g.BuiltInFunction.sin.prototype._deriveRegressionRestrictions=e,g.BuiltInFunction.cos.prototype._deriveRegressionRestrictions=e,g.Exponent.prototype._deriveRegressionRestrictions=function(e){for(var t=this.args[0],n=this.args[1],r=t.getDependencies(),i=n.getDependencies(),s={},o=!1,a=0;a<i.length;a++)if(e.listStatistics.hasOwnProperty(i[a])){o=!0;break}if(!o)return{};if(1!==r.length)return{};var c=r[0];return e.listStatistics.hasOwnProperty(c)||1!==t.polynomialOrder(c)?{}:(s[c]=g.Piecewise([g.Comparator[">="]([t,g.Constant(0)]),g.Constant(1),g.Constant(NaN)]).boundDomain(c),s)},g.Piecewise.prototype._deriveRegressionRestrictions=function(e){for(var t={},n=this.getDependencies(),r=0;r<n.length;r++)t[n[r]]=s.unknownDomain();return t}});
define('core/math/features/reparameterizeRegression',['require','parsenodes','core/math/types'],function(require){"use strict";var x=require("parsenodes"),n=require("core/math/types");function b(e,t){for(var r,i=e.getDependencies(),n=0;n<i.length;n++)if(t.hasOwnProperty(i[n])){if(void 0!==r)return;r=i[n]}return r}function D(e,t){if(1===e.polynomialOrder(t)){var r=e.getPolynomialCoefficients(t),i=r[1],n=r[0],s=i.getDependencies();if(1===s.length){var a=s[0];if(1===i.polynomialOrder(a)){var o=n.getDependencies().filter(function(e){return e!==a});if(1===o.length){var p=o[0];if(1===n.polynomialOrder(p))return[n,i]}}}}}function F(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(void 0!==r)for(var i=r.getDependencies(),n=0;n<i.length;n++){var s=i[n];-1===e.indexOf(s)&&e.push(s)}}return e}function u(e,t,r){for(var i=0;i<e.length;i++)if(i!==r)for(var n=e[i],s=0;s<t.length;s++)for(var a=t[s].model.replacedDependencies,o=0;o<a.length;o++)if(n.dependsOn(a[o]))return 1}function d(e){var t,r;for(s=0;s<this.args.length;s++){var i=this.args[s]._reparameterizeRegression(e);if(i){if(void 0!==r)return;t=i,r=s}}if(void 0!==r&&!u(this.args,t,r)){for(var n=[],s=0;s<t.length;s++){var a=t[s];n.push({model:a.model,expression:this.copyWithArgs([].concat(this.args.slice(0,r),a.expression,this.args.slice(r+1)))})}return n}}function g(e,t){var r=e.model;if("exp"!==r.type)return e;if(r.shiftScale)return e;var i=e.expression,n="Negative"===i.type;if(n&&(i=i.args[0]),"BuiltInFunction['exp']"!==i.type)return e;var s=i.args[0],a=b(s,t.listStatistics);if(void 0===a)return e;var o=D(s,a);if(!o)return e;var p=o[0],l=o[1],c=[s.tmpVar(),s.tmpVar()],u=t.listStatistics[a].max-t.listStatistics[a].min,d=.5*(t.listStatistics[a].max+t.listStatistics[a].min),g=x.BuiltInFunction.exp([x.Add([x.Multiply([x.FreeVariable(c[0]),x.Divide([x.Subtract([x.DummyIndex(a),x.Constant(d)]),x.Constant(u)])]),x.FreeVariable(c[1])])]);return n&&(g=x.Negative([g])),{model:{type:"exp",shiftScale:{mulNode:l,addNode:p,newParameterSymbols:c,stats:{range:u,midrange:d}},base:r.base,intercept:r.intercept,replacedDependencies:F(l,p,r.base&&r.base.node,r.intercept&&r.intercept.node)},expression:g}}function f(e,t,r){var i=e._symbol,n=e.args[0],s=b(n,r.listStatistics);if(void 0!==s){var a=D(n,s);if(a){var o=a[0],p=a[1],l=t.getDependencies();if(1===l.length){var c=l[0];if(!n.dependsOn(c)&&1===t.polynomialOrder(c)){var u,d,g,f,m,h,y,v=[e.tmpVar(),e.tmpVar(),e.tmpVar()];return[{model:{type:"trig",amplitudeNode:t,frequencyNode:p,phaseNode:o,newParameterSymbols:v,replacedDependencies:F(t,p,o)},expression:(d=s,g=v,f="cos"===(u=i)?g[0]:g[1],m="cos"===u?g[1]:g[0],h=g[2],y=x.Multiply([x.FreeVariable(h),x.DummyIndex(d)]),("sin"===u?x.Add:x.Subtract)([x.Multiply([x.FreeVariable(f),x.BuiltInFunction.cos([y])]),x.Multiply([x.FreeVariable(m),x.BuiltInFunction.sin([y])])]))}]}}}}}x.Base.prototype.reparameterizeRegression=function(){},x.Broadcast.prototype.reparameterizeRegression=function(){for(var e=this._replacedSymbols,t=this._lists,r={},i=0;i<e.length;i++)0===t[i].getDependencies().length&&t[i].valueType===n.ListOfNumber&&(r[e[i]]=function(e){for(var t=1/0,r=-1/0,i=e.length,n=0;n<e.length;n++)t=Math.min(t,e[n]),r=Math.max(r,e[n]);return{min:t,max:r,length:i}}(t[i].asValue()));return this._reparameterizeRegression({listStatistics:r})},x.Base.prototype._reparameterizeRegression=function(e){},x.Expression.prototype._reparameterizeRegression=d,x.Exponent.prototype._reparameterizeRegression=function(e){var t=this.args[0],r=this.args[1],i=r.getDependencies(),n=t.getDependencies();if(function(e,t){for(var r=e.getDependencies(),i=0;i<r.length;i++)if(t[r[i]])return 1}(r,e.listStatistics)){if(0===n.length){if(t.asValue()<0)return;return[{model:{type:"exp",replacedDependencies:[]},expression:x.BuiltInFunction.exp([x.Multiply([x.BuiltInFunction.ln([t]),r])])}]}if(1===n.length&&!e.listStatistics.hasOwnProperty(n[0])&&-1===i.indexOf(n[0])&&1===t.polynomialOrder(n[0])){var s=this.tmpVar();return[g({model:{type:"exp",base:{node:t,newParameterSymbols:[s]},replacedDependencies:t.getDependencies()},expression:x.BuiltInFunction.exp([x.Multiply([x.FreeVariable(s),r])])},e)]}}},x.BuiltInFunction.exp.prototype._reparameterizeRegression=function(e){if(void 0!==b(this.args[0],e.listStatistics))return[g({model:{type:"exp",replacedDependencies:[]},expression:this},e)]},x.Multiply.prototype._reparameterizeRegression=function(e){var t,r,i;if("BuiltInFunction['sin']"===this.args[0].type||"BuiltInFunction['cos']"===this.args[0].type)return f(this.args[0],this.args[1],e);if("BuiltInFunction['sin']"===this.args[1].type||"BuiltInFunction['cos']"===this.args[1].type)return f(this.args[1],this.args[0],e);for(i=0;i<this.args.length;i++){var n=this.args[i]._reparameterizeRegression(e);if(n){if(void 0!==r)return;t=n,r=i}}if(void 0!==r&&!u(this.args,t,r)){var s=1===r?0:1,a=this.args[s];if(1!==t.length)return d.call(this,e);var o=t[0],p=o.model;if("exp"!==p.type||"BuiltInFunction['exp']"!==o.expression.type||o.model.shiftScale)return d.call(this,e);var l=a.getDependencies();if(1!==l.length||1!==a.polynomialOrder(l[0])||e.listStatistics.hasOwnProperty(l[0]))return d.call(this,e);var c=this.tmpVar();return[{model:{type:"exp",replacedDependencies:[]},expression:this},g({model:{type:"exp",base:p.base,intercept:{node:a,newParameterSymbols:[c],sign:1},replacedDependencies:F(p.base&&p.base.node,a)},expression:x.BuiltInFunction.exp([x.Add([o.expression.args[0],x.FreeVariable(c)])])},e),g({model:{type:"exp",base:p.base,intercept:{node:a,newParameterSymbols:[c],sign:-1},replacedDependencies:F(p.base&&p.base.node,a)},expression:x.Negative([x.BuiltInFunction.exp([x.Add([o.expression.args[0],x.FreeVariable(c)])])])},e)]}}});
define('parser',['require','core/math/baseparser','core/math/features/getConcreteTree','core/math/features/getValueType','core/math/features/typeCheck','core/math/features/repr','core/math/features/scalarEvalExpression','core/math/features/constantcollapsedcopy','core/math/features/polynomialorder','core/math/features/polynomialcoefficients','core/math/features/extractconditions','core/math/features/piecewiseDependsOn','core/math/features/bounddomain','core/math/features/derivative','core/math/features/substitute','core/math/features/isImplicit','core/math/features/solve','core/math/features/analyze','core/math/features/analyzeFourFunction','core/math/features/analyzeScientific','core/math/features/analyzeSingleExpressionScientific','core/math/features/getgraphmode','core/math/features/getgraphinfo','core/math/features/getMoveStrategy','core/math/features/getDefaultDragMode','core/math/features/tableinfo','core/math/features/tableerror','core/math/features/graph','core/math/features/elementAt','core/math/features/printLatex','core/math/features/statistics','core/math/features/getExpressionType','core/math/features/findLinearSubset','core/math/features/deriveRegressionRestrictions','core/math/features/reparameterizeRegression'],function(require){"use strict";var e=require("core/math/baseparser");return require("core/math/features/getConcreteTree"),require("core/math/features/getValueType"),require("core/math/features/typeCheck"),require("core/math/features/repr"),require("core/math/features/scalarEvalExpression"),require("core/math/features/constantcollapsedcopy"),require("core/math/features/polynomialorder"),require("core/math/features/polynomialcoefficients"),require("core/math/features/extractconditions"),require("core/math/features/piecewiseDependsOn"),require("core/math/features/bounddomain"),require("core/math/features/derivative"),require("core/math/features/substitute"),require("core/math/features/isImplicit"),require("core/math/features/solve"),require("core/math/features/analyze"),require("core/math/features/analyzeFourFunction"),require("core/math/features/analyzeScientific"),require("core/math/features/analyzeSingleExpressionScientific"),require("core/math/features/getgraphmode"),require("core/math/features/getgraphinfo"),require("core/math/features/getMoveStrategy"),require("core/math/features/getDefaultDragMode"),require("core/math/features/tableinfo"),require("core/math/features/tableerror"),require("core/math/features/graph"),require("core/math/features/elementAt"),require("core/math/features/printLatex"),require("core/math/features/statistics"),require("core/math/features/getExpressionType"),require("core/math/features/findLinearSubset"),require("core/math/features/deriveRegressionRestrictions"),require("core/math/features/reparameterizeRegression"),e});
define('core/math/evaluate-single-expression',["require","exports","parser","core/math/builtinframe","core/math/parsenode/constant","core/math/policy"],function(require,e,a,i,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,t){if(/^\s*(\-|\+)?([0-9]+(\.[0-9]+)?)\s*$/.test(e))return parseFloat(e);var r=Object.create(i);return r.trigAngleMultiplier=n(t?Math.PI/180:1),+a.parse(e).tryGetConcreteTree(o.defaultPolicy,r).asValue()}});
define('lib/rounding',["require","exports","core/math/distance"],function(require,e,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.shortestDecimalBetween=void 0,e.shortestDecimalBetween=function(e,t){if(!isFinite(e))return e;if(!isFinite(t))return t;var r=c.mean(e,t);if(0<e!=0<t)return 0;if(0===e||0===t)return 0;var i=0<e?1:-1,n=Math.abs(e).toExponential().split("e"),a=Math.abs(t).toExponential().split("e"),o=n[0],s=a[0],l=n[1],u=a[1];if(u!==l)return i*Math.pow(10,Math.max(parseFloat(l),parseFloat(u)));if(o[0]!==s[0])return parseFloat(r.toPrecision(1));for(var f=1,p=2;p<Math.min(o.length,s.length)&&(f++,o[p]===s[p]);p++);return parseFloat(r.toPrecision(f))}});
define('core/lib/validate-color',["require","exports","core/vendor/d3-color"],function(require,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r.color;e.default=function(e){return null!==o(e)}});
define('core/graphing-calc/json/simulation',["require","exports","tslib","core/lib/default-spec","core/lib/copy-properties"],function(require,s,i,n,t){"use strict";function a(e){return t.extractPropertiesLike(e,s.DEFAULTS_DYNAMIC)}Object.defineProperty(s,"__esModule",{value:!0}),s.computeParsableState=s.extractDynamicProperties=s.stripDefaults=s.inflateDefaults=s.DEFAULTS=s.DEFAULTS_DYNAMIC=s.CLICKABLEINFO_DEFAULTS=void 0,s.CLICKABLEINFO_DEFAULTS={enabled:!0,description:"",rules:[{id:"1",expression:"",assignment:""}]},s.DEFAULTS_DYNAMIC={clickableInfo:s.CLICKABLEINFO_DEFAULTS,fps:""},s.DEFAULTS=i.__assign({folderId:"",secret:!1,isPlaying:!1},s.DEFAULTS_DYNAMIC),s.inflateDefaults=function(e){return i.__assign(i.__assign(i.__assign({},s.DEFAULTS),e),{clickableInfo:i.__assign(i.__assign({},s.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})},s.stripDefaults=function(e){var i=n.stripDefaults(s.DEFAULTS,e),t=n.stripDefaultsAndMaybeReturnUndefined(s.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===t?delete i.clickableInfo:i.clickableInfo=t,i},s.extractDynamicProperties=a,s.computeParsableState=function(e){return i.__assign(i.__assign({type:"simulation",id:e.id},a(e)),{guid:"",index:0})}});
define('graphing-calc/models/simulation',["require","exports","tslib","./abstract-item","core/lib/deepCopy","core/lib/copy-properties","core/graphing-calc/json/simulation","underscore","../../core/graphing-calc/json/simulation"],function(require,e,c,i,u,a,l,n,r){"use strict";function t(e){var t=l.computeParsableState(e);t.index=e.index,t.guid=e.guid,e.cachedParsableState=t}function o(e){e.cachedViewState=c.__assign({type:e.type,id:e.id,folderId:e.folderId,secret:e.secret,isPlaying:e.isPlaying},l.extractDynamicProperties(e))}function f(e){var t=e.cachedViewState;e.cachedUndoRedoDiffState=t,e.cachedUndoRedoFullState=t}Object.defineProperty(e,"__esModule",{value:!0}),e.getFPSPackedError=e.getEvaluatedFPS=e.isIdentifierAnOutput=e.getAllOutputs=e.setFPS=e.setIsPlaying=e.removeClickableInfoRule=e.addClickableInfoRule=e.setClickableInfoRuleProp=e.setClickableInfoProp=e.getClickableInfoRulePackedError=e.getClickableInfoUpdateIdentifier=e.getClickableInfoUpdateLatex=e.getEvaluatedClickableRule=e.getClickableInfoPropLatex=e.isClickableRuleDefined=e.restoreState=e.initModel=e.updateCachedUndoRedoState=e.updateCachedViewState=e.getState=e.getMissingVariables=e.onFormulaUpdate=e.onControllerUpdate=e.updateCachedParsableState=e.setSecret=e.eachLatex=void 0,e.eachLatex=function(e,t){t(e.fps)},e.setSecret=function(e,t){e.secret=t},e.updateCachedParsableState=t,e.onControllerUpdate=function(e){i.updateIsHiddenFromUI(e),o(e),f(e),t(e)},e.onFormulaUpdate=function(e,t){e.formula=t},e.getMissingVariables=function(e){return e.formula&&e.formula.variables||[]},e.getState=function(e,t){var a=e.cachedViewState;return t.stripDefaults?l.stripDefaults(a):a},e.updateCachedViewState=o,e.updateCachedUndoRedoState=f,e.initModel=function(e,t){var a=u.default(l.inflateDefaults(e));return c.__assign(c.__assign(c.__assign({},a),i.DEFAULTS(t)),{formula:void 0,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{}})};var s=c.__assign({id:!1,type:!1,folderId:!0,secret:!0,isPlaying:!0},a.makeTrueMap(r.DEFAULTS_DYNAMIC));function d(e,t){var a=e.formula.clickableinfo_data;if(a)return a[t]}function b(e,t){if(e.formula){var a=d(e,t);if(a)return a.identifier}}function p(e){for(var t={},a=0,i=e.clickableInfo.rules;a<i.length;a++){var l=b(e,i[a].id);l&&(t[l]=!0)}return t}e.restoreState=function(e,t){a.copyProperties({from:t,to:e,props:s})},e.isClickableRuleDefined=function(e,t){for(var a=0,i=e.clickableInfo.rules;a<i.length;a++){if(i[a].id===t)return!0}return!1},e.getClickableInfoPropLatex=function(e,t,a){for(var i=0,l=e.clickableInfo.rules;i<l.length;i++){var n=l[i];if(n.id===t)return n[a]}return""},e.getEvaluatedClickableRule=d,e.getClickableInfoUpdateLatex=function(e,t){if(e.formula){var a=d(e,t);if(a)return a.latex}},e.getClickableInfoUpdateIdentifier=b,e.getClickableInfoRulePackedError=function(e,t){if(e.formula){var a=d(e,t);if(a)return a.error}},e.setClickableInfoProp=function(e,t,a){var i;e.clickableInfo=c.__assign(c.__assign({},e.clickableInfo),((i={})[t]=a,i))},e.setClickableInfoRuleProp=function(e,t,a,i){for(var l=u.default(e.clickableInfo.rules),n=0,r=l;n<r.length;n++){var o=r[n];o.id===t&&(o[a]=i)}e.clickableInfo=c.__assign(c.__assign({},e.clickableInfo),{rules:l})},e.addClickableInfoRule=function(e,t){e.clickableInfo=u.default(e.clickableInfo),e.clickableInfo.rules.push({id:t,assignment:"",expression:""})},e.removeClickableInfoRule=function(e,t){e.clickableInfo=u.default(e.clickableInfo),e.clickableInfo.rules=n.filter(e.clickableInfo.rules,function(e){return e.id!==t}),0===e.clickableInfo.rules.length&&(e.clickableInfo.rules=r.CLICKABLEINFO_DEFAULTS.rules,e.clickableInfo.enabled=!1)},e.setIsPlaying=function(e,t){e.isPlaying!==t&&e.controller.invalidatePlayingSimulationCache(),e.isPlaying=t},e.setFPS=function(e,t){e.fps=t},e.getAllOutputs=p,e.isIdentifierAnOutput=function(e,t){return p(e)[t]},e.getEvaluatedFPS=function(e){if(!e.formula)return 0;var t=e.formula.fps;return 0<t?t:0},e.getFPSPackedError=function(e){if(e.formula)return e.formula.fps_error}});
define('core/math/policyGraphing',["require","exports","./builtinframe","core/types/graphmode"],function(require,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyGraphing3D=t.PolicyGraphing=void 0;var e=(i.prototype.dimensions=function(){return 2},i.prototype.assignmentForbidden=function(t){return"x"===t||"y"===t||"theta"===t||"tmp"===t.slice(0,3)||r.hasOwnProperty(t)},i.prototype.isValidSlider=function(t){return"x"===t||"y"===t||"ans"!==t.slice(0,3)&&!this.assignmentForbidden(t)},i.prototype.sliderVariables=function(t){var r=this;return-1!==t.indexOf("theta")&&(t=t.filter(function(t){return"r"!==t})),t.filter(function(t){return!r.assignmentForbidden(t)&&"ans"!==t.slice(0,3)})},i.prototype.graphingEnabled=function(){return!0},i.prototype.ansEnabled=function(){return!1},i.prototype.validRegressionParameter=function(t){return"x"!==t&&"y"!==t},i.prototype.validLHS=function(t){return"theta"!==t},i.prototype.unplottablePolarFunction=function(t,r){return"theta"===t&&-1!==r.indexOf("r")},i.prototype.validDoubleInequalitySymbol=function(t){return"x"===t||"y"===t},i.prototype.validDoubleInequalityVariables=function(t){return!(2<t.length)&&t.every(this.validDoubleInequalitySymbol)},i.prototype.validExpressionVariables=function(t){return 1===t.length&&"x"===t[0]},i.prototype.validSolvedVariable=function(t){return"x"===t||"y"===t||"r"===t},i.prototype.validImplicitVariables=function(t){switch(t.length){case 0:return!0;case 1:return"x"===t[0]||"y"===t[0]||"r"===t[0];case 2:return"x"===t[0]&&"y"===t[1]||"y"===t[0]&&"x"===t[1]||"r"===t[0]&&"theta"===t[1]||"theta"===t[0]&&"r"===t[1];default:return!1}},i.prototype.graphableListVariables=function(t,r){return"x"===t||"y"===t||"r"===t||"x"===r||"y"===r},i.prototype.validParametricVariable=function(t){return"t"===t},i.prototype.validParametricVariables=function(t){return 1===t.length&&this.validParametricVariable(t[0])},i.prototype.validInequalityVariables=function(t){switch(t.length){case 1:return"x"===t[0]||"y"===t[0]||"r"===t[0];case 2:return this.validImplicitVariables(t);default:return!1}},i.prototype.validFirstColumnVariable=function(t){return"y"!==t&&"r"!==t&&"theta"!==t&&!t.match(/y_(\d+)/)},i.prototype.complicatedPolarImplicit=function(t,r){return"theta"===t||"r"===t&&1!==r},i.prototype.constantGraphMode=function(t){return"x"===t?n.X:"r"===t?n.POLAR:n.Y},i.prototype.graphMode=function(t,r){var e=r[0];return"y"===e||"x"===t?n.X:"r"===t&&"theta"===e?n.POLAR:n.Y},i.prototype.tableableAsConstant=function(t){return"x"!==t&&"r"!==t&&"theta"!==t},i.prototype.implicitIndependent=function(t){return"x"},i.prototype.implicitDependency=function(t){return 1!==t.length?"y":"y"===t[0]?"x":"theta"===t[0]?"r":"y"},i.prototype.graphableAsConstant=function(t){return"y"===t||"x"===t||"r"===t},i.prototype.disabledFeatures=function(){return[]},i);function i(){}var o=(a.prototype.dimensions=function(){return 3},a.prototype.assignmentForbidden=function(t){return"x"===t||"y"===t||"z"===t||"tmp"===t.slice(0,3)||r.hasOwnProperty(t)},a.prototype.isValidSlider=function(t){return"x"===t||"y"===t||"z"===t||"ans"!==t.slice(0,3)&&!this.assignmentForbidden(t)},a.prototype.sliderVariables=function(t){var r=this;return t.filter(function(t){return!r.assignmentForbidden(t)&&"ans"!==t.slice(0,3)})},a.prototype.graphingEnabled=function(){return!0},a.prototype.ansEnabled=function(){return!1},a.prototype.validRegressionParameter=function(t){return!1},a.prototype.validLHS=function(t){return!0},a.prototype.unplottablePolarFunction=function(t,r){return!1},a.prototype.validDoubleInequalitySymbol=function(t){return!1},a.prototype.validDoubleInequalityVariables=function(t){return!1},a.prototype.validExpressionVariables=function(t){var r=t.join("");return"x"===r||"y"===r||"xy"===r||"yx"===r},a.prototype.validSolvedVariable=function(t){return"x"===t||"y"===t||"z"===t},a.prototype.validImplicitVariables=function(t){return!1},a.prototype.graphableListVariables=function(t,r){return"x"===t||"y"===t||"x"===r||"y"===r},a.prototype.validParametricVariable=function(t){return"t"===t},a.prototype.validParametricVariables=function(t){return 1===t.length&&this.validParametricVariable(t[0])},a.prototype.validInequalityVariables=function(t){return!1},a.prototype.validFirstColumnVariable=function(t){return!1},a.prototype.complicatedPolarImplicit=function(t,r){return!1},a.prototype.constantGraphMode=function(t){return n.Z_3D},a.prototype.graphMode=function(t,r){return"z"===t&&this.validExpressionVariables(r)?n.Z_3D:n.NONE},a.prototype.tableableAsConstant=function(t){return"x"!==t&&"r"!==t},a.prototype.implicitIndependent=function(t){return"x"},a.prototype.implicitDependency=function(t){if(2!==t.length)return"z";var r=t[0]<t[1]?t[0]+t[1]:t[1]+t[0];return"xy"===r?"z":"xz"===r?"y":"yz"===r?"x":"z"},a.prototype.graphableAsConstant=function(t){return"z"===t},a.prototype.disabledFeatures=function(){return[]},a);function a(){}t.PolicyGraphing=new e,t.PolicyGraphing3D=new o});
define('graphing-calc/models/expression',["require","exports","parser","core/math/builtinframe","tslib","core/lib/dragmode","core/types/slider-loop-modes","core/types/styles","core/types/label-sizes","core/types/label-orientations","core/math/evaluate-single-expression","lib/rounding","core/lib/deepCopy","core/lib/copy-properties","./abstract-item","./list","underscore","core/math/expression-types","core/lib/label","core/lib/number-to-latex","core/math/sliders","core/lib/number-to-latex","core/lib/validate-color","./simulation","core/graphing-calc/json/expression","core/math/distribution-spec","core/math/policyGraphing"],function(require,e,t,r,s,a,m,n,i,l,d,g,u,o,c,f,p,b,x,v,S,_,L,h,D,M,y){"use strict";function P(e){return void 0===e?NaN:+e}function T(e){var i=e.formula;return!!i&&(e.controller.isDecimalToFractionEnabled()&&i.hasOwnProperty("constant_value")&&x.canDisplayAsFraction(P(i.constant_value)))}function E(e){var i=e.formula;if(!i)return!1;var a=i.is_evaluable&&i.zero_values&&0<i.zero_values.length&&"boolean"!=typeof i.zero_values[0].val,t=T(e)&&J(e),r=!!i.rgb_value;return a||t||r}function F(e,i){if(!isFinite(i))return e;var a=/=(.*?)([-\.0-9]+)/,t=e.match(a);if(!t)return e;if(parseFloat(t[2])===i)return e;var r=_.numberToDecimalString(i);return e.replace(a,"=$1"+r)}function V(e){var i=e.dragMode===a.DragMode.AUTO&&void 0!==e.formula.default_drag_mode?e.formula.default_drag_mode:e.dragMode;e.reconciledDragMode=a.reconcileDragMode(i,e.formula.move_strategy),e.interactiveLabel&&e.reconciledDragMode!==a.DragMode.NONE&&Q(e,!1)}function A(e,i,a){if(!e.sliderExists)return NaN;var t=k(e),r=N(e),n=w(e);if(a&&void 0!==a.overwriteStep&&(n=a.overwriteStep),i=S.constrainSliderValueLikeEvaluator({target:i,hardMin:e.slider.hardMin?t:void 0,hardMax:e.slider.hardMax?r:void 0,step:n}),!a||!a.ignoreSoftLimits){if(!e.slider.hardMin&&i<t)return t;if(!e.slider.hardMax&&r<i)return r}return i}function O(e){var i=f.getParentFolderModel(e);i&&i.hidden||e.formula.expression_type&&Z(e)?e.shouldGraph=!1:e.shouldGraph=!e.hidden}function C(e){var i,a,t,r=e.formula&&e.formula.raw_slider_latex;e.sliderExists&&e.latex===r?(i=e.latex,e.cachedDisplayLatex.storedLatex===i?(a=R(e),isFinite(a)&&((t=e.controller.getFocusLocation())&&"expression"===t.type&&t.id===e.id||(e.cachedDisplayLatex.valueLatex=F(e.latex,a)))):e.cachedDisplayLatex={storedLatex:e.latex,valueLatex:e.latex}):e.cachedDisplayLatex={storedLatex:e.latex,valueLatex:e.latex}}function I(e){var i=x.value(e);return i.superscript&&i.mantissa?i.mantissa+"^{"+i.superscript+"}":i.string}function k(e){if(e.slider.hardMin){var i=e.formula.slider_min_number;return isFinite(i)?i:NaN}var a,t=e.controller.isDegreeMode(),r=d.default(e.slider.min,t),n=z(e),l=w(e),o=e.slider.hardMax?e.formula.slider_max_number:void 0,s=-10;return r<s&&(s=r),n<s&&(s=n),o<s&&(s=o),l&&(s=(a=S.constrainSliderValueLikeEvaluator({target:s,hardMin:void 0,hardMax:o,step:l}))<=s?a:a-l),s}function N(e){if(e.slider.hardMax){var i=e.formula.slider_max_number;return isFinite(i)?i:NaN}var a=e.controller.isDegreeMode(),t=d.default(e.slider.max,a),r=z(e),n=w(e),l=e.slider.hardMin?e.formula.slider_min_number:void 0;return S.computeSoftMax({storedMax:t,sliderValue:r,step:n,hardMin:l})}function w(e){return e.formula.slider_step_number}function R(e){if(e.formula&&e.formula.is_slider){var i=e.formula.constant_value;if(void 0!==i)return+i}}function z(e){var i=e.formula&&e.formula.raw_slider_latex;if(e.latex!==i)return $(e.latex);var a=R(e);return isFinite(a)?a:NaN}function U(e,i){var a=e.formula.clickableinfo_data;if(a)return a[i]}function G(e){var i=e.cachedViewState;i&&D.areDynamicPropertiesStrictEqual(i,e)&&i.folderId===e.folderId&&i.color===e.color&&i.latex===e.latex&&i.showLabel===e.showLabel&&i.label===e.label&&i.hidden===e.hidden&&i.secret===e.secret&&i.fill===e.fill&&i.points===e.points&&i.lines===e.lines&&i.lineStyle===e.lineStyle&&i.pointStyle===e.pointStyle&&i.dragMode===e.dragMode&&i.labelSize===e.labelSize&&i.labelOrientation===e.labelOrientation&&i.verticalLabel===e.verticalLabel&&i.suppressTextOutline===e.suppressTextOutline&&i.interactiveLabel===e.interactiveLabel&&i.editableLabelMode===e.editableLabelMode&&i.residualVariable===e.residualVariable&&i.regressionParameters===e.regressionParameters&&i.isLogModeRegression===e.isLogModeRegression&&i.displayEvaluationAsFraction===e.displayEvaluationAsFraction&&i.slider===e.slider||(e.cachedViewState=s.__assign({type:e.type,id:e.id,folderId:e.folderId,color:e.color,latex:e.latex,showLabel:e.showLabel,label:e.label,hidden:e.hidden,secret:e.secret,points:e.points,lines:e.lines,lineStyle:e.lineStyle,pointStyle:e.pointStyle,fill:e.fill,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,verticalLabel:e.verticalLabel,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,displayEvaluationAsFraction:e.displayEvaluationAsFraction,slider:e.slider},D.extractDynamicProperties(e)))}function B(e){var i,a=e.memoizedUndoRedoStateParams,t=e.cachedViewState,r=e.preTransientState;e.cachedUndoRedoFullState=t,a&&a.viewState===t&&a.preTransientState===r||(e.memoizedUndoRedoStateParams={viewState:t,preTransientState:r},delete(i=r?s.__assign(s.__assign({},t),{latex:r.latex,slider:s.__assign(s.__assign({},t.slider),r.slider)}):s.__assign({},t)).regressionParameters,delete i.residualVariable,e.cachedUndoRedoDiffState=i)}function j(e){var i,a=f.getParentFolderModel(e),t=!(!a||!a.hidden),r=e.cachedViewState,n=e.index,l=e.showLabel&&!t,o=e.shouldGraph,s=e.memoizedParsableStateParams;s&&s.viewState===r&&s.index===n&&s.showLabel===l&&s.shouldGraph===o||(e.memoizedParsableStateParams={viewState:r,index:n,showLabel:l,shouldGraph:o},(i=D.computeParsableState(r)).index=n,i.showLabel=l,i.shouldGraph=o,e.cachedParsableState=i)}function Y(e){return e.formula&&e.formula.assignment}function W(e){return!(!e.sliderExists||!e.slider.isPlaying&&!e.sliderDragging)||!!e.draggingOnGraphpaper}Object.defineProperty(e,"__esModule",{value:!0}),e.blankOutExpressionAfterClearingLatex=e.isClickableAllowed=e.getCDFEvaluation=e.getColorLatexValue=e.isColorLatexValid=e.isLineWidthValid=e.isPointOpacityValid=e.isLineOpacityValid=e.isFillOpacityValid=e.isCDFMaxValid=e.isCDFMinValid=e.setCDFMax=e.setCDFMin=e.setShowCDF=e.getCDFMaxPlaceholder=e.getCDFMinPlaceholder=e.getCDFMax=e.getCDFMin=e.shouldShowCDFFooter=e.isListValuedDistribution=e.isPrimaryLatexValid=e.shouldShowCDFCheckbox=e.parseToplevelFunction=e.isDiscreteDistribution=e.isToplevelDistribution=e.isToplevelFunction=e.isStats=e.isTTest=e.isVisualization=e.isHistogram=e.isDotPlot=e.isBoxPlot=e.isPointOrPointList=e.isPointList=e.isSinglePoint=e.isPolar=e.isParametric=e.isPolygon=e.hasSlider=e.getParametricDomainMax=e.getParametricDomainMin=e.getPolarDomainMax=e.getPolarDomainMin=e.hasDomain=e.areAllVisibilityPropsOff=e.setHidden=e.hasEditableLabel=e.getEditableLabelMode=e.setEditableLabelMode=e.setInteractiveLabel=e.setSuppressTextOutline=e.setVerticalLabel=e.setLabelOrientation=e.setLabelSize=e.setLineStyle=e.setLines=e.setPointStyle=e.setPoints=e.setDragMode=e.setLabelDropdownOpen=e.setColorLatex=e.setLineWidth=e.setPointOpacity=e.setLineOpacity=e.setFillOpacity=e.setFill=e.setColor=e.setLogMode=e.setParametricDomainMax=e.setPolarDomainMax=e.setParametricDomainMin=e.setPolarDomainMin=e.setShowLabel=e.setLabel=e.setEvaluationAsFraction=e.shouldEvaluationDisplayAsFraction=e.setSliderAnimationPeriod=e.setSliderStep=e.setSliderDragging=e.setSliderLoopMode=e.setLatex=e.extractSliderValueFromLatex=e.commitSliderSoftLimits=e.setSliderIsPlaying=e.setSliderMax=e.setSliderMin=e.restoreState=e.onControllerUpdate=e.isTransientAndShouldBlockSimulation=e.getAssignment=e.eachLatex=e.updateCachedParsableState=e.initModel=e.updateCachedUndoRedoState=e.setIsDraggingOnGrapher=e.updateCachedViewState=e.getState=e.isDomainMaxValid=e.isDomainMinValid=e.getDomainMax=e.getDomainMin=e.isSliderStepValid=e.isSliderMaxValid=e.isSliderMinValid=e.needsDotplotXMode=e.isClickableObject=e.removeClickableInfoRule=e.addClickableInfoRule=e.setClickableInfoRuleProp=e.setClickableInfoProp=e.getClickableInfoUpdateIdentifier=e.getClickableInfoUpdateLatex=e.getClickableInfoRulePackedError=e.getEvaluatedClickableRule=e.getClickableInfoPropLatex=e.isClickableRuleDefined=e.setVizProp=e.getVizProp=e.isVizPropValid=e.isSliderAtEndOfPlayOnce=e.getSliderValue=e.getRawSliderValue=e.getSliderStep=e.getSliderMax=e.getSliderMin=e.getDisplaySliderMax=e.getDisplaySliderMin=e.getDisplayLatex=e.updateDisplayLatex=e.computeShouldGraph=e.onFormulaUpdate=e.getMissingVariables=e.tickSliderStep=e.adjustSliderByDraggingThumb=e.adjustSliderByKeyboard=e.adjustSliderByMovablePoint=e.updateReconciledDragMode=e.isEmpty=e.computeNewSliderLatex=e.getStatsResults=e.getTTestResults=e.getEvaluationValue=e.shouldShowEvaluation=e.isGraphable=e.isRationalizableConstant=e.EvaluationLabelOptions=void 0,e.EvaluationLabelOptions={smallCutoff:1e-6,bigCutoff:1e9,digits:12},e.isRationalizableConstant=T,e.isGraphable=function(e){return!(!e.formula||!e.formula.is_graphable)},e.shouldShowEvaluation=E,e.getEvaluationValue=function(e){var i=e.formula;return E(e)?i.zero_values&&i.zero_values.length?i.zero_values[0].val:i.rgb_value?i.rgb_value:i.constant_value:T(e)?e.formula.constant_value:NaN},e.getTTestResults=function(e){var i=e.formula.ttest_results;if(i&&isFinite(i.lessThan))return{lessThan:i.lessThan,greaterThan:i.greaterThan,notEqual:i.notEqual}},e.getStatsResults=function(e){var i=e.formula.stats_results;if(i&&isFinite(i.min))return{min:i.min,q1:i.q1,median:i.median,q3:i.q3,max:i.max}},e.computeNewSliderLatex=F,e.isEmpty=function(e){return""===((e.latex||"")+(e.label||"")).split(" ").join("")},e.updateReconciledDragMode=V,e.adjustSliderByMovablePoint=function(e,i){var a;e.sliderExists&&(e.slider.isPlaying&&K(e,!1),a=A(e,i,{ignoreSoftLimits:!0}),e.latex=F(e.latex,a))},e.adjustSliderByKeyboard=function(e,i){var a;e.sliderExists&&(e.slider.isPlaying&&K(e,!1),X(e),a=function(e,i){if(!e.sliderExists)return NaN;var a=z(e),t=k(e),r=N(e),n=w(e),l=n||(r-t)/20,o=0;switch(i){case"min":return A(e,t);case"max":return A(e,r);case"up":o=1;break;case"down":o=-1;break;case"bigup":o=5;break;case"bigdown":o=-5;break;default:return i}for(var s=a,d=0;d<20;d++){var u=d/3*l,c=a;if(0<o)c<(a=A(e,s+u,{overwriteStep:l}))&&--o;else{if(!(o<0))break;(a=A(e,s-u,{overwriteStep:l}))<c&&(o+=1)}}return a}(e,i),e.latex=F(e.latex,a))},e.adjustSliderByDraggingThumb=function(e,i){var a;e.sliderExists&&(e.slider.isPlaying&&K(e,!1),a=A(e,i),e.latex=F(e.latex,a))},e.tickSliderStep=function(e,i){if(e.sliderExists&&!e.resetSliderAnimationTargetValue){var a=e.sliderLastTickTime;if(e.sliderLastTickTime=i,void 0!==a){var t,r=i-a,n=k(e),l=N(e),o=w(e),s=e.slider.animationPeriod,d=e.slider.loopMode;isNaN(e.sliderAnimationTargetValue)&&(t=z(e),isNaN(t)||(e.sliderAnimationTargetValue=t));var u,c,f,p=o?o/2:0;if(d===m.SliderLoopMode.LOOP_FORWARD_REVERSE)e.sliderAnimationTargetValue>=l?H(e,{playDirection:-1}):e.sliderAnimationTargetValue<=n&&H(e,{playDirection:1});else if(d===m.SliderLoopMode.LOOP_FORWARD)H(e,{playDirection:1}),e.sliderAnimationTargetValue>=l+p&&(e.sliderAnimationTargetValue=n-p);else if(d===m.SliderLoopMode.PLAY_ONCE)H(e,{playDirection:1});else{if(d!==m.SliderLoopMode.PLAY_INDEFINITELY)throw new Error("Unexpected slider loop mode: "+d);H(e,{playDirection:1})}isFinite(r)||(r=0),c=d===m.SliderLoopMode.PLAY_INDEFINITELY?(f=r/(s/4),o&&(f*=o),e.sliderAnimationTargetValue+=f,c=e.sliderAnimationTargetValue,o||(c=g.shortestDecimalBetween(c-.1*f,c+.1*f)),A(e,c,{ignoreSoftLimits:!0})):(f=(l-n)*(r=Math.min(r,s/10))/s,e.sliderAnimationTargetValue+=f*e.slider.playDirection,e.sliderAnimationTargetValue=Math.max(n-p,Math.min(l+p,e.sliderAnimationTargetValue)),c=e.sliderAnimationTargetValue,o||(u=f/r*(1e3/60),c=g.shortestDecimalBetween(c-.1*u,c+.1*u)),A(e,c)),e.latex=F(e.latex,c)}}},e.getMissingVariables=function(e){var i=e.formula;return i&&!i.is_single_identifier&&i.variables||[]},e.onFormulaUpdate=function(e,i){e.formula=i,e.error=i.error,e.unresolved=!1,i.is_slider?e.sliderExists&&!e.resetSliderAnimationTargetValue||(e.sliderAnimationTargetValue=z(e),e.sliderDragging=!1,e.sliderExists=!0):e.sliderExists=!1,e.resetSliderAnimationTargetValue=!1;var a={};i.is_regression&&(a=i.regression.parameters,e.residualVariable=i.regression.residualVariable),p.isEqual(e.regressionParameters,a)||(e.regressionParameters=a)},e.computeShouldGraph=O,e.updateDisplayLatex=C,e.getDisplayLatex=function(e){return e.cachedDisplayLatex.valueLatex},e.getDisplaySliderMin=function(e){return e.slider.hardMin?e.slider.min:I(k(e))},e.getDisplaySliderMax=function(e){return e.slider.hardMax?e.slider.max:I(N(e))},e.getSliderMin=k,e.getSliderMax=N,e.getSliderStep=w,e.getRawSliderValue=R,e.getSliderValue=z,e.isSliderAtEndOfPlayOnce=function(e){return e.slider.loopMode===m.SliderLoopMode.PLAY_ONCE&&z(e)>=N(e)},e.isVizPropValid=function(e,i){return!!e.formula.viz_valids&&!!e.formula.viz_valids[i]},e.getVizProp=function(e,i){return e.vizProps[i]},e.setVizProp=function(e,i,a){var t;e.vizProps=s.__assign(s.__assign({},e.vizProps),((t={})[i]=a,t))},e.isClickableRuleDefined=function(e,i){for(var a=0,t=e.clickableInfo.rules;a<t.length;a++){if(t[a].id===i)return!0}return!1},e.getClickableInfoPropLatex=function(e,i,a){for(var t=0,r=e.clickableInfo.rules;t<r.length;t++){var n=r[t];if(n.id===i)return n[a]}return""},e.getEvaluatedClickableRule=U,e.getClickableInfoRulePackedError=function(e,i){if(e.formula){var a=U(e,i);if(a)return a.error}},e.getClickableInfoUpdateLatex=function(e,i){var a=U(e,i);if(a)return a.latex},e.getClickableInfoUpdateIdentifier=function(e,i){var a=U(e,i);if(a)return a.identifier},e.setClickableInfoProp=function(e,i,a){var t;e.clickableInfo=s.__assign(s.__assign({},e.clickableInfo),((t={})[i]=a,t))},e.setClickableInfoRuleProp=function(e,i,a,t){for(var r=u.default(e.clickableInfo.rules),n=0,l=r;n<l.length;n++){var o=l[n];o.id===i&&(o[a]=t)}e.clickableInfo=s.__assign(s.__assign({},e.clickableInfo),{rules:r})},e.addClickableInfoRule=function(e,i){e.clickableInfo=u.default(e.clickableInfo),e.clickableInfo.rules.push({id:i,assignment:"",expression:""})},e.removeClickableInfoRule=function(e,i){e.clickableInfo=u.default(e.clickableInfo),e.clickableInfo.rules=p.filter(e.clickableInfo.rules,function(e){return e.id!==i}),0===e.clickableInfo.rules.length&&(e.clickableInfo.enabled=!1,e.clickableInfo.rules=D.CLICKABLEINFO_DEFAULTS.rules)},e.isClickableObject=function(e){return e.clickableInfo.enabled&&ue(e)},e.needsDotplotXMode=function(e){return!!e.__workerNeedsDotplotXMode},e.isSliderMinValid=function(e){return!(!e.formula||!e.formula.slider_min_valid)},e.isSliderMaxValid=function(e){return!(!e.formula||!e.formula.slider_max_valid)},e.isSliderStepValid=function(e){return!(!e.formula||!e.formula.slider_step_valid)},e.getDomainMin=function(e){if(!e.formula)return NaN;if(isFinite(e.__workerSampledDomainMin))return e.__workerSampledDomainMin;var i=e.formula.domain_min_number;return isFinite(i)?i:NaN},e.getDomainMax=function(e){if(!e.formula)return NaN;if(isFinite(e.__workerSampledDomainMax))return e.__workerSampledDomainMax;var i=e.formula.domain_max_number;return isFinite(i)?i:NaN},e.isDomainMinValid=function(e){return!(!e.formula||!e.formula.domain_min_valid)},e.isDomainMaxValid=function(e){return!(!e.formula||!e.formula.domain_max_valid)},e.getState=function(e,i){var a=e.cachedViewState;if(i.stripDefaults&&""===e.parametricDomain.min&&""===e.parametricDomain.max||(a=s.__assign(s.__assign({},a),{domain:{min:""===e.parametricDomain.min?"0":e.parametricDomain.min,max:""===e.parametricDomain.max?"1":e.parametricDomain.max}})),i.stripDefaults)return D.stripDefaults(a);if(void 0!==a.points&&void 0!==a.lines&&void 0!==a.fill)return a;var t=u.default(a);return void 0===t.points&&delete t.points,void 0===t.lines&&delete t.lines,void 0===t.fill&&delete t.fill,t},e.updateCachedViewState=G,e.setIsDraggingOnGrapher=function(e,i){i&&X(e),e.draggingOnGraphpaper=i},e.updateCachedUndoRedoState=B,e.initModel=function(e,i){var a=u.default(D.inflateDefaults(e)),t=a.color;return t&&L.default(t)||(t=i.getNextColor()),s.__assign(s.__assign(s.__assign({},a),c.DEFAULTS(i)),{labelDropdownOpen:!1,formula:{error:void 0,operator:"=",variables:[]},error:void 0,unresolved:!1,color:t,pointStyle:a.pointStyle,lineStyle:a.lineStyle,displayEvaluationAsFraction:a.displayEvaluationAsFraction,shouldGraph:void 0,sliderDragging:void 0,sliderAnimationTargetValue:void 0,resetSliderAnimationTargetValue:!1,sliderLastTickTime:void 0,draggingOnGraphpaper:!1,cachedUndoRedoDiffState:void 0,cachedUndoRedoFullState:void 0,cachedParsableState:void 0,cachedViewState:void 0,cachedDisplayLatex:{storedLatex:"",valueLatex:""}})},e.updateCachedParsableState=j,e.eachLatex=function(e,i){i(e.latex),ee(e)&&(i(e.parametricDomain.min),i(e.parametricDomain.max)),ie(e)&&(i(e.polarDomain.min),i(e.polarDomain.max)),e.sliderExists&&(i(e.slider.min),i(e.slider.max),i(e.slider.step)),e.residualVariable&&i(e.residualVariable)},e.getAssignment=Y,e.isTransientAndShouldBlockSimulation=W,e.onControllerUpdate=function(e){W(e)||function(e){var i=Y(e);if(!i)return!1;var a=e.controller.getPlayingSimulation();return!(!a||!h.isIdentifierAnOutput(a,i))}(e)?e.preTransientState||(e.preTransientState={latex:e.latex,slider:{min:e.slider.min,max:e.slider.max,playDirection:e.slider.playDirection}}):delete e.preTransientState,e.sliderExists&&e.slider.isPlaying||(e.sliderLastTickTime=void 0),c.updateIsHiddenFromUI(e),O(e),V(e),G(e),B(e),j(e),C(e)};var q=s.__assign({id:!1,type:!1,color:!0,folderId:!0,latex:!0,showLabel:!0,label:!0,hidden:!0,secret:!0,points:!0,lines:!0,lineStyle:!0,pointStyle:!0,fill:!0,dragMode:!0,labelSize:!0,labelOrientation:!0,verticalLabel:!0,suppressTextOutline:!0,interactiveLabel:!0,editableLabelMode:!0,residualVariable:!0,regressionParameters:!0,isLogModeRegression:!0,displayEvaluationAsFraction:!0,slider:!0},o.makeTrueMap(D.DEFAULTS_DYNAMIC));function H(e,i){e.slider=s.__assign(s.__assign({},e.slider),i)}function K(e,i){e&&e.slider.isPlaying!==i&&(H(e,{isPlaying:i}),i&&(X(e),e.sliderAnimationTargetValue=z(e)))}function X(e){var i,a;e.slider.hardMin||(i=v.default(k(e)))!==e.slider.min&&H(e,{min:i}),e.slider.hardMax||(a=v.default(N(e)))!==e.slider.max&&H(e,{max:a})}function $(e){var i=t.parse(e);if("Assignment"!==i.type)return NaN;if("Constant"!==i._expression.type)return NaN;if(!y.PolicyGraphing.validLHS(i._symbol))return NaN;if(r[i._symbol])return NaN;var a=i._expression.asValue();return"number"==typeof a?a:NaN}function J(e){return e.displayEvaluationAsFraction}function Q(e,i){e.interactiveLabel=i}function Z(e){var i=e.points,a=e.lines,t=e.fill,r=b.getReconciledExpressionProps(e.formula.expression_type,{points:i,lines:a,fill:t});return!r.points&&!r.lines&&!r.fill}function ee(e){return e.formula.expression_type===b.ExpressionType.PARAMETRIC}function ie(e){return e.formula.expression_type===b.ExpressionType.POLAR}function ae(e){var i=le(e);return!(!i||"visualization"!==i.type||"boxplot"!==i.symbol)}function te(e){var i=le(e);return!(!i||"visualization"!==i.type||"dotplot"!==i.symbol)}function re(e){var i=le(e);return!(!i||"visualization"!==i.type||"histogram"!==i.symbol)}function ne(e){var i=le(e);return!(!i||"distribution"!==i.type)}function le(e){if(e.controller.areDistributionsEnabled()&&e.latex)return e.cachedParseToplevelFunction&&e.cachedParseToplevelFunction.latex===e.latex||(e.cachedParseToplevelFunction={latex:e.latex,spec:M.parseToplevelFunction(e.latex)}),e.cachedParseToplevelFunction.spec}function oe(e){return se(e)&&ne(e)}function se(e){return!!e.formula.expression_type}function de(e){return!!e.formula.is_concrete_list}function ue(e){return!!b.isClickableExpressionType(e.formula.expression_type)&&(!e.reconciledDragMode||e.reconciledDragMode===a.DragMode.NONE)}e.restoreState=function(e,i){o.copyProperties({from:i,to:e,props:q}),e.resetSliderAnimationTargetValue=!0,e.sliderAnimationTargetValue=void 0},e.setSliderMin=function(e,i){H(e,i?{hardMin:!0,min:i}:{hardMin:!1,min:"-10"})},e.setSliderMax=function(e,i){H(e,i?{hardMax:!0,max:i}:{hardMax:!1,max:"10"})},e.setSliderIsPlaying=K,e.commitSliderSoftLimits=X,e.extractSliderValueFromLatex=$,e.setLatex=function(e,i){var a,t=$(i);isFinite(t)&&((a=S.determineWhichLimitsAreCompatibleWithValue({target:t,step:w(e),hardMin:e.slider.hardMin?k(e):void 0,hardMax:e.slider.hardMax?N(e):void 0})).min||H(e,{hardMin:!1,min:"-10"}),a.max||H(e,{hardMax:!1,max:"10"}),a.step||H(e,{step:""})),e.latex=i},e.setSliderLoopMode=function(e,i){H(e,{loopMode:i,playDirection:1}),i===m.SliderLoopMode.PLAY_INDEFINITELY&&H(e,{hardMin:!1,hardMax:!1,min:"",max:""}),e.sliderAnimationTargetValue=k(e)},e.setSliderDragging=function(e,i){i&&X(e),e.sliderDragging=i},e.setSliderStep=function(e,i){H(e,{step:i})},e.setSliderAnimationPeriod=function(e,i){H(e,{animationPeriod:i})},e.shouldEvaluationDisplayAsFraction=J,e.setEvaluationAsFraction=function(e,i){e.displayEvaluationAsFraction=i},e.setLabel=function(e,i){e.label=i},e.setShowLabel=function(e,i){e.showLabel=i},e.setPolarDomainMin=function(e,i){e.polarDomain=s.__assign(s.__assign({},e.polarDomain),{min:i})},e.setParametricDomainMin=function(e,i){e.parametricDomain=s.__assign(s.__assign({},e.parametricDomain),{min:i})},e.setPolarDomainMax=function(e,i){e.polarDomain=s.__assign(s.__assign({},e.polarDomain),{max:i})},e.setParametricDomainMax=function(e,i){e.parametricDomain=s.__assign(s.__assign({},e.parametricDomain),{max:i})},e.setLogMode=function(e,i){e.isLogModeRegression=i},e.setColor=function(e,i){L.default(i)&&(e.color=i)},e.setFill=function(e,i){e.fill=i},e.setFillOpacity=function(e,i){e.fillOpacity!==i&&(e.fillOpacity=i)},e.setLineOpacity=function(e,i){e.lineOpacity!==i&&(e.lineOpacity=i)},e.setPointOpacity=function(e,i){e.pointOpacity!==i&&(e.pointOpacity=i)},e.setLineWidth=function(e,i){e.lineWidth!==i&&(e.lineWidth=i)},e.setColorLatex=function(e,i){e.colorLatex!==i&&(e.colorLatex=i)},e.setLabelDropdownOpen=function(e,i){e.labelDropdownOpen=i},e.setDragMode=function(e,i){e.dragMode!==i&&(e.dragMode=i)!==a.DragMode.NONE&&(e.pointStyle=n.PointStyle.POINT)},e.setPoints=function(e,i){e.points=i},e.setPointStyle=function(e,i){e.pointStyle!==i&&(e.pointStyle=i)!==n.PointStyle.POINT&&(e.dragMode=a.DragMode.NONE)},e.setLines=function(e,i){e.lines=i},e.setLineStyle=function(e,i){e.lineStyle!==i&&(e.lineStyle=i)},e.setLabelSize=function(e,i){e.labelSize=i},e.setLabelOrientation=function(e,i){e.labelOrientation=i},e.setVerticalLabel=function(e,i){e.verticalLabel=i},e.setSuppressTextOutline=function(e,i){e.suppressTextOutline=i},e.setInteractiveLabel=Q,e.setEditableLabelMode=function(e,i){e.editableLabelMode=i},e.getEditableLabelMode=function(e){return e.editableLabelMode},e.hasEditableLabel=function(e){var i=e.editableLabelMode;return i===D.EditableLabelMode.Math||i===D.EditableLabelMode.Text},e.setHidden=function(e,i){!(e.hidden=i)&&Z(e)&&(e.lines=e.points=e.fill=void 0)},e.areAllVisibilityPropsOff=Z,e.hasDomain=function(e){return ee(e)||ie(e)},e.getPolarDomainMin=function(e){return e.polarDomain.min},e.getPolarDomainMax=function(e){return e.polarDomain.max},e.getParametricDomainMin=function(e){return e.parametricDomain.min},e.getParametricDomainMax=function(e){return e.parametricDomain.max},e.hasSlider=function(e){return!!e.sliderExists},e.isPolygon=function(e){return e.formula.expression_type===b.ExpressionType.POLYGON},e.isParametric=ee,e.isPolar=ie,e.isSinglePoint=function(e){return e.formula.expression_type===b.ExpressionType.SINGLE_POINT},e.isPointList=function(e){return e.formula.expression_type===b.ExpressionType.POINT_LIST},e.isPointOrPointList=function(e){return e.formula.expression_type===b.ExpressionType.POINT_LIST||e.formula.expression_type===b.ExpressionType.SINGLE_POINT},e.isBoxPlot=ae,e.isDotPlot=te,e.isHistogram=re,e.isVisualization=function(e){return ae(e)||te(e)||re(e)},e.isTTest=function(e){return e.formula.expression_type===b.ExpressionType.TTEST},e.isStats=function(e){return e.formula.expression_type===b.ExpressionType.STATS},e.isToplevelFunction=function(e){return!!le(e)},e.isToplevelDistribution=ne,e.isDiscreteDistribution=function(e){var i=e.formula;return!!i&&!!i.is_discrete_distribution},e.parseToplevelFunction=le,e.shouldShowCDFCheckbox=oe,e.isPrimaryLatexValid=se,e.isListValuedDistribution=de,e.shouldShowCDFFooter=function(e){return!!oe(e)&&(!de(e)&&e.cdf.show)},e.getCDFMin=function(e){return e.cdf.min},e.getCDFMax=function(e){return e.cdf.max},e.getCDFMinPlaceholder=function(e){var i=P(e.formula.cdf_min_default);return i!==-1/0&&isFinite(i)?i+"":"-\\infty"},e.getCDFMaxPlaceholder=function(e){var i=P(e.formula.cdf_max_default);return i!==1/0&&isFinite(i)?i+"":"\\infty"},e.setShowCDF=function(e,i){e.cdf=s.__assign(s.__assign({},e.cdf),{show:i})},e.setCDFMin=function(e,i){e.cdf=s.__assign(s.__assign({},e.cdf),{min:i})},e.setCDFMax=function(e,i){e.cdf=s.__assign(s.__assign({},e.cdf),{max:i})},e.isCDFMinValid=function(e){return!!e.formula&&!1!==e.formula.cdf_min_valid},e.isCDFMaxValid=function(e){return!!e.formula&&!1!==e.formula.cdf_max_valid},e.isFillOpacityValid=function(e){return!!e.formula&&!1!==e.formula.fill_opacity_valid},e.isLineOpacityValid=function(e){return!!e.formula&&!1!==e.formula.line_opacity_valid},e.isPointOpacityValid=function(e){return!!e.formula&&!1!==e.formula.point_opacity_valid},e.isLineWidthValid=function(e){return!!e.formula&&!1!==e.formula.line_width_valid},e.isColorLatexValid=function(e){return!!e.formula&&!1!==e.formula.color_latex_valid},e.getColorLatexValue=function(e){return e.formula&&e.formula.color_latex_value},e.getCDFEvaluation=function(e){var i=e.formula&&e.formula.cdf_evaluation;return isFinite(i)?i:0},e.isClickableAllowed=ue,e.blankOutExpressionAfterClearingLatex=function(e){e.showLabel=D.DEFAULTS.showLabel,e.label=D.DEFAULTS.label,e.hidden=D.DEFAULTS.hidden,e.dragMode=D.DEFAULTS.dragMode,e.fill=D.DEFAULTS.fill,e.points=D.DEFAULTS.points,e.pointStyle=D.DEFAULTS.pointStyle,e.lines=D.DEFAULTS.lines,e.lineStyle=D.DEFAULTS.lineStyle,e.slider=D.SLIDER_DEFAULTS,e.latex="",e.labelSize=i.LabelSize.MEDIUM,e.labelOrientation=l.LabelOrientation.DEFAULT,e.displayEvaluationAsFraction=D.DEFAULTS.displayEvaluationAsFraction,e.verticalLabel=!1,e.suppressTextOutline=!1,e.interactiveLabel=!1,e.editableLabelMode=D.DEFAULTS.editableLabelMode,o.copyAllProperties(D.DEFAULTS_DYNAMIC,e)}});
define('core/graphing-calc/json/folder',["require","exports","tslib","core/lib/default-spec"],function(require,t,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripDefaults=t.inflateDefaults=t.DEFAULTS=void 0,t.DEFAULTS={collapsed:!1,hidden:!1,secret:!1,title:""},t.inflateDefaults=function(e){return s.__assign(s.__assign({},t.DEFAULTS),e)},t.stripDefaults=function(e){return i.stripDefaults(t.DEFAULTS,e)}});
define('graphing-calc/models/folder',["require","exports","tslib","core/lib/deepCopy","core/lib/copy-properties","./abstract-item","./list","core/graphing-calc/json/folder"],function(require,e,i,l,d,o,a,c){"use strict";function t(e){e.cachedViewState={type:e.type,id:e.id,title:e.title,hidden:e.hidden,collapsed:e.collapsed,secret:e.secret}}function n(e){e.cachedUndoRedoDiffState=e.cachedViewState,e.cachedUndoRedoFullState=e.cachedViewState}Object.defineProperty(e,"__esModule",{value:!0}),e.setHidden=e.setTitle=e.setCollapsed=e.updateSelectedHiddenChild=e.restoreState=e.onControllerUpdate=e.initModel=e.updateCachedUndoRedoState=e.updateCachedViewState=e.getState=void 0,e.getState=function(e,t){var d=e.cachedViewState;return t.stripDefaults?c.stripDefaults(d):d},e.updateCachedViewState=t,e.updateCachedUndoRedoState=n,e.initModel=function(e,t){var d=l.default(c.inflateDefaults(e));return i.__assign(i.__assign(i.__assign({},d),o.DEFAULTS(t)),{cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}})};var s={id:!(e.onControllerUpdate=function(e){r(e),o.updateIsHiddenFromUI(e),t(e),n(e)}),type:!1,hidden:!0,secret:!0,collapsed:!0,title:!0};function r(e){var t=e.controller,d=t.getSelectedItem();e.collapsed?d&&"folder"!==d.type&&d.folderId===e.id&&"none"===o.getDisplayState(d)?(e.selectedHiddenChild=d,a.setSelected(t.getListModel(),e)):d!==e&&(e.selectedHiddenChild=void 0):(d===e&&e.selectedHiddenChild&&a.setSelected(t.getListModel(),e.selectedHiddenChild),e.selectedHiddenChild=void 0)}e.restoreState=function(e,t){d.copyProperties({from:t,to:e,props:s})},e.updateSelectedHiddenChild=r,e.setCollapsed=function(e,t){e.collapsed=t},e.setTitle=function(e,t){e.title=t},e.setHidden=function(e,t){e.hidden=t}});
define('core/graphing-calc/json/text',["require","exports","tslib","core/lib/default-spec"],function(require,t,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripDefaults=t.inflateDefaults=t.DEFAULTS=void 0,t.DEFAULTS={folderId:"",text:"",secret:!1},t.inflateDefaults=function(e){return s.__assign(s.__assign({},t.DEFAULTS),e)},t.stripDefaults=function(e){return i.stripDefaults(t.DEFAULTS,e)}});
define('graphing-calc/models/text',["require","exports","tslib","./abstract-item","core/lib/deepCopy","core/lib/copy-properties","core/graphing-calc/json/text"],function(require,e,d,o,c,a,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.updateCachedUndoRedoState=e.updateCachedViewState=e.getState=e.restoreState=e.onControllerUpdate=e.initModel=e.setText=void 0,e.setText=function(e,t){e.text=t},e.initModel=function(e,t){var a=c.default(i.inflateDefaults(e));return d.__assign(d.__assign(d.__assign({},a),o.DEFAULTS(t)),{cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},cachedViewState:{}})};var r={id:!(e.onControllerUpdate=function(e){o.updateIsHiddenFromUI(e),t(e),n(e)}),type:!1,folderId:!0,text:!0,secret:!0};function t(e){e.cachedViewState={type:e.type,id:e.id,folderId:e.folderId,text:e.text,secret:e.secret}}function n(e){e.cachedUndoRedoDiffState=e.cachedViewState,e.cachedUndoRedoFullState=e.cachedViewState}e.restoreState=function(e,t){a.copyProperties({from:t,to:e,props:r})},e.getState=function(e,t){var a=e.cachedViewState;return t.stripDefaults?i.stripDefaults(a):a},e.updateCachedViewState=t,e.updateCachedUndoRedoState=n});
define('graphing-calc/models/helper-expression',["require","exports","core/math/evaluationstate","tslib","underscore","core/math/evaluationstate"],function(require,e,a,t,r,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.onFormulaUpdate=e.init=void 0,e.init=function(e){return t.__assign(t.__assign({},e),{formula:u.defaultEvaluationState(),cachedParsableState:{type:"statement",id:e.id,latex:e.latex,shouldGraph:!1}})},e.onFormulaUpdate=function(e,a,t){a.formula=t;var u,i=a.proxy,l={numericValue:i.numericValue,listValue:i.listValue};t.zero_values&&1===t.zero_values.length&&(u=t.zero_values[0].val),i.numericValue=r.isNumber(u)?u:NaN,i.listValue=r.isArray(u)?u.slice(0):void 0,r.isEqual(i.numericValue,l.numericValue)||e.runAfterDispatch(function(){i.notifyPropertyChange("numericValue")}),r.isEqual(i.listValue,l.listValue)||e.runAfterDispatch(function(){i.notifyPropertyChange("listValue")})}});
define('core/graphing-calc/json/image',["require","exports","tslib","core/lib/default-spec","../../lib/copy-properties"],function(require,n,i,s,t){"use strict";function r(e){return t.extractPropertiesLike(e,n.DEFAULTS_DYNAMIC)}Object.defineProperty(n,"__esModule",{value:!0}),n.computeParsableState=n.extractDynamicProperties=n.stripDefaults=n.inflateDefaults=n.DEFAULTS=n.DEFAULTS_DYNAMIC=n.CLICKABLEINFO_DEFAULTS=void 0,n.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",rules:[{id:"1",expression:"",assignment:""}],hoveredImage:"",depressedImage:""},n.DEFAULTS_DYNAMIC={center:"\\left(0,0\\right)",angle:"0",width:"10",height:"10",opacity:"1",clickableInfo:n.CLICKABLEINFO_DEFAULTS},n.DEFAULTS=i.__assign({folderId:"",hidden:!1,secret:!1,foreground:!1,name:""},n.DEFAULTS_DYNAMIC),n.inflateDefaults=function(e){return i.__assign(i.__assign(i.__assign({},n.DEFAULTS),e),{clickableInfo:i.__assign(i.__assign({},n.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})},n.stripDefaults=function(e){var i=s.stripDefaults(n.DEFAULTS,e),t=s.stripDefaultsAndMaybeReturnUndefined(n.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===t?delete i.clickableInfo:i.clickableInfo=t,i},n.extractDynamicProperties=r,n.computeParsableState=function(e){return i.__assign(i.__assign({type:"image",id:e.id},r(e)),{guid:"",index:0,color:"",shouldGraph:e.hidden,showPoints:!1})}});
define('graphing-calc/models/image',["require","exports","tslib","core/lib/color-helpers","./abstract-item","core/lib/deepCopy","core/lib/copy-properties","./list","jquery","core/graphing-calc/json/image","underscore"],function(require,e,c,t,o,d,r,n,i,l,s){"use strict";function u(e){var a=l.computeParsableState(e);a.color=e.color,a.index=e.index,a.guid=e.guid,a.shouldGraph=e.shouldGraph,a.showPoints=e.showPoints,e.cachedParsableState=a}function f(a){var e,r,t=a.cachedViewState.clickableInfo,o=!0,n=!0;t&&(t.depressedImage===a.clickableInfo.depressedImage&&(n=!1),t.hoveredImage===a.clickableInfo.hoveredImage&&(o=!1)),o&&(a.hoveredImageObj&&(i(a.hoveredImageObj).off("load"),delete a.hoveredImageObj),a.clickableInfo.hoveredImage&&(a.hoveredImageObj=new Image,e=function(){var e=a.controller.getGrapher();e&&e.redrawAllLayers()},r=function(){},p(a.hoveredImageObj,a.clickableInfo.hoveredImage,e,r))),n&&(a.depressedImageObj&&(i(a.depressedImageObj).off("load"),delete a.depressedImageObj),a.clickableInfo.depressedImage&&(a.depressedImageObj=new Image,e=function(){var e=a.controller.getGrapher();e&&e.redrawAllLayers()},r=function(){},p(a.depressedImageObj,a.clickableInfo.depressedImage,e,r))),a.cachedViewState.image_url!==a.image_url&&(i(a.imageObj).off("load"),a.imageObj=new Image,p(a.imageObj,a.image_url,function(){a.controller.dispatch({type:"image-load-success",id:a.id})},function(){a.controller.dispatch({type:"image-load-error",id:a.id})})),a.cachedViewState=c.__assign({type:a.type,id:a.id,folderId:a.folderId,image_url:a.image_url,name:a.name,hidden:a.hidden,foreground:a.foreground,secret:a.secret},l.extractDynamicProperties(a))}function g(e){var a=e.cachedViewState;e.cachedUndoRedoFullState=e.cachedViewState,e.preTransientState&&(a=c.__assign(c.__assign({},a),e.preTransientState)),e.cachedUndoRedoDiffState=a}function p(e,a,r,t){i(e).on("load",r).on("error",t),/^data:/.test(a)||(e.crossOrigin="anonymous"),e.src=a}Object.defineProperty(e,"__esModule",{value:!0}),e.isClickableObject=e.removeClickableInfoRule=e.addClickableInfoRule=e.setClickableInfoRuleProp=e.setClickableInfoProp=e.getClickableInfoRulePackedError=e.getClickableInfoUpdateIdentifier=e.getClickableInfoUpdateLatex=e.getEvaluatedClickableRule=e.getClickableInfoPropLatex=e.isClickableRuleDefined=e.retryLoading=e.setLoadStatus=e.uploadImageAndGenerateToken=e.uploadImages=e.restoreState=e.initModel=e.updateCachedUndoRedoState=e.setIsDraggingOnGrapher=e.updateCachedViewState=e.getState=e.hasInputError=e.getMissingVariables=e.onFormulaUpdate=e.onControllerUpdate=e.updateCachedParsableState=e.eachLatex=e.setImageURL=e.setForeground=e.setOpacity=e.setName=e.getMQAttribute=e.setMQAttribute=e.setSecret=e.setHidden=void 0,e.setHidden=function(e,a){e.hidden=a},e.setSecret=function(e,a){e.secret=a},e.setMQAttribute=function(e,a,r){e[a]=r},e.getMQAttribute=function(e,a){return e[a]},e.setName=function(e,a){e.name=a},e.setOpacity=function(e,a){e.opacity=a},e.setForeground=function(e,a){e.foreground=a},e.setImageURL=function(e,a){e.image_url=a},e.eachLatex=function(e,a){a(e.opacity),a(e.center),a(e.height),a(e.width),a(e.angle)},e.updateCachedParsableState=u,e.onControllerUpdate=function(e){e.draggingOnGraphpaper?e.preTransientState||(e.preTransientState={center:e.center,width:e.width,height:e.height}):delete e.preTransientState,o.updateIsHiddenFromUI(e);var a=n.getParentFolderModel(e);e.shouldGraph=(!a||!a.hidden)&&!e.hidden,e.showPoints=e.shouldGraph&&n.isItemSelected(e)&&"loaded"===e.loadStatus,f(e),g(e),u(e)},e.onFormulaUpdate=function(e,a){e.formula=a,e.error=function(e){var a={center:e.controller.s("graphing-calculator-error-image-invalid-center"),angle:e.controller.s("graphing-calculator-error-image-invalid-angle"),width:e.controller.s("graphing-calculator-error-image-invalid-width"),height:e.controller.s("graphing-calculator-error-image-invalid-height"),opacity:e.controller.s("graphing-calculator-error-image-invalid-opacity")};for(var r in e.formula.errorMap){if(e.formula.errorMap[r])return a[r]}}(e)},e.getMissingVariables=function(e){return e.formula&&e.formula.variables||[]},e.hasInputError=function(e,a){return!(!e.formula||!e.formula.errorMap)&&!!e.formula.errorMap[a]},e.getState=function(e,a){var r=e.cachedViewState;return a.stripDefaults?l.stripDefaults(r):r},e.updateCachedViewState=f,e.setIsDraggingOnGrapher=function(e,a){e.draggingOnGraphpaper=a},e.updateCachedUndoRedoState=g,e.initModel=function(e,a){var r=d.default(l.inflateDefaults(e));return c.__assign(c.__assign(c.__assign({},r),o.DEFAULTS(a)),{color:t.colors.BLUE,loadStatus:"loading",failures:0,imageObj:new Image,hoveredImageObj:void 0,depressedImageObj:void 0,shouldGraph:void 0,showPoints:void 0,error:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{}})};var h=c.__assign({id:!1,type:!1,image_url:!0,name:!0,folderId:!0,hidden:!0,secret:!0,foreground:!0},r.makeTrueMap(l.DEFAULTS_DYNAMIC));e.restoreState=function(e,a){r.copyProperties({from:a,to:e,props:h})},e.uploadImages=function(e){for(var a=e.controller,r=e.files,t=e.id,o={errors:[],tokens:[]},n=0;n<r.length;n++){var i=r[n];i.type.match("image/*")?o.tokens.push(m({controller:a,file:i,id:t})):o.errors.push(a.s("graphing-calculator-error-image-invalid-file",{file:i.name}))}return o};var a=0;function m(e){var n=e.controller,i=e.file,l=e.id,c=""+a++;return n.getGraphSettings().config.imageUploadCallback(i,function(e,o){setTimeout(function(){var t;e?n.dispatch({type:"image-upload-error",token:c,error:e}):p(t=new Image,o,function(){var e=t.width,a=t.height,r=Math.max(e,a)/Math.min(e,a);e<a?(a=10,e=Math.round(10*a/r)/10):(e=10,a=Math.round(10*e/r)/10),n.dispatch({type:"image-upload-success",token:c,url:o,width:e+"",height:a+"",name:i.name,id:l})},function(){n.dispatch({type:"image-upload-error",token:c,error:""})})})}),c}function b(e,a){"loaded"===(e.loadStatus=a)&&(e.failures=0),"failed"===a&&(e.failures+=1)}function I(e,a){var r=e.formula.clickableinfo_data;if(r)return r[a]}e.uploadImageAndGenerateToken=m,e.setLoadStatus=b,e.retryLoading=function(e){e.imageObj.src=e.imageObj.src,b(e,"loading")},e.isClickableRuleDefined=function(e,a){for(var r=0,t=e.clickableInfo.rules;r<t.length;r++){if(t[r].id===a)return!0}return!1},e.getClickableInfoPropLatex=function(e,a,r){for(var t=0,o=e.clickableInfo.rules;t<o.length;t++){var n=o[t];if(n.id===a)return n[r]}return""},e.getEvaluatedClickableRule=I,e.getClickableInfoUpdateLatex=function(e,a){if(e.formula){var r=I(e,a);if(r)return r.latex}},e.getClickableInfoUpdateIdentifier=function(e,a){if(e.formula){var r=I(e,a);if(r)return r.identifier}},e.getClickableInfoRulePackedError=function(e,a){if(e.formula){var r=I(e,a);if(r)return r.error}},e.setClickableInfoProp=function(e,a,r){var t;e.clickableInfo=c.__assign(c.__assign({},e.clickableInfo),((t={})[a]=r,t))},e.setClickableInfoRuleProp=function(e,a,r,t){for(var o=d.default(e.clickableInfo.rules),n=0,i=o;n<i.length;n++){var l=i[n];l.id===a&&(l[r]=t)}e.clickableInfo=c.__assign(c.__assign({},e.clickableInfo),{rules:o})},e.addClickableInfoRule=function(e,a){e.clickableInfo=d.default(e.clickableInfo),e.clickableInfo.rules.push({id:a,assignment:"",expression:""})},e.removeClickableInfoRule=function(e,a){e.clickableInfo=d.default(e.clickableInfo),e.clickableInfo.rules=s.filter(e.clickableInfo.rules,function(e){return e.id!==a}),0===e.clickableInfo.rules.length&&(e.clickableInfo.rules=l.CLICKABLEINFO_DEFAULTS.rules,e.clickableInfo.enabled=!1)},e.isClickableObject=function(e){return e.clickableInfo.enabled}});
define('lib/latex-search-helpers',["require","exports"],function(require,e){"use strict";function t(e){return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")}function u(e){return e.replace(/\\\\right\\(\\*[})\]|])/g,".*\\\\right\\$1").replace(/ ?\\([}\]])/g,".*\\$1")}Object.defineProperty(e,"__esModule",{value:!0}),e.getFuzzyLatexRegExp=e.addFuzzyMatches=e.escapeForRegex=void 0,e.escapeForRegex=t,e.addFuzzyMatches=u,e.getFuzzyLatexRegExp=function(e){var r=u(t(e));return new RegExp(r)}});
define('graphing-calc/models/list',["require","exports","lib/color-distance","tslib","./expression","./folder","./table","./text","./simulation","./helper-expression","./image","core/types/graphmode","core/lib/color-helpers","underscore","core/lib/deepCopy","../../lib/latex-search-helpers"],function(require,e,l,a,s,i,f,d,c,u,m,p,o,_,y,g){"use strict";function n(e,t){return e.__itemModelArray[t]}function I(e,t){var r;do{if(-1===--t)return;r=n(e,t)}while(r&&!x(r));return r}function h(e,t){var r,o=E(e);do{if(++t===o)return;r=n(e,t)}while(r&&!x(r));return r}function r(e){if("folder"!==e.type&&e.folderId){var t=A(e.controller.getListModel(),e.folderId);if(t&&"folder"===t.type)return t}}function v(e){if(!e)return!1;if(e.secret)return!0;var t=r(e);return!(!t||!t.secret)}function x(e){return!t(e)}function t(e){if(!e)return!0;if(e.filteredBySearch)return!0;if(e.controller.isItemBeingDragged(e.id))return!1;if(!e.controller.canAdministerSecretFolders()&&v(e))return!0;var t=r(e);return!(!t||!t.collapsed||e.controller.getExpressionSearchStr())}function M(e,t){for(var r=0;r<e.__itemModelArray.length;r++){b(e.__itemModelArray[r],t)}}function b(e,t){switch(e.type){case"expression":s.eachLatex(e,t);break;case"table":f.eachLatex(e,t);break;case"image":m.eachLatex(e,t);break;case"folder":case"text":break;case"simulation":c.eachLatex(e,t);break;default:return e}}function S(e,t){return e.replace(/([_^])([a-z0-9])/gi,"$1{$2}").match(t)}function A(e,t){return e.__itemIdToModel[t]}function w(e,t){return e.__helperIdToModel[t]}function D(e){e.__anyDependsOnRandomSeed=!1;for(var t=0;t<e.__itemModelArray.length;t++){var r=e.__itemModelArray[t];if(r&&"formula"in r&&r.formula&&r.formula.depends_on_random_seed)return void(e.__anyDependsOnRandomSeed=!0)}}function B(e){for(var t=!e.controller.canAdministerSecretFolders(),r=1,o=1,n=0;n<e.__itemModelArray.length;n++){var a=e.__itemModelArray[n];a.index=n,a.displayIndex=r,v(a)&&(a.secretIndex=o,o+=1),t&&v(a)||(r+=1)}e.nextDisplayIndex=r}function k(e){e.__itemModelArray=[],e.__itemIdToModel={},e.__helperIdToModel={},e.__anyDependsOnRandomSeed=!1}function E(e){return e.__itemModelArray.length}function F(e){return e.selectedItem}function O(e,t){switch(t.type){case"expression":return s.initModel(t,e.controller);case"table":return f.initModel(t,e.controller);case"image":return m.initModel(t,e.controller);case"folder":return i.initModel(t,e.controller);case"text":return d.initModel(t,e.controller);case"simulation":return c.initModel(t,e.controller);default:return t}}function L(e,t){e.selectedItem=t}function R(e,t,r){var o=String(t.id);if(e.__itemIdToModel.hasOwnProperty(o))throw Error("Item with id '"+o+"' is already in list");e.__itemIdToModel[o]=t,e.__itemModelArray.splice(r,0,t),B(e)}function T(e,t){var r=e.__itemModelArray[t];if("folder"===r.type){for(var o=0,n=r.index+1;n<e.__itemModelArray.length;n++){var a=e.__itemModelArray[n];if("folder"===a.type||a.folderId!==r.id)break;o+=1,C(a)&&L(e,void 0),delete e.__itemIdToModel[a.id],delete e.expressionAnalysis[r.id]}e.__itemModelArray.splice(t,1+o)}else e.__itemModelArray.splice(t,1);C(r)&&L(e,void 0),delete e.__itemIdToModel[r.id],delete e.expressionAnalysis[r.id],D(e),B(e)}function C(e){return e.controller.getListModel().selectedItem===e}Object.defineProperty(e,"__esModule",{value:!0}),e.getMissingVariablesForItem=e.setDragState=e.isItemSelected=e.selectNextItem=e.selectPrevItem=e.removeItemById=e.anyItemDependsOnRandomSeed=e.removeItemAtIndex=e.insertItemAtEnd=e.insertItemAtIndex=e.moveItemsTo=e.setSelected=e.onEvaluatorFormulaUpdates=e.onGraphComputed=e.restoreListState=e.modelFromSpec=e.setListState=e.getLargestIntegerId=e.getState=e.getUndoRedoFullState=e.getUndoRedoDiffState=e.getSelected=e.getAllModelsWithSliders=e.hasNoVisibleExpressions=e.getItemCount=e.removeAllItems=e.reindex=e.recomputeAnyItemDependsOnRandomSeed=e.addHelperExpression=e.getHelperExpressionById=e.getItemsByIdentifier=e.getItemById=e.updateDrawOrder=e.findAvailableColumnSubscript=e.filterItemsBySearch=e.eachLatexForItem=e.eachLatex=e.getAllHelperItemModels=e.getAllItemModels=e.isItemHiddenFromUI=e.isItemSelectable=e.isItemSecret=e.getNumberOfItemsInFolder=e.getParentFolderModel=e.findNextSelectableItem=e.findPrevSelectableItem=e.getLastSelectableItem=e.getFirstSelectableItem=e.getItemByIndex=e.getNextColor=e.areAnyImagesLoading=e.init=void 0,e.init=function(e){return{controller:e,__itemModelArray:[],__itemIdToModel:{},__helperIdToModel:{},__anyDependsOnRandomSeed:!1,drawOrder:[],colorIdx:0,expressionAnalysis:{},nextDisplayIndex:1}},e.areAnyImagesLoading=function(e){for(var t=0;t<e.__itemModelArray.length;t++){var r=e.__itemModelArray[t];if("image"===r.type&&"loading"===r.loadStatus)return!0}return!1},e.getNextColor=function(e){var t=_.filter(_.values(e.controller.getColors()),function(e){return e!=o.colors.ORANGE}),r=t[e.colorIdx];return e.colorIdx=(e.colorIdx+1)%t.length,r},e.getItemByIndex=n,e.getFirstSelectableItem=function(e){for(var t=0;t<e.__itemModelArray.length;t++){var r=e.__itemModelArray[t];if(x(r))return r}},e.getLastSelectableItem=function(e){for(var t=e.__itemModelArray.length-1;0<=t;t--){var r=e.__itemModelArray[t];if(x(r))return r}},e.findPrevSelectableItem=I,e.findNextSelectableItem=h,e.getParentFolderModel=r,e.getNumberOfItemsInFolder=function(e,t){var r=A(e,t);if(!r||"folder"!==r.type)return 0;for(var o=0,n=e.__itemModelArray.length,a=r.index+1;a<n;a++){var i=e.__itemModelArray[a];if("folder"===i.type||i.folderId!==t)break;o+=1}return o},e.isItemSecret=v,e.isItemSelectable=x,e.isItemHiddenFromUI=t,e.getAllItemModels=function(e){return e.__itemModelArray},e.getAllHelperItemModels=function(e){return _.values(e.__helperIdToModel)},e.eachLatex=M,e.eachLatexForItem=b,e.filterItemsBySearch=function(e,t){for(var r=g.getFuzzyLatexRegExp(t),o=0;o<e.__itemModelArray.length;o++)if(t){var n=e.__itemModelArray[o];switch(n.filteredBySearch=!0,n.type){case"expression":s.eachLatex(n,function(e){S(e,r)&&(n.filteredBySearch=!1)}),n.label&&n.showLabel&&(0==="label".indexOf(t)||S(n.label,r))&&(n.filteredBySearch=!1);break;case"table":f.eachLatex(n,function(e){S(e,r)&&(n.filteredBySearch=!1)});break;case"image":m.eachLatex(n,function(e){S(e,r)&&(n.filteredBySearch=!1)});break;case"folder":n.title&&0<=n.title.indexOf(t)&&(n.filteredBySearch=!1);break;case"text":0<=n.text.indexOf(t)&&(n.filteredBySearch=!1);break;case"simulation":c.eachLatex(n,function(e){S(e,r)&&(n.filteredBySearch=!1)});break;default:return n}!n.filteredBySearch&&"folder"!==n.type&&n.folderId&&(e.__itemIdToModel[n.folderId].filteredBySearch=!1)}else e.__itemModelArray[o].filteredBySearch=!1},e.findAvailableColumnSubscript=function(e){var o=[];M(e,function(e){if(-1===e.indexOf("~")&&-1===e.indexOf("\\sim"))for(var t=/_(\d)|_\{(?:\s|\\space)*(\d+)(?:\s|\\space)*\}/g;;){var r=t.exec(e);if(!r)break;o.push(parseInt(r[1]||r[2],10))}}),o.sort(function(e,t){return e-t});for(var t=1,r=0;r<o.length;r++)o[r]===t&&t++;return t},e.updateDrawOrder=function(e){var t=[];_.each(e.__itemModelArray,function(e){"table"===e.type?_.each(e.columnModels,function(e){t.push(e.id)}):t.push(e.id)}),e.drawOrder=t},e.getItemById=A,e.getItemsByIdentifier=function(e,t){for(var r=[],o=0;o<e.__itemModelArray.length;o++){var n=e.__itemModelArray[o];"expression"===n.type&&s.getAssignment(n)===t&&r.push(n)}return r},e.getHelperExpressionById=w,e.addHelperExpression=function(e,t){var r=u.init(t);e.__helperIdToModel[r.id]=r},e.recomputeAnyItemDependsOnRandomSeed=D,e.reindex=B,e.removeAllItems=k,e.getItemCount=E,e.hasNoVisibleExpressions=function(e){return 1===e.nextDisplayIndex},e.getAllModelsWithSliders=function(e){for(var t=[],r=0;r<e.__itemModelArray.length;r++){var o=e.__itemModelArray[r];"expression"===o.type&&o.sliderExists&&t.push(o)}return t},e.getSelected=F,e.getUndoRedoDiffState=function(e){return{list:e.__itemModelArray.map(function(e){return e.cachedUndoRedoDiffState})}},e.getUndoRedoFullState=function(e){return{list:e.__itemModelArray.map(function(e){return e.cachedUndoRedoFullState})}},e.getState=function(e,t){return{list:e.__itemModelArray.map(function(e){switch(e.type){case"expression":return s.getState(e,t);case"image":return m.getState(e,t);case"table":return f.getState(e,t);case"folder":return i.getState(e,t);case"text":return d.getState(e,t);case"simulation":return c.getState(e,t);default:return e}})}},e.getLargestIntegerId=function(e){for(var t=0,r=/^[0-9]+$/,o=e.list.length-1;0<=o;o--){var n=e.list[o],a=n.id;if(r.test(a)&&t<(l=parseInt(a,10))&&(t=l),"table"===n.type&&n.columns)for(var i=n.columns.length-1;0<=i;i--){var l,a=n.columns[i].id;r.test(a)&&t<(l=parseInt(a,10))&&(t=l)}}return t},e.setListState=function(e,t,r){var o,n;for(r=r||{},e.colorIdx=0,k(e),e.expressionAnalysis={},o=0;o<t.list.length;o++){var a,i=O(e,t.list[o]);r.remapColors&&"color"in i&&i.color&&(a=_.values(e.controller.getColors()),_.contains(a,i.color)||(i.color=l.closestColor(i.color,a))),e.__itemModelArray.push(i),e.__itemIdToModel[i.id]=i}B(e),1===e.nextDisplayIndex&&(n=O(e,{type:"expression",id:e.controller.generateId(),color:e.controller.getNextColor()}),R(e,n,e.__itemModelArray.length))},e.modelFromSpec=O,e.restoreListState=function(e,t){var r,o=e.__itemIdToModel;for(e.__itemModelArray=[],e.__itemIdToModel={},r=0;r<t.list.length;r++){var n,a=t.list[r];if((n=o[a.id])&&n.type===a.type)switch(n.type){case"expression":if(a.type!==n.type)throw new Error("invalid restoration");s.restoreState(n,a);break;case"table":if(a.type!==n.type)throw new Error("invalid restoration");f.restoreState(n,a);break;case"image":if(a.type!==n.type)throw new Error("invalid restoration");m.restoreState(n,a);break;case"folder":if(a.type!==n.type)throw new Error("invalid restoration");i.restoreState(n,a);break;case"text":if(a.type!==n.type)throw new Error("invalid restoration");d.restoreState(n,a);break;case"simulation":if(a.type!==n.type)throw new Error("invalid restoration");c.restoreState(n,a);break;default:return n}else n=O(e,a);e.__itemModelArray.push(n),e.__itemIdToModel[n.id]=n}D(e),B(e)},e.onGraphComputed=function(e,t,r){var o,n=A(e,r[0]&&r[0].tableId||t);if(n)switch(n.type){case"expression":var a=!1;n.__workerNeedsDotplotXMode=!1;for(var i=0;i<r.length;i++){(m=r[i]).graphMode!==p.Z_3D&&m.graphMode!==p.OBJECT3D&&m.graphMode!==p.PARAMETRIC_CURVE_3D&&("resolved"in m&&!m.resolved&&(a=!0),m.boundingBox&&(o=o||[]).push(m.boundingBox),m.needsDotplotXMode&&(n.__workerNeedsDotplotXMode=!0))}n.unresolved=a,n.boundingBoxes=o;for(var l,d=1/0,s=-1/0,c=0,u=r;c<u.length;c++){(m=u[c]).graphMode===p.POLAR&&((l=m.sampledDomain)&&(d=Math.min(d,l.min),s=Math.max(s,l.max)))}return isFinite(d)&&(n.__workerSampledDomainMin=d),void(isFinite(s)&&(n.__workerSampledDomainMax=s));case"table":for(var m,i=0;i<r.length;i++){(m=r[i]).graphMode!==p.Z_3D&&m.graphMode!==p.OBJECT3D&&m.graphMode!==p.PARAMETRIC_CURVE_3D&&m.boundingBox&&(o=o||[]).push(m.boundingBox)}return void(o&&f.setColumnBoundingBoxes(n,t,o));default:return}},e.onEvaluatorFormulaUpdates=function(e,t){var r,o,n,a=y.default(e.expressionAnalysis);for(r in t)if(t.hasOwnProperty(r)){n=t[r],o=A(e,r);var i,l={isGraphable:!!n.is_graphable,isError:!!n.error,errorMessage:n.error?e.controller.unpack(n.error):void 0};if(o)switch(o.type){case"expression":s.onFormulaUpdate(o,n),n.zero_values&&1===n.zero_values.length?(i=n.zero_values[0].val,_.isNumber(i)&&(l.evaluation={type:"Number",value:i},l.evaluationDisplayed=!0),_.isArray(i)&&i.every(_.isNumber)&&(l.evaluation={type:"ListOfNumber",value:i.slice()},l.evaluationDisplayed=!0)):n.hasOwnProperty("constant_value")&&_.isNumber(n.constant_value)&&(l.evaluation={type:"Number",value:n.constant_value},l.evaluationDisplayed=!1);break;case"image":m.onFormulaUpdate(o,n);break;case"table":f.onFormulaUpdate(o,n);break;case"folder":case"text":break;case"simulation":c.onFormulaUpdate(o,n);break;default:return o}else{var d=w(e,r);if(!d)continue;u.onFormulaUpdate(e.controller,d,n)}a[r]=l}D(e),e.expressionAnalysis=a},e.setSelected=L,e.moveItemsTo=function(e,t,r,o){var n;t!==r&&(n=e.__itemModelArray.splice(t,o),t<r&&(r=r-o+1),e.__itemModelArray.splice.apply(e.__itemModelArray,a.__spreadArrays([r,0],n)),B(e))},e.insertItemAtIndex=R,e.insertItemAtEnd=function(e,t){R(e,t,E(e))},e.removeItemAtIndex=T,e.anyItemDependsOnRandomSeed=function(e){return e.__anyDependsOnRandomSeed},e.removeItemById=function(e,t){var r=A(e,t);r&&T(e,r.index)},e.selectPrevItem=function(e){var t=F(e);if(!t)return!1;var r=I(e,t.index);return!!r&&(L(e,r),r.index===E(e)-1&&"expression"===t.type&&s.isEmpty(t)&&T(e,r.index),!0)},e.selectNextItem=function(e){var t=F(e);if(!t)return!1;var r=h(e,t.index);return!!r&&(L(e,r),!0)},e.isItemSelected=C,e.setDragState=function(e,t){e.dragState=t},e.getMissingVariablesForItem=function(e){switch(e.type){case"expression":return s.getMissingVariables(e);case"image":return m.getMissingVariables(e);case"simulation":return c.getMissingVariables(e);case"table":case"text":case"folder":return[];default:return e}}});
define('graphing-calc/models/abstract-item',["require","exports","./list","graphing-calc/models/expression","graphing-calc/models/table"],function(require,e,r,o,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getDisplayColor=e.getDisplayState=e.updateIsHiddenFromUI=e.setFolderId=e.setSecret=e.DEFAULTS=e.getGUID=void 0;var t=0;function n(){return"abstract_item_"+t++}e.getGUID=n,e.DEFAULTS=function(e){return{guid:n(),controller:e,index:-1,displayIndex:-1,secretIndex:-1,isHiddenFromUI:!0,renderShell:!0}},e.setSecret=function(e,r){e.secret=r},e.setFolderId=function(e,r){"folder"!==e.type&&(e.folderId=r)},e.updateIsHiddenFromUI=function(e){e.isHiddenFromUI=r.isItemHiddenFromUI(e)},e.getDisplayState=function(e){return e.isHiddenFromUI||e.filteredBySearch?"none":e.renderShell?"shell":"render"},e.getDisplayColor=function(e){return e.colorLatex?("expression"===e.type?(r=o.getColorLatexValue(e),t=o.isColorLatexValid(e)):"header"===e.type&&(r=i.getColorLatexValue(e),t=i.isColorLatexValid(e)),t&&r?Array.isArray(r)?r[0]:r:e.color):e.color;var r,t}});
define('core/graphing-calc/json/table',["require","exports","tslib","core/lib/default-spec","core/types/styles","core/lib/dragmode"],function(require,s,n,t,e,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.computeParsableState=s.stripDefaults=s.inflateDefaults=s.COLUMN_DEFAULTS=s.DEFAULTS=void 0,s.DEFAULTS={folderId:"",secret:!1,columns:[]},s.COLUMN_DEFAULTS={latex:"",color:"",hidden:!1,values:[],points:!0,lines:!1,dragMode:i.DragMode.NONE,pointStyle:e.PointStyle.POINT,lineStyle:e.LineStyle.SOLID,colorLatex:""},s.inflateDefaults=function(e){var t=n.__assign(n.__assign({},s.DEFAULTS),e);return t.columns=t.columns.map(function(e){return n.__assign(n.__assign({},s.COLUMN_DEFAULTS),e)}),t},s.stripDefaults=function(e){return e=n.__assign(n.__assign({},e),{columns:e.columns.map(function(e){return t.stripDefaults(s.COLUMN_DEFAULTS,e)})}),t.stripDefaults(s.DEFAULTS,e)},s.computeParsableState=function(t){return{type:"table",id:t.id,columns:t.columns.map(function(e){return n.__assign(n.__assign({},e),{tableId:t.id})})}}});
define('graphing-calc/models/table',["require","exports","core/math/rational-arithmetic-sequence","tslib","core/types/styles","core/lib/dragmode","./abstract-item","underscore","core/lib/label","core/math/evaluate-single-expression","core/math/distance","core/lib/deepCopy","core/lib/copy-properties","graphing-calc/models/list","core/graphing-calc/json/table","core/graphing-calc/json/table","core/graphing-calc/json/table","core/lib/validate-color"],function(require,e,f,u,a,s,i,l,d,p,g,c,r,t,m,v,h,C){"use strict";function M(e,o,n,l){l.row=e.rowModels[o],l.row.cells.splice(n,0,l)}function x(e,o,n){e.rowModels[o].cells.splice(n,1)}function w(e){return isFinite(e)?d.truncatedLatexLabel(e,{digits:8,bigCutoff:1e6,smallCutoff:.001}):"\\mathrm{undefined}"}function S(e,o,n){var l=e.columnModels[o];l.error=n.error,l.discrete=n.discrete,l.disabled=n.dependent,l.draggable=!n.error&&!n.dependent,l.packedErrors=[],l.computedValues=[];for(var t=n.values,r=t.length-1;0<=r;r--){var a=t[r];l.computedValues[r]="number"==typeof a?w(a):"",l.packedErrors[r]=a&&a.key?a:void 0}}function y(e){if(!e.isExpanded){var o=e.rowModels.length;if(!(o<30))return{min:8,max:o-5}}}function b(e,o){var n=e.columnModels[o];return{values:e.columns[o].values.slice(),dragMode:n.dragMode,hidden:n.hidden,id:n.id,color:n.color,points:n.points,lines:n.lines,pointStyle:n.pointStyle,lineStyle:n.lineStyle,latex:n.latex,colorLatex:n.colorLatex}}Object.defineProperty(e,"__esModule",{value:!0}),e.isColumnEmpty=e.doesCellExist=e.setCellLatex=e.shouldHideColumn=e.mergeBoundingBoxes=e.setColumnBoundingBoxes=e.setColumnHidden=e.setExpanded=e.setColumnColorLatex=e.setColumnColor=e.setColumnDragMode=e.setColumnLineStyle=e.setColumnLines=e.setColumnPointStyle=e.setColumnPoints=e.getColumnModel=e.getSelectedCell=e.cloneTableAndExtendWithProperties=e.makeTableState=e.buildEntireColumnStructure=e.initModel=e.restoreState=e.computeTableStructureMutation=e.updateCachedUndoRedoState=e.setIsDraggingOnGrapher=e.updateCachedViewState=e.getState=e.stripBlankRowAndColumn=e.addBlankRowAndColumn=e.updateCachedParsableState=e.eachLatex=e.getRowAutoFillValues=e.removeColumn=e.insertBlankColumn=e.removeRow=e.insertBlankRow=e.onFormulaUpdate=e.onControllerUpdate=e.getColorLatexValue=e.isColorLatexValid=e.makeColumn=e.removeCellFromColumn=e.insertCellToColumn=e.makeRow=e.makeCell=e.getGUID=e.getColumnState=e.getCollapsedRange=e.updateIsCollapsedByFocusLocation=e.setColumnComputedValues=e.formatValueForDisplay=e.removeCellFromRow=e.insertCellToRow=void 0,e.insertCellToRow=M,e.removeCellFromRow=x,e.formatValueForDisplay=w,e.setColumnComputedValues=S,e.updateIsCollapsedByFocusLocation=function(e){var o,n=q(e);n&&((o=y(e))?n.row>=o.min&&n.row<o.max&&z(e,!0):e.isExpanded||z(e,!0))},e.getCollapsedRange=y,e.getColumnState=b;var o=0;function _(){return"table_guid_"+o++}function L(){return{guid:_(),type:"cell",row:void 0,column:void 0}}function E(e){return{type:"row",index:e,guid:_(),cells:[]}}function I(e,o,n,l){var t=e.columnModels[o];t.cells.splice(n,0,l),l.column=t,e.columns[t.index].values.splice(n,0,"")}function R(e,o,n){var l=e.columnModels[o];l.cells.splice(n,1),e.columns[l.index].values.splice(n,1)}function D(e,o,n){var l=n.color;l&&C.default(l)||(l=e.controller.getNextColor());var t=u.__assign(u.__assign({},n),{type:"header",guid:_(),index:o,error:void 0,table:e,color:l,packedErrors:[],computedValues:[],cells:void 0,row:void 0,discrete:void 0,shouldGraph:void 0,disabled:void 0,draggable:void 0});return t.cells=t.values.map(function(){var e=L();return e.column=t,e}),delete t.values,0===o&&(t.hidden=!0),t}function F(e,o){var n=E(o+1);e.rowModels.splice(o+1,0,n);for(var l=o+1;l<e.rowModels.length;l++)e.rowModels[l].index=l;for(l=0;l<e.columnModels.length;l++){var t=L();I(e,l,o,t),M(e,o+1,l,t)}}function V(e,o,n){var l=u.__assign(u.__assign(u.__assign({},m.COLUMN_DEFAULTS),n),{values:e.columns[0].values.map(function(){return""})}),t=D(e,o,l);e.columnModels.splice(o,0,t),e.columns.splice(o,0,l);for(var r=o+1;r<e.columnModels.length;r++)e.columnModels[r].index=r;for(M(e,0,o,t),r=1;r<e.rowModels.length;r++)M(e,r,o,t.cells[r-1])}function k(o){for(var e=h.computeParsableState({type:"table",id:o.id,secret:o.secret,folderId:o.folderId,columns:o.columnModels.map(function(e){return b(o,e.index)})}),n=0;n<e.columns.length;n++)e.columns[n].hidden=!o.columnModels[n].shouldGraph;o.cachedParsableState=e}function B(e,o){return(e=c.default(e)).push(u.__assign(u.__assign({},m.COLUMN_DEFAULTS),{id:o,values:e[0].values.map(function(){return""})})),e.forEach(function(e){e.values.push("")}),e}function T(e){return(e=c.default(e)).pop(),e.forEach(function(e){e.values.pop()}),e}function P(e,o){var n=u.__assign(u.__assign({},e.cachedViewState),{columns:T(e.cachedViewState.columns)});return o.stripDefaults?v.stripDefaults(n):n}function U(n){var e=n.columnModels.map(function(e,o){return b(n,o)});n.cachedViewState={id:n.id,type:n.type,folderId:n.folderId,columns:e,secret:n.secret}}function O(e){var o=u.__assign(u.__assign({},e.cachedViewState),{columns:T(e.cachedViewState.columns)});e.cachedUndoRedoFullState=o,e.preTransientState&&(o=u.__assign(u.__assign({},o),e.preTransientState)),e.cachedUndoRedoDiffState=o}function N(e,o){if(e.columnModels.length-1!==o.length)return{type:"start-fresh"};if(e.columnModels[0].cells.length-1!==o[0].values.length)return{type:"start-fresh"};for(var n=-1,l=o.length-1;0<=l;l--){var t=e.columns[l],r=o[l];if(t.id!==r.id)return{type:"start-fresh"};for(var a=t.values,u=r.values,s=u.length-1;0<=s;s--)if(a[s]!==u[s]&&(-1===n&&(n=s),n!==s))return{type:"start-fresh"}}return-1===n?{type:"none"}:{type:"edit-row",rowIndex:n}}e.getGUID=_,e.makeCell=L,e.makeRow=E,e.insertCellToColumn=I,e.removeCellFromColumn=R,e.makeColumn=D,e.isColorLatexValid=function(e){var o=e.table.formula;if(!o)return!1;var n=o.column_data[e.index];return!!n&&!!n.color_latex_valid},e.getColorLatexValue=function(e){var o=e.table.formula;if(o){var n=o.column_data[e.index];if(n)return n.color_latex_value}},e.onControllerUpdate=function(e){e.draggingOnGraphpaper?e.preTransientState||(e.preTransientState={columns:P(e,{stripDefaults:!1}).columns}):delete e.preTransientState,i.updateIsHiddenFromUI(e);var o=t.getParentFolderModel(e),n=o&&o.hidden;l.each(e.columnModels,function(e){e.shouldGraph=!n&&!e.hidden}),U(e),O(e),k(e)},e.onFormulaUpdate=function(e,o){e.formula=o;for(var n=e.formula.column_data,l=e.columnModels[0].cells.length,t=e.columnModels.length,r=0,a=0;a<n.length;a++){var u=n[a].values.length;r<u&&(r=u)}for(a=r-l;0<a;a--)F(e,l),l++;for(a=0;a<n.length&&a<t;a++){S(e,a,n[a])}var s=e.columnModels[e.columnModels.length-1];s.disabled=!0,s.error=void 0},e.insertBlankRow=F,e.removeRow=function(e,o){var n=y(e);n&&o===n.max-1&&z(e,!0);for(var l=0;l<e.columnModels.length;l++)R(e,l,o);for(e.rowModels.splice(o+1,1),l=o+1;l<e.rowModels.length;l++)e.rowModels[l].index=l},e.insertBlankColumn=V,e.removeColumn=function(e,o){e.columns.splice(o,1),e.columnModels.splice(o,1);for(var n=o;n<e.columnModels.length;n++)e.columnModels[n].index=n;for(n=0;n<e.rowModels.length;n++)x(e,n,o)},e.getRowAutoFillValues=function(e,o){var n=e.columnModels.length,l=[];for(c=0;c<n;c++)l.push("");var t=e.columns[0].values;if(1<o){var r=e.controller.isDegreeMode(),a=p.default(t[0],r),u=p.default(t[1],r);if(isFinite(a)&&isFinite(u)){var s=f(a,u);if(s){for(var i=s.nstart,d=i/s.lcm,c=0;c<o;c++){var m=p.default(t[c],r);if(!g.approx(m,d))return l;d=(i+=s.nstep)/s.lcm}l[0]=(""+a).length<8&&(""+u).length<8?""+d:"\\frac{"+i+"}{"+s.lcm+"}"}}}return l},e.eachLatex=function(e,o){for(var n=0;n<e.columnModels.length;n++){o(e.columnModels[n].latex);for(var l=e.columns[n],t=0;t<l.values.length;t++)l.values[t]&&o(l.values[t])}},e.updateCachedParsableState=k,e.addBlankRowAndColumn=B,e.stripBlankRowAndColumn=T,e.getState=P,e.updateCachedViewState=U,e.setIsDraggingOnGrapher=function(e,o){e.draggingOnGraphpaper=o},e.updateCachedUndoRedoState=O,e.computeTableStructureMutation=N;var A={id:!1,type:!1,columns:!1,folderId:!0,secret:!0},G={id:!1,values:!1,color:!0,latex:!0,hidden:!0,points:!0,lines:!0,dragMode:!0,lineStyle:!0,pointStyle:!0,colorLatex:!0};function H(n){n.columnModels=n.columns.map(function(e,o){return D(n,o,e)}),n.rowModels=[E(0)];for(var e=0;e<n.columnModels.length;e++)M(n,0,e,n.columnModels[e]);for(e=0;e<n.columnModels[0].cells.length;e++){var o=E(e+1);n.rowModels.push(o);for(var l=0;l<n.columnModels.length;l++)M(n,e+1,l,n.columnModels[l].cells[e])}}e.restoreState=function(e,o){var n=N(e,o.columns);if(r.copyProperties({from:o,to:e,props:A}),"start-fresh"===n.type)e.columns=B(o.columns,e.controller.generateId()),H(e);else{switch(n.type){case"none":break;case"edit-row":for(var l=o.columns.length-1;0<=l;l--){K(e,{column:l,row:n.rowIndex+1},o.columns[l].values[n.rowIndex])}break;default:return n}for(var t=0;t<o.columns.length;t++)r.copyProperties({from:o.columns[t],to:e.columnModels[t],props:G})}},e.initModel=function(e,o){var n=c.default(v.inflateDefaults(e)),l=u.__assign(u.__assign(u.__assign({},n),i.DEFAULTS(o)),{columnModels:void 0,rowModels:void 0,formula:void 0,draggingOnGraphpaper:!1,cachedViewState:{},cachedParsableState:{},cachedUndoRedoDiffState:{},cachedUndoRedoFullState:{},isExpanded:!1});l.columns=B(l.columns,o.generateId());for(var t=0,r=0;r<l.columns.length;r++)l.columns[r].values||(l.columns[r].values=[]),l.columns[r].values.length>t&&(t=l.columns[r].values.length);for(r=0;r<l.columns.length;r++)for(var a=t-l.columns[r].values.length;0<a;a--)l.columns[r].values.push("");return H(l),l},e.buildEntireColumnStructure=H;var j=["x","y","z","u","v","w"];function q(e){var o=e.controller.getFocusLocation();return o&&"table"===o.type&&o.id===e.id?o.location:void 0}function W(e,o){for(var n=0;n<e.columnModels.length;n++){var l=e.columnModels[n];if(l.id===o)return l}}function z(e,o){e.isExpanded=o}function J(e){var o=[];e.columnModels.forEach(function(e){e.boundingBoxes&&!e.hidden&&(o=o.concat(e.boundingBoxes))}),e.boundingBoxes=o}function K(e,o,n){if(0===o.row){var l=W(e,e.columnModels[o.column].id);if(!l)return;return l.latex=n,void(o.column>=e.columnModels.length-1&&V(e,o.column+1,{id:e.controller.generateId(),latex:"",color:e.controller.getNextColor()}))}var t=e.columnModels[o.column];""!==(e.columns[t.index].values[o.row-1]=n)&&o.row>=e.columnModels[0].cells.length&&F(e,o.row)}e.makeTableState=function(e,o,n){for(var l=[],t=Math.min(o.length,j.length),r=0;r<t;r++)l.push({id:n.generateId(),latex:d.identifierToLatex(j[r]+"_"+e),values:o[r],color:n.getNextColor(),hidden:!1,points:!0,lines:!1,dragMode:s.DragMode.NONE,pointStyle:a.PointStyle.POINT,lineStyle:a.LineStyle.SOLID,colorLatex:""});return{id:n.generateId(),type:"table",folderId:"",secret:!1,columns:l}},e.cloneTableAndExtendWithProperties=function(e,o){var n=P(e,{stripDefaults:!1});if(!n.columns||!o.columns)return o;for(var l=0;l<o.columns.length;l++){var t=n.columns[l],r=o.columns[l];if(t)for(var a in t)t.hasOwnProperty(a)&&(r.hasOwnProperty(a)||(r[a]=t[a]))}return o},e.getSelectedCell=q,e.getColumnModel=W,e.setColumnPoints=function(e,o,n){var l=W(e,o);l&&((l.points=n)||(l.dragMode=s.DragMode.NONE))},e.setColumnPointStyle=function(e,o,n){var l=W(e,o);l&&(l.pointStyle=n)},e.setColumnLines=function(e,o,n){var l=W(e,o);l&&(l.lines=n)},e.setColumnLineStyle=function(e,o,n){var l=W(e,o);l&&(l.lineStyle=n)},e.setColumnDragMode=function(e,o,n){var l=W(e,o);l&&((l.dragMode=n)===s.DragMode.NONE||l.points||(l.points=!0))},e.setColumnColor=function(e,o,n){var l=W(e,o);l&&C.default(n)&&(l.color=n)},e.setColumnColorLatex=function(e,o,n){var l=W(e,o);l&&(l.colorLatex=n)},e.setExpanded=z,e.setColumnHidden=function(e,o,n){var l=W(e,o);l&&(l.hidden=n)&&J(e)},e.setColumnBoundingBoxes=function(e,o,n){var l=W(e,o);l&&(l.boundingBoxes=n,J(e))},e.mergeBoundingBoxes=J,e.shouldHideColumn=function(e,o){var n=W(e,o);return!n||!n.points&&!n.lines},e.setCellLatex=K,e.doesCellExist=function(e,o){return o.row<e.rowModels.length&&o.column<e.columnModels.length},e.isColumnEmpty=function(e){if(e.values)for(var o=0,n=e.values;o<n.length;o++)if(""!==n[o])return!1;if(e.computedValues)for(var l=0,t=e.computedValues;l<t.length;l++)if(""!==t[l])return!1;return!0}});
define('main/propagate_selection',['require','graphing-calc/models/table'],function(require){"use strict";var c=require("graphing-calc/models/table");function i(e){var t,d,l,n=e&&e.id;return e&&"table"===e.type&&(n=(t=c.getSelectedCell(e))&&(d=e.columnModels[t.column])?d.id:void 0),e&&"folder"===e.type&&(n=(l=e.selectedHiddenChild)?l.id:void 0),n}return{getSelectedId:i,propagateSelection:function(e,t,d,l){var n=i(e.getSelectedItem());return n!==l&&t.select(n),n}}});
!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i():"function"==typeof define&&define.amd?define('flux',[],i):"object"==typeof exports?exports.Flux=i():t.Flux=i()}(this,function(){return n={},e.m=s=[function(t,i,e){"use strict";t.exports.Dispatcher=e(1)},function(t,i,e){"use strict";i.__esModule=!0;var s=e(2),n=(a.prototype.register=function(t){var i="ID_"+this._lastID++;return this._callbacks[i]=t,i},a.prototype.unregister=function(t){this._callbacks[t]||s(!1,"Dispatcher.unregister(...): `%s` does not map to a registered callback.",t),delete this._callbacks[t]},a.prototype.waitFor=function(t){this._isDispatching||s(!1,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var i=0;i<t.length;i++){var e=t[i];this._isPending[e]?this._isHandled[e]||s(!1,"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",e):(this._callbacks[e]||s(!1,"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",e),this._invokeCallback(e))}},a.prototype.dispatch=function(t){this._isDispatching&&s(!1,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this._startDispatching(t);try{for(var i in this._callbacks)this._isPending[i]||this._invokeCallback(i)}finally{this._stopDispatching()}},a.prototype.isDispatching=function(){return this._isDispatching},a.prototype._invokeCallback=function(t){this._isPending[t]=!0,this._callbacks[t](this._pendingPayload),this._isHandled[t]=!0},a.prototype._startDispatching=function(t){for(var i in this._callbacks)this._isPending[i]=!1,this._isHandled[i]=!1;this._pendingPayload=t,this._isDispatching=!0},a.prototype._stopDispatching=function(){delete this._pendingPayload,this._isDispatching=!1},a);function a(){!function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,a),this._callbacks={},this._isDispatching=!1,this._isHandled={},this._isPending={},this._lastID=1}t.exports=n},function(t,i,e){"use strict";t.exports=function(t,i,e,s,n,a,o,r){if(1,void 0===i)throw new Error("invariant requires an error message argument");var c,p,h;if(!t)throw void 0===i?h=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings."):(c=[e,s,n,a,o,r],p=0,(h=new Error(i.replace(/%s/g,function(){return c[p++]}))).name="Invariant Violation"),h.framesToPop=1,h}}],e.c=n,e.p="",e(0);function e(t){if(n[t])return n[t].exports;var i=n[t]={exports:{},id:t,loaded:!1};return s[t].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var s,n});
define('lib/conditional_blur',["require","exports","touchtracking","jquery"],function(require,e,t,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e;document.activeElement&&(e=u(document.activeElement),t.elIsFocusable(e)&&u(document.activeElement).blur())}});
define('lib/state-stack',["require","exports"],function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=(s.prototype.clear=function(){this._stack=[],this._stackPointer=-1},s.prototype.getState=function(){return this._stack[this._stackPointer]},s.prototype.serializeForBugsnag=function(){function t(t){try{return JSON.stringify(t,null,2)}catch(t){return"[[could not jsonify]]"}}return{currentState:t(this._stack[this._stackPointer]),undoState:t(this._stack[this._stackPointer-1]),redoState:t(this._stack[this._stackPointer+1])}},s.prototype.addState=function(t){this.canRedo()&&this._stack.splice(this._stackPointer+1),this._stack.push(t),this._stack.length>this._sizeLimit&&this._stack.shift(),this._stackPointer=this._stack.length-1},s.prototype.replaceState=function(t){this.canRedo()&&this._stack.splice(this._stackPointer+1),0===this._stack.length?(this._stack.push(t),this._stackPointer=0):this._stack[this._stackPointer]=t},s.prototype.canUndo=function(){return 0<this._stackPointer},s.prototype.canRedo=function(){return this._stackPointer<this._stack.length-1},s.prototype.undo=function(){this.canUndo()&&--this._stackPointer},s.prototype.redo=function(){this.canRedo()&&(this._stackPointer+=1)},s);function s(t){void 0===t&&(t=20),this.clear(),this._sizeLimit=t}t.default=i});
define('graphing/viewport',["require","exports"],function(require,t){"use strict";function i(t,i){return t<t*(1-1e-8)+1e-8*i&&1e-300<i-t&&i-t<1e300}Object.defineProperty(t,"__esModule",{value:!0}),t.Viewport=void 0;var s=(n.fromObject=function(t){return new n(t.xmin,t.xmax,t.ymin,t.ymax)},n.prototype.toObject=function(){return{xmin:this.xmin,ymin:this.ymin,xmax:this.xmax,ymax:this.ymax}},n.prototype.equals=function(t){return this.xmin===t.xmin&&this.ymin===t.ymin&&this.xmax===t.xmax&&this.ymax===t.ymax},n.prototype.isXValid=function(){return i(this.xmin,this.xmax)},n.prototype.isYValid=function(){return i(this.ymin,this.ymax)},n.prototype.isValid=function(){return this.isXValid()&&this.isYValid()},n.prototype.isSquare=function(t){return Math.abs(t.height-t.width*this.aspectRatio())<1},n.prototype.aspectRatio=function(){return(this.ymax-this.ymin)/(this.xmax-this.xmin)},n.prototype.squareXAxis=function(t){var i=this.xmax-this.xmin,s=this.ymax-this.ymin,h=this.xmin+i/2,a=s/t.height*t.width;return new n(h-a/2,h+a/2,this.ymin,this.ymax)},n.prototype.squareYAxis=function(t){var i=this.xmax-this.xmin,s=this.ymax-this.ymin,h=this.ymin+s/2,a=i/t.width*t.height;return new n(this.xmin,this.xmax,h-a/2,h+a/2)},n.prototype.squareCrop=function(t){return this.aspectRatio()>t.height/t.width?this.squareYAxis(t):this.squareXAxis(t)},n.prototype.polarDiameter=function(){var t=Math.abs(this.xmax),i=Math.abs(this.xmin),s=Math.abs(this.ymax),h=Math.abs(this.ymin);return 1.5*Math.max(t,i,s,h)},n.prototype.largestR=function(){return Math.sqrt(Math.pow(Math.max(-this.xmin,this.xmax),2)+Math.pow(Math.max(-this.ymin,this.ymax),2))},n.prototype.smallestR=function(){return this.xmin<=0&&0<=this.xmax&&this.ymin<=0&&0<=this.ymax?0:this.xmin<=0&&0<=this.xmax?Math.min(Math.abs(this.ymin),Math.abs(this.ymax)):this.ymin<=0&&0<=this.ymax?Math.min(Math.abs(this.xmin),Math.abs(this.xmax)):Math.sqrt(Math.pow(Math.max(this.xmin,-this.xmax),2)+Math.pow(Math.max(this.ymin,-this.ymax),2))},n);function n(t,i,s,h){void 0===t&&(t=-10),void 0===i&&(i=10),void 0===s&&(s=-10),void 0===h&&(h=10),this.xmin=t,this.xmax=i,this.ymin=s,this.ymax=h}t.Viewport=s});
define('core/graphing-calc/migrations/0',['require'],function(require){"use strict";var o={expression:!0,table:!0,image:!0,folder:!0,text:!0};function s(r){return r.replace(/\\(total|length|mean|median|quantile|stdev|stddev|stdDev|stdevp|stddevp|stdDevP|var|variance|cov|corr|ceil|floor|round|abs|mod|lcm|mcm|mcd|nCr|nPr|signum|sign|arcsinh|arccosh|arctanh|arccsch|arcsech|arccoth|arccsc|arcsec|arccot)/g,"\\operatorname{$1}")}function a(r){var e={};for(var n in r)r.hasOwnProperty(n)&&(e[n]="latex"===n?s(r[n]):"values"===n?r[n].map(s):r[n]);return e}function n(r){var e,n=function(r){if(r.type){if(o.hasOwnProperty(r.type))return r.type;throw new Error("Invalid item type: '"+r.type+"'.")}return void 0!==r.text?"text":void 0!==r.columns||void 0!==r.headings?"table":"expression"}(r),t={};switch(n){case"expression":for(e in r)r.hasOwnProperty(e)&&(t[e]="latex"===e?s(r[e]):r[e]);return t.type=n,t;case"table":for(e in r)r.hasOwnProperty(e)&&(t[e]="columns"===e?r[e].map(a):r[e]);return t.type=n,t;case"image":for(e in r)r.hasOwnProperty(e)&&(t[e]="width"===e||"height"===e||"x"===e||"y"===e?s(r[e]):r[e]);return t.type=n,t;case"text":case"folder":for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);return t.type=n,t}}var t={none:"NONE",both:"BOTH",positive:"POSITIVE"};return function(r){if(r.version)throw new Error("Unexpected version: "+r.version);var e={};return e.graph=function(r){var e={};for(var n in r)r.hasOwnProperty(n)&&"xAxisArrows"!==n&&"yAxisArrows"!==n&&(e[n]=r[n]);return e.xAxisArrowMode=t[r.xAxisArrows||"none"],e.yAxisArrowMode=t[r.yAxisArrows||"none"],e}(r.graph),e.expressions={list:r.expressions.list.map(n)},e.version=0,e}});
define('core/graphing-calc/migrations/1',['require'],function(require){"use strict";function s(r){return r.replace(/\\(sech|csch)/g,"\\operatorname{$1}")}function o(r){var e={};for(var n in r)r.hasOwnProperty(n)&&(e[n]="latex"===n?s(r[n]):"values"===n?r[n].map(s):r[n]);return e}function n(r){var e,n=r.type,t={};switch(n){case"expression":for(e in r)r.hasOwnProperty(e)&&(t[e]="latex"===e?s(r[e]):r[e]);return t;case"table":for(e in r)r.hasOwnProperty(e)&&(t[e]="columns"===e?r[e].map(o):r[e]);return t;case"image":for(e in r)r.hasOwnProperty(e)&&(t[e]="width"===e||"height"===e||"x"===e||"y"===e?s(r[e]):r[e]);return t;case"text":case"folder":for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);return t;default:throw new Error("Unexpected expression type: "+n)}}return function(r){if(r.version)throw new Error("Unexpected version: "+r.version);var e={};return e.graph=r.graph,e.expressions={list:r.expressions.list.map(n)},e.version=1,e}});
define('core/graphing-calc/migrations/2',['require','core/lib/color-helpers'],function(require){"use strict";var e=require("core/lib/color-helpers").colors,n="#C0504D",t="#4F81BD",s="#9BBB59",o="#8064A2",a="#F79646",c="#000000";function i(r){switch(r){case n:return e.RED;case t:return e.BLUE;case s:return e.GREEN;case o:return e.PURPLE;case a:return e.ORANGE;case c:return e.BLACK;default:return r}}function u(r){var e={};for(var n in r)r.hasOwnProperty(n)&&(e[n]="color"===n?i(r[n]):r[n]);return e}function p(r){var e,n=r.type,t={};switch(n){case"expression":for(e in r)r.hasOwnProperty(e)&&(t[e]="color"===e?i(r[e]):r[e]);return t;case"table":for(e in r)r.hasOwnProperty(e)&&(t[e]="columns"===e?r[e].map(u):r[e]);return t;case"image":case"text":case"folder":for(e in r)r.hasOwnProperty(e)&&(t[e]=r[e]);return t;default:throw new Error("Unexpected expression type: "+n)}}return function(r){if(1<r.version)throw new Error("Unexpected version: "+r.version);var e={};return e.graph=r.graph,e.expressions={list:r.expressions.list.map(p)},e.version=2,e}});
define('core/graphing-calc/migrations/3',['require'],function(require){"use strict";function t(e){if("string"==typeof e)return e;if(void 0===e)return"";var r=e+"";return r=(r=r.replace(/1e\+?([-\d]+)/,"10^{$1}")).replace(/([-\d\.]+)e\+?([-\d]+)/,"$1\\cdot 10^{$2}")}function n(e){var r,n=e.type,i={};switch(n){case"expression":for(r in e)e.hasOwnProperty(r)&&(i[r]="sliderMax"===r||"sliderMin"===r||"sliderInterval"===r?t(e[r]):"domain"===r?{max:t(e[r].max),min:t(e[r].min)}:e[r]);return i.hasOwnProperty("sliderMin")&&void 0===i.sliderInterval&&(i.sliderInterval=""),i;case"image":case"table":case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(i[r]=e[r]);return i;default:throw new Error("Unexpected expression type: "+n)}}return function(e){if(2<e.version)throw new Error("Unexpected version: "+e.version);var r={};return r.graph=e.graph,r.expressions={list:e.expressions.list.map(n)},r.version=3,r}});
define('core/graphing-calc/migrations/4',['require'],function(require){"use strict";function s(e){switch(e){case"point":return"POINT";case"cross":return"CROSS";case"open":return"OPEN";case"normal":return"SOLID";case"dashed":return"DASHED";case"dotted":return"DOTTED";default:return e}}function o(e){var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]="style"===n?s(e[n]):e[n]);return r}function n(e){var r,n=e.type,t={};switch(n){case"expression":for(r in e)e.hasOwnProperty(r)&&(t[r]="style"===r?s(e[r]):e[r]);return t;case"table":for(r in e)e.hasOwnProperty(r)&&(t[r]="columns"===r?e[r].map(o):e[r]);return t;case"image":case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t;default:throw new Error("Unexpected expression type: "+n)}}return function(e){if(3!==e.version)throw new Error("Unexpected version: "+e.version);var r={};return r.graph=e.graph,r.expressions={list:e.expressions.list.map(n)},r.version=4,r}});
define('core/graphing-calc/validate-state',["require","exports","core/lib/deepCopy"],function(require,e,d){"use strict";function i(e){for(var r,d,i,t,o=function(e){for(var r=0,d=0,i=e;d<i.length;d++){var t=i[d];if(r=v(r,t.id),"table"===t.type)for(var o=0,n=t.columns;o<n.length;o++){var a=n[o];v(r,a.id)}}return r}(e)+1,n={},a=0,l=e;a<l.length;a++){var f=l[a];if(t=void 0,(i=f).slider&&("number"==typeof(t=i.slider).min&&(t.min=""+t.min),"number"==typeof t.max&&(t.max=""+t.max),"number"==typeof t.step&&(t.step=""+t.step)),"string"!=typeof i.id&&(i.id=""+i.id),"folder"===f.type)r=f.id,n[f.id]&&(f.id=""+o,o+=1),d=f.id,n[f.id]=!0,f.hasOwnProperty("folderId")&&delete f.folderId;else{if(void 0!==r&&f.folderId===r?f.folderId=d:(f.folderId&&(f.folderId=""),d=r=void 0),"table"===f.type)for(var s=0,u=f.columns;s<u.length;s++){var p=u[s];n[p.id]&&(p.id=""+o,o+=1),n[p.id]=!0}n[f.id]&&(f.id=""+o,o+=1),n[f.id]=!0}}}function v(e,r){var d=parseFloat(r);return d!==Math.floor(d)?e:Math.max(e,d)}Object.defineProperty(e,"__esModule",{value:!0}),e.validateState=void 0,e.validateState=function(e){var r=d.default(e);return i(r.expressions.list),r}});
define('core/graphing-calc/migrations/back-migration',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(9!==e.version)throw new Error("Unexpected version: "+e.version);var r=e.expressions.list.map(function(e){return e});return{version:8,graph:e.graph,randomSeed:e.randomSeed,expressions:{list:r}}}});
define('core/graphing-calc/migrations/5',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.migrateState=void 0;function d(e){var r={};for(var s in e)e.hasOwnProperty(s)&&"showPoints"!==s&&"showLine"!==s&&(r[s]=e[s]);return void 0===e.showPoints&&void 0===e.showLine||(e.showPoints&&e.showLine?r.columnMode="POINTS_AND_LINES":e.showPoints?r.columnMode="POINTS":e.showLine?r.columnMode="LINES":(r.hidden=!0,r.columnMode="POINTS")),r}function r(e){var r,s=e.type,o={};switch(s){case"expression":for(r in void 0===e.hidden?e.hasOwnProperty("graphed")?o.hidden=!e.graphed:e.hasOwnProperty("userRequestedGraphing")?o.hidden="never"===e.userRequestedGraphing:o.hidden=!1:o.hidden=e.hidden,e)e.hasOwnProperty(r)&&"graphed"!==r&&"userRequestedGraphing"!==r&&"hidden"!==r&&"slider"!==r&&("color"!==r?"style"!==r?"sliderInterval"!==r?o[r]=e[r]:o.sliderInterval="undefined"===e.sliderInterval?"":e.sliderInterval:o.style="normal"===e.style?"SOLID":e.style:"object"==typeof e.color?o.color=e.color.value:o.color=e.color);return o;case"table":if(e.headings||e.columns){var n=e.headings?e.headings:e.columns;if(o.columns=n.map(d),e.rows)for(var i=0;i<o.columns.length;i++){var t=o.columns[i];t.values=[];for(var a=0;a<e.rows.length;a++)t.values.push(e.rows[a][i])}}for(r in e)e.hasOwnProperty(r)&&"rows"!==r&&"headings"!==r&&"columns"!==r&&(o[r]=e[r]);return o;case"image":case"text":case"folder":for(r in e)e.hasOwnProperty(r)&&(o[r]=e[r]);return o;default:throw new Error("Unexpected expression type: "+s)}}e.migrateState=function(e){if(4!==e.version)throw new Error("Unexpected version: "+e.version);return{version:5,graph:function(e){var r,s={};for(var o in e)if(e.hasOwnProperty(o))switch(r=e[o],o){case"showAxes":s.showXAxis=r,s.showYAxis=r;break;case"showLabels":s.xAxisNumbers=r,s.yAxisNumbers=r,s.polarNumbers=r;break;case"labelXMode":s.xAxisStep="pi"===r?Math.PI:0;break;case"labelYMode":s.yAxisStep="pi"===r?Math.PI:0;break;default:s[o]=r}return s}(e.graph),expressions:{list:e.expressions.list.map(r)}}}});
define('core/graphing-calc/migrations/6',["require","exports","core/lib/deepCopy","underscore","core/math/sliders","core/math/evaluate-single-expression"],function(require,e,s,b,O,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.migrateState=void 0;function g(e){var r={};for(var i in e)if(e.hasOwnProperty(i)&&"style"!==i)if("values"===i&&(r[i]=e[i].map(function(e){return e?""+e:""})),"columnMode"!==i||e.hasOwnProperty("points")||e.hasOwnProperty("lines"))r[i]=e[i];else switch(e[i]){case"LINES":r.points=!1,r.lines=!0;break;case"POINTS_AND_LINES":r.points=!0,r.lines=!0;break;default:r.points=!0,r.lines=!1}return r.hasOwnProperty("pointStyle")||(r.pointStyle="POINT"),r.hasOwnProperty("lineStyle")||(r.lineStyle="SOLID"),r.id=""+r.id,r}var x={sliderMin:"min",sliderMax:"max",sliderInterval:"step",sliderHardMin:"hardMin",sliderHardMax:"hardMax",sliderAnimationPeriod:"animationPeriod",sliderLoopMode:"loopMode",sliderPlayDirection:"playDirection",sliderIsPlaying:"isPlaying"};function I(e){var r=function(e){if(!((r=e).length<2)&&"`"===r[0]&&"`"===r[r.length-1])return{raw:e,parts:[e]};for(var r,i,t,a="({"+["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"].join("})|({")+"})",n=new RegExp(a,"g"),l=[],s=0;t=n.exec(e);){s<(i=t.index)&&l.push(e.substr(s,i-s));var o=t[0],d=o.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");l.push({symbol:d,str:o}),s=t.index+o.length}return s<e.length&&l.push(e.substr(s)),{raw:e,parts:l}}(e),i="";return b.each(r.parts,function(e){i+="object"==typeof e&&e.str?"$"+e.str:e}),i}function o(e,r,i,t){var a,n,l,s,o,d,p,c,f,u,h,y=e.type,m={};switch(y){case"folder":for(a in e)e.hasOwnProperty(a)&&("memberIds"===a||(m[a]=e[a]));break;case"expression":for(a in e){e.hasOwnProperty(a)&&("style"!==a||e.hasOwnProperty("pointStyle")||e.hasOwnProperty("lineStyle")?(x.hasOwnProperty(a)?(m.slider=m.slider||{},m.slider[x[a]]=e[a]):m[a]=e[a],e.label&&(m.label=I(e.label))):(n=e[a],b.contains(["POINT","OPEN","CROSS"],n)?(m.pointStyle=n,m.lineStyle="SOLID"):b.contains(["SOLID","DASHED","DOTTED"],n)?(m.pointStyle="POINT",m.lineStyle=n):(m.pointStyle="POINT",m.lineStyle="SOLID")))}m.latex&&m.slider&&!m.slider.isPlaying&&(s=t,2===(u=(l=m).latex.split("=")).length&&(o=v.default(u[1],s),isFinite(o)&&(d=l.slider.hardMin?v.default(l.slider.min||"-10",s):void 0,p=l.slider.hardMax?v.default(l.slider.max||"10",s):void 0,c=l.slider.step?v.default(l.slider.step,s):void 0,(f=O.determineWhichLimitsAreCompatibleWithValue({target:o,step:c,hardMin:d,hardMax:p})).min||(delete l.slider.hardMin,delete l.slider.min),f.max||(delete l.slider.hardMax,delete l.slider.max),f.step||delete l.slider.step))),m.hasOwnProperty("fillOpacity")||(m.fillOpacity=.4),!1===m.label&&(m.label=""),m.labelSize||(m.labelSize="medium"),m.labelOrientation||(m.labelOrientation="default"),m.verticalLabel||(m.verticalLabel=!1),m.interactiveLabel||(m.interactiveLabel=!1);break;case"image":for(a in e)e.hasOwnProperty(a)&&"x"!==a&&"y"!==a&&(m[a]=e[a]);m.center="\\left("+(e.x||"0")+","+(e.y||"0")+"\\right)",m.angle=e.angle||"0",m.foreground=!!m.foreground;break;case"text":for(a in e)e.hasOwnProperty(a)&&(m[a]=e[a]);break;case"table":for(a in e)e.hasOwnProperty(a)&&(m[a]="columns"===a?e[a].map(g):e[a]);break;default:throw new Error("Unexpected expression type: "+y)}return m.id=""+m.id,"folder"===e.type?(r.folderId=m.id,r.memberIds=e.memberIds,m.folderId=""):(h=i[m.id],r.memberIds&&r.memberIds[h]?m.folderId=r.folderId:(m.folderId="",r.folderId=void 0,r.memberIds=void 0)),m}e.migrateState=function(e){if(5!==e.version)throw new Error("Unexpected version: "+e.version);var r=!(!e.graph||!e.graph.degreeMode),i=e.expressions.list,t=-1,a={},n={},l={};return{version:6,graph:e.graph,expressions:{list:i.map(function(e){return a[e.id]?(-1===t&&(t=function(e){for(var r=0,i=/^[0-9]+$/,t=e.length-1;0<=t;t--){var a,n=e[t],l=n.id;if(i.test(l)&&r<(a=parseInt(l,10))&&(r=a),"table"===n.type&&n.columns)for(var s=n.columns.length-1;0<=s;s--)l=n.columns[s].id,i.test(l)&&r<(a=parseInt(l,10))&&(r=a)}return r+1}(i)),n[t]=e.id,(e=s.default(e)).id=t+"",t+=1):n[e.id]=e.id,a[e.id]=!0,o(e,l,n,r)})}}}});
define('core/graphing-calc/migrations/7',["require","exports","tslib"],function(require,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(6!==e.version)throw new Error("Unexpected version: "+e.version);var n=e.expressions.list.map(function(e){if("expression"===e.type&&e.domain){var n=r.__assign(r.__assign({},e),{parametricDomain:{min:e.domain.min,max:e.domain.max}});return delete n.domain,n}return e});return{version:7,randomSeed:e.randomSeed,graph:e.graph,expressions:{list:n}}}});
define('core/lib/random-seed',["require","exports","core/lib/md5"],function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e=new Uint8Array(16);if("undefined"!=typeof crypto)crypto.getRandomValues(e);else{if("undefined"==typeof msCrypto)return t(Date.now().toString());msCrypto.getRandomValues(e)}return Array.prototype.slice.call(e).map(function(e){return 1===(t=e.toString(16)).length?"0"+t:t;var t}).join("")}});
define('core/graphing-calc/migrations/8',["require","exports","tslib","core/lib/random-seed","core/lib/deepCopy"],function(require,e,o,t,p){"use strict";function c(e){var r=e.split("_");return 2===r.length&&r[1]&&1===r[1].length?r[0]+"_{"+r[1]+"}":e}function d(e){return(e=p.default(e)).rules||!e.assignment&&!e.expression||(e.rules=[{id:"1",assignment:e.assignment||"",expression:e.expression||""}]),delete e.assignment,delete e.expression,e}function y(e){return e.replace(/\\operatorname(?:\{stdev\}p|\{stddev\}p|\{stdDev\}P|\{var\}iance)/g,function(e){switch(e){case"\\operatorname{stdev}p":return"\\operatorname{stdevp}";case"\\operatorname{stddev}p":return"\\operatorname{stddevp}";case"\\operatorname{stdDev}P":return"\\operatorname{stdDevP}";case"\\operatorname{var}iance":return"\\operatorname{variance}";default:return""}})}function u(e){var r=e.latex,t=e.values,a=o.__assign({},e);return r&&(a.latex=y(r),a.latex=c(a.latex)),t&&(a.values=t.map(function(e){return e?y(e):""})),a}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(7!==e.version)throw new Error("Unexpected version: "+e.version);var r=e.expressions.list.map(function(e){if("image"===e.type){var r,t=o.__assign(o.__assign({},e),{opacity:""});for(var a in e.hasOwnProperty("stringOpacity")?t.opacity=e.stringOpacity:e.hasOwnProperty("opacity")?t.opacity=e.opacity+"":delete t.opacity,e.clickableInfo&&(t.clickableInfo=d(e.clickableInfo)),delete t.stringOpacity,e){"x"!==a&&"y"!==a&&"width"!==a&&"height"!==a||(r=e[a])&&(t[a]=y(r))}return t}if("expression"!==e.type)return"table"===e.type?(i=e).columns?o.__assign(o.__assign({},i),{columns:i.columns.map(u)}):i:e;var i,t=o.__assign(o.__assign({},e),{fillOpacity:"",lineStyle:"SOLID"});if("SINGLE_PIXEL"===e.lineStyle?t.lineWidth="1":e.hasOwnProperty("lineStyle")?t.lineStyle=e.lineStyle:delete t.lineStyle,t.hasOwnProperty("lineWidth")||(t.lineWidth=""),t.hasOwnProperty("lineOpacity")||(t.lineOpacity=""),t.hasOwnProperty("pointOpacity")||(t.pointOpacity=""),t.hasOwnProperty("colorLatex")||(t.colorLatex=""),"string"==typeof e.latex&&(t.latex=y(e.latex)),e.latex&&(t.latex=y(e.latex)),e.hasOwnProperty("stringFillOpacity")?t.fillOpacity=e.stringFillOpacity:e.hasOwnProperty("fillOpacity")?t.fillOpacity=e.fillOpacity+"":delete t.fillOpacity,t.slider&&e.slider&&e.slider.newLoopMode&&(t.slider=p.default(t.slider),t.slider.loopMode=e.slider.newLoopMode,delete t.slider.newLoopMode),t.residualVariable&&(t.residualVariable=c(t.residualVariable)),t.regressionParameters)for(var n in t.regressionParameters={},e.regressionParameters){var s=c(n),l=e.regressionParameters[n];t.regressionParameters[s]=l}return e.clickableInfo&&(t.clickableInfo=d(e.clickableInfo)),t});return{version:8,randomSeed:e.randomSeed||t.default(),graph:e.graph,expressions:{list:r}}}});
define('core/graphing-calc/migrations/9',["require","exports","core/lib/random-seed"],function(require,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(8!==e.version)throw new Error("Unexpected version: "+e.version);var r=e.expressions.list.map(function(e){return e});return{version:9,randomSeed:e.randomSeed||n.default(),graph:e.graph,expressions:{list:r}}}});
define('core/graphing-calc/migrate-state',["require","exports","./migrations/0","./migrations/1","./migrations/2","./migrations/3","./migrations/4","core/graphing-calc/validate-state","./migrations/back-migration","./migrations/5","./migrations/6","./migrations/7","./migrations/8","./migrations/9"],function(require,r,e,t,i,n,o,a,s,l,u,c,d,v){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.migrateToPersisted=r.migrateToLatest=r.currentVersion=r.persistedVersion=void 0;var g=[e,t,i,n,o,l.migrateState,u.migrateState,c.default,d.default,v.default];function f(e){if(e.version>r.currentVersion)return"undefined"!=typeof console&&console.warn&&console.warn("Loading saved state with version "+e.version+" but last known version is "+r.currentVersion+". States saved in a newer version of the calculator may not load correctly in an older version of the calculator."),a.validateState(e);if(e.hasOwnProperty("version")&&!g[e.version])return"undefined"!=typeof console&&console.warn&&console.warn("State has invalid version "+e.version+". If a version is present, it should be a non-negative integer less than or equal to "+r.currentVersion+"."),a.validateState(e);for(e.hasOwnProperty("version")||(e=g[0](e));e.version<r.currentVersion;)e=g[e.version+1](e);return a.validateState(e)}r.persistedVersion=8,r.currentVersion=9,r.migrateToLatest=f,r.migrateToPersisted=function(e){return s.default(f(e))}});
define('core/math/smart-slider-defaults',["require","exports","core/math/baseparser"],function(require,e,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkVariableForBoundRestrictions=e.computeDefaults=void 0;var o={rgb:{paramBounds:function(e){return{value:0,min:0,max:255,step:1}}},hsv:{paramBounds:function(e){return 0===e?{value:0,min:0,max:360,step:1}:{value:.5,min:0,max:1}}}};function l(t,e){var r=e;"Assignment"===r.type&&(r=r._expression);var a=[];switch(r.type){case"FunctionCall":var u,n=r._symbol;o.hasOwnProperty(n)&&(u=o[n],r.args.forEach(function(e,r){var n;"Identifier"!==e.type||e._symbol!==t||(n=u.paramBounds(r))&&a.push(n)}));break;default:return}return a}e.computeDefaults=function(e,r){for(var n=e.map(function(e){return p.parse(e)}),t={},a=0,u=r;a<u.length;a++)for(var o=u[a],s=0,i=n;s<i.length;s++){var c=l(o,i[s]);c&&c.length&&(t[o]=c[0])}return t},e.checkVariableForBoundRestrictions=l});
define('graphing-calc/models/focus',["require","exports","./expression","./list"],function(require,e,i,n){"use strict";function d(e,t,o){s(e,l(e,t,o))}function s(e,t){var o;(e.focusLocation=t)&&"settings"!==t.type&&"editable-label"!==t.type&&"add-item-btn"!==t.type&&"add-expression-btn"!==t.type&&"add-table-btn"!==t.type&&"add-folder-btn"!==t.type&&"add-simulation-btn"!==t.type&&"add-image-btn"!==t.type&&"edit-list-toggle"!==t.type&&"hide-expression-list-btn"!==t.type&&"show-expression-list-btn"!==t.type&&"search-expressions"!==t.type&&(o=e.getItemModel(t.id),"expression-menu"!==t.type?(n.setSelected(e.getListModel(),o),o&&"expression"===o.type&&i.setSliderIsPlaying(o,!1)):n.setSelected(e.getListModel(),void 0))}function l(e,t,o){var i=e.getItemModel(t);if(i)switch(i.type){case"expression":return{type:e.isInEditListMode()?"readonly-expression":i.type,id:t};case"folder":case"text":return{type:i.type,id:t};case"table":var s={row:1,column:0},n=!1;return o&&("cell"===o.location?s={row:o.row,column:o.column}:"end"===o?s={row:i.columnModels[0].cells.length,column:0}:"start"===o?s={row:0,column:0}:"container"===o&&(n=!0)),n?{type:"table-container",id:t}:{type:i.type,id:t,location:s};case"image":return{type:i.type,id:t,location:"name"};case"simulation":return{type:i.type,id:t,location:"fps"};default:return i}}Object.defineProperty(e,"__esModule",{value:!0}),e.focusTableCell=e.getFocusedItem=e.addFocusForKeypad=e.computeFocusLocationForItem=e.setFocusLocation=e.moveFocusToItem=void 0,e.moveFocusToItem=d,e.setFocusLocation=s,e.computeFocusLocationForItem=l,e.addFocusForKeypad=function(e){var t=e.getSelectedItem();if(t&&"expression"===t.type)d(e,t.id);else if(!t||"table"!==t.type||!e.focusLocation){for(var o,i=e.getFirstFullyVisibleItem(),s=e.getListModel();i&&"expression"!==i.type;)i=n.findNextSelectableItem(s,i.index);i?d(e,i.id):(o=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()}),n.insertItemAtEnd(e.getListModel(),o),d(e,o.id))}},e.getFocusedItem=function(e){var t=e.focusLocation;if(t&&"settings"!==t.type&&"editable-label"!==t.type&&"add-item-btn"!==t.type&&"add-expression-btn"!==t.type&&"add-table-btn"!==t.type&&"add-simulation-btn"!==t.type&&"add-folder-btn"!==t.type&&"add-image-btn"!==t.type&&"edit-list-toggle"!==t.type&&"hide-expression-list-btn"!==t.type&&"show-expression-list-btn"!==t.type&&"search-expressions"!==t.type)return e.getItemModel(t.id)},e.focusTableCell=function(e,t,o){s(e,{type:"table",id:t,location:o})}});
define('graphing-calc/actions/keyboard',["require","exports","browser","lib/conditional_blur","../models/table","../models/focus","../models/list","../models/abstract-item"],function(require,e,s,d,v,p,r,n){"use strict";function S(e){var t=e.getSelectedItem();t&&(e.inAudioTraceMode()||0!==t.index&&(r.selectPrevItem(e.getListModel()),(t=e.getSelectedItem())&&p.moveFocusToItem(e,t.id,"end")))}function b(e){var t,o;e.inAudioTraceMode()||(r.selectNextItem(e.getListModel())||e.isInEditListMode()||(t=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()}),r.insertItemAtEnd(e.getListModel(),t),r.setSelected(e.getListModel(),t)),(o=e.getSelectedItem())&&p.moveFocusToItem(e,o.id,"start"))}function M(e){if(!e.isInEditListMode()){var t=e.getSelectedItem();if(t&&(1!==e.getItemCount()||"expression"!==t.type)){var o="text"===t.type,l=r.getParentFolderModel(t);if(l){var d=e.getNumberOfItemsInFolder(l.id);if(t.index===l.index+d)return void n.setFolderId(t,"")}i(e),o&&s.IS_IPAD&&s.IS_IN_IFRAME?r.setSelected(e.getListModel(),void 0):(t=e.getSelectedItem())&&p.moveFocusToItem(e,t.id,"end")}}}function x(e){var t;e.isInEditListMode()||(t=e.getSelectedItem())&&(1===e.getItemCount()&&"expression"===t.type||(o(e),(t=e.getSelectedItem())&&p.moveFocusToItem(e,t.id,"start")))}function w(e){if(!e.isInEditListMode()){var t=e.getSelectedItem();if(t){if("text"===t.type&&s.IS_IPAD&&s.IS_IN_IFRAME)return d.default(),void r.setSelected(e.getListModel(),void 0);if(r.getMissingVariablesForItem(t).length&&e.areSlidersEnabled())return e.createSlidersForItem(t.id,r.getMissingVariablesForItem(t).concat(""));var o=e.createItemModel({type:"expression",id:e.generateId(),color:e.getNextColor()}),l=t.index+1;"folder"===t.type&&t.collapsed&&(l+=e.getNumberOfItemsInFolder(t.id)),r.insertItemAtIndex(e.getListModel(),o,l),r.setSelected(e.getListModel(),o),"folder"!==t.type||t.collapsed?"folder"!==t.type&&t.folderId&&n.setFolderId(o,t.folderId):n.setFolderId(o,t.id),(t=e.getSelectedItem())&&p.moveFocusToItem(e,t.id)}}}function i(e){var t,o,l=c(e),d=e.getListModel();l&&(t=r.findPrevSelectableItem(d,l.index),e._removeExpressionSynchronously(l),t||(o=r.getFirstSelectableItem(d))&&(t=o),r.setSelected(d,t))}function o(e){var t,o,l=c(e),d=e.getListModel();l&&(t=r.findNextSelectableItem(d,l.index),e._removeExpressionSynchronously(l),t||(o=r.getLastSelectableItem(d))&&(t=o),r.setSelected(d,t))}function c(e){var t=e.getSelectedItem();return"folder"==(null==t?void 0:t.type)&&t.collapsed&&t.selectedHiddenChild?t.selectedHiddenChild:t}Object.defineProperty(e,"__esModule",{value:!0}),e.downwardDeleteSelectedExpression=e.upwardDeleteSelectedExpression=e.onEnterPressed=e.onDeletePressed=e.onBackspacePressed=e.onDownPressed=e.onUpPressed=e.navigateTableByKey=void 0,e.navigateTableByKey=function(o,l,e){var t=o.getItemModel(l);if(t&&"table"===t.type){var d=t,s=v.getSelectedCell(d),r=s?s.row:-1,n=s?s.column:-1,i=d.columnModels,c=i[0].cells.length,a=i.length,u=function(e,t){-1===e?S(o):c<e?b(o):(-1===t?(t=a-1,e--):t===a&&(e++,t=0),p.focusTableCell(o,l,{row:e,column:t}))},m=function(e){2<c&&v.removeRow(d,r-1),p.focusTableCell(o,l,{row:e,column:n})},I=function(e){0===n||a<=2||(v.removeColumn(d,n),p.focusTableCell(o,l,{row:r,column:e}))};switch(e){case"Left":u(r,n-1);break;case"Right":u(r,n+1);break;case"Up":u(r-1,n);break;case"Down":u(r+1,n);break;case"Enter":if(c<=r)return w(o);if(0<n)return u(r+1,n);if(r===c-1){var f=v.getRowAutoFillValues(d,r);v.insertBlankRow(d,r);for(var g=0;g<f.length;g++)v.setCellLatex(d,{row:r+1,column:g},f[g]);return void p.focusTableCell(o,l,{row:r+1,column:n})}v.insertBlankRow(d,r),p.focusTableCell(o,l,{row:r+1,column:n});break;case"Backspace":0===r?0===n?M(o):n===a-1||1===n&&3===a?u(0,n-1):I(n-1):0!==n?u(r,n-1):r===c?u(r-1,n):m(r-1);break;case"Delete":0===r?0===n?x(o):n<a-1&&I(n):c<=r||m(r)}}},e.onUpPressed=S,e.onDownPressed=b,e.onBackspacePressed=M,e.onDeletePressed=x,e.onEnterPressed=w,e.upwardDeleteSelectedExpression=i,e.downwardDeleteSelectedExpression=o});
define('main/expression-zoom-helpers',["require","exports","core/lib/deepCopy"],function(require,i,n){"use strict";function p(i){var m=1.2;return(i=n.default(i)).xmax<0&&i.xmin<0&&i.xmax/(i.xmin-i.xmax)<m&&(i.xmax=0),0<i.xmax&&0<i.xmin&&i.xmin/(i.xmax-i.xmin)<m&&(i.xmin=0),i.ymax<0&&i.ymin<0&&i.ymax/(i.ymin-i.ymax)<m&&(i.ymax=0),0<i.ymax&&0<i.ymin&&i.ymin/(i.ymax-i.ymin)<m&&(i.ymin=0),i}function d(i,m){var n=i.type,x=function(i,m){if("dotplot"!==i.type&&"histogram"!==i.type)return.5;var n=80*Math.max(1,i.xmax-i.xmin)/(i.binWidth?i.binWidth:1),x=.5*(m.screen.width-n)/n;return Math.max(.2,x)}(i,m),a="boxplot"===n?3:.5;i.xmin===i.xmax&&(i.xmin-=.5,i.xmax+=.5),i.ymin===i.ymax&&(i.ymin-=.5,i.ymax+=.5);var t,e,r,o,y,s=i.xmax-i.xmin,p=i.xmin-x*s,d=i.xmax+x*s,u=i.ymax-i.ymin;return o=i.ymin-a*u,r=i.ymax+a*u,"boxplot"!==(y=n)&&"dotplot"!==y&&"histogram"!=y||(t=(d-p)*(m.screen.height/m.screen.width))>i.ymax-i.ymin&&t<function(i){switch(i){case"histogram":case"dotplot":return 12;case"boxplot":return 40}return 1/0}(n)*(i.ymax-i.ymin)&&(r=(e=.5*(i.ymax+i.ymin))+.5*t,o=e-.5*t),{xmin:p,xmax:d,ymin:o,ymax:r}}function r(i,m){for(var n=1/0,x=-1/0,a=1/0,t=-1/0,e=0,r=i.length,o=0;o<r;o++){var y,s=p(i[o]);isFinite(s.xmax-s.xmin)&&isFinite(s.ymax-s.ymin)?((y=d(s,m)).xmin<n&&(n=y.xmin),y.xmax>x&&(x=y.xmax),y.ymin<a&&(a=y.ymin),y.ymax>t&&(t=y.ymax)):e+=1}if(e!==r)return{xmin:n,xmax:x,ymin:a,ymax:t}}Object.defineProperty(i,"__esModule",{value:!0}),i.getRecommendedViewportForExpression=i.shouldExpressionZoomFit=i.padViewport=i.conditionalExpandViewport=void 0,i.conditionalExpandViewport=p,i.padViewport=d,i.shouldExpressionZoomFit=function(i,m){var n=r(i,m);if(!n)return!1;var x=m.mapx(n.xmin),a=m.mapx(n.xmax),t=m.mapy(n.ymin),e=m.mapy(n.ymax);return!(Math.abs(x)<=10&&Math.abs(e)<=10&&Math.abs(a-m.screen.width)<=10&&Math.abs(t-m.screen.height)<=10)},i.getRecommendedViewportForExpression=r});
define('main/layout-model',["require","exports","browser"],function(require,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultLayoutModel=e.getShiftedLayoutForCurrentLayout=void 0,e.getShiftedLayoutForCurrentLayout=function(e){switch(e){case"letters":return"capitalLetters";case"noQwertyLetters":return"noQwertyCapitalLetters";case"noQwertyCapitalLetters":return"noQwertyLetters";default:return"letters"}},e.defaultLayoutModel=function(e){return{keypadMinimized:!t.IS_TOUCH_DEVICE,keypadLayout:"mainNumbers",keypadFunctionsTab:"trig",keypadFunctionsOpen:!1,graphSettingsOpen:!1,addExpressionOpen:!1,expressionsVisible:!!e.expressions,inEditListMode:!1,isFileDraggedOver:!1,expressionsHiddenTime:void 0}}});
define('main/settings-view-model',["require","exports","tslib","core/lib/label"],function(require,t,a,m){"use strict";function e(t,i){var e,n=m.value(t,i);return(n.mantissa?n.mantissa.split("").join("\\cdot")+"^{"+n.superscript+"}":2===(e=n.string.split("/")).length?"-"===e[0][0]?"-\\frac{"+e[0].slice(1)+"}{"+e[1]+"}":"\\frac{"+e[0]+"}{"+e[1]+"}":n.string).replace(//,"\\pi")}function r(t){return{xmin:e(t.xmin,t.xmax-t.xmin),xmax:e(t.xmax,t.xmax-t.xmin),ymin:e(t.ymin,t.ymax-t.ymin),ymax:e(t.ymax,t.ymax-t.ymin)}}function x(t,i){return 0===t?"":e(t,i)}Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSettingsViewModel=t.limitLatex=t.formatStep=t.formatViewport=t.formatLatex=void 0,t.formatLatex=e,t.formatViewport=r,t.formatStep=x,t.limitLatex=function(t,i,e){var n=r(t);return a.__assign(a.__assign({},n),{xstep:x(i,t.xmax-t.xmin),ystep:x(e,t.ymax-t.ymin)})},t.defaultSettingsViewModel=function(){return{limitLatex:{xmin:"",xmax:"",xstep:"",ymin:"",ymax:"",ystep:""}}}});
!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define('abraham',[],t);else{var r=t();for(var i in r)("object"==typeof exports?exports:e)[i]=r[i]}}(this,function(){return n={},i.m=r=[function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(22);t.map=function(e,t){var r=i.map(e,t);return e.warnings&&(r.warnings=e.warnings),r}},function(e,t){var r,i,n=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var c,l=[],u=!1,h=-1;function p(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&f())}function f(){if(!u){var e=o(p);u=!0;for(var t=l.length;t;){for(c=l,l=[];++h<t;)c&&c[h].run();h=-1,t=l.length}c=null,u=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(e)}}function m(e,t){this.fun=e,this.array=t}function y(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];l.push(new m(e,t)),1!==l.length||u||o(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=y,n.addListener=y,n.once=y,n.off=y,n.removeListener=y,n.removeAllListeners=y,n.emit=y,n.prependListener=y,n.prependOnceListener=y,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=["abs","ans","arccosh","arccot","arccoth","arccsc","arccsch","arcsec","arcsech","arcsinh","arctanh","binomialdist","boxplot","cdf","ceil","corr","cov","csch","distance","dotplot","erf","floor","gcf","histogram","IndependentTTest","iTTest","ittest","lcm","length","mad","mcd","mcm","mean","median","midpoint","mod","nCr","normaldist","nPr","pdf","poissondist","polygon","quantile","quartile","random","round","sech","sign","signum","stdDev","stddev","stdDevP","stddevp","stdev","stdevp","tdist","total","TScore","TScore","Tscore","tscore","tscore","TTest","ttest","var","variance","varp"],n=i,s=a(i);function a(e){var t=e.sort(function(e,t){return t.length-e.length||t.localeCompare(e)}).join("|");return new RegExp("("+t+")","g")}t.getAutoOperator=function(e){for(var t,r=0,i="",n=0,s=e;n<s.length;n++){var a=s[n];if("terminal"!==a.type||!/[A-Za-z]/.test(a.value))break;i+=a.value,r++}return t=i.replace(o,"\\operatorname{$1}"),{modified:0<r&&t!==i,terminalCount:r,value:t}},t.containsValue=function(e){return-1!==n.indexOf(e.toLowerCase())},t.setOperatorNames=function(e){if(!Array.isArray(e))throw new Error("Operator names must be an array, got "+typeof e);for(var t=0,r=e;t<r.length;t++){var i=r[t];if("string"!=typeof i)throw new Error("Operator names must be strings, found "+typeof i)}o=a(n=e)},t.resetOperatorNames=function(){n=i,o=s}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var i=t(2),n=t(14),s=t(15),a=t(16),o=t(0),c=t(23),l=t(25);function u(e){if(!l.isSixDotCells(e))throw new Error("EncodingError: Expected input to be six-dot unicode braille characters.")}r.nemethToLatex=function(e,t){return u(e),a.default(r.UnicodeBraille.toBrailleAscii(e),t)},r.latexToNemeth=function(e,t){return t&&t.operatorNames?i.setOperatorNames(t.operatorNames):i.resetOperatorNames(),o.map(n.default(e),r.UnicodeBraille.coerceToSixDotCells)},r.uebToLatex=function(e,t){return u(e),c.default(r.UnicodeBraille.toBrailleAscii(e),t)},r.latexToUeb=function(e,t){return t&&t.operatorNames?i.setOperatorNames(t.operatorNames):i.resetOperatorNames(),o.map(s.default(e),r.UnicodeBraille.coerceToSixDotCells)},r.UnicodeBraille={coerceToSixDotCells:l.coerceToSixDotCells,toBrailleAscii:l.toBrailleAscii,toExpandedBrailleAscii:l.toExpandedBrailleAscii},r.version="1.0.3"},function(e,t){},function(e,l,t){(function(n){function s(e,t){for(var r=0,i=e.length-1;0<=i;i--){var n=e[i];"."===n?e.splice(i,1):".."===n?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;)e.unshift("..");return e}function a(e){return t.exec(e).slice(1)}var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function o(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i],i,e)&&r.push(e[i]);return r}l.resolve=function(){for(var e="",t=!1,r=arguments.length-1;-1<=r&&!t;r--){var i=0<=r?arguments[r]:n.cwd();if("string"!=typeof i)throw new TypeError("Arguments to path.resolve must be strings");i&&(e=i+"/"+e,t="/"===i.charAt(0))}return(t?"/":"")+(e=s(o(e.split("/"),function(e){return!!e}),!t).join("/"))||"."},l.normalize=function(e){var t=l.isAbsolute(e),r="/"===i(e,-1);return(e=s(o(e.split("/"),function(e){return!!e}),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},l.isAbsolute=function(e){return"/"===e.charAt(0)},l.join=function(){var e=Array.prototype.slice.call(arguments,0);return l.normalize(o(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},l.relative=function(e,t){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var r=e.length-1;0<=r&&""===e[r];r--);return r<t?[]:e.slice(t,r-t+1)}e=l.resolve(e).substr(1),t=l.resolve(t).substr(1);for(var i=r(e.split("/")),n=r(t.split("/")),s=Math.min(i.length,n.length),a=s,o=0;o<s;o++)if(i[o]!==n[o]){a=o;break}for(var c=[],o=a;o<i.length;o++)c.push("..");return(c=c.concat(n.slice(a))).join("/")},l.sep="/",l.delimiter=":",l.dirname=function(e){var t=a(e),r=t[0],i=t[1];return r||i?r+(i=i&&i.substr(0,i.length-1)):"."},l.basename=function(e,t){var r=a(e)[2];return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},l.extname=function(e){return a(e)[3]};var i="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(l,t(1))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){if(!e.hash)throw e;return{_diagnostic:{expected:e.hash.expected,message:e.message,text:e.hash.text,token:e.hash.token},location:e.hash.loc}}},function(e,t,r){"use strict";function a(e){return{type:"command",value:e}}function o(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=function(e){return{type:"terminal",value:e}},t.command=a,t.greek=function(e){return{type:"greek",value:e}},t.level=function(e){return{subscript:e._,superscript:e["^"],type:"level"}},t.processPrimes=function(e,t){var r=[],i=e.match(/'+/);if(null!==i)for(var n=i[0].length,s=0;s<n;s++)r.push(a("\\prime"));return o(r,t)},t.fraction=function(e,t){return{type:"fraction",numerator:e,denominator:t}},t.typeform=function(e,t){return{name:e,type:"typeform",value:t}},t.radical=function(e,t){return{type:"radical",index:t,radicand:e}},t.group=o},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,J,ee){(function(r,e){var t,i,n,s,a,o,c,l,u,h,p,f,m,y,d,g,v,_,k,b,E,A,O,x,I,S,L,P,C,R,$,T,N,w,M,D,F,U,j,G,X,B,K,Z,V,H,W,q,z=(K=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,81],Z=[1,74],V=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,76,77,78,79,81],H=[5,11,12,13,14,15,17,18,20,21,23,24,25,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81],W={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,element:6,index_element:7,modified_expression:8,radical:9,primes:10,OPEN_MODEXP:11,MODEXP_UNDER:12,MODEXP_OVER:13,CLOSE_MODEXP:14,RADICAL_INDEX:15,index_group:16,OPEN_RADICAL:17,CLOSE_RADICAL:18,level:19,LEVEL:20,BASELINE:21,frac:22,OPEN_FRAC:23,SLASH:24,CLOSE_FRAC:25,subscript_head:26,number:27,atom:28,command:29,greek:30,letter:31,comma:32,period:33,space:34,operation:35,comparison:36,level_with_comparison:37,ellipsis:38,colon:39,infinity:40,integral:41,factorial:42,ampersand:43,question_mark:44,bracket:45,",":46,".":47,"[":48,"{":49,"(":50,"]":51,"}":52,")":53,LANGLE:54,RANGLE:55,PIPE:56,DOUBLE_PIPE:57,SPACE:58,COMMAND:59,GREEK:60,LETTER:61,CAPITAL_LETTER:62,"+":63,"-":64,CDOT:65,TIMES:66,"*":67,"/":68,DIV:69,PERCENT:70,COMPARISON:71,LEVEL_WITH_COMPARISON:72,ELLIPSIS:73,COLON:74,NUMBER:75,INFINITY:76,INTEGRAL:77,FACTORIAL:78,"&":79,PRIMES:80,"?":81,unknown:82,UNKNOWN:83,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",11:"OPEN_MODEXP",12:"MODEXP_UNDER",13:"MODEXP_OVER",14:"CLOSE_MODEXP",15:"RADICAL_INDEX",17:"OPEN_RADICAL",18:"CLOSE_RADICAL",20:"LEVEL",21:"BASELINE",23:"OPEN_FRAC",24:"SLASH",25:"CLOSE_FRAC",46:",",47:".",48:"[",49:"{",50:"(",51:"]",52:"}",53:")",54:"LANGLE",55:"RANGLE",56:"PIPE",57:"DOUBLE_PIPE",58:"SPACE",59:"COMMAND",60:"GREEK",61:"LETTER",62:"CAPITAL_LETTER",63:"+",64:"-",65:"CDOT",66:"TIMES",67:"*",68:"/",69:"DIV",70:"PERCENT",71:"COMPARISON",72:"LEVEL_WITH_COMPARISON",73:"ELLIPSIS",74:"COLON",75:"NUMBER",76:"INFINITY",77:"INTEGRAL",78:"FACTORIAL",79:"&",80:"PRIMES",81:"?",83:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,2],[4,1],[6,1],[6,1],[6,2],[6,1],[8,7],[8,6],[8,5],[8,6],[8,5],[8,5],[8,4],[8,4],[8,3],[8,4],[8,4],[8,4],[8,4],[8,3],[8,3],[8,2],[9,5],[9,4],[9,4],[9,3],[9,3],[9,2],[19,1],[19,1],[22,5],[22,4],[22,4],[22,3],[16,2],[16,1],[7,3],[7,2],[7,2],[7,3],[7,2],[7,2],[7,1],[7,1],[7,1],[26,1],[26,1],[26,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[28,1],[32,1],[33,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[45,1],[34,1],[29,1],[30,1],[31,1],[31,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[35,1],[36,1],[37,1],[38,1],[39,1],[27,1],[40,1],[41,1],[42,1],[43,1],[10,1],[44,1],[82,1]],performAction:function(e,t,r,i,n,s){var a=s.length-1;switch(n){case 1:return s[a-1];case 2:return i.group();case 3:case 37:case 41:case 43:case 44:this.$=i.group(s[a-1],s[a]);break;case 4:case 38:this.$=i.group(s[a]);break;case 7:this.$=i.group(s[a-1],s[a]);break;case 9:this.$=i.modified_expression(s[a-5],s[a-3],s[a-1]);break;case 10:this.$=i.modified_expression(s[a-4],s[a-2]);break;case 11:this.$=i.modified_expression(s[a-3],s[a-1]);break;case 12:this.$=i.modified_expression(s[a-4],i.group(),s[a-1]);break;case 13:this.$=i.modified_expression(s[a-3],i.group(),s[a-1]);break;case 14:this.$=i.modified_expression(s[a-3],i.group(),i.group());break;case 15:case 16:this.$=i.modified_expression(s[a-2],i.group());break;case 17:this.$=i.modified_expression(s[a-1]);break;case 18:case 19:case 22:case 23:case 24:this.$=i.modified_expression(i.group());break;case 20:case 21:i.warnOrError("Multi-level modified expressions are not supported."),this.$=i.modified_expression(i.group());break;case 25:this.$=i.radical(s[a-1],s[a-3]);break;case 26:this.$=i.radical(s[a-1],i.group());break;case 27:this.$=i.radical(i.group(),s[a-2]);break;case 28:this.$=i.radical(i.group(),i.group());break;case 29:this.$=i.radical(s[a-1]);break;case 30:this.$=i.radical(i.group());break;case 31:this.$=i.level(s[a]);break;case 32:this.$=i.baseline();break;case 33:this.$=i.fraction(s[a-3],s[a-1]);break;case 34:this.$=i.fraction(s[a-2],i.group());break;case 35:this.$=i.fraction(i.group(),s[a-1]);break;case 36:this.$=i.fraction(i.group(),i.group());break;case 39:this.$=i.group(i.simple_subscript(s[a-2],s[a]),s[a-1]);break;case 40:this.$=i.simple_subscript(s[a-1],s[a]);break;case 42:i.warnOrError("Illegal use of Nemeth primes"),this.$=i.group(i.simple_subscript(s[a-2],s[a-1]),s[a]);break;case 67:this.$=i.terminal(",");break;case 68:this.$=i.terminal(".");break;case 69:this.$=i.terminal("[");break;case 70:this.$=i.terminal("\\{");break;case 71:this.$=i.terminal("(");break;case 72:this.$=i.terminal("]");break;case 73:this.$=i.terminal("\\}");break;case 74:this.$=i.terminal(")");break;case 75:this.$=i.terminal("\\langle ");break;case 76:this.$=i.terminal("\\rangle ");break;case 77:this.$=i.terminal("|");break;case 78:this.$=i.terminal("\\|");break;case 79:this.$=i.terminal(" ");break;case 80:this.$=i.command(s[a].toLowerCase());break;case 81:this.$=i.terminal(i.greek(s[a]));break;case 82:this.$=i.terminal(s[a].toLowerCase());break;case 83:this.$=i.terminal(s[a].toUpperCase());break;case 84:this.$=i.terminal("+");break;case 85:this.$=i.terminal("-");break;case 86:this.$=i.terminal("\\cdot ");break;case 87:this.$=i.terminal("\\times ");break;case 88:this.$=i.terminal("*");break;case 89:this.$=i.terminal("/");break;case 90:this.$=i.terminal("\\div ");break;case 91:this.$=i.terminal("\\%");break;case 92:this.$=i.comparison(s[a].trim());break;case 93:this.$=i.level_with_comparison(s[a].trim());break;case 94:this.$=i.terminal("\\ldots ");break;case 95:this.$=i.terminal(":");break;case 96:this.$=i.terminal(s[a]);break;case 97:this.$=i.terminal("\\infty ");break;case 98:this.$=i.terminal("\\int ");break;case 99:this.$=i.terminal("!");break;case 100:this.$=i.terminal("\\&");break;case 101:this.$=i.primes(s[a]);break;case 102:this.$=i.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,11:t=[1,11],15:i=[1,12],17:n=[1,13],19:33,20:s=[1,69],21:a=[1,70],22:32,23:o=[1,68],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c=[1,38],47:l=[1,39],48:u=[1,58],49:h=[1,59],50:p=[1,60],51:f=[1,61],52:m=[1,62],53:y=[1,63],54:d=[1,64],55:g=[1,65],56:v=[1,66],57:_=[1,67],58:k=[1,40],59:b=[1,34],60:E=[1,35],61:A=[1,36],62:O=[1,37],63:x=[1,41],64:I=[1,42],65:S=[1,43],66:L=[1,44],67:P=[1,45],68:C=[1,46],69:R=[1,47],70:$=[1,48],71:T=[1,49],72:N=[1,50],73:w=[1,51],74:M=[1,52],75:D=[1,17],76:F=[1,53],77:U=[1,54],78:j=[1,55],79:G=[1,56],81:X=[1,57]},{1:[3]},{5:[1,71]},{1:[2,2]},Q(B=[5,12,13,14,18,24,25],[2,4],{6:4,7:5,8:6,9:7,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,22:32,19:33,4:72,11:t,15:i,17:n,20:s,21:a,23:o,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X}),Q(K,[2,5]),Q(K,[2,6]),Q(K,[2,8],{10:73,80:Z}),Q(V,[2,45],{10:75,27:76,75:D,80:Z}),Q(K,[2,46],{10:77,80:Z}),Q(K,[2,47],{10:78,80:Z}),{4:79,6:4,7:5,8:6,9:7,11:t,12:[1,81],13:[1,80],14:[1,82],15:i,17:n,19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},{7:85,16:83,17:[1,84],19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},{4:86,6:4,7:5,8:6,9:7,11:t,15:i,17:n,18:[1,87],19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},Q(H,[2,48]),Q(H,[2,49]),Q(H,[2,50]),Q(H,[2,96]),Q(H,[2,51]),Q(H,[2,52]),Q(H,[2,53]),Q(H,[2,54]),Q(H,[2,55]),Q(H,[2,56]),Q(H,[2,57]),Q(H,[2,58]),Q(H,[2,59]),Q(H,[2,60]),Q(H,[2,61]),Q(H,[2,62]),Q(H,[2,63]),Q(H,[2,64]),Q(H,[2,65]),Q(H,[2,66]),Q(H,[2,80]),Q(H,[2,81]),Q(H,[2,82]),Q(H,[2,83]),Q(H,[2,67]),Q(H,[2,68]),Q(H,[2,79]),Q(H,[2,84]),Q(H,[2,85]),Q(H,[2,86]),Q(H,[2,87]),Q(H,[2,88]),Q(H,[2,89]),Q(H,[2,90]),Q(H,[2,91]),Q(H,[2,92]),Q(H,[2,93]),Q(H,[2,94]),Q(H,[2,95]),Q(H,[2,97]),Q(H,[2,98]),Q(H,[2,99]),Q(H,[2,100]),Q(H,[2,102]),Q(H,[2,69]),Q(H,[2,70]),Q(H,[2,71]),Q(H,[2,72]),Q(H,[2,73]),Q(H,[2,74]),Q(H,[2,75]),Q(H,[2,76]),Q(H,[2,77]),Q(H,[2,78]),{4:88,6:4,7:5,8:6,9:7,11:t,15:i,17:n,19:33,20:s,21:a,22:32,23:o,24:[1,89],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},Q(H,[2,31]),Q(H,[2,32]),{1:[2,1]},Q(B,[2,3]),Q(K,[2,7]),Q(K,[2,101]),Q(V,[2,41],{27:90,75:D}),Q(K,[2,40],{10:91,80:Z}),Q(K,[2,43]),Q(K,[2,44]),{12:[1,92],13:[1,93],14:[1,94]},{12:[1,95],13:[1,96],14:[1,97]},{12:[1,99],13:[1,98],14:[1,100]},Q(K,[2,24]),{17:[1,101]},{4:102,6:4,7:5,8:6,9:7,11:t,15:i,17:n,18:[1,103],19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},{7:85,16:104,17:[2,38],19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},{18:[1,105]},Q(H,[2,30]),{24:[1,106]},{4:107,6:4,7:5,8:6,9:7,11:t,15:i,17:n,19:33,20:s,21:a,22:32,23:o,25:[1,108],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},Q(K,[2,39]),Q(K,[2,42]),{4:109,6:4,7:5,8:6,9:7,11:t,13:[1,110],14:[1,111],15:i,17:n,19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},{4:112,6:4,7:5,8:6,9:7,11:t,14:[1,113],15:i,17:n,19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},Q(K,[2,17]),{14:[1,114]},{14:[1,115]},Q(K,[2,22]),{14:[1,116]},{14:[1,117]},Q(K,[2,23]),{4:118,6:4,7:5,8:6,9:7,11:t,15:i,17:n,18:[1,119],19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},{18:[1,120]},Q(H,[2,28]),{17:[2,37]},Q(H,[2,29]),{4:121,6:4,7:5,8:6,9:7,11:t,15:i,17:n,19:33,20:s,21:a,22:32,23:o,25:[1,122],26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},{25:[1,123]},Q(H,[2,36]),{13:[1,124],14:[1,125]},{4:126,6:4,7:5,8:6,9:7,11:t,14:[1,127],15:i,17:n,19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},Q(K,[2,16]),{14:[1,128]},Q(K,[2,15]),Q(K,[2,18]),Q(K,[2,20]),Q(K,[2,19]),Q(K,[2,21]),{18:[1,129]},Q(H,[2,27]),Q(H,[2,26]),{25:[1,130]},Q(H,[2,34]),Q(H,[2,35]),{4:131,6:4,7:5,8:6,9:7,11:t,14:[1,132],15:i,17:n,19:33,20:s,21:a,22:32,23:o,26:8,27:9,28:10,29:14,30:15,31:16,32:18,33:19,34:20,35:21,36:22,37:23,38:24,39:25,40:26,41:27,42:28,43:29,44:30,45:31,46:c,47:l,48:u,49:h,50:p,51:f,52:m,53:y,54:d,55:g,56:v,57:_,58:k,59:b,60:E,61:A,62:O,63:x,64:I,65:S,66:L,67:P,68:C,69:R,70:$,71:T,72:N,73:w,74:M,75:D,76:F,77:U,78:j,79:G,81:X},Q(K,[2,11]),{14:[1,133]},Q(K,[2,14]),Q(K,[2,13]),Q(H,[2,25]),Q(H,[2,33]),{14:[1,134]},Q(K,[2,10]),Q(K,[2,12]),Q(K,[2,9])],defaultActions:{3:[2,2],71:[2,1],104:[2,37]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],i=[null],n=[],s=this.table,a="",o=0,c=0,l=0,u=n.slice.call(arguments,1),h=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);h.setInput(e,p.yy),p.yy.lexer=h,p.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var m=h.yylloc;n.push(m);var y=h.options&&h.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var d,g,v,_,k,b,E,A,O=function(){var e=h.lex()||1;return"number"!=typeof e&&(e=t.symbols_[e]||e),e},x={};;){if(v=r[r.length-1],void 0===(_=this.defaultActions[v]?this.defaultActions[v]:(null==d&&(d=O()),s[v]&&s[v][d]))||!_.length||!_[0]){var I="",S=[];for(b in s[v])this.terminals_[b]&&2<b&&S.push("'"+this.terminals_[b]+"'");I=h.showPosition?"Parse error on line "+(o+1)+":\n"+h.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(I,{text:h.match,token:this.terminals_[d]||d,line:h.yylineno,loc:m,expected:S})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+d);switch(_[0]){case 1:r.push(d),i.push(h.yytext),n.push(h.yylloc),r.push(_[1]),d=null,g?(d=g,g=null):(c=h.yyleng,a=h.yytext,o=h.yylineno,m=h.yylloc,0<l&&l--);break;case 2:if(E=this.productions_[_[1]][1],x.$=i[i.length-E],x._$={first_line:n[n.length-(E||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(E||1)].first_column,last_column:n[n.length-1].last_column},y&&(x._$.range=[n[n.length-(E||1)].range[0],n[n.length-1].range[1]]),void 0!==(k=this.performAction.apply(x,[a,c,o,p.yy,_[1],i,n].concat(u))))return k;E&&(r=r.slice(0,-1*E*2),i=i.slice(0,-1*E),n=n.slice(0,-1*E)),r.push(this.productions_[_[1]][0]),i.push(x.$),n.push(x._$),A=s[r[r.length-2]][r[r.length-1]],r.push(A);break;case 3:return!0}}return!0}},q={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var s in n)this[s]=n[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),s=0;s<n.length;s++)if((r=this._input.match(this.rules[n[s]]))&&(!t||r[0].length>t[0].length)){if(t=r,i=s,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,n[s])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,n[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return 0<=(e=this.conditionStack.length-1-Math.abs(e||0))?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r){switch(r){case 0:return this.begin("modexp"),11;case 1:return 21;case 2:return this.begin("modexp"),11;case 3:return 12;case 4:return 13;case 5:return this.popState(),14;case 6:return 63;case 7:return 64;case 8:return 65;case 9:return 66;case 10:return 67;case 11:return 68;case 12:return 69;case 13:return 54;case 14:return 48;case 15:return 49;case 16:return 50;case 17:return 55;case 18:return 51;case 19:return 52;case 20:return 53;case 21:return 57;case 22:return 56;case 23:return 74;case 24:return 70;case 25:case 26:case 27:case 28:case 29:case 30:case 31:case 32:case 33:return 72;case 34:return 71;case 35:case 36:return 72;case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:return 71;case 47:return 73;case 48:return 20;case 49:return 47;case 50:return 21;case 51:return 80;case 52:return 60;case 53:return 15;case 54:return this.begin("radical"),17;case 55:return this.popState(),18;case 56:return 18;case 57:return 77;case 58:return 79;case 59:return 78;case 60:case 61:return 59;case 62:return t.yytext=this.matches[1],75;case 63:return 23;case 64:return 24;case 65:return 25;case 66:return t.yytext=this.matches[1],62;case 67:return 61;case 68:return 76;case 69:return 81;case 70:return 46;case 71:return 47;case 72:return 58;case 73:return 5;case 74:return 83}},rules:[/^(?:"(?=[^>\]]+%))/,/^(?:")/,/^(?:"(?=[^>\]]+\]|[^>\]]+%))/,/^(?:%)/,/^(?:<)/,/^(?:\])/,/^(?:[+])/,/^(?:[-])/,/^(?:[*])/,/^(?:[@][*])/,/^(?:[@][\#])/,/^(?:[_][\/])/,/^(?:[.][\/])/,/^(?:[.][.][(])/,/^(?:[@][(])/,/^(?:[.][(])/,/^(?:[(])/,/^(?:[.][.][)])/,/^(?:[@][)])/,/^(?:[.][)])/,/^(?:[)])/,/^(?:[\\][\\])/,/^(?:[\\])/,/^(?:[_][3])/,/^(?:[@][0])/,/^(?:[ ][\^;]+[.]K[ ])/,/^(?:[\^;]+[=])/,/^(?:[ ][\^;]+[\/][.]K[ ])/,/^(?:[ ][\^;]+[@][:][@][:][ ])/,/^(?:[ ][\^;]+["]K[:][ ])/,/^(?:[ ][\^;]+[.]1[:][ ])/,/^(?:[ ][\^;]+["]K[ ])/,/^(?:[ ][\^;]+[.]1[ ])/,/^(?:[ ][\^;]+[\/][$][L][ ])/,/^(?:[ ][.]K[ ])/,/^(?:[ ][\^;]+[\/]?[$][L][ ])/,/^(?:[ ][\^;]+[$]P[ ])/,/^(?:[=])/,/^(?:[ ][\/][.]K[ ])/,/^(?:[ ][@][:][@][:][ ])/,/^(?:[ ]["]K[:][ ])/,/^(?:[ ][.]1[:][ ])/,/^(?:[ ]["]K[ ])/,/^(?:[ ][.]1[ ])/,/^(?:[@][:])/,/^(?:[ ][\/]?[$][L][ ])/,/^(?:[ ][$]P[ ])/,/^(?:[ ]['][']['][ ])/,/^(?:[\^;]+)/,/^(?:[.]["])/,/^(?:["])/,/^(?:[']+)/,/^(?:[.][,]?[ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[.]*[<])/,/^(?:[.]*[>])/,/^(?:[.]*\])/,/^(?:[.]*\])/,/^(?:!)/,/^(?:[_]&)/,/^(?:&)/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:#?(\d*\.?\d+))/,/^(?:[,]*[?])/,/^(?:[,]*[\/])/,/^(?:[,]*#)/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,][=])/,/^(?:[_][8])/,/^(?:[,][ ]?)/,/^(?:[.])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{radical:{rules:[0,1,2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},modexp:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0},INITIAL:{rules:[2,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74],inclusive:!0}}},W.lexer=q,new((Y.prototype=W).Parser=Y));function Q(e,t,r,i){for(r=r||{},i=e.length;i--;r[e[i]]=t);return r}function Y(){this.yy={}}J.parser=z,J.Parser=z.Parser,J.parse=function(){return z.parse.apply(z,arguments)},J.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),r.exit(1));var t=ee(4).readFileSync(ee(5).normalize(e[1]),"utf8");return J.parser.parse(t)},void 0!==e&&ee.c[ee.s]===e&&J.main(r.argv.slice(1))}).call(J,ee(1),ee(8)(e))},function(e,ae,oe){(function(r,e){var t,i,n,s,a,o,c,l,u,h,p,f,m,y,d,g,v,_,k,b,E,A,O,x,I,S,L,P,C,R,$,T,N,w,M,D,F,U,j,G,X,B,K,Z,V,H,W,q,z,Q,Y,J,ee,te,re,ie=(q=[5,10,13,14,15,18,19,29,52,53,54],z=[5,10,13,14,15,17,18,19,21,23,24,28,29,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87],Q=[1,84],Y=[1,85],J=[1,86],ee=[10,13,15,17,21,23,24,28,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87],te={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,expression_group:6,delimited_expression:7,level:8,radical:9,LEVEL:10,basic_token:11,bracketed_expression:12,RADICAL_WITH_INDEX:13,CLOSE_RADICAL:14,RADICAL:15,frac:16,OPEN_FRAC:17,OVER:18,CLOSE_FRAC:19,simple_frac:20,NUMBER:21,NUMBER_FRAC_DENOMINATOR:22,NUMBER_FRAC_NUMERATOR_BAD:23,NUMBER_FRAC_DENOMINATOR_BAD:24,atom:25,lbracket:26,rbracket:27,OPEN_GROUP:28,CLOSE_GROUP:29,command:30,greek:31,letter:32,comma:33,period:34,colon:35,infinity:36,integral:37,factorial:38,ampersand:39,question_mark:40,bracket:41,space:42,operation:43,comparison:44,ellipsis:45,primes:46,",":47,".":48,"[":49,"{":50,"(":51,"]":52,"}":53,")":54,SPACE:55,COMMAND:56,GREEK:57,CAPITAL_LETTER:58,LETTER:59,PIPE:60,DOUBLE_PIPE:61,"+":62,"-":63,CDOT:64,TIMES:65,"*":66,DIV:67,SLASH:68,PERCENT:69,"=":70,NEQ:71,"<":72,">":73,LEQ:74,APPROX:75,GEQ:76,TILDE:77,PARALLEL:78,PERPENDICULAR:79,ELLIPSIS:80,COLON:81,INFINITY:82,INTEGRAL:83,FACTORIAL:84,"&":85,PRIMES:86,"?":87,unknown:88,UNKNOWN:89,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"LEVEL",13:"RADICAL_WITH_INDEX",14:"CLOSE_RADICAL",15:"RADICAL",17:"OPEN_FRAC",18:"OVER",19:"CLOSE_FRAC",21:"NUMBER",22:"NUMBER_FRAC_DENOMINATOR",23:"NUMBER_FRAC_NUMERATOR_BAD",24:"NUMBER_FRAC_DENOMINATOR_BAD",28:"OPEN_GROUP",29:"CLOSE_GROUP",47:",",48:".",49:"[",50:"{",51:"(",52:"]",53:"}",54:")",55:"SPACE",56:"COMMAND",57:"GREEK",58:"CAPITAL_LETTER",59:"LETTER",60:"PIPE",61:"DOUBLE_PIPE",62:"+",63:"-",64:"CDOT",65:"TIMES",66:"*",67:"DIV",68:"SLASH",69:"PERCENT",70:"=",71:"NEQ",72:"<",73:">",74:"LEQ",75:"APPROX",76:"GEQ",77:"TILDE",78:"PARALLEL",79:"PERPENDICULAR",80:"ELLIPSIS",81:"COLON",82:"INFINITY",83:"INTEGRAL",84:"FACTORIAL",85:"&",86:"PRIMES",87:"?",89:"UNKNOWN"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[7,1],[7,1],[8,2],[8,2],[8,2],[9,4],[9,3],[9,3],[9,2],[9,4],[9,3],[9,2],[16,5],[16,4],[16,4],[16,3],[16,2],[20,2],[20,1],[20,1],[11,1],[11,1],[11,1],[6,2],[6,2],[6,1],[6,1],[12,3],[12,2],[12,3],[12,2],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[25,1],[33,1],[34,1],[26,1],[26,1],[26,1],[27,1],[27,1],[27,1],[42,1],[30,1],[31,1],[32,1],[32,1],[41,1],[41,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[43,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[44,1],[45,1],[35,1],[36,1],[37,1],[38,1],[39,1],[46,1],[40,1],[88,1]],performAction:function(e,t,r,i,n,s){var a=s.length-1;switch(n){case 1:return s[a-1];case 2:return i.group();case 3:case 35:this.$=i.group(s[a-2],s[a-1],s[a]);break;case 4:case 6:case 31:case 32:case 36:this.$=i.group(s[a-1],s[a]);break;case 5:case 7:case 33:case 34:this.$=i.group(s[a]);break;case 10:case 11:case 12:this.$=i.basic_level(s[a-1],i.group(s[a]));break;case 13:case 17:this.$=i.radical(s[a-1],i.group(s[a-2]));break;case 14:case 15:this.$=i.radical(i.group(),i.group(s[a-1]));break;case 16:this.$=i.radical(i.group(),i.group());break;case 18:this.$=i.radical(s[a-1]);break;case 19:this.$=i.radical(i.group());break;case 20:this.$=i.fraction(s[a-3],s[a-1]);break;case 21:this.$=i.fraction(s[a-2],i.group());break;case 22:this.$=i.fraction(i.group(),s[a-1]);break;case 23:case 24:this.$=i.fraction(i.group(),i.group());break;case 25:this.$=i.fraction(i.group(i.terminal(i.to_number(s[a-1]))),i.group(i.terminal(i.to_number(s[a]))));break;case 26:this.$=i.fraction(i.group(i.terminal(i.to_number(s[a]))),i.group());break;case 27:this.$=i.fraction(i.group(),i.group(i.terminal(i.to_number(s[$01]))));break;case 37:this.$=i.group(s[a-1]);break;case 38:this.$=i.group();break;case 39:this.$=i.terminal(i.to_number(s[a]));break;case 57:this.$=i.terminal(",");break;case 58:this.$=i.terminal(".");break;case 59:this.$=i.terminal("[");break;case 60:this.$=i.terminal("\\{");break;case 61:this.$=i.terminal("(");break;case 62:this.$=i.terminal("]");break;case 63:this.$=i.terminal("\\}");break;case 64:this.$=i.terminal(")");break;case 65:this.$=i.terminal(" ");break;case 66:this.$=i.command("\\"+s[a].trim().toLowerCase());break;case 67:this.$=i.terminal(i.greek(s[a]));break;case 68:this.$=i.terminal(s[a].toUpperCase());break;case 69:this.$=i.terminal(s[a].toLowerCase());break;case 70:this.$=i.terminal("|");break;case 71:this.$=i.terminal("\\|");break;case 72:this.$=i.terminal("+");break;case 73:this.$=i.terminal("-");break;case 74:this.$=i.terminal("\\cdot ");break;case 75:this.$=i.terminal("\\times ");break;case 76:this.$=i.terminal("*");break;case 77:this.$=i.terminal("\\div ");break;case 78:this.$=i.terminal("/");break;case 79:this.$=i.terminal("\\%");break;case 80:this.$=i.terminal("=");break;case 81:this.$=i.terminal("\\neq ");break;case 82:this.$=i.terminal("<");break;case 83:this.$=i.terminal(">");break;case 84:this.$=i.terminal("\\leq ");break;case 85:this.$=i.terminal("\\approx ");break;case 86:this.$=i.terminal("\\geq ");break;case 87:this.$=i.terminal("\\sim ");break;case 88:this.$=i.terminal("\\parallel ");break;case 89:this.$=i.terminal("\\perp ");break;case 90:this.$=i.terminal("\\ldots ");break;case 91:this.$=i.terminal(":");break;case 92:this.$=i.terminal("\\infty ");break;case 93:this.$=i.terminal("\\int ");break;case 94:this.$=i.terminal("!");break;case 95:this.$=i.terminal("\\&");break;case 96:this.$=i.primes(s[a]);break;case 97:this.$=i.terminal("?")}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:8,9:9,10:t=[1,15],11:6,12:7,13:i=[1,16],15:n=[1,17],16:11,17:s=[1,36],20:12,21:a=[1,18],23:o=[1,37],24:c=[1,38],25:10,26:13,28:l=[1,14],30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u=[1,46],48:h=[1,47],49:p=[1,39],50:f=[1,40],51:m=[1,41],55:y=[1,56],56:d=[1,42],57:g=[1,43],58:v=[1,44],59:_=[1,45],60:k=[1,54],61:b=[1,55],62:E=[1,57],63:A=[1,58],64:O=[1,59],65:x=[1,60],66:I=[1,61],67:S=[1,62],68:L=[1,63],69:P=[1,64],70:C=[1,65],71:R=[1,66],72:$=[1,67],73:T=[1,68],74:N=[1,69],75:w=[1,70],76:M=[1,71],77:D=[1,72],78:F=[1,73],79:U=[1,74],80:j=[1,75],81:G=[1,48],82:X=[1,49],83:B=[1,50],84:K=[1,51],85:Z=[1,52],86:V=[1,76],87:H=[1,53]},{1:[3]},{5:[1,77]},{1:[2,2]},ne(W=[5,14,18,19,29,52,53,54],[2,5],{8:8,9:9,7:78,10:t,13:i,15:n}),ne(W,[2,7],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:79,10:t,13:i,15:n,17:s,21:a,23:o,24:c,28:l,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H}),ne(q,[2,33],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:80,17:s,21:a,23:o,24:c,28:l,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H}),ne(q,[2,34],{11:6,12:7,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,6:81,17:s,21:a,23:o,24:c,28:l,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H}),ne(z,[2,8]),ne(z,[2,9]),ne(z,[2,28]),ne(z,[2,29]),ne(z,[2,30]),{4:82,6:4,7:5,8:8,9:9,10:t,11:6,12:7,13:i,15:n,16:11,17:s,20:12,21:a,23:o,24:c,25:10,26:13,27:83,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,52:Q,53:Y,54:J,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},{4:87,6:4,7:5,8:8,9:9,10:t,11:6,12:7,13:i,15:n,16:11,17:s,20:12,21:a,23:o,24:c,25:10,26:13,28:l,29:[1,88],30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},{9:91,11:89,12:90,13:i,15:n,16:11,17:s,20:12,21:a,23:o,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},{11:92,12:93,14:[1,94],16:11,17:s,20:12,21:a,23:o,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},{4:95,6:4,7:5,8:8,9:9,10:t,11:6,12:7,13:i,14:[1,96],15:n,16:11,17:s,20:12,21:a,23:o,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},ne(z,[2,39],{22:[1,97]}),ne(z,[2,40]),ne(z,[2,41]),ne(z,[2,42]),ne(z,[2,43]),ne(z,[2,44]),ne(z,[2,45]),ne(z,[2,46]),ne(z,[2,47]),ne(z,[2,48]),ne(z,[2,49]),ne(z,[2,50]),ne(z,[2,51]),ne(z,[2,52]),ne(z,[2,53]),ne(z,[2,54]),ne(z,[2,55]),ne(z,[2,56]),{4:98,6:4,7:5,8:8,9:9,10:t,11:6,12:7,13:i,15:n,16:11,17:s,18:[1,99],19:[1,100],20:12,21:a,23:o,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},ne(z,[2,26]),ne(z,[2,27]),ne(ee,[2,59]),ne(ee,[2,60]),ne(ee,[2,61]),ne(z,[2,66]),ne(z,[2,67]),ne(z,[2,68]),ne(z,[2,69]),ne(z,[2,57]),ne(z,[2,58]),ne(z,[2,91]),ne(z,[2,92]),ne(z,[2,93]),ne(z,[2,94]),ne(z,[2,95]),ne(z,[2,97]),ne(z,[2,70]),ne(z,[2,71]),ne(z,[2,65]),ne(z,[2,72]),ne(z,[2,73]),ne(z,[2,74]),ne(z,[2,75]),ne(z,[2,76]),ne(z,[2,77]),ne(z,[2,78]),ne(z,[2,79]),ne(z,[2,80]),ne(z,[2,81]),ne(z,[2,82]),ne(z,[2,83]),ne(z,[2,84]),ne(z,[2,85]),ne(z,[2,86]),ne(z,[2,87]),ne(z,[2,88]),ne(z,[2,89]),ne(z,[2,90]),ne(z,[2,96]),{1:[2,1]},ne(W,[2,4],{6:4,7:5,11:6,12:7,8:8,9:9,25:10,16:11,20:12,26:13,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,4:101,10:t,13:i,15:n,17:s,21:a,23:o,24:c,28:l,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H}),ne(W,[2,6]),ne(q,[2,31]),ne(q,[2,32]),{27:102,52:Q,53:Y,54:J},ne(z,[2,36]),ne(z,[2,62]),ne(z,[2,63]),ne(z,[2,64]),{29:[1,103]},ne(z,[2,38]),ne(z,[2,10]),ne(z,[2,11]),ne(z,[2,12]),{4:104,6:4,7:5,8:8,9:9,10:t,11:6,12:7,13:i,14:[1,105],15:n,16:11,17:s,20:12,21:a,23:o,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},{4:107,6:4,7:5,8:8,9:9,10:t,11:6,12:7,13:i,14:[1,106],15:n,16:11,17:s,20:12,21:a,23:o,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},ne(z,[2,16]),{14:[1,108]},ne(z,[2,19]),ne(z,[2,25]),{18:[1,109]},{4:110,6:4,7:5,8:8,9:9,10:t,11:6,12:7,13:i,15:n,16:11,17:s,19:[1,111],20:12,21:a,23:o,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},ne(z,[2,24]),ne(W,[2,3]),ne(z,[2,35]),ne(z,[2,37]),{14:[1,112]},ne(z,[2,15]),ne(z,[2,14]),{14:[1,113]},ne(z,[2,18]),{4:114,6:4,7:5,8:8,9:9,10:t,11:6,12:7,13:i,15:n,16:11,17:s,19:[1,115],20:12,21:a,23:o,24:c,25:10,26:13,28:l,30:19,31:20,32:21,33:22,34:23,35:24,36:25,37:26,38:27,39:28,40:29,41:30,42:31,43:32,44:33,45:34,46:35,47:u,48:h,49:p,50:f,51:m,55:y,56:d,57:g,58:v,59:_,60:k,61:b,62:E,63:A,64:O,65:x,66:I,67:S,68:L,69:P,70:C,71:R,72:$,73:T,74:N,75:w,76:M,77:D,78:F,79:U,80:j,81:G,82:X,83:B,84:K,85:Z,86:V,87:H},{19:[1,116]},ne(z,[2,23]),ne(z,[2,13]),ne(z,[2,17]),{19:[1,117]},ne(z,[2,21]),ne(z,[2,22]),ne(z,[2,20])],defaultActions:{3:[2,2],77:[2,1]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],i=[null],n=[],s=this.table,a="",o=0,c=0,l=0,u=n.slice.call(arguments,1),h=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);h.setInput(e,p.yy),p.yy.lexer=h,p.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var m=h.yylloc;n.push(m);var y=h.options&&h.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var d,g,v,_,k,b,E,A,O=function(){var e=h.lex()||1;return"number"!=typeof e&&(e=t.symbols_[e]||e),e},x={};;){if(v=r[r.length-1],void 0===(_=this.defaultActions[v]?this.defaultActions[v]:(null==d&&(d=O()),s[v]&&s[v][d]))||!_.length||!_[0]){var I="",S=[];for(b in s[v])this.terminals_[b]&&2<b&&S.push("'"+this.terminals_[b]+"'");I=h.showPosition?"Parse error on line "+(o+1)+":\n"+h.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(I,{text:h.match,token:this.terminals_[d]||d,line:h.yylineno,loc:m,expected:S})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+d);switch(_[0]){case 1:r.push(d),i.push(h.yytext),n.push(h.yylloc),r.push(_[1]),d=null,g?(d=g,g=null):(c=h.yyleng,a=h.yytext,o=h.yylineno,m=h.yylloc,0<l&&l--);break;case 2:if(E=this.productions_[_[1]][1],x.$=i[i.length-E],x._$={first_line:n[n.length-(E||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(E||1)].first_column,last_column:n[n.length-1].last_column},y&&(x._$.range=[n[n.length-(E||1)].range[0],n[n.length-1].range[1]]),void 0!==(k=this.performAction.apply(x,[a,c,o,p.yy,_[1],i,n].concat(u))))return k;E&&(r=r.slice(0,-1*E*2),i=i.slice(0,-1*E),n=n.slice(0,-1*E)),r.push(this.productions_[_[1]][0]),i.push(x.$),n.push(x._$),A=s[r[r.length-2]][r[r.length-1]],r.push(A);break;case 3:return!0}}return!0}},re={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var s in n)this[s]=n[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),s=0;s<n.length;s++)if((r=this._input.match(this.rules[n[s]]))&&(!t||r[0].length>t[0].length)){if(t=r,i=s,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,n[s])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,n[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return 0<=(e=this.conditionStack.length-1-Math.abs(e||0))?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r){switch(r){case 0:return void this.begin("captext");case 1:return 58;case 2:return this.popState(),58;case 3:return 62;case 4:return 63;case 5:return 64;case 6:return 65;case 7:return 66;case 8:return 67;case 9:return 49;case 10:return 50;case 11:return 51;case 12:return 52;case 13:return 53;case 14:return 54;case 15:return 71;case 16:return 74;case 17:return 75;case 18:return 76;case 19:return 70;case 20:return 72;case 21:return 73;case 22:return 77;case 23:return 69;case 24:return 80;case 25:return 13;case 26:return 15;case 27:return 14;case 28:return 10;case 29:return 28;case 30:return 29;case 31:return 83;case 32:return 84;case 33:return 85;case 34:return 17;case 35:return 18;case 36:return 19;case 37:return 78;case 38:return 79;case 39:return 82;case 40:return t.yytext=this.matches[1],21;case 41:return t.yytext=this.matches[1],22;case 42:return t.yytext=this.matches[1],24;case 43:return 68;case 44:return 47;case 45:return 48;case 46:return 86;case 47:return 61;case 48:return 60;case 49:return 81;case 50:case 51:return 56;case 52:return 57;case 53:return t.yytext=this.matches[1],58;case 54:return 59;case 55:return;case 56:return 87;case 57:return;case 58:return 55;case 59:return 5;case 60:return 89}},rules:[/^(?:([,][,])(?=[A-Z]))/,/^(?:[A-Z](?=[A-Z]))/,/^(?:[A-Z])/,/^(?:["][6])/,/^(?:["][-])/,/^(?:["][4])/,/^(?:["][8])/,/^(?:["][9])/,/^(?:["][\/])/,/^(?:[.][<])/,/^(?:[_][<])/,/^(?:["][<])/,/^(?:[.][>])/,/^(?:[_][>])/,/^(?:["][>])/,/^(?:["][7][@][:])/,/^(?:[_][@][<])/,/^(?:[\^][9])/,/^(?:[_][@][>])/,/^(?:["][7])/,/^(?:[@][<])/,/^(?:[@][>])/,/^(?:[@][9])/,/^(?:[.][0])/,/^(?:[4][4][4])/,/^(?:[%][9])/,/^(?:[%])/,/^(?:[\+])/,/^(?:[95]+(?=.))/,/^(?:[<])/,/^(?:[>])/,/^(?:!)/,/^(?:[6])/,/^(?:[@]&)/,/^(?:[(])/,/^(?:[.][\/])/,/^(?:[)])/,/^(?:#[L])/,/^(?:#-)/,/^(?:#=)/,/^(?:#([A-J4]+))/,/^(?:[\/]([A-J4]+))/,/^(?:[#][\/]([A-J4]+))/,/^(?:[_]?[\/])/,/^(?:[1])/,/^(?:[4])/,/^(?:[7]+)/,/^(?:[_][\\][_][\\])/,/^(?:[_][\\])/,/^(?:[3])/,/^(?:(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?)/,/^(?:(ARG|DET|EXP|IM|INF|LIM|LN|LOG|MAX|MIN|MOD|RE|SUP))/,/^(?:[,]?[.][ABGDEZ\?\:IKLMNXOPRSTUYF\&W])/,/^(?:[,]([A-Z]))/,/^(?:[A-Z])/,/^(?:[,]['])/,/^(?:[8])/,/^(?:[;])/,/^(?:[ ])/,/^(?:$)/,/^(?:.)/],conditions:{captext:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0},INITIAL:{rules:[0,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60],inclusive:!0}}},te.lexer=re,new((se.prototype=te).Parser=se));function ne(e,t,r,i){for(r=r||{},i=e.length;i--;r[e[i]]=t);return r}function se(){this.yy={}}ae.parser=ie,ae.Parser=ie.Parser,ae.parse=function(){return ie.parse.apply(ie,arguments)},ae.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),r.exit(1));var t=oe(4).readFileSync(oe(5).normalize(e[1]),"utf8");return ae.parser.parse(t)},void 0!==e&&oe.c[oe.s]===e&&ae.main(r.argv.slice(1))}).call(ae,oe(1),oe(8)(e))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),c=r(7),l={"~":"\\ ","\\,":"\\ ","\\:":"\\ ","\\;":"\\ ","\\!":"\\ "},u={"\\Vert":"\\|","\\ge":"\\geq","\\le":"\\leq","\\vert":"|"},h={"\\space":!0};t.default=function e(t){for(var r=[],i=0;i<t.length;i++){var n=t[i];switch(n.type){case"command":var s=n.value.slice(1).trim();u.hasOwnProperty(n.value)?r.push(c.command(u[n.value])):o.containsValue(s)?r.push(c.typeform("operator_name",function(e){for(var t=[],r=0,i=e;r<i.length;r++){var n=i[r];t.push(c.terminal(n))}return t}(s))):h[n.value]||r.push(n);break;case"level":var a={subscript:n.subscript&&0<n.subscript.length?e(n.subscript):void 0,superscript:n.superscript&&0<n.superscript.length?e(n.superscript):void 0,type:n.type};(a.subscript||a.superscript)&&r.push(a);break;case"fraction":r.push({denominator:e(n.denominator),numerator:e(n.numerator),type:n.type});break;case"radical":r.push({index:n.index?e(n.index):void 0,radicand:e(n.radicand),type:n.type});break;case"terminal":!function(e){for(var t=0,r=0;r<Math.min(3,e.length);r++){var i=e[r];"terminal"===i.type&&"."===i.value&&t++}return 3===t}(t.slice(i))?r.push({type:n.type,value:l.hasOwnProperty(n.value)?l[n.value]:n.value}):(r.push({type:"command",value:"\\ldots"}),i+=2);break;case"typeform":r.push(n);break;case"greek":r.push({type:n.type,value:l.hasOwnProperty(n.value)?l[n.value]:n.value});break;default:throw new Error("Unexpected item:\n"+JSON.stringify({group:t,item:n}))}}return r}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),n=r(13),s=r(7);n.parser.yy=s,t.default=function(e){try{return{isError:!1,value:n.parser.parse(e)}}catch(e){return{isError:!0,error:i.default(e)}}}},function(e,L,P){(function(r,e){var t,i,n,s,a,o,c,l,u,h,p,f,m,y,d,g,v,_,k,b,E,A,O,x=(k=[5,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],b=[5,10,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],E=[5,10,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],A={trace:function(){},yy:{},symbols_:{error:2,sentence:3,group:4,EOF:5,level:6,expression:7,subscript:8,superscript:9,_:10,atom:11,"^":12,"PRIMES^":13,PRIMES:14,delimited_group:15,typeform:16,frac:17,radical:18,LEFT:19,delimiter:20,RIGHT:21,FRAC:22,OPERATOR_NAME:23,MATHRM:24,TEXT:25,RADICAL_OPTARG:26,CLOSE_OPTARG:27,RADICAL:28,curly_group:29,greek:30,command:31,SYMBOL:32,DELIMITER:33,DELIMITER_COMMAND:34,GREEK:35,COMMAND:36,"{":37,"}":38,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",10:"_",12:"^",13:"PRIMES^",14:"PRIMES",19:"LEFT",21:"RIGHT",22:"FRAC",23:"OPERATOR_NAME",24:"MATHRM",25:"TEXT",26:"RADICAL_OPTARG",27:"CLOSE_OPTARG",28:"RADICAL",32:"SYMBOL",33:"DELIMITER",34:"DELIMITER_COMMAND",35:"GREEK",36:"COMMAND",37:"{",38:"}"},productions_:[0,[3,2],[3,1],[4,3],[4,2],[4,1],[4,2],[4,1],[6,2],[6,2],[6,1],[6,1],[8,2],[9,2],[9,2],[9,1],[7,1],[7,1],[7,1],[7,1],[7,1],[15,5],[15,4],[17,3],[16,2],[16,2],[16,2],[18,4],[18,3],[18,2],[18,2],[11,1],[11,1],[11,1],[11,1],[11,1],[20,1],[20,1],[30,1],[31,1],[29,3],[29,2]],performAction:function(e,t,r,i,n,s){var a=s.length-1;switch(n){case 1:return s[a-1];case 2:return i.group();case 3:this.$=i.group(s[a-2],s[a-1],s[a]);break;case 4:case 6:this.$=i.group(s[a-1],s[a]);break;case 5:case 7:this.$=i.group(s[a]);break;case 8:this.$=i.level({_:i.group(s[a-1]),"^":i.group(s[a])});break;case 9:this.$=i.level({_:i.group(s[a]),"^":i.group(s[a-1])});break;case 10:this.$=i.level({"^":i.group(s[a])});break;case 11:this.$=i.level({_:i.group(s[a])});break;case 12:case 13:this.$=s[a];break;case 14:this.$=i.processPrimes(s[a-1],s[a]);break;case 15:this.$=i.processPrimes(s[a],i.group());break;case 21:this.$=i.group(s[a-3],s[a-2],s[a]);break;case 22:this.$=i.group(s[a-2],s[a]);break;case 23:this.$=i.fraction(i.group(s[a-1]),i.group(s[a]));break;case 24:this.$=i.typeform("operator_name",i.group(s[a]));break;case 25:this.$=i.typeform("mathrm",i.group(s[a]));break;case 26:this.$=i.typeform("text",i.group(s[a]));break;case 27:this.$=i.radical(s[a],i.group(s[a-2]));break;case 28:this.$=i.radical(i.group(s[a]),i.group());break;case 29:case 30:this.$=i.radical(i.group(s[a]));break;case 35:case 36:this.$=i.terminal(s[a]);break;case 37:case 39:this.$=i.command(s[a]);break;case 38:this.$=i.greek(s[a]);break;case 40:this.$=s[a-1];break;case 41:this.$=i.group()}},table:[{3:1,4:2,5:[1,3],6:4,7:5,8:6,9:7,10:t=[1,13],11:12,12:i=[1,14],13:n=[1,15],14:s=[1,16],15:8,16:9,17:10,18:11,19:a=[1,17],20:25,22:o=[1,21],23:c=[1,18],24:l=[1,19],25:u=[1,20],26:h=[1,22],28:p=[1,23],29:24,30:26,31:27,32:f=[1,28],33:m=[1,30],34:y=[1,31],35:d=[1,32],36:g=[1,33],37:v=[1,29]},{1:[3]},{5:[1,34]},{1:[2,2]},I(_=[5,21,27,38],[2,5],{15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,7:35,19:a,22:o,23:c,24:l,25:u,26:h,28:p,32:f,33:m,34:y,35:d,36:g,37:v}),I(_,[2,7],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:36,10:t,12:i,13:n,14:s,19:a,22:o,23:c,24:l,25:u,26:h,28:p,32:f,33:m,34:y,35:d,36:g,37:v}),I(k,[2,11],{9:37,12:i,13:n,14:s}),I(k,[2,10],{8:38,10:t}),I(b,[2,16]),I(b,[2,17]),I(b,[2,18]),I(b,[2,19]),I(b,[2,20]),{11:39,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},{11:40,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},{11:41,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},I(E,[2,15]),{20:42,33:m,34:y},{11:43,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},{11:44,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},{11:45,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},{11:46,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},{4:47,6:4,7:5,8:6,9:7,10:t,11:12,12:i,13:n,14:s,15:8,16:9,17:10,18:11,19:a,20:25,22:o,23:c,24:l,25:u,26:h,27:[1,48],28:p,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},{11:49,17:50,20:25,22:o,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},I(b,[2,31]),I(b,[2,32]),I(b,[2,33]),I(b,[2,34]),I(b,[2,35]),{4:51,6:4,7:5,8:6,9:7,10:t,11:12,12:i,13:n,14:s,15:8,16:9,17:10,18:11,19:a,20:25,22:o,23:c,24:l,25:u,26:h,28:p,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v,38:[1,52]},I(b,[2,36]),I(b,[2,37]),I(b,[2,38]),I(b,[2,39]),{1:[2,1]},I(_,[2,4],{6:4,7:5,8:6,9:7,15:8,16:9,17:10,18:11,11:12,29:24,20:25,30:26,31:27,4:53,10:t,12:i,13:n,14:s,19:a,22:o,23:c,24:l,25:u,26:h,28:p,32:f,33:m,34:y,35:d,36:g,37:v}),I(_,[2,6]),I(k,[2,8]),I(k,[2,9]),I([5,12,13,14,19,21,22,23,24,25,26,27,28,32,33,34,35,36,37,38],[2,12]),I(E,[2,13]),I(E,[2,14]),{4:54,6:4,7:5,8:6,9:7,10:t,11:12,12:i,13:n,14:s,15:8,16:9,17:10,18:11,19:a,20:25,21:[1,55],22:o,23:c,24:l,25:u,26:h,28:p,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},I(b,[2,24]),I(b,[2,25]),I(b,[2,26]),{11:56,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},{27:[1,57]},{11:58,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},I(b,[2,29]),I(b,[2,30]),{38:[1,59]},I(b,[2,41]),I(_,[2,3]),{21:[1,60]},{20:61,33:m,34:y},I(b,[2,23]),{11:62,20:25,29:24,30:26,31:27,32:f,33:m,34:y,35:d,36:g,37:v},I(b,[2,28]),I(b,[2,40]),{20:63,33:m,34:y},I(b,[2,22]),I(b,[2,27]),I(b,[2,21])],defaultActions:{3:[2,2],34:[2,1]},parseError:function(e,t){if(!t.recoverable){var r=new Error(e);throw r.hash=t,r}this.trace(e)},parse:function(e){var t=this,r=[0],i=[null],n=[],s=this.table,a="",o=0,c=0,l=0,u=n.slice.call(arguments,1),h=Object.create(this.lexer),p={yy:{}};for(var f in this.yy)Object.prototype.hasOwnProperty.call(this.yy,f)&&(p.yy[f]=this.yy[f]);h.setInput(e,p.yy),p.yy.lexer=h,p.yy.parser=this,void 0===h.yylloc&&(h.yylloc={});var m=h.yylloc;n.push(m);var y=h.options&&h.options.ranges;"function"==typeof p.yy.parseError?this.parseError=p.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var d,g,v,_,k,b,E,A,O=function(){var e=h.lex()||1;return"number"!=typeof e&&(e=t.symbols_[e]||e),e},x={};;){if(v=r[r.length-1],void 0===(_=this.defaultActions[v]?this.defaultActions[v]:(null==d&&(d=O()),s[v]&&s[v][d]))||!_.length||!_[0]){var I="",S=[];for(b in s[v])this.terminals_[b]&&2<b&&S.push("'"+this.terminals_[b]+"'");I=h.showPosition?"Parse error on line "+(o+1)+":\n"+h.showPosition()+"\nExpecting "+S.join(", ")+", got '"+(this.terminals_[d]||d)+"'":"Parse error on line "+(o+1)+": Unexpected "+(1==d?"end of input":"'"+(this.terminals_[d]||d)+"'"),this.parseError(I,{text:h.match,token:this.terminals_[d]||d,line:h.yylineno,loc:m,expected:S})}if(_[0]instanceof Array&&1<_.length)throw new Error("Parse Error: multiple actions possible at state: "+v+", token: "+d);switch(_[0]){case 1:r.push(d),i.push(h.yytext),n.push(h.yylloc),r.push(_[1]),d=null,g?(d=g,g=null):(c=h.yyleng,a=h.yytext,o=h.yylineno,m=h.yylloc,0<l&&l--);break;case 2:if(E=this.productions_[_[1]][1],x.$=i[i.length-E],x._$={first_line:n[n.length-(E||1)].first_line,last_line:n[n.length-1].last_line,first_column:n[n.length-(E||1)].first_column,last_column:n[n.length-1].last_column},y&&(x._$.range=[n[n.length-(E||1)].range[0],n[n.length-1].range[1]]),void 0!==(k=this.performAction.apply(x,[a,c,o,p.yy,_[1],i,n].concat(u))))return k;E&&(r=r.slice(0,-1*E*2),i=i.slice(0,-1*E),n=n.slice(0,-1*E)),r.push(this.productions_[_[1]][0]),i.push(x.$),n.push(x._$),A=s[r[r.length-2]][r[r.length-1]],r.push(A);break;case 3:return!0}}return!0}},O={EOF:1,parseError:function(e,t){if(!this.yy.parser)throw new Error(e);this.yy.parser.parseError(e,t)},setInput:function(e,t){return this.yy=t||this.yy||{},this._input=e,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var e=this._input[0];return this.yytext+=e,this.yyleng++,this.offset++,this.match+=e,this.matched+=e,e.match(/(?:\r\n?|\n).*/g)?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),e},unput:function(e){var t=e.length,r=e.split(/(?:\r\n?|\n)/g);this._input=e+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-t),this.offset-=t;var i=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),r.length-1&&(this.yylineno-=r.length-1);var n=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:r?(r.length===i.length?this.yylloc.first_column:0)+i[i.length-r.length].length-r[0].length:this.yylloc.first_column-t},this.options.ranges&&(this.yylloc.range=[n[0],n[0]+this.yyleng-t]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){return this.options.backtrack_lexer?(this._backtrack=!0,this):this.parseError("Lexical error on line "+(this.yylineno+1)+". You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},less:function(e){this.unput(this.match.slice(e))},pastInput:function(){var e=this.matched.substr(0,this.matched.length-this.match.length);return(20<e.length?"...":"")+e.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var e=this.match;return e.length<20&&(e+=this._input.substr(0,20-e.length)),(e.substr(0,20)+(20<e.length?"...":"")).replace(/\n/g,"")},showPosition:function(){var e=this.pastInput(),t=new Array(e.length+1).join("-");return e+this.upcomingInput()+"\n"+t+"^"},test_match:function(e,t){var r,i,n;if(this.options.backtrack_lexer&&(n={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(n.yylloc.range=this.yylloc.range.slice(0))),(i=e[0].match(/(?:\r\n?|\n).*/g))&&(this.yylineno+=i.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:i?i[i.length-1].length-i[i.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+e[0].length},this.yytext+=e[0],this.match+=e[0],this.matches=e,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(e[0].length),this.matched+=e[0],r=this.performAction.call(this,this.yy,this,t,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),r)return r;if(this._backtrack){for(var s in n)this[s]=n[s];return!1}return!1},next:function(){if(this.done)return this.EOF;var e,t,r,i;this._input||(this.done=!0),this._more||(this.yytext="",this.match="");for(var n=this._currentRules(),s=0;s<n.length;s++)if((r=this._input.match(this.rules[n[s]]))&&(!t||r[0].length>t[0].length)){if(t=r,i=s,this.options.backtrack_lexer){if(!1!==(e=this.test_match(r,n[s])))return e;if(this._backtrack){t=!1;continue}return!1}if(!this.options.flex)break}return t?!1!==(e=this.test_match(t,n[i]))&&e:""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var e=this.next();return e||this.lex()},begin:function(e){this.conditionStack.push(e)},popState:function(){return 0<this.conditionStack.length-1?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(e){return 0<=(e=this.conditionStack.length-1-Math.abs(e||0))?this.conditionStack[e]:"INITIAL"},pushState:function(e){this.begin(e)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(e,t,r){switch(r){case 0:break;case 1:return this.begin("optarg"),26;case 2:return this.popState(),27;case 3:return 23;case 4:return 24;case 5:return 25;case 6:return 28;case 7:return 22;case 8:return 13;case 9:return 14;case 10:return 12;case 11:return 10;case 12:return 19;case 13:return 21;case 14:return 34;case 15:return 33;case 16:return 37;case 17:return 38;case 18:case 19:case 20:return 32;case 21:case 22:return 35;case 23:return 36;case 24:return 32;case 25:return 5}},rules:[/^(?:\s+)/,/^(?:(\\sqrt)\s*\[)/,/^(?:\])/,/^(?:(\\operatorname))/,/^(?:(\\mathrm))/,/^(?:(\\text))/,/^(?:(\\sqrt))/,/^(?:(\\frac))/,/^(?:'+\^)/,/^(?:'+)/,/^(?:\^)/,/^(?:[_])/,/^(?:(\\left))/,/^(?:(\\right))/,/^(?:(\\langle|\\rangle|\\vert|\\Vert))/,/^(?:\[|\]|\\\{|\\\}|\(|\)|\||\\\|)/,/^(?:\{)/,/^(?:\})/,/^(?:\\(infty))/,/^(?:\\(int))/,/^(?:!)/,/^(?:\\(alpha|beta|gamma|delta|epsilon|zeta|eta|theta|iota|kappa|lambda|mu|nu|omicron|pi|rho|sigma|tau|xi|upsilon|phi|chi|psi|omega))/,/^(?:\\(Alpha|Beta|Gamma|Delta|Epsilon|Zeta|Eta|Theta|Iota|Kappa|Lambda|Mu|Nu|Omicron|Pi|Rho|Sigma|Tau|Xi|Upsilon|Phi|Chi|Psi|Omega))/,/^(?:\\[A-Za-z]+)/,/^(?:\\.|.)/,/^(?:$)/],conditions:{optarg:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0},INITIAL:{rules:[0,1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25],inclusive:!0}}},A.lexer=O,new((S.prototype=A).Parser=S));function I(e,t,r,i){for(r=r||{},i=e.length;i--;r[e[i]]=t);return r}function S(){this.yy={}}L.parser=x,L.Parser=x.Parser,L.parse=function(){return x.parse.apply(x,arguments)},L.main=function(e){e[1]||(console.log("Usage: "+e[0]+" FILE"),r.exit(1));var t=P(4).readFileSync(P(5).normalize(e[1]),"utf8");return L.parser.parse(t)},void 0!==e&&P.c[P.s]===e&&L.main(r.argv.slice(1))}).call(L,P(1),P(8)(e))},function(e,t,r){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var n=r(11),s=r(12),a=r(0);t.default=function(e){return a.map(s.default(e),function(e){return k({isStartOfLine:!0,levelIndicator:"",radicalLevel:0,wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1},n.default(e)).value})};var o={"!":"&","*":"@#",",":", ","/":"_/",":":"_3","<":' "K ',"=":" .K ",">":" .1 ","?":"_8","[":"@(","\\ ":" ","\\%":"@0","\\&":"_&","\\,":" ","\\infty":",=","\\int":"!","\\{":".(","\\|":"\\\\","\\}":".)","]":"@)","|":"\\"};function g(e){return/^[a-z]$/.test(e.value)?e.value.toUpperCase():/^[A-Z]$/.test(e.value)?","+e.value:/^[0-9.]$/.test(e.value)||/^[+\-()]$/.test(e.value)?e.value:o.hasOwnProperty(e.value)?o[e.value]:"[terminal: "+e.value+"]"}var c={"\\Vert":"\\\\","\\cdot":"*","\\div":"./","\\ge":" .1: ","\\geq":" .1: ","\\langle":"..(","\\ldots":" ''' ","\\le":' "K: ',"\\leq":' "K: ',"\\ne":" /.K ","\\neq":" /.K ","\\approx":" @:@: ","\\nparallel":" /$L ","\\parallel":" $L ","\\perp":" $P ","\\prime":"'","\\prod":".,P","\\rangle":"..)","\\sim":"@:","\\sum":".,S","\\times":"@*","\\vert":"\\"},v={"\\Alpha":".,A","\\Beta":".,B","\\Chi":".,&","\\Delta":".,D","\\Epsilon":".,E","\\Eta":".,:","\\Gamma":".,G","\\Iota":".,I","\\Kappa":".,K","\\Lambda":".,L","\\Mu":".,M","\\Nu":".,N","\\Omega":".,W","\\Omicron":".,O","\\Phi":".,F","\\Pi":".,P","\\Psi":".,Y","\\Rho":".,R","\\Sigma":".,S","\\Tau":".,T","\\Theta":".,?","\\Upsilon":".,U","\\Xi":".,X","\\Zeta":".,Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function _(e){return c.hasOwnProperty(e.value)?c[e.value]:e.value.slice(1).toUpperCase()+" "}function k(e,t){for(var r,i,n,s,a="",o=e.levelIndicator,c=0,l=!1,u=0;u<t.length;u++){!function(e,t){if(!(t>=e.length)){var r=e[t];if("terminal"===r.type){if(/^[0-9]$/.test(r.value))return 1;if("."!==r.value)return;if(t+1>=e.length)return;if("terminal"===(r=e[t+1]).type)return/^[0-9]$/.test(r.value)}}}(t,u)||(""===o&&/[A-Z]$/.test(a)?a+=b(o):(s=a,((n=e).isStartOfLine&&/^-?$/.test(s)||/\s-?$/.test(s)||n.wasFraction)&&(a+="#")));var h,p=t[u],f=u<t.length-1?t[u+1]:null;switch("level"!==p.type&&o!==e.levelIndicator&&(o=A(p)?"":(e.wasModifiedExpression&&""===e.levelIndicator?e=E(e,{wasModifiedExpression:!1}):a+=b(e.levelIndicator),e.levelIndicator)),p.type){case"terminal":!e.wasModifiedExpression&&""!==o&&A(p)?a+=" "+b(o)+g(p).trim()+" ":a+=g(p),"."===p.value&&f&&("terminal"===f.type&&/^[^_\d,]/.test(g(f))||"greek"===f.type)&&(a+='"'),e=E(e,{wasFraction:!1,wasRomanCommand:!1});break;case"command":"\\space"!==p.value&&((h="\\sum"===(i=p).value||"\\prod"===i.value)&&(a+='"'),!h&&""!==o&&A(p)?a+=" "+b(o)+_(p).trim()+" ":a+=_(p),e=E(e,{wasFraction:!1,wasModifiedExpression:h,wasRomanCommand:!0}));break;case"greek":a+=(r=p,v.hasOwnProperty(r.value)?v[r.value]:r.value.slice(1).toUpperCase()+" "),e=E(e,{wasFraction:!1});break;case"fraction":var m=function(e,t){for(var r=k(e=E(e,{isStartOfLine:!1}),t.numerator),i=k(e,t.denominator),n=Math.max(r.fractionLevel,i.fractionLevel),s="",a=0;a<n;a++)s+=",";var o=s+"?"+r.value;r.levelIndicator!==e.levelIndicator&&(o+=b(e.levelIndicator));/\.$/.test(r.value)&&(o+='"');o+=s+"/"+i.value,i.levelIndicator!==e.levelIndicator&&(o+=b(e.levelIndicator));/\.$/.test(i.value)&&(o+='"');return{fractionLevel:n+1,value:o+=s+"#"}}(e,p);a+=m.value,c=Math.max(c,m.fractionLevel),e=E(e,{wasFraction:!0,wasRomanCommand:!1});break;case"radical":var y=function(e,t){for(var r=e.radicalLevel,i="",n="",s=0;s<r;s++)n+=".";{var a;t.index?(i+=n+"<",a=k(E(e,{isStartOfLine:!1}),t.index),i+=a.value,/\.$/.test(a.value)&&(i+='"'),a.levelIndicator!==e.levelIndicator&&(i+=b(e.levelIndicator)),i+=">"):i+=n+">"}var o=k(E(e,{isStartOfLine:!1,radicalLevel:r+1}),t.radicand);i+=o.value,/\.$/.test(o.value)&&(i+='"');o.levelIndicator!==e.levelIndicator&&(i+=b(e.levelIndicator));return i+=n+"]",{fractionLevel:o.fractionLevel,value:i}}(e,p);a+=y.value,c=Math.max(c,y.fractionLevel),e=E(e,{wasFraction:!1,wasRomanCommand:!1});break;case"level":!e.wasModifiedExpression&&e.wasRomanCommand?(l=/\s$/.test(a))&&(a=a.replace(/\s$/,"")):l=!1;var d=function(e,t,r,i){var n=e.levelIndicator,s="",a=function(e){var t="";if(e)for(var r=0,i=e;r<i.length;r++){var n=i[r];if("command"!==n.type||"\\prime"!==n.value)break;t+="'"}return t}(i.superscript);{var o;s+=a,i.subscript&&(e.wasModifiedExpression&&(s+="%"),n=e.levelIndicator+";",o=k(E(e,{isStartOfLine:!1,levelIndicator:n}),i.subscript),t&&/^[0-9]*(\.|\,)?[0-9]+$/.test(o.value)&&n.length<=1?n=e.levelIndicator:!e.wasModifiedExpression&&i.subscript[0]&&"level"!==i.subscript[0].type&&(s+=b(n)),s+=o.value,/\.$/.test(o.value)&&(s+='"'))}{var c;i.superscript&&(e.wasModifiedExpression&&(s+="<"),n=e.levelIndicator+"^",c=k(E(e,{isStartOfLine:!1,levelIndicator:n}),i.superscript.slice(a.length)),!e.wasModifiedExpression&&i.superscript[0]&&"level"!==i.superscript[0].type&&""!==c.value&&(s+=b(n)),s+=c.value,/\.$/.test(c.value)&&(s+='"'))}e.wasModifiedExpression?s+="]":e.wasRomanCommand&&r&&(s+=" ",n=n.slice(0,n.length-1));return{levelIndicator:n,value:s}}(e,0<a.length&&!0===/[A-Za-z]/.test(a[a.length-1]),l,p);a+=d.value,o=d.levelIndicator,e=E(e,{wasFraction:!1,wasRomanCommand:!1});break;case"typeform":a+=k(e,p.value).value,"operator_name"===p.name&&(a+=" "),e=E(e,{wasFraction:!1,wasModifiedExpression:!1,wasRomanCommand:!1})}}return{fractionLevel:c,levelIndicator:o,value:a}}function b(e){return e||'"'}function E(e,t){return i(i({},e),t)}function A(e){return("terminal"===e.type||"command"===e.type)&&/^<|>|\=|\\leq?|\\geq?|\\neq?$/.test(e.value)}},function(e,t,r){"use strict";var i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var y=r(7),n=r(11),s=r(12),a=r(0);t.default=function(e){return a.map(s.default(e),function(e){return _({capsLock:!1,wasNumber:!1},n.default(e)).value})};var o={"!":"6","(":'"<',")":'">',"*":'"9',"+":'"6',",":"1","-":'"-',".":"4","/":"_/",":":"3","<":"@<","=":'"7',">":"@>","?":"8","[":".<","\\ ":" ","\\%":".0","\\&":"@&","\\,":" ","\\infty":"#=","\\int":"!","\\{":"_<","\\|":"_\\_\\","\\}":"_>","]":".>","|":"_\\"};function d(e,t,r){var i="",n=t.value,s=r&&"terminal"===r.type?r.value:"";return k(n,e)&&(i+=";"),/^[\D]/.test(n)&&(e=O(e,{wasNumber:!1})),/^[a-z]$/.test(n)?e.capsLock?(e=O(e,{capsLock:!1}),i+=",'"+n.toUpperCase()):i+=n.toUpperCase():/^[A-Z]$/.test(n)?e.capsLock?i+=n:/[A-Z]/.test(s)?(e=O(e,{capsLock:!0}),i+=",,"+n):i+=","+n:(e=O(e,{capsLock:!1}),/^[0-9.]$/.test(n)?i+=function(e){for(var t="",r="A".charCodeAt(0)-1,i=0,n=e;i<n.length;i++){var s=n[i];t+=","===s?"1":"."===s?"4":"0"===s?"J":String.fromCharCode(r+Number(s))}return t}(n):o.hasOwnProperty(n)?i+=o[n]:i+="[terminal: "+n+"]"),{value:i,ctx:e}}var g={"\\Vert":"_\\_\\","\\cdot":'"4',"\\div":'"/',"\\ge":"_@>","\\geq":"_@>","\\langle":"@<","\\ldots":"444","\\le":"_@<","\\leq":"_@<","\\ne":'"7@:',"\\neq":'"7@:',"\\approx":"^9","\\parallel":"#L","\\perp":"#-","\\prime":"7","\\prod":",.P","\\rangle":"@>","\\sim":"@9","\\sum":",.S","\\times":'"8',"\\vert":"_\\"},v={"\\Alpha":",.A","\\Beta":",.B","\\Chi":",.&","\\Delta":",.D","\\Epsilon":",.E","\\Eta":",.:","\\Gamma":",.G","\\Iota":",.I","\\Kappa":",.K","\\Lambda":",.L","\\Mu":",.M","\\Nu":",.N","\\Omega":",.W","\\Omicron":",.O","\\Phi":",.F","\\Pi":",.P","\\Psi":",.Y","\\Rho":",.R","\\Sigma":",.S","\\Tau":",.T","\\Theta":",.?","\\Upsilon":",.U","\\Xi":",.X","\\Zeta":",.Z","\\alpha":".A","\\beta":".B","\\chi":".&","\\delta":".D","\\epsilon":".E","\\eta":".:","\\gamma":".G","\\iota":".I","\\kappa":".K","\\lambda":".L","\\mu":".M","\\nu":".N","\\omega":".W","\\omicron":".O","\\phi":".F","\\pi":".P","\\psi":".Y","\\rho":".R","\\sigma":".S","\\tau":".T","\\theta":".?","\\upsilon":".U","\\xi":".X","\\zeta":".Z"};function _(e,t){for(var r,i,n,s,a,o="",c=!0,l=0;l<t.length;l++){!function(e,t){if(t<e.length){var r=e[t];if("terminal"===r.type){if(/^\d$/.test(r.value))return 1;if("."!==r.value)return;if(t+1>=e.length)return;if("terminal"===(r=e[t+1]).type)return/^\d$/.test(r.value)}}}(t,l)?c=!0:(e=O(e,{wasNumber:!0}),c&&(o+="#",c=!1));var u,h=t[l];switch(h.type){case"terminal":e=(u=d(e,h,l<t.length-1?t[l+1]:void 0)).ctx," "===(o+=u.value)[o.length-1]&&(c=!0);break;case"command":"\\space"!==h.value&&(n=h,s=e,a=void 0,k(a=g.hasOwnProperty(n.value)?g[n.value]:n.value.slice(1).toUpperCase()+" ",s)&&(a=";"+a),/^[\D]/.test(a)&&(s=O(s,{wasNumber:!1})),e=(r={value:a,ctx:s}).ctx," "===(o+=r.value)[o.length-1]&&(c=!0));break;case"greek":" "===(o+=(i=h,v.hasOwnProperty(i.value)?v[i.value]:i.value.slice(1).toUpperCase()+" "))[o.length-1]&&(c=!0);break;case"fraction":var p=function(e,t){var r,i=_(e,t.numerator),n=_(e,t.denominator);r=b(i.value)&&b(n.value)?(e=O(e,{wasNumber:!0}),i.value+"/"+n.value.slice(1)):(e=O(e,{wasNumber:!1}),"("+i.value+"./"+n.value+")");return{ctx:e,value:r}}(e,h);o+=p.value,e=p.ctx,c=!1;break;case"radical":o+=function(e,t){var r="%";{var i;t.index&&(i=_(e,y.group(y.level({"^":t.index}))),r+=i.value)}var n=_(e,t.radicand);return r+=n.value+"+",{ctx:e,value:r}}(e,h).value,c=!0;break;case"level":var f=function(e,t){var r,i="",n=function(e){var t="";if(e)for(var r=0,i=e;r<i.length;r++){var n=i[r];if("command"!==n.type||"\\prime"!==n.value)break;t+="7"}return t}(t.superscript);{var s;i+=n,t.subscript&&(s=_(e,t.subscript),r=A(t.subscript,s.value,0)?"<"+E(s.value)+">":s.value,e=O(e,{wasNumber:s.ctx.wasNumber}),""!==r&&(i+="5"+r))}{var a;t.superscript&&(a=_(e,t.superscript.slice(n.length)),r=A(t.superscript,a.value,n.length)?"<"+E(a.value)+">":a.value,e=O(e,{wasNumber:a.ctx.wasNumber}),""!==n&&""===r||(i+="9"+r))}return{ctx:e,value:i}}(e,h);o+=f.value,e=f.ctx,c=!0;break;case"typeform":var m=_(e,h.value).value;o+=m,/(ARC)?(SIN|COS|TAN|CSC|SEC|COT)(H)?/.test(m)&&(o+=" ")}}return{ctx:e,value:o}}function k(e,t){return t.wasNumber&&/^[A-Ja-j]/.test(e)}function b(e){return/^\#[A-J41]+$/.test(e)}function E(e){return/^;/.test(e)?e.slice(1):e}function A(e,t,r){var i=e[0],n=(t.match(/\</g)||[]).length,s=/^["|\.|_]?\</.test(t),a=(t.match(/\>/g)||[]).length,o=/["|\.|_]?\>$/.test(t);return!b(t)&&1<e.length-r&&0===n&&0===a||0<n&&0<a&&(!s||!o)||1<n||1<a||i&&"typeform"===i.type}function O(e,t){return i(i({},e),t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var g=r(2),i=r(18),n=r(0);function v(e,t){for(var r,i,n,s="",a=t,o="",c=!1,l="",u="",h=function(e){for(var t=[],r=[],i=0;i<e.length;i++){var n,s,a=e[i];if(function(e){return"terminal"===e.type&&/^(\\langle |\[|\(|\\{)$/.test(e.value)}(a))t.push({direction:_,index:i}),r.push(b);else if(function(e){return"terminal"===e.type&&/^(\\rangle |\]|\)|\\})$/.test(e.value)}(a)){for(;t.length&&t[t.length-1].direction===E;)t.pop();t.length?(n=t.pop())&&(s=n.index,r[s]=_,r.push(k)):r.push(b)}else{!function(e){return"terminal"===e.type&&/^(\\\||\|)$/.test(e.value)}(a)?r.push(b):t.length&&t[t.length-1].direction===E?(n=t.pop())&&(s=n.index,r[s]=_,r.push(k)):(t.push({direction:E,index:i}),r.push(b))}}return r}(e),p=0;p<e.length;p++){var f=e[p],m=p+1<e.length?e[p+1]:null;switch(f.type){case"terminal":var y=g.getAutoOperator(e.slice(p));""!==y.value?(s+=y.value,p+=y.terminalCount-1,c=c||y.modified):" "===f.value?(c?(s+=A(a,o=l),a=o):s+="\\ ",c=!1):(h[p]===_?s+="\\left":h[p]===k&&(s+="\\right"),s+=f.value);break;case"comparison":s+=A(a,o=""),a=o,c=!1,s+=f.value;break;case"level_with_comparison":s+=A(a,f.level),a=f.level,c=!1,s+=f.value;break;case"command":var d=f.value.slice(1).trim(),c=m&&"terminal"===m.type&&/[a-z]/.test(m.value)?(s+=d,!1):(g.containsValue(d)?s+="\\operatorname{"+d+"}":s+=f.value,!0),l=a;break;case"expression":s+=f.value;break;case"fraction":s+=(r=f.numerator,i=f.denominator,"\\frac{"+v(r,n=a)+"}{"+v(i,n)+"}");break;case"modified_expression":s+=v(f.expression,a)+" ",f.under&&(s+="_{"+v(f.under,a)+"}"),f.over&&(s+="^{"+v(f.over,a)+"}");break;case"radical":s+="\\sqrt",f.index&&(s+="["+v(f.index,a)+"]"),s+="{"+v(f.value,a)+"}";break;case"simple_subscript":""===a?(s+=f.base.value+"_{"+f.subscript.value+"}","command"===f.base.type&&(c=!0,l=a)):s+=f.base.value+f.subscript.value;break;case"level":s+=A(a,f.value,u),a=f.value,"^"===f.value&&""!==u&&(u="");break;case"primes":u=m&&"level"===m.type&&";"===m.value?f.value:(s+=""!==a?Array(f.value.length+1).join("\\prime "):f.value,"")}}return(s+=A(a,t)+u).replace(/([^\\])( )$/,"$1")}var _=1,k=-1,b=0,E=2;function A(e,t,r){for(var i,n,s="",a=Math.max(e.length,t.length),o=0;o<a&&e[o]===t[o];o++);for(i=e.length-1;o<=i;i--)s+="}";for(n=o;n<t.length;n++)"^"===t[n]&&(r&&(s+=r),s+="^{"),";"===t[n]&&(s+="_{");return s}function s(e){return v(e,"")}t.default=function(e,t){return t&&t.operatorNames?g.setOperatorNames(t.operatorNames):g.resetOperatorNames(),n.map(i.default(e,t),s)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=function(e){return{type:"terminal",value:e}},t.command=function(e){return{type:"command",value:"\\"+e.trim()+" "}};var n={'"K':"<",'"K:':"\\leq ",$L:"\\parallel ",$P:"\\perp ",".1":">",".1:":"\\geq ",".K":"=","@:@:":"\\approx","/$L":"\\nparallel ","/.K":"\\neq ","=":"=","@:":"\\sim "};function s(e){return{type:"level",value:e}}t.level_with_comparison=function(e){var t=/[\^;]+/.exec(e),r=t?t.toString():"",i=e.slice(s.length);return{type:"level_with_comparison",level:r,value:n[i]}},t.comparison=function(e){return{type:"comparison",value:n[e]}},t.level=s,t.baseline=function(){return s("")},t.primes=function(e){return{type:"primes",value:e}},t.fraction=function(e,t){return{type:"fraction",numerator:e,denominator:t}},t.modified_expression=function(e,t,r){return{type:"modified_expression",expression:e,under:t,over:r}},t.radical=function(e,t){return{type:"radical",value:e,index:t}},t.expression=function(e){return{type:"expression",value:e}},t.simple_subscript=function(e,t){return{type:"simple_subscript",base:e,subscript:t}};var i={".&":"\\chi",".,&":"\\Chi",".,:":"\\Eta",".,?":"\\Theta",".,A":"\\Alpha",".,B":"\\Beta",".,D":"\\Delta",".,E":"\\Epsilon",".,F":"\\Phi",".,G":"\\Gamma",".,I":"\\Iota",".,K":"\\Kappa",".,L":"\\Lambda",".,M":"\\Mu",".,N":"\\Nu",".,O":"\\Omicron",".,P":"\\prod",".,R":"\\Rho",".,S":"\\sum",".,T":"\\Tau",".,U":"\\Upsilon",".,W":"\\Omega",".,X":"\\Xi",".,Y":"\\Psi",".,Z":"\\Zeta",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};t.greek=function(e){if(i.hasOwnProperty(e))return i[e]+" ";throw new Error("Unknown Greek letter")},t.group=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)}},function(e,t,r){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),o=r(9),c=r(17),l=r(20);t.default=function(e,t){t=t||{};var r=o.parser,i=Object.create(r);i.yy=c,i.yy.warnOrError=function(e){i.parseError(e,{recoverable:!1})};var n=Object.create(r);n.yy=s({warnings:[]},c),n.yy.warnOrError=function(e){n.yy.warnings.push(e)},n.lexer=l.default,r=t.strict?i:n;try{return{isError:!1,value:r.parse(e),warnings:r.yy.warnings||[]}}catch(e){return{error:a.default(e),isError:!0}}}},function(e,t,r){"use strict";var s=this&&this.__assign||function(){return(s=Object.assign||function(e){for(var t,r=1,i=arguments.length;r<i;r++)for(var n in t=arguments[r])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),o=r(21),c=r(10),l=r(24);t.default=function(e,t){t=t||{};var r=c.parser,i=Object.create(r);i.yy=l;var n=Object.create(r);n.yy=s({warnings:[]},l),n.lexer=o.default,r=t.strict?i:n;try{return{isError:!1,value:r.parse(e),warnings:r.yy.warnings||[]}}catch(e){return{error:a.default(e),isError:!0}}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(9),s=i.parser.lexer,n=Object.create(s);t.default=n;var a=i.parser.terminals_,o=i.parser.symbols_;n.setInput=function(e,t){this.delimiterStack=[],this.outputQueue=[],this.canAcceptPrimes=!1,s.setInput.call(this,e,t)},n.lex=function(){var e=-1;if(!this)return e;if(this.outputQueue.length)return this.outputQueue.shift();for(var t,r,i=s.lex.call(this);"UNKNOWN"===a[i]||!this.canAcceptPrimes&&"PRIMES"===a[i];)this.warn(),i=s.lex.call(this);this.canAcceptPrimes=!0;var n=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(a[i]){case"OPEN_FRAC":case"OPEN_MODEXP":this.delimiterStack.push(i),this.canAcceptPrimes=!1;break;case"RADICAL_INDEX":n===o.RADICAL_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(n)),this.delimiterStack.push(i),this.canAcceptPrimes=!1;break;case"OPEN_RADICAL":n===o.RADICAL_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(i),this.canAcceptPrimes=!1;break;case"SLASH":for(t=!1;this.delimiterStack.length;){if((r=this.delimiterStack.pop()||-1)===o.OPEN_FRAC){t=!0;break}this.pushCloseTokens(r)}t||this.pushOpenTokens(i),this.delimiterStack.push(i),this.canAcceptPrimes=!1;break;case"CLOSE_FRAC":for(t=!1;this.delimiterStack.length;){if((r=this.delimiterStack.pop()||-1)===o.SLASH){t=!0;break}if(r===o.OPEN_FRAC){this.addMissingToken(o.SLASH),t=!0;break}this.pushCloseTokens(r)}if(!t)return this.warn(),this.canAcceptPrimes=!1,this.lex();break;case"CLOSE_RADICAL":for(t=!1;this.delimiterStack.length;){if((r=this.delimiterStack.pop()||-1)===o.OPEN_RADICAL){t=!0;break}if(r===o.RADICAL_INDEX){t=!0,this.addMissingToken(o.OPEN_RADICAL);break}this.pushCloseTokens(r)}t||this.pushOpenTokens(i);break;case"CLOSE_MODEXP":for(t=!1;this.delimiterStack.length;){if((r=this.delimiterStack.pop()||-1)===o.OPEN_MODEXP){t=!0;break}this.pushCloseTokens(r)}t||this.pushOpenTokens(i);break;case"EOF":for(;this.delimiterStack.length;)r=this.delimiterStack.pop()||-1,this.pushCloseTokens(r)}return this.outputQueue.push(i),e=this.outputQueue.shift()||-1},n.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},n.addMissingToken=function(e){this.outputQueue.push(e),this.warn()},n.pushCloseTokens=function(e){switch(a[e]){case"OPEN_FRAC":this.addMissingToken(o.SLASH),this.addMissingToken(o.CLOSE_FRAC);break;case"SLASH":this.addMissingToken(o.CLOSE_FRAC);break;case"RADICAL_INDEX":this.addMissingToken(o.OPEN_RADICAL),this.addMissingToken(o.CLOSE_RADICAL);break;case"OPEN_RADICAL":this.addMissingToken(o.CLOSE_RADICAL);break;case"OPEN_MODEXP":this.addMissingToken(o.CLOSE_MODEXP)}},n.pushOpenTokens=function(e){switch(a[e]){case"SLASH":this.addMissingToken(o.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(o.OPEN_FRAC),this.addMissingToken(o.SLASH);break;case"CLOSE_RADICAL":this.addMissingToken(o.OPEN_RADICAL);break;case"CLOSE_MODEXP":this.addMissingToken(o.OPEN_MODEXP)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(10),n=i.parser.lexer,s=Object.create(n);t.default=s;var a=i.parser.terminals_,o=i.parser.symbols_;s.setInput=function(e,t){this.delimiterStack=[],this.outputQueue=[],n.setInput.call(this,e,t)},s.lex=function(){if(this.outputQueue.length)return this.outputQueue.shift();for(var e,t,r=n.lex.call(this);"UNKNOWN"===a[r];)this.warn(),r=n.lex.call(this);var i=this.delimiterStack?this.delimiterStack[this.delimiterStack.length-1]:-1;switch(a[r]){case"OPEN_FRAC":case"OPEN_GROUP":this.delimiterStack.push(r);break;case"RADICAL_WITH_INDEX":i===o.RADICAL_WITH_INDEX&&(this.delimiterStack.pop(),this.pushCloseTokens(i)),this.delimiterStack.push(r);break;case"RADICAL":i===o.RADICAL_WITH_INDEX&&this.delimiterStack.pop(),this.delimiterStack.push(r);break;case"OVER":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===o.OPEN_FRAC){e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r),this.delimiterStack.push(r);break;case"CLOSE_FRAC":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===o.OVER){e=!0;break}if(t===o.OPEN_FRAC){this.outputQueue.push(o.OVER),e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r);break;case"CLOSE_GROUP":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===o.OPEN_GROUP){e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r);break;case"CLOSE_RADICAL":for(e=!1;this.delimiterStack.length;){if((t=this.delimiterStack.pop()||-1)===o.RADICAL||t===o.RADICAL_WITH_INDEX){e=!0;break}this.pushCloseTokens(t)}e||this.pushOpenTokens(r);break;case"EOF":for(;this.delimiterStack.length;)t=this.delimiterStack.pop()||-1,this.pushCloseTokens(t)}return this.outputQueue.push(r),this.outputQueue.shift()||-1},s.warn=function(){this.yylloc&&this.yy.warnings.push({location:this.yylloc})},s.addMissingToken=function(e){this.outputQueue.push(e),this.warn()},s.pushCloseTokens=function(e){switch(a[e]){case"OPEN_FRAC":this.addMissingToken(o.OVER),this.addMissingToken(o.CLOSE_FRAC);break;case"OVER":this.addMissingToken(o.CLOSE_FRAC);break;case"OPEN_GROUP":this.addMissingToken(o.CLOSE_GROUP);break;case"RADICAL_WITH_INDEX":case"RADICAL":this.addMissingToken(o.CLOSE_RADICAL)}},s.pushOpenTokens=function(e){switch(a[e]){case"OVER":this.addMissingToken(o.OPEN_FRAC);break;case"CLOSE_FRAC":this.addMissingToken(o.OPEN_FRAC),this.addMissingToken(o.OVER);break;case"CLOSE_GROUP":this.addMissingToken(o.OPEN_GROUP);break;case"CLOSE_RADICAL":this.addMissingToken(o.RADICAL)}}},function(e,t,r){"use strict";function i(e){return e.isError}Object.defineProperty(t,"__esModule",{value:!0}),t.isErr=i,t.isOk=function(e){return!e.isError},t.map=function(e,t){return i(e)?e:{isError:!1,value:t(e.value)}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f=r(2),i=r(19),n=r(0);function m(e,t){for(var r,i,n="",s=!1,a="",o=function(e){for(var t=[],r=[],i=0;i<e.length;i++){var n,s,a=e[i];if(function(e){return"terminal"===e.type&&/^(\\langle |\[|\(|\\{)$/.test(e.value)}(a))t.push({direction:y,index:i}),r.push(g);else if(function(e){return"terminal"===e.type&&/^(\\rangle |\]|\)|\\})$/.test(e.value)}(a)){for(;t.length&&t[t.length-1].direction===v;)t.pop();t.length?(n=t.pop())&&(s=n.index,r[s]=y,r.push(d)):r.push(g)}else{!function(e){return"terminal"===e.type&&/^(\\\||\|)$/.test(e.value)}(a)?r.push(g):t.length&&t[t.length-1].direction===v?(n=t.pop())&&(s=n.index,r[s]=y,r.push(d)):(t.push({direction:v,index:i}),r.push(g))}}return r}(e),c=0;c<e.length;c++){var l=e[c],u=c+1<e.length?e[c+1]:null;switch(l.type){case"terminal":var h=f.getAutoOperator(e.slice(c));""!==h.value?(n+=h.value,c+=h.terminalCount-1):" "!==l.value||s?(o[c]===y?n+="\\left":o[c]===d&&(n+="\\right"),n+=l.value):n+="\\ ",s=!1;break;case"command":var p=l.value.slice(1).trim(),s=u&&"terminal"===u.type&&/[a-z]/.test(u.value)?(n+=p,!1):(f.containsValue(p)?n+="\\operatorname{"+p+"}":n+=l.value,!0);break;case"expression":n+=l.value;break;case"fraction":n+=(r=l.numerator,i=l.denominator,"\\frac{"+m(r)+"}{"+m(i)+"}");break;case"radical":n+="\\sqrt",l.index&&(n+="["+m(l.index)+"]"),n+="{"+m(l.value)+"}";break;case"basic_level":n+=function(e,t,r){var i="",n="{"+m(t,e)+"}";"9"===e?i+=r+"^"+n:"5"===e&&(i+="_"+n);return i}(l.level,l.value,a),"9"===l.level&&(a="");break;case"bracketed_level":n+=function(e,t,r,i,n){var s="",a="{"+t+m(r,e)+i+"}";"9"===e?s+=n+"^"+a:"5"===e&&(s+="_"+a);return s}(l.level,l.lbrack,l.value,l.rbrack,a),"9"===l.level&&(a="");break;case"primes":a=!u||"basic_level"!==u.type&&"bracketed_level"!==u.type||"5"!==u.level?(n+=t&&""!==t?Array(l.value.length+1).join("\\prime "):l.value,""):l.value}}return(n+=a).replace(/([^\\])( )$/,"$1")}var y=1,d=-1,g=0,v=2;var s=m;t.default=function(e,t){return t&&t.operatorNames?f.setOperatorNames(t.operatorNames):f.resetOperatorNames(),n.map(i.default(e,t),function(e){return s(e,"")})}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.terminal=function(e){return{type:"terminal",value:e}},t.command=function(e){return{type:"command",value:e}},t.basic_level=function(e,t){return{type:"basic_level",level:e,value:t}},t.bracketed_level=function(e,t,r,i){return{type:"bracketed_level",level:e,lbrack:t,value:r,rbrack:i}},t.primes=function(e){return{type:"primes",value:0<e.length?Array(e.length+1).join("'"):""}},t.fraction=function(e,t){return{type:"fraction",numerator:e,denominator:t}},t.radical=function(e,t){return{type:"radical",value:e,index:t}},t.expression=function(e){return{type:"expression",value:e}},t.group=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Array.prototype.concat.apply([],e)};var i={",.&":"\\Chi",",.:":"\\Eta",",.?":"\\Theta",",.A":"\\Alpha",",.B":"\\Beta",",.D":"\\Delta",",.E":"\\Epsilon",",.F":"\\Phi",",.G":"\\Gamma",",.I":"\\Iota",",.K":"\\Kappa",",.L":"\\Lambda",",.M":"\\Mu",",.N":"\\Nu",",.O":"\\Omicron",",.P":"\\prod",",.R":"\\Rho",",.S":"\\sum",",.T":"\\Tau",",.U":"\\Upsilon",",.W":"\\Omega",",.X":"\\Xi",",.Y":"\\Psi",",.Z":"\\Zeta",".&":"\\chi",".:":"\\eta",".?":"\\theta",".A":"\\alpha",".B":"\\beta",".D":"\\delta",".E":"\\epsilon",".F":"\\phi",".G":"\\gamma",".I":"\\iota",".K":"\\kappa",".L":"\\lambda",".M":"\\mu",".N":"\\nu",".O":"\\omicron",".P":"\\pi",".R":"\\rho",".S":"\\sigma",".T":"\\tau",".U":"\\upsilon",".W":"\\omega",".X":"\\xi",".Y":"\\psi",".Z":"\\zeta"};t.greek=function(e){if(i.hasOwnProperty(e))return i[e]+" ";throw new Error("Unknown Greek letter")},t.to_number=function(e){for(var t="",r="A".charCodeAt(0)-1,i=0,n=e;i<n.length;i++){var s=n[i];t+="4"===s?".":"J"===s?"0":s.charCodeAt(0)-r}return t}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=" A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=",c=10240;function a(e){for(var t,r,i="",n=0,s=e;n<s.length;n++){var a=s[n];i+=(r=a,t=o.indexOf(r),String.fromCharCode(c+t))}return i}function i(e){for(var t,r="",i=0,n=e;i<n.length;i++){var s=n[i];r+=(t=s.charCodeAt(0)-c,o[t])}return r}t.toBrailleAscii=i,t.toExpandedBrailleAscii=function(e){return i(e).replace(/[@-^]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+32)})},t.coerceToSixDotCells=function(e){var t="";if(e)for(var r=0,i=e;r<i.length;r++){var n=i[r],s=n.charCodeAt(0);96<=s&&s<=127&&(s-=32,n=String.fromCharCode(s)),32<=s&&s<=95&&(s=(n=a(n)).charCodeAt(0)),10305<=s&&s<=10495&&(s=10240+(s-1024)%64,n=String.fromCharCode(s)),t+=10240<=s&&s<=10304?n:String.fromCharCode(10240)}return t},t.isSixDotCells=function(e){for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<10240||10304<r)return!1}return!0}},function(e,t,r){r(3),e.exports=r(3)}],i.c=n,i.i=function(e){return e},i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=26);function i(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}var r,n});
define('submodules/dcgview/src/attr-event-handler',[],function(){return function(t,r){if(null!=r){if("string"!=typeof t)throw new Error("Must pass a string for an EventHandler name");if("function"!=typeof r)throw new Error("Must pass a function for an EventHandler callback");return{bindings:{onMount:function(n){n[t.toLowerCase()]=function(n){n&&r.apply(this,arguments)}}}}}}});
define('submodules/dcgview/src/const',['require'],function(require){return{isConst:function(n){return!("function"!=typeof n||!n.isDCGViewConst)},makeConst:function(n){function t(){return n}return t.isDCGViewConst=!0,t}}});
define('submodules/dcgview/src/attr',['require'],function(require){return{update:function(t,e,i){void 0===i?t.removeAttribute(e):t.setAttribute(e,i+"")}}});
define('submodules/dcgview/src/attr-generic',['require','./const','./attr'],function(require){var t=require("./const"),i=require("./attr");return function(r,a){var n,e=a();return t.isConst(a)||(n={onUpdate:function(n){var t=a();t!==e&&(e=t,i.update(n,r,t))}}),{value:e,bindings:n}}});
define('submodules/dcgview/src/is-event-handler',[],function(){return function(n){return"o"===n[0]&&"n"===n[1]&&n[2].toUpperCase()===n[2]}});
define('submodules/dcgview/src/custom-attributes',['require'],function(require){var r={};return{isCustomAttribute:function(n){return r.hasOwnProperty(n)},add:function(n,t){r[n]=t},parse:function(n,t){return(0,r[n])(t)}}});
define('submodules/dcgview/src/bindings',['require'],function(require){return{add:function(n,i,d){var f=n._bindings[i];f?f.push(d):n._bindings[i]=[d]},invoke:function(n,i){var d=n._bindings[i];if(d)for(var f=d.length,r=0;r<f;r++)d[r]()}}});
define('submodules/dcgview/src/warnings',['require'],function(require){var o=[];return{warn:function(n){try{throw new Error(n)}catch(n){console.warn(n);for(var r=0;r<o.length;r++)o[r](n)}},addWarningHandler:function(n){o.push(n)},removeWarningHandler:function(n){var r=o;o=[];for(var a=0;a<r.length;a++){var e=r[a];e!==n&&o.push(e)}}}});
define('submodules/dcgview/src/bind-attrs',['require','./attr-event-handler','./attr-generic','./is-event-handler','./custom-attributes','./bindings','./warnings'],function(require){var u=require("./attr-event-handler"),a=require("./attr-generic"),d=require("./is-event-handler"),l=require("./custom-attributes"),s=require("./bindings"),f=require("./warnings"),c={onMount:!0,didMount:!0,willUnmount:!0,willUpdate:!0,onUpdate:!0,didUpdate:!0},v={willMount:!0,onMount:!0,didMount:!0,willUnmount:!0,onUnmount:!0,didUnmount:!0};function b(n,t,i){var r=i.bindings;if(r)for(var e in r){var o=r[e];e in c&&(o=o.bind(null,t)),e in v&&(o=function(n,t){var i=!1;return function(){i?f.warn(n+" is a one-time binding but was called multiple times"):(i=!0,t.apply(this,arguments))}}(e,o)),s.add(n,e,o)}}return function(n,t,i){if(t)for(var r in t){var e,o=function(n,t){if("function"!=typeof t)throw new Error('The "'+n+'" attr must be a function. It is: '+JSON.stringify(t));return l.isCustomAttribute(n)?l.parse(n,t):(d(n)?u:a)(n,t)}(r,t[r]);o&&(void 0!==(e=o.value)&&i.setAttribute(r,e),o.bindings&&b(n,i,o))}}});
define('submodules/dcgview/src/bind-text',['require','./bindings'],function(require){var o=require("./bindings"),p=!1;return{bindText:function(n,e,t){if("function"!=typeof t)throw new Error("bindText expects a function");var a=t();null==a&&(a="");var d,i=document.createTextNode(a);p?((d=document.createElement("span")).appendChild(i),e.appendChild(d)):e.appendChild(i),o.add(n,"onUpdate",function(){var n=t();null==n&&(n=""),a!==n&&(i.nodeValue=n,a=n)})},enableSpanWrapping:function(){p=!0}}});
define('submodules/dcgview/src/dcg-element',['require','./bind-attrs','./bind-text','./const','./warnings'],function(require){var d=require("./bind-attrs"),s=require("./bind-text").bindText,c=require("./const"),h=require("./warnings");function m(t,e){var n=document.createTextNode(e);t.appendChild(n)}function t(t,e,n){this.tagName=t,this.attrs=e,this.children=n}return t.prototype._isDCGElement=!0,t.prototype.renderToDocFrag=function(t,e){if(this._domNode)throw new Error("Cannot remount a DCGElement");var n=this.children,r=document.createElement(this.tagName);this._domNode=r,d(e,this.attrs,r),t.appendChild(r);for(var o=n.length,i=0;i<o;i++){var a=n[i];a._isDCGElement?a.renderToDocFrag(r,e):c.isConst(a)?m(r,a()):"function"==typeof a?s(e,r,a):(h.warn("Text should be a const or a getter: "+JSON.stringify(a)),m(r,a))}},t});
define('submodules/dcgview/src/create-element',['require','./dcg-element'],function(require){var f=require("./dcg-element");return function(e,r){for(var n=[],t=arguments.length-1,i=2;i<=t;i++)!function e(r,n){if(null!=r)if(Array.isArray(r))for(var t=0;t<r.length;t++)e(r[t],n);else n.push(r)}(arguments[i],n);if("string"==typeof e)return new f(e,r,n);if(e&&e._isDCGViewClass)return new e(r,n);throw new Error("createElement expects a String or DCGViewClass")}});
define('submodules/dcgview/src/mounting',['require','./bindings'],function(require){var o=require("./bindings");function r(n){n.willMount&&n.willMount(),o.invoke(n,"willMount"),n._childViews.forEach(r)}function u(n){n._isMounted=!0,n.onMount&&n.onMount(),o.invoke(n,"onMount"),n._childViews.forEach(u)}function d(n){n.didMount&&n.didMount(),o.invoke(n,"didMount"),n._childViews.forEach(d)}function e(n){n.willUnmount&&n.willUnmount(),o.invoke(n,"willUnmount"),n._childViews.forEach(e)}function i(n){n._isMounted=!1,n._childViews.forEach(i),o.invoke(n,"onUnmount"),n.onUnmount&&n.onUnmount()}function t(n){n._childViews.forEach(t),o.invoke(n,"didUnmount"),n.didUnmount&&n.didUnmount()}return{renderToDocFrag:function(n,o){if(o&&o._childViews.push(this),this.__generatedHTMLBefore)throw new Error("Cannot remount a DCGView");this.__generatedHTMLBefore=!0,this._element.renderToDocFrag(n,this)},findRootNode:function(){for(var n=this._element;n._isDCGView;)n=n._element;return n._domNode},createNodeForView:function(n,o){var e=document.createDocumentFragment();return n.renderToDocFrag(e,o),e.firstChild},willMount:r,onMount:u,didMount:d,willUnmount:e,onUnmount:i,didUnmount:t,mountToNode:function(n,o,e){if(!n||!n._isDCGViewClass)throw new Error("Must pass a DCGView class to be mounted");if(!o||1!==o.nodeType)throw new Error("Must pass an HTMLElement for the node");if(o._mountedDCGView)throw new Error("This node is already mounted by a view");var i=new n(e),t=document.createDocumentFragment();return i.renderToDocFrag(t),o.innerHTML="",r(i),o._mountedDCGView=i,o.appendChild(t),u(i),d(i),i},unmountFromNode:function(n){var o=n._mountedDCGView;if(!o)throw new Error("This node is not mounted by a DCGView");e(o),n.innerHTML="",delete n._mountedDCGView,i(o),t(o)}}});
define('submodules/dcgview/src/update',['require','./bindings','./warnings'],function(require){var d=require("./bindings"),n=require("./warnings");return{update:function(){if(!this._isMounted)return n.warn("Trying to update view that is not mounted. Ignoring update.");if(!this.shouldUpdate||this.shouldUpdate()){if(this.willUpdate&&this.willUpdate(),d.invoke(this,"willUpdate"),d.invoke(this,"onUpdate"),this.onUpdate&&this.onUpdate(),this.overrideChildUpdates)this.overrideChildUpdates();else for(var i=this._childViews,t=i.length,e=0;e<t;e++)i[e].update();d.invoke(this,"didUpdate"),this.didUpdate&&this.didUpdate()}}}});
define('submodules/dcgview/src/spread',['require'],function(require){return function(r){var n=arguments.length;if(n<2)return r;for(var e=1;e<n;e++)for(var t=arguments[e],f=Object.keys(t),u=f.length,a=0;a<u;a++){var i=f[a];r[i]=t[i]}return r}});
define('submodules/dcgview/src/create-class',['require','./create-element','./mounting','./update','./const','./spread'],function(require){var r=require("./create-element"),n=require("./mounting"),i=require("./update"),p=require("./const"),s=require("./spread");return function(t){if(!t)throw new Error("must pass a spec to DCGView.createClass");if("function"!=typeof t.template)throw new Error("must pass a template function to DCGView.createClass");function e(t,e){this._setupProps(t,e),this.init&&this.init(),this._callTemplate()}for(var o in e.prototype._setupProps=function(t,e){if(t){for(var o in t){var r=t[o];if("function"!=typeof r&&void 0!==r)throw new Error('The "'+o+'" prop must be a function. It is: '+JSON.stringify(r))}this.props=t}else this.props={};this.children=e,this._childViews=[],this._bindings={}},e.prototype._callTemplate=function(){if(this._element=this.template(),!this._element||!this._element._isDCGElement)throw new Error("template() must return a DCGElement")},e.prototype.bindFn=function(t){return t.bind(this)},e.prototype.findRootNode=n.findRootNode,e.prototype.renderToDocFrag=n.renderToDocFrag,e.prototype.const=p.makeConst,e.prototype.spread=s,e.prototype.createElement=r,e.prototype.update=i.update,t)if(t.hasOwnProperty(o)){if(e.prototype.hasOwnProperty(o))throw new Error("Cannot override the "+o+"() method");e.prototype[o]=t[o]}return e._isDCGViewClass=!0,e.prototype._isDCGView=!0,e.prototype._isDCGElement=!0,e}});
define('submodules/dcgview/src/attr-style',['require','./const','./attr'],function(require){var t=require("./const"),o=require("./attr");function u(r){var t=r(),n=typeof t;if("string"==n)return t;if(!n||"object"!=n)throw new Error("Unsupported type returned from style getter: "+n);var e="";for(var o in t){var u=t[o];t.hasOwnProperty(o)&&null!=u&&(e?e+=";"+o+":"+u:e=o+":"+u)}return e}return function(n){var r,e=u(n);return t.isConst(n)||(r={onUpdate:function(r){var t=u(n);e!==t&&(o.update(r,"style",t),e=t)}}),{value:e,bindings:r}}});
define('submodules/dcgview/src/attr-class',['require','./const'],function(require){var n=require("./const");function a(r){var n=r(),e=typeof n;if("string"==e)return n;if(!e||"object"!=e)throw new Error("Unsupported type returned from class getter: "+e);var t="";for(var a in n){n.hasOwnProperty(a)&&n[a]&&(t?t+=" "+a:t=a)}return t}var f=/^\s+|\s+$/g,l=/\s+/;return function(e){var r,t=a(e);return n.isConst(e)||(r={onUpdate:function(r){var n=a(e);t!==n&&(t=(r.className===t?r.className=n:r.className=function(r,n,e){for(var t=[],a=r.className.replace(f,"").split(l),s=n.replace(f,"").split(l),o={},i=s.length-1;0<=i;i--)o[s[i]]=!0;for(var c=a.length,i=0;i<c;i++){var u=a[i];o.hasOwnProperty(u)||t.push(u)}return e?t.length?e+" "+t.join(" "):e:t.join(" ")}(r,t,n),n))}}),{value:t,bindings:r}}});
define('submodules/dcgview/src/attr-lifecycle',['require','./const'],function(require){var r=require("./const");return function(e){return function(t){if("function"!=typeof t)throw new Error("The "+e+" attribute expects a function for the value");if(r.isConst(t))throw new Error("The "+e+" attribute does not expect a const for the value");var n={bindings:{}};return n.bindings[e]=t,n}}});
define('submodules/dcgview/src/longest-subsequence',['require'],function(require){return function(r){for(var e,n=r.length,a=new Array(n),f=new Array(n+1),t=0,i=0;i<n;i++){if(r[f[t]]<r[i])e=t+1;else{for(var o=1,u=t-1;o<=u;){var v=Math.ceil((o+u)/2);r[f[v]]<r[i]?o=v+1:u=v-1}e=o}a[i]=f[e-1],f[e]=i,t<e&&(t=e)}var c=new Array(t),l=f[t];for(i=t-1;0<=i;i--)c[i]=r[l],l=a[l];return c}});
define('submodules/dcgview/src/compute-key-mutations',['require','./longest-subsequence'],function(require){var i=require("./longest-subsequence");return function(e,r){for(var n,o={},t=[],f=[],s=0;s<r.length;s++)o[n=r[s]]=s;for(s=0;s<e.length;s++)void 0===o[n=e[s]]&&t.push(n);var u=[];for(s=0;s<e.length;s++){var h=o[n=e[s]];void 0!==h&&u.push(h)}var v=i(u),g={};for(s=0;s<v.length;s++)g[n=r[v[s]]]=!0;for(s=r.length-1;0<=s;s--)g[n=r[s]]||f.push({key:n,beforeKey:r[s+1]});return{removes:t,inserts:f}}});
define('submodules/dcgview/src/for',['require','./create-class','./compute-key-mutations','./const','./mounting'],function(require){var e=require("./create-class"),w=require("./compute-key-mutations"),n=require("./const"),d=require("./mounting"),r=e({template:function(){return this.children[0]}});return e({_isDCGFor:!0,getKeys:function(){this._keyToItem={};var e=this.props.each();if(!Array.isArray(e))throw new Error("<For each={}> must return an array");var t=this.props.key?e.map(this.props.key):e.slice(0);if(!this._chosenKeyType&&t.length&&(this._chosenKeyType=typeof t[0],"string"!==this._chosenKeyType&&"number"!==this._chosenKeyType))throw new Error("The key: "+JSON.stringify(t[0])+" is not a string or number");for(var i=0;i<t.length;i++){var o=t[i];if(typeof o!==this._chosenKeyType)throw new Error("Keys must be the same type. "+JSON.stringify(o)+" is not a "+this._chosenKeyType);if(o in this._keyToItem)throw new Error("The key: "+JSON.stringify(o)+" is not unique");this._keyToItem[o]=e[i]}return t},createViewForKey:function(e){var t=this._keyToItem[e],i=this._viewFunction.call(this,t,e),o=i;return o._isDCGView||(o=this.createElement(r,null,i)),this._keyToView[e]=o},template:function(){if(this._keyToView={},"function"!=typeof this.props.each)throw new Error("<For each={}> must be a function");if(1!==this.children.length)throw new Error("<For> expects a single child. You passed "+this.children.length);var e=this.children[0];if(!e||!e._isDCGElement)throw new Error("<For> expects the root node to be a DCGElement. You passed "+JSON.stringify(e));if(e._isDCGView)throw new Error("<For> expects the root node to not be a DCGView. Pass in something like <div> or <span>");if(1!==e.children.length)throw new Error("<For> expects a root node with a single child. You passed "+e.children.length);if(this._viewFunction=e.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<For> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var t=JSON.stringify(this._viewFunction);throw new Error("<For> expects a function that constructs a DCGElement. You passed "+t)}if(n.isConst(this._viewFunction))throw new Error("<For> expects a function that constructs a DCGElement. You passed a constant");this._keys=this.getKeys();for(var i=[],o=0;o<this._keys.length;o++){var r=this._keys[o];i.push(this.createViewForKey(r))}return e.children=i,e},detachAllRemovedViews:function(){for(var e,t=this._childViews,i=0,o=t.length,r=0;r<o;r++)(e=t[r])._will_be_unmounted_?i++:t[r-i]=e;t.splice(o-i,i)},overrideChildUpdates:function(){var e=this._keys,t=this.getKeys();this._keys=t;for(var i,o,r,n,s,h=this.findRootNode(),c=w(e,t),a=[],l=c.removes.length-1;0<=l;l--)s=c.removes[l],a.push(this._keyToView[s]);for(a.forEach(d.willUnmount),l=0;l<c.removes.length;l++)s=c.removes[l],i=this._keyToView[s],delete this._keyToView[s],i._will_be_unmounted_=!0,h.removeChild(i.findRootNode());0<a.length&&this.detachAllRemovedViews(),a.forEach(d.onUnmount),a.forEach(d.didUnmount);var u=[];for(l=c.inserts.length-1;0<=l;l--)(s=c.inserts[l].key)in this._keyToView||(i=this.createViewForKey(s),u.push(i),d.createNodeForView(i,this));for(u.forEach(d.willMount),l=0;l<c.inserts.length;l++)n=c.inserts[l],o=this._keyToView[n.key].findRootNode(),r=void 0!==n.beforeKey?this._keyToView[n.beforeKey].findRootNode():null,h.insertBefore(o,r);u.forEach(d.onMount),u.forEach(d.didMount);var y=this._childViews,f=y.length-u.length;for(l=0;l<f;l++)y[l].update()}})});
define('submodules/dcgview/src/switch',['require','./create-class','./const','./mounting'],function(require){var e=require("./create-class"),t=require("./const"),s=require("./mounting"),i=e({template:function(){return this.children[0]}});return e({_isDCGSwitch:!0,updateKey:function(){this._key=this.props.key()},createView:function(){var e=this._viewFunction(this._key);return null==e&&(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(i,null,e)},template:function(){if(this._key=void 0,"function"!=typeof this.props.key)throw new Error("<Switch key={}> must be a function");if(1!==this.children.length)throw new Error("<Switch> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var e=JSON.stringify(this._viewFunction);throw new Error("<Switch> expects a function that constructs a DCGElement. You passed "+e)}if(t.isConst(this._viewFunction))throw new Error("<Switch> expects a function that constructs a DCGElement. You passed a constant");return this.updateKey(),this.createView()},overrideChildUpdates:function(){var e,t,i,n=this._key;this.updateKey(),n===this._key?this._element.update():(e=this.findRootNode(),t=document.createTextNode(""),e.parentNode.insertBefore(t,e),s.willUnmount(this._element),this._childViews=[],e.parentNode.removeChild(e),s.onUnmount(this._element),s.didUnmount(this._element),this._element=this.createView(),i=s.createNodeForView(this._element,this),s.willMount(this._element),t.parentNode.insertBefore(i,t),t.parentNode.removeChild(t),s.onMount(this._element),s.didMount(this._element))}})});
define('submodules/dcgview/src/switch-union',['require','./create-class','./mounting','./create-element'],function(require){var e=require("./create-class"),s=require("./mounting"),r=require("./create-element"),t=e({template:function(){return this.children[0]}}),o=e({_isDCGSwitchUnion:!0,updateCase:function(){this._case=this.props.getCase()},createView:function(){var e=this.props.buildChildView(this._case);return null==e&&(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(t,null,e)},template:function(){return this._case=void 0,this.updateCase(),this.createView()},overrideChildUpdates:function(){var e,t,i,n=this._case;this.updateCase(),n===this._case?this._element.update():(e=this.findRootNode(),t=document.createTextNode(""),e.parentNode.insertBefore(t,e),s.willUnmount(this._element),this._childViews=[],e.parentNode.removeChild(e),s.onUnmount(this._element),s.didUnmount(this._element),this._element=this.createView(),i=s.createNodeForView(this._element,this),s.willMount(this._element),t.parentNode.insertBefore(i,t),t.parentNode.removeChild(t),s.onMount(this._element),s.didMount(this._element))}});function i(t,i,n){return r(o,{getCase:function(){var e=i();return t?e&&e[t]:e},buildChildView:function(e){var t=n[e];if(t)return t(i)}})}return function(e,t){return"string"==typeof e?i.bind(this,e,t):i(void 0,e,t)}});
define('submodules/dcgview/src/if',['require','./create-class','./const','./switch'],function(require){var t=require("./create-class"),i=require("./const"),s=require("./switch");return t({_isDCGIf:!0,template:function(){if("function"!=typeof this.props.predicate)throw new Error("<If predicate={}> must be a function");if(1!==this.children.length)throw new Error("<If> expects a single child. You passed "+this.children.length);if(this._viewFunction=this.children[0],this._viewFunction&&this._viewFunction._isDCGElement)throw new Error("<If> expects a function that constructs a DCGElement. You passed a DCGElement directly");if("function"!=typeof this._viewFunction){var t=JSON.stringify(this._viewFunction);throw new Error("<If> expects a function that constructs a DCGElement. You passed "+t)}if(i.isConst(this._viewFunction))throw new Error("<If> expects a function that constructs a DCGElement. You passed a constant");var n=function(){return!!this.props.predicate()}.bind(this),e=function(t){if(t)return this._viewFunction()}.bind(this);return this.createElement(s,{key:n},e)}})});
define('submodules/dcgview/src/if-defined',['require','./create-class','./mounting','./create-element'],function(require){var e=require("./create-class"),s=require("./mounting"),i=require("./create-element"),t=e({template:function(){return this.children[0]}}),n=e({_isDCGIfDefined:!0,updateIsDefined:function(){this._isDefined=this.props.isDefined()},createView:function(){var e;return this._isDefined&&(e=this.props.buildChildView()),null==e&&(e=this.createElement("div",{style:this.const("display: none")})),this.createElement(t,null,e)},template:function(){return this._isDefined=void 0,this.updateIsDefined(),this.createView()},overrideChildUpdates:function(){var e,t,i,n=this._isDefined;this.updateIsDefined(),n===this._isDefined?this._element.update():(e=this.findRootNode(),t=document.createTextNode(""),e.parentNode.insertBefore(t,e),s.willUnmount(this._element),this._childViews=[],e.parentNode.removeChild(e),s.onUnmount(this._element),s.didUnmount(this._element),this._element=this.createView(),i=s.createNodeForView(this._element,this),s.willMount(this._element),t.parentNode.insertBefore(i,t),t.parentNode.removeChild(t),s.onMount(this._element),s.didMount(this._element))}});return function(e,t){return i(n,{isDefined:function(){return null!=e()},buildChildView:function(){return t(e)}})}});
define('submodules/dcgview/src/if-else',['require','./switch-union'],function(require){var t=require("./switch-union");return function(n,r){return t(function(){return n()?"true":"false"},r)}});
define('submodules/dcgview/src/textarea',['require','./create-class','./spread'],function(require){var t=require("./create-class"),e=require("./spread");return t({computeValue:function(){var t=this.props.value();return null==t?"":t+""},template:function(){if(!this.props.value)throw new Error('<Textarea> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Textarea> expects an "onInput={}" prop');var t=e({},this.props,{onInput:function(t){this.props.onInput(t.target.value),this._isMounted&&this.update()}.bind(this)});return this.props.disabled&&(t.disabled=function(){return!!this.props.disabled()||void 0}.bind(this)),delete t.value,this.createElement("textarea",t,this.const(this.computeValue()))},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeValue();this.rootDOM.value!==t&&(this.rootDOM.value=t)}})});
define('submodules/dcgview/src/input',['require','./create-class','./spread'],function(require){var t=require("./create-class"),e=require("./spread");return t({computeValue:function(){var t=this.props.value();return null==t?"":t+""},template:function(){if(!this.props.value)throw new Error('<Input> expects a "value={}" prop');if(!this.props.onInput)throw new Error('<Input> expects an "onInput={}" prop');var t=e({},this.props,{value:this.const(this.computeValue()),onInput:function(t){this.props.onInput(t.target.value),this._isMounted&&this.update()}.bind(this)});return this.props.onEnterPressed&&(t.onKeypress=function(t){13===t.which&&this.props.onEnterPressed()}.bind(this)),this.props.disabled&&(t.disabled=function(){return!!this.props.disabled()||void 0}.bind(this)),t.hasOwnProperty("tabindex")||(t.tabindex=function(){return this.props.disabled&&this.props.disabled()?"-1":"0"}.bind(this)),this.createElement("input",t)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var t=this.computeValue();this.rootDOM.value!==t&&(this.rootDOM.value=t)}})});
define('submodules/dcgview/src/checkbox',['require','./create-class','./spread'],function(require){var e=require("./create-class"),t=require("./spread");return e({computeChecked:function(){return!!this.props.checked()},template:function(){if(!this.props.checked)throw new Error('<Checkbox> expects a "checked={}" prop');if(!this.props.onChange)throw new Error('<Checkbox> expects an "onChange={}" prop');var e=t({},this.props,{type:this.const("checkbox"),checked:this.const(this.computeChecked()?"checked":void 0),onChange:function(e){this.props.onChange(e.target.checked),this._isMounted&&this.update()}.bind(this)});return this.createElement("input",e)},didUpdate:function(){this.rootDOM||(this.rootDOM=this.findRootNode());var e=this.computeChecked();this.rootDOM.checked!==e&&(this.rootDOM.checked=e)}})});
define('submodules/dcgview/src/components',['require','./for','./switch','./switch-union','./if','./if-defined','./if-else','./textarea','./input','./checkbox'],function(require){return{For:require("./for"),Switch:require("./switch"),SwitchUnion:require("./switch-union"),If:require("./if"),IfDefined:require("./if-defined"),IfElse:require("./if-else"),Textarea:require("./textarea"),Input:require("./input"),Checkbox:require("./checkbox")}});
define('submodules/dcgview/src/class',['require','./create-class'],function(require){return require("./create-class")({template:function(){}})});
define('submodules/dcgview/src/dcg-view',['require','./create-element','./create-class','./mounting','./spread','./const','./custom-attributes','./attr-style','./attr-class','./attr-lifecycle','./components','./warnings','./bind-text','./class'],function(require){var t=require("./create-element"),n=require("./create-class"),e=require("./mounting"),d=require("./spread"),o=require("./const"),a=require("./custom-attributes"),u=require("./attr-style"),r=require("./attr-class"),s=require("./attr-lifecycle"),i=require("./components"),m=require("./warnings"),l=require("./bind-text").enableSpanWrapping,C=require("./class"),b={createElement:t,createClass:n,mountToNode:e.mountToNode,unmountFromNode:e.unmountFromNode,spread:d,const:o.makeConst,isConst:o.isConst,addCustomAttribute:a.add,Components:i,addWarningHandler:m.addWarningHandler,removeWarningHandler:m.removeWarningHandler,enableSpanWrapping:l,Class:C};return b.addCustomAttribute("style",u),b.addCustomAttribute("class",r),b.addCustomAttribute("willMount",s("willMount")),b.addCustomAttribute("onMount",s("onMount")),b.addCustomAttribute("didMount",s("didMount")),b.addCustomAttribute("willUnmount",s("willUnmount")),b.addCustomAttribute("onUnmount",s("onUnmount")),b.addCustomAttribute("didUnmount",s("didUnmount")),b.addCustomAttribute("willUpdate",s("willUpdate")),b.addCustomAttribute("onUpdate",s("onUpdate")),b.addCustomAttribute("didUpdate",s("didUpdate")),b});
define('submodules/dcgview/dcgview',['require','./src/dcg-view'],function(require){return require("./src/dcg-view")});
define('lib/urlparser',["require","exports"],function(require,e){"use strict";function n(e,r){return new RegExp("[?|&]"+r+"(=|&|;|$)").test(e)}function a(e,r,t){if(r!==encodeURIComponent(r))throw new Error("Programming error: parameter name should be URL-safe without encoding.");var n=encodeURIComponent(t);if(e.length){var a=e.split("#"),o=/\?/.test(e)?a[0]+"&"+r+"="+n:a[0]+"?"+r+"="+n;return void 0!==a[1]?o+"#"+a[1]:o}return"?"+r+"="+n}function o(e,r,t){var n=new RegExp("([?|&])"+r+"=([^&;]+?)(&|#|;|$)").exec(e);if(!n)return e;var a=n[1],o=""+a+r+"="+n[2],u=""+a+r+"="+encodeURIComponent(t);return e.replace(o,u)}Object.defineProperty(e,"__esModule",{value:!0}),e.setParameter=e.deleteParameter=e.replaceParameter=e.pushParameter=e.hasParameter=e.getParameter=void 0,e.getParameter=function(e,r){var t=new RegExp("[?|&]"+r+"=([^&;]+?)(&|#|;|$)").exec(e);return t?decodeURIComponent(t[1].replace(/\+/g,"%20")):null},e.hasParameter=n,e.pushParameter=a,e.replaceParameter=o,e.deleteParameter=function(e,r){var t=new RegExp("([?|&])"+r+"=([^&;]+?)(&|#|;|$)").exec(e);if(!t)return e;var n=""+t[1]+r+"="+t[2],a=e.replace(n,"");return"&"===a[0]?a.replace("&","?"):a},e.setParameter=function(e,r,t){return(n(e,r)?o:a)(e,r,t)}});
define('lib/retain-lang',["require","exports","./parse-query-params","./urlparser"],function(require,e,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.retainLang=e.domainNotDesmos=void 0;var o=/lang=[A-Za-z]+/,i=/(cl|learn|support).desmos.com/,a=/^(?:https?:)?(?:\/\/)?([^\s\/\?]+)/i,u=/(^desmos\.com$)|(\.desmos.com$)/;function m(e){var r=a.exec(e);if(r){var t=r[1];return!u.test(t)}return!1}e.domainNotDesmos=m,e.retainLang=function(e,r){var t=s.getQueryParams(),a="",a=void 0!==r?r:t.lang?""+t.lang:"";return""===e||""===a||o.test(e)||i.test(e)||m(e)?e:n.setParameter(e,"lang",a)}});

define('loadcss!dcgview-shim', function(){});
define('dcgview',["require","exports","submodules/dcgview/dcgview","jquery","bugsnag","lib/retain-lang","loadcss!dcgview-shim"],function(require,n,t,i,o,e){"use strict";return t.addWarningHandler(function(n){return o.notify(n)}),t.addCustomAttribute("href",function(o){var u=e.retainLang(o()),n={value:""+e.retainLang(o()),bindings:{onMount:function(n){if(!i(n).is("a")&&!i(n).is("use"))throw new Error("Cannot have an href on a non-link element.")}}};return n.bindings.onUpdate=function(n){var t=e.retainLang(o());u!==t&&(u=t,n.setAttribute("href",t))},n}),t.addCustomAttribute("onTap",function(t){return{value:"",bindings:{onMount:function(n){i(n).on("dcg-tap",t)}}}}),t.addCustomAttribute("ignoreRealClick",function(t){return{bindings:{onMount:function(n){i(n).on("click",function(n){t()&&n.preventDefault()})}}}}),t.addCustomAttribute("onTapStart",function(t){return{bindings:{onMount:function(n){i(n).on("dcg-tapstart",t)}}}}),t.addCustomAttribute("onTapMove",function(t){return{bindings:{onMount:function(n){i(n).on("dcg-tapmove",t)}}}}),t.addCustomAttribute("onTapEnd",function(t){return{bindings:{onMount:function(n){i(n).on("dcg-tapend",t)}}}}),t.addCustomAttribute("onLongHold",function(t){return{bindings:{onMount:function(n){i(n).on("dcg-longhold",t)}}}}),t.addCustomAttribute("manageFocus",function(u){return void 0===u()?{}:{bindings:{onMount:function(n){u().shouldBeFocused()&&n.focus(),n.onfocus=function(n){u().shouldBeFocused()||u().onFocusedChanged(!0,n)},n.onblur=function(n){u().shouldBeFocused()&&u().onFocusedChanged(!1,n)}},onUpdate:function(n){var t=u().shouldBeFocused(),o=document.activeElement===n;t&&!o?n.focus():o&&!t&&n.blur()},willUnmount:function(n){n.onfocus=null,n.onblur=null}}}}),t});
define('expressions/braille-input',["require","exports","tslib","dcgview","jquery"],function(require,t,s,o,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n=o.Components.Input,r=(i=o.Class,s.__extends(h,i),h.prototype.init=function(){var t;for(this.ASCIICharacters=" A1B'K2L@CIF/MSP\"E3H9O6R^DJG>NTQ,*5<-U8V.%[$+X!&;:4\\0Z7(_?W]#Y)=",this.ASCIITable=[],this.HomeRowCharacters="FDSJKL",this.charCodes=[],this.sixKeyModel={keysDown:0,stickyKeysDown:0},t=0;t<this.ASCIICharacters.length;t++)this.ASCIITable.push(this.ASCIICharacters.charCodeAt(t));for(t=0;t<this.HomeRowCharacters.length;t++)this.charCodes.push(this.HomeRowCharacters.charCodeAt(t))},h.prototype.template=function(){var t=this;return o.createElement(n,{class:this.const("dcg-braille-input dcg-do-blur"),tabindex:function(){return t.props.tabindex?t.props.tabindex():0},readonly:function(){return t.props.isStatic()?"true":void 0},autocomplete:this.const("off"),autocorrect:this.const("off"),autocapitalize:this.const("off"),spellcheck:this.const("false"),onKeydown:this.bindFn(this.onKeydown),onKeyup:this.bindFn(this.onKeyup),onInput:this.bindFn(this.props.onInput),value:function(){return t.props.value()},"aria-label":function(){return t.props.ariaLabel()||""},didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.props.didUnmount),placeholder:function(){return t.props.placeholder?t.props.placeholder():""}})},h.prototype.didMount=function(t){var o=this;this.rootNode=t,e(this.rootNode).on("focus",function(t){!0!==o.props.shouldFocus()&&o.props.onFocusedChanged(!0,t.originalEvent)}).on("blur",function(t){!1!==o.props.shouldFocus()&&o.props.onFocusedChanged(!1,t.originalEvent)}),this.props.didMount(t),this.updateFocus()},h.prototype.didUpdate=function(){this.updateFocus()},h.prototype.updateFocus=function(){this.rootNode&&(this.props.shouldFocus()&&document.activeElement!==this.rootNode&&this.rootNode.focus(),this.props.shouldFocus()||document.activeElement!==this.rootNode||this.rootNode.blur())},h.prototype.onKeydown=function(t){var o=this.charCodes.indexOf(t.which);this.props.isStatic()||!this.isSixKeyInput()||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||-1===o?this.props.onKeydown&&this.props.onKeydown(t):(this.sixKeyModel=s.__assign(s.__assign({},this.sixKeyModel),{keysDown:this.addKey(this.sixKeyModel.keysDown,o),stickyKeysDown:this.addKey(this.sixKeyModel.stickyKeysDown,o)}),t.preventDefault())},h.prototype.onKeyup=function(t){var o=this.charCodes.indexOf(t.which),e=!1;return this.props.isStatic()||!this.isSixKeyInput()||t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||-1===o?e=!0:(this.sixKeyModel=s.__assign(s.__assign({},this.sixKeyModel),{keysDown:this.removeKey(this.sixKeyModel.keysDown,o)}),0===this.sixKeyModel.keysDown&&(this.addCharacter(this.bitsToASCII(this.sixKeyModel.stickyKeysDown)),this.sixKeyModel=s.__assign(s.__assign({},this.sixKeyModel),{stickyKeysDown:0}))),e||t.preventDefault(),e},h.prototype.addKey=function(t,o){return t|1<<o},h.prototype.removeKey=function(t,o){return t&~(1<<o)},h.prototype.bitsToASCII=function(t){return String.fromCharCode(this.ASCIITable[t])},h.prototype.addCharacter=function(t){this.rootNode&&!this.props.isStatic()&&(this.rootNode.setRangeText(t,this.rootNode.selectionStart,this.rootNode.selectionEnd,"end"),this.props.onInput(this.rootNode.value))},h.prototype.isSixKeyInput=function(){return"function"==typeof this.props.sixKeyInput&&this.props.sixKeyInput()},h);function h(){return null!==i&&i.apply(this,arguments)||this}t.default=r});
define('vendor/mathquill',["require","exports","toplevel/mathquill","mathquill"],function(require,e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MQ=void 0,e.MQ=t.getInterface(1).config(i)});

define('loadcss!dcgview-helpers/static-mathquill-view', function(){});
define('dcgview-helpers/static-mathquill-view',["require","exports","tslib","dcgview","vendor/mathquill","jquery","lib/conditional_blur","loadcss!./static-mathquill-view"],function(require,t,i,a,e,l,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,h=(o=a.Class,i.__extends(u,o),u.prototype.template=function(){var i=this;return 1===this.children.length?this.children[0]:a.createElement("div",{didMount:function(t){return i.didMountMathquill(t)}})},u.prototype.didMount=function(){1===this.children.length&&this.didMountMathquill(this.findRootNode())},u.prototype.didMountMathquill=function(t){this.staticMath=e.MQ.StaticMath(t,this.props.config()),l(t).off(".mathquill").addClass("dcg-static-mathquill-view").on("dcg-tapstart",function(){s.default()}),this.updateMathquill()},u.prototype.didUpdate=function(){this.updateMathquill()},u.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex()},u.prototype.updateMathquillLatex=function(){var t;this.staticMath&&(t=this.props.latex(),this.lastLatex!==t&&(this.staticMath.latex(t),this.lastLatex=t,this.props.onReflow&&this.props.onReflow()))},u.prototype.updateMathquillAria=function(){var t;this.staticMath&&(!this.props.getAriaLabel||(t=this.props.getAriaLabel())!==this.staticMath.getAriaLabel()&&this.staticMath.setAriaLabel(t))},u);function u(){return null!==o&&o.apply(this,arguments)||this}t.default=h});

define('loadcss!lib/tooltip', function(){});
define('lib/tooltip',["require","exports","tslib","keys","dcgview","jquery","underscore","dcgview-helpers/static-mathquill-view","loadcss!./tooltip"],function(require,t,r,l,c,d,e,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tooltip=void 0;var i,s=c.Components.IfElse,h=(i=c.Class,r.__extends(n,i),n.prototype.template=function(){var e=this;return c.createElement("div",{class:function(){var t={};return t[e.getCustomClassName()]=!0,t["dcg-tooltip-positioning-container"]=!0,t["dcg-latex-tooltip-positioning-container"]=e.props.renderAsLatex(),t["dcg-tooltip-gravity-ne-se"]="ne"===e.props.gravity()||"se"===e.props.gravity(),t["dcg-tooltip-gravity-nw-sw"]="nw"===e.props.gravity()||"sw"===e.props.gravity(),t["dcg-tooltip-gravity-n-s"]="n"===e.props.gravity()||"s"===e.props.gravity(),t["dcg-tooltip-gravity-e-w"]="e"===e.props.gravity()||"w"===e.props.gravity(),t},style:function(){return{top:e.props.hitAreaRect().top+(e.props.offset().top||0)+"px",left:e.props.hitAreaRect().left+(e.props.offset().left||0)+"px",width:e.props.hitAreaRect().width+"px",height:e.props.hitAreaRect().height+"px"}}},c.createElement("div",{class:c.const("dcg-tooltip-message-container"),style:this.bindFn(this.getMessageStyle)},s(function(){return e.props.renderAsLatex()},{true:function(){return c.createElement("div",{class:function(){return{"dcg-tooltip-message":!0,"dcg-latex":!0,"dcg-sticky-not-stuck":e.props.isStickyAndNotStuck(),"dcg-tooltip-overflow":e.messageOverflows()}},style:function(){return{"max-width":e.getMaxWidth()+"px"}},didMount:function(t){e.tooltipMessage=t}},c.createElement(o.default,{config:e.const({}),latex:function(){return e.props.tooltip()}}))},false:function(){return c.createElement("div",{class:c.const("dcg-tooltip-message"),style:function(){return{background:e.getBackgroundColor(),cursor:e.props.isStickyAndNotStuck()?"pointer":"default"}}},e.props.tooltip)}})),c.createElement("div",{class:c.const("dcg-tooltip-arrow"),style:function(){return e.props.renderAsLatex()?e.getArrowWithBorderStyle():e.getSolidArrowStyle()}}))},n.prototype.getCustomClassName=function(){return this.props.class?this.props.class():""},n.prototype.messageOverflows=function(){return this.tooltipMessage&&this.tooltipMessage.getBoundingClientRect().width>=this.getMaxWidth()},n.prototype.getArrowWithBorderStyle=function(){var t=this.props.gravity(),e="10px",o={width:"8px",height:"8px",border:"1px solid #bbb",background:this.getBackgroundColor(),opacity:this.props.isStickyAndNotStuck()?".95":"1"};switch(t){case"s":return r.__assign(r.__assign({},o),{top:"100%",left:"50%","margin-top":"1px","border-right":"0","border-bottom":"0"});case"sw":return r.__assign(r.__assign({},o),{top:"100%",right:e,"margin-top":"1px","border-right":"0","border-bottom":"0"});case"se":return r.__assign(r.__assign({},o),{top:"100%",left:e,"margin-top":"1px","border-right":"0","border-bottom":"0"});case"n":return r.__assign(r.__assign({},o),{bottom:"100%",left:"50%","margin-bottom":"1px","border-left":"0","border-top":"0"});case"nw":return r.__assign(r.__assign({},o),{bottom:"100%",right:e,"margin-bottom":"1px","border-left":"0","border-top":"0"});case"ne":return r.__assign(r.__assign({},o),{bottom:"100%",left:e,"margin-bottom":"1px","border-left":"0","border-top":"0"});case"e":return r.__assign(r.__assign({},o),{top:"50%",left:"100%","margin-left":"1px","border-right":"0","border-top":"0"});case"w":return r.__assign(r.__assign({},o),{top:"50%",right:"100%","margin-right":"1px","border-left":"0","border-bottom":"0"});default:return t}},n.prototype.getSolidArrowStyle=function(){var t=this.props.gravity(),e="10px",o=this.getBackgroundColor(),r="transparent transparent "+o+" transparent",i=o+" transparent transparent transparent",s="transparent "+o+" transparent transparent",n="transparent transparent transparent "+o,p="-5px";switch(t){case"s":return{top:"100%",left:"50%",border:"5px solid transparent","border-color":r,"margin-top":p,"margin-left":p};case"sw":return{top:"100%",right:e,border:"5px solid transparent","border-color":r,"margin-top":p,"margin-left":p};case"se":return{top:"100%",left:e,border:"5px solid transparent","border-color":r,"margin-top":p,"margin-left":p};case"n":return{bottom:"100%",left:"50%",border:"5px solid transparent","border-color":i,"margin-bottom":p,"margin-left":p};case"nw":return{bottom:"100%",right:e,border:"5px solid transparent","border-color":i,"margin-bottom":p,"margin-left":p};case"ne":return{bottom:"100%",left:e,border:"5px solid transparent","border-color":i,"margin-bottom":p,"margin-left":p};case"e":return{top:"50%",left:"100%",border:"5px solid transparent","border-color":s,"margin-left":"-5px","margin-top":p};case"w":return{top:"50%",right:"100%",border:"5px solid transparent","border-color":n,"margin-right":p,"margin-top":p};default:return t}},n.prototype.getBackgroundColor=function(){return this.props.renderAsLatex()?"#fff":this.props.isStickyAndNotStuck()?"#666":"#000"},n.prototype.getMaxWidth=function(){var t=this.props.gravity(),e=this.props.hitAreaRect().left+(this.props.offset().left||0),o=e+this.props.hitAreaRect().width,r=.5*this.props.hitAreaRect().width+e,i=window.innerWidth-5;switch(t){case"se":case"ne":case"e":return i-e;case"sw":case"nw":case"w":return o-5;case"s":case"n":return 2*Math.min(i-r,r-5);default:return t}},n.prototype.getMessageStyle=function(){var t=this.props.hitAreaRect(),e=this.props.gravity();switch(e){case"s":return{top:"100%",transform:"translate(-50%, 0)",left:.5*t.width+"px","margin-top":"5px","text-align":"center"};case"sw":return{top:"100%",right:"0","margin-top":"5px","text-align":"right"};case"se":return{top:"100%","margin-top":"5px","text-align":"left"};case"n":return{bottom:"100%",transform:"translate(-50%, 0)",left:.5*t.width+"px","margin-bottom":"5px","text-align":"center"};case"nw":return{bottom:"100%",right:"0","margin-bottom":"5px","text-align":"right"};case"ne":return{bottom:"100%","margin-bottom":"5px","text-align":"left"};case"e":return{transform:"translate(0, -50%)",left:"100%",top:.5*t.height+"px","margin-left":"5px","text-align":"left"};case"w":return{transform:"translate(0, -50%)",right:"100%",top:.5*t.height+"px","margin-right":"5px","text-align":"right"};default:return e}},n);function n(){return null!==i&&i.apply(this,arguments)||this}var p,a=(p=c.Class,r.__extends(u,p),u.prototype.init=function(){this.uuid=e.uniqueId(),this.isMounted=!0},u.prototype.template=function(){var e=this;return c.createElement("div",{class:c.const("dcg-tooltip-hit-area-container"),handleevent:c.const("true"),didMount:function(t){e.hitAreaNode=t,e.setupEventListeners(e.hitAreaNode)},onTap:function(){e.shouldHideOnTargetClick()?e.hideTooltip():e.shouldShowOnTargetClick()?e.showTooltip():e.shouldStickOnTargetClick()&&(e.isStuck?(e.clearTimeouts(),e.hideTooltip()):(e.showTooltip(),e.stickTooltip()))}},this.children)},u.prototype.didUpdate=function(){this.updateTooltip()},u.prototype.updateTooltip=function(){var t,e,o,r,i,s,n;this.wrapperRef&&(this.props.tooltip()?(t=this.hitAreaNode.getBoundingClientRect(),e=this.wrapperRef.elt.getBoundingClientRect(),r=(o=this.wrapperRef).originalTop,i=o.originalLeft,s=t.top-e.top,n=t.left-e.left,3<Math.abs(s-r)||3<Math.abs(n-i)?this.hideTooltip():this.wrapperRef.view.update()):this.hideTooltip())},u.prototype.handleShowEvent=function(t){var e;this.props.disabled&&this.props.disabled()||(e=this.props.delay?this.props.delay():500,this.clearTimeouts(),this.showTooltipTimeout=setTimeout(t,e))},u.prototype.handleHideEvent=function(){this.clearTimeouts(),this.hideTooltipTimeout=setTimeout(this.bindFn(this.hideTooltip),150)},u.prototype.setupEventListeners=function(e){var o=this;d(e).on("tipsyshow",function(t){t.target===e&&o.handleShowEvent(function(){o.showTooltip()})}).on("tipsyhide",function(t){t.target!==e||o.isStuck||o.handleHideEvent()}),this.shouldShowOnTargetClick()&&this.setUpHideOnExternalMousedown()},u.prototype.willUnmount=function(){this.clearTimeouts(),this.isMounted=!1,this.hideTooltip()},u.prototype.setUpHideOnExternalMousedown=function(){var e=this;d(document).on("mousedown.dcg-tooltip-"+this.uuid+" touchstart.dcg-tooltip-"+this.uuid+" pointerdown.dcg-tooltip-"+this.uuid,function(t){e.wrapperRef&&(d(t.target).closest(e.hitAreaNode).length||d(t.target).closest(e.wrapperRef.elt).length||e.hideTooltip())})},u.prototype.stickTooltip=function(){this.isMounted&&this.wrapperRef&&(this.isStuck||(this.setUpHideOnExternalMousedown(),this.isStuck=!0,this.updateTooltip()))},u.prototype.clearTimeouts=function(){clearTimeout(this.showTooltipTimeout),clearTimeout(this.hideTooltipTimeout)},u.prototype.showTooltip=function(){var t,e,o,r,i,s,n,p,a=this;this.isMounted&&(this.wrapperRef||this.props.tooltip()&&(t=this.hitAreaNode.getBoundingClientRect(),(e=document.createElement("div")).className="dcg-tooltip-mount-pt",d(this.hitAreaNode).closest(".dcg-tap-container")[0].appendChild(e),o=e.getBoundingClientRect(),r=t.left-o.left,i=t.top-o.top,s={tooltip:this.props.tooltip,class:this.props.class,isStickyAndNotStuck:function(){return a.shouldStickOnTargetClick()&&!a.isStuck},offset:function(){return a.props.offset?a.props.offset():{}},gravity:function(){return a.props.gravity?a.props.gravity():"s"},renderAsLatex:function(){return!!a.props.renderAsLatex&&a.props.renderAsLatex()},hitAreaRect:function(){return{top:i||0,left:r||0,width:t.width||0,height:t.height||0}}},this.setupEventListeners(e),d(e).on("dcg-tap",function(){a.shouldStickOnTargetClick()&&a.stickTooltip()}),n=c.mountToNode(h,e,s),d(document).on("keydown.dcg-tooltip-"+this.uuid,function(t){l.lookup(t)===l.ESCAPE&&a.hideTooltip()}),p=function(){return a.updateTooltip()},window.addEventListener("scroll",p,!0),this.wrapperRef={elt:e,view:n,originalLeft:r,originalTop:i,onScroll:p}))},u.prototype.hideTooltip=function(){this.clearTimeouts(),this.wrapperRef&&(this.isStuck=!1,d(document).off(".dcg-tooltip-"+this.uuid),window.removeEventListener("scroll",this.wrapperRef.onScroll,!0),c.unmountFromNode(this.wrapperRef.elt),this.wrapperRef.elt.parentNode&&this.wrapperRef.elt.parentNode.removeChild(this.wrapperRef.elt),this.wrapperRef=void 0)},u.prototype.shouldStickOnTargetClick=function(){return!!this.props.targetClickBehavior&&"stick"===this.props.targetClickBehavior()},u.prototype.shouldShowOnTargetClick=function(){return!!this.props.targetClickBehavior&&"show"===this.props.targetClickBehavior()},u.prototype.shouldHideOnTargetClick=function(){return!this.props.targetClickBehavior||"hide"===this.props.targetClickBehavior()},u);function u(){return null!==p&&p.apply(this,arguments)||this}t.Tooltip=a});
define('lib/abraham-helpers',["require","exports","abraham"],function(require,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.brailleToLatex=e.latexToBraille=void 0,e.latexToBraille=function(e,r){return"nemeth"===r?o.latexToNemeth(e):"ueb"===r?o.latexToUeb(e):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}},e.brailleToLatex=function(e,r){return"nemeth"===r?o.nemethToLatex(e):"ueb"===r?o.uebToLatex(e):{isError:!0,error:"Braille mode should be 'nemeth' or 'ueb'"}}});

define('loadcss!dcgview-helpers/mathquill-view', function(){});
define('dcgview-helpers/mathquill-view',["require","exports","tslib","keys","browser","dcgview","vendor/mathquill","jquery","./static-mathquill-view","loadcss!./mathquill-view"],function(require,o,i,n,s,e,r,p,a){"use strict";Object.defineProperty(o,"__esModule",{value:!0}),o.EXPRESSION_SIZE_LIMIT=void 0;var l=e.Components.If;o.EXPRESSION_SIZE_LIMIT=100;var t,d=(t=e.Class,i.__extends(h,t),h.prototype.template=function(){var t=this;return 1===this.children.length?this.children[0]:e.createElement("div",{class:e.const("dcg-mq-container")},e.createElement(l,{predicate:function(){return 0<t.getPlaceholder().trim().length}},function(){return e.createElement("span",{class:e.const("dcg-mq-placeholder")},e.createElement(a.default,{config:function(){return t.props.config()},latex:function(){return t.getPlaceholder()}}))}),e.createElement("div",{class:function(){return{"dcg-math-field":!0,"dcg-no-fadeout":t.props.noFadeout&&t.props.noFadeout(),"dcg-invalid":t.props.hasError(),"dcg-focus":t.props.isFocused()}},didMount:function(e){return t.didMountMathquill(e)},"data-dcg-label":function(){return t.props.dataLabelAttributeValue?t.props.dataLabelAttributeValue():void 0}}))},h.prototype.didMount=function(){1===this.children.length&&this.didMountMathquill(this.findRootNode())},h.prototype.willUnmount=function(){this.$mathField.off(".view"),this.mathField=void 0},h.prototype.getPlaceholder=function(){return!this.props.placeholder||this.props.isFocused()||this.props.latex()?"":this.props.placeholder()},h.prototype.didMountMathquill=function(e){var a=this,t=i.__assign(i.__assign({},this.props.config()),{handlers:{reflow:function(e){a.props.onReflow&&a.mathField&&a.props.onReflow(e)}},onCut:function(){a.mathField&&a.props.onUserChangedLatex(a.mathField.latex())},onPaste:function(){a.mathField&&a.props.onUserChangedLatex(a.mathField.latex())},overrideTypedText:function(e){a.mathField&&a.viewCanAcceptText(e)&&(a.props.onUserTypedText?a.props.onUserTypedText(e):(a.mathField.typedText(e),a.props.onUserChangedLatex(a.mathField.latex())))},overrideKeystroke:function(e,t){if("Backspace"===e&&t.preventDefault(),a.mathField){if("Spacebar"===e&&a.props.disableSpace&&a.props.disableSpace())return t.preventDefault();var i,o;t.originalEvent&&("Up"!==(i=n.lookup(t.originalEvent))&&"Down"!==i&&"Left"!==i&&"Right"!==i&&"Esc"!==i||(o=[],t.ctrlKey&&o.push("Ctrl"),t.metaKey&&o.push("Meta"),t.altKey&&o.push("Alt"),t.shiftKey&&o.push("Shift"),e=o.length?(o.push(i),o.join("-")):i)),a.props.onUserPressedKey?a.props.onUserPressedKey(e,t):(a.mathField.keystroke(e,t),a.props.onUserChangedLatex(a.mathField.latex()))}}});this.props.needsSystemKeypad&&this.props.needsSystemKeypad()&&(t.substituteTextarea=function(){return p('<textarea autocorrect="off" autocapitalize="none" spellcheck="false" autocomplete="off">')[0]}),this.$mathField=p(e),this.mathField=r.MQ.MathField(e,t),e._mqMathFieldInstance=this.mathField,(e._mqViewInstance=this).$mathField.on("focusin.view focusout.view",function(e){return a.onFocusEvent(e)}).on("paste.view",function(e){return a.onPasteEvent(e)}),(s.IS_IOS||s.IS_ANDROID)&&this.$mathField.on("keypress.view",function(e){return a.onKeypressEvent(e)}),this.hookupMQTapTouch(),this.updateMathquill()},h.prototype.didUpdate=function(){this.updateMathquill()},h.prototype.updateMathquill=function(){this.updateMathquillAria(),this.updateMathquillLatex(),this.updateMathquillFocused(),this.updateMathquillPostLabel()},h.prototype.onFocusEvent=function(e){var t=this.isFocused();t!==this.shouldBeFocused()&&this.props.onFocusedChanged(t,e)},h.prototype.onPasteEvent=function(e){var t="",i=window.clipboardData,o=e.originalEvent;i&&i.getData?t=i.getData("Text"):o&&o.clipboardData&&o.clipboardData.getData&&(t=o.clipboardData.getData("text/plain"));var a=this.viewCanAcceptText(t);return!a&&this.props.onExpressionSizeExceeded&&this.props.onExpressionSizeExceeded(),a},h.prototype.viewCanAcceptText=function(e){return h.canAcceptText(this.mathField,this.props.capExpressionSize(),e)},h.canAcceptText=function(e,t,i){return!!e&&(!t||e.latex().length+i.length<=o.EXPRESSION_SIZE_LIMIT)},h.prototype.onKeypressEvent=function(e){var t;e.stopPropagation(),e.preventDefault(),!this.mathField||(t=n.lookupChar(e.originalEvent))&&this.viewCanAcceptText(t)&&(this.props.onUserTypedText?this.props.onUserTypedText(t):(this.mathField.typedText(t),this.props.onUserChangedLatex(this.mathField.latex())))},h.prototype.hookupMQTapTouch=function(){var o=this;this.$mathField.on("dcg-tap.view",function(e){var t,i;"touch"===e.device&&o.mathField&&(t=e.originalEvent.changedTouches[0],o.mathField.clickAt(t.clientX,t.clientY,t.target),o.isFocused()||o.mathField.focus(),i=void 0,setTimeout(function(){i=Date.now()},0),o.mathField.ignoreNextMousedown(function(){return void 0===i||Date.now()-i<500}))})},h.prototype.updateMathquillAria=function(){var e;!this.mathField||(e=this.props.getAriaLabel())!==this.mathField.getAriaLabel()&&this.mathField.setAriaLabel(e)},h.prototype.updateMathquillPostLabel=function(){this.mathField&&this.mathField.setAriaPostLabel(this.props.getAriaPostLabel(),this.props.hasError()?5e3:1e3)},h.prototype.updateMathquillLatex=function(){var e=this.props.latex();this.mathField&&this.lastLatexProp!==e&&(this.props.capExpressionSize()&&e.length>o.EXPRESSION_SIZE_LIMIT||(this.lastLatexProp=e,this.mathField.latex()!==e&&this.mathField.latex(e)))},h.prototype.updateMathquillFocused=function(){var e,t;this.mathField&&(e=this.isFocused(),(t=this.shouldBeFocused())&&t!==this.wasFocusedLastUpdate&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.mathField.select(),e!==(this.wasFocusedLastUpdate=t)&&(t?this.mathField.focus():this.mathField.blur()))},h.prototype.isFocused=function(){return!(!document.activeElement||!p(document.activeElement).closest(this.$mathField).length)},h.prototype.shouldBeFocused=function(){return this.props.isFocused()},h.getFocusedMathquill=function(){if(document.activeElement){var e=p(document.activeElement).closest(".dcg-mq-editable-field")[0];return e?e._mqMathFieldInstance:void 0}},h.getMQViewInstance=function(e){var t=e.el();return t?t._mqViewInstance:void 0},h.applyArrowKeyAndReturnIfWasAtBounds=function(e,t,i){var o=p(e.el()),a=o.find(".dcg-mq-selection"),n=1===a.length&&a.parent().parent()[0]===o[0]&&1===a.parent().children().length;if(("Up"===t||"Down"===t)&&n)return e.keystroke(t,i),!0;var s=o.find(".dcg-mq-cursor")[0];if(!s)return e.keystroke(t,i),!1;var r=s.previousSibling||s.parentElement;return e.keystroke(t,i),r===(s.previousSibling||s.parentElement)},h.simulateKeypress=function(e,t){var i=h.getMQViewInstance(e);i&&(i.props.onUserPressedKey?i.props.onUserPressedKey(t):(e.keystroke(t),i.props.onUserChangedLatex(e.latex())))},h.simulateUserChangedLatex=function(e){var t=h.getMQViewInstance(e);t&&t.mathField&&t.props.onUserChangedLatex(t.mathField.latex())},h.handleKeystrokeAndDecideIfSpecialEvent=function(e,t,i){return"Enter"===t||"Delete"===t&&""===e.latex()||"Backspace"===t&&""===e.latex()||("Up"===t||"Down"===t||"Left"===t||"Right"===t?h.applyArrowKeyAndReturnIfWasAtBounds(e,t,i):(e.keystroke(t,i),!1))},h);function h(){var e=null!==t&&t.apply(this,arguments)||this;return e.lastLatexProp="",e.wasFocusedLastUpdate=!1,e}o.default=d});

define('loadcss!Abraham', function(){});

define('loadcss!dcgview-helpers/mathquill-braille-wrapper', function(){});
define('dcgview-helpers/mathquill-braille-wrapper',["require","exports","tslib","jquery","abraham","dcgview","../expressions/braille-input","../lib/tooltip","../lib/abraham-helpers","dcgview-helpers/mathquill-view","loadcss!Abraham","loadcss!./mathquill-braille-wrapper"],function(require,t,e,r,i,l,o,n,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.brailleInputIsEmpty=t.getFocusedBrailleElement=void 0;var p,u=l.Components.If,c=(p=l.Class,e.__extends(h,p),h.prototype.init=function(){this.controller=this.props.controller(),this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.currentBrailleMode=this.controller.getBrailleMode(),this.hasTranslationError=!1,this.currentLatex=this.props.latex()},h.prototype.isFocused=function(){return this.props.brailleShouldFocus()},h.prototype.isStatic=function(){return!!this.props.isStatic&&this.props.isStatic()},h.prototype.hasError=function(){return!!this.props.hasError&&this.props.hasError()},h.prototype.willUpdate=function(){var t,e;this.isFocused()&&this.currentLatex===this.props.latex()||(t=this.currentLatex!==this.props.latex(),this.currentLatex=this.props.latex(),((e=this.controller.getBrailleMode())!==this.currentBrailleMode&&"none"!==e||!this.hasTranslationError||t||this.isStatic())&&(this.currentBrailleValue=this.getBrailleFromLatex(this.props.latex()),this.hasTranslationError=!1),this.currentBrailleMode=e)},h.prototype.onBrailleInput=function(t){var e;this.props.onBrailleInput&&(e=this.getLatexFromBraille(t),this.hasTranslationError=e.isError,!e.isError&&this.controller.getCapExpressionSize()&&e.value.length>s.EXPRESSION_SIZE_LIMIT?this.props.onExpressionSizeExceeded?this.props.onExpressionSizeExceeded():this.controller.dispatch({type:"expression-size-exceeded"}):(this.currentBrailleValue=t,e.isError||(this.currentLatex=e.value,this.props.onBrailleInput(e.value))))},h.prototype.getBrailleFromLatex=function(t){var e=a.latexToBraille(t,this.controller.getBrailleMode());return e.isError?"":i.UnicodeBraille.toExpandedBrailleAscii(e.value)},h.prototype.getLatexFromBraille=function(t){return a.brailleToLatex(i.UnicodeBraille.coerceToSixDotCells(t),this.controller.getBrailleMode())},h.prototype.getBrailleLabel=function(t){return this.getBrailleFromLatex(t.replace(/\s/,"\\ "))},h.prototype.shouldShowBraille=function(){var t=this.controller.getBrailleMode();return"nemeth"===t||"ueb"===t},h.prototype.isOverflowingLeft=function(){return!!this.brailleInput&&0<this.brailleInput.scrollLeft},h.prototype.isOverflowingRight=function(){if(!this.brailleInput)return!1;var t=this.brailleInput.getBoundingClientRect().width,e=this.brailleInput.scrollWidth;return t+this.brailleInput.scrollLeft+2<e},h.prototype.didMountBrailleInput=function(t){this.brailleInput=t},h.prototype.didUnmountBrailleInput=function(){this.brailleInput=void 0},h.prototype.getTooltipGravity=function(){var t=this.props.tooltipOptions&&this.props.tooltipOptions();return t&&t.gravity?t.gravity:"se"},h.prototype.getTooltipDelay=function(){var t=this.props.tooltipOptions&&this.props.tooltipOptions();return t&&t.delay?t.delay:0},h.prototype.handleBrailleFocusChanged=function(t,e){this.props.onBrailleFocusedChanged&&this.props.onBrailleFocusedChanged(t,e),this.brailleInput&&(t&&this.props.selectOnFocus&&this.props.selectOnFocus()&&this.brailleInput.select(),this.isStatic()&&this.brailleInput.scrollTo(0,0))},h.prototype.getTooltipText=function(){var t=this.props.placeholder&&!this.isFocused()?this.props.placeholder():"";return this.props.latex()||t},h.prototype.template=function(){var t=this;return l.createElement("div",{class:l.const("dcg-mathquill-wrapper")},l.createElement(u,{predicate:function(){return t.shouldShowBraille()}},function(){return l.createElement("div",{class:function(){return{"dcg-mathquill-braille":!0,"dcg-focus":t.props.brailleShouldFocus&&t.props.brailleShouldFocus(),"dcg-invalid":t.hasError(),"dcg-mathquill-static-braille":t.isStatic(),"dcg-mathquill-braille-overflow-left":t.isOverflowingLeft(),"dcg-mathquill-braille-overflow-right":t.isOverflowingRight()}},"data-dcg-limit":function(){return t.props.dataDCGLimit?t.props.dataDCGLimit():void 0},"data-dcg-label":function(){return t.props.dataLabelAttributeValue?t.props.dataLabelAttributeValue():void 0}},l.createElement(n.Tooltip,{class:t.const("dcg-mathquill-braille-tooltip"),renderAsLatex:t.const(!0),tooltip:function(){return t.getTooltipText()},gravity:t.bindFn(t.getTooltipGravity),delay:t.bindFn(t.getTooltipDelay),targetClickBehavior:t.const("show")},l.createElement(o.default,{ariaLabel:function(){return t.props.ariaLabel?t.getBrailleLabel(t.props.ariaLabel()):""},didMount:t.bindFn(t.didMountBrailleInput),didUnmount:t.bindFn(t.didUnmountBrailleInput),onFocusedChanged:t.bindFn(t.handleBrailleFocusChanged),shouldFocus:t.props.brailleShouldFocus||t.const(!1),onKeydown:t.props.onBrailleKeydown,onInput:t.bindFn(t.onBrailleInput),sixKeyInput:function(){return t.controller.getSixKeyInput()},value:function(){return t.currentBrailleValue},placeholder:function(){return t.props.placeholder?t.getBrailleFromLatex(t.props.placeholder()):""},tabindex:function(){return t.props.tabindex?t.props.tabindex():0},isStatic:t.bindFn(t.isStatic)})))}),l.createElement("div",{class:l.const("dcg-typeset-math"),style:function(){return{display:t.shouldShowBraille()?"none":void 0}}},this.children))},h);function h(){return null!==p&&p.apply(this,arguments)||this}t.default=c,t.getFocusedBrailleElement=function(){if(document.activeElement&&r(document.activeElement).hasClass("dcg-braille-input"))return document.activeElement},t.brailleInputIsEmpty=function(t){return!t||""===r(t).val()}});
define('expressions/list_move_controller',["require","exports","core/lib/dragmode","core/lib/number-to-latex","core/lib/label","lib/rounding","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/list","graphing-calc/models/image","core/math/poi","core/math/functions"],function(require,e,P,T,B,G,j,M,s,L,C,O){"use strict";function R(e,t){return{left:e.x-t,right:e.x+t,top:e.y+t,bottom:e.y-t}}function N(e,t){switch(t){case P.DragMode.X:return 0===e;case P.DragMode.Y:return 1===e;case P.DragMode.XY:return!0;default:return!1}}function X(e,t,i){for(var r=["x","y","width","height"],a={x:1/0,y:1/0,width:1/0,height:1/0},o={x:-1/0,y:-1/0,width:-1/0,height:-1/0},n=0,l=[{x:t.left,y:t.bottom},{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.right,y:t.bottom}];n<l.length;n++)for(var d=function(e,t,i){if(0===i[0]&&0===i[1])return{x:t.x,y:t.y,width:e.width,height:e.height};var r=Math.cos(e.radianAngle),a=Math.sin(e.radianAngle),o=t.x-e.x,n=t.y-e.y;if(0===i[0])return{x:e.x,y:e.y,width:e.width,height:2*i[1]*(r*n+a*o)};if(0===i[1])return{x:e.x,y:e.y,width:2*i[0]*(r*o-a*n),height:e.height};var l=2*(e.width*i[0]*(r*o-a*n)+e.height*i[1]*(a*o+r*n))/(e.width*e.width+e.height*e.height);return{x:e.x,y:e.y,width:l*e.width,height:l*e.height}}(e,l[n],i),s=0,g=r;s<g.length;s++){var h=g[s];a[h]=Math.min(a[h],d[h]),o[h]=Math.max(o[h],d[h])}return{min:a,max:o}}function Y(e){return void 0===e?NaN:e[0]}function w(l,e,t,d,s){var g=e.formula;if(!g||!g.move_strategy)return!1;var i,r,a,o,n,h,m,p,u=e.reconciledDragMode||P.DragMode.NONE,c=!1,f=d.closestPointOnScreen(t),y=d.pixelsToMath.mapRect(R(f,.5)),x=[{min:y.left,max:y.right},{min:y.top,max:y.bottom}];"updateCoordinate"!==g.move_strategy[0].type&&"updateCoordinate"!==g.move_strategy[1].type||(j.setLatex(e,(r=x,a=u,o=(i=g).assignment?B.identifierToLatex(i.assignment)+"=":"",n=G.shortestDecimalBetween(r[0].min,r[0].max),h=G.shortestDecimalBetween(r[1].min,r[1].max),m="updateCoordinate"===i.move_strategy[0].type&&N(0,a),p="updateCoordinate"===i.move_strategy[1].type&&N(1,a),o+"\\left("+(m?T.default(n):i.move_strategy[0].inputString)+","+(p?T.default(h):i.move_strategy[1].inputString)+"\\right)")),c=!0);for(var v,b,M,w,I,S,D,_=0;_<2;_++)!function(){return("updateSlider"===(v=g.move_strategy[_]).type||"updateSliderNonlinear"===v.type)&&N(_,u)&&(b=l.getItemModel(v.id))&&"expression"===b.type&&(M=b.latex,(w=s&&s[_])?j.adjustSliderByKeyboard(b,w):"updateSlider"===v.type?(I=v.coefficients[0],S=v.coefficients[1],D=G.shortestDecimalBetween(S*x[_].min+I,S*x[_].max+I),j.adjustSliderByMovablePoint(b,D)):"updateSliderNonlinear"===v.type&&(v.compiled.fn||O.rehydrateCompiledFunction(v.compiled),o=v.compiled.fn,e=v.initialValue,t=v.min,i=v.max,r=[f.x,f.y],(a=C.findLocalClosestPointOnParametric(function(e){var t=o(e),i=t[0],r=t[1],a=d.mathToPixels.mapPoint({x:i,y:r});return[i=a.x,r=a.y]},r,e,t,i,1))&&(n=G.shortestDecimalBetween(a[0],a[1]),void 0!==t&&n<t&&(n=t),void 0!==i&&i<n&&(n=i),j.adjustSliderByMovablePoint(b,n))),b.latex!==M&&(c=!0));var o,e,t,i,r,a,n}();return c}Object.defineProperty(e,"__esModule",{value:!0}),e.onMovePoint=e.onStopMovingPoint=e.onStartMovingPoint=void 0,e.onStartMovingPoint=function(e,t,i){if(i.tableInfo){s.setSelected(t,void 0);var r=e.getItemModel(i.tableInfo.tableId);if(!r||"table"!==r.type)return;M.setIsDraggingOnGrapher(r,!0)}else{var a=e.getItemModel(i.sketch.id);if(!a||"expression"!==a.type&&"image"!==a.type)return;if("image"!==a.type&&s.setSelected(t,void 0),!a.formula||!a.formula.move_strategy)return;for(var o=a.formula.move_strategy,n=0;n<o.length;n++)if("updateCoordinate"===o[n].type)"image"===a.type?L.setIsDraggingOnGrapher(a,!0):"expression"===a.type&&j.setIsDraggingOnGrapher(a,!0);else if("updateSlider"===o[n].type||"updateSliderNonlinear"===o[n].type){var l,d=e.getItemModel(o[n].id);if(!d||"expression"!==d.type)continue;if((l="expression"===a.type?a.reconciledDragMode:void 0)===P.DragMode.NONE||0===n&&l===P.DragMode.Y||1===n&&l===P.DragMode.X)continue;j.setSliderDragging(d,!0)}}},e.onStopMovingPoint=function(e,t){if(t.tableInfo){var i=e.getItemModel(t.tableInfo.tableId);if(!i||"table"!==i.type)return;M.setIsDraggingOnGrapher(i,!1)}else{var r=e.getItemModel(t.sketch.id);if(r&&("expression"===r.type||"image"===r.type)&&r.formula&&r.formula.move_strategy){var a=r.formula.move_strategy;if("updateSliderNonlinear"===a[0].type){if(!(o=e.getItemModel(a[0].id))||"expression"!==o.type)return;j.setSliderDragging(o,!1)}for(var o,n=0;n<a.length;n++)if("image"===r.type?L.setIsDraggingOnGrapher(r,!1):"expression"===r.type&&j.setIsDraggingOnGrapher(r,!1),"updateSlider"===a[n].type||"updateSliderNonlinear"===a[n].type){if(!(o=e.getItemModel(a[n].id))||"expression"!==o.type)continue;j.setSliderDragging(o,!1)}}}},e.onMovePoint=function(e,t,i,r,a){if(t.tableInfo)return o=e,l=i,d=r,u=(n=t).tableInfo.tableId,c=n.tableInfo.rowIndex,f=n.tableInfo.columnId,y=n.tableInfo.dragX,x=n.tableInfo.dragY,!(v=o.getItemModel(u))||"table"!==v.type||(s=M.getColumnModel(v,f))&&(g=d.closestPointOnScreen(l),h=d.pixelsToMath.mapRect(R(g,.5)),m={x:T.default(G.shortestDecimalBetween(h.left,h.right)),y:T.default(G.shortestDecimalBetween(h.top,h.bottom))},y&&M.setCellLatex(v,{row:c+1,column:0},m.x),x&&(p=s.index,M.setCellLatex(v,{row:c+1,column:p},m.y))),!0;var o,n,l,d,s,g,h,m,p,u,c,f,y,x,v,b=e.getItemModel(t.sketch.id);return!!b&&("image"===b.type?function(e,t,i,r,a){var o=t.formula;if(!o||!o.move_strategy)return!1;var n=o.dimensions,l={x:Y(n.x),y:Y(n.y),width:Y(n.width),height:Y(n.height),radianAngle:Y(n.radianAngle)},d=i.scaleFactor,s=0!==d[0]&&0!==d[1],g=a.closestPointOnScreen(r),h=X(l,a.pixelsToMath.mapRect(R(g,s?.05:.5)),d),m=a.mathToPixels.mapRect({left:l.x-.5*l.width,right:l.x+.5*l.width,top:l.y-.5*l.height,bottom:l.y+.5*l.height}),p=Math.abs(m.right-m.left),u=Math.abs(m.bottom-m.top),c=a.mathToPixels.mapRect({left:h.min.x-.5*h.min.width,right:h.min.x+.5*h.min.width,top:h.min.y-.5*h.min.height,bottom:h.min.y+.5*h.min.height}),f=Math.abs(c.right-c.left),y=Math.abs(c.bottom-c.top);if(f<p&&f<1||y<u&&y<1)return!1;for(var x=["width","height","x","y"],v=!1,b=0;b<x.length;b++){var M=x[b],w=o.move_strategy[b];switch(w.type){case"updateCoordinate":var I,S,D=G.shortestDecimalBetween(h.min[M],h.max[M]),_=T.default(D);switch(M){case"width":case"height":L.setMQAttribute(t,M,_);break;case"x":S="updateCoordinate"===o.move_strategy[3].type?(I=G.shortestDecimalBetween(h.min.y,h.max.y),"\\left("+_+","+T.default(I)+"\\right)"):"\\left("+_+","+o.move_strategy[3].inputString+"\\right)",L.setMQAttribute(t,"center",S);break;case"y":"updateCoordinate"!==o.move_strategy[2].type&&(S="\\left("+o.move_strategy[2].inputString+","+_+"\\right)",L.setMQAttribute(t,"center",S));break;default:return M}v=!0;break;case"updateSlider":var P=e.getItemModel(w.id);if(!P||"expression"!==P.type)continue;var B=w.coefficients[0],C=w.coefficients[1],O=C*h.min[M]+B,N=C*h.max[M]+B,k=G.shortestDecimalBetween(O,N),A=P.latex;j.adjustSliderByMovablePoint(P,k),P.latex!==A&&(v=!0)}}return v}(e,b,t,i,r):"expression"===b.type&&w(e,b,i,r,a))}});
define('main/blank_state',["require","exports","core/graphing-calc/migrate-state"],function(require,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BLANK_STATE=void 0,e.BLANK_STATE={version:r.currentVersion,randomSeed:"",graph:{viewport:{xmin:-10,ymin:-13.25,xmax:10,ymax:13.25}},expressions:{list:[{id:"1",type:"expression"}]}},e.default=e.BLANK_STATE});
define('expressions/measure-expressions',["require","exports","jquery"],function(require,t,l){"use strict";function a(t){for(var e=[],n=0,r=t.getAllItemModels();n<r.length;n++){var i=r[n],o=t.getItemRootNodeById(i.id);o&&e.push(o)}return e}function u(t,e){for(var n=a(t),r=0,i=n.length-1;r<=i;){var o=r+Math.floor((i-r)/2),g=n[o],l=g.getBoundingClientRect();if(l.top>e)i=o-1;else{if(!(l.bottom<e))return g;r=o+1}}}function g(t){var e=f(t);if(e){var n=function(t,e){for(var n,r=a(t),i=0,o=r.length-1;i<=o;){var g=i+Math.floor((o-i)/2),l=r[g];l.getBoundingClientRect().top>e?(o=g-1,n=l):i=g+1}return n}(t,e.top-2);if(n)return l(n).attr("expr-id")}}function i(t){return t.find$(".dcg-exppanel")[0]}function n(t){var e=i(t);if(e)return l(e)}function f(t){var e=i(t);if(e)return e.getBoundingClientRect()}Object.defineProperty(t,"__esModule",{value:!0}),t.getDragContainerHeight=t.getExpListHeight=t.getExppanelScrolledTop=t.getExppanelRect=t.getOuterExppanelRect=t.getExppanelSelector=t.getExppanelElt=t.getFirstFullyVisibleItemId=t.getLastVisibleItemId=t.getFirstVisibleItemId=void 0,t.getFirstVisibleItemId=function(t,e){var n=f(t);if(n){if(e){var r=t.getItemRootNodeById(e);if(r){var i=r.getBoundingClientRect();if(0<i.height&&i.top<=n.top&&i.bottom>=n.top)return e}}var o=u(t,n.top);return o?l(o).attr("expr-id"):g(t)}},t.getLastVisibleItemId=function(t,e){var n=f(t);if(n){var r=function(t){for(var e=t.getAllItemModels(),n=e.length-1;0<=n;n--){var r=e[n];if(r.dcgView)return r.id}}(t);if(r){if(e){var i=t.getItemRootNodeById(e);if(i){var o=i.getBoundingClientRect();if(0<o.height&&o.top<=n.bottom&&o.bottom>=n.bottom)return e;if(e===r&&o.bottom<=n.bottom)return e}}var g=u(t,n.bottom);return g&&l(g).attr("expr-id")||r}}},t.getFirstFullyVisibleItemId=g,t.getExppanelElt=i,t.getExppanelSelector=n,t.getOuterExppanelRect=function(t){var e=t.find$(".dcg-exppanel-outer")[0];if(e)return e.getBoundingClientRect()},t.getExppanelRect=f,t.getExppanelScrolledTop=function(t){var e=i(t);if(e){var n=e.getBoundingClientRect(),r=e.scrollTop;return n.top-r}},t.getExpListHeight=function(t){var e=t.find$(".dcg-expressionlist");if(1===e.length)return e.height()},t.getDragContainerHeight=function(t){var e=n(t);return e?e.find(".dcg-drag-container").height():0}});
define('animation-frame-src',['require'],function(require){var o=0;return window.requestAnimationFrame&&window.cancelAnimationFrame?{requestAnimationFrame:window.requestAnimationFrame.bind(window),cancelAnimationFrame:window.cancelAnimationFrame.bind(window)}:{requestAnimationFrame:function(n,i){var e=(new Date).getTime(),a=Math.max(0,16-(e-o)),t=window.setTimeout(function(){n(e+a)},a);return o=e+a,t},cancelAnimationFrame:window.clearTimeout.bind(window)}});
define('lib/animation-frame',["require","exports","animation-frame-src"],function(require,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cancelAnimationFrame=e.requestAnimationFrame=void 0,e.requestAnimationFrame=n.requestAnimationFrame,e.cancelAnimationFrame=n.cancelAnimationFrame});
define('jquery.handleevent',['require','jquery'],function(require){var a=require("jquery"),i="_*_";a.Event.prototype.wasHandled=function(t){t=t||i;var e=this.originalEvent,n=e&&e.handledBy;if(n&&n[t])return!0;if(t!==i)return!1;var r=a(this.target).closest("[handleEvent]");return!(!r.length||r[0]===this.currentTarget)&&"false"!==r.attr("handleEvent")},a.Event.prototype.handle=function(t){t=t||i;var e=this.originalEvent;e&&((e.handledBy||(e.handledBy={}))[t]=!0)}});
define('expressions/dragdrop_expressions',["require","exports","tslib","jquery","expressions/measure-expressions","lib/animation-frame","jquery.handleevent"],function(require,e,x,o,f,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(i.prototype.startDragging=function(e){this.active=!0,this.mouseY=e,this.setupEventListeners()},i.prototype.applyDrag=function(){var e=this.controller.getListModel().dragState;if(e){this.scheduleUpdateScroll();var t=this.measureDOM(e);if(t){var o=t.floatingPreviewRect,r=this.controller.getItemModel(e.firstItemId);if(r){for(var i,n,l=r.index,d=0,s=t.visibleRects;d<s.length;d++){var a=s[d],p=a.id,c=a.rect;if(p!==r.id){var h=this.controller.getItemModel(p);if(!h)return;if(h.index<r.index){if(o.top<c.top+c.height/2){l=h.index;break}}else o.bottom>c.top+c.height/2&&(l=h.index,"folder"===h.type&&h.collapsed&&(l+=this.controller.getNumberOfItemsInFolder(h.id)))}}n=l>r.index?(i=l)+1:l<r.index?(i=l-1,l):(i=l-1,l+1);var u=this.controller.getItemModelByIndex(i),f=this.controller.getItemModelByIndex(n),g="",v="";u&&(g="folder"===u.type?u.id:u.folderId),f&&(v="folder"===f.type?f.id:f.folderId);var m="";return g&&(v===g?"folder"===r.type?l=r.index:m=g:"folder"!==r.type&&this.isPreviewTopContainedInFolder(t,g)&&(m=g)),{dragState:x.__assign({},t.dragState),newIndex:l,folderId:m}}}}},i.prototype.measureDOM=function(e){var t=f.getExppanelScrolledTop(this.controller),o=f.getExpListHeight(this.controller);if(void 0!==t&&void 0!==o){var r=f.getDragContainerHeight(this.controller),i=e.mouseY-e.grabOffset+2,n=i-t,n=Math.max(n,-r/2);n=Math.min(n,o-r);var l={top:i,bottom:i+r,height:r},d=this.controller.findFirstVisibleItem(),s=this.controller.findLastVisibleItem();if(d&&s){for(var a=[],p=d.index;p<=s.index;p++){var c,h,u=this.controller.getItemModelByIndex(p);u&&(c=this.controller.getItemRootNodeById(u.id))&&u.id!==e.firstItemId&&(h=c.getBoundingClientRect(),a.push({id:u.id,rect:h}))}if(0!==a.length)return{dragState:x.__assign(x.__assign({},e),{itemTop:n}),floatingPreviewRect:l,visibleRects:a}}}},i.prototype.isPreviewTopContainedInFolder=function(e,t){for(var o=e.visibleRects,r=e.floatingPreviewRect,i=0,n=o;i<n.length;i++){var l=n[i],d=l.id,s=l.rect;if(s.top<=r.top&&s.bottom>=r.top){var a=this.controller.getItemModel(d);if(!a)return!1;if("folder"===a.type&&a.id===t)return!0;if("folder"!==a.type&&a.folderId===t)return!0}}return!1},i.prototype.scheduleUpdateScroll=function(){var e=this;this.updateScrollScheduled||(this.updateScrollScheduled=!0,t.requestAnimationFrame(function(){e.updateScroll(),e.updateScrollScheduled=!1}))},i.prototype.stop=function(){this.active=!1,this.tearDownEventListeners(),this.controller.dispatch({type:"stop-dragdrop"})},i.prototype.setupEventListeners=function(){var t=this;o(document).on("dcg-tapmove.dragdrop",function(e){t.mouseY=e.changedTouches[0].clientY,t.controller.dispatch({type:"update-dragdrop",mouseY:t.mouseY})}),o(document).on("dcg-tapend.dragdrop",function(e){t.stop(),e.handle("dragdrop")})},i.prototype.tearDownEventListeners=function(){o(document).off(".dragdrop")},i.prototype.updateScroll=function(){var e,t;this.active&&(e=this.$exppanel[0].getBoundingClientRect(),t=0,t=Math.min(0,this.mouseY-e.top),(t=(t=Math.max(t,this.mouseY-e.bottom+30))*e.height/900)&&this.$exppanel.scrollTop(this.$exppanel.scrollTop()+t))},i);function i(e){this.active=!1,this.controller=e;var t=f.getExppanelSelector(e);t&&(this.$exppanel=t)}e.default=r});
define('keypad/mq-commands',["require","exports"],function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.execute=void 0;var n={loga:function(t){t.write("\\log_{}"),t.typedText("("),t.keystroke("Left"),t.keystroke("Down")},nthroot:function(t){t.write("\\sqrt[]{}"),t.keystroke("Left"),t.keystroke("Left")},ddx:function(t){t.write("\\frac{d}{dx}")},arcsin:function(t){t.write("sin^{-1}"),t.typedText("(")},arccos:function(t){t.write("cos^{-1}"),t.typedText("(")},arctan:function(t){t.write("tan^{-1}"),t.typedText("(")},arcsec:function(t){t.write("sec^{-1}"),t.typedText("(")},arccsc:function(t){t.write("csc^{-1}"),t.typedText("(")},arccot:function(t){t.write("cot^{-1}"),t.typedText("(")},"A^T":function(t){t.typedText("^T"),t.keystroke("Right")},"A^-1":function(t){t.typedText("^-1"),t.keystroke("Right")},"A^2":function(t){t.typedText("^2"),t.keystroke("Right")},"a^2":function(t){t.typedText("^2"),t.keystroke("Right")},"a^3":function(t){t.typedText("^3"),t.keystroke("Right")},"a/b":function(t){t.write("\\frac{}{}"),t.keystroke("Left")}};t.execute=function(t,e){n[e](t)}});
define('core/lib/get-next-available-id',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNextAvailableId=void 0,e.getNextAvailableId=function(e){for(var t=0,r=0;r<e.length;r++){var i=parseInt(e[r].id);t<i&&(t=i)}return t+1+""}});
define('main/controller',["require","exports","main/propagate_selection","tslib","scroll_helpers","browser","core/lib/label","underscore","lib/i18n","flux","core/types/opacity","core/lib/dragmode","core/types/styles","lib/conditional_blur","core/lib/deepCopy","core/lib/number-to-latex","lib/state-stack","graphing/viewport","core/graphing-calc/migrate-state","core/math/expression-types","core/math/smart-slider-defaults","core/lib/color-helpers","graphing-calc/models/expression","core/graphing-calc/json/expression","graphing-calc/models/expression","graphing-calc/models/table","graphing-calc/models/image","graphing-calc/models/folder","graphing-calc/models/text","graphing-calc/models/simulation","graphing-calc/models/list","graphing-calc/models/abstract-item","graphing-calc/models/focus","graphing-calc/actions/keyboard","main/expression-zoom-helpers","core/math/evaluate-single-expression","./layout-model","./settings-view-model","jquery","bugsnag","dcgview-helpers/mathquill-braille-wrapper","expressions/list_move_controller","./blank_state","dcgview-helpers/mathquill-view","expressions/measure-expressions","expressions/dragdrop_expressions","keypad/mq-commands","core/lib/random-seed","../core/lib/get-next-available-id"],function(require,e,t,N,o,a,B,c,s,i,r,q,n,l,d,p,h,u,g,m,y,f,b,j,H,G,z,K,W,Q,Y,J,Z,X,I,x,$,S,M,v,k,ee,_,te,w,D,ie,se,oe){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var L=(E.prototype.hasUnsavedChanges=function(){return this._hasUnsavedChanges},E.prototype.getExpressionSearchOpen=function(){return this.expressionSearchOpen},E.prototype.hasVisibleAndUndoableToast=function(){return"function"==typeof this.toastData.undoCallback},E.prototype.getToastData=function(){return this.toastData},E.prototype.toastUndo=function(){"function"==typeof this.toastData.undoCallback&&(this.toastData.undoCallback(),this.dispatch({type:"toast/close"}))},E.prototype.runAfterDispatch=function(e){this.dispatcher.isDispatching()?this._queuedCallbacks.push(e):e()},E.prototype.enqueueEvent=function(e){this.enqueuedEvents[e]=!0},E.prototype.setRandomSeed=function(e){this.graphSettings.setProperty("randomSeed",e)},E.prototype.getRandomSeed=function(){return this.graphSettings.randomSeed},E.prototype.shouldDispatchTickNextFrame=function(){return!!this._requiresTickNextFrame},E.prototype.markTickRequiredNextFrame=function(){this._requiresTickNextFrame=!0},E.prototype.setupDispatcher=function(){var n=this;this.dispatcher=new i.Dispatcher,this.dispatcher.register(function(e){var t,i=n.getSelectedItem(),s=n.getFocusLocation();n.shouldScrollSelectedItemIntoViewAfterDispatch=!1,n.enqueuedEvents={change:!1,graphReset:!1,clearUnsavedChanges:!1,openDrawer:!1,showHotkeysModal:!1,userMovedPoint:!1,userClickedObject:!1,userEditedLabel:!1},"tick"===e.type&&(n._requiresTickNextFrame=!1),n.isCurrentlyDoingSetState=!1,n.isCurrentlyDoingRestoreState=!1,n.clickableObjectQueueInfo.didDispatchTripLockout=!1,n.handleDispatchedAction(e),n.updateTheComputedWorld();var o=n.getImageToRetry();(0<n.getPlayingSliders().length||n.getPlayingSimulation()||n.hasAnyTableThatRequiresTicks()||n.isDragDropActive()||o)&&n.markTickRequiredNextFrame(),o&&n.retryLoadingFailedImage(o),"undo"===e.type||"redo"===e.type||n.isDragDropActive()||n.commitUndoRedoSynchronously(e.type),n.requestParseForAllItems(),n.clickableObjectQueueInfo.didDispatchTripLockout&&(n.clickableObjectQueueInfo.lockoutCounter+=1,n.evaluator.notifyWhenSynced(function(){--n.clickableObjectQueueInfo.lockoutCounter,0===n.clickableObjectQueueInfo.lockoutCounter&&n.clickableObjectQueueInfo.queuedItems.length&&n.runAfterDispatch(function(){n.dispatch({type:"attempt-queued-clickable-object"})})})),n.isCurrentlyDoingSetState=!1,n.isCurrentlyDoingRestoreState=!1,n.clickableObjectQueueInfo.didDispatchTripLockout=!1,n.enqueuedEvents.change&&n.grapher&&n.grapher.markLabelsDirty(),n.enqueuedEvents.clearUnsavedChanges?n._hasUnsavedChanges=!1:n.enqueuedEvents.change&&(n._hasUnsavedChanges=!0);var a=n.getSelectedItem();a?i&&i.guid===a.guid||(n.shouldScrollSelectedItemIntoViewAfterDispatch=!0):n.shouldScrollSelectedItemIntoViewAfterDispatch=!1;var r=n.getFocusLocation();r&&!c.isEqual(r,s)&&n.getFocusedItem()==a&&(n.shouldScrollSelectedItemIntoViewAfterDispatch=!0),s&&i&&"table"===i.type&&"table"===s.type&&(!r||"table"!==r.type||s.id!==r.id)&&i.isExpanded&&(G.setExpanded(i,!1),r||(t=i)),r&&a&&"table"===a.type&&G.updateIsCollapsedByFocusLocation(a),n.updateRenderShellsBeforePaint(),n.updateViews(),t?n.scrollItemIntoView(t):n.shouldScrollSelectedItemIntoViewAfterDispatch&&n.scrollSelectedItemIntoView(),n.updateDragDrop(),n.updateRenderShellsAfterDispatch()})},E.prototype.handleDispatchedAction=function(t){var e,i,s,o=this;switch(t.type){case"render":break;case"undo":this.undo();break;case"redo":this.redo();break;case"clear-undoredo-history":this.clearUndoRedoHistory();break;case"on-special-key-pressed":"Enter"===t.key?X.onEnterPressed(this):"Up"===t.key?X.onUpPressed(this):"Down"===t.key?X.onDownPressed(this):"Backspace"===t.key?X.onBackspacePressed(this):"Delete"===t.key&&X.onDeletePressed(this);break;case"select-previous-expression":Y.selectPrevItem(this.listModel);break;case"select-next-expression":Y.selectNextItem(this.listModel);break;case"upward-delete-selected-expression":X.upwardDeleteSelectedExpression(this);break;case"downward-delete-selected-expression":X.downwardDeleteSelectedExpression(this);break;case"table-show-more-rows":if(!(D=this.getItemModel(t.id))||"table"!==D.type)return;var a=G.getCollapsedRange(D);if(!a)return;Y.setSelected(this.listModel,D),G.setExpanded(D,!0),Z.setFocusLocation(this,{type:"table",id:D.id,location:{row:a.min,column:0}});break;case"navigate-table-by-key":X.navigateTableByKey(this,t.id,t.key);break;case"delete-item-and-animate-out":this._deleteItemAndAnimateOut(t.id,t.setFocusAfterDelete);break;case"finish-deleting-item-after-animation":this._finishDeletingItemAfterAnimation(t.id,t.setFocusAfterDelete);break;case"expression-zoom-fit":this._expressionZoomFit(t.id);break;case"set-expression-properties-from-api":this._setExpressionPropertiesFromAPI(t.id,t.properties);break;case"add-item-to-end-from-api":this._addItemToEndFromAPI(this.createItemModel(t.state));break;case"duplicate-expression":var r=this.getItemModel(t.id);if(!r||"expression"!==r.type)return;var n=H.getState(r,{stripDefaults:!1}),l=this.createItemModel(N.__assign(N.__assign({},n),{id:this.generateId()}));this._toplevelInsertItemAt(r.index+1,l,!1,r.folderId);break;case"insert-item-at-index":var d=this.createItemModel(t.state);this._toplevelInsertItemAt(t.index,d,t.focus,t.folderId);break;case"new-expression-at-end":var d=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),Y.insertItemAtEnd(this.listModel,d),Z.moveFocusToItem(this,d.id);break;case"new-expression":var d=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()});this.setEditListMode(!1),this._toplevelNewItemAtSelection(d,{shouldFocus:!0}),this._closeAddExpression();break;case"new-text":var d=this.createItemModel({id:this.generateId(),type:"text"});this._toplevelNewItemAtSelection(d,{shouldFocus:!0}),this._closeAddExpression();break;case"new-folder":d=this.createItemModel({type:"folder",id:this.generateId()}),this._toplevelNewItemAtSelection(d,{shouldFocus:!0}),this._closeAddExpression();break;case"new-images":this._uploadImagesAndWaitForThemToLoad({files:t.files}),this._closeAddExpression();break;case"change-image":this._uploadImagesAndWaitForThemToLoad({files:t.files,id:t.id});break;case"new-table":d=this._createTableItem(),this._toplevelNewItemAtSelection(d,{shouldFocus:!0}),this._closeAddExpression();break;case"new-simulation":d=this.createItemModel({id:this.generateId(),type:"simulation"}),this._toplevelNewItemAtSelection(d,{shouldFocus:!0}),this._closeAddExpression();break;case"paste-table":this._pasteTable(t.data);break;case"insert-several-expressions":this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this._insertSeveralExpressions(t.expressions);break;case"append-number-list":this._appendNumberList(t.latex);break;case"remove-item-by-id":Y.removeItemById(this.listModel,t.id);break;case"replace-item-at-index":d=this.createItemModel(t.state),this._toplevelReplaceItemAt(t.index,d,t.focus);break;case"create-sliders-for-item":this.createSlidersForItem(t.id,t.variables);break;case"start-dragdrop":if(!(D=this.getItemModel(t.id)))return;var p=this.getItemRootNodeById(D.id);if(!p)return;var c=p.getBoundingClientRect();Y.setSelected(this.listModel,void 0);var h=t.grabY-c.top,u=!1,g=1;"folder"===D.type&&(g+=this.getNumberOfItemsInFolder(D.id),D.collapsed||(u=!0,K.setCollapsed(D,!0))),Y.setDragState(this.listModel,{firstItemId:D.id,numberOfItems:g,expandFolder:u,grabOffset:h,mouseY:t.mouseY,itemTop:0}),this.dragdrop_expressions.startDragging(t.mouseY);break;case"update-dragdrop":if(!(e=this.listModel.dragState))return;Y.setDragState(this.listModel,N.__assign(N.__assign({},e),{mouseY:t.mouseY}));break;case"stop-dragdrop":if(!(e=this.listModel.dragState))return;if(!(E=this.getItemModel(e.firstItemId)))return;Y.setSelected(this.listModel,E),"folder"===E.type&&e.expandFolder&&K.setCollapsed(E,!1),Y.setDragState(this.listModel,void 0);break;case"set-selected-id":d=this.getItemModel(t.id),Y.setSelected(this.listModel,d);break;case"set-selected-index":d=this.getItemModelByIndex(t.index),Y.setSelected(this.listModel,d);break;case"set-none-selected":Y.setSelected(this.listModel,void 0);break;case"set-focus-location":"table"===(t.location?t.location.type:"")&&(this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{inEditListMode:!1})),Z.setFocusLocation(this,t.location);break;case"move-focus-to-item":Z.moveFocusToItem(this,t.id,t.where);break;case"blur-focus-location":this.isFocusLocationFocused(t.location)&&Z.setFocusLocation(this,void 0);break;case"set-folder-collapsed":if(!(D=this.getItemModel(t.id))||"folder"!==D.type)return;K.setCollapsed(D,t.isCollapsed);break;case"set-item-secret":if(!(d=this.getItemModel(t.id)))return;J.setSecret(d,t.isSecret);break;case"set-tablecolumn-color":if(!(D=this.getItemModel(t.tableId))||"table"!==D.type)return;G.setColumnColor(D,t.columnId,t.color);break;case"set-tablecolumn-colorlatex":if(!(D=this.getItemModel(t.tableId))||"table"!==D.type)return;G.setColumnColorLatex(D,t.columnId,t.colorLatex);break;case"set-show-cdf":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setShowCDF(D,t.showCDF);break;case"set-cdf-min":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setCDFMin(D,t.latex);break;case"set-cdf-max":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setCDFMax(D,t.latex);break;case"toggle-item-hidden":this._toggleItemHidden(t.id);break;case"toggle-tablecolumn-hidden":this._toggleTableColumnHidden(t.tableId,t.columnId);break;case"toggle-item-settings-menu":this.listModel.openItemMenu&&t.menu.model===this.listModel.openItemMenu.model?this.listModel.openItemMenu=void 0:(this.listModel.openItemMenu=t.menu,t.menu.focusFirstOption&&Z.setFocusLocation(this,{type:"expression-menu",id:t.menu.model.id,location:"start"}));break;case"close-item-settings-menu":this.listModel.openItemMenu=void 0;break;case"toggle-fraction-evaluation":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;var m=H.shouldEvaluationDisplayAsFraction(D);H.setEvaluationAsFraction(D,!m);break;case"set-item-label":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setLabel(D,t.label),this.enqueueEvent("userEditedLabel");break;case"set-item-showlabel":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setShowLabel(D,t.showLabel),t.showLabel||(H.setInteractiveLabel(D,!1),H.setEditableLabelMode(D,j.EditableLabelMode.None));break;case"set-item-color":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setColor(D,t.color);break;case"set-item-fill":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setFill(D,t.fill),this._setItemHidden(D.id,H.areAllVisibilityPropsOff(D));break;case"set-image-opacity":if(!(D=this.getItemModel(t.id))||"image"!==D.type)return;z.setOpacity(D,t.opacity),this._setItemHidden(D.id,!1);break;case"set-image-in-foreground":if(!(D=this.getItemModel(t.id))||"image"!==D.type)return;z.setForeground(D,t.foreground);break;case"image-upload-error":this.__pendingImageUploads[t.token]&&(delete this.__pendingImageUploads[t.token],this._showToast({message:this.s("graphing-calculator-text-toast-image-upload-failed")}));break;case"image-upload-success":this.__pendingImageUploads[t.token]&&(delete this.__pendingImageUploads[t.token],t.id?(D=this.getItemModel(t.id))&&"image"===D.type&&z.setImageURL(D,t.url):(i=this.createItemModel({type:"image",id:this.generateId(),width:t.width,height:t.height,image_url:t.url,name:t.name}),this._toplevelNewItemAtSelection(i,{shouldFocus:!1}))),this.isUploadingImages()||(this.toastData={});break;case"image-load-success":if(!(i=this.getItemModel(t.id))||"image"!==i.type)return;z.setLoadStatus(i,"loaded"),this.imageRetryState={lastAttemptTime:0,attempts:0};break;case"image-load-error":if(!(i=this.getItemModel(t.id))||"image"!==i.type)return;z.setLoadStatus(i,"failed");break;case"image-retry-loading":if(!(i=this.getItemModel(t.id))||"image"!==i.type)return;z.retryLoading(i);break;case"set-item-dragmode":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setDragMode(D,t.dragMode),t.dragMode!==q.DragMode.NONE&&this._setItemHidden(t.id,!1);break;case"set-tablecolumn-dragmode":if(!(D=this.getItemModel(t.tableId))||"table"!==D.type)return;G.setColumnDragMode(D,t.columnId,t.dragMode),t.dragMode!==q.DragMode.NONE&&this._setTableColumnHidden(t.tableId,t.columnId,!1);break;case"set-tablecolumn-points":if(!(D=this.getItemModel(t.tableId))||"table"!==D.type)return;G.setColumnPoints(D,t.columnId,t.bool),this._setTableColumnHidden(t.tableId,t.columnId,G.shouldHideColumn(D,t.columnId));break;case"set-tablecolumn-lines":if(!(D=this.getItemModel(t.tableId))||"table"!==D.type)return;G.setColumnLines(D,t.columnId,t.bool),this._setTableColumnHidden(t.tableId,t.columnId,G.shouldHideColumn(D,t.columnId));break;case"set-tablecolumn-linestyle":if(!(D=this.getItemModel(t.tableId))||"table"!==D.type)return;G.setColumnLineStyle(D,t.columnId,t.lineStyle),this._setTableColumnHidden(t.tableId,t.columnId,!1);break;case"set-tablecolumn-pointstyle":if(!(D=this.getItemModel(t.tableId))||"table"!==D.type)return;G.setColumnPointStyle(D,t.columnId,t.pointStyle),this._setTableColumnHidden(t.tableId,t.columnId,!1);break;case"set-item-points":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setPoints(D,t.points),this._setItemHidden(t.id,H.areAllVisibilityPropsOff(D)),t.points||D.dragMode===q.DragMode.NONE||H.setDragMode(D,q.DragMode.NONE);break;case"set-item-pointstyle":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setPointStyle(D,t.pointStyle),this._setItemHidden(t.id,!1);break;case"set-item-lines":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setLines(D,t.lines),this._setItemHidden(t.id,H.areAllVisibilityPropsOff(D));break;case"set-item-linestyle":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setLineStyle(D,t.lineStyle),this._setItemHidden(t.id,!1);break;case"set-item-label-dropdown-open":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setLabelDropdownOpen(D,t.open);break;case"set-item-fillopacity":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setFillOpacity(D,t.fillOpacity),this._setItemHidden(t.id,!1);break;case"set-item-lineopacity":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setLineOpacity(D,t.lineOpacity),this._setItemHidden(t.id,!1);break;case"set-item-pointopacity":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setPointOpacity(D,t.pointOpacity),this._setItemHidden(t.id,!1);break;case"set-item-linewidth":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setLineWidth(D,t.lineWidth),this._setItemHidden(t.id,!1);break;case"set-item-colorlatex":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setColorLatex(D,t.colorLatex);break;case"set-item-labelSize":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setLabelSize(D,t.labelSize);break;case"set-item-label-orientation":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setLabelOrientation(D,t.labelOrientation);break;case"set-item-vertical-label":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setVerticalLabel(D,t.verticalLabel);break;case"set-suppress-text-outline":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setSuppressTextOutline(D,t.suppressTextOutline);break;case"set-item-interactive-label":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setInteractiveLabel(D,t.interactiveLabel),t.interactiveLabel&&H.setEditableLabelMode(D,j.EditableLabelMode.None);break;case"set-item-editable-label-mode":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;D.editableLabelMode!==j.EditableLabelMode.None&&t.editableLabelMode!==j.EditableLabelMode.None&&D.editableLabelMode!==t.editableLabelMode&&H.setLabel(D,""),H.setEditableLabelMode(D,t.editableLabelMode),t.editableLabelMode!==j.EditableLabelMode.None&&H.setInteractiveLabel(D,!1);break;case"plot-residuals":if(!(d=this.getItemModel(t.id))||"expression"!==d.type)return;var y=d.formula.regression;if(!y)return;var f=y.residualSuggestionId;if(!f)return;var b=this.getItemModel(f);if(!b)return;G.insertBlankColumn(b,b.columnModels.length-1,{id:this.generateId(),latex:B.identifierToLatex(y.residualVariable),color:this.getNextColor()});break;case"toggle-logmode":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;var I=D.isLogModeRegression;H.setLogMode(D,!I);break;case"set-item-latex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(d=this.getItemModel(t.id))||"expression"!==d.type)return;var x,S,M,v,k=t.latex;'"'===k&&this.areNotesEnabled()?(x=this.createItemModel({id:this.generateId(),type:"text"}),this._toplevelReplaceItemAt(d.index,x,!0)):""===k?H.blankOutExpressionAfterClearingLatex(d):"folder"===k&&this.areFoldersEnabled()?(S=this.createItemModel({id:this.generateId(),type:"folder"}),this._toplevelReplaceItemAt(d.index,S,!0)):"table"===k?(M=this._createTableItem(),this._toplevelReplaceItemAt(d.index,M,!0)):"simulation"===k&&this.areSimulationsEnabled()?(v=this.createItemModel({id:this.generateId(),type:"simulation"}),this._toplevelReplaceItemAt(d.index,v,!0)):"betchacant"===k||"pride"===k?this.runAfterDispatch(function(){o.triggerEasterEgg&&o.triggerEasterEgg(k)}):H.setLatex(d,k);break;case"set-visualization-prop":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setVizProp(D,t.prop,t.value);break;case"set-clickableinfo-prop":if(!(D=this.getItemModel(t.id)))return;"expression"===D.type?H.setClickableInfoProp(D,t.prop,t.value):"simulation"===D.type?Q.setClickableInfoProp(D,t.prop,t.value):"image"===D.type&&z.setClickableInfoProp(D,t.prop,t.value),!0===t.value&&(Z.setFocusLocation(this,{type:"clickableinfo-rule",id:t.id,location:{ruleId:"1",prop:"assignment"}}),this.listModel.openItemMenu=void 0);break;case"set-clickableinfo-rule-prop":if(!(D=this.getItemModel(t.id)))return;"expression"===D.type?H.setClickableInfoRuleProp(D,t.ruleId,t.prop,t.value):"image"===D.type?z.setClickableInfoRuleProp(D,t.ruleId,t.prop,t.value):"simulation"===D.type&&Q.setClickableInfoRuleProp(D,t.ruleId,t.prop,t.value);break;case"add-clickableinfo-rule":if(!(D=this.getItemModel(t.id)))return;var _="";"expression"===D.type?(_=oe.getNextAvailableId(D.clickableInfo.rules),H.addClickableInfoRule(D,_)):"image"===D.type?(_=oe.getNextAvailableId(D.clickableInfo.rules),z.addClickableInfoRule(D,_)):"simulation"===D.type&&(_=oe.getNextAvailableId(D.clickableInfo.rules),Q.addClickableInfoRule(D,_)),_&&Z.setFocusLocation(this,{type:"clickableinfo-rule",id:D.id,location:{prop:"assignment",ruleId:_}});break;case"remove-clickableinfo-rule":if(!(D=this.getItemModel(t.id)))return;"expression"===D.type?H.removeClickableInfoRule(D,t.ruleId):"image"===D.type?z.removeClickableInfoRule(D,t.ruleId):"simulation"===D.type&&Q.removeClickableInfoRule(D,t.ruleId);break;case"set-folder-title":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"folder"!==D.type)return;K.setTitle(D,t.title);break;case"set-image-mq-attribute":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"image"!==D.type)return;z.setMQAttribute(D,t.attribute,t.latex);break;case"set-image-name":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"image"!==D.type)return;z.setName(D,t.name);break;case"set-graph-settings":for(var w in t)"type"!==w&&this.graphSettings.setProperty(w,t[w]);break;case"set-polar-domain-minlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setPolarDomainMin(D,t.latex);break;case"set-polar-domain-maxlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setPolarDomainMax(D,t.latex);break;case"set-parametric-domain-minlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setParametricDomainMin(D,t.latex);break;case"set-parametric-domain-maxlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setParametricDomainMax(D,t.latex);break;case"set-note-text":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"text"!==D.type)return;W.setText(D,t.text);break;case"set-edit-list-mode":var D=Y.getSelected(this.listModel);if(this.setEditListMode(t.isEditListMode),t.focusExpressionList){if(void 0===D&&(D=this.getItemModelByIndex(0)),!D)return;Z.moveFocusToItem(this,D.id,"table"===D.type&&t.isEditListMode?"container":"start")}else Y.setSelected(this.listModel,void 0),Z.setFocusLocation(this,void 0);break;case"set-projector-mode":this.getGraphSettings().config.setProperty("projectorMode",t.value);break;case"set-inverted-colors":this.getGraphSettings().config.setProperty("invertedColors",t.value);break;case"set-tablecell-latex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.tableId))||"table"!==D.type)return;G.setCellLatex(D,t.cell,t.latex);break;case"set-state":this.externalSetState(t.state,t.opts);break;case"set-blank":this.externalSetState(this.getBlankState(),t.opts);break;case"clear-unsaved-changes":this.enqueueEvent("clearUnsavedChanges");break;case"reset-graph":var L=this.getState();this.externalSetState(this.graphSettings.defaultState,{}),this._showToast({message:this.s("graphing-calculator-text-toast-graph-reset"),undoCallback:function(){return o.dispatch({type:"set-state",state:L,opts:{}})}}),this.enqueueEvent("graphReset");break;case"clear-graph":if(this.triggerClearGraph)return void this.runAfterDispatch(function(){return o.triggerClearGraph()});var E,A=this.getState();this.externalSetState(this.getBlankState(),{}),(E=this.getItemModelByIndex(0))&&Z.moveFocusToItem(this,E.id,"end"),this._showToast({message:this.s("graphing-calculator-text-toast-graph-cleared"),undoCallback:function(){return o.dispatch({type:"set-state",state:A,opts:{}})}}),this.enqueueEvent("graphReset");break;case"on-evaluator-changes":this.onEvaluatorChangesSpy&&this.onEvaluatorChangesSpy(t.changes),Y.onEvaluatorFormulaUpdates(this.listModel,t.changes);break;case"process-graph-data":for(s in t.graphData.addedGraphs){var F=t.graphData.addedGraphs[s];this.grapher&&this.grapher.updateSketch(s,F),Y.onGraphComputed(this.listModel,s,F)}for(s in t.graphData.removedGraphs)this.grapher&&this.grapher.hide(s);for(s in t.graphData.intersections)this.grapher&&"2d"===this.grapher.type&&this.grapher.updateIntersections(s,t.graphData.intersections[s]);this.grapher&&this.grapher.poiController&&this.grapher.poiController.handleTraceUpdate();break;case"add-helper-expression":Y.addHelperExpression(this.listModel,t.state);break;case"tick":(R=this.getPlayingSimulation())?this.tickPlayingSimulationIfAppropriate(R).canEnqueue&&this.clickableObjectQueueInfo.queuedItems.push({time:Date.now(),id:R.id,type:"simulation-tick"}):this._tickSliders(t.time);break;case"adjust-slider-by-keyboard":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.adjustSliderByKeyboard(D,t.adjustment);break;case"adjust-slider-by-dragging-thumb":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.adjustSliderByDraggingThumb(D,t.target);break;case"set-slider-minlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setSliderMin(D,t.latex);break;case"set-slider-maxlatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setSliderMax(D,t.latex);break;case"set-slider-steplatex":if(this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setSliderStep(D,t.latex);break;case"set-slider-dragging":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setSliderDragging(D,t.dragging);break;case"play-slider-from-min":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;var C=H.getSliderMin(D);if(isNaN(C))return;var O=H.computeNewSliderLatex(D.latex,C);H.setSliderIsPlaying(D,!1),H.setLatex(D,O),H.setSliderIsPlaying(D,!0);break;case"set-slider-isplaying":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;t.isPlaying&&this.stopPlayingSimulation(),H.setSliderIsPlaying(D,t.isPlaying);break;case"set-simulation-isplaying":if(!(D=this.getItemModel(t.id))||"simulation"!==D.type)return;t.isPlaying&&(this.stopPlayingSimulation(),this.stopAllSliders()),Q.setIsPlaying(D,t.isPlaying);break;case"set-simulation-fps":if(!(D=this.getItemModel(t.id))||"simulation"!==D.type)return;Q.setFPS(D,t.fps);break;case"set-slider-loopmode":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setSliderLoopMode(D,t.loopMode);break;case"set-slider-animationperiod":if(!(D=this.getItemModel(t.id))||"expression"!==D.type)return;H.setSliderAnimationPeriod(D,t.animationPeriod);break;case"show-expressions-list":this._showExpressions();break;case"hide-expressions-list":this._hideExpressions();break;case"open-drawer":this.enqueueEvent("openDrawer");break;case"re-randomize":this.setRandomSeed(se.default());break;case"resize-exp-list":this._setExpListWidth(t.expListWidth);break;case"toast/show":this._showToast(t.toast);break;case"toast/close":var P=this.toastData.onHide;P&&this.runAfterDispatch(P),this.toastData={};break;case"toast/undo":var T=this.toastData.undoCallback;T&&this.runAfterDispatch(T),this.toastData={};break;case"toast/learn-more":var V=this.toastData.undoCallback;V&&this.runAfterDispatch(V),this.toastData={};break;case"start-moving-point":ee.onStartMovingPoint(this,this.listModel,t.pointInfo);break;case"stop-moving-point":ee.onStopMovingPoint(this,t.pointInfo);break;case"on-move-point":ee.onMovePoint(this,t.pointInfo,t.screenPt,t.projection,t.keyboardDirection)&&this.enqueueEvent("userMovedPoint");break;case"commit-user-requested-viewport":this._commitUserRequestedViewport(t.viewport);break;case"set-viewport":this._setAxisLimitLatex("xmin",t.viewport.xmin+""),this._setAxisLimitLatex("xmax",t.viewport.xmax+""),this._setAxisLimitLatex("ymin",t.viewport.ymin+""),this._setAxisLimitLatex("ymax",t.viewport.ymax+"");break;case"set-axis-limit-latex":this._setAxisLimitLatex(t.limit,t.latex);break;case"toggle-graph-settings":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{graphSettingsOpen:!this.layoutModel.graphSettingsOpen}),t.focusOnOpen&&this.layoutModel.graphSettingsOpen&&Z.setFocusLocation(this,{type:"settings",location:"projector-mode"});break;case"close-graph-settings":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{graphSettingsOpen:!1}),t.focusIconAfterClose&&Z.setFocusLocation(this,{type:"settings",location:"icon"});break;case"toggle-add-expression":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{addExpressionOpen:!this.layoutModel.addExpressionOpen}),t.focusOnOpen&&this.layoutModel.addExpressionOpen&&Z.setFocusLocation(this,{type:"add-expression-btn"});break;case"close-add-expression":this._closeAddExpression(),t.focusIconAfterClose&&Z.setFocusLocation(this,{type:"add-item-btn"});break;case"ui/container-resized":this.layoutMeasurements={width:t.size.width,height:t.size.height},this.shouldScrollSelectedItemIntoViewAfterDispatch=!0;break;case"enter-printmode":this.inPrintMode=!0;break;case"exit-printmode":this.inPrintMode=!1;break;case"expression-size-exceeded":this._showToast({message:this.s("graphing-calculator-text-toast-expression-size-limit")});break;case"keypad/set-layout":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadLayout:t.layout,keypadFunctionsOpen:!1});break;case"keypad/set-functions-tab":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadFunctionsTab:t.tab});break;case"keypad/set-minimized":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadMinimized:t.minimized,keypadLayout:"mainNumbers"}),this.shouldScrollSelectedItemIntoViewAfterDispatch=!0,this.needsFakeKeypad()||Z.addFocusForKeypad(this);break;case"keypad/type-text":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(function(){var e=te.default.getFocusedMathquill();e&&te.default.canAcceptText(e,o.getCapExpressionSize(),t.text)&&(e.typedText(t.text),te.default.simulateUserChangedLatex(e))});break;case"keypad/press-key":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(function(){var e=te.default.getFocusedMathquill();e&&te.default.simulateKeypress(e,t.key)});break;case"keypad/audio-trace":this.handleAudioTraceCommand(t.command);break;case"set-audio-trace-speed":this.setAudioTraceSpeed(t.speed);break;case"keypad/custom-command":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadFunctionsOpen:!1}),this.runAfterDispatch(function(){var e=te.default.getFocusedMathquill();e&&(ie.execute(e,t.command),te.default.simulateUserChangedLatex(e))});break;case"keypad/shift":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadLayout:$.getShiftedLayoutForCurrentLayout(this.getKeypadLayout()),keypadFunctionsOpen:!1});break;case"keypad/123":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadLayout:"mainNumbers",keypadFunctionsOpen:!1});break;case"keypad/abc":this.isQwertyKeyboardEnabled()?this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadLayout:"letters",keypadFunctionsOpen:!1}):this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadLayout:"noQwertyLetters",keypadFunctionsOpen:!1});break;case"keypad/audio":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadMinimized:!1,keypadLayout:"audio",keypadFunctionsOpen:!1});break;case"keypad/functions":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadFunctionsOpen:!this.isKeypadFunctionsPopoverOpen()});break;case"open-on-web":this._openOnWeb();break;case"file-is-dragged-over":this.listModel.openItemMenu=void 0,this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{isFileDraggedOver:!0});break;case"file-is-not-dragged-over":this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{isFileDraggedOver:!1});break;case"zoom":this.grapher&&this.grapher.viewportController.zoom(t.direction);break;case"set-hovered-image":if(!(D=this.getItemModel(t.id))||"image"!==D.type)return;z.setClickableInfoProp(D,"hoveredImage",t.url);break;case"set-depressed-image":if(!(D=this.getItemModel(t.id))||"image"!==D.type)return;z.setClickableInfoProp(D,"depressedImage",t.url);break;case"attempt-queued-clickable-object":for(var R=this.getPlayingSimulation();!this.areClickableObjectsTemporarilyDisabled();){var U=this.clickableObjectQueueInfo.queuedItems.shift();if(!U)return;if(!(500<Date.now()-U.time))if("clickable-object"===U.type)this.handleClickableItemClicked(U.id);else if("simulation-step"===U.type)this.applySimulationUpateRules(U.id);else if("simulation-tick"===U.type){if(!R||R.id!==U.id)continue;this.tickPlayingSimulationIfAppropriate(R)}}break;case"clickable-item-clicked":if(this.areClickableObjectsTemporarilyDisabled())return void this.clickableObjectQueueInfo.queuedItems.push({time:Date.now(),id:t.id,type:"clickable-object"});this.handleClickableItemClicked(t.id);break;case"simulation-single-step":if(!(D=this.getItemModel(t.id))||"simulation"!==D.type)return;if(this.areClickableObjectsTemporarilyDisabled())return void this.clickableObjectQueueInfo.queuedItems.push({time:Date.now(),id:t.id,type:"simulation-step"});this.applySimulationUpateRules(t.id);break;case"update-expression-search-str":this.updateExpressionSearchStr(t.str);break;case"set-braille-mode":this.setBrailleMode(t.mode);break;case"set-six-key-input":this.setSixKeyInput(t.useSixKeyInput);break;case"close-expression-search":this.expressionSearchOpen=!1,this.updateExpressionSearchStr("");break;case"open-expression-search":this.expressionSearchOpen=!0,this.focusLocation={type:"search-expressions"};break;default:return t}},E.prototype.handleClickableItemClicked=function(e){var t=this.getItemModel(e);if(t&&("expression"===t.type||"image"===t.type)){for(var i=!1,s=0,o=t.clickableInfo.rules;s<o.length;s++){var a=o[s];this.applyClickableObjectRule(t,a.id)&&(i=!0)}return i&&(this.clickableObjectQueueInfo.didDispatchTripLockout=!0,this.enqueueEvent("userClickedObject"),this.onClickableObjectUpdatesAppliedSpy&&this.onClickableObjectUpdatesAppliedSpy()),i}},E.prototype.applySimulationUpateRules=function(e){var t=this.getItemModel(e);if(t&&"simulation"===t.type){for(var i=!1,s=0,o=t.clickableInfo.rules;s<o.length;s++){var a=o[s];this.applyClickableObjectRule(t,a.id)&&(i=!0)}return i&&(this.clickableObjectQueueInfo.didDispatchTripLockout=!0,this.onSimulationUpdatesAppliedSpy&&this.onSimulationUpdatesAppliedSpy()),i}},E.prototype.applyClickableObjectRule=function(e,t){var i,s,o,a;return"expression"===e.type?i=H.getClickableInfoUpdateLatex(e,t):"image"===e.type?i=z.getClickableInfoUpdateLatex(e,t):"simulation"===e.type&&(i=Q.getClickableInfoUpdateLatex(e,t)),!!i&&("expression"===e.type?s=H.getClickableInfoUpdateIdentifier(e,t):"image"===e.type?s=z.getClickableInfoUpdateIdentifier(e,t):"simulation"===e.type&&(s=Q.getClickableInfoUpdateIdentifier(e,t)),!s||1===(o=Y.getItemsByIdentifier(this.listModel,s)).length&&((a=o[0]).slider.isPlaying?(H.setSliderIsPlaying(a,!1),H.setLatex(a,i),H.setSliderIsPlaying(a,!0)):H.setLatex(a,i)),!0)},E.prototype.updateExpressionSearchStr=function(e){this.expressionSearchStr=e,Y.filterItemsBySearch(this.listModel,e)},E.prototype.getExpressionSearchStr=function(){return this.expressionSearchStr||""},E.prototype.areClickableObjectsTemporarilyDisabled=function(){return!!this.clickableObjectQueueInfo.didDispatchTripLockout||0<this.clickableObjectQueueInfo.lockoutCounter},E.prototype.getBrailleMode=function(){return this.graphSettings.config.brailleMode},E.prototype.setBrailleMode=function(e){this.graphSettings.config.setProperty("brailleMode",e)},E.prototype.getSixKeyInput=function(){return this.graphSettings.config.sixKeyInput},E.prototype.setSixKeyInput=function(e){this.graphSettings.config.setProperty("sixKeyInput",e)},E.prototype.getBrailleControls=function(){return this.graphSettings.config.brailleControls},E.prototype.setBrailleControls=function(e){this.graphSettings.config.setProperty("brailleControls",e)},E.prototype.setEditListMode=function(e){this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{inEditListMode:e})},E.prototype.generateTableXSubscript=function(){return Y.findAvailableColumnSubscript(this.listModel)},E.prototype._createTableItem=function(){var e=this.generateTableXSubscript(),t=G.makeTableState(e,[[""],[""]],this);return this.createItemModel(t)},E.prototype._populateSettingsViewLimitLatex=function(){this.grapher&&(this.settingsViewModel=N.__assign(N.__assign({},this.settingsViewModel),{limitLatex:S.limitLatex(this.grapher.getCurrentViewport(),this.getGraphSettings().xAxisStep,this.getGraphSettings().yAxisStep)}))},E.prototype.getSettingsViewModel=function(){return this.settingsViewModel},E.prototype.getListModel=function(){return this.listModel},E.prototype.hasBackgroundColor=function(){return"#ffffff"!==this.getBackgroundColor()},E.prototype.getBackgroundColor=function(){return this.getGraphSettings().getBackgroundColor()},E.prototype.getTextColor=function(){return this.getGraphSettings().getTextColor()},E.prototype.getPillboxBackgroundColor=function(){return f.shadeColor(this.getBackgroundColor(),-.07)},E.prototype.subToChanges=function(e){var t=this,i=this.nextSubscription;return this.nextSubscription+=1,this.subscriptions[i]=e,function(){delete t.subscriptions[i]}},E.prototype.updateTheComputedWorld=function(){var e=this;Y.reindex(this.listModel),Y.updateDrawOrder(this.listModel),this.grapher&&this.grapher.setSketchOrder(this.listModel.drawOrder);for(var t=0,i=this.getAllItemModels();t<i.length;t++){var s=i[t];switch(s.type){case"expression":H.onControllerUpdate(s);break;case"image":z.onControllerUpdate(s);break;case"table":G.onControllerUpdate(s);break;case"folder":K.onControllerUpdate(s);break;case"text":W.onControllerUpdate(s);break;case"simulation":Q.onControllerUpdate(s);break;default:return s}}this.isCurrentFocusLocationValid()||Z.setFocusLocation(this,void 0),this.listModel.openItemMenu&&(document.body&&document.body.contains(this.listModel.openItemMenu.icon)||(this.listModel.openItemMenu=void 0));var o=this.getSelectedItem();o&&!this.getItemModel(o.id)&&Y.setSelected(this.listModel,void 0),this.layoutModel.graphSettingsOpen||this._populateSettingsViewLimitLatex(),this.propagateSelection(),this.isKeypadOpen()||(this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{keypadFunctionsOpen:!1})),this.runAfterDispatch(function(){e.grapher&&"2d"===e.grapher.type&&e.grapher.audioGraph.checkIfSelectedItemChanged(o?o.id:void 0),e.grapher&&"2d"===e.grapher.type&&e.focusLocation&&e.grapher.audioGraph.exitAudioTrace()})},E.prototype.propagateSelection=function(){this.grapher&&this.evaluator?this.__lastSelectedId=t.propagateSelection(this,this.grapher,this.evaluator,this.__lastSelectedId):this.__lastSelectedId=void 0},E.prototype.getIntersectId=function(){return this.__lastSelectedId},E.prototype.areParsableObjectsEqual=function(e,t){return e===t||c.isEqual(N.__assign(N.__assign({},e),{regressionParameters:void 0}),N.__assign(N.__assign({},t),{regressionParameters:void 0}))},E.prototype.requestParseForAllItems=function(){(this.isCurrentlyDoingSetState||this.isCurrentlyDoingRestoreState)&&(this.lastParsableObjects={},this.evaluator.clearStatementsAndStartCompleteState(),this.clickableObjectQueueInfo.didDispatchTripLockout=!0,this.clickableObjectQueueInfo.queuedItems=[],this.isCurrentlyDoingRestoreState&&this.evaluator.markUndoRedoState());for(var e={},t=this.lastParsableObjects,i=0,s=this.getAllItemModels();i<s.length;i++)switch((n=s[i]).type){case"expression":case"image":case"table":case"simulation":e[n.id]=n.cachedParsableState;break;case"folder":case"text":break;default:return n}for(var o=0,a=Y.getAllHelperItemModels(this.listModel);o<a.length;o++)e[(n=a[o]).id]=n.cachedParsableState;for(var r in e){var n,l=e[r],d=t[r];"image"!==l.type||d&&l.type===d.type&&l.guid===d.guid||this.grapher&&(n=this.getItemModel(r))&&"image"===n.type&&this.grapher.addGraphImage(n),this.areParsableObjectsEqual(l,d)||(this.grapher&&"statement"===l.type&&""===l.latex&&this.grapher.removeGraphSketch(l.id),this.evaluator.addStatement(l))}for(var r in t)if(d=t[r],l=e[r],"image"!==d.type||l&&l.type===d.type&&l.guid===d.guid||this.grapher&&this.grapher.removeGraphImage(r),!l&&(this.evaluator.removeStatement(r),"table"===d.type))for(var p=0,c=d.columns;p<c.length;p++){var h=c[p];this.evaluator.removeStatement(h.id)}this.lastParsableObjects=e},E.prototype.getViewState=function(){if(this.grapher){var e=this.grapher.getProjection();return{viewport:e.viewport.toObject(),screen:e.screen}}},E.prototype.setEvaluator=function(e){this.evaluator=e},E.prototype.setGrapher=function(e){this.grapher=e},E.prototype.getGrapher=function(){return this.grapher},E.prototype.shouldExpressionZoomFit=function(e){return!!this.grapher&&!!this.isZoomFitEnabled()&&("expression"===e.type||"table"===e.type)&&!!("expression"!==e.type||!e.error&&e.shouldGraph&&e.formula.is_graphable)&&!(!e.boundingBoxes||!e.boundingBoxes.length)&&I.shouldExpressionZoomFit(e.boundingBoxes,this.grapher.viewportController.getProjection())},E.prototype.setBugsnagContext=function(e){this.bugsnagContext=e},E.prototype.getItemRootNodeById=function(e){var t=this.getItemModel(e);return t&&t.dcgView?t.dcgView.findRootNode():void 0},E.prototype.getItemSelectorById=function(e){var t=this.getItemRootNodeById(e);return t?M(t):void 0},E.prototype.generateId=function(){var e=this.__nextItemId;return this.__nextItemId+=1,e+""},E.prototype.getNextColor=function(){return Y.getNextColor(this.listModel)},E.prototype.getNextDisplayIndex=function(){return this.listModel.nextDisplayIndex},E.prototype._clearPendingImageUploads=function(){this.__pendingImageUploads={}},E.prototype.isUploadingImages=function(){return 0<Object.keys(this.__pendingImageUploads).length},E.prototype.getExpressionAnalysis=function(){return this.listModel.expressionAnalysis},E.prototype.createItemModel=function(e){return Y.modelFromSpec(this.listModel,e)},E.prototype.getItemModel=function(e){return Y.getItemById(this.listModel,e)},E.prototype.getItemModelByIndex=function(e){return Y.getItemByIndex(this.listModel,e)},E.prototype.getItemCount=function(){return Y.getItemCount(this.listModel)},E.prototype.getItemEditableLabelMode=function(e){var t=this.getItemModel(e);if(t&&"expression"===t.type)return H.getEditableLabelMode(t)},E.prototype.isItemSecret=function(e){var t=this.getItemModel(e);return!!t&&Y.isItemSecret(t)},E.prototype.isItemSelected=function(e){var t=this.getItemModel(e);return!!t&&Y.isItemSelected(t)},E.prototype.isItemSelectable=function(e){var t=this.getItemModel(e);return!!t&&Y.isItemSelectable(t)},E.prototype.anyItemDependsOnRandomSeed=function(){return Y.anyItemDependsOnRandomSeed(this.listModel)},E.prototype.getAllItemModels=function(){return Y.getAllItemModels(this.listModel)},E.prototype.getAllModelsWithSliders=function(){return Y.getAllModelsWithSliders(this.listModel)},E.prototype.getGraphSettings=function(){return this.graphSettings},E.prototype.getAudioGraph=function(){return void 0!==this.grapher&&"2d"===this.grapher.type?this.grapher.audioGraph:void 0},E.prototype.inAudioTraceMode=function(){var e=this.getAudioGraph();return!(!e||!e.audioTraceActive)},E.prototype.canAudioTrace=function(){var e=this.getAudioGraph();return!!e&&e.canAudioTraceCurrentExp()},E.prototype.isAudioTracing=function(){var e=this.getAudioGraph();return!!e&&e.getIsTracing()},E.prototype.expressionsAreFullWidth=function(){return this.isNarrow()||!1===this.graphSettings.config.graphpaper},E.prototype.getExpListWidthString=function(){return this.expressionsAreFullWidth()?"100%":this.rootElt?this._getExpListWidth()+"px":"0"},E.prototype.getExpListWidth=function(){return this.rootElt?this._getExpListWidth():0},E.prototype.findFirstVisibleItem=function(){var e=w.getFirstVisibleItemId(this,this._previousFirstVisibleId);return(this._previousFirstVisibleId=e)?this.getItemModel(e):void 0},E.prototype.findLastVisibleItem=function(){var e=w.getLastVisibleItemId(this,this._previousLastVisibleId);return(this._previousLastVisibleId=e)?this.getItemModel(e):void 0},E.prototype.updateRenderShellsAfterDispatch=function(){if(this.rootElt&&this.isListVisible()){var e=this.findFirstVisibleItem(),t=this.findLastVisibleItem(),i=e&&this.getItemRootNodeById(e.id),s=t&&this.getItemRootNodeById(t.id);if(i!==this.lastInfiniteScrollFirstDOM||s!==this.lastInfiniteScrollLastDOM||this.hasDispatchSinceLastInfiniteScrollUpdate){this.lastInfiniteScrollFirstDOM=i,this.lastInfiniteScrollLastDOM=s;for(var o=this.hasDispatchSinceLastInfiniteScrollUpdate=!1,a=e?e.index:1/0,r=t?t.index:1/0,n=this.listModel.dragState&&this.listModel.dragState.firstItemId,l=0,d=this.getAllItemModels();l<d.length;l++){var p,c,h=d[l],u=!(h.index>=a&&h.index<=r&&!h.isHiddenFromUI);n==h.id&&(u=!1),h.renderShell!==u&&(o=!0,(h.renderShell=u)&&(!(p=this.getItemRootNodeById(h.id))||0<(c=p.getBoundingClientRect().height)&&(h.cachedRenderHeight=c)))}o&&this.markTickRequiredNextFrame()}}},E.prototype.updateRenderShellsBeforePaint=function(){if(this.hasDispatchSinceLastInfiniteScrollUpdate=!0,this.inPrintMode)for(var e=0,t=this.getAllItemModels();e<t.length;e++)(i=t[e]).renderShell=!1;else{for(var i,s=0,o=this.getAllItemModels();s<o.length;s++)(i=o[s]).isHiddenFromUI&&(i.renderShell=!0);var a=this.getSelectedItem();a&&(a.renderShell=!1)}},E.prototype.updateDragDrop=function(){var e,t,i=this.listModel.dragState;i&&(!(e=this.getItemModel(i.firstItemId))||(t=this.dragdrop_expressions.applyDrag())&&(Y.setDragState(this.listModel,t.dragState),J.setFolderId(e,t.folderId),e.index!==t.newIndex&&Y.moveItemsTo(this.listModel,e.index,t.newIndex,i.numberOfItems)))},E.prototype._tickSliders=function(t){this.getPlayingSliders().forEach(function(e){H.tickSliderStep(e,t)})},E.prototype.tickPlayingSimulationIfAppropriate=function(e){var t,i=Q.getEvaluatedFPS(e);if(0===i)return{canEnqueue:!1};if(i<60){var s=this.cachedPlayingSimulationData&&this.cachedPlayingSimulationData.lastTickTime,o=void 0===s?1/0:s+1e3/i;if(Date.now()<o)return{canEnqueue:!1}}if(this.isSimulationBlockedByTransientOutput(e))return{canEnqueue:!1};if(this.areClickableObjectsTemporarilyDisabled()){var a=this.clickableObjectQueueInfo.queuedItems,r=a[a.length-1];return{canEnqueue:!(r&&"simulation-tick"===r.type)}}return this.applySimulationUpateRules(e.id),this.cachedPlayingSimulationData&&(this.cachedPlayingSimulationData.lastTickTime?(t=this.cachedPlayingSimulationData.lastTickTime+1e3/i,this.cachedPlayingSimulationData.lastTickTime=Math.max(Date.now()-500,t)):this.cachedPlayingSimulationData.lastTickTime=Date.now()),{canEnqueue:!1}},E.prototype.invalidatePlayingSimulationCache=function(){this.cachedPlayingSimulationData=void 0},E.prototype.getPlayingSimulation=function(){var e=this.cachedPlayingSimulationData;if(!e){var t=this._scanAllItemsForPlayingSimulation();return this.cachedPlayingSimulationData={id:t&&t.id,lastTickTime:0},t}if(e.id){var i=this.getItemModel(e.id);return i&&"simulation"===i.type&&!0===i.isPlaying?i:(v.notify("getPlayingSimulation: invalid cache",{metaData:{cache:e,itemExists:!!i,itemType:i&&i.type,itemPlaying:i&&i.isPlaying}}),this.invalidatePlayingSimulationCache(),this.getPlayingSimulation())}},E.prototype._scanAllItemsForPlayingSimulation=function(){for(var e=0,t=this.getAllItemModels();e<t.length;e++){var i=t[e];if("simulation"===i.type&&i.isPlaying)return i}},E.prototype.isSimulationBlockedByTransientOutput=function(e){for(var t=Q.getAllOutputs(e),i=0,s=this.getAllItemModels();i<s.length;i++){var o=s[i];if("expression"==o.type&&H.isTransientAndShouldBlockSimulation(o)&&(a=H.getAssignment(o))&&t[a])return!0}if(this.focusLocation&&"expression"===this.focusLocation.type){var a,r=this.getItemModel(this.focusLocation.id);if(r&&"expression"===r.type&&(a=H.getAssignment(r))&&t[a])return!0}return!1},E.prototype.stopPlayingSimulation=function(){var e=this.getPlayingSimulation();e&&Q.setIsPlaying(e,!1)},E.prototype.stopAllSliders=function(){for(var e=0,t=this.getAllItemModels();e<t.length;e++){var i=t[e];"expression"===i.type&&i.slider.isPlaying&&H.setSliderIsPlaying(i,!1)}},E.prototype.getPlayingSliders=function(){for(var e=[],t=0,i=this.getAllItemModels();t<i.length;t++){var s=i[t];"expression"===s.type&&s.sliderExists&&s.slider.isPlaying&&e.push(s)}return e},E.prototype.hasAnyTableThatRequiresTicks=function(){for(var e=0,t=this.getAllItemModels();e<t.length;e++){var i=t[e];if(!i.renderShell&&"table"===i.type&&25<=i.rowModels.length)return!0}return!1},E.prototype.areAnyImagesLoading=function(){return Y.areAnyImagesLoading(this.listModel)},E.prototype._commitUserRequestedViewport=function(e){this.grapher&&this.grapher.setUserRequestedViewport(e)},E.prototype._setAxisLimitLatex=function(e,t){var i,s;this.settingsViewModel=N.__assign(N.__assign({},this.settingsViewModel),{limitLatex:N.__assign(N.__assign({},this.settingsViewModel.limitLatex),((i={})[e]=t,i))});var o,a=""!==t||"xstep"!==e&&"ystep"!==e?x.default(t,this.graphSettings.degreeMode):0;switch(e){case"xstep":if(a<0||!isFinite(a))return;this.graphSettings.setProperty("xAxisStep",a);break;case"ystep":if(a<0||!isFinite(a))return;this.graphSettings.setProperty("yAxisStep",a);break;case"xmin":case"xmax":case"ymin":case"ymax":if(!this.grapher)return;var r=this.grapher.viewportController.getViewport(),n="ymin"===e?"ymax":"ymax"===e?"ymin":"xmin"===e?"xmax":"xmin",l=x.default(this.settingsViewModel.limitLatex[n],this.graphSettings.degreeMode),d=u.Viewport.fromObject(N.__assign(N.__assign({},r.toObject()),((s={})[e]=a,s[n]=l,s)));if(!d.isValid())return;this.grapher.viewportController.setViewport(d);var p="xmin"===e||"xmax"===e?"x":"y";this.graphSettings.setProperty("lastChangedAxis",p);var c=d.isSquare(this.grapher.getProjection().screen);this.graphSettings.setProperty("squareAxes",c)}this.grapher&&(o=this.grapher.viewportController.getViewport().toObject(),this._commitUserRequestedViewport(o))},E.prototype.canUserAddExpressions=function(){return!!this.graphSettings.config.expressions},E.prototype.areNotesEnabled=function(){return!!this.graphSettings.config.notes},E.prototype.areSlidersEnabled=function(){return!!this.graphSettings.config.sliders},E.prototype.areLinksEnabled=function(){return!!this.graphSettings.config.links},E.prototype.areImagesEnabled=function(){var e=window.FileReader,t=a.IS_IPAD&&a.IOS_VERSION&&8===a.IOS_VERSION[0]&&0===a.IOS_VERSION[1]&&0===a.IOS_VERSION[2];return!(!this.graphSettings.config.images||!e||t)},E.prototype.areFoldersEnabled=function(){return!!this.graphSettings.config.folders},E.prototype.areSimulationsEnabled=function(){return this.canAuthorClickableObjects()},E.prototype.isDecimalToFractionEnabled=function(){return!!this.graphSettings.config.decimalToFraction},E.prototype.isTraceEnabled=function(){return!!this.graphSettings.config.trace},E.prototype.areFunctionsRestricted=function(){return!!this.graphSettings.config.restrictedFunctions},E.prototype.areGeometryFunctionsForceEnabled=function(){return!!this.graphSettings.config.forceEnableGeometryFunctions},E.prototype.isQwertyKeyboardEnabled=function(){return!!this.graphSettings.config.qwertyKeyboard},E.prototype.isZoomFitEnabled=function(){return!!this.graphSettings.config.zoomFit},E.prototype.canEditOnWeb=function(){return!!this.graphSettings.config.editOnWeb},E.prototype.hasTransparentBackground=function(){return!!this.graphSettings.config.transparentBackground},E.prototype.shouldAudioTraceReverseExpressions=function(){return!!this.graphSettings.config.audioTraceReverseExpressions},E.prototype.hasDefaultState=function(){return!!this.graphSettings.defaultState},E.prototype.getDefaultStateViewport=function(){var e=this.graphSettings.defaultState;if(e&&e.graph)return e.graph.viewport},E.prototype.getColors=function(){return this.graphSettings.config.colors},E.prototype.getImageOpacities=function(){return["0.2","0.4","0.6","0.8","1"]},E.prototype.getUIDragModes=function(){return[q.DragMode.X,q.DragMode.Y,q.DragMode.XY]},E.prototype.getNumberOfItemsInFolder=function(e){return Y.getNumberOfItemsInFolder(this.listModel,e)},E.prototype.getEnabledDragModesForItem=function(e){var t=this.getItemModel(e);if(!t||"expression"!==t.type)return[];var i=t.formula,s=[];if(!i.move_strategy)return s;var o="none"!==i.move_strategy[0].type,a="none"!==i.move_strategy[1].type,r=o&&a;return o&&s.push(q.DragMode.X),a&&s.push(q.DragMode.Y),r&&s.push(q.DragMode.XY),s},E.prototype.shouldShowEvaluationForItem=function(e){var t=this.getItemModel(e);return!!t&&"expression"===t.type&&H.shouldShowEvaluation(t)},E.prototype.getEvaluationValueForItem=function(e){var t=this.getItemModel(e);return t&&"expression"===t.type?H.getEvaluationValue(t):NaN},E.prototype.canDisplayEvaluationForItemAsFraction=function(e){if(!this.isDecimalToFractionEnabled())return!1;var t=this.getItemModel(e);if(!t)return!1;if("expression"!==t.type)return!1;if(H.isGraphable(t))return!1;var i=this.getEvaluationValueForItem(e);return"number"==typeof i&&B.canDisplayAsFraction(i)},E.prototype.shouldEvaluationForItemDisplayAsFraction=function(e){if(!this.isDecimalToFractionEnabled())return!1;var t=this.getItemModel(e);return!!t&&"expression"===t.type&&H.shouldEvaluationDisplayAsFraction(t)},E.prototype.getEvaluationLabelOptionsForItem=function(e){return N.__assign(N.__assign({},b.EvaluationLabelOptions),{displayAsFraction:this.shouldEvaluationForItemDisplayAsFraction(e)})},E.prototype.getPointStyles=function(){return[n.PointStyle.POINT,n.PointStyle.OPEN,n.PointStyle.CROSS]},E.prototype.getLineStyles=function(){return[n.LineStyle.SOLID,n.LineStyle.DASHED,n.LineStyle.DOTTED]},E.prototype.getOpacities=function(){return[r.LOW,r.DEFAULT,r.HIGH]},E.prototype.isInEditListMode=function(){return this.layoutModel.inEditListMode},E.prototype.canAdministerSecretFolders=function(){return this.graphSettings.config.administerSecretFolders},E.prototype.getInvertedColors=function(){return!!this.graphSettings.config.invertedColors},E.prototype.canUseAdvancedStyling=function(){return this.graphSettings.config.advancedStyling},E.prototype.canAuthorClickableObjects=function(){return this.graphSettings.config.clickableObjects},E.prototype.isDegreeMode=function(){return this.graphSettings.degreeMode},E.prototype.isGraphSettingsOpen=function(){return this.layoutModel.graphSettingsOpen},E.prototype.isAddExpressionOpen=function(){return this.layoutModel.addExpressionOpen},E.prototype.shouldRenderList=function(){if(this.layoutModel.expressionsVisible)return!0;var e=this.layoutModel.expressionsHiddenTime;return void 0!==e&&Date.now()-e<=500},E.prototype.isListVisible=function(){return this.layoutModel.expressionsVisible},E.prototype.isGrapherEnabled=function(){return!1!==this.graphSettings.config.graphpaper},E.prototype.isListEnabled=function(){return!1!==this.graphSettings.config.expressions},E.prototype.areDistributionsEnabled=function(){return!0===this.graphSettings.config.distributions},E.prototype.isExpressionListFocused=function(){var e=this.getFocusLocation();if(!e)return!1;switch(e.type){case"settings":case"expression-menu":case"editable-label":return!1;case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":case"clickableinfo-rule":case"table":case"image":case"simulation":case"readonly-expression":case"braille-output":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-table-btn":case"add-folder-btn":case"add-simulation-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"expression-icon":case"image-icon":case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"simulation-icon":case"simulation-step-icon":case"hide-expression-list-btn":case"show-expression-list-btn":return!0;default:return e}},E.prototype.needsFakeKeypad=function(){if(this.inAudioTraceMode()&&this.isKeypadEnabled())return!0;var e=this.getFocusLocation();if(!e)return!1;if("none"!==this.getBrailleMode()&&k.getFocusedBrailleElement())return!1;switch(e.type){case"settings":return"icon"!==e.location&&"degree-mode"!==e.location;case"distribution-param":case"cdf-limit":case"slider-limit":case"domain-limit":case"expression":case"visualization-prop":case"search-expressions":return!0;case"expression-menu":return"opacity"===e.location||"linewidth"===e.location||"lineopacity"===e.location||"pointopacity"===e.location||"colorlatex"===e.location;case"clickableinfo-rule":return!0;case"table":if(this.isInEditListMode())return!1;var t=e.location;if(0===t.row)return!0;var i=this.getItemModel(e.id);if(!i||"table"!==i.type)return!1;var s=i.columnModels[t.column];return!!s&&!s.disabled;case"image":return"name"!==e.location;case"simulation":return!1;case"readonly-expression":case"braille-output":case"table-container":case"text":case"folder":case"add-item-btn":case"add-expression-btn":case"add-table-btn":case"add-folder-btn":case"add-simulation-btn":case"add-image-btn":case"change-image-btn":case"edit-list-toggle":case"hide-expression-list-btn":case"show-expression-list-btn":return!1;case"expression-icon":case"image-icon":case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"simulation-icon":case"simulation-step-icon":return!1;case"editable-label":return this.getItemEditableLabelMode(e.id)===j.EditableLabelMode.Math;default:return e}},E.prototype.getBrandingMode=function(){return this.getEditLink()?"static-edit-link":this.getGraphSettings().config.editOnWeb?"edit-link":"powered-by"},E.prototype.getEditLink=function(){return window.iframeEmbedBrandingLink},E.prototype._expressionZoomFit=function(e){var t,i=this.getItemModel(e);this.grapher&&this.isZoomFitEnabled()&&i&&("expression"===i.type||"table"===i.type)&&i.boundingBoxes&&i.boundingBoxes.length&&(t=I.getRecommendedViewportForExpression(i.boundingBoxes,this.grapher.viewportController.getProjection()))&&this.grapher.viewportController.zoomCustom(t)},E.prototype._deleteItemAndAnimateOut=function(e,t){var i=this,s=this.getItemSelectorById(e);s&&(s.css({transition:"0.2s",opacity:"0",transform:"scale(.1, .1)"}),setTimeout(function(){i.dispatch({type:"finish-deleting-item-after-animation",id:e,setFocusAfterDelete:t})},200))},E.prototype._finishDeletingItemAfterAnimation=function(e,t){var i,s,o,a,r=this.getItemModel(e);r&&(s=(i=this.getItemSelectorById(e))&&document.activeElement&&0<M(document.activeElement).closest(i).length,o=Y.findPrevSelectableItem(this.listModel,r.index),this._removeExpressionSynchronously(r),t&&s&&(o||(a=Y.getFirstSelectableItem(this.listModel))&&(o=a),o&&Z.moveFocusToItem(this,o.id,"end")))},E.prototype._removeExpressionSynchronously=function(e){var t;Y.removeItemAtIndex(this.listModel,e.index),Y.hasNoVisibleExpressions(this.listModel)&&(t=this.createItemModel({type:"expression",id:this.generateId(),color:this.getNextColor()}),Y.insertItemAtEnd(this.listModel,t))},E.prototype.setRootElt=function(e){this.rootElt=e,this.dragdrop_expressions=new D.default(this)},E.prototype._hideExpressions=function(){this.graphSettings.config.expressions&&(Y.setSelected(this.listModel,void 0),this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{expressionsVisible:!1,expressionsHiddenTime:Date.now()}),l.default())},E.prototype._showExpressions=function(){this.graphSettings.config.expressions&&(this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{expressionsVisible:!0}),l.default())},E.prototype._showToast=function(e){var t,i=this;this.toastData=e,this.toastData.hasOwnProperty("undoCallback")&&!a.IS_MOBILE&&(t=a.IS_APPLE?this.s("graphing-calculator-text-toast-undo-cmd-z"):this.s("graphing-calculator-text-toast-undo-ctrl-z"),this.toastData.message+=" "+t),clearTimeout(this._hideToastTimeout);var s="number"==typeof e.hideAfter?e.hideAfter:6e3;0<s&&(this._hideToastTimeout=setTimeout(function(){i.dispatch({type:"toast/close",onHide:i.toastData.onHide})},s))},E.prototype._setExpressionPropertiesFromAPI=function(e,t){var i=this.getItemModel(e);if(i)if("table"===i.type&&t.columns){t=d.default(t);var s=G.cloneTableAndExtendWithProperties(i,t),o=Y.modelFromSpec(this.listModel,s);this._toplevelReplaceItemAt(i.index,o,!1)}else{var a=this.getItemModel(e);if(!a)return;for(var r in t)if(t.hasOwnProperty(r))switch(r){case"slider":if("expression"!==a.type)continue;var n=t[r];n.hasOwnProperty("min")&&H.setSliderMin(a,n.min),n.hasOwnProperty("max")&&H.setSliderMax(a,n.max),n.hasOwnProperty("step")&&H.setSliderStep(a,n.step);break;case"polarDomain":if("expression"!==a.type)continue;H.setPolarDomainMin(a,p.default(t.polarDomain.min)),H.setPolarDomainMax(a,p.default(t.polarDomain.max));break;case"parametricDomain":if("expression"!==a.type)continue;H.setParametricDomainMin(a,p.default(t.parametricDomain.min)),H.setParametricDomainMax(a,p.default(t.parametricDomain.max));break;case"hidden":this._setItemHidden(e,t.hidden);break;case"secret":J.setSecret(a,t.secret);break;case"color":if("expression"!==a.type)continue;H.setColor(a,t.color);break;case"dragMode":if("expression"!==a.type)continue;H.setDragMode(a,t.dragMode);break;case"label":if("expression"!==a.type)continue;H.setLabel(a,t.label);break;case"showLabel":if("expression"!==a.type)continue;H.setShowLabel(a,t.showLabel);break;case"labelSize":if("expression"!==a.type)continue;H.setLabelSize(a,t.labelSize);break;case"labelOrientation":if("expression"!==a.type)continue;H.setLabelOrientation(a,t.labelOrientation);break;case"verticalLabel":if("expression"!==a.type)continue;H.setVerticalLabel(a,t.verticalLabel);break;case"latex":if("expression"!==a.type)continue;H.setLatex(a,t.latex);break;case"points":if("expression"!==a.type)continue;H.setPoints(a,!!t.points);break;case"lines":if("expression"!==a.type)continue;H.setLines(a,!!t.lines);break;case"pointStyle":if("expression"!==a.type)continue;H.setPointStyle(a,t.pointStyle);break;case"lineStyle":if("expression"!==a.type)continue;H.setLineStyle(a,t.lineStyle);break;case"fill":if("expression"!==a.type)continue;H.setFill(a,t.fill);break;case"fillOpacity":if("expression"!==a.type)continue;H.setFillOpacity(a,t.fillOpacity);break;case"lineOpacity":if("expression"!==a.type)continue;H.setLineOpacity(a,t.lineOpacity);break;case"pointOpacity":if("expression"!==a.type)continue;H.setPointOpacity(a,t.pointOpacity);break;case"id":case"type":case"domain":break;default:throw new Error("trying to call setProperty for: "+r)}}},E.prototype._isParentFolderHidden=function(e){var t=this.getItemModel(e);if(!t)return!1;var i=Y.getParentFolderModel(t);return!!i&&i.hidden},E.prototype._toggleItemHidden=function(e){if(this._isParentFolderHidden(e))this._setItemHidden(e,!1);else{var t=this.getItemModel(e);if(!t)return;switch(t.type){case"expression":case"image":case"folder":this._setItemHidden(e,!t.hidden);break;case"table":case"text":case"simulation":break;default:return t}}},E.prototype._toggleTableColumnHidden=function(e,t){if(this._isParentFolderHidden(e))this._setTableColumnHidden(e,t,!1);else{var i=this.getItemModel(e);if(!i||"table"!==i.type)return;var s=G.getColumnModel(i,t);if(!s)return;this._setTableColumnHidden(e,t,!s.hidden)}},E.prototype._setTableColumnHidden=function(e,t,i){var s,o=this.getItemModel(e);o&&"table"===o.type&&(s=G.shouldHideColumn(o,t),!i&&this._isParentFolderHidden(e)&&this._setItemHidden(o.folderId,!1),G.setColumnHidden(o,t,i),!i&&s&&G.setColumnPoints(o,t,!0))},E.prototype._setItemHidden=function(e,t){var i=this.getItemModel(e);if(i)switch(!t&&"folder"!==i.type&&this._isParentFolderHidden(i.id)&&this._setItemHidden(i.folderId,!1),i.type){case"expression":H.setHidden(i,t);break;case"folder":K.setHidden(i,t);break;case"image":z.setHidden(i,t);break;case"table":case"text":case"simulation":break;default:return i}},E.prototype._addItemToEndFromAPI=function(e){var t=Y.getLastSelectableItem(this.listModel);!e.secret&&t&&"expression"===t.type&&""===t.latex&&Y.removeItemAtIndex(this.listModel,t.index),Y.insertItemAtEnd(this.listModel,e)},E.prototype._toplevelInsertItemAt=function(e,t,i,s){var o=t;Y.insertItemAtIndex(this.listModel,o,e),s&&J.setFolderId(o,s),i&&Z.moveFocusToItem(this,o.id)},E.prototype._toplevelNewItemAtSelection=function(e,t){var i=this.getSelectedItem();if(i){var s="expression"===i.type&&!i.latex;if(s&&!i.folderId&&("expression"!==e.type||e.latex))return this._toplevelReplaceItemAt(i.index,e,t.shouldFocus);if(s&&i.folderId&&"expression"!==e.type&&"folder"!==e.type)return this._toplevelReplaceItemAt(i.index,e,t.shouldFocus);if("folder"!==i.type&&!i.folderId)return this._toplevelInsertItemAt(i.index+1,e,t.shouldFocus,void 0);if("folder"!==i.type&&i.folderId&&"folder"!==e.type)return this._toplevelInsertItemAt(i.index+1,e,t.shouldFocus,i.folderId);if("folder"===i.type&&!i.collapsed&&"folder"!==e.type)return this._toplevelInsertItemAt(i.index+1,e,t.shouldFocus,i.id)}var o=this.getFirstFullyVisibleItem();for(o&&"folder"===o.type&&(o=this.getItemModelByIndex(o.index+1));o&&"folder"!==o.type&&o.folderId;)o=this.getItemModelByIndex(o.index+1);var a=o?o.index:this.getItemCount();return this._toplevelInsertItemAt(a,e,t.shouldFocus,void 0)},E.prototype.getFirstFullyVisibleItem=function(){var e=w.getFirstFullyVisibleItemId(this);if(e)return Y.getItemById(this.listModel,e)},E.prototype.find$=function(e){return M(this.rootElt).find(e)},E.prototype.getExppanelSelectorOrThrow=function(){var e=w.getExppanelElt(this);if(e)return M(e);throw new Error("expected to find $exppanel but could not")},E.prototype.scrollItemIntoView=function(e){if(this.rootElt&&this.isListVisible()){var t=this.getItemSelectorById(e.id),i=w.getExppanelSelector(this);if(t&&i){if("table"===e.type){var s=t.find(".dcg-row .dcg-selected");if(1===s.length)return void o.scrollVisible(s,i,60)}o.scrollVisible(t,i,90)}}},E.prototype.scrollSelectedItemIntoView=function(){var e=this.getSelectedItem();e&&this.scrollItemIntoView(e)},E.prototype._pasteTable=function(e){var t,i,s,o,a,r,n,l,d,p=this;this.grapher&&(t=Y.findAvailableColumnSubscript(this.listModel),i=G.makeTableState(t,e,this),s=this.createItemModel(i),this._toplevelNewItemAtSelection(s,{shouldFocus:!0}),this._closeAddExpression(),o=this.grapher.viewportController.getViewport(),a=c.map(e[0],function(e){return parseFloat(e)}),r=c.map(e[1],function(e){return parseFloat(e)}),n={xmin:c.min(a),xmax:c.max(a),ymin:c.min(r),ymax:c.max(r),type:"table"},isFinite(n.xmin)&&isFinite(n.xmax)&&isFinite(n.ymin)&&isFinite(n.ymax)&&(n.xmax>o.xmax||n.xmin<o.xmin||n.ymax>o.ymax||n.ymin<o.ymin)&&(l=I.getRecommendedViewportForExpression([n],o))&&(d=new u.Viewport(l.xmin,l.xmax,l.ymin,l.ymax),this.grapher.viewportController.setViewport(d),this._showToast({message:this.s("graphing-calculator-text-toast-zoom-to-fit"),undoCallback:function(){p.dispatch({type:"undo"})}})))},E.prototype._insertSeveralExpressions=function(e){for(var t=0;t<e.length;t++){var i=this.createItemModel(e[t]);this._toplevelNewItemAtSelection(i,{shouldFocus:!0})}},E.prototype._appendNumberList=function(e){var t=this.getSelectedItem();if(t&&"expression"===t.type){var i=t.latex,s=this.createItemModel({type:"expression",id:this.generateId(),latex:i+e});return this._toplevelReplaceItemAt(t.index,s,!0)}},E.prototype._openOnWeb=function(){var r=this;this.runAfterDispatch(function(){var e,t,i,s,o,a;r.grapher&&(e=JSON.stringify(r.getState()),t=r.grapher.screenshot({width:100,height:100}),i=(r.getGraphSettings().config.crossOriginSaveTest?"/":"https://www.desmos.com/")+"api/v1/calculator/cross_origin_save",s=M('<input type="text" name="calc_state" />').val(e),o=M('<input type="text" name="thumb_data" />').val(t),a=M('<form target="_blank" method="POST" style="display:none;"></form>').attr("action",i).append(M('<input type="text" name="is_open_on_web" value="true" />')).append(M('<input type="text" name="my_graphs" value="false" />')).append(M('<input type="text" name="is_update" value="false" />')).append(s).append(o),M(r.rootElt).append(a),a.submit().remove())})},E.prototype.notifyBugsnagAboutMissingSelectedItem=function(e,t){var i=Y.getSelected(this.listModel),s="";try{s=i?JSON.stringify(i.cachedUndoRedoFullState,null,2):"undefined"}catch(e){s="[[could not stringify]]"}var o,a="";try{a=i?(o={id:i.id,index:i.index,displayIndex:i.index,secretIndex:i.secretIndex,guid:i.guid,renderShell:i.renderShell,isHiddenFromUI:i.isHiddenFromUI,hasDCGView:!!i.dcgView,cachedRenderHeight:i.cachedRenderHeight},JSON.stringify(o,null,2)):"undefined"}catch(e){a="[[could not stringify]]"}var r="";try{r=JSON.stringify(Y.getUndoRedoFullState(this.listModel),null,2)}catch(e){r="[[could not stringify]]"}v.notify("ReplaceItemAtError: no item at index",{metaData:{index:e,shouldFocus:t,selectedModelJSON:a,selectedItemJSON:s,listStateJSON:r}})},E.prototype._toplevelReplaceItemAt=function(e,t,i){var s=t,o=this.getItemModelByIndex(e);o||this.notifyBugsnagAboutMissingSelectedItem(e,i);var a="folder"!==o.type&&o.folderId;Y.removeItemAtIndex(this.listModel,e),Y.insertItemAtIndex(this.listModel,s,e),a&&J.setFolderId(s,a),i&&Z.moveFocusToItem(this,s.id)},E.prototype.createSlidersForItem=function(e,t){var a=this,i=this.getItemModel(e);if(i){var s="folder"!==i.type&&i.folderId,o=i.index+1,r=[];Y.eachLatexForItem(i,function(e){r.push(e)});for(var n=y.computeDefaults(r,t),l=t.map(function(e){var t=n[e],i="1";t&&void 0!==t.value&&(i=t.value+"");var s=e?B.identifierToLatex(e)+"="+i:"",o={type:"expression",id:a.generateId(),latex:s,color:a.getNextColor(),hidden:!!s};return t&&(void 0!==t.min&&(o.slider||(o.slider={}),o.slider.hardMin=!0,o.slider.min=t.min+""),void 0!==t.max&&(o.slider||(o.slider={}),o.slider.hardMax=!0,o.slider.max=t.max+""),void 0!==t.step&&(o.slider||(o.slider={}),o.slider.step=t.step+"")),o}),d=l.length-1;0<=d;d--){var p=this.createItemModel(l[d]);Y.insertItemAtIndex(this.listModel,p,o),s&&J.setFolderId(p,s)}var c=l[l.length-1];""===c.latex?Z.moveFocusToItem(this,c.id):Z.setFocusLocation(this,void 0)}},E.prototype._uploadImagesAndWaitForThemToLoad=function(e){var t=this,i=e.files,s=e.id;if(i&&0!==i.length)if(s&&1<i.length)this._showToast({message:this.s("graphing-calculator-text-toast-choose-one-file")});else{var o=z.uploadImages({controller:this,files:i,id:s}),a=o.errors[0];a&&this._showToast({message:a});for(var r=0,n=o.tokens;r<n.length;r++){var l=n[r];this.__pendingImageUploads[l]=!0}this.isUploadingImages()&&this._showToast({message:this.s("graphing-calculator-text-toast-uploading-images"),onHide:function(){t._clearPendingImageUploads()}})}else this._showToast({message:this.s("graphing-calculator-text-toast-no-file-selected")})},E.prototype.getImageToRetry=function(){for(var e,t=0,i=this.getAllItemModels();t<i.length;t++){var s=i[t];"image"===s.type&&"failed"===s.loadStatus&&(!e||e.failures>s.failures)&&(e=s)}return e},E.prototype.retryLoadingFailedImage=function(e){var t=Date.now(),i=t-this.imageRetryState.lastAttemptTime,s=1e3*Math.pow(2,this.imageRetryState.attempts);0<this.imageRetryState.attempts&&i<s||(z.retryLoading(e),this.imageRetryState={lastAttemptTime:t,attempts:this.imageRetryState.attempts+1})},E.prototype.getSelectedItem=function(){return Y.getSelected(this.listModel)},E.prototype.getOpenItemMenu=function(){return this.listModel.openItemMenu},E.prototype.getFocusedItem=function(){return Z.getFocusedItem(this)},E.prototype.getFocusLocation=function(){return this.focusLocation},E.prototype.isFocusLocationFocused=function(e){var t=this.focusLocation;return!(!t||!e)&&c.isEqual(t,e)},E.prototype.isCurrentFocusLocationValid=function(){var e=this.focusLocation;if(!e)return!0;if("settings"===e.type)return"icon"===e.location||this.isGraphSettingsOpen();if("add-item-btn"===e.type||"edit-list-toggle"===e.type||"hide-expression-list-btn"===e.type||"show-expression-list-btn"===e.type)return this.isListEnabled();if("add-expression-btn"===e.type||"add-table-btn"===e.type)return this.layoutModel.addExpressionOpen;if("add-folder-btn"===e.type)return this.layoutModel.addExpressionOpen&&this.areFoldersEnabled();if("add-simulation-btn"===e.type)return this.layoutModel.addExpressionOpen&&this.areSimulationsEnabled();if("add-image-btn"===e.type)return this.layoutModel.addExpressionOpen&&this.areImagesEnabled();if("search-expressions"===e.type)return this.expressionSearchOpen;var t=this.getItemModel(e.id);if(!t)return!1;if("change-image-btn"===e.type)return"image"===t.type&&!(!this.listModel||!this.listModel.openItemMenu)&&this.listModel.openItemMenu.model===t;if("expression-menu"===e.type){if("start"===e.location||"end"===e.location||"anywhere"===e.location||"colorlatex"===e.location)return!0;if("expression"!==t.type)return!1;var i=t.points,s=t.lines,o=t.fill,a=m.getReconciledExpressionProps(t.formula.expression_type,{points:i,lines:s,fill:o});return!!(a.fill||a.points||a.lines)}if(!this.isItemSelected(e.id)&&"editable-label"!==e.type)return!1;switch(e.type){case"domain-limit":return"expression"===t.type&&!!H.hasDomain(t);case"expression-icon":return!0;case"image-icon":return"image"===t.type&&"loading"!==t.loadStatus&&"failed"!==t.loadStatus&&!t.error;case"simulation-icon":case"simulation-step-icon":return"simulation"===t.type;case"slider-icon":case"slider-animation-properties-icon":case"slider-thumb":case"slider-limit":return"expression"===t.type&&!!H.hasSlider(t);case"visualization-prop":return"expression"===t.type&&!!H.isVisualization(t);case"clickableinfo-rule":return"expression"===t.type?!!H.isClickableAllowed(t)&&!!H.isClickableRuleDefined(t,e.location.ruleId)&&t.clickableInfo.enabled:"image"===t.type?!!z.isClickableRuleDefined(t,e.location.ruleId)&&t.clickableInfo.enabled:"simulation"===t.type&&Q.isClickableRuleDefined(t,e.location.ruleId);case"distribution-param":if("expression"!==t.type)return!1;var r=H.parseToplevelFunction(t);return!!r&&e.location in r.values;case"cdf-limit":return"expression"===t.type&&H.shouldShowCDFFooter(t);case"image":return"image"===t.type;case"simulation":return"simulation"===t.type;case"folder":return"folder"===t.type;case"text":return"text"===t.type;case"expression":return"expression"===t.type&&!this.isInEditListMode();case"readonly-expression":return"expression"===t.type&&this.isInEditListMode();case"braille-output":return"expression"===t.type&&"none"!==this.getBrailleMode();case"table":return"table"===t.type&&!!G.doesCellExist(t,e.location);case"table-container":return"table"===t.type&&this.isInEditListMode();case"editable-label":return"expression"===t.type&&H.hasEditableLabel(t);default:return e}},E.prototype.isDragDropActive=function(){return!!this.listModel.dragState},E.prototype.isItemBeingDragged=function(e){var t=this.listModel.dragState;return!(!t||t.firstItemId!==e)},E.prototype.getDraggedItemId=function(){var e=this.listModel.dragState;return e&&e.firstItemId},E.prototype.getRawDragState=function(){return this.listModel.dragState},E.prototype.initStateStack=function(){this.stateStack=new h.default,this.stateStack.addState({diffState:this.getUndoRedoDiffState(),fullState:this.getUndoRedoFullState()})},E.prototype.getUndoRedoDiffState=function(){return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:this.grapher?this.grapher.getUndoRedoState():void 0,expressions:Y.getUndoRedoDiffState(this.listModel),wasCompleteSetState:this.isCurrentlyDoingSetState}},E.prototype.getUndoRedoFullState=function(){return{randomSeed:this.getRandomSeed(),layoutModel:this.layoutModel,settingsViewModel:this.settingsViewModel,graph:this.grapher?this.grapher.getUndoRedoState():void 0,expressions:Y.getUndoRedoFullState(this.listModel),wasCompleteSetState:this.isCurrentlyDoingSetState}},E.prototype.getState=function(e){var t={stripDefaults:!0};e&&e.hasOwnProperty("stripDefaults")&&(t.stripDefaults=!!e.stripDefaults);var i={version:g.currentVersion,randomSeed:this.getRandomSeed(),graph:this.grapher?this.grapher.getState(t):this.getBlankState().graph,expressions:Y.getState(this.listModel,t)};return e&&e.avoidBackMigration?d.default(i):g.migrateToPersisted(d.default(i))},E.prototype.getBlankState=function(){return this.graphSettings.config.clearIntoDegreeMode?N.__assign(N.__assign({},_.default),{graph:N.__assign(N.__assign({},_.default.graph),{degreeMode:!0})}):_.default},E.prototype.externalSetState=function(e,t){this._clearPendingImageUploads(),t=t||{},"string"==typeof(e=e||this.getBlankState())&&(e=JSON.parse(e)),e=e&&g.migrateToLatest(e);var i=this.layoutModel;this.setState(e,t),this.layoutModel=N.__assign(N.__assign({},$.defaultLayoutModel(this.graphSettings.config)),{keypadMinimized:i.keypadMinimized,keypadLayout:i.keypadLayout,keypadFunctionsTab:i.keypadFunctionsTab,keypadFunctionsOpen:i.keypadFunctionsOpen,expressionsVisible:!!this.graphSettings.config.expressions&&(this.isListVisible()||!!t.forceExpressionsOpen)}),this.settingsViewModel=S.defaultSettingsViewModel(),Z.setFocusLocation(this,void 0),t.forceUnsavedChanges?this.enqueueEvent("change"):this.enqueueEvent("clearUnsavedChanges")},E.prototype.setState=function(e,t){var i;this.isCurrentlyDoingSetState=!0,this.invalidatePlayingSimulationCache(),"graph"in e&&this.grapher&&this.grapher.setGrapherState(e.graph),"expressions"in e&&(Y.setSelected(this.listModel,void 0),(i=Y.getLargestIntegerId(e.expressions))>=this.__nextItemId&&(this.__nextItemId=i+1),Y.setListState(this.listModel,e.expressions,t||{})),e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel),t&&t.allowUndo||this.clearUndoRedoHistory(),this.setRandomSeed(e.randomSeed||se.default())},E.prototype.updateToState=function(e){this.isCurrentlyDoingRestoreState=!0,this.invalidatePlayingSimulationCache(),"graph"in e&&this.grapher&&this.grapher.setGrapherState(e.graph,{doNotClear:!0}),"expressions"in e&&Y.restoreListState(this.listModel,e.expressions),e.layoutModel&&(this.layoutModel=e.layoutModel),e.settingsViewModel&&(this.settingsViewModel=e.settingsViewModel)},E.prototype.commitUndoRedoSynchronously=function(e){var t,i,s=this.stateStack.getState(),o=s&&s.diffState,a=this.getUndoRedoDiffState();t=o,i=a,c.isEqual(A(t),A(i))||(this.stateStack.addState({diffState:a,fullState:this.getUndoRedoFullState()}),this.enqueueEvent("change"))},E.prototype.undo=function(){var e;this.canUndo()&&(this.stateStack.undo(),(e=this.stateStack.getState().fullState).wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change"))},E.prototype.redo=function(){var e;this.canRedo()&&(this.stateStack.redo(),(e=this.stateStack.getState().fullState).wasCompleteSetState?this.setState(e,{allowUndo:!0}):this.updateToState(e),this.enqueueEvent("change"))},E.prototype.clearUndoRedoHistory=function(){this.stateStack.clear()},E.prototype.canUndo=function(){return this.stateStack.canUndo()},E.prototype.canRedo=function(){return this.stateStack.canRedo()},E.prototype._closeAddExpression=function(){this.layoutModel=N.__assign(N.__assign({},this.layoutModel),{addExpressionOpen:!1})},E.prototype.doesDOMHaveSize=function(){return 0<this.layoutMeasurements.width&&0<this.layoutMeasurements.height},E.prototype._getExpListWidth=function(){if(void 0!==this.userSpecifiedExpListWidth)t=Math.max(280,Math.min(this.layoutMeasurements.width-200,this.userSpecifiedExpListWidth));else{if(!(t=this.layoutMeasurements.width))return 356;var e=.2*t+160,t=Math.min(500,Math.max(280,e))}var i=this.layoutMeasurements.width-this.layoutMeasurements.height;return Math.abs(i-t)<=10?i:t},E.prototype._setExpListWidth=function(e){this.userSpecifiedExpListWidth!==e&&(this.userSpecifiedExpListWidth=e)},E.prototype.getKeypadHeight=function(){return this.computeMajorLayout().keypad.height},E.prototype.isKeypadEnabled=function(){return!!this.graphSettings.config.keypad},E.prototype.isKeypadOpen=function(){var e=this.layoutModel.keypadMinimized&&!this.isNarrow();return this.needsFakeKeypad()&&!e},E.prototype.isKeypadFunctionsPopoverOpen=function(){return!!this.layoutModel.keypadFunctionsOpen},E.prototype.getKeypadLayout=function(){return this.layoutModel.keypadLayout},E.prototype.isLetterKeypadOpen=function(){var e=this.getKeypadLayout();return this.isKeypadOpen()&&("letters"===e||"noQwertyLetters"===e||"capitalLetters"===e||"noQwertyCapitalLetters"===e)},E.prototype.getKeypadFunctionsTab=function(){return this.layoutModel.keypadFunctionsTab},E.prototype.isFileDraggedOver=function(){return this.layoutModel.isFileDraggedOver},E.prototype.computeMajorLayout=function(){var e=this.layoutMeasurements.width,t=this.layoutMeasurements.height,i=this.isNarrow(),s=this.isListVisible(),o=this.isKeypadOpen(),a=!this.isGrapherEnabled(),r=!this.isListEnabled(),n={left:0,top:0,width:0,height:0},l={left:0,top:0,width:0,height:0},d={left:0,top:t,width:e,height:this.getGraphSettings().config.projectorMode?i?185:193:169};return r?(l.width=e,l.height=t):a?(n.width=e,n.height=t):s?i?(n.width=e,n.height=Math.round(.58*t),n.top=t-n.height,l.width=e,l.height=t-n.height):(n.width=this.getExpListWidth(),n.height=t,l.left=n.width,l.width=e-l.left,l.height=t):s||(i?(n.width=e,n.height=Math.round(.58*t),n.top=t):(n.width=this.getExpListWidth(),n.height=t,n.left=-n.width),l.width=e,l.height=t),o&&(d.top-=d.height,r||(n.height-=d.height)),{list:n,grapher:l,keypad:d}},E.prototype.isNarrow=function(){return this.layoutMeasurements.width<450},E.prototype.getLayoutMeasurements=function(){return this.layoutMeasurements},E.prototype.getCapExpressionSize=function(){return!!this.getGraphSettings().config.capExpressionSize},E.prototype.handleAudioTraceCommand=function(e){var t=this.getAudioGraph();if(void 0!==t){var i=t.agNavigator;switch(e){case"on":this.runAfterDispatch(function(){t.enterAudioTrace({fromKeypad:!0})});break;case"off":this.runAfterDispatch(function(){t.exitAudioTrace()});break;case"hear-graph":t.hearGraph();break;case"stop-graph":this.runAfterDispatch(function(){t.stopGraph()});break;case"volume-down":t.adjustVolume("down");break;case"volume-up":t.adjustVolume("up");break;case"speed-down":t.speedDown();break;case"speed-up":t.speedUp();break;case"previous-point":this.runAfterDispatch(function(){t.reportAndMoveToPrevPoint()});break;case"next-point":this.runAfterDispatch(function(){t.reportAndMoveToNextPoint()});break;case"previous-poi":this.runAfterDispatch(function(){t.reportAndMoveToPrevPOI()});break;case"next-poi":this.runAfterDispatch(function(){t.reportAndMoveToNextPOI()});break;case"previous-curve":this.runAfterDispatch(function(){i.prevCurve()});break;case"next-curve":this.runAfterDispatch(function(){i.nextCurve()});break;case"describe-point":t.describePoint();break;case"describe-curve":t.describeCurve();break;case"keyboard-shortcuts":this.enqueueEvent("showHotkeysModal");break;default:return e}}},E.prototype.setAudioTraceSpeed=function(e){var t=this.getAudioGraph();t&&t.adjustPlaybackSpeed(e)},E.prototype.focusGraphPaper=function(){this.find$(".dcg-graph-outer").focus()},E.prototype.setCanShowKeyboardShortcuts=function(e){this.canShowKeyboardShortcuts=e},E.prototype.getCanShowKeyboardShortcuts=function(){return this.canShowKeyboardShortcuts},E);function E(e){var i=this;this.__nextItemId=0,this.__pendingImageUploads={},this.clickableObjectQueueInfo={queuedItems:[],lockoutCounter:0,didDispatchTripLockout:!1},this.nextSubscription=0,this.subscriptions={},this._queuedCallbacks=[],this._hasUnsavedChanges=!1,this.shouldScrollSelectedItemIntoViewAfterDispatch=!1,this.lastParsableObjects={},this.expressionSearchOpen=!1,this.canShowKeyboardShortcuts=!1,this.toastData={},this.s=s.createDictionaryLookupFunction(function(){return i.graphSettings.config.language}),this.raw=function(e,t){return s.raw(e,t)},this.hasTranslation=function(e){var t=i.graphSettings.config.language;return s.hasTranslation(e,t)},this.unpack=function(e){var t=i.graphSettings.config.language;return s.unpack(e,t)},this.dispatch=function(e){var t;if("blur-focus-location"===e.type&&i.dispatcher.isDispatching())i.runAfterDispatch(function(){i.dispatch(e)});else if("set-focus-location"===e.type&&i.dispatcher.isDispatching())i.runAfterDispatch(function(){i.dispatch(e)});else if("tick"===e.type&&i.dispatcher.isDispatching())i.runAfterDispatch(function(){i.dispatch(e)});else for("tick"===e.type||("process-graph-data"===e.type?v.leaveBreadcrumb("dispatch::"+i.bugsnagContext,{type:e.type}):v.leaveBreadcrumb("dispatch::"+i.bugsnagContext,e)),i.dispatcher.isDispatching()&&v.leaveBreadcrumb("dispatch-in-dispatch::"+i.bugsnagContext,{type:e.type}),i.dispatcher.dispatch(e),i.onEventsEmitted&&i.onEventsEmitted(i.enqueuedEvents);t=i._queuedCallbacks.shift();)t()},this._requiresTickNextFrame=!1,this.updateViews=function(){for(var e in i.subscriptions)i.subscriptions[e]()},this.bugsnagContext="",this.inPrintMode=!1,this.lastInfiniteScrollFirstDOM=void 0,this.lastInfiniteScrollLastDOM=void 0,this.hasDispatchSinceLastInfiniteScrollUpdate=!1,this.cachedPlayingSimulationData=void 0,this.stateStack=new h.default,this.isCurrentlyDoingSetState=!1,this.isCurrentlyDoingRestoreState=!1,this.graphSettings=e,this.listModel=Y.init(this),this.layoutModel=$.defaultLayoutModel(this.graphSettings.config),this.layoutMeasurements={width:0,height:0},this.settingsViewModel=S.defaultSettingsViewModel(),this.imageRetryState={lastAttemptTime:0,attempts:0},this.setupDispatcher()}function A(e){return e?N.__assign(N.__assign({},e),{wasCompleteSetState:void 0,layoutModel:void 0,settingsViewModel:void 0}):e}e.default=L});
define('lib/aria',["require","exports","browser","jquery"],function(require,e,t,a){"use strict";var r;Object.defineProperty(e,"__esModule",{value:!0}),e.alert=e.queue=e.clear=void 0;var i=[],n="";function o(e){i.push(e)}e.clear=function(){void 0!==r&&r.empty()},e.queue=o,e.alert=function(e){var a;void 0!==e&&o(e),void 0!==r&&0<i.length&&(a=i.join(" ").replace(/ +(?= )/g,""),r.attr("aria-relevant",n===a&&t.IS_APPLE?"all":"additions text"),r.empty().text(a),n=a),i.length=0},a(document).ready(function(){var e=".dcg-aria-alert";0===a(e).length&&a("body").append("<p aria-live='assertive' aria-atomic='true' class='dcg-aria-alert'></p>"),r=a(e)})});
define('main/instancehotkeys',["require","exports","keys","lib/aria","jquery","graphing-calc/models/expression","browser","touchtracking"],function(require,t,n,c,p,h,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var e=(o.prototype.handleKeydown=function(t){var e,o,r,l=this;if(n.isUndo(t))t.stopPropagation(),t.preventDefault(),this.controller.hasVisibleAndUndoableToast()?this.controller.toastUndo():this.controller.dispatch({type:"undo"});else if(n.isRedo(t))t.stopPropagation(),t.preventDefault(),this.controller.dispatch({type:"redo"});else if(!t.ctrlKey&&!t.metaKey||t.ctrlKey&&t.metaKey||t.altKey||"F"!==n.lookupChar(t))if(t.shiftKey&&(t.altKey||t.metaKey)&&!t.ctrlKey){if("E"===n.lookupChar(t)){if(!this.controller.isListEnabled())return;this.controller.isListVisible()?(this.controller.dispatch({type:"hide-expressions-list"}),c.alert(this.controller.s("graphing-calculator-narration-hide-expression-list"))):(this.controller.dispatch({type:"show-expressions-list"}),this.focusExpressionList(this.controller.s("graphing-calculator-narration-show-expression-list"))),t.preventDefault(),t.stopPropagation()}}else if(t.ctrlKey&&(t.altKey||t.metaKey)&&!t.shiftKey)if("E"===n.lookupChar(t)){if(!this.controller.isListEnabled())return;t.preventDefault(),t.stopPropagation(),this.focusExpressionList(this.controller.s("graphing-calculator-narration-expression-list"))}else if("X"===n.lookupChar(t)){if(!this.controller.isListEnabled())return;t.preventDefault(),t.stopPropagation(),this.controller.canUserAddExpressions()?(c.alert(this.controller.s("graphing-calculator-narration-add-expression")),this.controller.dispatch({type:"new-expression"})):c.alert(this.controller.s("graphing-calculator-narration-unable-to-add-expression"))}else if("O"===n.lookupChar(t)){if(!this.controller.isListEnabled())return;t.preventDefault(),t.stopPropagation(),this.controller.canUserAddExpressions()&&this.controller.areNotesEnabled()?(c.alert(this.controller.s("graphing-calculator-narration-add-note")),this.controller.dispatch({type:"new-text"})):c.alert(this.controller.s("graphing-calculator-narration-unable-to-add-note"))}else"F"===n.lookupChar(t)&&this.controller.canUserAddExpressions()&&this.controller.areFoldersEnabled()?(t.preventDefault(),t.stopPropagation(),c.alert(this.controller.s("graphing-calculator-narration-add-folder")),this.controller.dispatch({type:"new-folder"})):"I"===n.lookupChar(t)&&this.controller.canUserAddExpressions()&&this.controller.areImagesEnabled()?(t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:!1}),this.controller.runAfterDispatch(function(){l.controller.find$(".dcg-add-expression-container input[type=file]").click(),c.alert(l.controller.s("graphing-calculator-narration-add-image"))})):"T"===n.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),this.controller.canUserAddExpressions()?(c.alert(this.controller.s("graphing-calculator-narration-add-table")),this.controller.dispatch({type:"new-table"})):c.alert(this.controller.s("graphing-calculator-narration-unable-to-add-table"))):"G"===n.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:!0})):"P"===n.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),0===(e=this.controller.find$(".dcg-tabbable-point").filter("[tabindex=0]")).length&&(e=this.controller.find$(".dcg-editable-label-border").find('input, textarea, [role="textbox"]')),this.focusElement(e.first(),this.controller.s("graphing-calculator-narration-no-interactive-points"))):"Z"===n.lookupChar(t)?(o=this.controller.getSelectedItem())&&o.id&&this.controller.dispatch({type:"expression-zoom-fit",id:o.id}):"D"===n.lookupChar(t)&&this.controller.canUserAddExpressions()&&(t.preventDefault(),t.stopPropagation(),r=!this.controller.isInEditListMode(),this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:r,focusExpressionList:!0}));else if((t.altKey||t.metaKey)&&!t.ctrlKey&&t.shiftKey&&"F"===n.lookupChar(t)&&this.controller.isDecimalToFractionEnabled()){var i=this.controller.getSelectedItem();i&&"expression"===i.type&&(t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"toggle-fraction-evaluation",id:i.id}),this.controller.runAfterDispatch(function(){h.shouldEvaluationDisplayAsFraction(i)?c.alert(l.controller.s("graphing-calculator-narration-show-as-fraction")):c.alert(l.controller.s("graphing-calculator-narration-show-as-decimal"))}))}else if(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey){if(!t.metaKey&&!t.shiftKey&&t.ctrlKey===d.IS_APPLE&&t.altKey===!d.IS_APPLE){var s=n.lookupChar(t);if("N"===s){if(!this.controller.getBrailleControls())return;t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"nemeth"}),c.alert(this.controller.s("shared-calculator-narration-braille-mode-nemeth"))}else if("U"===s){if(!this.controller.getBrailleControls())return;t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"ueb"}),c.alert(this.controller.s("shared-calculator-narration-braille-mode-ueb"))}else if("Q"===s||"X"===s){if(!this.controller.getBrailleControls())return;t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"set-braille-mode",mode:"none"}),c.alert(this.controller.s("shared-calculator-narration-braille-mode-off"))}else if("6"===s){if(!this.controller.getBrailleControls())return;t.preventDefault(),t.stopPropagation();var a=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",useSixKeyInput:a}),c.alert(a?this.controller.s("shared-calculator-narration-six-key-mode-on"):this.controller.s("shared-calculator-narration-six-key-mode-off"))}}}else n.lookup(t)===n.BACKSPACE?document.activeElement&&u.elIsFocusable(p(document.activeElement))||t.preventDefault():n.lookup(t)===n.ESCAPE&&this.controller.isInEditListMode()&&0===this.controller.find$(".dcg-options-menu").length&&(t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0}));else this.controller.isExpressionListFocused()&&(this.controller.dispatch({type:"open-expression-search"}),t.preventDefault(),t.stopPropagation())},o.prototype.focusExpressionList=function(t){var e=this.controller.getSelectedItem();(e=e||this.controller.getItemModelByIndex(0))?(c.alert(t),this.controller.dispatch({type:"move-focus-to-item",id:e.id})):c.alert(this.controller.s("graphing-calculator-narration-unable-to-focus-expression-list"))},o.prototype.focusElement=function(t,e){t.length?t.focus():e&&c.alert(e)},o);function o(t){this.controller=t}t.default=e});
define('lib/defocus-mobile',["require","exports","jquery","touchtracking"],function(require,e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var e;document.activeElement&&(e=t(document.activeElement),r.elIsFocusable(e)&&t("<input />").prependTo("body").focus().attr({readonly:"readonly",disabled:"true"}).blur().remove())}});
define('ipad.scrollfix',['require','jquery'],function(require){var a=require("jquery"),n=!1,o=function(o){n||a(o).bind("touchstart",function(o){var n=a(o.target),l=0,r=null;if(!n.closest("[disablescroll]").length)for(;0===l&&n.length&&void 0!==n[0].tagName;){var e,t=n.css("overflow"),c=n.css("overflow-y");"hidden"!==t&&"visible"!==t&&"hidden"!==c&&"hidden"!==c&&(0!==(e=n.scrollTop())&&(l=2),n.scrollTop(e+1),n.scrollTop()!==e&&(l|=1,n.scrollTop(e))),n=n.parent()}if(0!==l){r=[];for(var i=o.originalEvent.touches,s=0;s<i.length;s++){var u={};for(var f in i[s])i[s].hasOwnProperty(f)&&(u[f]=i[s][f]);r.push(u)}}a(document).on("touchmove.scrollfix",function(o){var n,e;r&&(n=r[0],(0<(e=o.originalEvent.touches[0].screenY-n.screenY)&&!(2&l)||e<0&&!(1&l))&&(l=0),e&&(r=null)),0===l&&o.preventDefault()}),a(document).on("touchend.scrollfix",function(){a(document).off(".scrollfix")})})};return{limitScrollOnElement:o,limitScrollOnDocument:function(){o(document),n=!0}}});
define('expressions/abstract-item-view',["require","exports","tslib","dcgview","jquery.handleevent"],function(require,t,e,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,s=(o=i.Class,e.__extends(n,o),n.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this._isFirstRender=!0,this._isDragCopy=this.props.isDragCopy()},n.prototype.onItemViewMounted=function(){this._isDragCopy||(this.model.dcgView=this),this._isFirstRender=!1},n.prototype.onItemViewUnmounted=function(){this._isDragCopy||(this.model.dcgView=void 0)},n.prototype.isFirstRender=function(){return this._isFirstRender},n.prototype.onMouseSelect=function(t){this.controller.isInEditListMode()?this.exitEditListMode():"dcg-tap"===t.type&&"mouse"===t.device||"dcg-tapstart"===t.type&&"touch"===t.device||t.wasHandled()||(t.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))},n.prototype.onDelete=function(){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.id,setFocusAfterDelete:!this.controller.isInEditListMode()})},n.prototype.onDragPending=function(t){this.props.onDragPending(t)},n.prototype.exitEditListMode=function(){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!0})},n);function n(){return null!==o&&o.apply(this,arguments)||this}t.default=s});

define('loadcss!dcgview-helpers/tooltipped-error', function(){});
define('dcgview-helpers/tooltipped-error',["require","exports","tslib","dcgview","lib/tooltip","loadcss!./tooltipped-error"],function(require,t,e,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TooltippedError=void 0;var i,s=(i=r.Class,e.__extends(p,i),p.prototype.template=function(){var t=this;return r.createElement(o.Tooltip,{tooltip:this.props.error,targetClickBehavior:this.const("stick"),gravity:this.props.gravity},r.createElement("div",{class:function(){return{"dcg-tooltipped-error":!0,"dcg-white":t.props.isWhite&&t.props.isWhite(),"dcg-small":t.props.size&&"small"===t.props.size()}}},r.createElement("i",{class:r.const("dcg-icon-error")})))},p);function p(){return null!==i&&i.apply(this,arguments)||this}t.TooltippedError=s});

define('loadcss!expressions/circular-icon-view', function(){});
define('expressions/circular-icon-view',["require","exports","tslib","dcgview","loadcss!./circular-icon-view"],function(require,e,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CircularIconView=void 0;var r,i=n.Components.If,c=(r=n.Class,o.__extends(t,r),t.prototype.template=function(){var o=this;return n.createElement("span",{class:function(){var e={"dcg-do-not-blur":!0,"dcg-circular-icon":!0,"dcg-thick-outline":o.isThickOutline(),"dcg-white-icon":!!o.props.whiteIcon&&o.props.whiteIcon(),"dcg-hidden":o.isHidden(),"dcg-semi-transparent":o.props.semiTransparent&&o.props.semiTransparent(),"dcg-colored-icon":!o.isThickOutline()&&!o.isHidden()&&!o.hasBackgroundImage()&&"loading"!==o.props.iconType(),"dcg-has-background-image":o.hasBackgroundImage()};return e[o.iconModifier()]=0<o.iconModifier().length,e},style:function(){return{background:o.getBackgroundColor()}}},n.createElement(i,{predicate:this.bindFn(this.hasBackgroundImage)},function(){return n.createElement("span",{class:n.const("dcg-background-image"),style:function(){return{"background-image":o.props.backgroundImage&&o.props.backgroundImage(),opacity:o.props.backgroundOpacity&&o.props.backgroundOpacity()}}})}),n.createElement(i,{predicate:function(){return!!o.backgroundIcon()}},function(){return n.createElement("i",{class:function(){var e={};return e[o.backgroundIcon()]=!0,e["dcg-layered-icon"]=!0,e},style:function(){return{opacity:o.backgroundOpacity()}}})}),n.createElement(i,{predicate:function(){return!!o.primaryIcon()}},function(){return n.createElement("i",{class:function(){var e={};return e[o.primaryIcon()]=!0,e["dcg-layered-icon"]=!0,e},style:function(){return{color:o.props.foregroundColor&&o.props.foregroundColor()}}})}),n.createElement(i,{predicate:function(){return"loading"===o.props.iconType()}},function(){return n.createElement("span",{class:n.const("dcg-spinner")})}))},t.prototype.iconModifier=function(){if(!this.props.iconModifier)return"";switch(this.props.iconModifier()){case"medium":return"dcg-modifier-size-medium";case"large":return"dcg-modifier-size-large";case"small":return"dcg-modifier-size-small";case"rotated":return"dcg-modifier-rotated";case"none":return""}},t.prototype.getBackgroundColor=function(){if(!this.isHidden()&&this.props.backgroundColor)return this.props.backgroundColor()},t.prototype.isHidden=function(){return"hidden"===this.props.iconType()},t.prototype.isThickOutline=function(){var e=this.props.iconType();return"folder"===e||"pause"===e||"play"===e||"fraction"===e},t.prototype.hasBackgroundImage=function(){return!!this.props.backgroundImage&&!this.isHidden()&&!!this.props.backgroundImage()},t.prototype.primaryIcon=function(){var e=this.props.iconType();switch(e){case"folder":return"dcg-icon-folder";case"pause":return"dcg-icon-pause";case"play":return"dcg-icon-play";case"polygon-dashed":case"polygon-dashed-filled":return"dcg-icon-polygon-dashed";case"polygon-dotted":case"polygon-dotted-filled":return"dcg-icon-polygon-dotted";case"polygon-default":case"polygon-default-filled":return"dcg-icon-polygon-solid";case"graph-dashed":case"parametric-dashed-filled":return"dcg-icon-parametric-dashed";case"graph-dotted":case"parametric-dotted-filled":return"dcg-icon-parametric-dotted";case"graph-default":case"parametric-default-filled":return"dcg-icon-parametric-solid";case"movable-vertical":return"dcg-icon-move-vertical";case"movable-both":return"dcg-icon-move";case"movable-horizontal":return"dcg-icon-move-horizontal";case"point-open":return"dcg-icon-open";case"point-cross":return"dcg-icon-cross";case"point-default":return"dcg-icon-point";case"table-points":case"table-points-and-lines":return"dcg-icon-points";case"table-lines":return"dcg-icon-lines-solid";case"shaded-inequality":case"inequality":return"dcg-icon-shaded-inequality-dash";case"check":return"dcg-icon-check";case"none":case"background":case"hidden":case"polygon-none-filled":case"parametric-none-filled":case"loading":return"";case"fraction":return"dcg-icon-fraction";case"boxplot":return"dcg-icon-boxplot";case"dotplot-cross":return"dcg-icon-dotplot-cross";case"dotplot-default":return"dcg-icon-dotplot-default";case"dotplot-open":return"dcg-icon-dotplot-open";case"histogram":return"dcg-icon-histogram";case"unfilled-distribution":case"filled-distribution":return"dcg-icon-distribution";default:return e}},t.prototype.backgroundOpacity=function(){var e=this.backgroundIcon();return"dcg-icon-polygon-filled"===e||"dcg-icon-parametric-filled"===e||"dcg-icon-shaded-inequality-shade2"===e||"dcg-icon-distribution-fill"===e||"dcg-icon-histogram-fill"===e?.5:1},t.prototype.backgroundIcon=function(){var e=this.props.iconType();return"filled-distribution"===e?"dcg-icon-distribution-fill":"histogram"===e?"dcg-icon-histogram-fill":"polygon-dashed-filled"===e||"polygon-dotted-filled"===e||"polygon-default-filled"===e||"polygon-none-filled"===e?"dcg-icon-polygon-filled":"parametric-dashed-filled"===e||"parametric-dotted-filled"===e||"parametric-default-filled"===e||"parametric-none-filled"===e?"dcg-icon-parametric-filled":"table-points-and-lines"===e?"dcg-icon-lines-solid":"shaded-inequality"===e?"dcg-icon-shaded-inequality-shade2":""},t);function t(){return null!==r&&r.apply(this,arguments)||this}e.CircularIconView=c});
define('main/manage-focus-helper',["require","exports","underscore"],function(require,o,n){"use strict";function t(o){var e=o.controller.getFocusLocation();return e&&n.isEqual(e,o.location)}function u(o,e){e?o.controller.dispatch({type:"set-focus-location",location:o.location}):o.controller.dispatch({type:"blur-focus-location",location:o.location})}Object.defineProperty(o,"__esModule",{value:!0}),o.defaultOnFocusChanged=o.defaultShouldBeFocused=o.manageFocusHelper=void 0,o.manageFocusHelper=function(e){return{shouldBeFocused:function(){return t(e)},onFocusedChanged:function(o){u(e,o)}}},o.defaultShouldBeFocused=t,o.defaultOnFocusChanged=u});

define('loadcss!expressions/play-pause-icon-view', function(){});
define('expressions/play-pause-icon-view',["require","exports","tslib","dcgview","lib/aria","./circular-icon-view","main/manage-focus-helper","graphing-calc/models/expression","core/types/slider-loop-modes","../lib/tooltip","jquery.handleevent","loadcss!./play-pause-icon-view"],function(require,e,t,i,o,n,r,l,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PlayPauseIconView=void 0;var c,d=(c=i.Class,t.__extends(p,c),p.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},p.prototype.template=function(){var t=this;return i.createElement("div",{class:i.const("dcg-play-pause-icon-view")},i.createElement("div",{class:i.const("dcg-circular-icon-container"),"aria-label":this.bindFn(this.getAriaLabel),role:i.const("button"),tabindex:i.const("0"),onTap:function(e){e.wasHandled("dragdrop")||t.toggleSliderIsPlaying()},manageFocus:this.const(r.manageFocusHelper({controller:this.controller,location:{type:"slider-icon",id:this.model.id}}))},i.createElement(n.CircularIconView,{iconType:function(){return t.getIconType()},whiteIcon:function(){return!t.controller.isInEditListMode()&&t.controller.isItemSelected(t.model.id)||t.controller.isItemBeingDragged(t.model.id)}})),i.createElement("div",{class:i.const("dcg-slider-menu-container"),didMount:function(e){return t.rootElt=e}},i.createElement(s.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-animation-properties-tooltip")},gravity:this.const("e"),offset:this.const({left:5})},i.createElement("div",{class:function(){return{"dcg-slider-menu-opener":!0,"dcg-menu-open":t.myOptionsOpen()}},tabindex:i.const(0),role:i.const("button"),"aria-label":function(){return t.myOptionsOpen()?t.controller.s("graphing-calculator-narration-hide-animation-properties"):t.controller.s("graphing-calculator-narration-show-animation-properties")},onTap:function(e){e.wasHandled("dragdrop")||e.wasLongheld()||t.toggleOptions(e)},manageFocus:this.const(r.manageFocusHelper({controller:this.controller,location:{type:"slider-animation-properties-icon",id:this.model.id}}))},i.createElement("i",{class:this.bindFn(this.getIcon)})))))},p.prototype.getIcon=function(){return a.getSliderIcon(this.model.slider.loopMode)},p.prototype.getIconType=function(){return!this.model.slider.isPlaying||l.isSliderAtEndOfPlayOnce(this.model)?"play":"pause"},p.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},p.prototype.toggleOptions=function(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"slider",model:this.model,icon:this.rootElt,focusFirstOption:"keyboard"===e.device}})},p.prototype.getAriaLabel=function(){if(!this.model.sliderExists)return"";var e=l.getAssignment(this.model);return e?this.model.slider.isPlaying?this.controller.s("graphing-calculator-narration-pause-variable-animation",{variable:e}):this.controller.s("graphing-calculator-narration-play-variable-animation",{variable:e}):""},p.prototype.toggleSliderIsPlaying=function(){var e,t;this.model.sliderExists&&(e="",t=l.getAssignment(this.model),l.isSliderAtEndOfPlayOnce(this.model)?("string"==typeof t&&(e=this.controller.s("graphing-calculator-narration-slider-variable-restarted",{variable:t})),this.controller.dispatch({type:"play-slider-from-min",id:this.model.id})):this.model.slider.isPlaying?("string"==typeof t&&(e=this.controller.s("graphing-calculator-narration-slider-variable-playing",{variable:t})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!1})):("string"==typeof t&&(e=this.controller.s("graphing-calculator-narration-slider-variable-paused",{variable:t})),this.controller.dispatch({type:"set-slider-isplaying",id:this.model.id,isPlaying:!0})),""!==e&&o.alert(e))},p);function p(){return null!==c&&c.apply(this,arguments)||this}e.PlayPauseIconView=d});
define('expressions/expression-icon-view',["require","exports","tslib","dcgview","core/lib/dragmode","core/types/styles","core/math/comparators","graphing-calc/models/abstract-item","core/math/expression-types","graphing-calc/models/expression","../dcgview-helpers/tooltipped-error","./play-pause-icon-view","./circular-icon-view","main/manage-focus-helper","jquery.handleevent"],function(require,e,t,o,a,d,c,i,n,p,r,l,s,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u,g=o.Components.SwitchUnion,m="#000",f="#fff",y=(u=o.Class,t.__extends(D,u),D.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},D.prototype.template=function(){var t=this;return o.createElement("div",{class:o.const("dcg-expression-icon-container")},g(this.bindFn(this.getIconMode),{error:function(){return o.createElement(r.TooltippedError,{error:function(){return t.controller.unpack(t.model.error)},isWhite:function(){return t.controller.isItemSelected(t.model.id)||t.controller.isItemBeingDragged(t.model.id)},gravity:t.const("se")})},none:function(){return o.createElement("span",null)},slider:function(){return o.createElement(l.PlayPauseIconView,{controller:t.props.controller,model:t.props.model})},icon:function(){return o.createElement("div",{class:o.const("dcg-circular-icon-container"),role:o.const("button"),tabindex:o.const("0"),"aria-label":t.bindFn(t.getIconAriaLabel),onTap:function(e){if(!e.wasHandled("dragdrop")&&!e.wasLongheld())return t.myOptionsOpen()||t.controller.isInEditListMode()&&!t.isFraction()?t.toggleOptions(e):t.isFraction()?t.onToggleFractionDisplay():void t.toggleGraphShown()},didMount:function(e){return t.rootElt=e},onLongHold:function(e){e.handle("dcg-longhold"),e.handle("dcg-tap"),t.isFraction()||t.toggleOptions(e)},manageFocus:t.const(h.manageFocusHelper({controller:t.controller,location:{type:"expression-icon",id:t.model.id}}))},o.createElement(s.CircularIconView,{iconType:t.bindFn(t.getIconType),backgroundColor:t.bindFn(t.getBackgroundColor),whiteIcon:t.bindFn(t.isSelected),foregroundColor:t.bindFn(t.getForegroundColor),iconModifier:t.bindFn(t.getIconModifier)}))}}))},D.prototype.myOptionsOpen=function(){var e=this.controller.getOpenItemMenu();return!!e&&e.model===this.model},D.prototype.toggleOptions=function(e){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"expression",model:this.model,icon:this.rootElt,focusFirstOption:"keyboard"===e.device}})},D.prototype.isSelected=function(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)},D.prototype.isFraction=function(){return this.controller.canDisplayEvaluationForItemAsFraction(this.model.id)},D.prototype.getIconMode=function(){return this.hasError()?"error":this.controller.getGraphSettings().config.graphpaper?p.isGraphable(this.model)?"icon":this.hasSlider()?"slider":this.isFraction()?"icon":"none":"none"},D.prototype.toggleGraphShown=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id})},D.prototype.hasError=function(){return!!this.model.error&&!p.isEmpty(this.model)&&"none"===this.controller.getBrailleMode()},D.prototype.hasSlider=function(){return!!this.model.sliderExists},D.prototype.getDisplayProps=function(){var e=this.model,t=e.points,o=e.lines,i=e.fill;return n.getReconciledExpressionProps(this.model.formula.expression_type,{points:t,lines:o,fill:i})},D.prototype.getBackgroundColor=function(){if(!this.isFraction())return i.getDisplayColor(this.model);var e=this.isSelected();return this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?e?f:m:""},D.prototype.getForegroundColor=function(){if(!this.isFraction())return"";var e=this.isSelected();return e!==this.controller.shouldEvaluationForItemDisplayAsFraction(this.model.id)?f:e?"#6399cb":m},D.prototype.onToggleFractionDisplay=function(){this.controller.dispatch({type:"toggle-fraction-evaluation",id:this.model.id})},D.prototype.getIconModifier=function(){return p.isBoxPlot(this.model)&&"y"===p.getVizProp(this.model,"alignedAxis")?"rotated":"none"},D.prototype.getIconType=function(){if(this.isFraction())return"fraction";if(!this.model.shouldGraph)return"hidden";if(this.controller.isInEditListMode())return"none";var e=this.model.pointStyle,t=this.model.lineStyle,o=this.getDisplayProps(),i=this.model.formula;if(p.isBoxPlot(this.model))return"boxplot";if(p.isDotPlot(this.model)){if("POINT"===this.model.pointStyle)return"dotplot-default";if("CROSS"===this.model.pointStyle)return"dotplot-cross";if("OPEN"===this.model.pointStyle)return"dotplot-open"}if(p.isHistogram(this.model))return"histogram";if(p.isToplevelDistribution(this.model))return p.shouldShowCDFFooter(this.model)?"filled-distribution":"unfilled-distribution";if(this.model.reconciledDragMode===a.DragMode.X)return"movable-horizontal";if(this.model.reconciledDragMode===a.DragMode.Y)return"movable-vertical";if(this.model.reconciledDragMode===a.DragMode.XY)return"movable-both";if(p.isPointOrPointList(this.model))return p.isSinglePoint(this.model)?e===d.PointStyle.OPEN?"point-open":e===d.PointStyle.CROSS?"point-cross":"point-default":o.lines&&o.points?"table-points-and-lines":o.lines?"table-lines":"table-points";var n=this.getDisplayProps().fill;if(p.isPolygon(this.model))return n?o.lines?t===d.LineStyle.DASHED?"polygon-dashed-filled":t===d.LineStyle.DOTTED?"polygon-dotted-filled":"polygon-default-filled":"polygon-none-filled":o.lines?t===d.LineStyle.DASHED?"polygon-dashed":t===d.LineStyle.DOTTED?"polygon-dotted":"polygon-default":"none";if(p.isParametric(this.model))return n?o.lines?t===d.LineStyle.DASHED?"parametric-dashed-filled":t===d.LineStyle.DOTTED?"parametric-dotted-filled":"parametric-default-filled":"parametric-none-filled":o.lines?t===d.LineStyle.DASHED?"graph-dashed":t===d.LineStyle.DOTTED?"graph-dotted":"graph-default":"none";var r=i.operator,l=0!==c.table[r].direction,s=!1===c.table[r].inclusive;return i.is_shade_between||!s&&l?"shaded-inequality":s&&!l?"inequality":s&&l?"shaded-inequality":t===d.LineStyle.DASHED?"graph-dashed":t===d.LineStyle.DOTTED?"graph-dotted":"graph-default"},D.prototype.getIconAriaLabel=function(){return this.isFraction()?p.shouldEvaluationDisplayAsFraction(this.model)?this.controller.s("shared-calculator-narration-display-as-decimal"):this.controller.s("shared-calculator-narration-display-as-fraction"):this.controller.isInEditListMode()?this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-options"):this.controller.s("graphing-calculator-narration-show-options"):this.model.hidden?this.controller.s("graphing-calculator-narration-show-expression"):this.controller.s("graphing-calculator-narration-hide-expression")},D);function D(){return null!==u&&u.apply(this,arguments)||this}e.default=y});

define('loadcss!expressions/evaluation-view', function(){});
define('expressions/evaluation-view',["require","exports","tslib","dcgview","core/lib/label","../dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","loadcss!./evaluation-view"],function(require,e,t,n,o,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n.Components,l=a.If,c=a.SwitchUnion;var s,u=(s=n.Class,t.__extends(p,s),p.prototype.init=function(){this.controller=this.props.controller()},p.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-evaluation-container")},n.createElement("div",{class:function(){return{"dcg-evaluation":!0,"dcg-do-blur":!0,"dcg-hidden":t.props.controller().isInEditListMode()}},handleEvent:n.const("true"),tabindex:function(){return t.props.focusable()&&"none"===t.controller.getBrailleMode()?"0":"-1"}},n.createElement(r.default,{latex:this.bindFn(this.getBrailleEvaluation),tooltipOptions:function(){return{gravity:"sw"}},ariaLabel:this.const(""),brailleShouldFocus:function(){var e=t.controller.getFocusLocation();return!!e&&"braille-output"===e.type&&e.id===t.props.id()},onBrailleInput:function(){},controller:this.props.controller,isStatic:this.const(!0),onBrailleFocusedChanged:function(e){e?t.controller.dispatch({type:"set-focus-location",location:{type:"braille-output",id:t.props.id()}}):t.controller.dispatch({type:"blur-focus-location",location:{type:"braille-output",id:t.props.id()}})}},n.createElement("div",{class:n.const("dcg-evaluation-label-container"),onTap:this.bindFn(this.onSelectEvaluation)},n.createElement(l,{predicate:function(){return!!t.props.dependent()}},function(){return n.createElement(i.default,{latex:function(){return o.identifierToLatex(t.props.dependent())},config:t.const({})},n.createElement("span",null))}),n.createElement("span",{class:n.const("dcg-equals")},n.createElement(i.default,{latex:this.const("="),config:this.const({})}))),n.createElement("span",{class:n.const("dcg-text-selectable dcg-evaluation-html"),didMount:this.bindFn(this.didMountEvaluation)},c(function(){return t.getEvaluationType()},{list:function(){return n.createElement("span",null,function(){return t.controller.s("graphing-calculator-label-evaluation-list",{count:t.props.val().length})})},fraction:function(){return n.createElement(i.default,{latex:function(){return o.truncatedLatexLabel(t.props.val(),t.getLabelOptions())},config:t.const({})})},undefined:function(){return n.createElement("span",null,n.const("undefined"))},scientific:function(){return n.createElement(i.default,{latex:function(){return t.getNumberLabel().mantissa+"\\times10^{"+t.getNumberLabel().exponent+"}"},config:t.const({})})},decimal:function(){return n.createElement(i.default,{latex:function(){return t.getNumberLabel().value},config:t.const({})})},rgbcolor:function(){return n.createElement("div",{style:t.bindFn(t.getColorSwatchStyle)})}})))),n.createElement("div",{class:n.const("dcg-clear")}))},p.prototype.getNumberLabel=function(){return e=this.props.val(),t=this.getLabelOptions(),o.numericLabel(e,t);var e,t},p.prototype.getColorSwatchStyle=function(){return{width:"30px",height:"30px","border-radius":"5px","background-color":this.props.val()}},p.prototype.getEvaluationType=function(){var e=this.props.val();return"string"==typeof e?"rgbcolor":Array.isArray(e)?"list":this.getNumberLabel().type},p.prototype.getLabelOptions=function(){return this.props.controller().getEvaluationLabelOptionsForItem(this.props.id())},p.prototype.didMountEvaluation=function(e){this.evaluationNode=e},p.prototype.onSelectEvaluation=function(){var e=document.createRange();e.selectNodeContents(this.evaluationNode);var t=window.getSelection();t&&(t.removeAllRanges(),(t=window.getSelection())&&t.addRange(e))},p.prototype.getBrailleEvaluation=function(){var e="";this.props.dependent()&&(e=o.identifierToLatex(this.props.dependent())),e+="=";var t=this.getEvaluationType();switch(t){case"list":e+=this.controller.s("graphing-calculator-label-evaluation-list",{count:this.props.val().length});break;case"fraction":e+=o.truncatedLatexLabel(this.props.val(),this.getLabelOptions());break;case"undefined":e="undefined";break;case"scientific":e+=this.getNumberLabel().mantissa+"\\times10^{"+this.getNumberLabel().exponent+"}";break;case"decimal":e+=this.getNumberLabel().value;break;case"rgbcolor":e+=this.props.val();break;default:return t}return e},p);function p(){return null!==s&&s.apply(this,arguments)||this}e.default=u});
define('expressions/unresolved_view',["require","exports","tslib","dcgview"],function(require,e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,o=(n=r.Class,t.__extends(s,n),s.prototype.template=function(){var e=this;return this.controller=this.props.controller(),r.createElement("div",{class:r.const("dcg-unresolved")},r.createElement("i",{class:r.const("dcg-icon-error")}),r.const(""),function(){return e.controller.s("graphing-calculator-error-equation-contains-unresolved-details")},r.createElement("a",{href:r.const("https://support.desmos.com/entries/29577773-Unresolved-Detail-In-Plotted-Functions"),target:r.const("_blank")},function(){return e.controller.s("graphing-calculator-link-learn-more")}))},s);function s(){return null!==n&&n.apply(this,arguments)||this}e.default=o});

define('loadcss!domain', function(){});
define('expressions/domain_view',["require","exports","tslib","dcgview","jquery","keys","dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","graphing-calc/models/expression","core/lib/label","bugsnag","main/mathquill-operators","loadcss!domain"],function(require,e,t,i,a,o,r,l,s,c,d,n,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p,h=(p=i.Class,t.__extends(m,p),m.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},m.prototype.template=function(){var n=this;return i.createElement("div",{class:i.const("dcg-domain dcg-do-blur"),handleEvent:i.const("true")},i.createElement("div",{class:i.const("dcg-display-domain dcg-mq-underline-container dcg-do-blur"),handleEvent:i.const("true")},i.createElement("div",{class:i.const("dcg-editable-mathquill-container")},i.createElement(r.default,{latex:function(){return n.getMinLatex()},ariaLabel:function(){return n.controller.raw("dmin")},placeholder:function(){return d.value(c.getDomainMin(n.model)).string},brailleShouldFocus:function(){return"min"===n.getFocusedInput()},selectOnFocus:this.const(!0),onBrailleInput:function(e){return n.dispatchMinLatexIfChanged(e)},controller:this.props.controller,hasError:function(){return!c.isDomainMinValid(n.model)},onBrailleFocusedChanged:function(e){return n.handleFocusedChanged("min",e)},onBrailleKeydown:function(e){return n.handleBrailleKeydown("min",e)},dataLabelAttributeValue:this.const("domain-min")},i.createElement(s.default,{latex:function(){return n.getMinLatex()},placeholder:function(){return d.value(c.getDomainMin(n.model)).string},isFocused:function(){return"min"===n.getFocusedInput()},capExpressionSize:function(){return n.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return n.controller.s("graphing-calculator-narration-domain-minimum")},getAriaPostLabel:this.const(""),hasError:function(){return!c.isDomainMinValid(n.model)},onUserPressedKey:function(e,t){n.handlePressedKey("min",e,t)},onUserChangedLatex:function(e){return n.dispatchMinLatexIfChanged(e)},onExpressionSizeExceeded:function(){return n.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e){return n.handleFocusedChanged("min",e)},dataLabelAttributeValue:this.const("domain-min"),needsSystemKeypad:function(){return!n.controller.isKeypadEnabled()}})),i.createElement("span",{class:i.const("dcg-interval-interior")},i.createElement(l.default,{latex:function(){return n.getDomainVariableLatex()},config:this.const({})},i.createElement("span",null))),i.createElement(r.default,{latex:function(){return n.getMaxLatex()},ariaLabel:function(){return n.controller.raw("dmax")},placeholder:function(){return d.value(c.getDomainMax(n.model)).string},brailleShouldFocus:function(){return"max"===n.getFocusedInput()},selectOnFocus:this.const(!0),onBrailleInput:function(e){return n.dispatchMaxLatexIfChanged(e)},controller:this.props.controller,hasError:function(){return!c.isDomainMaxValid(n.model)},onBrailleFocusedChanged:function(e){return n.handleFocusedChanged("max",e)},onBrailleKeydown:function(e){return n.handleBrailleKeydown("max",e)},dataLabelAttributeValue:this.const("domain-max")},i.createElement(s.default,{latex:function(){return n.getMaxLatex()},placeholder:function(){return d.value(c.getDomainMax(n.model)).string},isFocused:function(){return"max"===n.getFocusedInput()},capExpressionSize:function(){return n.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return n.controller.s("graphing-calculator-narration-domain-maximum")},getAriaPostLabel:this.const(""),hasError:function(){return!c.isDomainMaxValid(n.model)},onUserPressedKey:function(e,t){n.handlePressedKey("max",e,t)},onUserChangedLatex:function(e){return n.dispatchMaxLatexIfChanged(e)},onExpressionSizeExceeded:function(){return n.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e){return n.handleFocusedChanged("max",e)},dataLabelAttributeValue:this.const("domain-max"),needsSystemKeypad:function(){return!n.controller.isKeypadEnabled()}})))))},m.prototype.handleBrailleKeydown=function(e,t){var n=o.lookup(t);n&&this.handlePressedKey(e,n,a.Event(t))},m.prototype.handlePressedKey=function(e,t,n){if(!this.controller.isInEditListMode()){if("Esc"===t)return void this.controller.dispatch({type:"set-focus-location",location:void 0});if("Enter"===t)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})}var i=s.default.getFocusedMathquill(),o=r.getFocusedBrailleElement();"Left"!==t&&"Right"!==t&&"Down"!==t&&"Up"!==t?i&&(i.keystroke(t,n),"min"===e?this.dispatchMinLatexIfChanged(i.latex()):"max"===e&&this.dispatchMaxLatexIfChanged(i.latex())):(i?s.default.applyArrowKeyAndReturnIfWasAtBounds(i,t,n):o&&(0===o.selectionStart&&"Left"===t||o.selectionStart===a(o).val().length&&"Right"===t||"Up"===t||"Down"===t))&&(n&&n.preventDefault(),"Left"===t?"max"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"min"}}):"Right"===t?"min"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.model.id,location:"max"}}):"Down"===t?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):"Up"===t&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}))},m.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"domain-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"domain-limit",id:this.id,location:e}})},m.prototype.dispatchMinLatexIfChanged=function(e){if(this.getMinLatex()!==e){var t=this.getDomainType();if("unknown"===t)return void n.notify("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:c.getState(this.model,{stripDefaults:!0})}});this.controller.dispatch("polar"===t?{type:"set-polar-domain-minlatex",id:this.id,latex:e}:{type:"set-parametric-domain-minlatex",id:this.id,latex:e})}},m.prototype.dispatchMaxLatexIfChanged=function(e){if(this.getMaxLatex()!==e){var t=this.getDomainType();if("unknown"===t)return void n.notify("DomainView is in use for a non-parametric, non-polar expression",{severity:"error",metaData:{expression:c.getState(this.model,{stripDefaults:!0})}});this.controller.dispatch("polar"===t?{type:"set-polar-domain-maxlatex",id:this.id,latex:e}:{type:"set-parametric-domain-maxlatex",id:this.id,latex:e})}},m.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"domain-limit"===e.type&&e.id===this.id)return e.location},m.prototype.getMinLatex=function(){switch(this.getDomainType()){case"parametric":return c.getParametricDomainMin(this.model);case"polar":return c.getPolarDomainMin(this.model);default:return""}},m.prototype.getMaxLatex=function(){switch(this.getDomainType()){case"parametric":return c.getParametricDomainMax(this.model);case"polar":return c.getPolarDomainMax(this.model);default:return""}},m.prototype.getDomainVariableLatex=function(){switch(this.getDomainType()){case"parametric":return"\\le t \\le";case"polar":return"\\le \\theta \\le";default:return""}},m.prototype.getDomainType=function(){return c.isPolar(this.model)?"polar":c.isParametric(this.model)?"parametric":"unknown"},m.prototype.getMQConfig=function(){return{autoOperatorNames:u.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},m);function m(){return null!==p&&p.apply(this,arguments)||this}e.default=h});

define('loadcss!regression', function(){});
define('expressions/regression_view',["require","exports","tslib","dcgview","core/lib/label","dcgview-helpers/static-mathquill-view","lib/tooltip","loadcss!regression"],function(require,e,t,n,r,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRoundedStat=e.getRoundedParam=void 0;var a,i=n.Components,c=i.If,l=i.For,g=(a=n.Class,t.__extends(u,a),u.prototype.template=function(){var t=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement(c,{predicate:this.bindFn(this.hasRegression)},function(){return n.createElement("div",{class:n.const("dcg-regression-container")},n.createElement("div",{class:n.const("dcg-handle-event"),handleEvent:n.const("true")},n.createElement(c,{predicate:t.bindFn(t.getShouldSuggestLogMode)},function(){return n.createElement("div",{class:n.const("dcg-log-mode-toggle")},n.createElement("div",{class:function(){return{"dcg-action-log-mode-toggle":!0,"dcg-toggled-on":t.getIsLogModeRegression()}},onTap:t.bindFn(t.onTapLogMode)},n.createElement("span",{class:n.const("dcg-log-mode-checkbox"),role:n.const("checkbox"),"aria-checked":function(){return t.getIsLogModeRegression()},tabindex:n.const("0"),"aria-label":function(){return t.controller.s("graphing-calculator-button-regression-log-mode")}},n.createElement("i",{class:n.const("dcg-icon-check")})),function(){return t.controller.s("graphing-calculator-button-regression-log-mode")}),n.createElement(s.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-regression-log-mode-help-tooltip")},gravity:t.const("e")},n.createElement("a",{"aria-label":function(){return t.controller.s("graphing-calculator-label-regression-log-mode-help-tooltip")},class:n.const("dcg-log-mode-toggle-help"),target:n.const("_blank"),href:n.const("https://support.desmos.com/hc/en-us/articles/204349605")},n.createElement("i",{class:n.const("dcg-icon-question-sign")}))))}),n.createElement("div",{class:n.const("dcg-statistics"),role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-heading-regression-statistics")}},n.createElement("div",{class:n.const("dcg-expression-footer-title")},function(){return t.controller.s("graphing-calculator-heading-regression-statistics")},n.createElement(c,{predicate:function(){return t.getRegression().statistics.hasOwnProperty("RMSE")}},function(){return n.createElement(s.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-regression-what-is-rmse-tooltip")},gravity:t.const("s")},n.createElement("a",{class:n.const("dcg-expression-footer-title-help"),target:n.const("_blank"),href:n.const("https://support.desmos.com/entries/60176149-What-is-RMSE-"),"aria-label":function(){return t.controller.s("graphing-calculator-label-regression-what-is-rmse-tooltip")}},n.createElement("i",{class:n.const("dcg-icon-question-sign")})))}),n.createElement(c,{predicate:function(){return t.getRegression().statistics.Rsquared<0}},function(){return n.createElement(s.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-regression-why-is-negative-tooltip")},gravity:t.const("s")},n.createElement("a",{"aria-label":function(){return t.controller.s("graphing-calculator-label-regression-why-is-negative-tooltip")},class:n.const("dcg-expression-footer-title-help"),target:n.const("_blank"),href:n.const("https://support.desmos.com/entries/60460125-Why-am-I-seeing-a-negative-R-2-value-")},n.createElement("i",{class:n.const("dcg-icon-question-sign")})))})),n.createElement("div",{class:n.const("dcg-statistics-values")},n.createElement(c,{predicate:function(){return t.getRegression().statistics.hasOwnProperty("Rsquared")}},function(){return n.createElement("div",null,n.createElement(o.default,{latex:function(){return"R^2="+p(t.getRegression(),"Rsquared")},config:t.const({})},n.createElement("span",{tabindex:n.const("0")})))}),n.createElement(c,{predicate:function(){return t.getRegression().statistics.hasOwnProperty("rsquared")}},function(){return n.createElement("div",null,n.createElement(o.default,{latex:function(){return"r^2="+p(t.getRegression(),"rsquared")},config:t.const({})},n.createElement("span",{tabindex:n.const("0")})))}),n.createElement(c,{predicate:function(){return t.getRegression().statistics.hasOwnProperty("r")}},function(){return n.createElement("div",null,n.createElement(o.default,{latex:function(){return"r="+p(t.getRegression(),"r")},config:t.const({})},n.createElement("span",{class:n.const("dcg-r-value"),tabindex:n.const("0")})))}),n.createElement(c,{predicate:function(){return t.getRegression().statistics.hasOwnProperty("RMSE")}},function(){return n.createElement("div",null,n.createElement(o.default,{latex:function(){return"\\operatorname{RMSE}="+p(t.getRegression(),"RMSE")},config:t.const({})},n.createElement("span",{tabindex:n.const("0")})))}))),n.createElement("div",{role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-heading-regression-residuals")},class:n.const("dcg-residuals")},n.createElement("div",{class:n.const("dcg-expression-footer-title")},function(){return t.controller.s("graphing-calculator-heading-regression-residuals")}),n.createElement(o.default,{latex:t.bindFn(t.getResidualVariable),config:t.const({})},n.createElement("span",{class:n.const("dcg-residuals-variable"),tabindex:n.const("0")})),n.createElement("div",{class:function(){return{"dcg-residual-suggestion":!0,"dcg-action-plot-residual":!0,"dcg-btn":!0,"dcg-btn-light-gray":!0,"dcg-visible":t.getResidualSuggestionVisible()}},"aria-hidden":function(){return!t.getResidualSuggestionVisible()},role:n.const("button"),tabindex:function(){return t.getResidualSuggestionVisible()?"0":void 0},onTap:t.bindFn(t.onTapResidualsSuggestion)},function(){return t.controller.s("graphing-calculator-button-regression-plot-residuals")})),n.createElement(c,{predicate:function(){return 0<Object.keys(t.getRegression().parameters).length}},function(){return n.createElement("div",{class:n.const("dcg-parameters-container")},n.createElement("div",{class:n.const("dcg-expression-footer-title")},function(){return t.controller.s("graphing-calculator-heading-regression-parameters")},n.createElement(c,{predicate:function(){return t.isNonLinearRegression()}},function(){return n.createElement(s.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-regression-parameters-not-exact")},gravity:t.const("s")},n.createElement("a",{class:n.const("dcg-expression-footer-title-help"),target:n.const("_blank"),href:n.const("https://support.desmos.com/hc/articles/360042428612"),"aria-label":function(){return t.controller.s("graphing-calculator-label-regression-parameters-not-exact")}},n.createElement("i",{class:n.const("dcg-icon-question-sign")})))})),n.createElement(l,{each:function(){return Object.keys(t.getRegression().parameters)}},n.createElement("div",{role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-heading-regression-parameters")},class:n.const("dcg-parameters")},function(e){return n.createElement(o.default,{latex:function(){return e+"="+d(t.getRegression(),e)},config:t.const({})},n.createElement("span",{class:n.const("dcg-parameter"),tabindex:n.const("0")}))})))}),n.createElement("div",{class:n.const("dcg-clear")}),n.createElement(c,{predicate:function(){return t.hasParameterWarning()}},function(){return n.createElement("div",{class:n.const("dcg-parameter-warning")},n.createElement("i",{class:n.const("dcg-icon-error")}),n.const(""),function(){return t.controller.s("graphing-calculator-text-regression-potentially-inaccurate-parameters")},n.const(""),n.createElement("a",{href:n.const("https://support.desmos.com/hc/articles/360042942771"),target:n.const("_blank")},function(){return t.controller.s("graphing-calculator-link-learn-more")}))})))})},u.prototype.onTapResidualsSuggestion=function(){this.controller.dispatch({type:"plot-residuals",id:this.id})},u.prototype.onTapLogMode=function(){this.controller.dispatch({type:"toggle-logmode",id:this.id})},u.prototype.getRegression=function(){return this.model.formula.regression},u.prototype.hasRegression=function(){return!!this.model.formula.regression},u.prototype.isNonLinearRegression=function(){return!this.getRegression().isLinear},u.prototype.getResidualVariable=function(){return this.getRegression().residualVariable||""},u.prototype.getResidualSuggestionVisible=function(){return void 0!==this.getRegression().residualSuggestionId},u.prototype.getShouldSuggestLogMode=function(){return!!this.getRegression().shouldSuggestLogMode},u.prototype.hasParameterWarning=function(){return!!this.getRegression().parameterWarning},u.prototype.getIsLogModeRegression=function(){return!!this.model.isLogModeRegression},u);function u(){return null!==a&&a.apply(this,arguments)||this}function d(e,t){return r.truncatedLatexLabel(e.parameters[t],{digits:6,smallCutoff:1e-6,bigCutoff:1e9})}function p(e,t){return r.truncatedLatexLabel(e.statistics[t],{zeroCutoff:1e-15,digits:4,smallCutoff:1e-6,bigCutoff:1e9})}e.default=g,e.getRoundedParam=d,e.getRoundedStat=p});
define('lib/underscore-shim',["require","exports","underscore_model"],function(require,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnderscoreModelShim=void 0;var t=(r.prototype.triggerEvent=function(e,o){this.model.triggerEvent(e,o)},r.prototype.observeEvent=function(e,o){this.model.observeEvent(e,o)},r.prototype.unobserveEvent=function(e){this.model.unobserveEvent(e)},r.prototype.setProperty=function(e,o){this[e]=o,this.model.setProperty(e,o)},r.prototype.observe=function(e,o){this.model.observe(e,o)},r.prototype.observeAndSync=function(e,o){this.model.observeAndSync(e,o)},r.prototype.unobserve=function(e){this.model.unobserve(e)},r);function r(){this.model=new o.UnderscoreModel}e.UnderscoreModelShim=t});
define('dcgview-helpers/dragdrop',["require","exports","tslib","underscore","jquery","lib/animation-frame","lib/underscore-shim"],function(require,t,i,e,r,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DragDrop=void 0;var s,a=(s=n.UnderscoreModelShim,i.__extends(d,s),d.prototype._evt2pt=function(t){return{x:t.changedTouches[0].pageX-this._offsetPt.x,y:t.changedTouches[0].pageY-this._offsetPt.y}},d.prototype._dispatch=function(t,i){var e;this._destroyed||(e=this._evt2pt(i),this.triggerEvent(t,{x:e.x,y:e.y,dx:e.x-this._startPt.x,dy:e.y-this._startPt.y,evt:i}))},d.prototype.destroy=function(){r(document).off("."+this.guid),this._destroyed=!0},d.prototype.startDrag=function(t,i){var e=this;if(void 0===i&&(i={}),!this.dragging)return r(document).on("dcg-tapmove."+this.guid,function(t){t.originalEvent.preventDefault(),o.cancelAnimationFrame(e.frameThrottle),e.frameThrottle=o.requestAnimationFrame(function(){return e.doDrag(t)})}),r(document).on("dcg-tapend."+this.guid+" dcg-tapcancel."+this.guid,function(t){return e.endDrag(t)}),this._offsetPt={x:0,y:0},i.origin&&(this._offsetPt={x:this._evt2pt(t).x-i.origin.x,y:this._evt2pt(t).y-i.origin.y}),this._startPt=this._evt2pt(t),this.setProperty("dragging",!0),this._dispatch("onGrab",t)},d.prototype.doDrag=function(t){this.dragging&&this._dispatch("onDrag",t)},d.prototype.endDrag=function(t){this.dragging&&(r(document).off("."+this.guid),this.doDrag(t),this.setProperty("dragging",!1),this._dispatch("onDrop",t))},d);function d(){var t=s.call(this)||this;return t.dragging=!1,t.guid=e.uniqueId("dragdrop-class"),t}t.DragDrop=a});

define('loadcss!dcgview-helpers/slider', function(){});
define('dcgview-helpers/slider',["require","exports","lib/rounding","tslib","keys","dcgview","jquery","lib/conditional_blur","./dragdrop","loadcss!./slider"],function(require,t,i,e,r,o,s,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=o.Components.If;function c(t,e,r){return Math.min(Math.max(t,e),r)}var d,u=(d=o.Class,e.__extends(l,d),l.prototype.template=function(){var t=this;return o.createElement("div",{class:function(){return{"dcg-slider-interior":!0,"dcg-disable-slider":t.shouldDisableSlider()}},didMount:this.bindFn(this.didMountRoot),onTapStart:this.bindFn(this.onStartDrag),style:o.const({"touch-action":"none"})},o.createElement("div",{class:o.const("dcg-track")},o.createElement("div",{class:o.const("dcg-ticks"),onMount:this.bindFn(this.didMountTickMarks)}),o.createElement("div",{class:o.const("dcg-graphic")})),o.createElement(p,{predicate:this.bindFn(this.shouldShowZeroMarker)},function(){return o.createElement("div",{class:o.const("dcg-zeroMarker"),style:function(){return{left:t.getZeroMarkerPercent()+"%"}}})}),o.createElement("div",{class:function(){return{"dcg-thumb":!0,"dcg-down":t.isDragging}},role:o.const("slider"),tabindex:o.const("0"),disablescroll:o.const("true"),style:function(){return{left:t.getThumbPercent()+"%"}},onKeyDown:this.bindFn(this.onKeyDown),"aria-label":this.props.ariaLabel,"aria-valuemin":this.props.min,"aria-valuemax":this.props.max,"aria-valuenow":this.props.value,manageFocus:this.buildFocusManager()},o.createElement("div",{class:o.const("dcg-graphic")}),o.createElement("div",{class:o.const("dcg-center")})))},l.prototype.willUnmount=function(){this.dragDrop.destroy()},l.prototype.didMountRoot=function(t){var r=this;this.rootNode=t,this.dragDrop=new a.DragDrop,this.isMounted=!0,this.dragDrop.observeEvent("onDrop",function(){r.isDragging=!1,r.update(),r.props.onDrop&&r.props.onDrop()}),this.dragDrop.observeEvent("onGrab",function(){r.isDragging=!0,r.update(),r.props.onGrab&&r.props.onGrab()}),this.dragDrop.observeEvent("onDrag",function(t,e){r.props.onDragUpdate(r.valueFromPixels(e.x))})},l.prototype.didMountTickMarks=function(t){this.tickMarksNode=t,this.renderTickMarks()},l.prototype.didUpdate=function(){this.renderTickMarks()},l.prototype.shouldDisableSlider=function(){return this.props.min()===this.props.max()},l.prototype.renderTickMarks=function(){if(this.tickMarksNode){var t=this.props.step(),e=this.props.min(),r=this.props.max(),o=void 0===t?0:100*t/(r-e);if(o<3&&(o=0),100<o&&(o=0),isNaN(o)&&(o=0),this.lastTickMarksPercent!==o){var s="";if(0<(this.lastTickMarksPercent=o)&&o<100)for(var n=o;n<100;n+=o)s+='<div class="dcg-tick" style="left:'+n+'%"></div>';this.tickMarksNode.innerHTML=s}}},l.prototype.shouldShowZeroMarker=function(){return this.props.min()<=0&&0<=this.props.max()},l.prototype.getZeroMarkerPercent=function(){var t=this.props.min();return 100*(0-t)/(this.props.max()-t)},l.prototype.getThumbPercent=function(){return 100*this.percentFromValue(this.props.value())},l.prototype.valueFromPixels=function(t){if(!this.isMounted)return 0;var e=this.props.min(),r=this.props.max(),o=this.rootNode.getBoundingClientRect().width,s=e+(r-e)*c(t/o,0,1),n=(r-e)/o;return i.shortestDecimalBetween(s-n,s+n)},l.prototype.percentFromValue=function(t){var e=this.props.min();return c((t-e)/(this.props.max()-e),0,1)},l.prototype.pixelsFromValue=function(t){if(!this.isMounted)return 0;var e=this.percentFromValue(t);return this.rootNode.getBoundingClientRect().width*e},l.prototype.onKeyDown=function(t){switch(r.lookup(t)){case r.UP:this.props.onUpPress&&(this.props.onUpPress(),t.preventDefault());break;case r.DOWN:this.props.onDownPress&&(this.props.onDownPress(),t.preventDefault());break;case r.ENTER:this.props.onEnterPress&&(this.props.onEnterPress(),t.preventDefault());break;case r.ESCAPE:document.activeElement&&s(document.activeElement).blur();break;case r.LEFT:this.props.onKeyboardUpdate("down"),t.preventDefault();break;case r.RIGHT:this.props.onKeyboardUpdate("up"),t.preventDefault();break;case r.PAGEDOWN:this.props.onKeyboardUpdate("bigdown"),t.preventDefault();break;case r.PAGEUP:this.props.onKeyboardUpdate("bigup"),t.preventDefault();break;case r.HOME:this.props.onKeyboardUpdate("min"),t.preventDefault();break;case r.END:this.props.onKeyboardUpdate("max"),t.preventDefault()}},l.prototype.onStartDrag=function(t){var e;"keyboard"!==t.device&&t.target&&(t.preventDefault(),n.default(),e={x:0,y:0},1===s(t.target).closest(".dcg-thumb").length?e.x=this.pixelsFromValue(this.props.value()):e.x=t.changedTouches[0].clientX-this.rootNode.getBoundingClientRect().left,this.dragDrop.startDrag(t,{origin:e}))},l.prototype.buildFocusManager=function(){return this.props.onFocusedChanged&&this.props.isFocused?this.const({shouldBeFocused:this.props.isFocused,onFocusedChanged:this.props.onFocusedChanged}):this.const(void 0)},l);function l(){return null!==d&&d.apply(this,arguments)||this}t.default=u});
define('expressions/slider_limits_view',["require","exports","tslib","jquery","dcgview","dcgview-helpers/mathquill-braille-wrapper","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","keys","graphing-calc/models/expression","core/lib/label","core/types/slider-loop-modes","main/mathquill-operators"],function(require,e,t,r,o,l,i,s,a,d,n,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p,h=o.Components.If,m=(p=o.Class,t.__extends(f,p),f.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},f.prototype.template=function(){var n=this;return o.createElement("div",{class:o.const("dcg-slider_menu dcg-mq-underline-container dcg-do-blur"),handleEvent:o.const("true"),didMount:function(e){return n.node=e}},o.createElement("div",{class:o.const("dcg-editable-mathquill-container")},o.createElement(h,{predicate:function(){return!n.shouldOnlyShowStep()}},function(){return o.createElement("span",null,o.createElement(l.default,{latex:function(){return n.model.slider.hardMin?n.model.slider.min:""},ariaLabel:function(){return n.controller.raw("sldrmin")},brailleShouldFocus:function(){return"min"===n.getFocusedInput()},onBrailleInput:function(e){return n.handleLatexChanged("min",e)},controller:n.props.controller,hasError:function(){return!d.isSliderMinValid(n.model)},onBrailleFocusedChanged:function(e,t){return n.handleFocusedChanged("min",e,t)},onBrailleKeydown:function(e){return n.handleBrailleKeydown("min",e)},selectOnFocus:n.const(!0),dataDCGLimit:n.const("slidermin")},o.createElement(s.default,{latex:function(){return n.model.slider.hardMin?n.model.slider.min:""},isFocused:function(){return"min"===n.getFocusedInput()},capExpressionSize:function(){return n.controller.getCapExpressionSize()},selectOnFocus:n.const(!0),config:n.bindFn(n.getMQConfig),getAriaLabel:function(){return n.controller.s("graphing-calculator-narration-slider-minimum")},getAriaPostLabel:n.const(""),hasError:n.const(!1),onUserPressedKey:function(e,t){return n.handlePressedKey("min",e,t)},onUserChangedLatex:function(e){return n.handleLatexChanged("min",e)},onExpressionSizeExceeded:function(){return n.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e,t){return n.handleFocusedChanged("min",e,t)},needsSystemKeypad:function(){return!n.controller.isKeypadEnabled()}},o.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"min"===n.getFocusedInput(),"dcg-invalid":!d.isSliderMinValid(n.model)}},"data-dcg-limit":o.const("slidermin")}))),o.createElement("span",{class:o.const("dcg-interval-interior")},o.createElement(i.default,{latex:n.bindFn(n.getDependentLatex),config:n.const({})},o.createElement("span",null))),o.createElement(l.default,{latex:function(){return n.model.slider.hardMax?n.model.slider.max:""},ariaLabel:function(){return n.controller.raw("sldrmax")},brailleShouldFocus:function(){return"max"===n.getFocusedInput()},onBrailleInput:function(e){return n.handleLatexChanged("max",e)},controller:n.props.controller,hasError:function(){return!d.isSliderMaxValid(n.model)},onBrailleFocusedChanged:function(e,t){return n.handleFocusedChanged("max",e,t)},onBrailleKeydown:function(e){return n.handleBrailleKeydown("max",e)},selectOnFocus:n.const(!0),dataDCGLimit:n.const("slidermax")},o.createElement(s.default,{latex:function(){return n.model.slider.hardMax?n.model.slider.max:""},isFocused:function(){return"max"===n.getFocusedInput()},capExpressionSize:function(){return n.controller.getCapExpressionSize()},selectOnFocus:n.const(!0),config:n.bindFn(n.getMQConfig),getAriaLabel:function(){return n.controller.s("graphing-calculator-narration-slider-maximum")},getAriaPostLabel:n.const(""),hasError:n.const(!1),onUserPressedKey:function(e,t){return n.handlePressedKey("max",e,t)},onUserChangedLatex:function(e){return n.handleLatexChanged("max",e)},onExpressionSizeExceeded:function(){return n.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e,t){return n.handleFocusedChanged("max",e,t)},needsSystemKeypad:function(){return!n.controller.isKeypadEnabled()}},o.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"max"===n.getFocusedInput(),"dcg-invalid":!d.isSliderMaxValid(n.model)}},"data-dcg-limit":o.const("slidermax")}))))}),o.createElement("span",{class:function(){return{"dcg-slider-step-container":!n.shouldOnlyShowStep()}}},o.createElement("span",{class:o.const("dcg-slider-step-label"),"aria-hidden":o.const("true")},function(){return n.controller.s("graphing-calculator-label-slider-step")}),o.createElement(l.default,{latex:function(){return n.model.slider.step},ariaLabel:function(){return n.controller.raw("sldrstp")},brailleShouldFocus:function(){return"step"===n.getFocusedInput()},onBrailleInput:function(e){return n.handleLatexChanged("step",e)},controller:this.props.controller,hasError:function(){return!d.isSliderStepValid(n.model)},onBrailleFocusedChanged:function(e,t){return n.handleFocusedChanged("step",e,t)},onBrailleKeydown:function(e){return n.handleBrailleKeydown("step",e)},selectOnFocus:this.const(!0),dataDCGLimit:this.const("sliderstep")},o.createElement(s.default,{latex:function(){return n.model.slider.step},isFocused:function(){return"step"===n.getFocusedInput()},capExpressionSize:function(){return n.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return n.controller.s("graphing-calculator-narration-slider-step")},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(e,t){return n.handlePressedKey("step",e,t)},onUserChangedLatex:function(e){return n.handleLatexChanged("step",e)},onExpressionSizeExceeded:function(){return n.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e,t){return n.handleFocusedChanged("step",e,t)},needsSystemKeypad:function(){return!n.controller.isKeypadEnabled()}},o.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-focus":"step"===n.getFocusedInput(),"dcg-invalid":!d.isSliderStepValid(n.model)}},"data-dcg-limit":o.const("sliderstep")}))))))},f.prototype.handleBrailleKeydown=function(e,t){var n=a.lookup(t);n&&this.handlePressedKey(e,n,r.Event(t))},f.prototype.handlePressedKey=function(e,t,n){var o,i;this.controller.isInEditListMode()||this.shouldOnlyShowStep()||"Esc"!==t&&"Enter"!==t?(o=s.default.getFocusedMathquill(),i=l.getFocusedBrailleElement(),"Left"!==t&&"Right"!==t&&"Down"!==t&&"Up"!==t?o&&(o.keystroke(t,n),this.handleLatexChanged(e,o.latex())):(o?s.default.applyArrowKeyAndReturnIfWasAtBounds(o,t,n):i&&(0===i.selectionStart&&"Left"===t||i.selectionStart===r(i).val().length&&"Right"===t||"Up"===t||"Down"===t))&&(n&&n.preventDefault(),"Left"!==t||this.shouldOnlyShowStep()?"Right"!==t||this.shouldOnlyShowStep()?"Down"===t?this.controller.dispatch({type:"on-special-key-pressed",key:"Down"}):"Up"===t&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.model.id}}):"min"===e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"max"}}):"max"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"step"}}):"max"===e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"min"}}):"step"===e&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.model.id,location:"max"}}))):this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.id}})},f.prototype.shouldOnlyShowStep=function(){return this.model.slider.loopMode===c.SliderLoopMode.PLAY_INDEFINITELY},f.prototype.handleLatexChanged=function(e,t){"min"===e?this.dispatchMinLatexIfChanged(t):"max"===e?this.dispatchMaxLatexIfChanged(t):"step"===e&&this.dispatchStepLatexIfChanged(t)},f.prototype.handleFocusedChanged=function(e,t,n){t&&this.getFocusedInput()!==e?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:e}}):this.getFocusedInput()!==e||"none"!==this.controller.getBrailleMode()||n.relatedTarget&&this.node.contains(n.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"slider-limit",id:this.id,location:e}})},f.prototype.dispatchMinLatexIfChanged=function(e){this.model.slider.min!==e&&this.controller.dispatch({type:"set-slider-minlatex",id:this.id,latex:e})},f.prototype.dispatchMaxLatexIfChanged=function(e){this.model.slider.max!==e&&this.controller.dispatch({type:"set-slider-maxlatex",id:this.id,latex:e})},f.prototype.dispatchStepLatexIfChanged=function(e){this.model.slider.step!==e&&this.controller.dispatch({type:"set-slider-steplatex",id:this.id,latex:e})},f.prototype.getDependentLatex=function(){var e=d.getAssignment(this.model)||"";return" \\le "+n.identifierToLatex(e)+" \\le "},f.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"slider-limit"===e.type&&e.id===this.id)return e.location},f.prototype.getMQConfig=function(){return{autoOperatorNames:u.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},f);function f(){return null!==p&&p.apply(this,arguments)||this}e.default=m});

define('loadcss!expressions/slider-view', function(){});
define('expressions/slider_view',["require","exports","tslib","jquery","keys","dcgview","dcgview-helpers/slider","./slider_limits_view","dcgview-helpers/static-mathquill-view","graphing-calc/models/expression","core/types/slider-loop-modes","loadcss!./slider-view"],function(require,t,e,i,o,n,r,l,s,d,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,p=n.Components.If,u=(c=n.Class,e.__extends(h,c),h.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},h.prototype.template=function(){var e=this;return n.createElement("span",{class:n.const("dcg-slider-container"),tapboundary:n.const("true"),onKeydown:function(t){"Tab"!==o.lookup(t)||t.altKey||t.metaKey||t.ctrlKey||(t.shiftKey?e.isSliderMinFocused()&&e.controller.isInEditListMode()?(null!==t.target&&i(t.target).closest(".dcg-expressionitem").find('[tabindex="0"]:visible:first').focus(),t.preventDefault(),t.stopPropagation()):e.isSliderThumbFocused()&&(e.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:e.id,location:"step"}}),t.preventDefault(),t.stopPropagation()):!t.shiftKey&&e.isSliderStepFocused()&&(e.controller.isInEditListMode()?e.controller.dispatch({type:"set-focus-location",location:{type:"slider-icon",id:e.id}}):e.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:e.id}}),t.preventDefault(),t.stopPropagation()))}},n.createElement(p,{predicate:function(){return e.shouldShowSlider()}},function(){return n.createElement("div",{class:n.const("dcg-do-blur dcg-slider"),handleEvent:n.const("true")},n.createElement("div",{class:n.const("dcg-minLabel dcg-template-minlabelhtml"),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-edit-slider-variable-limits",{variable:"none"===e.controller.getBrailleMode()?'"'+d.getAssignment(e.model)+'"':""+d.getAssignment(e.model)})},onTap:function(){return e.onEditLimit("min")}},n.createElement(s.default,{latex:function(){return d.getDisplaySliderMin(e.model)},config:e.const({})})),n.createElement(r.default,{min:function(){return d.getSliderMin(e.model)},max:function(){return d.getSliderMax(e.model)},step:function(){return d.getSliderStep(e.model)},value:function(){return d.getSliderValue(e.model)},ariaLabel:function(){return"none"===e.controller.getBrailleMode()?'"'+d.getAssignment(e.model)+'"':""+d.getAssignment(e.model)},onGrab:e.bindFn(e.onGrab),onDrop:e.bindFn(e.onDrop),onDragUpdate:e.bindFn(e.onDragUpdate),onKeyboardUpdate:e.bindFn(e.onKeyboardUpdate),onUpPress:function(){return e.controller.dispatch({type:"on-special-key-pressed",key:"Up"})},onDownPress:function(){return e.controller.dispatch({type:"on-special-key-pressed",key:"Down"})},onEnterPress:function(){return e.controller.dispatch({type:"on-special-key-pressed",key:"Enter"})},isFocused:e.bindFn(e.isSliderThumbFocused),onFocusedChanged:function(t){t?e.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:e.id}}):e.controller.dispatch({type:"blur-focus-location",location:{type:"slider-thumb",id:e.id}})}}),n.createElement("div",{class:n.const("dcg-maxLabel dcg-template-maxlabelhtml"),onTap:function(){return e.onEditLimit("max")}},n.createElement(s.default,{latex:function(){return d.getDisplaySliderMax(e.model)},config:e.const({})})))}),n.createElement(p,{predicate:function(){return e.shouldShowLimitInputs()}},function(){return n.createElement(l.default,{model:e.props.model,controller:e.props.controller})}))},h.prototype.onGrab=function(){this.dispatchIsDraggingIfChanged(!0)},h.prototype.onDrop=function(){this.controller.dispatch({type:"set-none-selected"}),this.dispatchIsPlayingIfChanged(!1),this.dispatchIsDraggingIfChanged(!1)},h.prototype.onKeyboardUpdate=function(t){this.controller.dispatch({type:"adjust-slider-by-keyboard",id:this.id,adjustment:t})},h.prototype.onDragUpdate=function(t){this.controller.dispatch({type:"adjust-slider-by-dragging-thumb",id:this.model.id,target:t})},h.prototype.onEditLimit=function(t){this.controller.dispatch({type:"set-focus-location",location:{type:"slider-limit",id:this.id,location:t}})},h.prototype.dispatchIsPlayingIfChanged=function(t){this.model.slider.isPlaying!==t&&this.controller.dispatch({type:"set-slider-isplaying",id:this.id,isPlaying:t})},h.prototype.dispatchIsDraggingIfChanged=function(t){this.model.sliderDragging!==t&&this.controller.dispatch({type:"set-slider-dragging",id:this.id,dragging:t})},h.prototype.shouldShowLimitInputs=function(){if(this.controller.isInEditListMode())return!0;if(!d.isSliderMinValid(this.model))return!0;if(!d.isSliderMaxValid(this.model))return!0;if(!d.isSliderStepValid(this.model))return!0;if(this.model.slider.loopMode===a.SliderLoopMode.PLAY_INDEFINITELY)return!0;var t=this.controller.getFocusLocation();return!(!t||"slider-limit"!==t.type&&"expression"!==t.type||t.id!==this.id)},h.prototype.shouldShowSlider=function(){return!this.shouldShowLimitInputs()},h.prototype.isSliderThumbFocused=function(){var t=this.controller.getFocusLocation();return!(!t||"slider-thumb"!==t.type||t.id!==this.id)},h.prototype.isSliderMinFocused=function(){var t=this.controller.getFocusLocation();return!(!t||"slider-limit"!==t.type||t.id!==this.id||"min"!==t.location)},h.prototype.isSliderStepFocused=function(){var t=this.controller.getFocusLocation();return!(!t||"slider-limit"!==t.type||t.id!==this.id||"step"!==t.location)},h);function h(){return null!==c&&c.apply(this,arguments)||this}t.default=u});

define('loadcss!prompt-sliders', function(){});
define('expressions/promptslider_view',["require","exports","tslib","core/lib/label","jquery","lib/aria","dcgview","graphing-calc/models/list","loadcss!prompt-sliders"],function(require,t,e,r,l,n,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=i.Components,c=a.For,d=a.If,u=(o=i.Class,e.__extends(p,o),p.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},p.prototype.template=function(){var t=this;return i.createElement("div",{class:i.const("dcg-create-sliders dcg-action-createslider"),handleEvent:i.const("true"),onTap:this.bindFn(this.onCreateSlider)},i.createElement("span",{class:i.const("dcg-msg")},function(){return t.controller.s("graphing-calculator-label-add-slider")}),i.createElement("span",{class:i.const("btns")},i.createElement(c,{each:function(){return t.getMissingVariables().slice(0,4)}},i.createElement("span",null,function(e){return i.createElement("div",{class:i.const("dcg-slider-btn-container"),var_name:t.const(e)},i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:function(){return{"dcg-btn-slider":!0,"dcg-btn-blue":1===t.getMissingVariables().length,"dcg-btn-light-gray":1!==t.getMissingVariables().length}},didMount:function(t){t.innerHTML=r.identifierToHTML(e)}}))})),i.createElement(d,{predicate:function(){return 1<t.getMissingVariables().length}},function(){return i.createElement("div",{class:i.const("dcg-slider-btn-container dcg-all")},i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:i.const("dcg-btn-slider dcg-btn-blue")},function(){return t.controller.s("graphing-calculator-button-slider-add-all-variables")}))})))},p.prototype.onCreateSlider=function(t){if(this.controller.dispatch({type:"set-none-selected"}),t.target){var e=l(t.target).closest(".dcg-slider-btn-container");if(e.length){var r,i=!1,i=e.hasClass("dcg-all")?(this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:this.getMissingVariables()}),!0):(r=[e.attr("var_name")],this.controller.dispatch({type:"create-sliders-for-item",id:this.model.id,variables:r}),1==this.getMissingVariables().length);if("keyboard"===t.device){var n=this.model.id,s=this.props.controller().getItemSelectorById(n);if(!s)return;i?this.controller.dispatch({type:"move-focus-to-item",id:n}):s.find(".dcg-btn-blue").focus()}}}},p.prototype.getMissingVariables=function(){return s.getMissingVariablesForItem(this.model)},p.prototype.didMount=function(){var i=this;this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout),this.promptAlertTimeout=setTimeout(function(){for(var t=[],e=i.getMissingVariables(),r=0;r<e.length;r++)t.push('"'+e[r]+'"');n.alert(i.controller.s("graphing-calculator-narration-add-slider-prompt",{vars:t.join(",")})),i.promptAlertTimeout=0},2e3)},p.prototype.didUnmount=function(){this.promptAlertTimeout&&clearTimeout(this.promptAlertTimeout)},p);function p(){return null!==o&&o.apply(this,arguments)||this}t.default=u});

define('loadcss!dcgview-helpers/checkbox', function(){});
define('dcgview-helpers/checkbox',["require","exports","tslib","dcgview","jquery","loadcss!./checkbox"],function(require,e,s,c,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Checkbox=void 0;var r,n=(r=c.Class,s.__extends(o,r),o.prototype.template=function(){var e=this;return c.createElement("div",{class:function(){return{"dcg-component-checkbox":!0,"dcg-checked":e.props.checked(),"dcg-disabled":e.props.disabled&&e.props.disabled(),"dcg-small":e.props.small&&e.props.small(),"dcg-green":e.props.green&&e.props.green()}},onTap:this.bindFn(this.onChange)},c.createElement("span",{tabindex:c.const(0),class:c.const("dcg-checkbox"),role:c.const("checkbox"),"aria-label":this.props.ariaLabel,"aria-disabled":function(){return e.props.disabled&&e.props.disabled()},"aria-checked":this.props.checked},c.createElement("i",{class:c.const("dcg-icon-check"),"aria-hidden":c.const("true")})),c.createElement("span",{class:c.const("dcg-checkbox-children")},this.children))},o.prototype.onChange=function(e){e.target&&t(e.target).attr("href")||this.props.disabled&&this.props.disabled()||this.props.onChange(!this.props.checked())},o);function o(){return null!==r&&r.apply(this,arguments)||this}e.Checkbox=n});
define('core/math/interpolatedlabel',["require","exports","parsenodes","core/lib/label","./policy","core/math/types"],function(require,e,p,r,f,c){"use strict";function h(e){if(e.length<2)return"text";var t=e.split("`").length-1;return t<2?"text":2==t&&"`"===e[0]&&"`"===e[e.length-1]?"latex":"mixed"}function t(e){if(0===e.length)return[""];for(var t=[],r=e.split(/(`)/),n=!1,a="",u=0;u<r.length;u++){var i=r[u];i.length&&("`"===i?(a+="`",(n=!n)||(t.push(a),a="")):(a+=i,n||(t.push(a),a="")))}return a.length&&t.push(a),t}function n(e){for(var t,r,n="\\$({"+["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\{[a-zA-Z0-9]+\\}"].join("})|\\$({")+"})",a=new RegExp(n,"g"),u=[],i=0;r=a.exec(e);){i<(t=r.index)&&u.push(e.substr(i,t-i));var s=r[0],l=s.replace(/[{}\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");u.push({symbol:l,str:s}),i=r.index+s.length}return i<e.length&&u.push(e.substr(i)),{raw:e,parts:u}}function g(e,t){return t?"{"+r.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":r.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}Object.defineProperty(e,"__esModule",{value:!0}),e.interpolate=e.parse=e.chunkLabel=e.classifyLabelText=void 0,e.classifyLabelText=h,e.chunkLabel=t,e.parse=function(e){return t(e).map(n)},e.interpolate=function(e,t,r){return e.map(function(e){return function(e,t,r){for(var n=[],a="latex"===h(e.raw),u=0,i=e.parts;u<i.length;u++){var s=i[u];if("string"==typeof s)n.push(s);else{var l,o=p.Identifier(s.symbol).tryGetConcreteTree(f.defaultPolicy,t);if(o.valueType===c.Number){if("number"==typeof(l=o.asValue())){n.push(g(l,a));continue}}else if(o.valueType===c.ListOfNumber&&o.args[r]){if("number"==typeof(l=o.args[r].asValue())){n.push(g(l,a));continue}}a?n.push("{?}"):n.push("?")}}return n.join("")}(e,t,r)}).join("")}});

define('loadcss!expressions/label-dropdown-view', function(){});
define('expressions/label-dropdown-view',["require","exports","tslib","dcgview","graphing-calc/models/expression","core/graphing-calc/json/expression","core/types/label-sizes","core/lib/dragmode","core/types/label-orientations","dcgview-helpers/checkbox","core/math/interpolatedlabel","loadcss!./label-dropdown-view"],function(require,e,t,i,n,o,l,a,r,c,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LabelDropdownView=void 0;var d,u=i.Components,b=u.For,p=u.IfElse,g=u.If,h=(d=i.Class,t.__extends(L,d),L.prototype.template=function(){var n=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,i.createElement("div",{class:i.const("dcg-label-dropdown-view dcg-popover dcg-left")},i.createElement("div",{class:i.const("dcg-arrow")}),i.createElement("div",{class:i.const("dcg-label-group-container")},i.createElement("div",{class:i.const("dcg-label-group")},i.createElement("div",{role:i.const("heading"),"aria-level":i.const("2"),class:i.const("dcg-label-group-title")},function(){return n.controller.s("graphing-calculator-heading-label-position")}),i.createElement(b,{each:this.bindFn(this.getLabelOrientations)},i.createElement("div",{role:i.const("group"),"aria-label":function(){return n.controller.s("graphing-calculator-heading-label-position")},class:i.const("dcg-label-options")},function(t){return i.createElement("a",{role:i.const("button"),tabindex:i.const(0),class:function(){return{"dcg-menu-option":!0,"dcg-label-position":!0,"dcg-menu-option-selected":n.isorientationSelected(t)}},"aria-pressed":function(){return n.isorientationSelected(t)},onTap:function(){return n.setorientation(t)},"aria-label":function(){return n.getOrientationText(t)}},i.createElement("span",{class:i.const("dcg-menu-option-icon")},i.createElement("i",{class:i.const("dcg-icon-position-arrows")}),i.createElement("span",{class:function(){var e={"dcg-position-direction-icon":!0};return e[n.getPositionIconClass(t)]=!0,e}},p(function(){return"default"===t},{true:function(){return i.createElement("div",{class:i.const("dcg-default-position")})},false:function(){return i.createElement("i",{class:i.const("dcg-icon-position-arrows-single")})}}))),i.createElement("span",{class:i.const("dcg-menu-option-label")},function(){return n.getOrientationText(t)}))}))),i.createElement("div",{class:i.const("dcg-label-group")},i.createElement("div",{role:i.const("heading"),"aria-level":i.const("2"),class:i.const("dcg-label-group-title")},function(){return n.controller.s("graphing-calculator-heading-font-size")}),i.createElement(b,{each:this.bindFn(this.getLabelSizes)},i.createElement("div",{role:i.const("group"),"aria-label":function(){return n.controller.s("graphing-calculator-heading-font-size")},class:i.const("dcg-label-options")},function(t){return i.createElement("a",{role:i.const("button"),tabindex:i.const(0),class:function(){var e={"dcg-menu-option":!0,"dcg-menu-option-selected":n.isSizeSelected(t),"dcg-label-size":!0};return e[n.getSizeClass(t)]=!0,e},"aria-pressed":function(){return n.isSizeSelected(t)},onTap:function(){return n.setLabelSize(t)},"aria-label":function(){return n.getSizeText(t)}},i.createElement("span",{class:i.const("dcg-menu-option-icon")},i.const("A")),i.createElement("span",{class:i.const("dcg-menu-option-label")},function(){return n.getSizeText(t)}))})),i.createElement("div",{class:i.const("dcg-label-group dcg-additional-group-in-column")},i.createElement("div",{role:i.const("heading"),"aria-level":i.const("2"),class:i.const("dcg-label-group-title")},function(){return n.controller.s("graphing-calculator-heading-label-orientation")}),i.createElement("div",{role:i.const("group"),"aria-label":function(){return n.controller.s("graphing-calculator-heading-label-orientation")}},i.createElement(c.Checkbox,{checked:this.bindFn(this.getVerticalLabel),onChange:this.bindFn(this.setVerticalLabel),ariaLabel:function(){return n.controller.s("graphing-calculator-button-label-orientation-vertical")}},function(){return n.controller.s("graphing-calculator-button-label-orientation-vertical")}))),i.createElement(g,{predicate:function(){return n.controller.canUseAdvancedStyling()}},function(){return i.createElement("div",{class:i.const("dcg-label-group dcg-additional-group-in-column")},i.createElement("div",{role:i.const("heading"),"aria-level":i.const("2"),class:i.const("dcg-label-group-title")},function(){return n.controller.s("graphing-calculator-heading-advanced")}),i.createElement(c.Checkbox,{checked:n.bindFn(n.getWhiteTextOutline),onChange:n.bindFn(n.setWhiteTextOutline),ariaLabel:n.const("Text outline"),disabled:function(){return n.getEditable()}},i.const("Text outline")),i.createElement("div",{role:i.const("group"),"aria-label":function(){return n.controller.s("graphing-calculator-heading-advanced")}},i.createElement(g,{predicate:function(){return n.shouldShowInteractiveLabelCheckbox()}},function(){return i.createElement(c.Checkbox,{checked:n.bindFn(n.getInteractiveLabel),onChange:n.bindFn(n.setInteractiveLabel),ariaLabel:n.const("Interactive Label")},i.const("Show on hover"))}),i.createElement(g,{predicate:n.bindFn(n.shouldShowEditableLabelToggle)},function(){return i.createElement(c.Checkbox,{checked:n.bindFn(n.getEditable),onChange:n.bindFn(n.setEditable),ariaLabel:n.const("Editable")},i.const("Editable"))})))}))))},L.prototype.getLabelOrientations=function(){return[r.LabelOrientation.DEFAULT,r.LabelOrientation.LEFT,r.LabelOrientation.RIGHT,r.LabelOrientation.ABOVE,r.LabelOrientation.BELOW]},L.prototype.getOrientationText=function(e){switch(e){case r.LabelOrientation.DEFAULT:return this.controller.s("graphing-calculator-text-label-orientation-default");case r.LabelOrientation.LEFT:return this.controller.s("graphing-calculator-text-label-orientation-left");case r.LabelOrientation.RIGHT:return this.controller.s("graphing-calculator-text-label-orientation-right");case r.LabelOrientation.ABOVE:return this.controller.s("graphing-calculator-text-label-orientation-above");case r.LabelOrientation.BELOW:return this.controller.s("graphing-calculator-text-label-orientation-below");default:throw new Error("Unexpected label orientation: "+e)}},L.prototype.getLabelSizes=function(){return[l.LabelSize.SMALL,l.LabelSize.MEDIUM,l.LabelSize.LARGE]},L.prototype.getSizeText=function(e){switch(e){case l.LabelSize.SMALL:return this.controller.s("graphing-calculator-text-label-size-small");case l.LabelSize.LARGE:return this.controller.s("graphing-calculator-text-label-size-large");case l.LabelSize.MEDIUM:return this.controller.s("graphing-calculator-text-label-size-medium");default:throw new Error("Unexpected label size: "+e)}},L.prototype.getSizeClass=function(e){switch(e){case l.LabelSize.SMALL:return"dcg-small-label";case l.LabelSize.LARGE:return"dcg-large-label";case l.LabelSize.MEDIUM:return"dcg-medium-label";default:throw new Error("Unexpected label size: "+e)}},L.prototype.isSizeSelected=function(e){return this.model.labelSize===e},L.prototype.isorientationSelected=function(e){return this.model.labelOrientation===e},L.prototype.getPositionIconClass=function(e){switch(e){case r.LabelOrientation.ABOVE:return"dcg-position-icon-above";case r.LabelOrientation.BELOW:return"dcg-position-icon-below";case r.LabelOrientation.LEFT:return"dcg-position-icon-left";case r.LabelOrientation.RIGHT:return"dcg-position-icon-right";case r.LabelOrientation.DEFAULT:return"dcg-position-icon-default";default:throw new Error("Unexpected label orientation: "+e)}},L.prototype.setorientation=function(e){this.controller.dispatch({type:"set-item-label-orientation",id:this.id,labelOrientation:e})},L.prototype.setVerticalLabel=function(e){this.controller.dispatch({type:"set-item-vertical-label",id:this.id,verticalLabel:e})},L.prototype.getWhiteTextOutline=function(){return!this.getEditable()&&!this.model.suppressTextOutline},L.prototype.setWhiteTextOutline=function(e){this.controller.dispatch({type:"set-suppress-text-outline",id:this.id,suppressTextOutline:!e})},L.prototype.getVerticalLabel=function(){return!!this.model.verticalLabel},L.prototype.setInteractiveLabel=function(e){this.controller.dispatch({type:"set-item-interactive-label",id:this.id,interactiveLabel:e})},L.prototype.getInteractiveLabel=function(){return!!this.model.interactiveLabel},L.prototype.setEditable=function(e){var t;e?(t="latex"===s.classifyLabelText(this.model.label)?o.EditableLabelMode.Math:o.EditableLabelMode.Text,this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:t})):this.controller.dispatch({type:"set-item-editable-label-mode",id:this.id,editableLabelMode:o.EditableLabelMode.None})},L.prototype.getEditable=function(){return this.model.editableLabelMode!==o.EditableLabelMode.None},L.prototype.getEditableLabelMode=function(){return this.model.editableLabelMode},L.prototype.shouldShowEditableLabelToggle=function(){return n.isSinglePoint(this.model)},L.prototype.setLabelSize=function(e){this.controller.dispatch({type:"set-item-labelSize",id:this.id,labelSize:e})},L.prototype.getLabelSize=function(){return this.model.labelSize},L.prototype.shouldShowInteractiveLabelCheckbox=function(){return this.model.reconciledDragMode===a.DragMode.NONE},L);function L(){return null!==d&&d.apply(this,arguments)||this}e.LabelDropdownView=h});

define('loadcss!expressions/label_view', function(){});

define('loadcss!toggle', function(){});
define('expressions/label_view',["require","exports","tslib","keys","dcgview","graphing-calc/models/expression","./label-dropdown-view","jquery","core/graphing-calc/json/expression","loadcss!./label_view","loadcss!toggle"],function(require,e,t,n,o,l,a,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d,c=o.Components,s=c.Input,b=c.If,p=c.IfElse,h=(d=o.Class,t.__extends(u,d),u.prototype.template=function(){var t=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,o.createElement("div",{class:function(){return{"dcg-label-visible":t.getShowLabel(),"dcg-label-container":!0,"dcg-do-blur":!0}},tapboundary:o.const("true"),handleEvent:o.const("true")},o.createElement("span",{role:o.const("checkbox"),"aria-checked":this.bindFn(this.getShowLabel),tabindex:o.const("0"),class:function(){return{"dcg-checkbox":!0,"dcg-checkbox-label-colon":t.getShowLabel()&&!t.hasEditableLabel()}},"aria-label":function(){return t.controller.s("graphing-calculator-button-label")},onTap:this.bindFn(this.onCheckboxInput)},o.createElement("span",{class:function(){return{"dcg-checkbox-box":!0,"dcg-checked":t.getShowLabel()}}},o.createElement("i",{class:o.const("dcg-icon-check")})),o.const(""),o.createElement("span",{class:o.const("dcg-checkbox-label"),"aria-hidden":o.const("true")},function(){return t.controller.s("graphing-calculator-button-label")})),p(this.bindFn(this.hasEditableLabel),{true:function(){return o.createElement("div",{class:o.const("dcg-editable-mode-toggle")},o.createElement("div",{class:o.const("dcg-option-toggle-view")},o.createElement("div",{class:o.const("dcg-toggle-container")},o.createElement("div",{class:o.const("dcg-toggle")},o.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":t.model.editableLabelMode===r.EditableLabelMode.Math}},role:o.const("button"),tabindex:o.const(0),"aria-pressed":function(){return t.model.editableLabelMode===r.EditableLabelMode.Math},"aria-label":function(){return t.controller.s("graphing-calculator-narration-editable-label-mode-editable-math")},didMount:function(e){void 0!==t.lastToggleOption&&"math"===t.lastToggleOption&&(t.lastToggleOption=void 0,e.focus())},onTap:function(){t.lastToggleOption="Editable Math",t.controller.dispatch({type:"set-item-editable-label-mode",id:t.id,editableLabelMode:r.EditableLabelMode.Math})}},function(){return t.controller.s("graphing-calculator-button-editable-math")}),o.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":t.model.editableLabelMode===r.EditableLabelMode.Text}},role:o.const("button"),tabindex:o.const(0),"aria-pressed":function(){return t.model.editableLabelMode===r.EditableLabelMode.Text},"aria-label":function(){return t.controller.s("graphing-calculator-narration-editable-label-mode-editable-text")},didMount:function(e){void 0!==t.lastToggleOption&&"text"===t.lastToggleOption&&(t.lastToggleOption=void 0,e.focus())},onTap:function(){t.lastToggleOption="Editable Text",t.controller.dispatch({type:"set-item-editable-label-mode",id:t.id,editableLabelMode:r.EditableLabelMode.Text})}},function(){return t.controller.s("graphing-calculator-button-editable-text")})))))},false:function(){return o.createElement(s,{class:function(){return{"dcg-label-input":!0,"dcg-disabled-input":t.getIsDisabled(),"dcg-disabled-editable-input":t.hasEditableLabel()}},"aria-label":function(){return t.controller.s("graphing-calculator-narration-label-text")},"aria-disabled":function(){return t.getIsDisabled()||t.hasEditableLabel()},value:t.bindFn(t.getLabel),onInput:t.bindFn(t.onLabelInput)})}}),o.createElement("span",{class:function(){return{"dcg-dropdown-container":!0,"dcg-no-label":!t.getShowLabel()}},didMount:function(e){return t.$dropdownContainer=i(e)}},o.createElement("span",{class:o.const("dcg-dropdown-wrench-container"),role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return t.controller.s("graphing-calculator-narration-label-settings")},onTap:this.bindFn(this.toggleDropdown),selected:this.bindFn(this.showLabelDropdown),"aria-expanded":this.bindFn(this.showLabelDropdown)},o.createElement("i",{class:o.const("dcg-icon-wrench")})),o.createElement(b,{predicate:this.bindFn(this.showLabelDropdown)},function(){return o.createElement(a.LabelDropdownView,{controller:t.props.controller,model:t.props.model})})))},u.prototype.showLabelDropdown=function(){return this.model.labelDropdownOpen},u.prototype.showDropdown=function(e){var t=this,o=i(e.target);i(document).on("mousedown.dcg-"+this.id+" touchstart.dcg-"+this.id+" pointerdown.dcg-"+this.id,function(e){t.showLabelDropdown()&&(0<i(e.target).closest(t.$dropdownContainer).length||t.hideDropdown())}),i(document).on("keydown.dcg-"+this.id,function(e){n.lookup(e)===n.ESCAPE&&(t.hideDropdown(),o.focus())}),this.controller.dispatch({type:"set-item-label-dropdown-open",id:this.id,open:!0})},u.prototype.hideDropdown=function(){i(document).off(".dcg-"+this.id),this.controller.dispatch({type:"set-item-label-dropdown-open",id:this.id,open:!1})},u.prototype.toggleDropdown=function(e){this.showLabelDropdown()?this.hideDropdown():this.showDropdown(e)},u.prototype.getLabel=function(){return this.model.label||""},u.prototype.hasEditableLabel=function(){return l.hasEditableLabel(this.model)},u.prototype.getShowLabel=function(){return!!this.model.showLabel},u.prototype.getIsDisabled=function(){return 0===this.getLabel().length&&!this.getShowLabel()},u.prototype.onLabelInput=function(e){var t=e;this.controller.dispatch({type:"set-item-label",id:this.id,label:t}),this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!!t})},u.prototype.onCheckboxInput=function(){this.controller.dispatch({type:"set-item-showlabel",id:this.id,showLabel:!this.getShowLabel()})},u);function u(){return null!==d&&d.apply(this,arguments)||this}e.default=h});

define('loadcss!expressions/cdf-footer-view', function(){});
define('expressions/cdf-footer-view',["require","exports","tslib","dcgview","jquery","keys","graphing-calc/models/expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-braille-wrapper","./evaluation-view","main/mathquill-operators","dcgview-helpers/checkbox","loadcss!./cdf-footer-view"],function(require,e,n,o,r,i,l,a,c,d,t,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,p=o.Components.If,h=(s=o.Class,n.__extends(f,s),f.prototype.template=function(){var t=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,o.createElement("div",{class:o.const("dcg-cdf-footer-container dcg-mq-underline-container dcg-do-blur"),tapboundary:o.const("true"),handleEvent:o.const("true")},o.createElement(u.Checkbox,{checked:function(){return l.shouldShowCDFFooter(t.model)},disabled:function(){return l.isListValuedDistribution(t.model)},onChange:function(e){t.controller.dispatch({type:"set-show-cdf",id:t.model.id,showCDF:e})},ariaLabel:function(){return t.controller.s("graphing-calculator-button-find-cdf")}},function(){return t.controller.s("graphing-calculator-button-find-cdf")}),o.createElement(p,{predicate:function(){return l.shouldShowCDFFooter(t.model)}},function(){return o.createElement("div",null,o.createElement("span",{class:o.const("dcg-cdf-limit-name")},function(){return t.controller.s("graphing-calculator-label-cdf-minimum")}),o.createElement(c.default,{latex:function(){return l.getCDFMin(t.model)},hasError:function(){return!l.isCDFMinValid(t.model)},brailleShouldFocus:function(){return t.isInputFocused("min")},onBrailleFocusedChanged:function(e){return t.handleFocusedChanged("min",e)},ariaLabel:function(){return t.controller.s("graphing-calculator-narration-cdf-minimum")},placeholder:function(){return l.getCDFMinPlaceholder(t.model)},onBrailleInput:t.bindFn(t.updateCDFMin),controller:t.props.controller,onBrailleKeydown:function(e){return t.handleBraillePressedKey(e,"min")}},o.createElement(a.default,{latex:function(){return l.getCDFMin(t.model)},hasError:function(){return!l.isCDFMinValid(t.model)},isFocused:function(){return t.isInputFocused("min")},onFocusedChanged:function(e){return t.handleFocusedChanged("min",e)},config:t.bindFn(t.getMQConfig),getAriaLabel:function(){return t.controller.s("graphing-calculator-narration-cdf-minimum")},getAriaPostLabel:function(){return""},placeholder:function(){return l.getCDFMinPlaceholder(t.model)},onUserPressedKey:function(e,n){return t.handlePressedKey(e,n,"min")},onUserChangedLatex:t.bindFn(t.updateCDFMin),onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return t.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}})),o.createElement("span",{class:o.const("dcg-cdf-limit-name")},function(){return t.controller.s("graphing-calculator-label-cdf-maximum")}),o.createElement(c.default,{latex:function(){return l.getCDFMax(t.model)},hasError:function(){return!l.isCDFMaxValid(t.model)},brailleShouldFocus:function(){return t.isInputFocused("max")},onBrailleFocusedChanged:function(e){return t.handleFocusedChanged("max",e)},ariaLabel:function(){return t.controller.s("graphing-calculator-narration-cdf-maximum")},placeholder:function(){return l.getCDFMaxPlaceholder(t.model)},onBrailleInput:t.bindFn(t.updateCDFMax),controller:t.props.controller,onBrailleKeydown:function(e){return t.handleBraillePressedKey(e,"max")}},o.createElement(a.default,{latex:function(){return l.getCDFMax(t.model)},hasError:function(){return!l.isCDFMaxValid(t.model)},isFocused:function(){return t.isInputFocused("max")},onFocusedChanged:function(e){return t.handleFocusedChanged("max",e)},config:t.bindFn(t.getMQConfig),getAriaLabel:function(){return t.controller.s("graphing-calculator-narration-cdf-maximum")},getAriaPostLabel:function(){return""},placeholder:function(){return l.getCDFMaxPlaceholder(t.model)},onUserPressedKey:function(e,n){return t.handlePressedKey(e,n,"max")},onUserChangedLatex:t.bindFn(t.updateCDFMax),onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return t.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}})),o.createElement(p,{predicate:t.bindFn(t.showEvaluation)},function(){return o.createElement("div",{class:o.const("dcg-cdf-evaluation-container")},o.createElement(d.default,{val:function(){return l.getCDFEvaluation(t.model)},controller:t.props.controller,dependent:t.const(""),id:function(){return t.model.id},focusable:t.const(!0)}))}))}))},f.prototype.handleBraillePressedKey=function(e,n){var t=i.lookup(e);t&&this.handlePressedKey(t,r.Event(e),n)},f.prototype.handlePressedKey=function(e,n,t){if("Esc"!==e){if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var o=a.default.getFocusedMathquill();o&&(o.keystroke(e,n),"min"===t&&l.getCDFMin(this.model)!==o.latex()&&this.updateCDFMin(o.latex()),"max"===t&&l.getCDFMax(this.model)!==o.latex()&&this.updateCDFMax(o.latex()))}else this.controller.dispatch({type:"set-focus-location",location:void 0})},f.prototype.updateCDFMax=function(e){this.controller.dispatch({type:"set-cdf-max",id:this.model.id,latex:e})},f.prototype.updateCDFMin=function(e){this.controller.dispatch({type:"set-cdf-min",id:this.model.id,latex:e})},f.prototype.showEvaluation=function(){return!!l.isCDFMaxValid(this.model)&&!!l.isCDFMinValid(this.model)},f.prototype.isInputFocused=function(e){var n=this.controller.getFocusLocation();return!(!n||"cdf-limit"!==n.type||n.id!==this.id)&&n.location===e},f.prototype.handleFocusedChanged=function(e,n){n?this.controller.dispatch({type:"set-focus-location",location:{type:"cdf-limit",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"cdf-limit",id:this.id,location:e}})},f.prototype.getMQConfig=function(){return{autoOperatorNames:t.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},f);function f(){var e=null!==s&&s.apply(this,arguments)||this;return e.focusedValues={},e}e.default=h});

define('loadcss!expressions/parameter_suggestions_view', function(){});
define('expressions/parameters_suggestions_view',["require","exports","tslib","dcgview","graphing-calc/models/expression","loadcss!./parameter_suggestions_view"],function(require,e,t,r,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ParametersSuggestionsView=void 0;var a,n=r.Components,i=n.If,s=n.For,o=n.SwitchUnion,u=(a=r.Class,t.__extends(c,a),c.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},c.prototype.template=function(){var t=this;return o(this.bindFn(this.getSuggestionType),{list:function(){return r.createElement(s,{each:t.bindFn(t.getListOfParameters)},r.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":"none"!==t.controller.getBrailleMode()}}},function(e){return r.createElement("span",{class:r.const("dcg-parameter-name")},function(){return t.getParamName(e)})}))},listWithDefault:function(){return r.createElement(s,{each:t.bindFn(t.getListOfParameters)},r.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":"none"!==t.controller.getBrailleMode()}},onTap:t.bindFn(t.fillInDefaults)},function(e){return r.createElement("span",{class:r.const("dcg-parameter-name")},function(){return t.getParamName(e)},r.createElement(i,{predicate:function(){return t.shouldShowDefaultValue(e)}},function(){return r.createElement("span",{class:r.const("dcg-default-marker")},r.const("= "),function(){return t.getDefaultValue(e)})}))}))},individual:function(){return r.createElement("div",{class:function(){return{"dcg-parameter-suggestion-container":!0,"dcg-parameter-suggestion-braille":"none"!==t.controller.getBrailleMode()}}},t.bindFn(t.getMissingRequiredParamText))},none:function(){}})},c.prototype.getExtractedAndDefaultArgString=function(e){var t=e.params,n=e.values,i=e.defaults;return t.map(function(e,t){var r=n[e],a=i[t];return r||a||""}).join(",")},c.prototype.fillInDefaults=function(){var e,t,r,a,n,i,s,o=l.parseToplevelFunction(this.model);o&&(e=o.symbol,r=(t=o.span).input,a=t.start,n=t.end,i="\\operatorname{"+e+"}\\left("+this.getExtractedAndDefaultArgString(o)+"\\right)",s=r.slice(0,a)+i+r.slice(n),this.controller.dispatch({type:"set-item-latex",id:this.id,latex:s}),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}),this.controller.dispatch({type:"keypad/press-key",key:"Left"}))},c.prototype.isMissingDefault=function(){if(!l.isPrimaryLatexValid(this.model))return!1;var e=l.parseToplevelFunction(this.model);if(!e)return!1;for(var t=0;t<e.params.length;t++)if(this.shouldShowDefaultValue(e.params[t]))return!0;return!1},c.prototype.getSuggestionType=function(){return 1<this.getListOfParameters().length?this.isMissingDefault()?"listWithDefault":"list":this.missingRequiredParam()?"individual":"none"},c.prototype.missingRequiredParam=function(){var e=l.parseToplevelFunction(this.model);if(e&&1===e.params.length){var t=e.params[0];if(!this.getDefaultValue(t)&&!this.getParameterExtractedValue(t))return t}},c.prototype.getMissingRequiredParamText=function(){var e=this.missingRequiredParam();return e?this.controller.s("graphing-calculator-text-enter-pareneter",{param:this.getParamName(e)}):""},c.prototype.getDefaultValue=function(e){var t=l.parseToplevelFunction(this.model);if(!t||!t.params)return"";for(var r=0;r<t.params.length;r++)if(t.params[r]===e)return t.defaults[r]||"";return""},c.prototype.getParameterExtractedValue=function(e){var t=l.parseToplevelFunction(this.model);return t&&t.values[e]||""},c.prototype.shouldShowDefaultValue=function(e){return!this.getParameterExtractedValue(e)&&!!this.getDefaultValue(e)},c.prototype.getListOfParameters=function(){var e=l.parseToplevelFunction(this.model);return e?e.params:[]},c.prototype.getParamName=function(e){switch(e){case"mean":return this.controller.s("graphing-calculator-text-parameter-name-mean");case"stdev":return this.controller.s("graphing-calculator-text-parameter-name-stddev");case"dof":return this.controller.s("graphing-calculator-text-parameter-name-dof");case"probsuccess":return this.controller.s("graphing-calculator-text-parameter-name-probsuccess");case"trials":return this.controller.s("graphing-calculator-text-parameter-name-trials");case"data":return this.controller.s("graphing-calculator-text-parameter-name-data");case"binwidth":return this.controller.s("graphing-calculator-text-parameter-name-binwidth");case"min":return this.controller.s("graphing-calculator-text-parameter-name-min");case"max":return this.controller.s("graphing-calculator-text-parameter-name-max");case"height":return this.controller.s("graphing-calculator-text-parameter-name-height");case"offset":return this.controller.s("graphing-calculator-text-parameter-name-offset");default:return e}},c);function c(){return null!==a&&a.apply(this,arguments)||this}e.ParametersSuggestionsView=u});

define('loadcss!expressions/distribution_parameters_view', function(){});
define('expressions/distribution_parameters_view',["require","exports","tslib","dcgview","graphing-calc/models/expression","expressions/cdf-footer-view","./parameters_suggestions_view","loadcss!./distribution_parameters_view"],function(require,e,t,r,o,s,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,l=r.Components.If,c=(i=r.Class,t.__extends(d,i),d.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,r.createElement("div",{class:r.const("dcg-distribution-parameters-container dcg-mq-underline-container dcg-do-blur"),tapboundary:r.const("true"),handleEvent:r.const("true")},r.createElement(n.ParametersSuggestionsView,{model:this.props.model,controller:this.props.controller}),r.createElement(l,{predicate:function(){return o.shouldShowCDFCheckbox(e.model)}},function(){return r.createElement(s.default,{model:e.props.model,controller:e.props.controller})}))},d);function d(){return null!==i&&i.apply(this,arguments)||this}e.default=c});

define('loadcss!expressions/visualization_parameters_view', function(){});
define('expressions/visualization_parameters_view',["require","exports","tslib","dcgview","jquery","keys","graphing-calc/models/expression","dcgview-helpers/checkbox","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-braille-wrapper","./parameters_suggestions_view","main/mathquill-operators","loadcss!./visualization_parameters_view","loadcss!toggle"],function(require,e,t,o,r,a,i,n,l,s,c,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var u,d=o.Components.For,g=o.Components,h=g.SwitchUnion,m=g.If,f=(u=o.Class,t.__extends(v,u),v.prototype.template=function(){var t=this;return o.createElement("div",{class:o.const("dcg-toggle-container")},o.createElement("div",{class:o.const("dcg-expression-footer-title")},this.props.title,o.createElement(m,{predicate:function(){return!!t.props.helpLink}},function(){return o.createElement("a",{"aria-label":function(){return t.props.controller().s("account-shell-link-help")},class:o.const("dcg-expression-footer-title-help"),target:o.const("_blank"),href:t.props.helpLink},o.createElement("i",{class:o.const("dcg-icon-question-sign")}))})),o.createElement(d,{each:this.props.options,key:function(e){return e.name}},o.createElement("div",{class:o.const("dcg-toggle")},function(e){return o.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":t.isSelected(e.name)}},role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return t.props.title()+": "+e.displayName},"aria-pressed":function(){return t.isSelected(e.name)},onTap:function(){return t.props.controller().dispatch({type:"set-visualization-prop",id:t.props.model().id,prop:t.props.vizProp(),value:e.name})}},function(){return e.displayName})})))},v.prototype.isSelected=function(e){return i.getVizProp(this.props.model(),this.props.vizProp())===e},v);function v(){return null!==u&&u.apply(this,arguments)||this}var y,b=(y=o.Class,t.__extends(x,y),x.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,o.createElement("div",{class:o.const("dcg-visualization-parameters-container dcg-mq-underline-container dcg-do-blur"),tapboundary:o.const("true"),handleEvent:o.const("true")},o.createElement(c.ParametersSuggestionsView,t.__assign({},this.props)),o.createElement("div",{class:o.const("dcg-smaller-font")},h(function(){return e.getVisualizationType()},{boxplot:function(){return o.createElement("div",null,o.createElement("div",{class:o.const("dcg-expression-footer-title")},function(){return e.controller.s("graphing-calculator-heading-visual-parameters-display-properties")}),e.makeMQInput({prop:"axisOffset",siblingProps:["breadth"],default:"1",name:function(){return e.controller.s("graphing-calculator-narration-visual-parameters-offset")}}),e.makeMQInput({prop:"breadth",siblingProps:["axisOffset"],default:"1",name:function(){return"y"===i.getVizProp(e.model,"alignedAxis")?e.controller.s("graphing-calculator-narration-visual-parameters-width"):e.controller.s("graphing-calculator-narration-visual-parameters-height")}}),o.createElement(n.Checkbox,{checked:function(){return!!i.getVizProp(e.model,"showBoxplotOutliers")},onChange:e.bindFn(e.onToggleOutliers),ariaLabel:function(){return e.controller.s("graphing-calculator-button-visual-parameters-exclude-outliers")}},o.createElement("span",{class:o.const("dcg-parameter-name")},function(){return e.controller.s("graphing-calculator-button-visual-parameters-exclude-outliers")})))},dotplot:function(){return o.createElement(m,{predicate:function(){return i.needsDotplotXMode(e.model)}},function(){return o.createElement("div",{class:o.const("dcg-toggles-container")},o.createElement(f,t.__assign({},e.props,{vizProp:function(){return"dotplotXMode"},options:function(){return[{name:"exact",displayName:e.controller.s("graphing-calculator-button-visual-parameters-exact")},{name:"bin",displayName:e.controller.s("graphing-calculator-button-visual-parameters-binned")}]},title:function(){return e.controller.s("graphing-calculator-heading-visual-parameters-x-values")}})),o.createElement(f,t.__assign({},e.props,{vizProp:function(){return"binAlignment"},options:function(){return[{name:"center",displayName:e.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:e.controller.s("graphing-calculator-button-visual-parameters-left")}]},title:function(){return e.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")}})))})},histogram:function(){return o.createElement("div",{class:o.const("dcg-toggles-container")},o.createElement(f,t.__assign({},e.props,{vizProp:function(){return"histogramMode"},options:function(){return[{name:"",displayName:e.controller.s("graphing-calculator-button-visual-parameters-count")},{name:"relative",displayName:e.controller.s("graphing-calculator-button-visual-parameters-relative")},{name:"density",displayName:e.controller.s("graphing-calculator-button-visual-parameters-density")}]},title:function(){return e.controller.s("graphing-calculator-heading-visual-parameters-bar-heights")},helpLink:e.const("https://support.desmos.com/hc/en-us/articles/360022405991")})),o.createElement(f,t.__assign({},e.props,{vizProp:function(){return"binAlignment"},options:function(){return[{name:"center",displayName:e.controller.s("graphing-calculator-button-visual-parameters-center")},{name:"left",displayName:e.controller.s("graphing-calculator-button-visual-parameters-left")}]},title:function(){return e.controller.s("graphing-calculator-heading-visual-parameters-bin-alignment")}})))},none:function(){return o.createElement("span",null)}})))},x.prototype.makeMQInput=function(n){var r=this;return o.createElement("span",null,o.createElement("span",{class:o.const("dcg-parameter-name")},n.name,o.const(":")),o.createElement(s.default,{latex:function(){return r.getPropLatex(n)},ariaLabel:n.name,placeholder:function(){return n.default},brailleShouldFocus:function(){return r.isInputFocused(n.prop)},onBrailleInput:function(e){return r.handleLatexChanged(n.prop,e)},controller:this.props.controller,hasError:function(){return!i.isVizPropValid(r.model,n.prop)},onBrailleFocusedChanged:function(e){return r.handleFocusedChanged(n.prop,e)},onBrailleKeydown:function(e){return r.handleBraillePressedKey(e,n.prop)}},o.createElement(l.default,{latex:function(){return r.getPropLatex(n)},hasError:function(){return!i.isVizPropValid(r.model,n.prop)},isFocused:function(){return r.isInputFocused(n.prop)},onFocusedChanged:function(e){return r.handleFocusedChanged(n.prop,e)},placeholder:function(){return n.default},config:this.bindFn(this.getMQConfig),getAriaLabel:n.name,onUserPressedKey:function(e,t){return r.handlePressedKey(e,t,n.prop)},getAriaPostLabel:function(){return""},onUserChangedLatex:function(e){return r.handleLatexChanged(n.prop,e)},onExpressionSizeExceeded:function(){return r.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return r.model.controller.getCapExpressionSize()},needsSystemKeypad:function(){return!r.controller.isKeypadEnabled()}})))},x.prototype.handleBraillePressedKey=function(e,t){var n=a.lookup(e);n&&this.handlePressedKey(n,r.Event(e),t)},x.prototype.handlePressedKey=function(e,t,n){if("Esc"!==e){if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var r=l.default.getFocusedMathquill();r&&(r.keystroke(e,t),this.handleLatexChanged(n,r.latex()))}else this.controller.dispatch({type:"set-focus-location",location:void 0})},x.prototype.isInputFocused=function(e){var t=this.controller.getFocusLocation();return!(!t||"visualization-prop"!==t.type||t.id!==this.id)&&t.location===e},x.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"visualization-prop",id:this.id,location:e}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"visualization-prop",id:this.id,location:e}})},x.prototype.getPropLatex=function(e){var t=e.prop,n=i.getVizProp(this.model,t);return"string"==typeof n?n:""},x.prototype.handleLatexChanged=function(e,t){i.getVizProp(this.model,e)!==t&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:e,value:t})},x.prototype.onToggleOutliers=function(){var e=i.getVizProp(this.model,"showBoxplotOutliers");this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:"showBoxplotOutliers",value:!e})},x.prototype.getVisualizationType=function(){return i.isPrimaryLatexValid(this.model)?i.isBoxPlot(this.model)?"boxplot":i.isDotPlot(this.model)?"dotplot":i.isHistogram(this.model)?"histogram":"none":"none"},x.prototype.getMQConfig=function(){return{autoOperatorNames:p.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},x);function x(){return null!==y&&y.apply(this,arguments)||this}e.default=b});

define('loadcss!expressions/ttest_footer_view', function(){});
define('expressions/ttest_footer_view',["require","exports","tslib","dcgview","graphing-calc/models/expression","core/lib/number-to-latex","dcgview-helpers/static-mathquill-view","loadcss!./ttest_footer_view"],function(require,e,t,n,a,s,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n.Class,t.__extends(c,r),c.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},c.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-ttest-footer-container dcg-do-blur"),handleEvent:n.const("true")},n.createElement("table",null,n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Less than: "+e.getLessThan()}},n.createElement("span",{class:n.const("dcg-operator")},n.createElement(l.default,{config:this.const({}),latex:this.const("<")})),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(l.default,{config:this.const({}),latex:function(){return e.getLessThan()}}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Greater than: "+e.getGreaterThan()}},n.createElement("span",{class:n.const("dcg-operator")},n.createElement(l.default,{config:this.const({}),latex:this.const(">")})),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(l.default,{config:this.const({}),latex:function(){return e.getGreaterThan()}}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Not equal: "+e.getNotEqual()}},n.createElement("span",{class:n.const("dcg-operator")},n.createElement(l.default,{config:this.const({}),latex:this.const("")})),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(l.default,{config:this.const({}),latex:function(){return e.getNotEqual()}})))))))},c.prototype.getLessThan=function(){var e=a.getTTestResults(this.model);return e?s.numberToStatsConfidenceLatex(e.lessThan,5):""},c.prototype.getGreaterThan=function(){var e=a.getTTestResults(this.model);return e?s.numberToStatsConfidenceLatex(e.greaterThan,5):""},c.prototype.getNotEqual=function(){var e=a.getTTestResults(this.model);return e?s.numberToStatsConfidenceLatex(e.notEqual,5):""},c);function c(){return null!==r&&r.apply(this,arguments)||this}e.default=o});

define('loadcss!expressions/stats_footer_view', function(){});
define('expressions/stats_footer_view',["require","exports","tslib","dcgview","graphing-calc/models/expression","dcgview-helpers/static-mathquill-view","core/lib/number-to-latex","loadcss!./stats_footer_view"],function(require,e,t,n,a,l,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c,r=(c=n.Class,t.__extends(o,c),o.prototype.template=function(){var e=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement("div",{class:n.const("dcg-stats-footer-container dcg-do-blur"),handleEvent:n.const("true")},n.createElement("table",null,n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Min: "+e.getMin()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Min")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(l.default,{config:this.const({}),latex:this.bindFn(this.getMin)}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Q1: "+e.getQ1()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Q1")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(l.default,{config:this.const({}),latex:this.bindFn(this.getQ1)}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Median: "+e.getMedian()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Median")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(l.default,{config:this.const({}),latex:this.bindFn(this.getMedian)}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Q3: "+e.getQ3()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Q3")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(l.default,{config:this.const({}),latex:this.bindFn(this.getQ3)}))))),n.createElement("tr",null,n.createElement("td",null,n.createElement("div",{class:n.const("dcg-value"),role:n.const("textbox"),"aria-readonly":n.const("true"),tabindex:n.const("0"),"aria-label":function(){return"Max: "+e.getMax()}},n.createElement("span",{class:n.const("dcg-row-header")},n.const("Max")),n.createElement("span",{class:n.const("dcg-evaluation")},n.createElement(l.default,{config:this.const({}),latex:this.bindFn(this.getMax)})))))))},o.prototype.getMin=function(){var e=a.getStatsResults(this.model);return e?s.numberToDecimalString(e.min):""},o.prototype.getQ1=function(){var e=a.getStatsResults(this.model);return e?s.numberToDecimalString(e.q1):""},o.prototype.getMedian=function(){var e=a.getStatsResults(this.model);return e?s.numberToDecimalString(e.median):""},o.prototype.getQ3=function(){var e=a.getStatsResults(this.model);return e?s.numberToDecimalString(e.q3):""},o.prototype.getMax=function(){var e=a.getStatsResults(this.model);return e?s.numberToDecimalString(e.max):""},o);function o(){return null!==c&&c.apply(this,arguments)||this}e.default=r});

define('loadcss!expressions/expression-edit-actions', function(){});
define('expressions/expression-edit-actions',["require","exports","parser","tslib","dcgview","lib/tooltip","core/lib/dragmode","core/types/styles","graphing-calc/models/expression","graphing-calc/models/abstract-item","lib/aria","loadcss!./expression-edit-actions"],function(require,e,d,t,n,o,g,b,f,m,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpressionEditActions=void 0;var i,l=n.Components.If,a=(i=n.Class,t.__extends(s,i),s.prototype.init=function(){this.controller=this.props.controller()},s.prototype.template=function(){var e=this;return n.createElement(l,{predicate:function(){return e.controller.isInEditListMode()}},function(){return n.createElement("span",{class:function(){return{"dcg-expression-edit-actions":!0,"dcg-limited-height":e.limitedHeight()}},style:function(){return{background:e.controller.getBackgroundColor()}},didMount:function(){e.controller.isInEditListMode()&&r.alert(e.controller.s("graphing-calculator-narration-edit-list-mode-on"))},didUnmount:function(){e.controller.isInEditListMode()||r.alert(e.controller.s("graphing-calculator-narration-edit-list-mode-off"))}},n.createElement(l,{predicate:function(){return!e.controller.hasBackgroundColor()}},function(){return n.createElement("span",{class:n.const("dcg-graphic"),handleEvent:n.const("true ")})}),n.createElement(l,{predicate:e.bindFn(e.canConvertToTable)},function(){return n.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-convert-to-table-tooltip")},gravity:e.const("s")},n.createElement("span",{class:n.const("dcg-action-createtable dcg-exp-action-button"),handleEvent:n.const("true"),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-convert-to-table-tooltip")},onTap:e.bindFn(e.onCreateTable)},n.createElement("i",{class:n.const("dcg-icon-table")})))}),n.createElement(l,{predicate:e.bindFn(e.canDuplicate)},function(){return n.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-duplicate-expression-tooltip")},gravity:e.const("s")},n.createElement("span",{class:n.const("dcg-duplicate-btn dcg-exp-action-button"),handleEvent:n.const("true"),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-duplicate-expression-tooltip")},onTap:e.bindFn(e.onDuplicateWithoutFocus)},n.createElement("i",{class:n.const("dcg-icon-duplicate")})))}),n.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-expression-delete-tooltip")},gravity:e.const("sw")},n.createElement("span",{class:n.const("dcg-delete-btn dcg-exp-action-button"),handleEvent:n.const("true"),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-label-expression-delete-tooltip")},onTap:e.bindFn(e.onDelete)},n.createElement("i",{class:n.const("dcg-icon-remove")}))))})},s.prototype.model=function(){return this.controller.getItemModel(this.props.id())},s.prototype.canConvertToTable=function(){var e=this.model();return!(!e||"expression"!==e.type||!e.formula.is_tableable)},s.prototype.canDuplicate=function(){var e=this.model();return!(!e||"expression"!==e.type||this.isSlider())},s.prototype.limitedHeight=function(){var e=this.model();return e&&("image"===e.type||this.isSlider())},s.prototype.isSlider=function(){var e=this.model();return e&&"expression"===e.type&&e.sliderExists},s.prototype.generateSubscriptedTableColumns=function(e,t,n){var o={independent:t,dependent:n};if("x"===t)return o;if("Identifier"!==d.parse(t).type)return o;var r=d.parse(n);if("FunctionCall"!==r.type)return o;if(1!==r.args.length)return o;var i=r.args[0];if("Identifier"!==i.type)return o;if(i._symbol!==t)return o;var l=r.getInputString(),a=i.getInputSpan(),s=l.substr(0,a.start),c=l.substr(a.end);return o.independent="x_{"+e+"}",o.dependent=s+o.independent+c,o},s.prototype.onCreateTable=function(){var e=this.model();if(e&&"expression"===e.type){var t=e.formula;if(t.is_tableable&&t.table_info){var n,o,r=t.table_info,i=e.index,l=r.independent_variable,a=r.dependent_column;r.by_reference&&(l=(n=this.generateSubscriptedTableColumns(this.controller.generateTableXSubscript(),l,a)).independent,a=n.dependent);var s=[],c=[];if(r.values)for(o=0;o<r.values.length;o++){var d=r.values[o][0];s.push(isNaN(d)?"":d+"");var p=r.values[o][1];c.push(isNaN(p)?"":p+"")}else for(o=-2;o<=2;o++)s.push(o+""),c.push("");var u={id:this.controller.generateId(),type:"table",columns:[{id:this.controller.generateId(),latex:l,color:this.controller.getNextColor(),hidden:!1,values:s,points:!0,lines:!1,dragMode:g.DragMode.NONE,pointStyle:b.PointStyle.POINT,lineStyle:b.LineStyle.SOLID,colorLatex:""},{id:this.controller.generateId(),latex:a,color:m.getDisplayColor(e),hidden:!1,values:c,points:!0,lines:!(f.isPointOrPointList(e)||e.hidden),dragMode:g.DragMode.NONE,pointStyle:b.PointStyle.POINT,lineStyle:b.LineStyle.SOLID,colorLatex:""}]},h=this.controller;this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1}),r.by_reference?this.controller.dispatch({type:"insert-item-at-index",index:i+1,state:u,folderId:e.folderId,focus:!0}):this.controller.dispatch({type:"replace-item-at-index",index:i,state:u,focus:!0}),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-table-created"),undoCallback:function(){h.dispatch({type:"undo"}),h.dispatch({type:"set-edit-list-mode",isEditListMode:!0,focusExpressionList:!1})}}})}}},s.prototype.onDelete=function(e){this.controller.dispatch({type:"delete-item-and-animate-out",id:this.props.id(),setFocusAfterDelete:"keyboard"===e.device})},s.prototype.onDuplicateWithoutFocus=function(){this.controller.dispatch({type:"duplicate-expression",id:this.props.id()})},s);function s(){return null!==i&&i.apply(this,arguments)||this}e.ExpressionEditActions=a});

define('loadcss!expressions/suggested-zoom-view', function(){});
define('expressions/suggested-zoom-view',["require","exports","tslib","dcgview","lib/tooltip","loadcss!./suggested-zoom-view"],function(require,t,o,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SuggestedZoomView=void 0;var i,r=e.Components.If,s=(i=e.Class,o.__extends(l,i),l.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},l.prototype.template=function(){var t=this;return e.createElement(r,{predicate:function(){return t.controller.shouldExpressionZoomFit(t.model)}},function(){return e.createElement("div",{class:e.const("dcg-suggested-zoom-view dcg-do-blur"),handleEvent:e.const(!0)},e.createElement(n.Tooltip,{tooltip:t.bindFn(t.getZoomText),gravity:function(){return"e"}},e.createElement("i",{onTap:t.bindFn(t.onZoom),role:e.const("button"),"aria-label":t.bindFn(t.getZoomText),class:e.const("dcg-icon-zoom-fit")})))})},l.prototype.getZoomText=function(){return this.controller.s("graphing-calculator-text-zoom-fit")},l.prototype.onZoom=function(){this.controller.dispatch({type:"expression-zoom-fit",id:this.model.id})},l);function l(){return null!==i&&i.apply(this,arguments)||this}t.SuggestedZoomView=s});
define('vendor/html-parse-stringify2',[],function(){return r={},o.m=n=[function(e,t,n){e.exports={parse:n(1),stringify:n(4)}},function(e,t,n){var r=/(?:<!--[\S\s]*?-->|<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>)/g,v=n(2),o=Object.create?Object.create(null):{};function g(e,t,n,r,o){var i=t.indexOf("<",r),c=t.slice(r,-1===i?void 0:i);/^\s*$/.test(c)&&(c=" "),(!o&&-1<i&&0<=n+e.length||" "!==c)&&e.push({type:"text",content:c})}e.exports=function(u,a){(a=a||{}).components||(a.components=o);var l,f=[],p=-1,s=[],d={},m=!1;return u.replace(r,function(e,t){if(m){if(e!=="</"+l.name+">")return;m=!1}var n,r="/"!==e.charAt(1),o=0===e.indexOf("\x3c!--"),i=t+e.length,c=u.charAt(i);r&&!o&&(p++,"tag"===(l=v(e)).type&&a.components[l.name]&&(l.type="component",m=!0),l.voidElement||m||!c||"<"===c||g(l.children,u,p,i,a.ignoreWhitespace),d[l.tagName]=l,0===p&&f.push(l),(n=s[p-1])&&n.children.push(l),s[p]=l),!o&&r&&!l.voidElement||(o||p--,!m&&"<"!==c&&c&&g(n=-1===p?f:s[p].children,u,p,i,a.ignoreWhitespace))}),!f.length&&u.length&&g(f,u,0,0,a.ignoreWhitespace),f}},function(e,t,n){var c=/([\w-]+)|=|(['"])([.\s\S]*?)\2/g,u=n(3);e.exports=function(t){var n,r=0,o=!0,i={type:"tag",name:"",voidElement:!1,attrs:{},children:[]};return t.replace(c,function(e){return"="===e?(o=!0,void r++):(o?0===r?(!u[e]&&"/"!==t.charAt(t.length-2)||(i.voidElement=!0),i.name=e):(i.attrs[n]=e.replace(/^['"]|['"]$/g,""),n=void 0):(n&&(i.attrs[n]=n),n=e),r++,void(o=!1))}),i}},function(e,t){e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuitem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},function(e,t){function n(e,t){switch(t.type){case"text":return e+t.content;case"tag":return e+="<"+t.name+(t.attrs?function(e){var t=[];for(var n in e)t.push(n+'="'+e[n]+'"');return t.length?" "+t.join(" "):""}(t.attrs):"")+(t.voidElement?"/>":">"),t.voidElement?e:e+t.children.reduce(n,"")+"</"+t.name+">"}}e.exports=function(e){return e.reduce(function(e,t){return e+n("",t)},"")}}],o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0);function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}var n,r});
define('l10n-tools/localize-serializer',["require","exports"],function(require,g){"use strict";Object.defineProperty(g,"__esModule",{value:!0}),g.serializeToTemplateString=g.variableRegexp=void 0,g.variableRegexp=/\{\$([a-zA-Z0-9\-]+([a-zA-Z0-9\-]+_)*[a-zA-Z0-9\-]+)\}/,g.serializeToTemplateString=function(a,d){var o=0,u=0,l={},s={},e=function i(e){{if(d.isConst(e))return v(d.getConstValue(e));if(d.isNamedBinding(e)){var n=f(l,d.getBindingName(e)),r="{$"+n+"}";if(!g.variableRegexp.test(r))throw new Error("Invalid <Localize> variable: "+r+".");return d.addBinding&&d.addBinding(n,e),l[n]=!0,r}if(e!==a&&d.isView(e)){var n=f(s,d.getViewName(e));if(!/[a-zA-Z0-9\-_]/.test(n))throw new Error("Invalid <Localize> subview identifier: "+n+".");return d.addView&&d.addView(n,e),s[n]=!0,"<"+n+"/>"}if(d.isBinding(e)){var n=f(l,"v"+o++),r="{$"+n+"}";return d.addBinding&&d.addBinding(n,e),l[n]=!0,r}var n=""+u++;d.addElement&&d.addElement(n,e);var t=[];return d.forEachChild(e,function(e){t.push(i(e))}),s[n]=!0,0<t.length?"<"+n+">"+t.join("")+"</"+n+">":"<"+n+"/>"}}(a);if(!/^<0>/.test(e)||!/<\/0>$/.test(e))throw new Error("Expected template string to start and end with <0> and </0>, but found "+JSON.stringify(e));return e.slice(3,-4).trim();function f(e,i){for(var n=0,r=i;e[r];)r=i+"-"+ ++n;return r}};var i=!0;function v(e){return i?e:e.replace(/\{|\}/g,function(e){return'{"'+e+'"}'}).replace(/(^|[\s\n]+)(\[|\]|\.)/g,function(e,i,n){return i+'{"'+n+'"}'})}});
define('shared/dcgviews/localize',["require","exports","tslib","dcgview","vendor/html-parse-stringify2","l10n-tools/localize-serializer","lib/i18n"],function(require,e,n,a,i,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:true});e.Localize=void 0;function s(e){return e.__DCGViewLocalizeBindingName}function u(e){return typeof e==="function"&&e.__DCGViewLocalizeViewName}var t=function(e){n.__extends(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}t.prototype.init=function(){this.viewMap={};this.elementMap={};this.bindingMap={};this.i18n=this.props.i18n();this.templateString=this.serializeToTemplateString(a.createElement("div",null,this.children))};t.prototype.template=function(){var t=this;return a.createElement(a.Components.If,{predicate:function(){return t.shouldShow()}},function(){return a.createElement(a.Components.Switch,{key:function(){return c(t.translatedString())}},function(e){return t.renderDeserializedTemplateNode(t.parseAndValidate(e))})})};t.prototype.shouldShow=function(){var e=this.props.options&&this.props.options();if(e&&e.hideUntranslatedView&&this.i18n.hasTranslation){return this.i18n.hasTranslation(this.props.key())}return true};t.prototype.translatedString=function(){var e={};for(var t in this.bindingMap){e[t]=o.raw("{$"+t+"}")}return this.i18n.s(this.props.key(),e)};t.variable=function(e,t){var n=function(){return t()};n.__DCGViewLocalizeBindingName=e;return n};t.subview=function(e,t){var n=function(){return t()};n.__DCGViewLocalizeViewName=e;return n};t.prototype.parseAndValidate=function(e){var t=i.parse(e);var r={};var a={};o(t);for(var n in this.elementMap){if(!a[n]){return i.parse(c(this.templateString))}}for(var n in this.bindingMap){if(!r[n]){return i.parse(c(this.templateString))}}return t;function o(e){if(Array.isArray(e)){for(var t=0,n=e;t<n.length;t++){var i=n[t];o(i)}return}if(e.name==="token"){r[e.attrs.id]=true}else if(e.type!=="text"){a[e.name]=true;o(e.children)}}};t.prototype.renderDeserializedTemplateNode=function(e){var t=this;if(Array.isArray(e)){return e.map(function(e){return t.renderDeserializedTemplateNode(e)})}if(e.type==="text"){return a.const(e.content||"")}else if(e.name==="token"){var n=this.bindingMap[e.attrs.id];if(!n){return function(){return""}}return n}else{if(this.elementMap[e.name]){var i=this.elementMap[e.name];var r=e.children.map(function(e){return t.renderDeserializedTemplateNode(e)});return p(i.type,i.attrs,r)}else if(this.viewMap[e.name]){return this.viewMap[e.name]()}else{return p("span",{},[])}}};t.prototype.serializeToTemplateString=function(e){var n=this;return r.serializeToTemplateString(e,{isView:u,isConst:l,isBinding:function(e){return typeof e==="function"},isNamedBinding:s,getConstValue:function(e){return e()},getBindingName:function(e){return e.__DCGViewLocalizeBindingName},getViewName:function(e){return e.__DCGViewLocalizeViewName},addBinding:function(e,t){n.bindingMap[e]=t},addElement:function(e,t){n.elementMap[e]={type:t.tagName,attrs:t.attrs}},addView:function(e,t){if(n.viewMap[e]){throw new Error("Unexpected duplicate view "+e+".")}n.viewMap[e]=t},forEachChild:function(e,t){for(var n=0,i=e.children;n<i.length;n++){var r=i[n];if(!l(r)&&typeof r!=="function"&&r._isDCGView){throw new Error("Bare DCGViews are not allowed inside <Localize>. Use Localize.subview().")}t(r)}}})};return t}(a.Class);e.Localize=t;function l(e){return typeof e==="function"&&e.isDCGViewConst}function p(e,t,n){var i=a;return i.createElement(e,t,n)}function c(e){var t="<0>"+e+"</0>";return t.replace(new RegExp(r.variableRegexp.source,"g"),function(e,t){return'<token id="'+t+'"/>'})}});

define('loadcss!expressions/clickable_info_view', function(){});
define('expressions/clickable_info_view',["require","exports","tslib","shared/dcgviews/localize","dcgview","graphing-calc/models/expression","graphing-calc/models/image","graphing-calc/models/simulation","dcgview-helpers/mathquill-view","../dcgview-helpers/tooltipped-error","main/mathquill-operators","loadcss!./clickable_info_view"],function(require,e,t,o,n,r,l,i,c,a,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClickableInfoView=void 0;var u,d=n.Components,p=d.Input,h=d.For,g=d.If,f=(u=n.Class,t.__extends(m,u),m.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},m.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-clickable-info-container dcg-mq-underline-container dcg-do-blur"),tapboundary:n.const("true"),handleEvent:n.const("true")},n.createElement("div",{class:n.const("dcg-smaller-font")},n.createElement("div",{role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-clickable-properties")}},n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-expression-footer-title")},n.createElement("div",{class:n.const("dcg-footer-label")},this.bindFn(this.getTitle)),n.createElement("div",{class:n.const("dcg-add-new-rule"),onTap:function(){return t.addRule()}},n.createElement("i",{class:n.const("dcg-icon-plus")}),n.const(" "),n.createElement("span",{class:n.const("dcg-add-new-rule-label")},function(){return t.controller.s("graphing-calculator-label-add-update-rule")}))),n.createElement(h,{each:this.bindFn(this.getRuleIds)},n.createElement("div",null,function(e){return n.createElement("div",{class:n.const("dcg-clickable-property-row")},n.createElement("div",{style:t.const({display:"inline-block"})},n.createElement(o.Localize,{i18n:t.const(t.controller),key:t.const("graphing-calculator-label-clickable-object-set-property")},n.const("Set"),n.const(" "),o.Localize.subview("assignment",function(){return t.makeMQInput({ruleId:e,prop:"assignment",name:function(){return t.controller.s("graphing-calculator-label-assignment")}})}),n.const("to"),n.const(" "),o.Localize.subview("expression",function(){return t.makeMQInput({ruleId:e,prop:"expression",name:function(){return t.controller.s("graphing-calculator-label-expression")}})}))),n.createElement(g,{predicate:function(){return t.doesRuleHaveError(e)}},function(){return n.createElement("span",{class:n.const("dcg-clickable-info-error-container")},n.createElement(a.TooltippedError,{error:function(){return t.getRuleErrorString(e)},gravity:t.const("s"),size:t.const("small")}))}),n.createElement("span",{class:n.const("dcg-remove-rule"),onTap:function(){return t.removeRule(e)}},n.createElement("i",{class:n.const("dcg-icon-remove")})))}))),n.createElement(g,{predicate:this.bindFn(this.shouldShowScreenReaderLabel)},function(){return n.createElement(p,{"aria-label":function(){return t.controller.s("graphing-calculator-narration-screen-reader-label")},placeholder:function(){return t.controller.s("graphing-calculator-text-add-screen-reader-label-placeholder")},value:function(){return t.model.clickableInfo.description},onInput:function(e){return t.controller.dispatch({type:"set-clickableinfo-prop",id:t.model.id,prop:"description",value:e})}})})))},m.prototype.shouldShowScreenReaderLabel=function(){return"simulation"!==this.model.type},m.prototype.getTitle=function(){return"simulation"===this.model.type?this.controller.s("graphing-calculator-heading-on-every-update"):this.controller.s("graphing-calculator-heading-when-clicked")},m.prototype.getRuleIds=function(){return this.model.clickableInfo.rules.map(function(e){return e.id})},m.prototype.addRule=function(){this.controller.dispatch({type:"add-clickableinfo-rule",id:this.model.id})},m.prototype.removeRule=function(e){this.controller.dispatch({type:"remove-clickableinfo-rule",id:this.model.id,ruleId:e})},m.prototype.makeMQInput=function(o){var r=this;return n.createElement(c.default,{latex:function(){return r.getClickableInfoPropLatex(o)},hasError:this.const(!1),isFocused:function(){return r.isInputFocused(o)},onFocusedChanged:function(e){return r.handleFocusedChanged(o,e)},config:this.bindFn(this.getMQConfig),getAriaLabel:o.name,onUserPressedKey:function(e,t){return r.handlePressedKey(e,t,o)},getAriaPostLabel:function(){return""},onUserChangedLatex:function(e){return r.handleLatexChanged(o,e)},onExpressionSizeExceeded:function(){return r.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return!!r.model.controller.getGraphSettings().config.capExpressionSize},needsSystemKeypad:function(){return!r.controller.isKeypadEnabled()}})},m.prototype.handlePressedKey=function(e,t,o){if("Esc"!==e){if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});var r=c.default.getFocusedMathquill();r&&(r.keystroke(e,t),this.handleLatexChanged(o,r.latex()))}else this.controller.dispatch({type:"set-focus-location",location:void 0})},m.prototype.isInputFocused=function(e){var t=this.controller.getFocusLocation();return!(!t||"clickableinfo-rule"!==t.type||t.id!==this.id||t.location.ruleId!==e.ruleId||t.location.prop!==e.prop)},m.prototype.handleFocusedChanged=function(e,t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"clickableinfo-rule",id:this.id,location:{ruleId:e.ruleId,prop:e.prop}}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"clickableinfo-rule",id:this.id,location:{ruleId:e.ruleId,prop:e.prop}}})},m.prototype.getRulePackedError=function(e){return"image"===this.model.type?l.getClickableInfoRulePackedError(this.model,e):"simulation"===this.model.type?i.getClickableInfoRulePackedError(this.model,e):r.getClickableInfoRulePackedError(this.model,e)},m.prototype.doesRuleHaveError=function(e){return!!this.getRulePackedError(e)},m.prototype.getRuleErrorString=function(e){return this.controller.unpack(this.getRulePackedError(e))},m.prototype.getClickableInfoPropLatex=function(e){var t=e.ruleId,o=e.prop;return"image"===this.model.type?l.getClickableInfoPropLatex(this.model,t,o):"simulation"===this.model.type?i.getClickableInfoPropLatex(this.model,t,o):r.getClickableInfoPropLatex(this.model,t,o)},m.prototype.handleLatexChanged=function(e,t){this.getClickableInfoPropLatex(e)!==t&&this.controller.dispatch({type:"set-clickableinfo-rule-prop",id:this.id,ruleId:e.ruleId,prop:e.prop,value:t})},m.prototype.getMQConfig=function(){return{autoOperatorNames:s.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},m);function m(){return null!==u&&u.apply(this,arguments)||this}e.ClickableInfoView=f});

define('loadcss!expressions/expression-footer', function(){});
define('expressions/expression_view',["require","exports","config","tslib","browser","keys","jquery","./abstract-item-view","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","lib/conditional_blur","./expression-icon-view","./evaluation-view","expressions/unresolved_view","expressions/domain_view","expressions/regression_view","expressions/slider_view","expressions/promptslider_view","expressions/label_view","expressions/distribution_parameters_view","expressions/visualization_parameters_view","expressions/ttest_footer_view","expressions/stats_footer_view","graphing-calc/models/expression","core/lib/label","./expression-edit-actions","./suggested-zoom-view","dcgview","./clickable_info_view","main/manage-focus-helper","dcgview-helpers/mathquill-braille-wrapper","main/mathquill-operators","jquery.handleevent","loadcss!./expression-footer"],function(require,e,t,o,n,r,i,l,s,a,c,d,u,p,h,m,g,f,y,b,v,x,E,w,S,F,_,L,k,C,M,T){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var A,D=L.Components,I=D.If,B=D.SwitchUnion,P=(A=l.default,o.__extends(z,A),z.prototype.didMount=function(){this.onItemViewMounted()},z.prototype.didMountRootNode=function(e){this.rootNode=e},z.prototype.willUnmount=function(){this.onItemViewUnmounted()},z.prototype.template=function(){var o=this;return L.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-mathitem":!0,"dcg-inFolder":!!o.model.folderId,"dcg-selected":o.controller.isItemSelected(o.id)&&!o.controller.isInEditListMode(),"dcg-dragging":!!o.controller.isItemBeingDragged(o.id),"dcg-hasSlider":o.hasSlider(),"dcg-hasEvaluation":o.controller.shouldShowEvaluationForItem(o.id),"dcg-hasRegression":o.hasRegression(),"dcg-hasDomain":o.hasDomain()}},"expr-id":function(){return o.model.id},didMount:this.bindFn(this.didMountRootNode)},L.createElement("div",{class:L.const("dcg-fade-container"),onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},L.createElement("div",{class:L.const("dcg-main")},L.createElement(I,{predicate:function(){return!o.controller.isInEditListMode()}},function(){return L.createElement(M.default,{latex:function(){return w.getDisplayLatex(o.model)},ariaLabel:function(){return o.getAriaLabel("braille")},brailleShouldFocus:function(){return o.isFocused()},onBrailleInput:function(e){return o.handleLatexChanged(e)},controller:o.props.controller,onBrailleFocusedChanged:function(e,t){return o.handleMQFocusedChanged(e,t)},onBrailleKeydown:o.bindFn(o.handleBraillePressedKey)},L.createElement(s.default,{latex:function(){return w.getDisplayLatex(o.model)},getAriaLabel:function(){return o.getAriaLabel("speech")},getAriaPostLabel:o.bindFn(o.getFormulaAria),isFocused:function(){return o.isFocused()},capExpressionSize:function(){return o.controller.getCapExpressionSize()},config:o.bindFn(o.getMQConfig),hasError:o.const(!1),onUserPressedKey:function(e,t){return o.handlePressedKey(e,t)},onUserChangedLatex:function(e){return o.handleLatexChanged(e)},onExpressionSizeExceeded:function(){return o.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e,t){return o.handleMQFocusedChanged(e,t)},needsSystemKeypad:function(){return!o.controller.isKeypadEnabled()}},L.createElement("div",{class:L.const("dcg-expression-mathquill")})))}),L.createElement(I,{predicate:function(){return o.controller.isInEditListMode()}},function(){return L.createElement("div",{class:L.const("dcg-edit-list-mathquill"),tabindex:function(){return"none"===o.controller.getBrailleMode()?"0":"-1"},onTap:o.bindFn(o.exitEditListMode),manageFocus:o.const({shouldBeFocused:function(){return"none"===o.controller.getBrailleMode()&&C.defaultShouldBeFocused({controller:o.controller,location:{type:"readonly-expression",id:o.model.id}})},onFocusedChanged:function(e){"none"===o.controller.getBrailleMode()&&(e?o.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:o.model.id}}):o.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:o.model.id}}))}})},L.createElement(M.default,{latex:function(){return w.getDisplayLatex(o.model)},ariaLabel:function(){return o.getAriaLabel("braille")},controller:o.props.controller,isStatic:o.const(!0),brailleShouldFocus:function(){var e=o.controller.getFocusLocation();return!!e&&"readonly-expression"===e.type&&e.id===o.id},onBrailleFocusedChanged:function(e){e?o.controller.dispatch({type:"set-focus-location",location:{type:"readonly-expression",id:o.model.id}}):o.controller.dispatch({type:"blur-focus-location",location:{type:"readonly-expression",id:o.model.id}})}},L.createElement(a.default,{latex:function(){return w.getDisplayLatex(o.model)},config:o.bindFn(o.getMQConfig),getAriaLabel:function(){return o.getAriaLabel("speech")}})))})),L.createElement("i",{class:L.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:L.const("true"),onTap:this.bindFn(this.onDelete)}),L.createElement(I,{predicate:this.bindFn(this.shouldShowFooter)},function(){return L.createElement("div",{class:o.getFooterClass()},B(function(){return o.getFooterType()},{none:function(){},regression:function(){return L.createElement(m.default,{model:o.props.model,controller:o.props.controller})},label:function(){return L.createElement(y.default,{model:o.props.model,controller:o.props.controller})},slider:function(){return L.createElement(g.default,{model:o.props.model,controller:o.props.controller})},domain:function(){return L.createElement(h.default,{model:o.props.model,controller:o.props.controller})},evaluation:function(){return L.createElement(u.default,{id:function(){return o.props.model().id},dependent:function(){return w.getAssignment(o.model)||""},val:function(){return o.controller.getEvaluationValueForItem(o.id)},controller:o.props.controller,focusable:o.const(!1)})},distribution:function(){return L.createElement(b.default,{model:o.props.model,controller:o.props.controller})},visualization:function(){return L.createElement(v.default,{model:o.props.model,controller:o.props.controller})},ttest:function(){return L.createElement(x.default,{model:o.props.model,controller:o.props.controller})},stats:function(){return L.createElement(E.default,{model:o.props.model,controller:o.props.controller})},unresolved:function(){return L.createElement(p.default,{controller:o.props.controller})}}),L.createElement(I,{predicate:o.bindFn(o.shouldShowClickableProperties)},function(){return L.createElement(k.ClickableInfoView,{controller:function(){return o.props.controller()},model:function(){return o.model}})}),L.createElement(I,{predicate:o.bindFn(o.shouldShowBrailleError)},function(){return L.createElement("div",{tabindex:L.const(0),class:L.const("dcg-expression-braille-error"),"aria-roledescription":L.const("error"),"aria-label":function(){return o.controller.unpack(o.model.error)}},L.createElement("i",{class:L.const("dcg-icon-error")}),function(){return o.controller.unpack(o.model.error)})}),L.createElement(I,{predicate:o.bindFn(o.shouldShowSliderPrompt)},function(){return L.createElement(f.default,{model:o.props.model,controller:o.props.controller})}))})),L.createElement("span",{class:L.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:L.const("true"),tapboundary:L.const("true"),disablescroll:L.const("true"),style:L.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},L.createElement("span",{class:L.const("dcg-num")},function(){return o.model.displayIndex}),L.createElement("div",{class:L.const("dcg-tab-interior dcg-action-icon-mouse")},L.createElement(d.default,{model:this.props.model,controller:this.props.controller})),L.createElement(_.SuggestedZoomView,{model:this.props.model,controller:this.props.controller})),L.createElement(F.ExpressionEditActions,{controller:this.props.controller,id:function(){return o.model.id}}))},z.prototype.shouldShowFooter=function(){return!!this.shouldShowBrailleError()||!!this.shouldShowSliderPrompt()||!!this.shouldShowClickableProperties()||"none"!==this.getFooterType()},z.prototype.shouldShowClickableProperties=function(){return!!this.controller.canAuthorClickableObjects()&&!!w.isClickableAllowed(this.model)&&this.model.clickableInfo.enabled},z.prototype.getFooterType=function(){return this.hasRegression()?"regression":this.shouldShowLabelView()?"label":this.hasSlider()?"slider":this.hasDomain()?"domain":this.isTTest()?"ttest":this.isStats()?"stats":this.controller.shouldShowEvaluationForItem(this.id)?"evaluation":this.isToplevelDistribution()?"distribution":this.isVisualization()?"visualization":this.model.unresolved?"unresolved":"none"},z.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-indent-in-folder dcg-fadein-bottom")},z.prototype.onCreateSliders=function(e){this.controller.dispatch({type:"create-sliders-for-item",id:this.id,variables:e})},z.prototype.shouldShowLabelView=function(){return t.get("labels")&&w.isPointOrPointList(this.model)},z.prototype.shouldShowSliderPrompt=function(){return!!this.controller.areSlidersEnabled()&&0<w.getMissingVariables(this.model).length},z.prototype.shouldShowBrailleError=function(){return"none"!==this.controller.getBrailleMode()&&this.hasError()},z.prototype.hasRegression=function(){return!(!this.model.formula||!this.model.formula.is_regression)},z.prototype.hasDomain=function(){return w.hasDomain(this.model)},z.prototype.isToplevelDistribution=function(){return w.isToplevelDistribution(this.model)},z.prototype.isVisualization=function(){return w.isVisualization(this.model)},z.prototype.isTTest=function(){return w.isTTest(this.model)},z.prototype.isStats=function(){return w.isStats(this.model)},z.prototype.hasSlider=function(){return!!this.model.sliderExists},z.prototype.getLabelOptions=function(){return this.controller.getEvaluationLabelOptionsForItem(this.model.id)},z.prototype.getAriaLabel=function(e){if(this.shouldShowLabelView()){var t=this.model.label&&""!==this.model.label?this.model.label:"speech"===e?this.controller.s("graphing-calculator-narration-expression-label"):this.controller.raw("lbl"),o=this.model.showLabel?t:"speech"===e?this.controller.s("graphing-calculator-narration-expression-hidden-label",{label:t}):this.controller.raw("h __label__",{label:t});return o}return"speech"===e?this.controller.s("shared-calculator-narration-expression-index",{index:this.model.displayIndex}):this.controller.raw("eq__index__",{index:this.model.displayIndex})},z.prototype.getFormulaAria=function(){var e,t,o=this.model.formula,r="";return o&&(w.isEmpty(this.model)||(this.controller.shouldShowEvaluationForItem(this.id)?(r="equals ",e=o.zero_values&&o.zero_values.length?o.zero_values[0].val:o.constant_value,Array.isArray(e)?r+=e.length+" element list.":void 0!==e&&(r+=S.truncatedAriaLabel(+e,this.getLabelOptions()))):o.error&&!this.shouldShowSliderPrompt()?r=this.controller.unpack(o.error):w.isToplevelDistribution(this.model)?r=this.controller.s("graphing-calculator-narration-expression-evaluation-is-distribution"):this.isTTest()&&(r=this.controller.s("graphing-calculator-narration-expression-evaluation-is-t-test")),this.model.shouldGraph&&(o.is_graphable||o.is_regression)&&(o.is_graphable&&o.is_regression?r+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph-and-regression"):o.is_regression?r+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-regression"):r+=" "+this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph"),(t=this.controller.getAudioGraph())&&t.agNavigator.canTrace(this.model)&&(n.IS_APPLE?r+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):r+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows"))))),r},z.prototype.handleBraillePressedKey=function(e){var t,o=r.lookup(e);o&&("Esc"===o?(c.default(),this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}})):"Up"===o||"Down"===o||"Enter"===o?this.controller.dispatch({type:"on-special-key-pressed",key:o}):"Del"!==o&&"Backspace"!==o||(t=M.getFocusedBrailleElement(),w.isEmpty(this.model)&&M.brailleInputIsEmpty(t)&&(this.controller.dispatch({type:"on-special-key-pressed",key:"Del"===o?"Delete":o}),e.preventDefault(),e.stopPropagation())))},z.prototype.handlePressedKey=function(e,t){var o=s.default.getFocusedMathquill();if(o){if("Esc"===e)return c.default(),void(this.hasSlider()&&this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:this.model.id}}));if("Up"===e||"Down"===e)return s.default.applyArrowKeyAndReturnIfWasAtBounds(o,e,t)?this.controller.dispatch({type:"on-special-key-pressed",key:e}):void 0;if("Delete"===e||"Backspace"===e){if(w.isEmpty(this.model))return this.controller.dispatch({type:"on-special-key-pressed",key:e})}else if("Enter"===e)return t&&(t.preventDefault(),t.stopPropagation()),this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});o.keystroke(e,t),this.handleLatexChanged(o.latex())}},z.prototype.handleLatexChanged=function(e){e!==this.model.latex&&this.controller.dispatch({type:"set-item-latex",id:this.id,latex:e})},z.prototype.doesNodeBelongToSliderLimit=function(e){return!!e&&!!this.rootNode.contains(e)&&!!i(e).closest("[data-dcg-limit]").length},z.prototype.handleMQFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}}):this.doesNodeBelongToSliderLimit(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"expression",id:this.id}})},z.prototype.onMouseSelect=function(e){"keyboard"!==e.device&&("dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-focus-location",location:{type:"expression",id:this.id}})))},z.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!!e&&"expression"===e.type&&e.id===this.id},z.prototype.isSliderThumbFocused=function(){var e=this.controller.getFocusLocation();return!!e&&"slider-thumb"===e.type&&e.id===this.id},z.prototype.hasError=function(){return!!this.model.error&&!w.isEmpty(this.model)},z.prototype.getMQConfig=function(){return{autoOperatorNames:T.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},z);function z(){return null!==A&&A.apply(this,arguments)||this}e.default=P});

define('loadcss!expressions/smart_textarea', function(){});
define('expressions/smart_textarea',["require","exports","tslib","keys","browser","dcgview","jquery","lib/conditional_blur","jquery.handleevent","loadcss!./smart_textarea"],function(require,e,t,n,o,s,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,p=s.Components.Textarea,d=(r=s.Class,t.__extends(l,r),l.prototype.template=function(){var e=this;return s.createElement("div",{class:s.const("dcg-smart-textarea-container")},s.createElement("div",{class:s.const("dcg-displayTextarea dcg-fixed-width-element"),didMount:this.bindFn(this.didMountDisplay)}),s.createElement(p,{class:function(){return{"dcg-do-blur":!0,"dcg-fixed-width-element":!0,"dcg-smart-textarea":!0,"dcg-empty":!e.props.text()}},"aria-label":function(){return e.props.ariaLabel?e.props.ariaLabel():void 0},placeholder:this.props.placeholder,readonly:function(){return!!e.props.readonly()||void 0},value:this.props.text,onInput:this.props.onInput,didMount:this.bindFn(this.didMountTextarea),onKeydown:this.bindFn(this.onKeydownEvent)}))},l.prototype.getDisplayTextHTML=function(){var e=(e=this.props.text()||"").replace(/</g,"&lt;").replace(/>/g,"&gt;");return this.props.showLinks()?e=e.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi,"<a href='$1' target ='_blank'>$1</a>"):e},l.prototype.willUnmount=function(){this.textareaNode=void 0},l.prototype.didMountDisplay=function(e){this.displayNode=e,i(e).on("touchend",function(e){e.preventDefault()}),i(e).on("dcg-tap dcg-tapstart","a",function(e){e.handle()}),this.renderDisplayText()},l.prototype.didMountTextarea=function(e){var t=this;this.textareaNode=e,i(e).on("dcg-tapstart",function(e){e.handle()}),i(e).on("focusin focusout",function(){return t.onFocusEvent()}),this.updateFocused()},l.prototype.didUpdate=function(){this.updateFocused(),this.renderDisplayText()},l.prototype.onFocusEvent=function(){var e;this.textareaNode&&(e=document.activeElement===this.textareaNode,this.shouldBeFocused()!==e&&this.props.onFocusChange(e))},l.prototype.renderDisplayText=function(){var e;this.displayNode&&(e=this.getDisplayTextHTML(),this.lastDisplayTextHTML!==e&&(this.lastDisplayTextHTML=e,this.displayNode.innerHTML=e))},l.prototype.isFocused=function(){return document.activeElement===this.textareaNode},l.prototype.shouldBeFocused=function(){return this.props.shouldFocus()},l.prototype.updateFocused=function(){if(this.textareaNode){var e=this.isFocused(),t=this.shouldBeFocused();if(e!==t)if(t){if(o.IS_IPAD&&o.IS_IN_IFRAME)return;this.textareaNode.focus(),this.textareaNode.selectionStart=this.textareaNode.selectionEnd=this.textareaNode.value.length}else this.textareaNode.blur()}},l.prototype.onKeydownEvent=function(e){var t,o=this.textareaNode;o&&(t=n.lookup(e),this.props.readonly()&&void 0!==this.props.readonlyAction?e.altKey||e.ctrlKey||e.metaKey||e.shiftKey||t!==n.ENTER&&t!==n.SPACEBAR||(e.preventDefault(),this.props.readonlyAction()):(t!==n.ENTER||e.metaKey?t===n.ESCAPE?a.default():t===n.UP?0===o.selectionStart&&0===o.selectionEnd&&(e.preventDefault(),this.props.onSpecialKey("Up")):t===n.DOWN?o.selectionStart===o.value.length&&o.selectionEnd===o.value.length&&(e.preventDefault(),this.props.onSpecialKey("Down")):t===n.BACKSPACE?0===o.value.length&&(e.preventDefault(),this.props.onSpecialKey("Backspace")):t===n.DELETE&&0===o.value.length&&(e.preventDefault(),this.props.onSpecialKey("Delete")):(e.preventDefault(),this.props.onSpecialKey("Enter")),this.props.onKeydown&&this.props.onKeydown(e)))},l);function l(){return null!==r&&r.apply(this,arguments)||this}e.default=d});
define('expressions/text_view',["require","exports","tslib","./abstract-item-view","./smart_textarea","dcgview","./expression-edit-actions","jquery.handleevent"],function(require,t,e,n,o,i,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,r=(c=n.default,e.__extends(d,c),d.prototype.didMount=function(){this.onItemViewMounted()},d.prototype.willUnmount=function(){this.onItemViewUnmounted()},d.prototype.template=function(){var t=this;return i.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressiontext":!0,"dcg-inFolder":!!t.model.folderId,"dcg-selected":!!t.controller.isItemSelected(t.id),"dcg-dragging":!!t.controller.isItemBeingDragged(t.id)}},"expr-id":function(){return t.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},i.createElement("div",{class:i.const("dcg-fade-container")},i.createElement("div",{class:i.const("dcg-main")},i.createElement(o.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return t.model.text},placeholder:function(){return t.controller.s("graphing-calculator-text-enter-note-placeholder")},showLinks:function(){return t.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),readonly:function(){return t.controller.isInEditListMode()},readonlyAction:this.bindFn(this.exitEditListMode)})),i.createElement("i",{class:i.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:i.const("true"),onTap:this.bindFn(this.onDelete)})),i.createElement("span",{class:i.const("dcg-tab dcg-action-drag"),handleevent:i.const("true"),tapboundary:i.const("true"),disablescroll:i.const("true"),style:i.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},i.createElement("span",{class:i.const("dcg-num")},function(){return t.model.displayIndex}),i.createElement("div",{class:i.const("dcg-tab-interior")}),i.createElement("i",{class:i.const("dcg-icon-text")})),i.createElement(s.ExpressionEditActions,{controller:this.props.controller,id:function(){return t.model.id}}))},d.prototype.onInput=function(t){this.controller.dispatch({type:"set-note-text",id:this.id,text:t})},d.prototype.onFocusChange=function(t){t?this.controller.dispatch({type:"set-focus-location",location:{type:"text",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"text",id:this.id}})},d.prototype.onSpecialKey=function(t){return this.controller.dispatch({type:"on-special-key-pressed",key:t})},d.prototype.isFocused=function(){var t=this.controller.getFocusLocation();return!(!t||"text"!==t.type||t.id!==this.id)},d);function d(){return null!==c&&c.apply(this,arguments)||this}t.default=r});
define('expressions/simulation-icon-view',["require","exports","tslib","dcgview","lib/aria","./circular-icon-view","main/manage-focus-helper","jquery.handleevent","loadcss!./play-pause-icon-view"],function(require,i,t,e,n,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SimulationIconView=void 0;var a,r=(a=e.Class,t.__extends(s,a),s.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},s.prototype.template=function(){var t=this;return e.createElement("div",{class:e.const("dcg-expression-icon-container")},e.createElement("div",{class:e.const("dcg-play-pause-icon-view")},e.createElement("div",{class:e.const("dcg-circular-icon-container"),"aria-label":this.bindFn(this.getAriaLabel),role:e.const("button"),tabindex:e.const("0"),onTap:function(i){i.wasHandled("dragdrop")||t.toggleIsPlaying()},manageFocus:this.const(l.manageFocusHelper({controller:this.controller,location:{type:"simulation-icon",id:this.model.id}}))},e.createElement(o.CircularIconView,{iconType:function(){return t.getIconType()},whiteIcon:function(){return!t.controller.isInEditListMode()&&t.controller.isItemSelected(t.model.id)||t.controller.isItemBeingDragged(t.model.id)}}))))},s.prototype.getIconType=function(){return this.model.isPlaying?"pause":"play"},s.prototype.getAriaLabel=function(){return this.model.isPlaying?this.controller.s("graphing-calculator-narration-pause-simulation"):this.controller.s("graphing-calculator-narration-play-simulation")},s.prototype.toggleIsPlaying=function(){var i="";this.model.isPlaying?(i=this.controller.s("graphing-calculator-narration-simulation-playing"),this.controller.dispatch({type:"set-simulation-isplaying",id:this.model.id,isPlaying:!1})):(i=this.controller.s("graphing-calculator-narration-simulation-paused"),this.controller.dispatch({type:"set-simulation-isplaying",id:this.model.id,isPlaying:!0})),n.alert(i)},s);function s(){return null!==a&&a.apply(this,arguments)||this}i.SimulationIconView=r});

define('loadcss!expressions/simulation-view', function(){});
define('expressions/simulation-view',["require","exports","tslib","./abstract-item-view","dcgview","graphing-calc/models/simulation","./expression-edit-actions","./clickable_info_view","expressions/promptslider_view","./simulation-icon-view","dcgview-helpers/mathquill-view","main/mathquill-operators","../dcgview-helpers/tooltipped-error","../lib/tooltip","jquery.handleevent","loadcss!./simulation-view"],function(require,e,t,n,o,i,r,s,c,l,a,d,u,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var m,g=o.Components.If,h=(m=n.default,t.__extends(f,m),f.prototype.didMount=function(){this.onItemViewMounted()},f.prototype.willUnmount=function(){this.onItemViewUnmounted()},f.prototype.template=function(){var t=this;return o.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-inFolder":!!t.model.folderId,"dcg-selected":!!t.controller.isItemSelected(t.id),"dcg-dragging":!!t.controller.isItemBeingDragged(t.id)}},"expr-id":function(){return t.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},o.createElement("div",{class:o.const("dcg-fade-container")},o.createElement("i",{class:o.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:o.const("true"),onTap:this.bindFn(this.onDelete)})),o.createElement("span",{class:o.const("dcg-tab dcg-action-drag"),handleevent:o.const("true"),tapboundary:o.const("true"),disablescroll:o.const("true"),style:o.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},o.createElement("span",{class:o.const("dcg-num")},function(){return t.model.displayIndex}),o.createElement("div",{class:o.const("dcg-tab-interior dcg-action-icon-mouse")},o.createElement(l.SimulationIconView,{model:this.props.model,controller:this.props.controller}))),o.createElement("div",{class:this.getFooterClass()},o.createElement(s.ClickableInfoView,{controller:function(){return t.props.controller()},model:function(){return t.model}}),o.createElement("div",{class:o.const("dcg-simulation-fps-container dcg-mq-underline-container")},o.createElement("span",{class:function(){return{"dcg-simulation-step-once":!0,"dcg-disabled":t.model.isPlaying}}},o.createElement(p.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-simulation-step-once-tooltip")},gravity:this.const("s")},o.createElement("div",{tabindex:o.const(0),role:o.const("button"),class:o.const("dcg-simulation-action-step"),"aria-label":function(){return t.controller.s("graphing-calculator-label-simulation-step-once-tooltip")},onTap:this.bindFn(this.doOneStep)},o.createElement("i",{class:o.const("dcg-icon-play")})))),o.createElement("span",{class:o.const("dcg-simulation-fps-label")},o.const("Animation Speed (FPS):")),o.createElement(a.default,{latex:function(){return t.getFPSLatex()},hasError:function(){return t.doesFPSHaveError()},isFocused:function(){return t.isFPSFocused()},onFocusedChanged:function(e){return t.handleFocusedChanged(e)},config:this.bindFn(this.getMQConfig),placeholder:function(){return"60"},getAriaLabel:function(){return"FPS"},getAriaPostLabel:function(){return""},onUserChangedLatex:function(e){return t.dispatchFPSLatexIfChanged(e)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},capExpressionSize:function(){return!!t.model.controller.getGraphSettings().config.capExpressionSize},needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}}),o.createElement(g,{predicate:function(){return t.doesFPSHaveError()}},function(){return o.createElement("span",{class:o.const("dcg-clickable-info-error-container")},o.createElement(u.TooltippedError,{error:function(){return t.getFPSErrorString()},gravity:t.const("s"),size:t.const("small")}))})),o.createElement(g,{predicate:this.bindFn(this.shouldShowSliderPrompt)},function(){return o.createElement(c.default,{model:t.props.model,controller:t.props.controller})})),o.createElement(r.ExpressionEditActions,{controller:this.props.controller,id:function(){return t.model.id}}))},f.prototype.doOneStep=function(){this.controller.dispatch({type:"simulation-single-step",id:this.model.id})},f.prototype.shouldShowSliderPrompt=function(){return!!this.controller.areSlidersEnabled()&&0<i.getMissingVariables(this.model).length},f.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder dcg-simulation-container"):this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder dcg-simulation-container")},f.prototype.getFPSLatex=function(){return this.model.fps},f.prototype.isFPSFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"simulation"!==e.type||e.id!==this.id)&&"fps"===e.location},f.prototype.doesFPSHaveError=function(){return!!i.getFPSPackedError(this.model)},f.prototype.getFPSErrorString=function(){return this.controller.unpack(i.getFPSPackedError(this.model))},f.prototype.getMQConfig=function(){return{autoOperatorNames:d.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},f.prototype.handleFocusedChanged=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"simulation",id:this.id,location:"fps"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"simulation",id:this.id,location:"fps"}})},f.prototype.dispatchFPSLatexIfChanged=function(e){this.getFPSLatex()!==e&&this.controller.dispatch({type:"set-simulation-fps",id:this.model.id,fps:e})},f);function f(){return null!==m&&m.apply(this,arguments)||this}e.default=h});
define('expressions/tables/table_icon_view',["require","exports","tslib","dcgview","graphing-calc/models/abstract-item","dcgview-helpers/tooltipped-error","../circular-icon-view","jquery.handleevent"],function(require,t,o,e,n,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,s=e.Components.SwitchUnion,c=(l=e.Class,o.__extends(d,l),d.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},d.prototype.template=function(){var o=this;return e.createElement("div",{class:e.const("dcg-table-icon-container")},s(this.bindFn(this.typeOfIcon),{error:function(){return e.createElement(r.TooltippedError,{error:function(){return o.controller.unpack(o.model.error)},gravity:o.const("se")})},none:function(){return e.createElement("span",null)},icon:function(){return e.createElement("div",{class:e.const("dcg-circular-icon-container"),role:e.const("button"),handleevent:e.const("true"),onTap:function(t){if(!t.wasHandled("dragdrop")&&!t.wasLongheld())return o.myOptionsOpen()||o.controller.isInEditListMode()?o.toggleOptions():void o.toggleGraphShown()},didMount:function(t){return o.rootElt=t},onLongHold:function(t){t.handle("dcg-longhold"),t.handle("dcg-tap"),o.toggleOptions()}},e.createElement(i.CircularIconView,{iconType:o.bindFn(o.getIcon),backgroundColor:o.bindFn(o.getModelColor)}))}}))},d.prototype.getModelColor=function(){return n.getDisplayColor(this.model)},d.prototype.myOptionsOpen=function(){var t=this.controller.getOpenItemMenu();return!!t&&t.model===this.model},d.prototype.toggleOptions=function(){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"table-column",model:this.model,icon:this.rootElt,focusFirstOption:!1}})},d.prototype.didMountRoot=function(t){this.rootElt=t},d.prototype.toggleGraphShown=function(){this.controller.dispatch({type:"toggle-tablecolumn-hidden",tableId:this.model.table.id,columnId:this.model.id})},d.prototype.hasError=function(){return!!this.model.error},d.prototype.getIcon=function(){return this.model.shouldGraph?this.controller.isInEditListMode()?"none":this.model.points&&this.model.lines?"table-points-and-lines":this.model.points&&!this.model.lines?"table-points":!this.model.points&&this.model.lines?"table-lines":"none":"hidden"},d.prototype.typeOfIcon=function(){return""!==this.model.latex&&this.controller.getGraphSettings().config.graphpaper?this.model.error?"error":0===this.model.index?"none":"icon":"none"},d);function d(){return null!==l&&l.apply(this,arguments)||this}t.default=c});
define('expressions/tables/header-view',["require","exports","tslib","keys","jquery","browser","dcgview","./table_icon_view","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","underscore","graphing-calc/models/table","core/lib/dragmode","dcgview-helpers/mathquill-braille-wrapper","main/mathquill-operators"],function(require,e,t,i,a,o,n,l,r,c,s,d,u,h,p){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var g,f=n.Components.If,m=(g=n.Class,t.__extends(b,g),b.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.table},b.prototype.isRightSide=function(){return this.lookupCellPosition().column>=this.table.columnModels.length-1},b.prototype.template=function(){var o=this;return n.createElement("div",{role:n.const("columnheader"),class:function(){return{"dcg-cell":!0,"dcg-table-header":!0,"dcg-do-not-blur":!0,"dcg-left":0===o.model.index,"dcg-right":o.isRightSide(),"dcg-selected":o.shouldFocus(),"dcg-error":!!o.model.error}},index:function(){return o.model.index},onTapStart:this.bindFn(this.focusThisCell)},n.createElement("div",{class:n.const("dcg-inner-border")}),n.createElement(f,{predicate:function(){return!o.isRightSide()}},function(){return n.createElement(l.default,{model:o.props.model,controller:o.props.controller})}),n.createElement(f,{predicate:function(){return!o.controller.isInEditListMode()}},function(){return n.createElement(h.default,{latex:function(){return o.model.latex||""},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:o.bindFn(o.shouldFocus),ariaLabel:function(){return o.getAriaLabel("braille")},onBrailleInput:function(e){return o.handleLatexChanged(e)},controller:o.props.controller,onBrailleFocusedChanged:o.bindFn(o.handleMQFocusedChanged),selectOnFocus:o.const(!0),onBrailleKeydown:o.bindFn(o.handleKeydownOnBrailleInput)},n.createElement(r.default,{latex:function(){return o.model.latex||""},isFocused:o.bindFn(o.shouldFocus),capExpressionSize:function(){return o.controller.getCapExpressionSize()},config:o.bindFn(o.getMQConfig),getAriaLabel:function(){return o.getAriaLabel("speech")},getAriaPostLabel:o.bindFn(o.getAriaPostLabel),hasError:o.const(!1),onUserPressedKey:function(e,t){return o.handlePressedKey(e,t)},onUserChangedLatex:function(e){return o.handleLatexChanged(e)},onExpressionSizeExceeded:function(){return o.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:o.bindFn(o.handleMQFocusedChanged),selectOnFocus:o.const(!0),needsSystemKeypad:function(){return!o.controller.isKeypadEnabled()}},n.createElement("span",{class:n.const("dcg-math-field dcg-cell-math-content")})))}),n.createElement(f,{predicate:function(){return o.controller.isInEditListMode()}},function(){return n.createElement(h.default,{latex:function(){return o.model.latex||""},tooltipOptions:function(){return{gravity:"s"}},ariaLabel:function(){return o.getAriaLabel("braille")},onBrailleInput:function(e){return o.handleLatexChanged(e)},controller:o.props.controller,tabindex:o.const(-1),isStatic:o.const(!0),brailleShouldFocus:o.bindFn(o.shouldFocusNonEditCell),onBrailleFocusedChanged:o.bindFn(o.handleMQFocusedChanged)},n.createElement(c.default,{latex:function(){return o.model.latex||""},config:o.bindFn(o.getMQConfig),getAriaLabel:function(){return o.getAriaLabel("speech")}},n.createElement("span",{class:n.const("dcg-math-field dcg-cell-math-content"),role:n.const("textbox"),"aria-roledescription":n.const("cell"),"aria-readonly":n.const("true"),tabindex:n.const("-1")})))}),n.createElement(f,{predicate:function(){return o.model.dragMode!==u.DragMode.NONE&&!o.model.error}},function(){return n.createElement("span",{class:n.const("dcg-drag-icon"),"dcg-drag-mode":function(){return o.model.dragMode},style:function(){return{color:o.model.color}}},n.createElement("i",{class:function(){return{"dcg-icon-move":o.model.dragMode===u.DragMode.XY,"dcg-icon-move-horizontal":o.model.dragMode===u.DragMode.X,"dcg-icon-move-vertical":o.model.dragMode===u.DragMode.Y}}}))}),n.createElement("div",{class:n.const("dcg-empty-line")}),n.createElement(f,{predicate:function(){return o.isRightSide()}},function(){return n.createElement("span",{class:n.const("dcg-fade-right")})}))},b.prototype.focusThisCell=function(e){e.wasHandled()||(e.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},b.prototype.lookupCellPosition=function(){return{row:0,column:this.model.index}},b.prototype.getAriaLabel=function(e){var t=this.lookupCellPosition();return"speech"===e?this.controller.s("graphing-calculator-narration-table-column-header",{column:t.column+1}):this.controller.raw("h__column__",{column:t.column+1})},b.prototype.getAriaPostLabel=function(){var e="",t=this.model;return t.shouldGraph&&(t.points||t.lines)&&!d.isColumnEmpty(t)&&(e=this.controller.s("graphing-calculator-narration-expression-evaluation-has-graph"),o.IS_APPLE?e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-mac"):e+=" "+this.controller.s("graphing-calculator-narration-expression-audio-trace-windows")),e},b.prototype.handlePressedKey=function(e,t){var o=r.default.getFocusedMathquill();o&&(r.default.handleKeystrokeAndDecideIfSpecialEvent(o,e,t)?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(o.latex()))},b.prototype.handleKeydownOnBrailleInput=function(e){var t,o,n,l,r=i.lookup(e);r&&(t="Enter"===r||"Up"===r||"Down"===r,n=(o=h.getFocusedBrailleElement())&&"Left"===r&&0===o.selectionStart||"Right"===r&&o.selectionStart===a(o).val().length,l=0===this.model.latex.length&&h.brailleInputIsEmpty(o),(t||n||("Del"===r||"Backspace"===r)&&l)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:"Del"===r?"Delete":r}),e.preventDefault()))},b.prototype.handleLatexChanged=function(e){this.model.latex!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})},b.prototype.shouldFocus=function(){return!this.controller.isInEditListMode()&&s.isEqual(this.lookupCellPosition(),d.getSelectedCell(this.table))},b.prototype.shouldFocusNonEditCell=function(){return s.isEqual(this.lookupCellPosition(),d.getSelectedCell(this.table))},b.prototype.isNodeWithinTableCell=function(e){if(!e)return!1;if(0===a(e).closest(".dcg-cell").length)return!1;var t=this.controller.getItemRootNodeById(this.table.id);return!!t&&a.contains(t,e)},b.prototype.handleMQFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},b.prototype.getMQConfig=function(){return{autoOperatorNames:p.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},b);function b(){return null!==g&&g.apply(this,arguments)||this}e.default=m});
define('expressions/tables/cell-view',["require","exports","tslib","keys","dcgview","jquery","dcgview-helpers/mathquill-view","dcgview-helpers/static-mathquill-view","underscore","graphing-calc/models/table","../../dcgview-helpers/tooltipped-error","lib/conditional_blur","dcgview-helpers/mathquill-braille-wrapper","main/mathquill-operators"],function(require,e,t,r,n,i,l,a,o,s,c,d,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p,g=n.Components.If,b=(p=n.Class,t.__extends(f,p),f.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller(),this.table=this.model.column.table},f.prototype.template=function(){var o=this;return n.createElement("div",{role:n.const("gridcell"),class:function(){return{"dcg-cell":!0,"dcg-do-not-blur":!0,"dcg-empty":o.isEmpty(),"dcg-non-editable":!!o.model.column.disabled,"dcg-error":!!o.hasError(),"dcg-selected":o.shouldFocus()}},onTapStart:this.bindFn(this.focusThisCell)},n.createElement("div",{class:n.const("dcg-inner-border")}),n.createElement(g,{predicate:this.bindFn(this.hasError)},function(){return n.createElement("span",{class:n.const("dcg-table-icon-error-container")},n.createElement(c.TooltippedError,{error:o.bindFn(o.getErrorMessage),gravity:o.const("se"),size:o.const("small")}))}),n.createElement(g,{predicate:function(){return!!o.model.column.disabled||o.controller.isInEditListMode()}},function(){return n.createElement(u.default,{latex:function(){return o.getValue()},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:o.bindFn(o.shouldFocusReadonlyCell),ariaLabel:function(){return o.getAriaLabel("braille")},controller:o.props.controller,tabindex:function(){return o.controller.isInEditListMode()?-1:0},isStatic:o.const(!0),onBrailleFocusedChanged:o.bindFn(o.handleFocusedChanged),onBrailleKeydown:function(e){return o.handleKeydownOnReadonlyCell(e),!0}},n.createElement(a.default,{getAriaLabel:function(){return o.getAriaLabel("speech")},latex:function(){return o.getValue()},config:o.bindFn(o.getMQConfig)},n.createElement("span",{class:n.const("dcg-math-field dcg-cell-math-content dcg-mathquill-input-span"),role:n.const("textbox"),"aria-roledescription":n.const("computed cell"),"aria-readonly":n.const("true"),tabindex:function(){return o.controller.isInEditListMode()||o.isEmpty()?-1:0},onKeyDown:o.bindFn(o.handleKeydownOnReadonlyCell),manageFocus:o.const({shouldBeFocused:o.bindFn(o.shouldFocusReadonlyCell),onFocusedChanged:o.bindFn(o.handleFocusedChanged)})})))}),n.createElement(g,{predicate:function(){return!o.model.column.disabled&&!o.controller.isInEditListMode()}},function(){return n.createElement(u.default,{latex:function(){return o.getValue()},tooltipOptions:function(){return{gravity:"s"}},brailleShouldFocus:o.bindFn(o.shouldFocusEditableCell),ariaLabel:function(){return o.getAriaLabel("braille")},onBrailleInput:function(e){return o.handleLatexChanged(e)},controller:o.props.controller,onBrailleFocusedChanged:o.bindFn(o.handleFocusedChanged),onBrailleKeydown:o.bindFn(o.handleKeydownOnBrailleInput),selectOnFocus:o.const(!0)},n.createElement(l.default,{latex:function(){return o.getValue()},isFocused:o.bindFn(o.shouldFocusEditableCell),capExpressionSize:function(){return o.controller.getCapExpressionSize()},config:o.bindFn(o.getMQConfig),getAriaLabel:function(){return o.getAriaLabel("speech")},getAriaPostLabel:o.bindFn(o.getErrorMessage),hasError:o.const(!1),onUserPressedKey:function(e,t){return o.handlePressedKey(e,t)},onUserChangedLatex:function(e){return o.handleLatexChanged(e)},onExpressionSizeExceeded:function(){return o.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:o.bindFn(o.handleFocusedChanged),selectOnFocus:o.const(!0),needsSystemKeypad:function(){return!o.controller.isKeypadEnabled()}},n.createElement("span",{class:n.const("dcg-math-field dcg-cell-math-content")})))}),n.createElement("div",{class:n.const("dcg-empty-line")}))},f.prototype.focusThisCell=function(e){e.wasHandled()||(e.handle(),this.shouldFocus()||this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}))},f.prototype.handlePressedKey=function(e,t){var o,n=l.default.getFocusedMathquill();n&&(o=l.default.handleKeystrokeAndDecideIfSpecialEvent(n,e,t),e===r.ESCAPE&&d.default(),o?this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:e}):this.handleLatexChanged(n.latex()))},f.prototype.handleKeydownOnBrailleInput=function(e){var t,o,n,l=r.lookup(e);l&&(l===r.ESCAPE&&d.default(),t="Enter"===l||"Up"===l||"Down"===l,n=(o=u.getFocusedBrailleElement())&&"Left"===l&&0===o.selectionStart||"Right"===l&&o.selectionStart===i(o).val().length,(t||n||("Del"===l||"Backspace"===l)&&0===this.getValue().length)&&(this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:"Del"===l?"Delete":l}),e.preventDefault()))},f.prototype.handleKeydownOnReadonlyCell=function(e){var t=r.lookup(e);"Tab"!==t&&(e.preventDefault(),"Esc"===t&&d.default(),t&&this.controller.dispatch({type:"navigate-table-by-key",id:this.table.id,key:t}))},f.prototype.handleLatexChanged=function(e){this.getValue()!==e&&this.controller.dispatch({type:"set-tablecell-latex",tableId:this.table.id,cell:this.lookupCellPosition(),latex:e})},f.prototype.shouldFocus=function(){return o.isEqual(this.lookupCellPosition(),s.getSelectedCell(this.table))},f.prototype.shouldFocusReadonlyCell=function(){return!this.controller.isInEditListMode()&&!!this.model.column.disabled&&this.shouldFocus()},f.prototype.shouldFocusEditableCell=function(){return!this.model.column.disabled&&this.shouldFocus()},f.prototype.isNodeWithinTableCell=function(e){if(!e)return!1;if(0===i(e).closest(".dcg-cell").length)return!1;var t=this.controller.getItemRootNodeById(this.table.id);return!!t&&i.contains(t,e)},f.prototype.handleFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}}):this.isNodeWithinTableCell(t.relatedTarget)||this.controller.dispatch({type:"blur-focus-location",location:{type:"table",id:this.table.id,location:this.lookupCellPosition()}})},f.prototype.lookupCellPosition=function(){return{row:this.model.row.index,column:this.model.column.index}},f.prototype.getPackedError=function(){return this.model.column.packedErrors[this.model.row.index-1]},f.prototype.hasError=function(){return!!this.getPackedError()},f.prototype.getErrorMessage=function(){var e=this.getPackedError();return e?this.controller.unpack(e):""},f.prototype.getValue=function(){var e=this.model.column.index,t=this.model.row.index-1;return this.model.column.disabled?this.model.column.computedValues[t]||"":this.table.columns[e].values[t]||""},f.prototype.isEmpty=function(){var e=u.getFocusedBrailleElement();return""===this.getValue()&&u.brailleInputIsEmpty(e)},f.prototype.getAriaLabel=function(e){var t=this.lookupCellPosition(),o=t.row,n=t.column+1;return"speech"===e?this.controller.s("graphing-calculator-narration-table-row-column",{row:o.toString(),column:n.toString()}):this.controller.raw("r__row__c__column__",{row:o.toString(),column:n.toString()})},f.prototype.getMQConfig=function(){return{autoOperatorNames:h.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},f);function f(){return null!==p&&p.apply(this,arguments)||this}e.default=b});

define('loadcss!expressions/table-view', function(){});
define('expressions/table-view',["require","exports","tslib","keys","lib/aria","./abstract-item-view","dcgview","./tables/header-view","./tables/cell-view","graphing-calc/models/table","vendor/mathquill","jquery","./expression-edit-actions","expressions/measure-expressions","./suggested-zoom-view","main/manage-focus-helper","loadcss!./table-view","jquery.handleevent"],function(require,e,t,o,n,l,r,i,s,g,c,m,a,f,d,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p,h=r.Components.For,w=(p=l.default,t.__extends(y,p),y.prototype.didMount=function(){this.onItemViewMounted()},y.prototype.willUnmount=function(){this.onItemViewUnmounted()},y.prototype.template=function(){var t=this;return r.createElement("div",{class:function(){return{"dcg-expressionitem":!0,"dcg-expressiontable":!0,"dcg-inFolder":!!t.model.folderId,"dcg-selected":!!t.controller.isItemSelected(t.id),"dcg-dragging":!!t.controller.isItemBeingDragged(t.id),"dcg-no-faded-h":t.isRightFocused(),"dcg-no-faded-v":t.isBottomFocused()}},"expr-id":function(){return t.model.id},didMount:this.bindFn(this.didMountContainer),onKeydown:this.bindFn(this.onKeydown)},r.createElement("div",{class:r.const("dcg-fade-container dcg-disable-horizontal-scroll-to-cursor")},r.createElement("div",{class:r.const("dcg-main")},r.createElement("div",{class:r.const("dcg-table-container"),tabindex:function(){return t.controller.isInEditListMode()?0:-1},"aria-label":function(){return t.controller.getBrailleMode(),t.controller.s("graphing-calculator-narration-expression-index-table",{index:t.model.displayIndex})},didMount:this.bindFn(this.didMountContainer),manageFocus:this.const(u.manageFocusHelper({controller:this.controller,location:{type:"table-container",id:this.model.id}}))},r.createElement("div",{class:r.const("dcg-table-sliding-container"),style:function(){return{transform:"translateX("+t.computeScrolledX()+"px)"}}},r.createElement(h,{each:function(){return t.getVisibleRowModels()},key:function(e){return"blank-row"===e.type?"blank-row-"+e.guid+"-"+e.rows+"-"+t.getCols():e.guid}},r.createElement("div",{role:r.const("grid"),class:function(){return{"dcg-tabledata":!0,"dcg-focus-in-bottom-row":t.isBottomFocused(),"dcg-focus-in-right-column":t.isRightFocused()}}},function(e){return"show-more"===e.type?r.createElement("tr",{role:r.const("row"),class:r.const("dcg-show-more-row")},r.createElement("td",{colspan:t.bindFn(t.getCols)},t.bindFn(t.missingRowMessage),r.createElement("div",{tabindex:r.const(0),role:r.const("button"),class:r.const("dcg-show-more"),onTap:function(){return t.controller.dispatch({type:"table-show-more-rows",id:t.id})}},function(){return t.controller.s("graphing-calculator-button-show-all-table-rows")}))):"blank-row"===e.type?r.createElement("tr",{role:r.const("row"),class:r.const("dcg-blank-row")},r.createElement("td",{colspan:t.bindFn(t.getCols),style:function(){return{height:e.rows*t.getRowHeight()+"px"}}})):r.createElement(h,{each:function(){return e.cells},key:function(e){return e.guid}},r.createElement("tr",{role:r.const("row"),"aria-rowindex":function(){return e.index},class:function(){return{"dcg-row":e,"dcg-braille-row":"none"!==t.controller.getBrailleMode()}}},function(e){return"header"===e.type?r.createElement(i.default,{controller:t.props.controller,model:t.const(e)}):r.createElement(s.default,{controller:t.props.controller,model:t.const(e)})}))}))))),r.createElement("i",{class:r.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:r.const("true"),onTap:this.bindFn(this.onDelete)})),r.createElement("span",{class:r.const("dcg-tab dcg-action-drag"),handleevent:r.const("true"),tapboundary:r.const("true"),disablescroll:r.const("true"),style:r.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},r.createElement("span",{class:r.const("dcg-num")},function(){return t.model.displayIndex}),r.createElement("div",{class:r.const("dcg-tab-interior")}),r.createElement(d.SuggestedZoomView,{model:this.props.model,controller:this.props.controller})),r.createElement(a.ExpressionEditActions,{controller:this.props.controller,id:function(){return t.model.id}}))},y.prototype.getCols=function(){return this.model.rowModels[0].cells.length-1},y.prototype.getRowHeight=function(){return this.controller.getGraphSettings().config.projectorMode?38:33},y.prototype.getVisibleRowModels=function(){var e=this.model.rowModels;if(e.length<=25)return e;var t=g.getCollapsedRange(this.model);if(void 0!==t)return e.slice(0,t.min).concat({type:"show-more",guid:"show-more"}).concat(e.slice(t.max));var o=f.getExppanelRect(this.controller),n=o?o.height:0,l=m(this.node).offset(),r=(l?l.top:0)-(o?o.top:0),i=m(this.node).find(".dcg-row:eq(0)").height(),s=this.getRowHeight();if(n/s>e.length)return e;for(var c=[],a=(-r-i)/s,d=(n-r)/s,u=0;u<e.length;u++){var p,h=g.getSelectedCell(this.model);0===u||u===e.length-2||h&&h.row===u||!(d<u||u<a)?c.push(e[u]):(p=c[c.length-1])&&"blank-row"===p.type?p.rows++:c.push({type:"blank-row",guid:e[u].guid,rows:1})}return c},y.prototype.missingRowMessage=function(){var e=g.getCollapsedRange(this.model);return void 0===e?"":this.controller.s("graphing-calculator-text-table-more-rows",{rowCount:e.max-e.min})},y.prototype.didMountContainer=function(e){this.node=e,m(e).on("scroll",function(){return e.scrollLeft=0})},y.prototype.getSelectedCell=function(){return g.getSelectedCell(this.model)},y.prototype.computeScrolledX=function(){if(!this.getSelectedCell()||!this.node)return 0;var e=this.node.children[0],t=this.node.querySelector(".dcg-selected");if(null===e||null===t)return 0;var o=this.node.getBoundingClientRect(),n=t.getBoundingClientRect(),l=n.left-e.getBoundingClientRect().left,r=o.width-l-n.width-80,i=Math.min(0,o.width-e.scrollWidth-30),r=Math.max(r,i);return Math.min(0,r)},y.prototype.isBottomFocused=function(){var e=this.getSelectedCell();return!!e&&e.row===this.model.columnModels[0].cells.length},y.prototype.isRightFocused=function(){var e=this.getSelectedCell();return!!e&&e.column===this.model.columnModels.length-1},y.prototype.isFocused=function(){return!!this.getSelectedCell()},y.prototype.onKeydown=function(e){this.controller.isInEditListMode()||!e.ctrlKey||e.shiftKey||e.altKey||e.metaKey||("Up"===o.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInColumn()):"Down"===o.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInColumn()):"Left"===o.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToFirstCellInRow()):"Right"===o.lookup(e)?(e.preventDefault(),e.stopPropagation(),this.moveToLastCellInRow()):"H"===o.lookupChar(e)&&(e.preventDefault(),e.stopPropagation(),this.speakColumnHeader()))},y.prototype.moveToFirstCellInColumn=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:0,column:e.column}}})},y.prototype.moveToLastCellInColumn=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:this.model.rowModels.length-1,column:e.column}}})},y.prototype.moveToFirstCellInRow=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:0}}})},y.prototype.moveToLastCellInRow=function(){var e=this.getSelectedCell();e&&this.controller.dispatch({type:"set-focus-location",location:{type:"table",id:this.id,location:{row:e.row,column:this.model.columnModels[0].cells.length-1}}})},y.prototype.speakColumnHeader=function(){var e,t=this.controller.s("graphing-calculator-narration-table-no-column-header"),o=this.getSelectedCell();!o||(e=this.model.rowModels[0].cells[o.column])&&"header"===e.type&&e.latex&&""!==e.latex&&(t=c.MQ.StaticMath(m("<span>"+e.latex+"</span>")[0]).mathspeak()),n.alert(t)},y);function y(){return null!==p&&p.apply(this,arguments)||this}e.default=w});

define('loadcss!expressions/folder-view', function(){});
define('expressions/folder-view',["require","exports","tslib","browser","keys","lib/aria","./expression-edit-actions","./abstract-item-view","./smart_textarea","dcgview","./circular-icon-view","jquery.handleevent","loadcss!./folder-view"],function(require,e,t,n,r,l,o,i,c,s,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,h=(a=i.default,t.__extends(p,a),p.prototype.didMount=function(){this.onItemViewMounted()},p.prototype.willUnmount=function(){this.onItemViewUnmounted()},p.prototype.template=function(){var e=this;return s.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionfolder":!0,"dcg-inFolder":!1,"dcg-selected":e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-collapsed":!!e.model.collapsed,"dcg-hidden":!!e.model.hidden,"dcg-has-items":0<e.controller.getNumberOfItemsInFolder(e.id),"dcg-secretFolder":e.model.secret&&!e.controller.canAdministerSecretFolders()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},s.createElement("div",{class:s.const("dcg-fade-container")},s.createElement("div",{class:s.const("dcg-main")},s.createElement("div",{role:s.const("button"),tabindex:s.const("0"),"aria-pressed":function(){return e.model.collapsed},"aria-label":function(){return e.controller.s("graphing-calculator-narration-collapse-folder")},class:s.const("dcg-caret-container dcg-action-toggle-folder-collapsed dcg-do-not-blur"),handleEvent:s.const("true"),onTap:this.bindFn(this.toggleCollapsed)},s.createElement("i",{class:s.const("dcg-icon-caret-down")})),s.createElement(c.default,{shouldFocus:this.bindFn(this.isFocused),text:function(){return e.model.title},placeholder:function(){return e.controller.s("graphing-calculator-text-note-placeholder")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:this.bindFn(this.onInput),onFocusChange:this.bindFn(this.onFocusChange),onSpecialKey:this.bindFn(this.onSpecialKey),ariaLabel:this.bindFn(this.getAriaLabel),readonly:function(){return e.controller.isInEditListMode()},readonlyAction:this.bindFn(this.exitEditListMode)}),s.createElement("div",{role:s.const("checkbox"),"aria-checked":function(){return e.model.secret},"aria-label":function(){return e.controller.s("graphing-calculator-button-hide-folder-from-students")},class:function(){return{"dcg-action-toggle-secret-folder":!0,"dcg-do-not-blur":!0,"dcg-checked":e.model.secret}},style:function(){return{display:e.controller.canAdministerSecretFolders()?void 0:"none"}},handleEvent:s.const("true"),onTap:this.bindFn(this.toggleSecret)},s.createElement("span",{class:s.const("dcg-checkbox-box")},s.createElement("i",{class:s.const("dcg-icon-check")})),s.createElement("span",{class:s.const("dcg-checkbox-label")},function(){return e.controller.s("graphing-calculator-button-hide-folder-from-students-2")}))),s.createElement("i",{class:s.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:s.const("true"),onTap:this.bindFn(this.onDelete)})),s.createElement("span",{class:s.const("dcg-tab dcg-action-drag"),handleevent:s.const("true"),tapboundary:s.const("true"),disablescroll:s.const("true"),style:s.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},s.createElement("span",{class:s.const("dcg-num")},function(){return e.model.displayIndex}),s.createElement("div",{class:s.const("dcg-tab-interior")},s.createElement("span",{role:s.const("button"),tabindex:s.const("0"),"aria-pressed":function(){return!!e.model.hidden},"aria-label":function(){return e.controller.s("graphing-calculator-narration-hide-folder")},class:s.const("dcg-circular-icon-container dcg-expression-icon-container"),onTap:this.bindFn(this.toggleHidden)},s.createElement(d.CircularIconView,{iconType:function(){return e.model.hidden?"hidden":"folder"},whiteIcon:function(){return e.controller.isItemSelected(e.model.id)||e.controller.isItemBeingDragged(e.model.id)}})))),s.createElement(o.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},p.prototype.toggleHidden=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.id})},p.prototype.toggleSecret=function(){this.controller.dispatch({type:"set-item-secret",id:this.id,isSecret:!this.model.secret})},p.prototype.toggleCollapsed=function(){this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed})},p.prototype.onInput=function(e){this.controller.dispatch({type:"set-folder-title",id:this.id,title:e})},p.prototype.onFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"folder",id:this.id}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"folder",id:this.id}})},p.prototype.onSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},p.prototype.onKeydown=function(e){var t=e.altKey&&!e.metaKey&&!e.ctrlKey&&!e.shiftKey,o=e.metaKey&&!e.altKey&&!e.shiftKey&&!e.ctrlKey;(n.IS_APPLE?o:t)&&r.lookup(e)===r.UP&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-folder-collapsed",id:this.id,isCollapsed:!this.model.collapsed}),this.model.collapsed?l.alert(this.controller.s("graphing-calculator-narration-folder-collapsed")):l.alert(this.controller.s("graphing-calculator-narration-folder-expanded")))},p.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!(!e||"folder"!==e.type||e.id!==this.id)},p.prototype.getAriaLabel=function(){var e="";this.model.hidden||this.model.collapsed||this.model.secret?!this.model.hidden||this.model.collapsed||this.model.secret?this.model.hidden||!this.model.collapsed||this.model.secret?this.model.hidden||this.model.collapsed||!this.model.secret?this.model.hidden&&this.model.collapsed&&!this.model.secret?e=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-folder"):this.model.hidden&&!this.model.collapsed&&this.model.secret?e=this.controller.s("graphing-calculator-narration-description-hidden-secret-folder"):!this.model.hidden&&this.model.collapsed&&this.model.secret?e=this.controller.s("graphing-calculator-narration-description-collapsed-secret-folder"):this.model.hidden&&this.model.collapsed&&this.model.secret&&(e=this.controller.s("graphing-calculator-narration-description-hidden-collapsed-secret-folder")):e=this.controller.s("graphing-calculator-narration-description-secret-folder"):e=this.controller.s("graphing-calculator-narration-description-collapsed-folder"):e=this.controller.s("graphing-calculator-narration-description-hidden-folder"):e=this.controller.s("graphing-calculator-narration-description-folder");var t=this.controller.getNumberOfItemsInFolder(this.id);return 0<t?this.controller.s("graphing-calculator-narration-folder-has-items",{folder:e,count:t}):e},p);function p(){return null!==a&&a.apply(this,arguments)||this}e.default=h});
define('lib/coerce-url',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.coerceURL=void 0,e.coerceURL=function(e){var r=document.createElement("a");return r.href=e,r.href}});

define('loadcss!expressions/image-icon-view', function(){});
define('expressions/image-icon-view',["require","exports","tslib","lib/coerce-url","dcgview","main/manage-focus-helper","../dcgview-helpers/tooltipped-error","./circular-icon-view","jquery.handleevent","loadcss!./image-icon-view"],function(require,t,e,o,n,i,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,s=n.Components.SwitchUnion,a=(c=n.Class,e.__extends(d,c),d.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},d.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-expression-icon-container dcg-image-icon-container")},s(this.bindFn(this.typeOfIcon),{error:function(){return n.createElement(r.TooltippedError,{error:function(){return t.controller.unpack(t.model.error)},isWhite:t.bindFn(t.isSelected),gravity:t.const("se")})},failed:function(){return n.createElement("span",null)},loading:function(){return n.createElement(l.CircularIconView,{iconType:t.const("loading")})},hidden:function(){return t.buildIconView()},image:function(){return t.buildIconView()}}))},d.prototype.buildIconView=function(){var e=this;return n.createElement("div",{class:n.const("dcg-circular-icon-container"),role:n.const("button"),tabindex:n.const("0"),"aria-label":this.bindFn(this.getIconAriaLabel),onTap:function(t){if(!t.wasHandled("dragdrop")&&!t.wasLongheld())return e.myOptionsOpen()||e.controller.isInEditListMode()?e.toggleOptions(t):void e.toggleImageShown()},didMount:function(t){return e.rootElt=t},onLongHold:function(t){t.handle("dcg-longhold"),t.handle("dcg-tap"),e.toggleOptions(t)},manageFocus:this.const(i.manageFocusHelper({controller:this.controller,location:{type:"image-icon",id:this.model.id}}))},n.createElement(l.CircularIconView,{iconType:function(){return"hidden"===e.typeOfIcon()?"hidden":"background"},backgroundImage:this.bindFn(this.getBackgroundImage),backgroundOpacity:this.const(1),whiteIcon:this.bindFn(this.isSelected)}))},d.prototype.isSelected=function(){return this.controller.isItemSelected(this.model.id)||this.controller.isItemBeingDragged(this.model.id)},d.prototype.typeOfIcon=function(){return"loading"===this.model.loadStatus?"loading":"failed"===this.model.loadStatus?"failed":this.hasError()?"error":this.model.shouldGraph?"image":"hidden"},d.prototype.myOptionsOpen=function(){var t=this.controller.getOpenItemMenu();return!!t&&t.model===this.model},d.prototype.toggleOptions=function(t){this.controller.dispatch({type:"toggle-item-settings-menu",menu:{type:"image",model:this.model,icon:this.rootElt,focusFirstOption:"keyboard"===t.device}})},d.prototype.hasError=function(){return!!this.model.error&&"none"===this.controller.getBrailleMode()},d.prototype.getBackgroundImage=function(){return this.model.image_url===this.lastURL||(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+o.coerceURL(this.model.image_url)+'")'),this.lastEncodedURL},d.prototype.toggleImageShown=function(){this.controller.dispatch({type:"toggle-item-hidden",id:this.model.id}),this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:this.model.id}})},d.prototype.getIconAriaLabel=function(){return this.controller.isInEditListMode()?this.myOptionsOpen()?this.controller.s("graphing-calculator-narration-hide-options"):this.controller.s("graphing-calculator-narration-show-options"):this.model.hidden?this.controller.s("graphing-calculator-narration-show-image"):this.controller.s("graphing-calculator-narration-hide-image")},d);function d(){return null!==c&&c.apply(this,arguments)||this}t.default=a});
define('expressions/image-upload-view',["require","exports","tslib","dcgview","jquery","main/manage-focus-helper"],function(require,t,e,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImageUploadView=void 0;var s,l=(s=n.Class,e.__extends(a,s),a.prototype.init=function(){this.controller=this.props.controller()},a.prototype.template=function(){return n.createElement("div",{class:n.const("dcg-do-not-blur"),onTap:this.bindFn(this.newImage),handleEvent:n.const("true"),role:n.const("button"),tabindex:n.const(0),"aria-label":this.props.ariaLabel,manageFocus:this.const(this.props.location?i.manageFocusHelper({controller:this.controller,location:this.props.location()}):void 0)},this.children,n.createElement("input",{type:n.const("file"),accept:n.const("image/*"),style:n.const("display: none"),didMount:this.bindFn(this.didMountFileInput)}))},a.prototype.didMountFileInput=function(t){var e=this;this.fileInputNode=t,o(t).on("change",function(){e.props.onFileChange(t.files),o(t).val("")})},a.prototype.newImage=function(){this.fileInputNode.click()},a);function a(){return null!==s&&s.apply(this,arguments)||this}t.ImageUploadView=l});

define('loadcss!expressions/clickable_image_info_view', function(){});
define('expressions/clickable_image_info_view',["require","exports","tslib","dcgview","./circular-icon-view","../lib/tooltip","./image-upload-view","./clickable_info_view","loadcss!./clickable_image_info_view"],function(require,e,t,o,r,n,l,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ClickableImageInfoView=void 0;var a,c=o.Components.Switch,d=(a=o.Class,t.__extends(s,a),s.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},s.prototype.template=function(){var t=this;return o.createElement("div",{class:o.const("dcg-do-blur dcg-indent-in-folder"),tapboundary:o.const("true"),handleEvent:o.const("true")},o.createElement(i.ClickableInfoView,{controller:function(){return t.props.controller()},model:function(){return t.model}}),o.createElement("div",{class:o.const("dcg-clickable-image-info-view"),role:o.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-clickable-image-options")}},o.createElement("div",{role:o.const("heading"),"aria-level":o.const("2"),class:o.const("dcg-clickable-image-label")},o.const("Hovered:")),o.createElement(n.Tooltip,{tooltip:function(){return t.tooltip("hovered")},gravity:this.const("s")},o.createElement(l.ImageUploadView,{controller:function(){return t.controller},ariaLabel:function(){return t.tooltip("hovered")},onFileChange:function(e){return t.updateImage("hovered",e)}},o.createElement(c,{key:this.bindFn(this.hoveredStatus)},function(){return o.createElement(r.CircularIconView,{iconType:t.bindFn(t.hoveredStatus),backgroundImage:t.const("background"===t.hoveredStatus()?"url("+t.model.clickableInfo.hoveredImage+")":"")})}))),o.createElement("div",{role:o.const("heading"),"aria-level":o.const("2"),class:o.const("dcg-clickable-image-label")},o.const("Depressed:")),o.createElement(n.Tooltip,{tooltip:function(){return t.tooltip("depressed")},gravity:this.const("s")},o.createElement(l.ImageUploadView,{controller:function(){return t.controller},ariaLabel:function(){return t.tooltip("depressed")},onFileChange:function(e){return t.updateImage("depressed",e)}},o.createElement(c,{key:this.bindFn(this.depressedStatus)},function(){return o.createElement(r.CircularIconView,{iconType:function(){return t.depressedStatus()},backgroundImage:t.const("background"===t.depressedStatus()?"url("+t.model.clickableInfo.depressedImage+")":"")})})))))},s.prototype.hoveredStatus=function(){return this.hoveredUploading?"loading":this.model.clickableInfo.hoveredImage?"background":"hidden"},s.prototype.depressedStatus=function(){return this.depressedUploading?"loading":this.model.clickableInfo.depressedImage?"background":"hidden"},s.prototype.tooltip=function(e){return("hovered"===e?this.model.clickableInfo.hoveredImage:this.model.clickableInfo.depressedImage)?"depressed"===e?this.controller.s("graphing-calculator-label-change-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-change-hovered-image-tooltip"):"depressed"===e?this.controller.s("graphing-calculator-label-add-depressed-image-tooltip"):this.controller.s("graphing-calculator-label-add-hovered-image-tooltip")},s.prototype.updateImage=function(o,e){var t,r=this;e&&e[0]&&(t=e[0],"hovered"===o&&(this.hoveredUploading=!0),"depressed"===o&&(this.depressedUploading=!0),this.controller.getGraphSettings().config.imageUploadCallback(t,function(e,t){"hovered"===o&&(r.hoveredUploading=!1),"depressed"===o&&(r.depressedUploading=!1),!e&&t&&("hovered"===o?r.controller.dispatch({type:"set-hovered-image",id:r.model.id,url:t}):r.controller.dispatch({type:"set-depressed-image",id:r.model.id,url:t}))}))},s);function s(){return null!==a&&a.apply(this,arguments)||this}e.ClickableImageInfoView=d});

define('loadcss!expressions/image-view', function(){});
define('expressions/image-view',["require","exports","tslib","keys","jquery","underscore","./abstract-item-view","./smart_textarea","dcgview","dcgview-helpers/mathquill-view","lib/conditional_blur","expressions/promptslider_view","./image-icon-view","./clickable_image_info_view","main/mathquill-operators","graphing-calc/models/image","./expression-edit-actions","../dcgview-helpers/mathquill-braille-wrapper","jquery.handleevent","loadcss!./image-view"],function(require,e,t,n,a,o,r,i,c,s,d,l,u,p,h,m,g,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var y,b=c.Components,E=b.If,v=b.SwitchUnion,F=(y=c.Class,t.__extends(I,y),I.prototype.init=function(){this.model=this.props.model(),this.controller=this.props.controller()},I.prototype.template=function(){var n=this;return c.createElement("div",{class:c.const("dcg-image-input-mathquill")},c.createElement(f.default,{latex:function(){return n.model[n.props.name()]},controller:this.props.controller,brailleShouldFocus:function(){return n.props.focusedInput()===n.props.name()},selectOnFocus:this.const(!0),onBrailleInput:this.bindFn(this.handleLatexChanged),onBrailleFocusedChanged:this.bindFn(this.handleMQFocusedChanged),onBrailleKeydown:this.bindFn(this.handleBrailleKeydown),hasError:function(){return m.hasInputError(n.model,n.props.name())},ariaLabel:function(){return n.controller.raw(n.props.name())}},c.createElement(s.default,{latex:function(){return n.model[n.props.name()]},isFocused:function(){return n.props.focusedInput()===n.props.name()},capExpressionSize:function(){return n.controller.getCapExpressionSize()},selectOnFocus:this.const(!0),config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return n.controller.raw(n.props.name())},getAriaPostLabel:this.const(""),hasError:this.const(!1),onUserPressedKey:function(e,t){return n.handlePressedKey(e,t)},onUserChangedLatex:this.bindFn(this.handleLatexChanged),onExpressionSizeExceeded:function(){return n.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:this.bindFn(this.handleMQFocusedChanged),needsSystemKeypad:function(){return!n.controller.isKeypadEnabled()}},c.createElement("span",{class:function(){return{"dcg-focus":n.props.focusedInput()===n.props.name(),"dcg-invalid":m.hasInputError(n.model,n.props.name())}}}))))},I.prototype.getInputs=function(){return this.controller.canUseAdvancedStyling()?["center","angle","opacity","width","height"]:["center","angle","width","height"]},I.prototype.handlePressedKey=function(e,t){var n=this.props.name(),o=s.default.getFocusedMathquill(),r=this.getInputs(),i=r.indexOf(n);if(!this.controller.isInEditListMode()){if("Enter"===e)return this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"});if("Esc"===e)return void d.default()}var c,l="Right"===e?i+2:"Left"===e?i-2:"Down"===e?i+1:"Up"===e?i-1:-1;0<=l&&l<r.length?(o?s.default.applyArrowKeyAndReturnIfWasAtBounds(o,e,t):"Up"===e||"Down"===e||(c=f.getFocusedBrailleElement())&&("Left"===e&&0===c.selectionStart||"Right"===e&&c.selectionStart===a(c).val().length))&&(this.focusInput(r[l]),t&&t.preventDefault()):o&&(o.keystroke(e,t),this.handleLatexChanged(o.latex()))},I.prototype.handleBrailleKeydown=function(e){var t=n.lookup(e);t&&this.handlePressedKey(t,a.Event(e))},I.prototype.focusInput=function(e){this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:e}})},I.prototype.anyInputHasError=function(){var t=this;return o.any(this.getInputs(),function(e){return m.hasInputError(t.model,e)})},I.prototype.handleLatexChanged=function(e){var t=this.props.name();this.model.draggingOnGraphpaper||m.getMQAttribute(this.model,t)!==e&&this.controller.dispatch({type:"set-image-mq-attribute",id:this.model.id,attribute:t,latex:e})},I.prototype.handleMQFocusedChanged=function(e){var t=this.props.name();e?this.props.focusedInput()!==t&&this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.model.id,location:t}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.model.id,location:t}})},I.prototype.getMQConfig=function(){return{autoOperatorNames:h.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},I);function I(){return null!==y&&y.apply(this,arguments)||this}var x,w=(x=r.default,t.__extends(S,x),S.prototype.didMount=function(){this.onItemViewMounted()},S.prototype.willUnmount=function(){this.onItemViewUnmounted()},S.prototype.template=function(){var e=this;return c.createElement("div",{class:function(){return{"dcg-do-not-blur":!0,"dcg-expressionitem":!0,"dcg-expressionimage":!0,"dcg-inFolder":!!e.model.folderId,"dcg-selected":e.controller.isItemSelected(e.id),"dcg-dragging":!!e.controller.isItemBeingDragged(e.id),"dcg-input-focused":e.getFocusedInput()&&"name"!==e.getFocusedInput()}},"expr-id":function(){return e.model.id},onTapStart:this.bindFn(this.onMouseSelect),onTap:this.bindFn(this.onMouseSelect)},c.createElement("div",{class:c.const("dcg-fade-container")},c.createElement("div",{class:c.const("dcg-main")},v(function(){return e.model.loadStatus},{failed:function(){return c.createElement("div",null,c.createElement("div",{class:c.const("dcg-image-failed")},function(){return e.controller.s("graphing-calculator-error-failed-to-load-image")}),c.createElement("div",{role:c.const("button"),tabindex:c.const(0),class:c.const("dcg-retry-loading-image"),onTap:e.bindFn(e.onRetryLoad)},function(){return e.controller.s("graphing-calculator-button-load-image-retry")}))},loading:function(){return c.createElement("div",null,c.createElement("div",{class:c.const("dcg-image-loading")},function(){return e.controller.s("graphing-calculator-text-loading-image")}),c.createElement("div",{role:c.const("button"),tabindex:c.const(0),class:c.const("dcg-retry-loading-image"),onTap:e.bindFn(e.onRetryLoad)},function(){return e.controller.s("graphing-calculator-button-load-image-retry")}))},loaded:function(){return c.createElement("div",{class:c.const("dcg-image-loaded")},c.createElement(i.default,{shouldFocus:function(){return"name"===e.getFocusedInput()},text:function(){return e.model.name},placeholder:function(){return e.controller.s("graphing-calculator-text-image-enter-note-placeholder")},showLinks:function(){return e.controller.areLinksEnabled()},onInput:e.bindFn(e.onNameInput),onFocusChange:e.bindFn(e.onNameFocusChange),onSpecialKey:e.bindFn(e.onNameSpecialKey),readonly:e.const(!1)}),c.createElement("div",{class:function(){return{"dcg-do-blur":!0,"dcg-image-input-grid":!0}},handleEvent:c.const("true")},c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.s("graphing-calculator-label-image-center")}),c.createElement(F,{name:e.const("center"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.s("graphing-calculator-label-image-width")}),c.createElement(F,{name:e.const("width"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.s("graphing-calculator-label-image-angle")}),c.createElement(F,{name:e.const("angle"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.s("graphing-calculator-label-image-height")}),c.createElement(F,{name:e.const("height"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)}),c.createElement(E,{predicate:function(){return e.controller.canUseAdvancedStyling()}},function(){return c.createElement("div",{class:c.const("dcg-image-input-name")},function(){return e.controller.s("graphing-calculator-label-image-opacity")})}),c.createElement(E,{predicate:function(){return e.controller.canUseAdvancedStyling()}},function(){return c.createElement(F,{name:e.const("opacity"),controller:function(){return e.controller},model:function(){return e.model},focusedInput:e.bindFn(e.getFocusedInput)})})))}})),c.createElement("span",{class:c.const("dcg-fadeout")}),c.createElement("i",{class:c.const("dcg-icon-remove dcg-top-level-delete"),handleEvent:c.const("true"),onTap:this.bindFn(this.onDelete)}),c.createElement(E,{predicate:function(){return e.shouldShowClickableProperties()}},function(){return c.createElement(p.ClickableImageInfoView,{controller:function(){return e.props.controller()},model:function(){return e.model}})}),c.createElement(E,{predicate:this.bindFn(this.shouldShowBrailleError)},function(){return c.createElement("div",{class:e.getFooterClass()},c.createElement("div",{tabindex:c.const(0),class:c.const("dcg-expression-braille-error"),"aria-roledescription":c.const("error"),"aria-label":function(){return e.controller.unpack(e.model.error)}},c.createElement("i",{class:c.const("dcg-icon-error")}),function(){return e.controller.unpack(e.model.error)}))}),c.createElement(E,{predicate:function(){return 0<m.getMissingVariables(e.model).length&&e.controller.areSlidersEnabled()}},function(){return c.createElement("div",{class:e.getFooterClass()},c.createElement(l.default,{model:e.props.model,controller:e.props.controller}))})),c.createElement("span",{class:c.const("dcg-tab dcg-action-drag dcg-action-icon-touch"),handleevent:c.const("true"),tapboundary:c.const("true"),disablescroll:c.const("true"),style:c.const("touch-action:none"),onTapStart:this.bindFn(this.onDragPending)},c.createElement("span",{class:c.const("dcg-num")},function(){return e.model.displayIndex}),c.createElement("div",{class:c.const("dcg-tab-interior dcg-action-icon-mouse")},c.createElement(u.default,{model:this.props.model,controller:this.props.controller}))),c.createElement(g.ExpressionEditActions,{controller:this.props.controller,id:function(){return e.model.id}}))},S.prototype.getFooterClass=function(){return this.isFirstRender()?this.const("dcg-expression-bottom dcg-indent-in-folder"):this.const("dcg-expression-bottom dcg-fadein-bottom dcg-indent-in-folder")},S.prototype.onNameInput=function(e){this.controller.dispatch({type:"set-image-name",id:this.id,name:e})},S.prototype.onNameFocusChange=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"image",id:this.id,location:"name"}}):"name"===this.getFocusedInput()&&this.controller.dispatch({type:"blur-focus-location",location:{type:"image",id:this.id,location:"name"}})},S.prototype.onNameSpecialKey=function(e){return this.controller.dispatch({type:"on-special-key-pressed",key:e})},S.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"image"===e.type&&e.id===this.model.id)return e.location},S.prototype.onRetryLoad=function(){this.controller.dispatch({type:"image-retry-loading",id:this.id})},S.prototype.shouldShowClickableProperties=function(){return!!this.controller.canAuthorClickableObjects()&&this.model.clickableInfo.enabled},S.prototype.shouldShowBrailleError=function(){return"none"!==this.controller.getBrailleMode()&&!!this.model.error},S.prototype.onMouseSelect=function(e){"dcg-tap"===e.type&&"mouse"===e.device||"dcg-tapstart"===e.type&&"touch"===e.device||e.wasHandled()||(e.handle(),this.controller.dispatch({type:"set-selected-id",id:this.id}))},S);function S(){return null!==x&&x.apply(this,arguments)||this}e.default=w});
define('expressions/shell_view',["require","exports","tslib","dcgview","./abstract-item-view"],function(require,e,t,i,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,s=(o=n.default,t.__extends(d,o),d.prototype.didMount=function(){this.onItemViewMounted()},d.prototype.willUnmount=function(){this.onItemViewUnmounted()},d.prototype.template=function(){var e="";return this.model.cachedRenderHeight&&(e="height:"+this.model.cachedRenderHeight+"px"),i.createElement("div",{class:i.const("dcg-do-not-blur dcg-expressionitem dcg-shell"),"expr-id":this.const(this.model.id),onTap:this.bindFn(this.onMouseSelect),style:i.const(e)})},d);function d(){return null!==o&&o.apply(this,arguments)||this}e.default=s});
define('expressions/drag_container_view',["require","exports","tslib","dcgview"],function(require,t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=(n=r.Class,e.__extends(i,n),i.prototype.init=function(){this.controller=this.props.controller()},i.prototype.template=function(){var t=this;return r.createElement("div",{class:r.const("dcg-drag-container"),style:function(){return{top:t.getTopPx()}}},this.children)},i.prototype.getTopPx=function(){var t=this.controller.getRawDragState();if(t)return t.itemTop+"px"},i);function i(){return null!==n&&n.apply(this,arguments)||this}t.default=o});
define('vendor/papaparse',['require','jquery'],function(require){"use strict";var c=require("jquery"),r={delimiter:"",header:!1,dynamicTyping:!1,preview:0,step:void 0,encoding:"",comments:!1,complete:void 0,error:void 0,download:!1,chunk:void 0,keepEmptyRows:!1},_={};function i(o){(o=o||{}).chunkSize||(o.chunkSize=_.RemoteChunkSize);var a,s,f=0,u="",c="",d=new p(m(o));this.stream=function(t){function n(){if(4==a.readyState)if(a.status<200||400<=a.status)i();else{u+=c+a.responseText,c="";var e,t=!o.step||f>(e=a.getResponseHeader("Content-Range"),parseInt(e.substr(e.lastIndexOf("/")+1)));if(!t){var n=u.lastIndexOf("\n");if(n<0&&(n=u.lastIndexOf("\r")),!(-1<n))return void s();c=u.substring(n+1),u=u.substring(0,n)}var r=d.parse(u);u="",C(o.chunk)&&(o.chunk(r),r=void 0),t||r.meta.paused||s()}}function i(){C(o.error)&&o.error(a.statusText)}(s=function(){!function(){{var e;(a=new XMLHttpRequest).onload=n,a.onerror=i,a.open("GET",t,!0),o.step&&(e=f+o.chunkSize-1,a.setRequestHeader("Range","bytes="+f+"-"+e))}a.send(),f+=o.chunkSize}()})()}}function o(a){(a=a||{}).chunkSize||(a.chunkSize=_.LocalChunkSize);var s,f=0,u="",c="",d=new p(m(a)),l="function"==typeof FileReader;this.stream=function(i){var n=i.slice||i.webkitSlice||i.mozSlice;function o(){var e,t;f<i.size&&(e=Math.min(f+a.chunkSize,i.size),t=s.readAsText(n.call(i,f,e),a.encoding),l||r({target:{result:t}}))}function r(e){f+=a.chunkSize,u+=c+e.target.result,c="";var t=f>=i.size;if(!t){var n=u.lastIndexOf("\n");if(n<0&&(n=u.lastIndexOf("\r")),!(-1<n))return void o();c=u.substring(n+1),u=u.substring(0,n)}var r=d.parse(u);u="",C(a.chunk)&&(a.chunk(r,i),r=void 0),t||r.meta.paused||o()}l?((s=new FileReader).onload=r,s.onerror=function(){C(a.error)&&a.error(s.error,i)}):s=new FileReaderSync,o()}}function p(l){var r,i,o,a=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,s=this,f=!1,u=[],c={data:[],errors:[],meta:{}};function d(){return c&&o&&(h("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+_.DefaultDelimiter+"'"),o=!1),p()&&function(){if(!c)return;for(var e=0;p()&&e<c.data.length;e++)for(var t=0;t<c.data[e].length;t++)u.push(c.data[e][t]);c.data.splice(0,1)}(),function(){if(!c||!l.header&&!l.dynamicTyping)return c;for(var e=0;e<c.data.length;e++){for(var t,n={},r=0;r<c.data[e].length;r++){l.dynamicTyping&&(t=c.data[e][r],c.data[e][r]="true"==t||"false"!=t&&function(e){return a.test(e)?parseFloat(e):e}(t)),l.header&&(r>=u.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(c.data[e][r])):n[u[r]]=c.data[e][r])}l.header&&(c.data[e]=n,r>u.length?h("FieldMismatch","TooManyFields","Too many fields: expected "+u.length+" fields but parsed "+r,e):r<u.length&&h("FieldMismatch","TooFewFields","Too few fields: expected "+u.length+" fields but parsed "+r,e))}l.header&&c.meta&&(c.meta.fields=u);return c}()}function p(){return l.header&&0==u.length}function h(e,t,n,r){c.errors.push({type:e,code:t,message:n,row:r})}l=m(l),this.parse=function(e){var t,n;return o=!1,l.delimiter||((t=function(e){for(var t,n,r,i=[",","\t","|",";",_.RECORD_SEP,_.UNIT_SEP],o=0;o<i.length;o++){var a=i[o],s=0,f=0;r=void 0;for(var u=new g({delimiter:a,preview:10}).parse(e),c=0;c<u.data.length;c++){var d=u.data[c].length;f+=d,void 0!==r?1<d&&(s+=Math.abs(d-r),r=d):r=d}f/=u.data.length,(void 0===n||s<n)&&1.99<f&&(n=s,t=a)}return{successful:!!(l.delimiter=t),bestDelimiter:t}}(e)).successful?l.delimiter=t.bestDelimiter:(o=!0,l.delimiter=_.DefaultDelimiter),c.meta.delimiter=l.delimiter),C(l.step)&&(n=l.step,l.step=function(e){c=e,p()?d():n(d(),s)}),l.preview&&l.header&&l.preview++,r=e,i=new g(l),c=i.parse(r),d(),C(l.complete)&&!f&&l.complete(c),f?{meta:{paused:!0}}:c},this.pause=function(){f=!0,i.abort(),r=r.substr(i.getCharIndex())},this.resume=function(){f=!1,(i=new g(l)).parse(r),C(l.complete)&&!f&&l.complete(c)},this.abort=function(){i.abort(),C(l.complete)&&l.complete(c),r=""}}function g(e){var n,r,t,i,o,a,s,f,u,c,d,l,p,h,g=/^\s*$/,m=!1;function y(){a=n[++s]}function v(){c[l][p]+=a}function b(){c[l].push(""),p=c[l].length-1}function w(){S(),u++,h++,c.push([]),l=c.length-1,b()}function S(){1==c[l].length&&g.test(c[l][0])&&(e.keepEmptyRows?c[l].splice(0,1):c.splice(l,1),l=c.length-1),C(i)&&(c[l]&&i(I()),A())}function E(e){return e<n.length-1&&("\r"==n[e]&&"\n"==n[e+1]||"\n"==n[e]&&"\r"==n[e+1])}function R(e){return"\r"==n[e]||"\n"==n[e]}function x(){return!k()&&s<n.length-1&&'"'==n[s+1]}function k(){return!f&&D(s-1)||D(s+1)}function D(e){"number"!=typeof e&&(e=s);var t=n[e];return e<=-1||e>=n.length||t==r||"\r"==t||"\n"==t}function T(e,t,n){d.push({type:e,code:t,message:n,line:u,row:l,index:s})}function A(){c=[],d=[],p=l=0}function I(){return{data:c,errors:d,meta:{lines:u,delimiter:r,aborted:m,truncated:0<o&&s<n.length}}}r=(e=e||{}).delimiter,t=e.comments,i=e.step,o=e.preview,("string"!=typeof r||1!=r.length||-1<_.BAD_DELIMITERS.indexOf(r))&&(r=","),!0===t?t="#":("string"!=typeof t||1!=t.length||-1<_.BAD_DELIMITERS.indexOf(t)||t==r)&&(t=!1),this.parse=function(e){if("string"!=typeof e)throw"Input must be a string";return f=!1,h=s=0,u=1,A(),c=[[""]],a=(n=e)[s],function(){for(;s<n.length&&!m&&!(0<o&&o<=h);)'"'==a?k()&&!x()?f=!f:(v(),f&&x()?s++:T("Quotes","UnexpectedQuotes","Unexpected quotes")):f?function(){(E(s)||R(s))&&u++;v()}():a==r?b():E(s)?(w(),y()):(R(s)?w:t&&(0==s||R(s-1)||E(s-2))&&n[s]===t?function(){for(;!E(s)&&!R(s)&&s<n.length;)y()}:v)(),y();return function(){m&&T("Abort","ParseAbort","Parsing was aborted by the user's step function");f&&T("Quotes","MissingQuotes","Unescaped or mismatched quotes");if(S(),!C(i))return I()}()}()},this.abort=function(){m=!0},this.getCharIndex=function(){return s}}function m(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=m(e[n]);return t}function C(e){return"function"==typeof e}return _.parse=function(e,t){var n=function(e){"object"!=typeof e&&(e={});var t=m(e);("string"!=typeof t.delimiter||1!=t.delimiter.length||-1<_.BAD_DELIMITERS.indexOf(t.delimiter))&&(t.delimiter=r.delimiter);"boolean"!=typeof t.header&&(t.header=r.header);"boolean"!=typeof t.dynamicTyping&&(t.dynamicTyping=r.dynamicTyping);"number"!=typeof t.preview&&(t.preview=r.preview);"function"!=typeof t.step&&(t.step=r.step);"function"!=typeof t.complete&&(t.complete=r.complete);"function"!=typeof t.error&&(t.error=r.error);"string"!=typeof t.encoding&&(t.encoding=r.encoding);"boolean"!=typeof t.download&&(t.download=r.download);"boolean"!=typeof t.keepEmptyRows&&(t.keepEmptyRows=r.keepEmptyRows);return t}(t);if("string"==typeof e){if(!n.download)return new p(n).parse(e);new i(n).stream(e)}else{e instanceof File&&(n.step||n.chunk?new o(n).stream(e):(new p(n),reader=new FileReader,reader.onload=function(e){new p(n).parse(e.target.result)},reader.onerror=function(){C(n.error)&&n.error(reader.error,e)},reader.readAsText(e,n.encoding)))}},_.unparse=function(e,t){var n=!1,c=",",d="\r\n";(function(){if("object"!=typeof t)return;"string"==typeof t.delimiter&&1==t.delimiter.length&&-1==_.BAD_DELIMITERS.indexOf(t.delimiter)&&(c=t.delimiter);("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(n=t.quotes);"string"==typeof t.newline&&(d=t.newline)})(),"string"==typeof e&&(e=JSON.parse(e));if(e instanceof Array){if(!e.length||e[0]instanceof Array)return i(null,e);if("object"==typeof e[0])return i(r(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:r(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),i(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input";function r(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function i(e,t){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var r=e instanceof Array&&0<e.length,i=!(t[0]instanceof Array);if(r){for(var o=0;o<e.length;o++)0<o&&(n+=c),n+=l(e[o],o);0<t.length&&(n+=d)}for(var a=0;a<t.length;a++){for(var s=r?e.length:t[a].length,f=0;f<s;f++){0<f&&(n+=c);var u=r&&i?e[f]:f;n+=l(t[a][u],f)}a<t.length-1&&(n+=d)}return n}function l(e,t){return null==e?"":(e=e.toString().replace(/"/g,'""'),"boolean"==typeof n&&n||n instanceof Array&&n[t]||function(e,t){for(var n=0;n<t.length;n++)if(-1<e.indexOf(t[n]))return!0;return!1}(e,_.BAD_DELIMITERS)||-1<e.indexOf(c)||" "==e.charAt(0)||" "==e.charAt(e.length-1)?'"'+e+'"':e)}},_.RECORD_SEP=String.fromCharCode(30),_.UNIT_SEP=String.fromCharCode(31),_.BYTE_ORDER_MARK="\ufeff",_.BAD_DELIMITERS=["\r","\n",'"',_.BYTE_ORDER_MARK],_.LocalChunkSize=10485760,_.RemoteChunkSize=5242880,_.DefaultDelimiter=",",_.Parser=g,_.ParserHandle=p,_.NetworkStreamer=i,_.FileStreamer=o,c.fn.parse=function(s){var n=s.config||{},f=[];return this.each(function(e){if(!("INPUT"==c(this).prop("tagName").toUpperCase()&&"file"==c(this).attr("type").toLowerCase()&&window.FileReader)||!this.files||0==this.files.length)return!0;for(var t=0;t<this.files.length;t++)f.push({file:this.files[t],inputElem:this,instanceConfig:c.extend({},n)})}),e(),this;function e(){if(0!=f.length){var e,t,n,r,i=f[0];if(C(s.before)){var o=s.before(i.file,i.inputElem);if("object"==typeof o){if("abort"==o.action)return e="AbortError",t=i.file,n=i.inputElem,r=o.reason,void(C(s.error)&&s.error({name:e},t,n,r));if("skip"==o.action)return void u();"object"==typeof o.config&&(i.instanceConfig=c.extend(i.instanceConfig,o.config))}else if("skip"==o)return void u()}var a=i.instanceConfig.complete;i.instanceConfig.complete=function(e){C(a)&&a(e,i.file,i.inputElem),u()},_.parse(i.file,i.instanceConfig)}}function u(){f.splice(0,1),e()}},_});
define('geometry/math/isNumber',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNumber=void 0,e.isNumber=function(e){var r;if("number"==typeof e)r=e+"";else{if("string"!=typeof e)return!1;r=e}return r.trim().match(/^-?[0-9]*\.?[0-9]*$/)}});
define('main/data_helpers',["require","exports","vendor/papaparse","underscore","bugsnag","geometry/math/isNumber"],function(require,e,o,u,p,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=e.getExpressions=void 0,e.getExpressions=function(e){var r=e.split(/\r?\n/),t=[],a=!1;if(!(r.length<2)){for(var n=0;n<r.length;n++){var s,i=r[n];i.trim()&&(0<n&&!f.isNumber(i.replace(/,(\d{3})/g,"$1"))&&(a=!0),s={content:i},t.push(s))}if(a)return t;var o=u.pluck(t,"content").map(function(e){return e.replace(/,(\d{3})/g,"$1")});return f.isNumber(o[0])||(o=o.slice(1)),[{content:"\\left["+o.join(",")+"\\right]",numberList:!0}]}},e.parse=function(e){if(!/^\s*$/.test(e)){var r=o.parse(e,{preview:1e3}),t=[];if(!r.errors.length||r.data.length){if(r.data.length&&!(r.data.length<2)){for(var a=r.data[0].length,n=0;n<a;n++)t.push([]);for(var s=0;s<r.data.length;s++)if(0!==s||!isNaN(parseFloat(r.data[s][0]))){if(r.data[s].length<2)return;if(r.data[s][0]||r.data[s][1])for(n=0;n<a;n++){var i=(r.data[s][n]||"").replace(/,(\d{3})/g,"$1");if(i&&isNaN(parseFloat(i)))return;t[n].push(i)}}if(!(t[0].length<2))return t}}else p.notify("PapaParse.parse returned errors.",{metaData:{input:e,output:r.errors}})}}});

define('loadcss!new_expression', function(){});
define('expressions/new_expression_view',["require","exports","tslib","dcgview","loadcss!new_expression"],function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,c=(s=n.Class,t.__extends(i,s),i.prototype.template=function(){return this.controller=this.props.controller(),n.createElement("div",{class:n.const("dcg-expressionitem dcg-new-expression dcg-opened")},n.createElement("div",{class:n.const("dcg-new-math-div dcg-do-not-blur dcg-action-newmath"),onTap:this.bindFn(this.newMath)},n.createElement("div",{class:n.const("dcg-new-expression-fade")})),n.createElement("span",{class:n.const("dcg-tab")},n.createElement("span",{class:n.const("dcg-num dcg-variable-index")},this.bindFn(this.getIndex)),n.createElement("div",{class:n.const("dcg-tab-interior")})))},i.prototype.getIndex=function(){return this.controller.getNextDisplayIndex()},i.prototype.newMath=function(){this.controller.dispatch({type:"new-expression-at-end"})},i);function i(){return null!==s&&s.apply(this,arguments)||this}e.default=c});

define('loadcss!add_expression', function(){});
define('expressions/add_expression_view',["require","exports","tslib","keys","browser","lib/tooltip","dcgview","jquery","./image-upload-view","main/manage-focus-helper","loadcss!add_expression"],function(require,e,n,r,t,o,c,a,l,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,d=c.Components.If,u=(s=c.Class,n.__extends(p,s),p.prototype.init=function(){this.controller=this.props.controller()},p.prototype.template=function(){var n=this;return c.createElement("div",{class:c.const("dcg-add-expression-container")},c.createElement(o.Tooltip,{tooltip:function(){return n.controller.s("graphing-calculator-label-add-item-tooltip")},gravity:function(){return n.controller.isNarrow()?"ne":"se"}},c.createElement("span",{class:function(){return{"dcg-icon-btn":!0,"dcg-add-expression-btn":!0,"dcg-action-add-expression":!0,"dcg-do-blur":!0,"dcg-active":n.controller.isAddExpressionOpen()}},handleEvent:c.const("true"),role:c.const("button"),tabindex:c.const("0"),"aria-haspopup":c.const("true"),"aria-expanded":function(){return n.controller.isAddExpressionOpen()},"aria-label":function(){return n.controller.s("graphing-calculator-label-add-item-tooltip")},didMount:function(e){n.toggleButtonNode=e},onTap:this.bindFn(this.toggleAddExpression),manageFocus:this.const(i.manageFocusHelper({controller:this.controller,location:{type:"add-item-btn"}}))},c.createElement("i",{class:c.const("dcg-icon-plus")}))),c.createElement(d,{predicate:function(){return n.controller.isAddExpressionOpen()}},function(){return c.createElement("div",{class:function(){return{"dcg-add-expression-dropdown":!0,"dcg-popover":!0,"dcg-bottom":!n.controller.isNarrow(),"dcg-right":n.controller.isNarrow()}},role:c.const("complementary"),"aria-label":function(){return n.controller.s("graphing-calculator-narration-add-item-menu")},didMount:n.bindFn(n.didMountPopover),didUnmount:n.bindFn(n.didUnmountPopover)},c.createElement("div",{class:c.const("dcg-popover-interior")},c.createElement("div",{class:c.const("dcg-new-item dcg-do-not-blur dcg-action-newexpression"),role:c.const("button"),tabindex:c.const(0),"aria-label":function(){return n.controller.s("graphing-calculator-narration-add-expression")},onTap:n.bindFn(n.newExpression),handleEvent:c.const("true"),manageFocus:n.const(i.manageFocusHelper({controller:n.controller,location:{type:"add-expression-btn"}}))},c.createElement("i",{class:c.const("dcg-icon-new-expression dcg-expression-icon")}),function(){return n.controller.s("graphing-calculator-label-expression-lowercase")}),c.createElement(d,{predicate:function(){return n.controller.areNotesEnabled()}},function(){return c.createElement("div",{class:c.const("dcg-new-item dcg-do-not-blur dcg-action-newtext"),role:c.const("button"),tabindex:c.const(0),"aria-label":function(){return n.controller.s("graphing-calculator-narration-add-note")},onTap:n.bindFn(n.newText),handleEvent:c.const("true")},c.createElement("i",{class:c.const("dcg-icon-new-text dcg-expression-icon")}),function(){return n.controller.s("graphing-calculator-label-note-lowercase")})}),c.createElement("div",{class:c.const("dcg-new-item dcg-do-not-blur dcg-action-newtable"),role:c.const("button"),tabindex:c.const(0),"aria-label":function(){return n.controller.s("graphing-calculator-narration-add-table")},onTap:n.bindFn(n.newTable),handleEvent:c.const("true"),manageFocus:n.const(i.manageFocusHelper({controller:n.controller,location:{type:"add-table-btn"}}))},c.createElement("i",{class:c.const("dcg-icon-new-table dcg-expression-icon")}),function(){return n.controller.s("graphing-calculator-label-table-lowercase")}),c.createElement(d,{predicate:function(){return n.controller.areFoldersEnabled()}},function(){return c.createElement("div",{class:c.const("dcg-new-item dcg-do-not-blur dcg-action-newfolder"),role:c.const("button"),tabindex:c.const(0),"aria-label":function(){return n.controller.s("graphing-calculator-narration-add-folder")},onTap:n.bindFn(n.newFolder),handleEvent:c.const("true"),manageFocus:n.const(i.manageFocusHelper({controller:n.controller,location:{type:"add-folder-btn"}}))},c.createElement("i",{class:c.const("dcg-icon-new-folder dcg-expression-icon")}),function(){return n.controller.s("graphing-calculator-label-folder-lowercase")})}),c.createElement(d,{predicate:function(){return n.controller.areImagesEnabled()}},function(){return c.createElement(l.ImageUploadView,{controller:function(){return n.controller},ariaLabel:function(){return n.controller.s("graphing-calculator-narration-add-image")},onFileChange:function(e){return n.insertFiles(e)},location:n.const({type:"add-image-btn"})},c.createElement("div",{class:c.const("dcg-new-item dcg-action-newimage")},c.createElement("i",{class:c.const("dcg-icon-new-image dcg-expression-icon")}),function(){return n.controller.s("graphing-calculator-label-image-lowercase")}))}),c.createElement(d,{predicate:function(){return n.controller.areSimulationsEnabled()}},function(){return c.createElement("div",{class:c.const("dcg-new-item dcg-do-not-blur dcg-action-newsimulation"),role:c.const("button"),tabindex:c.const(0),"aria-label":function(){return n.controller.s("graphing-calculator-narration-add-simulation")},onTap:n.bindFn(n.newSimulation),handleEvent:c.const("true"),manageFocus:n.const(i.manageFocusHelper({controller:n.controller,location:{type:"add-simulation-btn"}}))},c.createElement("i",{class:c.const("dcg-icon-new-folder dcg-expression-icon")}),function(){return n.controller.s("graphing-calculator-label-simulation-lowercase")})})),c.createElement("span",{class:c.const("dcg-arrow")}))}))},p.prototype.didMountPopover=function(e){var o=this;this.popoverNode=e,a(document).on("dcg-tapstart.add-expression-view wheel.add-expression-view",function(e){o.eventShouldClosePopover(e)&&o.controller.dispatch({type:"close-add-expression",focusIconAfterClose:"keyboard"===e.device})}),a(document).on("keydown.add-expression-view",function(e){if("Esc"===r.lookup(e)&&o.controller.dispatch({type:"close-add-expression",focusIconAfterClose:!0}),"Tab"===r.lookup(e)&&!e.altKey&&!e.metaKey&&!e.ctrlKey){var n=o.controller.getFocusLocation();if(!n)return;var t=void 0,t=o.controller.areImagesEnabled()?{type:"add-image-btn"}:o.controller.areFoldersEnabled()?{type:"add-folder-btn"}:{type:"add-table-btn"};e.shiftKey||n.type!==t.type?e.shiftKey&&"add-item-btn"===n.type&&(o.controller.dispatch({type:"set-focus-location",location:t}),e.preventDefault(),e.stopPropagation()):(o.controller.dispatch({type:"set-focus-location",location:{type:"add-item-btn"}}),e.preventDefault(),e.stopPropagation())}}),t.IS_IPAD&&t.IS_IN_IFRAME&&a(e).on("dcg-tapstart",function(e){return e.preventDefault()}),a(e).find(".dcg-new-item").on("touchstart",function(e){return e.preventDefault()})},p.prototype.didUnmountPopover=function(){a(document).off(".add-expression-view")},p.prototype.toggleAddExpression=function(e){this.controller.dispatch({type:"toggle-add-expression",focusOnOpen:"keyboard"===e.device})},p.prototype.newExpression=function(){this.controller.dispatch({type:"new-expression"})},p.prototype.newText=function(){this.controller.dispatch({type:"new-text"})},p.prototype.newFolder=function(){this.controller.dispatch({type:"new-folder"})},p.prototype.newSimulation=function(){this.controller.dispatch({type:"new-simulation"})},p.prototype.newTable=function(){this.controller.dispatch({type:"new-table"})},p.prototype.insertFiles=function(e){this.controller.dispatch({type:"new-images",files:e})},p.prototype.eventShouldClosePopover=function(e){var n=!!a(e.target).closest(this.popoverNode).length,t=!!a(e.target).closest(this.toggleButtonNode).length;return!(n||t)},p);function p(){return null!==s&&s.apply(this,arguments)||this}e.default=u});

define('loadcss!expressions/expressions-header', function(){});
define('expressions/expressions-header',["require","exports","tslib","./add_expression_view","dcgview","lib/tooltip","main/manage-focus-helper","loadcss!./expressions-header"],function(require,t,n,e,o,r,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,i=o.Components.If,a=(l=o.Class,n.__extends(s,l),s.prototype.init=function(){this.controller=this.props.controller()},s.prototype.template=function(){var n=this;return o.createElement("div",{class:function(){return{"dcg-expression-top-bar":!0,"dcg-expressions-scrolled":n.props.expsScrolled()}},role:o.const("toolbar"),"aria-label":function(){return n.controller.s("graphing-calculator-narration-expression-bar")},didMount:function(t){n.node=t},onTapStart:this.bindFn(this.clearSelectionOnMobile),style:function(){return{background:n.controller.hasBackgroundColor()?n.controller.getPillboxBackgroundColor():void 0}}},o.createElement("div",{class:o.const("dcg-left-buttons")},o.createElement(i,{predicate:this.bindFn(this.showHamburger)},function(){return o.createElement("span",{class:o.const("dcg-action-opendrawer dcg-tooltip dcg-icon-btn dcg-in-api-action-opendrawer"),handleEvent:o.const("true"),tooltip:function(){return n.controller.s("graphing-calculator-label-open-graph-tooltip")},role:o.const("button"),tabindex:o.const("0"),"aria-label":function(){return n.controller.s("graphing-calculator-narration-open-graph")},onTap:function(){return n.controller.dispatch({type:"open-drawer"})}},o.createElement("i",{class:o.const("dcg-icon-hamburger")}))}),o.createElement(i,{predicate:function(){return!n.controller.isInEditListMode()}},function(){return o.createElement(e.default,{controller:function(){return n.props.controller()}})}),o.createElement(i,{predicate:this.bindFn(this.showRerandomize)},function(){return o.createElement(r.Tooltip,{tooltip:function(){return n.controller.s("graphing-calculator-label-randomize-tooltip")},gravity:function(){return n.controller.isNarrow()?"n":"s"}},o.createElement("span",{class:o.const("dcg-icon-btn"),handleEvent:o.const("true"),role:o.const("button"),tabindex:o.const("0"),"aria-label":function(){return n.controller.s("graphing-calculator-label-randomize-tooltip")},onTap:function(){return n.controller.dispatch({type:"re-randomize"})}},o.createElement("i",{class:o.const("dcg-icon-randomize")})))}),o.createElement(i,{predicate:function(){return n.controller.isInEditListMode()&&!n.controller.hasDefaultState()}},function(){return o.createElement("span",{class:o.const("dcg-btn-red dcg-action-clearall"),role:o.const("button"),tabindex:o.const("0"),onTap:function(){return n.controller.dispatch({type:"clear-graph"})}},function(){return n.controller.s("graphing-calculator-button-clear-graph")})}),o.createElement(i,{predicate:function(){return n.controller.isInEditListMode()&&n.controller.hasDefaultState()}},function(){return o.createElement("span",{class:o.const("dcg-btn-red dcg-action-reset"),role:o.const("button"),tabindex:o.const("0"),onTap:function(){return n.controller.dispatch({type:"reset-graph"})}},function(){return n.controller.s("graphing-calculator-button-reset-graph")})})),o.createElement("div",{class:o.const("dcg-center-buttons")},o.createElement(r.Tooltip,{tooltip:function(){return n.controller.s("graphing-calculator-label-undo-tooltip")},gravity:function(){return n.controller.isNarrow()?"n":"s"},disabled:function(){return!n.controller.canUndo()}},o.createElement("span",{class:function(){return{"dcg-action-undo":!0,"dcg-icon-btn":!0,"dcg-disabled":!n.controller.canUndo()}},role:o.const("button"),tabindex:function(){return n.controller.canUndo()?0:-1},"aria-label":function(){return n.controller.s("graphing-calculator-narration-undo")},onTap:function(){return n.controller.dispatch({type:"undo"})},"aria-disabled":function(){return!n.controller.canUndo()}},o.createElement("i",{class:o.const("dcg-icon-undo")}))),o.createElement(r.Tooltip,{tooltip:function(){return n.controller.s("graphing-calculator-label-redo-tooltip")},gravity:function(){return n.controller.isNarrow()?"n":"s"},disabled:function(){return!n.controller.canRedo()}},o.createElement("span",{class:function(){return{"dcg-action-redo":!0,"dcg-icon-btn":!0,"dcg-disabled":!n.controller.canRedo()}},role:o.const("button"),tabindex:function(){return n.controller.canRedo()?0:-1},"aria-label":function(){return n.controller.s("graphing-calculator-narration-redo")},onTap:function(){return n.controller.dispatch({type:"redo"})},"aria-disabled":function(){return!n.controller.canRedo()}},o.createElement("i",{class:o.const("dcg-icon-redo")})))),o.createElement("div",{class:o.const("dcg-right-buttons")},o.createElement(i,{predicate:function(){return!n.controller.isInEditListMode()}},function(){return o.createElement(r.Tooltip,{tooltip:function(){return n.controller.s("graphing-calculator-label-edit-list-tooltip")},gravity:function(){return n.controller.isNarrow()?"n":"s"}},o.createElement("span",{class:o.const("dcg-icon-btn dcg-action-toggle-edit"),handleEvent:o.const("true"),role:o.const("button"),tabindex:o.const("0"),"aria-label":function(){return n.controller.s("graphing-calculator-narration-edit-expression-list")},onTap:n.bindFn(n.toggleEditListMode),manageFocus:n.const(c.manageFocusHelper({controller:n.controller,location:{type:"edit-list-toggle"}}))},o.createElement("i",{class:o.const("dcg-icon-settings")})))}),o.createElement(i,{predicate:function(){return n.controller.isInEditListMode()}},function(){return o.createElement("span",{class:o.const("dcg-btn-blue dcg-action-toggle-edit dcg-do-not-blur"),handleEvent:o.const("true"),role:o.const("button"),tabindex:o.const("0"),onTap:n.bindFn(n.toggleEditListMode),manageFocus:n.const(c.manageFocusHelper({controller:n.controller,location:{type:"edit-list-toggle"}}))},function(){return n.controller.s("graphing-calculator-button-done")})}),o.createElement(i,{predicate:function(){return!n.controller.isInEditListMode()&&n.controller.getGraphSettings().config.graphpaper}},function(){return o.createElement(r.Tooltip,{tooltip:function(){return n.controller.s("graphing-calculator-label-hide-expression-list-tooltip")},gravity:function(){return n.controller.isNarrow()?"nw":"sw"}},o.const(" "),o.createElement("span",{class:function(){return{"dcg-resize-list-btn":!0,"dcg-action-hideexpressions":!0,"dcg-icon-btn":!0,"dcg-rotated":n.controller.isNarrow()}},role:o.const("button"),tabindex:o.const("0"),"aria-label":function(){return n.controller.s("graphing-calculator-label-hide-expression-list-tooltip")},onTap:function(){n.controller.dispatch({type:"hide-expressions-list"}),n.controller.dispatch({type:"set-focus-location",location:{type:"show-expression-list-btn"}})},manageFocus:n.const(c.manageFocusHelper({controller:n.controller,location:{type:"hide-expression-list-btn"}}))},o.createElement("i",{class:o.const("dcg-icon-hide")})))})))},s.prototype.showRerandomize=function(){return this.controller.anyItemDependsOnRandomSeed()},s.prototype.showHamburger=function(){return!!this.controller.getGraphSettings().config.showHamburger&&!this.controller.isInEditListMode()&&!this.controller.isNarrow()},s.prototype.clearSelectionOnMobile=function(t){t.wasHandled()||this.controller.dispatch({type:"set-none-selected"})},s.prototype.toggleEditListMode=function(t){this.controller.dispatch({type:"set-edit-list-mode",isEditListMode:!this.controller.isInEditListMode(),focusExpressionList:!1}),"keyboard"===t.device&&this.controller.dispatch({type:"set-focus-location",location:{type:"edit-list-toggle"}})},s);function s(){return null!==l&&l.apply(this,arguments)||this}t.default=a});
define('main/load-graph-from-link',["require","exports","core/graphing-calc/migrate-state","jquery"],function(require,t,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n,t,p,e){var c=!1;function l(){c||n.dispatch({type:"toast/show",toast:{message:n.s("graphing-calculator-text-toast-error-importing-graph"),toastStyle:"error",hideAfter:12e3}})}n.dispatch({type:"toast/show",toast:{message:n.s("graphing-calculator-text-toast-importing-graph"),hideAfter:0,toastStyle:"cover",onHide:function(){c=!0}}});var g=n.getState();a.getJSON(t).done(function(i){var t=s.migrateToLatest(i.state);e(t,function(t,e){var s,a,r,o;t||!e?l():"set-state"===p?(o=e,c||(n.dispatch({type:"set-state",state:o}),n.dispatch({type:"toast/show",toast:{message:n.s("graphing-calculator-text-toast-imported-graph"),undoCallback:function(){n.dispatch({type:"set-state",state:g})}}}))):(s=e,a=i.title||"",c||(r=n.getSelectedItem(),!function(t){if(!t||!t.expressions||!t.expressions.list)return!1;for(var e=t.expressions.list,s=0;s<e.length;s++)if("folder"===e[s].type)return!1;return!0}(s)?n.dispatch({type:"toast/show",toast:{message:n.s("graphing-calculator-text-toast-error-no-folders"),toastStyle:"error",hideAfter:12e3}}):(r&&n.dispatch({type:"set-folder-title",id:r.id,title:a}),s.expressions.list.forEach(function(t){t.id=n.generateId()}),n.dispatch({type:"insert-several-expressions",expressions:s.expressions.list}),n.dispatch({type:"toast/show",toast:{message:n.s("graphing-calculator-text-toast-imported-graph")}}))))})}).fail(l)}});
define('lib/get-clipboard-data',["require","exports"],function(require,a){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(a){return window.clipboardData&&window.clipboardData.getData?window.clipboardData.getData("Text"):a&&a.clipboardData&&a.clipboardData.getData?a.clipboardData.getData("text/plain"):void 0}});

define('loadcss!expressions/exp-list-resizer', function(){});
define('expressions/exp-list-resizer',["require","exports","tslib","dcgview","jquery","underscore","loadcss!./exp-list-resizer"],function(require,i,t,e,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ExpListResizer=void 0;var o,r=e.Components.If,d=(o=e.Class,t.__extends(p,o),p.prototype.init=function(){this.guid=s.uniqueId("dcg-exp-list-resize")},p.prototype.template=function(){var i=this;return e.createElement(r,{predicate:this.bindFn(this.isVisible)},function(){return e.createElement("div",{class:e.const("dcg-exp-list-resizer"),onTapStart:i.bindFn(i.onTapStart)})})},p.prototype.isVisible=function(){return!this.props.controller().expressionsAreFullWidth()&&this.props.controller().isListVisible()},p.prototype.onTapStart=function(i){var e=this;this.initialWidth=this.props.controller().getExpListWidth(),this.initialLeft=i.changedTouches[0].clientX,n(document).on("dcg-tapmove."+this.guid,function(i){var t;void 0!==e.initialLeft&&void 0!==e.initialWidth&&(t=i.changedTouches[0].clientX-e.initialLeft+e.initialWidth,e.props.controller().dispatch({type:"resize-exp-list",expListWidth:t}))}),n(document).on("dcg-tapend."+this.guid,this.bindFn(this.onTapEnd)),n(document).on("dcg-tapcancel."+this.guid,this.bindFn(this.onTapEnd))},p.prototype.onTapEnd=function(){n(document).off("."+this.guid),this.initialLeft=void 0,this.initialWidth=void 0},p);function p(){return null!==o&&o.apply(this,arguments)||this}i.ExpListResizer=d});

define('loadcss!expressions/color-menu', function(){});
define('expressions/color-menu',["require","exports","core/vendor/d3-color","tslib","dcgview","underscore","dcgview-helpers/mathquill-view","graphing-calc/models/expression","graphing-calc/models/table","expressions/colors","./circular-icon-view","main/mathquill-operators","loadcss!./color-menu"],function(require,e,t,o,r,n,l,i,s,c,a,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p,u=r.Components,h=u.For,g=u.If,m=(p=r.Class,o.__extends(f,p),f.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,this.leaveColorInputEmpty=!1},f.prototype.template=function(){var o=this;return r.createElement("div",null,r.createElement(h,{each:function(){return n.values(o.controller.getColors())}},r.createElement("div",{class:r.const("dcg-color-menu dcg-do-not-blur")},function(e){return r.createElement("span",{class:r.const("dcg-color-option"),handleevent:r.const("true"),role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return c.getColorName(o.controller,e)},"aria-pressed":function(){return o.props.selectedColor()===e},onTap:function(){o.props.onColorSelected(e),o.dispatchColorLatexIfChanged(""),o.leaveColorInputEmpty=!1}},r.createElement(a.CircularIconView,{iconType:function(){return o.props.selectedColor()===e?"check":"none"},backgroundColor:function(){return e}}))})),r.createElement(g,{predicate:function(){return o.controller.canUseAdvancedStyling()&&!o.isRegresssion()}},function(){return r.createElement("div",{class:r.const("dcg-advanced-color-styling")},r.const("Color:"),r.createElement(l.default,{latex:o.bindFn(o.getColorLatex),placeholder:o.const(""),isFocused:function(){return"colorlatex"===o.getFocusedInput()},capExpressionSize:function(){return!!o.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:o.const(!0),config:o.bindFn(o.getMQConfig),getAriaLabel:function(){return o.controller.s("graphing-calculator-narration-color-menu-label")},getAriaPostLabel:o.const(""),hasError:o.bindFn(o.isColorLatexValid),onUserChangedLatex:function(e){return o.dispatchColorLatexIfChanged(e)},onExpressionSizeExceeded:function(){return o.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e){return o.handleFocusedChanged(e,"colorlatex")},dataLabelAttributeValue:o.const("color")}))}))},f.prototype.willUpdate=function(){"colorlatex"!==this.getFocusedInput()&&(this.leaveColorInputEmpty=!1)},f.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation(),o="header"===this.model.type?this.model.table.id:this.id;if(e&&"expression-menu"===e.type&&e.id===o)return e.location},f.prototype.getColorLatex=function(){var e=this.model.colorLatex;return e||(this.leaveColorInputEmpty?"":this.getModelColorAsExpression())},f.prototype.getModelColorAsExpression=function(){var e=this.model.color,o=t.color(e);return o?"\\operatorname{rgb}\\left("+o.r+","+o.g+","+o.b+"\\right)":""},f.prototype.isColorLatexValid=function(){return"header"===this.model.type?!s.isColorLatexValid(this.model):!i.isColorLatexValid(this.model)},f.prototype.dispatchColorLatexIfChanged=function(e){this.leaveColorInputEmpty=!e,""===this.model.colorLatex&&e===this.getModelColorAsExpression()||(this.model.colorLatex!==e?"header"===this.model.type?this.controller.dispatch({type:"set-tablecolumn-colorlatex",tableId:this.model.table.id,columnId:this.id,colorLatex:e}):this.controller.dispatch({type:"set-item-colorlatex",id:this.id,colorLatex:e}):this.controller.dispatch({type:"render"}))},f.prototype.handleFocusedChanged=function(e,o){var t="header"===this.model.type?this.model.table.id:this.id;e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:t,location:o}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"expression-menu",id:t,location:o}})},f.prototype.isRegresssion=function(){var e=this.model;return!(!e.formula||!e.formula.is_regression)},f.prototype.getMQConfig=function(){return{autoOperatorNames:d.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},f);function f(){return null!==p&&p.apply(this,arguments)||this}e.default=m});

define('loadcss!expressions/toggle-view', function(){});
define('expressions/toggle-view',["require","exports","tslib","dcgview","loadcss!./toggle-view"],function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,r=(o=n.Class,t.__extends(i,o),i.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-toggle-view":!0,"dcg-toggled":e.props.toggled()}},"aria-label":function(){return e.props.ariaLabel()},role:n.const("checkbox"),tabindex:n.const("0"),"aria-checked":function(){return e.props.toggled()},toggled:function(){return e.props.toggled()},onTap:this.bindFn(this.props.onChange)},n.createElement("div",{class:n.const("dcg-toggle-switch")}))},i);function i(){return null!==o&&o.apply(this,arguments)||this}e.default=r});
define('core/types/line-width',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.THICK=e.DEFAULT=e.THIN=void 0,e.THIN=1,e.DEFAULT=2.5,e.THICK=5});
define('core/types/line-opacity',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HIGH=e.DEFAULT=e.LOW=void 0,e.LOW=.5,e.DEFAULT=.7,e.HIGH=.9});
define('core/types/point-opacity',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT=void 0,e.DEFAULT=.9});
define('expressions/expression_options_view',["require","exports","tslib","dcgview","underscore","core/lib/dragmode","./color-menu","graphing-calc/models/abstract-item","core/math/expression-types","graphing-calc/models/expression","core/types/styles","expressions/toggle-view","dcgview-helpers/checkbox","./circular-icon-view","lib/aria","dcgview-helpers/mathquill-view","core/types/opacity","core/types/line-width","core/types/line-opacity","core/types/point-opacity","main/mathquill-operators"],function(require,e,t,n,o,i,r,l,c,s,a,d,u,p,g,h,f,m,y,S,b){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpressionOptionsMenuView=void 0;var E,v=n.Components,x=v.For,P=v.If,C=(E=n.Class,t.__extends(D,E),D.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},D.prototype.template=function(){var t=this;return n.createElement("div",{class:function(){return{"dcg-exp-options-menu":!0,"dcg-options-menu":!0,"dcg-colors-only":0===t.sections().length}},role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-options-menu")},didMount:function(){g.alert(t.controller.s("graphing-calculator-narration-options-menu-open"))},didUnmount:function(){g.alert(t.controller.s("graphing-calculator-narration-options-menu-closed"))}},n.createElement("div",{class:n.const("dcg-triangle")}),n.createElement("div",{class:n.const("dcg-options-menu-column-left")},n.createElement(P,{predicate:function(){return 0<=t.sections().indexOf("pointStyles")}},function(){return n.createElement("div",{class:n.const("dcg-styles-div dcg-options-menu-section dcg-styles-section")},n.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":t.hasNextSection("pointStyles")}},role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-point-style-options")}},n.createElement("span",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-toggle-title")},function(){return t.shouldPreventPointsToggle()?t.controller.s("graphing-calculator-heading-style"):t.controller.s("graphing-calculator-heading-points")}),n.createElement(P,{predicate:function(){return!t.shouldPreventPointsToggle()}},function(){return n.createElement(d.default,{ariaLabel:function(){return t.controller.s("graphing-calculator-narration-points-toggle")},toggled:function(){return t.getDisplayProps().points},onChange:t.bindFn(t.onTogglePoints)})}),n.createElement(P,{predicate:function(){return t.getDisplayProps().points||t.shouldPreventPointsToggle()}},function(){return n.createElement(x,{each:t.bindFn(t.getValidPointStyles)},n.createElement("div",{class:n.const("dcg-style-icons")},function(e){return n.createElement("div",{class:n.const("dcg-style-icon-container"),onTap:function(){return t.onPointStyleSelected(e)},role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e},"aria-pressed":function(){return t.model.pointStyle!==e}},n.createElement(p.CircularIconView,{backgroundColor:t.bindFn(t.getModelColor),semiTransparent:function(){return t.model.pointStyle!==e},iconType:function(){return"CROSS"===e?"point-cross":"OPEN"===e?"point-open":"point-default"}}))}))}),n.createElement(P,{predicate:function(){return t.controller.canUseAdvancedStyling()}},function(){return n.createElement("div",{class:n.const("dcg-variable-point-opacity")},n.const("Opacity:"),n.createElement(h.default,{latex:function(){return t.model.pointOpacity},placeholder:t.bindFn(t.getPointOpacityPlaceholder),isFocused:function(){return"pointopacity"===t.getFocusedInput()},capExpressionSize:function(){return!!t.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:t.const(!0),config:t.bindFn(t.getMQConfig),getAriaLabel:function(){return t.controller.s("graphing-calculator-narration-point-opacity")},getAriaPostLabel:t.const(""),hasError:function(){return!s.isPointOpacityValid(t.model)},onUserChangedLatex:function(e){return t.dispatchPointOpacityLatexIfChanged(e)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e){return t.handleFocusedChanged(e,"pointopacity")},dataLabelAttributeValue:t.const("point-opacity")}))})))}),n.createElement(P,{predicate:function(){return 0<=t.sections().indexOf("pointSizes")}},function(){return n.createElement("div",{class:n.const("dcg-styles-div dcg-options-menu-section dcg-sizes-section")},n.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":t.hasNextSection("pointSizes")}},role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-size-options")}},n.createElement("span",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-toggle-title")},function(){return t.controller.s("graphing-calculator-heading-size")}),n.createElement(x,{each:t.bindFn(t.getValidPointSizes)},n.createElement("div",{class:n.const("dcg-style-icons")},function(e){return n.createElement("div",{class:n.const("dcg-style-icon-container"),onTap:function(){return t.onDotplotPointSizeSelected(e)},role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e},"aria-pressed":function(){return t.model.vizProps.dotplotSize!==e}},n.createElement(p.CircularIconView,{backgroundColor:t.bindFn(t.getModelColor),semiTransparent:function(){return t.model.vizProps.dotplotSize!==e},iconType:function(){return"CROSS"===t.model.pointStyle?"point-cross":"OPEN"===t.model.pointStyle?"point-open":"point-default"},iconModifier:function(){return"medium"===e?"medium":"large"===e?"large":"small"}}))}))))}),n.createElement(P,{predicate:function(){return 0<=t.sections().indexOf("lineStyles")}},function(){return n.createElement("div",{class:n.const("dcg-styles-div dcg-options-menu-section dcg-lines-menu")},n.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":t.hasNextSection("lineStyles")}},role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-line-style-options")}},n.createElement("span",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-toggle-title")},function(){return t.shouldShowLinesToggle()?t.controller.s("graphing-calculator-heading-lines"):t.controller.s("graphing-calculator-heading-style")}),n.createElement(P,{predicate:function(){return t.shouldShowLinesToggle()}},function(){return n.createElement(d.default,{ariaLabel:function(){return t.controller.s("graphing-calculator-narration-lines-toggle")},toggled:function(){return t.getDisplayProps().lines},onChange:t.bindFn(t.onToggleLines)})}),n.createElement(P,{predicate:function(){return t.shouldShowLineStyles()}},function(){return n.createElement(x,{each:t.bindFn(t.getValidLineStyles)},n.createElement("div",{class:n.const("dcg-style-icons")},function(e){return n.createElement("div",{class:n.const("dcg-style-icon-container"),onTap:function(){return t.onLineStyleSelected(e)},role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return e},"aria-pressed":function(){return t.model.lineStyle!==e}},n.createElement(p.CircularIconView,{backgroundColor:t.bindFn(t.getModelColor),semiTransparent:function(){return t.model.lineStyle!==e},iconType:function(){return"DOTTED"===e?"graph-dotted":"DASHED"===e?"graph-dashed":"graph-default"}}))}))}),n.createElement(P,{predicate:function(){return t.shouldShowLineStyles()&&t.controller.canUseAdvancedStyling()&&!t.isRegresssion()}},function(){return n.createElement("div",null,n.createElement("div",{class:n.const("dcg-variable-width")},n.const("Width:"),n.createElement(h.default,{latex:function(){return t.model.lineWidth},placeholder:function(){return""+m.DEFAULT},isFocused:function(){return"linewidth"===t.getFocusedInput()},capExpressionSize:function(){return!!t.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:t.const(!0),config:t.bindFn(t.getMQConfig),getAriaLabel:function(){return t.controller.s("graphing-calculator-narration-line-width")},getAriaPostLabel:t.const(""),hasError:function(){return!s.isLineWidthValid(t.model)},onUserChangedLatex:function(e){return t.dispatchLineWidthLatexIfChanged(e)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e){return t.handleFocusedChanged(e,"linewidth")},dataLabelAttributeValue:t.const("line-width")})),n.createElement("div",{class:n.const("dcg-variable-line-opacity")},n.const("Opacity:"),n.createElement(h.default,{latex:function(){return t.model.lineOpacity},placeholder:function(){return""+y.DEFAULT},isFocused:function(){return"lineopacity"===t.getFocusedInput()},capExpressionSize:function(){return!!t.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:t.const(!0),config:t.bindFn(t.getMQConfig),getAriaLabel:function(){return t.controller.s("graphing-calculator-narration-line-opacity")},getAriaPostLabel:t.const(""),hasError:function(){return!s.isLineOpacityValid(t.model)},onUserChangedLatex:function(e){return t.dispatchLineOpacityLatexIfChanged(e)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e){return t.handleFocusedChanged(e,"lineopacity")},dataLabelAttributeValue:t.const("line-opacity")})))})))}),n.createElement(P,{predicate:function(){return 0<=t.sections().indexOf("dragModes")}},function(){return n.createElement("div",{class:function(){return{"dcg-styles-menu":!0,"dcg-dividing-line-after":t.hasNextSection("dragModes")}},role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-drag-options")}},n.createElement("div",{class:n.const("dcg-drag-menu")},n.createElement("span",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-toggle-title")},function(){return t.controller.s("graphing-calculator-heading-drag")}),n.createElement(d.default,{ariaLabel:function(){return t.controller.s("graphing-calculator-narration-drag-toggle")},toggled:function(){return t.model.reconciledDragMode!==i.DragMode.NONE},onChange:t.bindFn(t.onToggleDrag)}),n.createElement(P,{predicate:function(){return t.model.reconciledDragMode!==i.DragMode.NONE}},function(){return n.createElement(x,{each:function(){return t.getUIDragModes()}},n.createElement("div",{class:n.const("dcg-style-icons")},function(e){return n.createElement("div",{class:function(){return{"dcg-style-icon-container":!0,"dcg-disabled":t.isDisabled(e)}},onTap:function(){return t.onDragModeSelected(e)},role:n.const("button"),tabindex:function(){return t.isDisabled(e)?-1:0},"aria-label":function(){return e},"aria-pressed":function(){return t.model.reconciledDragMode!==e}},n.createElement(p.CircularIconView,{backgroundColor:function(){return t.isDisabled(e)?"#bbb":t.getModelColor()},semiTransparent:function(){return t.model.reconciledDragMode!==e},iconType:function(){return"X"===e?"movable-horizontal":"Y"===e?"movable-vertical":"movable-both"}}))}))})))}),n.createElement(P,{predicate:function(){return 0<=t.sections().indexOf("isFillable")}},function(){return n.createElement("div",{class:n.const("dcg-styles-div dcg-options-menu-section")},n.createElement("div",{class:n.const("dcg-styles-menu")},n.createElement(u.Checkbox,{checked:function(){return t.getDisplayProps().fill},onChange:t.bindFn(t.onToggleFill),ariaLabel:function(){return t.controller.s("graphing-calculator-button-fill")}},function(){return t.controller.s("graphing-calculator-button-fill")}),n.createElement(P,{predicate:function(){return t.getDisplayProps().fill&&t.controller.canUseAdvancedStyling()}},function(){return n.createElement("div",{class:n.const("dcg-variable-opacity")},n.const("Opacity:"),n.createElement(h.default,{latex:function(){return t.model.fillOpacity},placeholder:function(){return""+f.DEFAULT},isFocused:function(){return"opacity"===t.getFocusedInput()},capExpressionSize:function(){return!!t.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:t.const(!0),config:t.bindFn(t.getMQConfig),getAriaLabel:function(){return t.controller.s("graphing-calculator-narration-fill-opacity")},getAriaPostLabel:t.const(""),hasError:function(){return!s.isFillOpacityValid(t.model)},onUserChangedLatex:function(e){return t.dispatchOpacityLatexIfChanged(e)},onExpressionSizeExceeded:function(){return t.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e){return t.handleFocusedChanged(e,"opacity")},dataLabelAttributeValue:t.const("fill-opacity"),needsSystemKeypad:function(){return!t.controller.isKeypadEnabled()}}))})))}),n.createElement(P,{predicate:function(){return 0<=t.sections().indexOf("isClickable")}},function(){return n.createElement("div",null,n.createElement(u.Checkbox,{checked:function(){return!!t.model.clickableInfo.enabled},onChange:function(e){t.controller.dispatch({type:"set-clickableinfo-prop",id:t.model.id,prop:"enabled",value:e})},ariaLabel:function(){return t.controller.s("graphing-calculator-button-clickable")}},function(){return t.controller.s("graphing-calculator-button-clickable")}))})),n.createElement("div",{class:function(){return{"dcg-options-menu-column-right":!0,"dcg-options-menu-column-right-includes-color-latex":t.controller.canUseAdvancedStyling()}}},n.createElement("div",{class:n.const("dcg-colors-div dcg-options-menu-section"),role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-color-options")}},n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-title")},function(){return t.controller.s("graphing-calculator-heading-color")}),n.createElement(r.default,{controller:function(){return t.props.controller()},model:function(){return t.model},selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected)}))))},D.prototype.getFocusedInput=function(){var e=this.controller.getFocusLocation();if(e&&"expression-menu"===e.type&&e.id===this.id)return e.location},D.prototype.handleFocusedChanged=function(e,t){e?this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:this.id,location:t}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"expression-menu",id:this.id,location:t}})},D.prototype.dispatchOpacityLatexIfChanged=function(e){this.model.fillOpacity!==e&&this.controller.dispatch({type:"set-item-fillopacity",id:this.id,fillOpacity:e})},D.prototype.dispatchLineOpacityLatexIfChanged=function(e){this.model.lineOpacity!==e&&this.controller.dispatch({type:"set-item-lineopacity",id:this.id,lineOpacity:e})},D.prototype.dispatchPointOpacityLatexIfChanged=function(e){this.model.pointOpacity!==e&&this.controller.dispatch({type:"set-item-pointopacity",id:this.id,pointOpacity:e})},D.prototype.dispatchLineWidthLatexIfChanged=function(e){this.model.lineWidth!==e&&this.controller.dispatch({type:"set-item-linewidth",id:this.id,lineWidth:e})},D.prototype.hasNextSection=function(e){var t=this.sections();return t.indexOf(e)<t.length-1},D.prototype.sections=function(){if(s.isToplevelDistribution(this.model))return[];var e=[];return 0<this.getValidPointStyles().length&&e.push("pointStyles"),this.shouldShowDotplotPointSizes()&&e.push("pointSizes"),0<this.getValidLineStyles().length&&!s.isSinglePoint(this.model)&&e.push("lineStyles"),0<this.getUIDragModes().length&&e.push("dragModes"),(s.isPolygon(this.model)||s.isParametric(this.model))&&e.push("isFillable"),this.shouldShowClickable()&&e.push("isClickable"),e},D.prototype.getValidPointStyles=function(){return s.isPointOrPointList(this.model)||s.isDotPlot(this.model)?[a.PointStyle.POINT,a.PointStyle.OPEN,a.PointStyle.CROSS]:[]},D.prototype.getValidPointSizes=function(){return s.isDotPlot(this.model)?["small","medium","large"]:[]},D.prototype.shouldShowDotplotPointSizes=function(){return 0<this.getValidPointSizes().length},D.prototype.shouldShowClickable=function(){return!!this.controller.canAuthorClickableObjects()&&s.isClickableAllowed(this.model)},D.prototype.getUIDragModes=function(){return this.model.formula.move_strategy?[i.DragMode.X,i.DragMode.Y,i.DragMode.XY]:[]},D.prototype.getValidLineStyles=function(){return s.isVisualization(this.model)||this.model.formula.is_inequality||s.isSinglePoint(this.model)?[]:[a.LineStyle.SOLID,a.LineStyle.DASHED,a.LineStyle.DOTTED]},D.prototype.shouldPreventPointsToggle=function(){return s.isSinglePoint(this.model)||s.isDotPlot(this.model)},D.prototype.onToggleFill=function(){this.controller.dispatch({type:"set-item-fill",id:this.id,fill:!this.getDisplayProps().fill})},D.prototype.onColorSelected=function(e){this.controller.dispatch({type:"set-item-color",id:this.id,color:e})},D.prototype.shouldShowLinesToggle=function(){return s.isPointOrPointList(this.model)||s.isParametric(this.model)||s.isPolygon(this.model)},D.prototype.shouldShowLineStyles=function(){return this.getDisplayProps().lines||!this.shouldShowLinesToggle()},D.prototype.onTogglePoints=function(){this.controller.dispatch({type:"set-item-points",id:this.id,points:!this.getDisplayProps().points})},D.prototype.onPointStyleSelected=function(e){this.model.pointStyle!==e&&this.controller.dispatch({type:"set-item-pointstyle",id:this.id,pointStyle:e})},D.prototype.onDotplotPointSizeSelected=function(e){this.model.vizProps.dotplotSize!==e&&this.controller.dispatch({type:"set-visualization-prop",id:this.id,prop:"dotplotSize",value:e})},D.prototype.onToggleLines=function(){this.controller.dispatch({type:"set-item-lines",id:this.id,lines:!this.getDisplayProps().lines})},D.prototype.onLineStyleSelected=function(e){this.model.lineStyle!==e&&this.controller.dispatch({type:"set-item-linestyle",id:this.id,lineStyle:e})},D.prototype.isDisabled=function(e){var t=this.controller.getEnabledDragModesForItem(this.id);return!o.contains(t,e)},D.prototype.getDragMode=function(){return this.model.reconciledDragMode||this.model.dragMode},D.prototype.getDisplayProps=function(){var e=this.model,t=e.points,n=e.lines,o=e.fill;return c.getReconciledExpressionProps(this.model.formula.expression_type,{points:t,lines:n,fill:o})},D.prototype.getModelColor=function(){return l.getDisplayColor(this.model)},D.prototype.onToggleDrag=function(){var e=this.model.reconciledDragMode!==i.DragMode.NONE?i.DragMode.NONE:i.DragMode.XY;this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e})},D.prototype.onDragModeSelected=function(e){this.isDisabled(e)||this.controller.dispatch({type:"set-item-dragmode",id:this.id,dragMode:e})},D.prototype.isRegresssion=function(){return!(!this.model.formula||!this.model.formula.is_regression)},D.prototype.getMQConfig=function(){return{autoOperatorNames:b.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},D.prototype.getPointOpacityPlaceholder=function(){return this.getDragMode()===i.DragMode.NONE?""+S.DEFAULT:"1"},D);function D(){return null!==E&&E.apply(this,arguments)||this}e.ExpressionOptionsMenuView=C});
define('expressions/image_options_view',["require","exports","tslib","dcgview","dcgview-helpers/checkbox","./circular-icon-view","./image-upload-view","lib/coerce-url"],function(require,e,t,n,o,c,r,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ImageOptionsView=void 0;var a,l=n.Components,s=l.For,u=l.If,d=(a=n.Class,t.__extends(g,a),g.prototype.template=function(){var t=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id,n.createElement("div",{class:n.const("dcg-exp-options-menu dcg-image-options-menu dcg-options-menu")},n.createElement("div",{class:n.const("dcg-triangle")}),n.createElement("div",{class:n.const("dcg-opacities-menu dcg-dividing-line-after")},n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-title")},function(){return t.controller.s("graphing-calculator-heading-image-opacity")}),n.createElement(s,{each:function(){return t.controller.getImageOpacities()}},n.createElement("div",{class:n.const("dcg-opacities-menu"),role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-heading-image-opacity")}},function(e){return n.createElement("span",{class:n.const("dcg-opacity-option"),role:n.const("button"),tabindex:n.const(0),"aria-label":function(){return"opacity: "+e},"aria-pressed":function(){return t.isOpacitySelected(e)},handleevent:n.const("true"),onTap:function(){return t.onSelectOpacity(e)}},n.createElement(c.CircularIconView,{backgroundImage:t.bindFn(t.getBackgroundImage),iconType:function(){return t.isOpacitySelected(e)?"check":"none"},backgroundOpacity:function(){return parseFloat(e)}}))}))),n.createElement("div",{class:n.const("dcg-styles-div dcg-options-menu-section")},n.createElement("div",{class:n.const("dcg-styles-menu"),role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-image-styles")}},n.createElement(o.Checkbox,{checked:function(){return!t.model.foreground},onChange:this.bindFn(this.onToggleForeground),ariaLabel:function(){return t.controller.s("graphing-calculator-button-place-image-behind-graphs")}},function(){return t.controller.s("graphing-calculator-button-place-image-behind-graphs")})),n.createElement(u,{predicate:this.bindFn(this.shouldShowClickable)},function(){return n.createElement("div",null,n.createElement(o.Checkbox,{checked:function(){return!!t.model.clickableInfo.enabled},onChange:function(e){t.controller.dispatch({type:"set-clickableinfo-prop",id:t.model.id,prop:"enabled",value:e})},ariaLabel:function(){return t.controller.s("graphing-calculator-button-clickable")}},function(){return t.controller.s("graphing-calculator-button-clickable")}))}),n.createElement(u,{predicate:function(){return t.controller.areImagesEnabled()}},function(){return n.createElement(r.ImageUploadView,{controller:function(){return t.controller},ariaLabel:function(){return t.controller.s("graphing-calculator-button-change-image")},onFileChange:function(e){return t.insertFiles(e)},location:t.const({type:"change-image-btn",id:t.id})},n.createElement("div",{class:n.const("dcg-action-changeimage")},function(){return t.controller.s("graphing-calculator-button-change-image")}))})))},g.prototype.onToggleForeground=function(e){this.controller.dispatch({type:"set-image-in-foreground",id:this.id,foreground:!e})},g.prototype.onSelectOpacity=function(e){this.controller.dispatch({type:"set-image-opacity",id:this.id,opacity:e})},g.prototype.isOpacitySelected=function(e){return this.model.opacity===e},g.prototype.insertFiles=function(e){this.controller.dispatch({type:"change-image",files:e,id:this.id})},g.prototype.getBackgroundImage=function(){return this.model.image_url===this.lastURL||(this.lastURL=this.model.image_url,this.lastEncodedURL='url("'+i.coerceURL(this.model.image_url)+'")'),this.lastEncodedURL},g.prototype.shouldShowClickable=function(){return!!this.controller.canAuthorClickableObjects()},g);function g(){return null!==a&&a.apply(this,arguments)||this}e.ImageOptionsView=d});
define('expressions/tables/table_column_menu_view',["require","exports","tslib","dcgview","expressions/color-menu","core/lib/dragmode","graphing-calc/models/abstract-item","core/types/styles","expressions/toggle-view","../circular-icon-view"],function(require,e,t,n,o,l,r,c,i,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TableColumnMenuView=void 0;var s,d=n.Components,u=d.For,g=d.If,m=(s=n.Class,t.__extends(p,s),p.prototype.template=function(){var t=this;return this.controller=this.props.controller(),this.model=this.props.model(),this.columnId=this.model.id,this.tableModel=this.model.table,this.tableId=this.tableModel.id,n.createElement("div",{class:n.const("dcg-table-column-menu dcg-options-menu")},n.createElement("div",{class:n.const("dcg-triangle")}),n.createElement("div",{class:n.const("dcg-options-menu-column-left")},n.createElement("div",{class:n.const("dcg-options-menu-section")},n.createElement("span",{class:n.const("dcg-toggle-title")},function(){return t.controller.s("graphing-calculator-button-table-column-menu-toggle-points")}),n.createElement(i.default,{ariaLabel:function(){return t.controller.s("graphing-calculator-button-table-column-menu-toggle-points")},toggled:function(){return t.model.points},onChange:function(){return t.onTogglePoints(!t.model.points)}}),n.createElement(g,{predicate:function(){return t.model.points}},function(){return n.createElement(u,{each:function(){return t.controller.getPointStyles()}},n.createElement("div",{class:n.const("dcg-style-icons")},function(e){return n.createElement("div",{class:n.const("dcg-style-icon-container"),onTap:function(){return t.onPointStyleSelected(e)}},n.createElement(a.CircularIconView,{backgroundColor:t.bindFn(t.getModelColor),semiTransparent:function(){return t.model.pointStyle!==e},iconType:function(){return"CROSS"===e?"point-cross":"OPEN"===e?"point-open":"point-default"}}))}))})),n.createElement("div",{class:n.const("dcg-options-menu-section")},n.createElement("span",{class:n.const("dcg-toggle-title")},function(){return t.controller.s("graphing-calculator-button-table-column-menu-toggle-lines")}),n.createElement(i.default,{ariaLabel:function(){return t.controller.s("graphing-calculator-button-table-column-menu-toggle-lines")},toggled:function(){return t.model.lines},onChange:function(){return t.onToggleLines(!t.model.lines)}}),n.createElement(g,{predicate:function(){return t.model.lines}},function(){return n.createElement("div",{class:n.const("dcg-line-options")},n.createElement(u,{each:function(){return t.controller.getLineStyles()}},n.createElement("div",{class:n.const("dcg-style-icons")},function(e){return n.createElement("div",{class:n.const("dcg-style-icon-container"),onTap:function(){return t.onLineStyleSelected(e)}},n.createElement(a.CircularIconView,{backgroundColor:t.bindFn(t.getModelColor),semiTransparent:function(){return t.model.lineStyle!==e},iconType:function(){return"DOTTED"===e?"graph-dotted":"DASHED"===e?"graph-dashed":"graph-default"}}))})))})),n.createElement(g,{predicate:function(){return t.model.draggable}},function(){return n.createElement("div",{class:n.const("dcg-drag-div dcg-options-menu-section")},n.createElement("span",{class:n.const("dcg-toggle-title")},function(){return t.controller.s("graphing-calculator-button-table-column-menu-toggle-drag")}),n.createElement(i.default,{ariaLabel:function(){return t.controller.s("graphing-calculator-button-table-column-menu-toggle-drag")},toggled:function(){return t.model.dragMode!==l.DragMode.NONE},onChange:function(){return t.onToggleDrag()}}),n.createElement(g,{predicate:function(){return t.model.dragMode!==l.DragMode.NONE}},function(){return n.createElement(u,{each:function(){return t.controller.getUIDragModes()}},n.createElement("div",{class:n.const("dcg-style-icons")},function(e){return n.createElement("div",{class:n.const("dcg-style-icon-container"),onTap:function(){return t.onDragModeSelected(e)}},n.createElement(a.CircularIconView,{backgroundColor:t.bindFn(t.getModelColor),semiTransparent:function(){return t.model.dragMode!==e},iconType:function(){return"X"===e?"movable-horizontal":"Y"===e?"movable-vertical":"movable-both"}}))}))}))})),n.createElement("div",{class:function(){return{"dcg-options-menu-column-right":!0,"dcg-options-menu-column-right-includes-color-latex":t.controller.canUseAdvancedStyling()}}},n.createElement("div",{class:n.const("dcg-colors-div dcg-options-menu-section")},n.createElement("div",{class:n.const("dcg-toggle-title")},function(){return t.controller.s("graphing-calculator-button-table-column-menu-toggle-color")}),n.createElement(o.default,{controller:function(){return t.props.controller()},model:function(){return t.props.model()},selectedColor:this.bindFn(this.getModelColor),onColorSelected:this.bindFn(this.onColorSelected)}))))},p.prototype.getModelColor=function(){return r.getDisplayColor(this.model)},p.prototype.getPointStyleClass=function(e){switch(e){case c.PointStyle.CROSS:return"dcg-graph-CROSS";case c.PointStyle.OPEN:return"dcg-graph-OPEN";default:return"dcg-graph-POINT"}},p.prototype.getLineStyleClass=function(e){switch(e){case c.LineStyle.DASHED:return"dcg-graph-DASHED";case c.LineStyle.DOTTED:return"dcg-graph-DOTTED";default:return"dcg-graph-SOLID"}},p.prototype.onColorSelected=function(e){this.controller.dispatch({type:"set-tablecolumn-color",tableId:this.tableId,columnId:this.columnId,color:e})},p.prototype.onTogglePoints=function(e){this.controller.dispatch({type:"set-tablecolumn-points",tableId:this.tableId,columnId:this.columnId,bool:e})},p.prototype.onPointStyleSelected=function(e){this.controller.dispatch({type:"set-tablecolumn-pointstyle",tableId:this.tableId,columnId:this.columnId,pointStyle:e})},p.prototype.onToggleLines=function(e){this.controller.dispatch({type:"set-tablecolumn-lines",tableId:this.tableId,columnId:this.columnId,bool:e})},p.prototype.onLineStyleSelected=function(e){this.controller.dispatch({type:"set-tablecolumn-linestyle",tableId:this.tableId,columnId:this.columnId,lineStyle:e})},p.prototype.onToggleDrag=function(){var e=this.columnId,t=this.tableId,n=this.model.dragMode===l.DragMode.NONE?l.DragMode.XY:l.DragMode.NONE;this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:t,columnId:e,dragMode:n})},p.prototype.onDragModeSelected=function(e){var t=this.columnId,n=this.tableId;this.model.dragMode!==e&&this.controller.dispatch({type:"set-tablecolumn-dragmode",tableId:n,columnId:t,dragMode:e})},p);function p(){return null!==s&&s.apply(this,arguments)||this}e.TableColumnMenuView=m});

define('loadcss!expressions/slider-speed-view', function(){});
define('expressions/slider_speed_view',["require","exports","tslib","underscore","lib/aria","dcgview","core/graphing-calc/json/expression","loadcss!./slider-speed-view"],function(require,e,t,r,n,i,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,s=[.05,.1,.15,.2,.35,.5,.75,1,1.5,2,3.5,5,7.5,10,15,20],l=r.min(s),c=r.max(s),d=(a=i.Class,t.__extends(u,a),u.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model()},u.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-slider-speed-container dcg-do-not-blur"),handleEvent:i.const("true")},i.createElement("span",{class:function(){return{"dcg-action-slower":!0,"dcg-disabled":e.isSlowerDisabled()}},onTap:function(){return e.animateSlower()},role:i.const("button"),"aria-label":function(){return e.getSlowerAriaLabel()},tabindex:function(){return e.isSlowerDisabled()?-1:0},"aria-disabled":function(){return e.isSlowerDisabled()}},i.createElement("i",{class:i.const("dcg-icon-show")})),i.createElement("span",{class:i.const("dcg-variable-speed")},this.bindFn(this.computeSpeed),i.const("x")),i.createElement("span",{class:function(){return{"dcg-action-faster":!0,"dcg-disabled":e.isFasterDisabled()}},onTap:function(){return e.animateFaster()},role:i.const("button"),"aria-label":function(){return e.getFasterAriaLabel()},tabindex:function(){return e.isFasterDisabled()?-1:0},"aria-disabled":function(){return e.isFasterDisabled()}},i.createElement("i",{class:i.const("dcg-icon-show")})))},u.prototype.computeSpeed=function(){var e=o.DEFAULT_SLIDER_PERIOD/this.model.slider.animationPeriod;return e=Number(e.toFixed(3))},u.prototype.isSlowerDisabled=function(){return l>=this.computeSpeed()},u.prototype.isFasterDisabled=function(){return c<=this.computeSpeed()},u.prototype.animateSlower=function(){var t=this.computeSpeed(),e=r.filter(s,function(e){return e<t});0!==e.length&&this.setPeriodFromSpeed(r.max(e))},u.prototype.animateFaster=function(){var t=this.computeSpeed(),e=r.filter(s,function(e){return t<e});0!==e.length&&this.setPeriodFromSpeed(r.min(e))},u.prototype.setPeriodFromSpeed=function(e){var t=o.DEFAULT_SLIDER_PERIOD/e;this.controller.dispatch({type:"set-slider-animationperiod",id:this.model.id,animationPeriod:t}),n.alert(this.controller.s("graphing-calculator-narration-slider-animating-at-speed",{speed:e+""}))},u.prototype.getSlowerAriaLabel=function(){return this.controller.s("graphing-calculator-narration-slider-animate-slower")},u.prototype.getFasterAriaLabel=function(){return this.controller.s("graphing-calculator-narration-slider-animate-faster")},u);function u(){return null!==a&&a.apply(this,arguments)||this}e.default=d});

define('loadcss!expressions/slider-options-view', function(){});
define('expressions/slider-options-view',["require","exports","tslib","dcgview","core/types/slider-loop-modes","../lib/tooltip","./slider_speed_view","loadcss!toggle","loadcss!./slider-options-view"],function(require,e,o,n,i,r,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SliderOptionsView=void 0;var t,s=n.Components.For,a=(t=n.Class,o.__extends(c,t),c.prototype.init=function(){this.controller=this.props.controller(),this.model=this.props.model(),this.id=this.model.id},c.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-exp-options-menu dcg-slider-options-view dcg-options-menu")},n.createElement("div",{class:n.const("dcg-triangle")}),n.createElement("div",{class:n.const("dcg-slider-menu")},n.createElement("div",{role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-heading-slider-animation-mode")}},n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-title")},function(){return t.controller.s("graphing-calculator-heading-slider-animation-mode")}),n.createElement(s,{each:this.bindFn(this.getAnimationOptions),key:function(e){return e.key}},n.createElement("div",{class:n.const("dcg-toggle")},function(e){return n.createElement("div",{class:function(){return{"dcg-toggle-option":!0,"dcg-selected-toggle":t.isSelected(e.key)}},role:n.const("button"),tabindex:n.const(0),"aria-label":function(){return e.aria},"aria-pressed":function(){return t.isSelected(e.key)},onTap:function(){return t.props.controller().dispatch({type:"set-slider-loopmode",id:t.props.model().id,loopMode:e.key})}},n.createElement(r.Tooltip,{tooltip:function(){return e.aria},offset:function(){return{top:5}},gravity:t.getAnimationOptionTooltipGravity(e)},n.createElement("i",{class:function(){return i.getSliderIcon(e.key)}})))})))),n.createElement("div",{class:n.const("dcg-slider-menu dcg-slider-speed-menu"),role:n.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-heading-slider-speed")}},n.createElement("div",{role:n.const("heading"),"aria-level":n.const("2"),class:n.const("dcg-title")},function(){return t.controller.s("graphing-calculator-heading-slider-speed")}),n.createElement("div",{class:n.const("dcg-slider-speed-container")},n.createElement(l.default,o.__assign({},this.props)))))},c.prototype.getAnimationOptionTooltipGravity=function(e){return this.getAnimationOptions()[0].key===e.key?this.const("se"):this.const("s")},c.prototype.getAnimationOptions=function(){return[{key:i.SliderLoopMode.LOOP_FORWARD_REVERSE,aria:this.controller.s("graphing-calculator-narration-slider-loop-forwards-and-backwards")},{key:i.SliderLoopMode.LOOP_FORWARD,aria:this.controller.s("graphing-calculator-narration-slider-repeat-one-direction")},{key:i.SliderLoopMode.PLAY_ONCE,aria:this.controller.s("graphing-calculator-narration-slider-play-once")},{key:i.SliderLoopMode.PLAY_INDEFINITELY,aria:this.controller.s("graphing-calculator-narration-slider-play-indefinitely")}]},c.prototype.isSelected=function(e){return this.model.slider.loopMode===e},c);function c(){return null!==t&&t.apply(this,arguments)||this}e.SliderOptionsView=a});

define('loadcss!expressions/item-settings-view', function(){});
define('expressions/item-settings-view',["require","exports","tslib","dcgview","keys","underscore","jquery","./expression_options_view","./image_options_view","./tables/table_column_menu_view","./slider-options-view","lib/animation-frame","loadcss!./item-settings-view"],function(require,t,e,o,i,n,r,s,c,p,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ItemSettingsView=void 0;var d,a=o.Components.Switch,f=':input, [role="textbox"], [tabindex="0"]:visible',m=(d=o.Class,e.__extends(h,d),h.prototype.init=function(){this.controller=this.props.controller()},h.prototype.template=function(){var e=this;return o.createElement(a,{key:this.bindFn(this.getActiveGuid)},function(){var t=e.controller.getOpenItemMenu();return t?"expression"===t.type?o.createElement("div",{class:o.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},o.createElement(s.ExpressionOptionsMenuView,{controller:e.props.controller,model:function(){return t.model}})):"image"===t.type?o.createElement("div",{class:o.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},o.createElement(c.ImageOptionsView,{controller:e.props.controller,model:function(){return t.model}})):"table-column"===t.type?o.createElement("div",{class:o.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},o.createElement(p.TableColumnMenuView,{controller:e.props.controller,model:function(){return t.model}})):"slider"===t.type?o.createElement("div",{class:o.const("dcg-options-menu-container"),didMount:e.bindFn(e.didMountView),didUnmount:e.bindFn(e.didUnmountView)},o.createElement(l.SliderOptionsView,{controller:e.props.controller,model:function(){return t.model}})):t:o.createElement("span",null)})},h.prototype.getActiveGuid=function(){var t=this.controller.getOpenItemMenu();if(t)return t.model.guid},h.prototype.getActiveIcon=function(){var t=this.controller.getOpenItemMenu();if(t)return r(t.icon)},h.prototype.didMountView=function(t){var s=this;this.guid=n.uniqueId("dcg-item-settings-view"),this.openView=t,this.positionMenu(),this.moveFocusIfAppropriate(),r(document).on("keydown."+this.guid,function(t){var e=i.lookup(t);"Esc"===e?(s.focusIcon(),s.hideOptions()):"Tab"!==e||t.altKey||t.ctrlKey||t.metaKey||(t.shiftKey?t.shiftKey&&(s.isIconModelFocused()?(t.preventDefault(),t.stopPropagation(),s.focusLastOption()):s.isFirstOptionViewFocused()?(t.preventDefault(),t.stopPropagation(),s.focusIcon()):s.focusAnywhere()):s.isIconModelFocused()?(t.preventDefault(),t.stopPropagation(),s.focusFirstOption()):s.isLastOptionViewFocused()?(t.preventDefault(),t.stopPropagation(),s.focusIcon()):s.focusAnywhere())}),u.requestAnimationFrame(function(){s.openView&&s.controller.getExppanelSelectorOrThrow().on("scroll."+s.guid,function(){s.hideOptions()})}),r(document).on("dcg-tapstart."+this.guid,function(t){if(s.openView){var e=r(t.target);if(!e.closest(s.getActiveIcon()).length)if(e.closest(s.openView).length){if(!e.is(f))return;var o=s.getDOMTabStops(),i=o.$first,n=o.$last;void 0!==i&&i.is(e)?s.focusFirstOption():void 0!==n&&n.is(e)?s.focusLastOption():t.target.hasAttribute("dataLabelAttributeValue")||"fill-opacity"===t.target.getAttribute("dataLabelAttributeValue")||s.focusAnywhere()}else e.closest(".dcg-keypad,.dcg-show-keypad-container").length||s.hideOptions()}})},h.prototype.didUnmountView=function(){r(document).off("."+this.guid),this.openView=void 0},h.prototype.didUpdate=function(){this.moveFocusIfAppropriate()},h.prototype.moveFocusIfAppropriate=function(){var t=this.getDOMTabStops(),e=t.$first,o=t.$last;void 0!==e&&void 0!==o&&(this.shouldMoveFocusToFirstOption()?e.focus():this.shouldMoveFocusToLastOption()&&o.focus())},h.prototype.open=function(){return!!this.controller.getOpenItemMenu()},h.prototype.hideOptions=function(){this.open()&&this.controller.dispatch({type:"close-item-settings-menu"})},h.prototype.positionMenu=function(){var t,e,o,i,n=this.getActiveIcon();n&&this.openView&&(t=this.controller.getExppanelSelectorOrThrow(),o=(e=n.offset()).top-t.closest(".dcg-container").offset().top,i=e.left-t.closest(".dcg-container").offset().left,r(this.openView).css({top:o+"px",left:i+"px",display:"block"}))},h.prototype.isIconModelFocused=function(){var t=this.controller.getOpenItemMenu();return void 0!==t&&("slider"===t.type?this.controller.isFocusLocationFocused({type:"slider-animation-properties-icon",id:t.model.id}):"image"===t.type?this.controller.isFocusLocationFocused({type:"image-icon",id:t.model.id}):this.controller.isFocusLocationFocused({type:"expression-icon",id:t.model.id}))},h.prototype.focusIcon=function(){var t=this.controller.getOpenItemMenu();t&&("slider"===t.type?this.controller.dispatch({type:"set-focus-location",location:{type:"slider-animation-properties-icon",id:t.model.id}}):"image"===t.type?this.controller.dispatch({type:"set-focus-location",location:{type:"image-icon",id:t.model.id}}):this.controller.dispatch({type:"set-focus-location",location:{type:"expression-icon",id:t.model.id}}))},h.prototype.isFirstOptionViewFocused=function(){var t=this.getDOMTabStops().$first;return void 0!==t&&t.is(":focus")},h.prototype.shouldMoveFocusToFirstOption=function(){var t=this.controller.getOpenItemMenu();return void 0!==t&&!this.isFirstOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:t.model.id,location:"start"})},h.prototype.focusFirstOption=function(){var t=this.controller.getOpenItemMenu();t&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:t.model.id,location:"start"}})},h.prototype.isLastOptionViewFocused=function(){var t=this.getDOMTabStops().$last;return void 0!==t&&t.is(":focus")},h.prototype.shouldMoveFocusToLastOption=function(){var t=this.controller.getOpenItemMenu();return void 0!==t&&!this.isLastOptionViewFocused()&&this.controller.isFocusLocationFocused({type:"expression-menu",id:t.model.id,location:"end"})},h.prototype.focusLastOption=function(){var t=this.controller.getOpenItemMenu();t&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:t.model.id,location:"end"}})},h.prototype.focusAnywhere=function(){var t=this.controller.getOpenItemMenu();t&&this.controller.dispatch({type:"set-focus-location",location:{type:"expression-menu",id:t.model.id,location:"anywhere"}})},h.prototype.getDOMTabStops=function(){if(void 0===this.openView)return{};var t=r(this.openView).find(f);return{$first:t.first(),$last:t.last()}},h);function h(){return null!==d&&d.apply(this,arguments)||this}t.ItemSettingsView=m});

define('loadcss!expressions/expression-search-bar', function(){});
define('expressions/expression-search-bar',["require","exports","tslib","dcgview","../dcgview-helpers/mathquill-view","main/mathquill-operators","loadcss!./expression-search-bar"],function(require,e,t,s,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ExpressionSearchBar=void 0;var n,c=(n=s.Class,t.__extends(i,n),i.prototype.init=function(){this.controller=this.props.controller()},i.prototype.template=function(){var o=this;return s.createElement("div",{class:function(){return{"dcg-expression-search-bar":!0,"dcg-expressions-scrolled":o.props.expsScrolled()}}},s.createElement("div",{class:s.const("dcg-search-mathquill-container")},s.createElement(r.default,{hasError:this.const(!1),getAriaPostLabel:this.const(""),capExpressionSize:this.const(!1),onUserChangedLatex:this.bindFn(this.onChange),latex:function(){return o.controller.getExpressionSearchStr()},getAriaLabel:function(){return"search through expressions"},isFocused:this.bindFn(this.isFocused),config:this.bindFn(this.getMQConfig),onFocusedChanged:this.bindFn(this.onFocusChanged),selectOnFocus:this.const(!0),noFadeout:this.const(!0),onUserPressedKey:function(e,t){if("Esc"===e)o.closeSearch();else if("Enter"===e)o.controller.dispatch({type:"update-expression-search-str",str:o.controller.getExpressionSearchStr()});else{var s=r.default.getFocusedMathquill();if(!s)return;s.keystroke(e,t),o.onChange(s.latex())}}}),s.createElement("i",{class:s.const("dcg-icon-search")}),s.createElement("i",{onTap:function(){return o.closeSearch()},class:s.const("dcg-icon-remove dcg-do-not-blur")})),s.createElement("div",{class:s.const("dcg-search-clear"),tabindex:s.const(0),role:s.const("button"),onTap:function(){return o.onChange("")}},function(){return o.controller.s("graphing-calculator-button-expression-search-clear")}))},i.prototype.closeSearch=function(){this.controller.dispatch({type:"close-expression-search"})},i.prototype.onChange=function(e){this.controller.dispatch({type:"update-expression-search-str",str:e})},i.prototype.onFocusChanged=function(e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"search-expressions"}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"search-expressions"}})},i.prototype.isFocused=function(){var e=this.controller.getFocusLocation();return!!e&&"search-expressions"===e.type},i.prototype.getMQConfig=function(){return{autoOperatorNames:o.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},i);function i(){return null!==n&&n.apply(this,arguments)||this}e.ExpressionSearchBar=c});

define('loadcss!expressions/list-view', function(){});

define('loadcss!expressions', function(){});
define('expressions/list-view',["require","exports","tslib","touchtracking","keys","dcgview","jquery","underscore","lib/conditional_blur","./expression_view","./text_view","./simulation-view","./table-view","./folder-view","./image-view","./shell_view","./drag_container_view","main/data_helpers","./new_expression_view","./expressions-header","main/load-graph-from-link","lib/get-clipboard-data","graphing-calc/models/abstract-item","graphing-calc/models/list","./exp-list-resizer","./item-settings-view","./expression-search-bar","loadcss!./list-view","loadcss!expressions","jquery.handleevent"],function(require,e,t,n,p,o,d,r,a,i,l,s,c,u,f,g,h,m,y,v,E,b,x,D,w,k,P){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var L,S=o.Components,T=S.If,M=S.For,C=S.Switch,F=S.SwitchUnion,I=(L=o.Class,t.__extends(_,L),_.prototype.init=function(){this.controller=this.props.controller()},_.prototype.template=function(){var n=this;return o.createElement("div",{didMount:this.bindFn(this.didMountContainer)},o.createElement("div",{class:o.const("dcg-exppanel-outer"),onDrop:this.bindFn(this.onDrop),style:function(){return n.computeExppanelOuterStyle()}},o.createElement(T,{predicate:function(){return n.controller.isFileDraggedOver()}},function(){return o.createElement("div",{class:o.const("dcg-drop-image")},o.createElement("span",null,function(){return n.controller.s("graphing-calculator-label-drop-image-here")}))}),o.createElement("div",{class:function(){return{"dcg-exppanel-container":!0,"dcg-add-shadow":n.controller.shouldRenderList()}},style:function(){return{transform:n.controller.isListVisible()?void 0:n.controller.isNarrow()?"translate(0, 100%)":"translate(-100%, 0)"}}},o.createElement(T,{predicate:function(){return n.controller.shouldRenderList()}},function(){return o.createElement(v.default,{controller:n.props.controller,expsScrolled:function(){return!!n.exppanel&&0<n.exppanel.scrollTop}})}),o.createElement(T,{predicate:function(){return n.controller.getExpressionSearchOpen()}},function(){return o.createElement(P.ExpressionSearchBar,{controller:n.props.controller,expsScrolled:function(){return!!n.exppanel&&0<n.exppanel.scrollTop}})}),o.createElement(T,{predicate:function(){return n.controller.shouldRenderList()}},function(){return o.createElement("div",{class:function(){return{"dcg-exppanel":!0,"dcg-disable-horizontal-scroll-to-cursor":!0,"dcg-isDragging":n.controller.isDragDropActive(),"dcg-has-background-color":n.controller.hasBackgroundColor()}},style:function(){return{background:n.controller.getBackgroundColor()}},onPaste:n.bindFn(n.onPaste),onTapStart:n.bindFn(n.onExppanelTapstart),didMount:n.bindFn(n.didMountExppanel)},o.createElement("div",{class:o.const("dcg-expressionlist"),role:o.const("complementary"),"aria-label":function(){return n.controller.s("graphing-calculator-narration-expression-list")}},o.createElement(M,{each:function(){return n.controller.getAllItemModels()},key:function(e){return e.guid}},o.createElement("span",{class:o.const("dcg-template-expressioneach")},function(e){return F(function(){return x.getDisplayState(e)},{shell:function(){return n.makeShellViewForModel(e)},render:function(){return n.makeViewForModel(e)},none:function(){}})})),o.createElement(y.default,{controller:function(){return n.props.controller()}}),o.createElement(C,{key:function(){return n.controller.getDraggedItemId()}},function(e){if(e){var t=n.controller.getItemModel(e);return o.createElement(h.default,{controller:n.props.controller},n.makeDragCopyViewForModel(t))}}),o.createElement("div",{class:o.const("dcg-expressions-branding"),style:function(){return{opacity:n.controller.isKeypadOpen()?0:1}}},o.createElement(T,{predicate:function(){return n.controller.canEditOnWeb()}},function(){return o.createElement("span",{role:o.const("link"),tabindex:o.const(0),class:o.const("dcg-edit-branding"),onTap:function(){return n.controller.dispatch({type:"open-on-web"})}},o.createElement("div",{class:o.const("dcg-powered-by"),"aria-label":function(){return n.controller.s("graphing-calculator-narration-edit-graph-on-desmos")}},function(){return n.controller.s("graphing-calculator-button-edit-graph-on-desmos-logo")}),o.createElement("i",{class:o.const("dcg-icon-desmos")}))}),o.createElement(T,{predicate:function(){return!n.controller.canEditOnWeb()}},function(){return o.createElement("span",{class:o.const("dcg-noedit-branding")},o.createElement("div",{class:o.const("dcg-powered-by"),"aria-label":function(){return n.controller.s("graphing-calculator-narration-powered-by-desmos")}},function(){return n.controller.s("graphing-calculator-label-powered-by")}),o.createElement("i",{class:o.const("dcg-icon-desmos")}))}))))})),o.createElement(w.ExpListResizer,{controller:this.props.controller})),o.createElement(k.ItemSettingsView,{controller:this.props.controller}))},_.prototype.makeShellViewForModel=function(e){return o.createElement(g.default,{controller:this.props.controller,model:function(){return e},onDragPending:function(){},isDragCopy:function(){return!1}})},_.prototype.computeExppanelOuterStyle=function(){this.getListBottomAndUpdateLastExpressionPadding();var e=this.controller.computeMajorLayout().list,t=e.top;return 0<e.top&&!this.controller.isListVisible()&&(t-=e.height),{position:"absolute",left:"0px",top:t+"px",width:e.width+"px",height:e.height+"px"}},_.prototype.makeDragCopyViewForModel=function(e){return this.makeViewForModel(e,!0)},_.prototype.makeViewForModel=function(t,e){var n,r=this;if(void 0===e&&(e=!1),"table"===t.type)n=o.createElement(c.default,{controller:this.props.controller,model:function(){return t},onDragPending:function(e){return r.onDragPending(e,t.id)},isDragCopy:function(){return e}});else if("folder"===t.type)n=o.createElement(u.default,{controller:this.props.controller,model:function(){return t},onDragPending:function(e){return r.onDragPending(e,t.id)},isDragCopy:function(){return e}});else if("text"===t.type)n=o.createElement(l.default,{controller:this.props.controller,model:function(){return t},onDragPending:function(e){return r.onDragPending(e,t.id)},isDragCopy:function(){return e}});else if("simulation"===t.type)n=o.createElement(s.default,{controller:this.props.controller,model:function(){return t},onDragPending:function(e){return r.onDragPending(e,t.id)},isDragCopy:function(){return e}});else if("image"===t.type)n=o.createElement(f.default,{controller:this.props.controller,model:function(){return t},onDragPending:function(e){return r.onDragPending(e,t.id)},isDragCopy:function(){return e}});else{if("expression"!==t.type)return;n=o.createElement(i.default,{controller:this.props.controller,model:function(){return t},onDragPending:function(e){return r.onDragPending(e,t.id)},isDragCopy:function(){return e}})}return n},_.prototype.didUnmount=function(){d(document.documentElement).off("."+this.guid)},_.prototype.didMountContainer=function(e){this.node=e,d(document.documentElement).on("keydown."+this.guid,this.bindFn(this.handleKeyDown))},_.prototype.didMountExppanel=function(e){this.exppanel=e},_.prototype.getListBottomAndUpdateLastExpressionPadding=function(){var e=this.controller.getKeypadHeight(),t=this.__listBottom||0;return 0===(this.__listBottom=e)&&0!==t&&n.isTapActive()&&this.padLastExpressionUntilTapEnd(t),e},_.prototype.padLastExpression=function(e){d(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom",e+"px")},_.prototype.unpadLastExpression=function(){d(this.node).find(".dcg-expressionitem.dcg-new-expression").css("margin-bottom","0")},_.prototype.padLastExpressionUntilTapEnd=function(e){var t=this;this.padLastExpression(e),d(document).on("dcg-tap.animating-bottom",function(){t.unpadLastExpression(),d(document).off("dcg-tap.animating-bottom")})},_.prototype.handleKeyDown=function(e){if(!this.controller.inAudioTraceMode()){var t,n=p.lookup(e);if(!this.controller.isInEditListMode()||e.altKey||e.ctrlKey||e.metaKey){if((!document.activeElement||!d.contains(document.body,document.activeElement))&&!d(e.target).closest(this.exppanel).length&&d.contains(document.documentElement,e.target)&&(t=this.controller.getSelectedItem()))switch(n){case p.UP:e.preventDefault(),this.controller.dispatch({type:"select-previous-expression"});break;case p.DOWN:e.preventDefault(),this.controller.dispatch({type:"select-next-expression"});break;case p.ESCAPE:e.preventDefault(),this.controller.dispatch({type:"set-none-selected"});break;case p.RIGHT:e.preventDefault(),t&&("expression"===t.type&&t.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:t.id,adjustment:"up"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:t.id}})):this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"start"}));break;case p.TAB:e.preventDefault(),t&&this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"start"});break;case p.LEFT:e.preventDefault(),t&&("expression"===t.type&&t.sliderExists?(this.controller.dispatch({type:"adjust-slider-by-keyboard",id:t.id,adjustment:"down"}),this.controller.dispatch({type:"set-focus-location",location:{type:"slider-thumb",id:t.id}})):this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"end"}));break;case p.BACKSPACE:e.preventDefault(),t&&this.controller.dispatch({type:"upward-delete-selected-expression"});break;case p.DELETE:e.preventDefault(),t&&this.controller.dispatch({type:"downward-delete-selected-expression"});break;case p.ENTER:e.wasHandled("create-expression-with-keyboard")||(e.preventDefault(),e.handle("create-expression-with-keyboard"),t&&this.controller.dispatch({type:"on-special-key-pressed",key:"Enter"}));break;default:if(e.metaKey||e.ctrlKey||n===p.SHIFT||n===p.SPACEBAR)return;t&&("table"===t.type||this.controller.dispatch({type:"move-focus-to-item",id:t.id,where:"end"}))}}else if(n===p.TAB){var r=this.controller.getItemModelByIndex(0);if(!r)return;var o=this.controller.getFocusLocation();if(!o)return;var i=("readonly-expression"===o.type&&"expression"===r.type||"table-container"===o.type&&"table"===r.type||o.type===r.type)&&o.id===r.id,l={type:"edit-list-toggle"},a=this.controller.isFocusLocationFocused(l);e.shiftKey&&i?(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"set-focus-location",location:l})):!e.shiftKey&&a&&(e.preventDefault(),e.stopPropagation(),this.controller.dispatch({type:"move-focus-to-item",id:r.id,where:"table"===r.type?"container":void 0}))}else if(n===p.UP||n===p.DOWN){if(!(t=this.controller.getSelectedItem()))return;var s=this.controller.getListModel(),c=n===p.UP?D.findPrevSelectableItem(s,t.index):D.findNextSelectableItem(s,t.index);if(!c)return;this.controller.dispatch({type:"move-focus-to-item",id:c.id,where:"table"===c.type?"container":"start"})}}},_.prototype.onDragPending=function(t,n){var r=this;t.preventDefault(),a.default();var o=t.touches[0].clientY,i=o,l=setTimeout(function(){d(document).off(".dragpending"),r.onDragStart(t,n,o,i)},500);d(document).on("dcg-tapmove.dragpending",function(e){i=e.touches[0].clientY,3<Math.abs(i-o)&&(clearTimeout(l),d(document).off(".dragpending"),r.onDragStart(t,n,o,i))}),d(document).on("dcg-tapend.dragpending",function(){clearTimeout(l),d(document).off(".dragpending")})},_.prototype.onDragStart=function(e,t,n,r){1===e.touches.length&&(e.wasHandled("dcg-longhold")||this.controller.dispatch({type:"start-dragdrop",id:t,grabY:n,mouseY:r}))},_.prototype.onExppanelTapstart=function(e){"mouse"!==e.device&&0===d(e.target).closest(".dcg-expressionitem").length&&a.default()},_.prototype.onPaste=function(e){var t=this,n=this.controller.getGraphSettings().config,r=b.default(e);if(r){var o=/^\s*https?:\/\/([a-zA-Z0-9]*\.)?desmos\.com(:[0-9]+)?\/calculator\/./.test(r),i=this.controller.getSelectedItem();if(n.pasteGraphLink&&i&&"folder"===i.type&&o&&""===i.title&&0===this.controller.getNumberOfItemsInFolder(i.id))return e.stopPropagation(),e.preventDefault(),void E.default(this.controller,r,"inject",function(e,t){return t(null,e)});if(!i||"text"!==i.type&&"folder"!==i.type)if(n.pasteGraphLink&&o){e.stopPropagation(),e.preventDefault();var l=n.pasteGraphLinkCallback?n.pasteGraphLinkCallback:function(e,t){return t(null,e)};E.default(this.controller,r,"set-state",l)}else{if(n.pasteTableData){var a=m.parse(r);if(void 0!==a)return e.stopPropagation(),e.preventDefault(),this.controller.dispatch({type:"paste-table",data:a})}var s,c=m.getExpressions(r);void 0===c||(e.stopPropagation(),e.preventDefault(),s=[],1===c.length&&c[0].numberList?this.controller.dispatch({type:"append-number-list",latex:c[0].content}):(c.forEach(function(e){s.push({type:"expression",id:t.controller.generateId(),latex:e.content})}),this.controller.dispatch({type:"insert-several-expressions",expressions:s})))}}},_.prototype.onDrop=function(e){var t;!this.controller.areImagesEnabled()||(t=e.dataTransfer&&e.dataTransfer.files)&&this.controller.dispatch({type:"new-images",files:t})},_);function _(){var e=null!==L&&L.apply(this,arguments)||this;return e.guid=r.uniqueId("listView"),e}e.default=I});
define('graphing-calc/keypads/dcgview-graphing',["require","exports","tslib","dcgview"],function(require,t,e,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r=(s=i.Class,e.__extends(o,s),o.prototype.init=function(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.s=this.controller.s},o);function o(){return null!==s&&s.apply(this,arguments)||this}t.default=r});

define('loadcss!keypad/btn', function(){});
define('keypad/btn',["require","exports","tslib","dcgview","loadcss!./btn"],function(require,t,e,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,a=(r=s.Class,e.__extends(n,r),n.prototype.template=function(){var t=this;return s.createElement("div",{class:function(){return{"dcg-keypad-btn-container":!0,"dcg-keypad-short-btn":"popover-short"===t.props.style(),"dcg-keypad-very-short-btn":"popover-very-short"===t.props.style(),"dcg-disabled":t.isDisabled()}},style:function(){return{"flex-grow":t.getColSpan()}}},s.createElement("span",{role:s.const("button"),class:this.bindFn(this.getClasses),"dcg-command":this.props.command,"aria-label":this.bindFn(this.getAriaLabel),"aria-disabled":this.bindFn(this.isDisabled),onTap:function(){t.isDisabled()||t.props.onTap()}},s.createElement("span",{class:s.const("dcg-keypad-btn-content")},this.children)))},n.prototype.getClasses=function(){var t={"dcg-keypad-btn":!0,"dcg-keypad-btn-active":this.isActive()},e=this.props.style();switch(e){case"default":t["dcg-btn-light-on-gray"]=!0;break;case"highlight":t["dcg-btn-dark-on-gray"]=!0;break;case"popover-short":case"popover-very-short":case"popover":t["dcg-btn-light-gray"]=!0;break;case"blue":t["dcg-btn-short-blue"]=!0;break;case"tall-blue":t["dcg-btn-tall-blue"]=!0;break;default:return e}return t},n.prototype.isActive=function(){return!!this.props.active&&this.props.active()},n.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},n.prototype.getColSpan=function(){return this.props.colspan?this.props.colspan():void 0},n.prototype.isDisabled=function(){return this.props.disabled&&this.props.disabled()},n);function n(){return null!==r&&r.apply(this,arguments)||this}t.default=a});
define('keypad/keys',["require","exports","./btn","dcgview-helpers/static-mathquill-view","dcgview"],function(require,a,c,o,l){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.spacer=a.view=void 0;var e=l.Components,i=e.IfElse,d=e.If;function s(a,e){return void 0===a?l.const(e):"function"==typeof a?a:l.const(a)}function t(r){return function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(r.command||r.typedText||r.keys[0]),ariaLabel:function(){return r.ariaLabelKey?n(r.ariaLabelKey):r.typedText||r.keys[0]},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/type-text",text:r.typedText||r.keys[0]})}},i(function(){return"{"===r.keys[0]||"["===r.keys[0]},{true:function(){return l.createElement("span",{class:l.const("dcg-mq-math-mode"),style:l.const("font-size: 120%")},l.const(r.keys[0]),l.const(""),l.createElement("span",{style:l.const("color: #999")},l.const(r.keys[1])))},false:function(){return l.createElement("span",{class:l.const("dcg-either-or-btn")},l.createElement(o.default,{config:l.const({}),latex:l.const(r.keys[0])}),l.createElement("span",{style:l.const("color: #999")},l.createElement(o.default,{config:l.const({}),latex:l.const(r.keys[1])})))}}))}}function n(r){return function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(r.command||r.typedText||r.keys[1]),ariaLabel:function(){return r.ariaLabelKey?n(r.ariaLabelKey):r.typedText||r.keys[0]},colspan:s(t.colspan,1),style:s(t.style,"default"),onTap:function(){return e({type:"keypad/type-text",text:r.typedText||r.keys[1]})}},i(function(){return"}"===r.keys[1]||"]"===r.keys[1]},{true:function(){return l.createElement("span",{class:l.const("dcg-mq-math-mode"),style:l.const("font-size: 120%")},l.createElement("span",{style:l.const("color: #999")},l.const(r.keys[0])),l.const(""),l.const(r.keys[1]))},false:function(){return l.createElement("span",null,l.createElement("span",{style:l.const("color: #999")},l.createElement(o.default,{config:l.const({}),latex:l.const(r.keys[0])})),l.createElement(o.default,{config:l.const({}),latex:l.const(r.keys[1])}))}}))}}function r(r){return function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(r.command),ariaLabel:function(){return r.ariaLabelKey?n(r.ariaLabelKey):a},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){e({type:"keypad/audio-trace",command:r.command})}},l.createElement(d,{predicate:l.const(void 0!==r.iconClass)},function(){return l.createElement("span",{class:function(){return{"dcg-button-icon":!0,"dcg-icon-only":void 0===r.contentKey}}},l.createElement("i",{class:l.const(r.iconClass)}))}),l.createElement(d,{predicate:l.const(void 0!==r.contentKey)},function(){return l.createElement("span",null,function(){return n(r.contentKey)||a})}))}}function y(r){return function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(r.command||a),ariaLabel:function(){return r.ariaLabelKey?n(r.ariaLabelKey):a},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/type-text",text:r.typedText||a})}},l.createElement(o.default,{config:l.const({}),latex:l.const(r.content||a)}))}}function u(r){return function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(r.command||a),ariaLabel:function(){return r.ariaLabelKey?n(r.ariaLabelKey):a},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/type-text",text:r.typedText||a})}},l.createElement("span",{class:l.const("dcg-mq-math-mode")},l.const(r.content||a)))}}function p(r){return function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return r.ariaLabelKey?n(r.ariaLabelKey):a},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/type-text",text:a+"("})}},l.createElement(o.default,{config:l.const({}),latex:l.const(a)}))}}function k(r){return function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(r.command),ariaLabel:function(){return r.ariaLabelKey?n(r.ariaLabelKey):r.command},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){e({type:"keypad/custom-command",command:r.command})}},l.createElement(o.default,{config:l.const({}),latex:l.const(r.content)}))}}var m={"{":u({ariaLabelKey:"shared-calculator-narration-keypad-key-left-bracket"}),"}":u({ariaLabelKey:"shared-calculator-narration-keypad-key-right-bracket"}),"(":y({ariaLabelKey:"shared-calculator-narration-keypad-key-left-paren"}),")":y({ariaLabelKey:"shared-calculator-narration-keypad-key-right-paren"}),sqrt:y({content:"\\sqrt{}",ariaLabelKey:"shared-calculator-narration-keypad-key-sqrt"}),"/":y({content:"",ariaLabelKey:"shared-calculator-narration-keypad-key-divide"}),"*":y({content:"",ariaLabelKey:"shared-calculator-narration-keypad-key-times"}),"-":y({ariaLabelKey:"shared-calculator-narration-keypad-key-minus"}),"+":y({ariaLabelKey:"shared-calculator-narration-keypad-key-plus"}),".":y({ariaLabelKey:"shared-calculator-narration-keypad-key-decimal"}),ans:function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("shared-calculator-narration-keypad-key-ans")},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/type-text",text:a})}},l.const("ans"))},enter:function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("shared-calculator-narration-keypad-key-enter")},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/press-key",key:"Enter"})}},l.createElement("i",{class:l.const("dcg-icon-arrow-enter")}))},shift:function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("shared-calculator-narration-keypad-key-shift")},colspan:s(t.colspan,1),style:function(){return t.style||"default"},active:s(t.active,!1),onTap:function(){return e({type:"keypad/shift"})}},l.createElement("i",{class:l.const("dcg-icon-shift")}))},left:function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("shared-calculator-narration-keypad-key-left-arrow")},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/press-key",key:"Left"})}},l.createElement("i",{class:l.const("dcg-icon-arrow-left")}))},right:function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("shared-calculator-narration-keypad-key-right-arrow")},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/press-key",key:"Right"})}},l.createElement("i",{class:l.const("dcg-icon-arrow-right")}))},123:function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("shared-calculator-narration-keypad-key-toggle-numbers")},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/123"})}},l.const("1 2 3"))},ABC:function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("shared-calculator-narration-keypad-key-toggle-letters")},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/abc"})}},l.const("A B C"))},Audio:function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("shared-calculator-narration-keypad-key-toggle-audio-trace")},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"on"})}},l.createElement("i",{class:l.const("dcg-icon-volume")}))},backspace:function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("shared-calculator-narration-keypad-key-backspace")},colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/press-key",key:"Backspace"})}},l.createElement("i",{class:l.const("dcg-icon-delete")}))},pi:y({content:"\\pi",ariaLabelKey:"shared-calculator-narration-keypad-key-pi"}),alpha:y({content:"\\alpha",ariaLabelKey:"shared-calculator-narration-keypad-key-alpha"}),beta:y({content:"\\beta",ariaLabelKey:"shared-calculator-narration-keypad-key-beta"}),theta:y({content:"\\theta",ariaLabelKey:"shared-calculator-narration-keypad-key-theta"}),tau:y({content:"\\tau",ariaLabelKey:"shared-calculator-narration-keypad-key-tau"}),"a^2":k({command:"a^2",content:"a^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"a^3":k({command:"a^3",content:"a^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"x^3":k({command:"a^3",content:"x^3",ariaLabelKey:"shared-calculator-narration-keypad-key-cubed"}),"a^b":y({content:"a^b",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),a_b:y({content:"a_b",typedText:"_",ariaLabelKey:"shared-calculator-narration-keypad-key-subscript"}),"a/b":k({content:"\\frac{a}{b}",command:"a/b",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),"x^2":k({command:"a^2",content:"x^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"x^y":y({content:"x^y",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-superscript"}),"x/y":y({content:"\\frac{x}{y}",typedText:"/",ariaLabelKey:"shared-calculator-narration-keypad-key-fraction"}),nthroot:k({command:"nthroot",content:"\\sqrt[n]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-nthroot"}),ythroot:k({command:"nthroot",content:"\\sqrt[y]{}",ariaLabelKey:"shared-calculator-narration-keypad-key-ythroot"}),sin:p({ariaLabelKey:"shared-calculator-narration-keypad-key-sin"}),cos:p({ariaLabelKey:"shared-calculator-narration-keypad-key-cos"}),tan:p({ariaLabelKey:"shared-calculator-narration-keypad-key-tan"}),sec:p({ariaLabelKey:"shared-calculator-narration-keypad-key-sec"}),csc:p({ariaLabelKey:"shared-calculator-narration-keypad-key-csc"}),cot:p({ariaLabelKey:"shared-calculator-narration-keypad-key-cot"}),sinh:p({ariaLabelKey:"shared-calculator-narration-keypad-key-sinh"}),cosh:p({ariaLabelKey:"shared-calculator-narration-keypad-key-cosh"}),tanh:p({ariaLabelKey:"shared-calculator-narration-keypad-key-tanh"}),sech:p({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),csch:p({ariaLabelKey:"shared-calculator-narration-keypad-key-csch"}),coth:p({ariaLabelKey:"shared-calculator-narration-keypad-key-coth"}),arcsin:k({command:"arcsin",content:"sin^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsin"}),arccos:k({command:"arccos",content:"cos^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccos"}),arctan:k({command:"arctan",content:"tan^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arctan"}),arccsc:k({command:"arccsc",content:"csc^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccsc"}),arcsec:k({command:"arcsec",content:"sec^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arcsec"}),arccot:k({command:"arccot",content:"cot^{-1}",ariaLabelKey:"shared-calculator-narration-keypad-key-arccot"}),"|a|":y({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"|x|":y({typedText:"|",ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),ln:p({ariaLabelKey:"shared-calculator-narration-keypad-key-ln"}),log:p({ariaLabelKey:"shared-calculator-narration-keypad-key-log"}),quantile:p({ariaLabelKey:"shared-calculator-narration-keypad-key-quantile"}),quartile:p({ariaLabelKey:"shared-calculator-narration-keypad-key-quartile"}),var:p({}),varp:p({}),nCr:p({}),loga:k({command:"loga",content:"log_a",ariaLabelKey:"shared-calculator-narration-keypad-key-loga"}),stdev:p({ariaLabelKey:"shared-calculator-narration-keypad-key-stdev"}),mad:p({}),nPr:p({}),total:p({}),length:p({}),min:p({}),max:p({}),cov:p({ariaLabelKey:"shared-calculator-narration-keypad-key-cov"}),corr:p({ariaLabelKey:"shared-calculator-narration-keypad-key-corr"}),spearman:p({ariaLabelKey:"shared-calculator-narration-keypad-key-spearman"}),stats:p({ariaLabelKey:"shared-calculator-narration-keypad-key-stats"}),polygon:p({ariaLabelKey:"shared-calculator-narration-keypad-key-polygon"}),distance:p({ariaLabelKey:"shared-calculator-narration-keypad-key-distance"}),midpoint:p({ariaLabelKey:"shared-calculator-narration-keypad-key-midpoint"}),mean:p({ariaLabelKey:"shared-calculator-narration-keypad-key-mean"}),stdevp:p({ariaLabelKey:"shared-calculator-narration-keypad-key-stdevp"}),mod:p({}),"e^x":y({typedText:"e^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),"10^n":y({content:"\\times10^{n}",typedText:"*10^",ariaLabelKey:"shared-calculator-narration-keypad-key-10-n"}),"a^{-1}":y({typedText:"^-1",ariaLabelKey:"shared-calculator-narration-keypad-key-reciprocal"}),sum:y({content:"\\sum",ariaLabelKey:"shared-calculator-narration-keypad-key-sum"}),prod:y({content:"\\prod",ariaLabelKey:"shared-calculator-narration-keypad-key-product"}),floor:p({ariaLabelKey:"shared-calculator-narration-keypad-key-floor"}),ceil:p({ariaLabelKey:"shared-calculator-narration-keypad-key-ceil"}),round:p({ariaLabelKey:"shared-calculator-narration-keypad-key-round"}),abs:p({ariaLabelKey:"shared-calculator-narration-keypad-key-abs"}),"!":y({ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),"n!":y({typedText:"!",ariaLabelKey:"shared-calculator-narration-keypad-key-factorial"}),median:p({ariaLabelKey:"shared-calculator-narration-keypad-key-median"}),lcm:p({}),gcd:p({}),gcf:p({}),ddx:k({command:"ddx",content:"\\frac{d}{dx}"}),int:y({content:"\\int",ariaLabelKey:"shared-calculator-narration-keypad-key-int"}),"%":y({content:"\\%",ariaLabelKey:"shared-calculator-narration-keypad-key-percent-of"}),exp:y({}),sign:p({}),normaldist:p({ariaLabelKey:"shared-calculator-narration-keypad-key-normaldist"}),poissondist:p({ariaLabelKey:"shared-calculator-narration-keypad-key-poissondist"}),binomialdist:p({ariaLabelKey:"shared-calculator-narration-keypad-key-binomialdist"}),uniformdist:p({ariaLabelKey:"shared-calculator-narration-keypad-key-uniformdist"}),erf:p({ariaLabelKey:"shared-calculator-narration-keypad-key-erf"}),histogram:p({ariaLabelKey:"shared-calculator-narration-keypad-key-histogram"}),boxplot:p({ariaLabelKey:"shared-calculator-narration-keypad-key-boxplot"}),dotplot:p({ariaLabelKey:"shared-calculator-narration-keypad-key-dotplot"}),tscore:p({ariaLabelKey:"shared-calculator-narration-keypad-key-tscore"}),ittest:p({ariaLabelKey:"shared-calculator-narration-keypad-key-ittest"}),ttest:p({ariaLabelKey:"shared-calculator-narration-keypad-key-ttest"}),tdist:p({ariaLabelKey:"shared-calculator-narration-keypad-key-tdist"}),pdf:p({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),cdf:p({ariaLabelKey:"shared-calculator-narration-keypad-key-pdf"}),random:p({ariaLabelKey:"shared-calculator-narration-keypad-key-random"}),inversecdf:p({ariaLabelKey:"shared-calculator-narration-keypad-key-inversecdf"}),sort:p({}),shuffle:p({}),join:p({}),"A^-1":k({command:"A^-1",content:"A^{-1}",ariaLabelKey:"matrix-calculator-narration-keypad-key-inverse"}),"A^T":k({command:"A^T",content:"A^T",ariaLabelKey:"matrix-calculator-narration-keypad-key-transpose"}),"A^2":k({command:"A^2",content:"A^2",ariaLabelKey:"shared-calculator-narration-keypad-key-squared"}),"A^n":y({content:"A^n",typedText:"^",ariaLabelKey:"shared-calculator-narration-keypad-key-exp"}),det:p({ariaLabelKey:"matrix-calculator-narration-keypad-key-det"}),trace:p({ariaLabelKey:"matrix-calculator-narration-keypad-key-trace"}),rref:p({ariaLabelKey:"matrix-calculator-narration-keypad-key-rref"}),a:y({}),b:y({}),c:y({}),d:y({}),e:y({}),f:y({}),g:y({}),h:y({}),i:y({}),j:y({}),k:y({}),l:y({}),m:y({}),n:y({}),o:y({}),p:y({}),q:y({}),r:y({}),s:y({}),t:y({}),u:y({}),v:y({}),w:y({}),x:y({}),boldX:y({content:"x",typedText:"x"}),y:y({}),boldY:y({content:"y",typedText:"y"}),z:y({}),A:y({}),B:y({}),C:y({}),D:y({}),E:y({}),F:y({}),G:y({}),H:y({}),I:y({}),J:y({}),K:y({}),L:y({}),M:y({}),N:y({}),O:y({}),P:y({}),Q:y({}),R:y({}),S:y({}),T:y({}),U:y({}),V:y({}),W:y({}),X:y({}),Y:y({}),Z:y({}),0:y({}),1:y({}),2:y({}),3:y({}),4:y({}),5:y({}),6:y({}),7:y({}),8:y({}),9:y({}),",":y({}),"=":y({}),"[":y({}),"]":y({}),"{}_left":t({keys:["{","}"]}),"{}_right":n({keys:["{","}"]}),"()_left":t({keys:["(",")"]}),"()_right":n({keys:["(",")"]}),"[]_left":t({keys:["[","]"]}),"[]_right":n({keys:["[","]"]}),",'_left":t({keys:[",",""]}),",'_right":n({keys:[",",""],typedText:"'"}),'"':y({}),"'":y({}),"~":y({}),":":y({}),">":y({}),"<":y({}),">=":y({content:"\\ge"}),"<=":y({content:"\\le"}),"!%_left":t({keys:["!","{}^{%}"]}),"!%_right":n({keys:["!","{}^{%}"],typedText:"%"}),"~:_left":t({keys:["~","{}^{:}"]}),"~:_right":n({keys:["~","{}^{:}"],typedText:":"}),"audio-trace-off":r({contentKey:"graphing-calculator-button-keypad-audio-trace-off",command:"off"}),"volume-down":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-volume-down")},disabled:s(t.disabled,!1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"volume-down"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-volume-down")})))},"volume-up":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-volume-up")},disabled:s(t.disabled,!1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"volume-up"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-volume-up")})))},"speed-down":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-speed-down")},disabled:s(t.disabled,!1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"speed-down"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-hide")})))},"speed-up":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{command:l.const(a),ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-speed-up")},disabled:s(t.disabled,!1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"speed-up"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-show")})))},"previous-point":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-previous-point")},command:l.const(a),disabled:s(t.disabled,!1),colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"previous-point"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-thin-arrow-left")})))},"next-point":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-next-point")},command:l.const(a),disabled:s(t.disabled,!1),colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"next-point"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-thin-arrow-right")})))},"previous-poi":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-previous-poi")},command:l.const(a),disabled:s(t.disabled,!1),colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"previous-poi"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-hide")})))},"next-poi":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-next-poi")},command:l.const(a),disabled:s(t.disabled,!1),colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"next-poi"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-show")})))},"previous-curve":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-previous-curve")},command:l.const(a),disabled:s(t.disabled,!1),colspan:s(t.colspan,1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"previous-curve"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-caret-up")})))},"next-curve":function(a,e,t,n){return void 0===t&&(t={}),l.createElement(c.default,{ariaLabel:function(){return n("graphing-calculator-narration-keypad-key-next-curve")},command:l.const(a),disabled:s(t.disabled,!1),style:function(){return t.style||"default"},onTap:function(){return e({type:"keypad/audio-trace",command:"next-curve"})}},l.createElement("span",{class:l.const("dcg-button-icon dcg-icon-only")},l.createElement("i",{class:l.const("dcg-icon-caret-down")})))},"describe-point":r({contentKey:"graphing-calculator-button-keypad-describe-point",command:"describe-point"}),"describe-curve":r({contentKey:"graphing-calculator-button-keypad-describe-curve",command:"describe-curve"})};a.view=function(a,e,t){void 0===t&&(t={});var n=a.dispatch;return m[e](e,n,t,a.s)},a.spacer=function(a){return void 0===a&&(a=1),l.createElement("div",{style:l.const("flex-grow:"+a)})}});
define('keypad/dcgview-keypad',["require","exports","tslib","dcgview"],function(require,e,t,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,n=(r=i.Class,t.__extends(o,r),o.prototype.init=function(){this.controller=this.props.controller()},o);function o(){return null!==r&&r.apply(this,arguments)||this}e.default=n});

define('loadcss!keypad/keypad', function(){});
define('keypad/keypad',["require","exports","tslib","dcgview","./dcgview-keypad","loadcss!./keypad"],function(require,e,t,d,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,c=(n=i.default,t.__extends(r,n),r.prototype.template=function(){return d.createElement("div",{class:d.const("dcg-basic-keypad dcg-do-not-blur")},this.children)},r);function r(){return null!==n&&n.apply(this,arguments)||this}e.default=c});

define('loadcss!keypad/row', function(){});
define('keypad/row',["require","exports","tslib","dcgview","loadcss!./row"],function(require,e,t,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,n=(s=r.Class,t.__extends(i,s),i.prototype.template=function(){return r.createElement("div",{class:r.const("dcg-keypad-row")},this.children)},i);function i(){return null!==s&&s.apply(this,arguments)||this}e.default=n});
define('graphing-calc/keypads/qwerty',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,h,l,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w,a=(w=s.default,i.__extends(n,w),n.prototype.template=function(){return t.createElement(l.default,{controller:this.props.controller},t.createElement(v.default,null,h.view(this,"q"),h.view(this,"w"),h.view(this,"e"),h.view(this,"r"),h.view(this,"t"),h.view(this,"y"),h.view(this,"u"),h.view(this,"i"),h.view(this,"o"),h.view(this,"p")),t.createElement(v.default,null,h.view(this,"a"),h.view(this,"s"),h.view(this,"d"),h.view(this,"f"),h.view(this,"g"),h.view(this,"h"),h.view(this,"j"),h.view(this,"k"),h.view(this,"l"),h.view(this,"theta")),t.createElement(v.default,null,h.view(this,"shift",{colspan:1.364,style:"highlight"}),h.spacer(.136),h.view(this,"z"),h.view(this,"x"),h.view(this,"c"),h.view(this,"v"),h.view(this,"b"),h.view(this,"n"),h.view(this,"m"),h.spacer(.136),h.view(this,"backspace",{colspan:1.364,style:"highlight"})),t.createElement(v.default,null,h.view(this,"123",{colspan:1.818,style:"highlight"}),h.spacer(.182),h.view(this,"a_b"),h.view(this,"!%_left"),h.view(this,"[]_left"),h.view(this,"{}_left"),h.view(this,"~:_left"),h.view(this,",'_left"),h.spacer(.182),h.view(this,"enter",{colspan:1.818,style:"blue"})))},n);function n(){return null!==w&&w.apply(this,arguments)||this}e.default=a});
define('graphing-calc/keypads/qwerty-capital',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,h,l,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w,a=(w=s.default,i.__extends(r,w),r.prototype.template=function(){return t.createElement(l.default,{controller:this.props.controller},t.createElement(v.default,null,h.view(this,"Q"),h.view(this,"W"),h.view(this,"E"),h.view(this,"R"),h.view(this,"T"),h.view(this,"Y"),h.view(this,"U"),h.view(this,"I"),h.view(this,"O"),h.view(this,"P")),t.createElement(v.default,null,h.view(this,"A"),h.view(this,"S"),h.view(this,"D"),h.view(this,"F"),h.view(this,"G"),h.view(this,"H"),h.view(this,"J"),h.view(this,"K"),h.view(this,"L"),h.view(this,"tau")),t.createElement(v.default,null,h.view(this,"shift",{colspan:1.364,active:!0,style:"highlight"}),h.spacer(.136),h.view(this,"Z"),h.view(this,"X"),h.view(this,"C"),h.view(this,"V"),h.view(this,"B"),h.view(this,"N"),h.view(this,"M"),h.spacer(.136),h.view(this,"backspace",{colspan:1.364,style:"highlight"})),t.createElement(v.default,null,h.view(this,"123",{colspan:1.818,style:"highlight"}),h.spacer(.182),h.view(this,"a^b"),h.view(this,"!%_right"),h.view(this,"[]_right"),h.view(this,"{}_right"),h.view(this,"~:_right"),h.view(this,",'_right"),h.spacer(.182),h.view(this,"enter",{colspan:1.818,style:"blue"})))},r);function r(){return null!==w&&w.apply(this,arguments)||this}e.default=a});
define('graphing-calc/keypads/numbers',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row","keypad/btn"],function(require,t,e,i,n,s,l,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var h,c=(h=n.default,e.__extends(o,h),o.prototype.template=function(){var t=this;return i.createElement(l.default,{controller:this.props.controller},i.createElement(r.default,null,s.view(this,"boldX"),s.view(this,"boldY"),s.view(this,"a^2"),s.view(this,"a^b"),s.spacer(.5),s.view(this,"7",{style:"highlight"}),s.view(this,"8",{style:"highlight"}),s.view(this,"9",{style:"highlight"}),s.view(this,"/"),s.spacer(.5),i.createElement(a.default,{command:this.const("functions"),ariaLabel:function(){return t.controller.s("graphing-calculator-narration-functions")},colspan:this.const(2),style:this.const("highlight"),active:function(){return t.controller.isKeypadFunctionsPopoverOpen()},onTap:function(){return t.dispatch({type:"keypad/functions"})}},this.bindFn(this.getFuncsBtnText))),i.createElement(r.default,null,s.view(this,"("),s.view(this,")"),s.view(this,"<"),s.view(this,">"),s.spacer(.5),s.view(this,"4",{style:"highlight"}),s.view(this,"5",{style:"highlight"}),s.view(this,"6",{style:"highlight"}),s.view(this,"*"),s.spacer(.5),s.view(this,"left",{style:"highlight"}),s.view(this,"right",{style:"highlight"})),i.createElement(r.default,null,s.view(this,"|a|"),s.view(this,","),s.view(this,"<="),s.view(this,">="),s.spacer(.5),s.view(this,"1",{style:"highlight"}),s.view(this,"2",{style:"highlight"}),s.view(this,"3",{style:"highlight"}),s.view(this,"-"),s.spacer(1),s.view(this,"backspace",{colspan:1.5,style:"highlight"})),i.createElement(r.default,null,i.createElement("div",{class:i.const("dcg-abc-audio-container")},i.createElement(a.default,{command:i.const("ABC"),colspan:this.const(1),ariaLabel:function(){return t.controller.s("graphing-calculator-narration-toggle-letters")},style:this.const("highlight"),onTap:function(){t.dispatch({type:"keypad/abc"})}},function(){return t.controller.getLayoutMeasurements().width<=600?t.controller.raw("ABC"):t.controller.raw("A B C")}),i.createElement(a.default,{command:i.const("Audio"),disabled:function(){return!t.controller.canAudioTrace()},ariaLabel:function(){return t.controller.s("graphing-calculator-narration-toggle-audio-trace")},colspan:this.const(1),style:function(){return"highlight"},onTap:function(){return t.dispatch({type:"keypad/audio-trace",command:"on"})}},i.createElement("i",{class:i.const("dcg-icon-volume")}))),s.view(this,"sqrt"),s.view(this,"pi"),s.spacer(.5),s.view(this,"0",{style:"highlight"}),s.view(this,".",{style:"highlight"}),s.view(this,"="),s.view(this,"+"),s.spacer(.5),s.view(this,"enter",{colspan:2,style:"blue"})))},o.prototype.getFuncsBtnText=function(){return this.controller.isNarrow()?this.controller.s("graphing-calculator-button-funcs"):this.controller.s("graphing-calculator-button-functions")},o);function o(){return null!==h&&h.apply(this,arguments)||this}t.default=c});
define('graphing-calc/keypads/letters',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,h,l,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w,a=(w=s.default,i.__extends(n,w),n.prototype.template=function(){return t.createElement(l.default,{controller:this.props.controller},t.createElement(v.default,null,h.view(this,"a"),h.view(this,"b"),h.view(this,"c"),h.view(this,"d"),h.view(this,"e"),h.view(this,"f"),h.view(this,"g"),h.view(this,"h"),h.view(this,"i"),h.view(this,"j")),t.createElement(v.default,null,h.view(this,"k"),h.view(this,"l"),h.view(this,"m"),h.view(this,"n"),h.view(this,"o"),h.view(this,"p"),h.view(this,"q"),h.view(this,"r"),h.view(this,"s"),h.view(this,"t")),t.createElement(v.default,null,h.view(this,"shift",{style:"highlight"}),h.view(this,"u"),h.view(this,"v"),h.view(this,"w"),h.view(this,"x"),h.view(this,"y"),h.view(this,"z"),h.view(this,"theta"),h.view(this,"backspace",{colspan:2,style:"highlight"})),t.createElement(v.default,null,h.view(this,"123",{colspan:2,style:"highlight"}),h.view(this,"a_b"),h.view(this,"!%_left"),h.view(this,"[]_left"),h.view(this,"{}_left"),h.view(this,"~:_left"),h.view(this,",'_left"),h.view(this,"enter",{colspan:2,style:"blue"})))},n);function n(){return null!==w&&w.apply(this,arguments)||this}e.default=a});
define('graphing-calc/keypads/letters-capital',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,h,l,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w,r=(w=s.default,i.__extends(a,w),a.prototype.template=function(){return t.createElement(l.default,{controller:this.props.controller},t.createElement(v.default,null,h.view(this,"A"),h.view(this,"B"),h.view(this,"C"),h.view(this,"D"),h.view(this,"E"),h.view(this,"F"),h.view(this,"G"),h.view(this,"H"),h.view(this,"I"),h.view(this,"J")),t.createElement(v.default,null,h.view(this,"K"),h.view(this,"L"),h.view(this,"M"),h.view(this,"N"),h.view(this,"O"),h.view(this,"P"),h.view(this,"Q"),h.view(this,"R"),h.view(this,"S"),h.view(this,"T")),t.createElement(v.default,null,h.view(this,"shift",{style:"highlight"}),h.view(this,"U"),h.view(this,"V"),h.view(this,"W"),h.view(this,"X"),h.view(this,"Y"),h.view(this,"Z"),h.view(this,"tau"),h.view(this,"backspace",{colspan:2,style:"highlight"})),t.createElement(v.default,null,h.view(this,"123",{colspan:2,style:"highlight"}),h.view(this,"a^b"),h.view(this,"!%_right"),h.view(this,"[]_right"),h.view(this,"{}_right"),h.view(this,"~:_right"),h.view(this,",'_right"),h.view(this,"enter",{colspan:2,style:"blue"})))},a);function a(){return null!==w&&w.apply(this,arguments)||this}e.default=r});
define('core/math/poi-type',["require","exports"],function(require,E){"use strict";Object.defineProperty(E,"__esModule",{value:!0}),E.LABEL=E.TRACE=E.DEFINITION=E.EXTREMUM=E.INTERCEPT=E.ZERO=E.INTERSECTION=void 0,E.INTERSECTION=1001,E.ZERO=1002,E.INTERCEPT=1003,E.EXTREMUM=1004,E.DEFINITION=1006,E.TRACE=1007,E.LABEL=1008});
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define('base64',[],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).base64js=e()}(function(){return function f(u,i,a){function d(t,e){if(!i[t]){if(!u[t]){var r="function"==typeof require&&require;if(!e&&r)return r(t,!0);if(c)return c(t,!0);var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}var o=i[t]={exports:{}};u[t][0].call(o.exports,function(e){var r=u[t][1][e];return d(r||e)},o,o.exports,f,u,i,a)}return i[t].exports}for(var c="function"==typeof require&&require,e=0;e<a.length;e++)d(a[e]);return d}({"/":[function(require,e,r){"use strict";r.byteLength=function(e){return 3*e.length/4-h(e)},r.toByteArray=function(e){var r,t,n,o,f,u=e.length;o=h(e),f=new c(3*u/4-o),t=0<o?u-4:u;var i=0;for(r=0;r<t;r+=4,0)n=d[e.charCodeAt(r)]<<18|d[e.charCodeAt(r+1)]<<12|d[e.charCodeAt(r+2)]<<6|d[e.charCodeAt(r+3)],f[i++]=n>>16&255,f[i++]=n>>8&255,f[i++]=255&n;2===o?(n=d[e.charCodeAt(r)]<<2|d[e.charCodeAt(r+1)]>>4,f[i++]=255&n):1===o&&(n=d[e.charCodeAt(r)]<<10|d[e.charCodeAt(r+1)]<<4|d[e.charCodeAt(r+2)]>>2,f[i++]=n>>8&255,f[i++]=255&n);return f},r.fromByteArray=function(e){for(var r,t=e.length,n=t%3,o="",f=[],u=0,i=t-n;u<i;u+=16383)f.push(function(e,r,t){for(var n,o=[],f=r;f<t;f+=3)n=(e[f]<<16)+(e[f+1]<<8)+e[f+2],o.push(function(e){return a[e>>18&63]+a[e>>12&63]+a[e>>6&63]+a[63&e]}(n));return o.join("")}(e,u,i<u+16383?i:u+16383));1==n?(r=e[t-1],o+=a[r>>2],o+=a[r<<4&63],o+="=="):2==n&&(r=(e[t-2]<<8)+e[t-1],o+=a[r>>10],o+=a[r>>4&63],o+=a[r<<2&63],o+="=");return f.push(o),f.join("")};for(var a=[],d=[],c="undefined"!=typeof Uint8Array?Uint8Array:Array,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=0,o=t.length;n<o;++n)a[n]=t[n],d[t.charCodeAt(n)]=n;function h(e){var r=e.length;if(0<r%4)throw new Error("Invalid string. Length must be a multiple of 4");return"="===e[r-2]?2:"="===e[r-1]?1:0}d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},{}]},{},[])("/")});
define('bin',["base64"],function(e){"use strict";var a={};return{load:function(e,n,r,i){var o,t,s=n.toUrl(e);i.isBuild?(o=require.nodeRequire("fs"),a[e]=o.readFileSync(s).toString("base64"),r()):((t=new XMLHttpRequest).open("GET",s,!0),t.responseType="arraybuffer",t.onload=function(){r(t.response)},t.send())},write:function(e,n,r,i){n in a?r("define('"+e+"!"+n+"', ['base64'], function (base64) {  return base64.toByteArray('"+a[n]+"').buffer;});"):console.log("ERROR - failed to find file "+n+" in buildMap")}}});

define('bin!graphing/poi.mp3', ['base64'], function (base64) {  return base64.toByteArray('//tQxAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAAIAAAHVwAgICAgICAgICAgICBAQEBAQEBAQEBAQEBgYGBgYGBgYGBgYGBggICAgICAgICAgICAoKCgoKCgoKCgoKCgoMDAwMDAwMDAwMDAwODg4ODg4ODg4ODg4OD///////////////8AAAA5TEFNRTMuOThyAaUAAAAALmcAABRAJAiwQgAAQAAAB1cctrbdAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMQAAAjsKyK0YYABp52xtx8wAgAgBd34IAhAgnsECEe7QIAAgsPxACDgcBAEHQfD/g+D4PggCAIf///ghLny4Pg+D5+sHz/wf+XPwfB8H3iMHwfwffUCYPvz/Y7Hg/H4/H4/H4HAwADcoDwAP7XfuAFtXrhzjsjOXP8iCYM4IBVoH2DGAhQR2hm5vikA2IVEPX9nQaITi6IiLCKX/fxcg/DdGmS5BP7fIGQ0hw7DQi5Q//8midImXygdJ0tlz/1NAgXIANV6MA2Vy2y27jv/+1LEBIALOHOTvGGAMXWhbnTxGZ+LOa2FNMsDtj9/jUmPqqqARrNvlVjDDoGZqq0T11A0DVqeEnlQk8q4sVEp0FcqdxLoEJ0RPYWvIlQkbGA0Anw6VJJgqRKw1NJaAXkR4ag0/FwCCABbbdbJA0fzVgdvgvu5Px6Rwiv3VllZVDREqmWntLyBDka3sz951iTve+ddHP0/M3P/+ydU4zbqOZOeop5jfu1kwk8VezPeGc1hRMbWrJNv6SO/fH0Mc15KYvKqAAAAdrdsrbBDuBpp4v/7UsQGgguVE2ekjNP5aSBo6YSNgKAQUoCZEBJK8q73G/nhJFFmLY5dNc4b7gjBRyEs5yjJokY9TBoU/pXQBglyNjeiA87V8vkzaw019YTu2fxY0t6gteLMI37f9fYw7UVnWoE4NJOSpQBu3GfVAIVACgw+IikZZAnB7UKlLGnha4PDbIhsBhk4RYmlE2hYZ8NrQ5HnyEUvZxDyVG1hM33ZZH0OlrJV5///3/51qTGtJgxhREVLEfoO1w6686eRAAAAUicksbA1qegZCe2AuEgJ//tSxAkCDF0XSaw8ailyn+l1h4w1BvVY04S56fYY5nGkBZHMGLBjHDUMlORG4wcCT9R6RB+3vM8jVMU1hmlOoXIOMKqotE2HxWYNJq/7EZ2l63NJ+Z2aTA4Yq+7t0PhOxCz9WP1mA3DJZZGDkRfq+qFAGwhwHUAVqBfDiMUlypaMWApR1VoWLChfUpJzkBDMCTf85UZr6jyHa1psZnTS5iKatTVKcX/Ker9zMvM1T0okGyiQcreJbU1tc+Yj/ms3395FBIADkjlkjbAZNdiwgRD/+1LEBwAL8Tdbp6Rh+XmT6XWHjCx5U4sTCtlUidNtS9I7oUx7oxdIZlOghkIQYzB0vxtMs6QgCg4WMVakQMM5HRfrsdIEftM0yfOHnNGkiPRMoWCKSsxsChat8/vYw4c4t+CMMB5AAAAXZrftWiEVdbSgnURZoWvK2KhK9GfCkIGnQKxIqbYJ0JCNFJ3St1wuUNRLW4Kw5VhLVGrmgYKhhRe1qzzC7SqFFyjJlIqXcPD6gw//epZ9bwQFw+s+rdVAFtzl0AAAA3I3JK0QJxtCHv/7UsQGAApAM0WssGFpSCKqNYMMvgZph6CwIhKEt0yEiMwFKpnDBBajVc5jbTM7KayRt3I43h8Ag05kd9AtqO0bItmf/+Aevzf7dx28sK0hvP//3/izNwf1pfEAgANutuOJACSqWvuW+SKNLQSpOQKsrX3XxnZxy2Rus0Q1irPy9Mkg4kZGJFRQUax4R+jsACwavqYd2bmRX/6VnKrLk2Z2VGYwQNCIEasJh7/oBScAAMtBNgBWssKw0uCAgKkVpJirpZyBklUCwqaSIkW6BgIY//tSxBIDSYw3Km0kSoEzi9KAliSw9QNAydBqoFQVEQNBwiJYiBWdDqxiwVBUGqg6JgaBoGj3//////huVcFQsIRoPjBXLBGA8AkCwOhcD4KAmFAtEYcR6E8gD2OAXJ2N//uSJVZVJNRdh0gkLCwuKioqz4sLC3//////4sLC31ioqKpAoqKirOgFqkxBTUUzLjk4LjKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqr/+1LEIwPAAAGkAAAAIAAANIAAAASqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqg==').buffer;});
define('graphing/tonegenerator',["require","exports","bin!./poi.mp3","browser","lib/animation-frame","bugsnag","core/types/graphmode","graphing/clipping"],function(require,e,n,t,M,i,N,x){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getReportedBranch=e.getFirstPlayableBranchIndex=e.canPlayBranch=e.canPlaySketch=void 0;var y=.0015,v=125,C=330,b=2e3,a=(o.prototype.suspend=function(){this.playbackSupported&&this.audioCtx&&(this.stop(),this.audioCtx.suspend())},o.prototype.resume=function(){if(!this.audioCtx){var e=window.AudioContext||window.webkitAudioContext;if(t.IS_IE)this.playbackSupported=!1,this.audioCtx=void 0;else try{this.audioCtx=e?new e:void 0,this.playbackSupported=!0}catch(e){i.notify(e),this.playbackSupported=!1,this.audioCtx=void 0}}this.playbackSupported&&this.audioCtx&&("suspended"===this.audioCtx.state&&this.audioCtx.resume(),this.loadPOI())},o.prototype.stop=function(){this.playTimeout&&(M.cancelAnimationFrame(this.playTimeout),this.playTimeout=void 0),this.bufferSource&&(this.bufferSource.stop(),this.bufferSource.disconnect(),this.bufferSource=void 0),this.animationFinished()},o.prototype.isAnimating=function(){return void 0!==this.playTimeout},o.prototype.getAudioSpeed=function(){return this.audioSpeed},o.prototype.setAudioSpeed=function(e){this.audioSpeed=e},o.prototype.getAudioVolume=function(){return this.audioVolume},o.prototype.setAudioVolume=function(e){this.audioVolume=e,void 0!==this.gainMaster&&(this.gainMaster.gain.value=this.audioVolume)},o.prototype.getPlaybackSupported=function(){return this.playbackSupported},o.prototype.playBranchByIndex=function(e,t,n){var i=this;t<0||t>=e.branches.length||s(e.branches[t])&&this.playBranch(e.branches[t],t,n,function(){return i.stop()})},o.prototype.playSketch=function(e,t){var n,i,a=this,o=e.branches;0!==o.length&&(n=-1,(i=function(){for(n+=1;n<o.length&&!s(o[n]);)n+=1;n<o.length?a.playBranch(o[n],n,t,i):a.stop()})())},o.prototype.playPoint=function(e,t){var n,i,a;!this.audioCtx||function(e){switch(e.graphMode){case N.X:case N.Y:case N.XYPOINT:case N.XYPOINT_MOVABLE:return 1;default:return}}(e)&&(i=.075*(n=this.audioCtx.sampleRate),function(e,t,n,i){for(var a=e.sampleRate,o=e.getChannelData(0),r=e.getChannelData(1),s=t.graphMode,u=F(n,s),d=o.length-1,h=X(),p=function(e){switch(e.graphMode){case N.Y:case N.XYPOINT:case N.XYPOINT_MOVABLE:return{independent:e.x,dependent:e.y};case N.X:return{independent:e.y,dependent:e.x};default:throw _(e.graphMode)}}(t),c=p.independent,l=p.dependent,f=k(c,u),g=0;g<o.length;g++)h=V(h,{independent:c,dependent:l},u,a,(d-g)/a),o[g]+=h.amplitude*f.left,r[g]+=h.amplitude*f.right;i&&void 0!==t.intersects&&E(i,e,0,f)}(a=this.audioCtx.createBuffer(2,i,n),e,t,this.poiBuffer),this.connectBuffer(a))},o.prototype.connectBuffer=function(e){var t;this.audioCtx&&(this.gainMaster=this.audioCtx.createGain(),this.gainMaster.connect(this.audioCtx.destination),this.gainMaster.gain.value=this.audioVolume,t=this.audioCtx.createBufferSource(),(this.bufferSource=t).buffer=e,t.connect(this.gainMaster),t.start())},o.prototype.playBranch=function(e,n,t,i){var a,o,r,s,u,d,h,p,c,l,f,g,m=this;this.audioCtx&&(a=this.audioSpeed/10,(o=function(e,t,n){switch(e.graphMode){case N.Y:for(var i=[],a=0,o=e.segments;a<o.length;a++){var r=o[a];2<(c=x.clipStrokeEdges(r,t)).length&&i.push(c)}return{graphMode:e.graphMode,segments:i,poi:e.poi};case N.X:for(var i=[],s={xmin:t.ymin,xmax:t.ymax,ymin:t.xmin,ymax:t.ymax},u=0,d=e.segments;u<d.length;u++)r=d[u],2<(c=x.clipStrokeEdges(r,s)).length&&i.push(c);return{graphMode:e.graphMode,segments:i,poi:e.poi};case N.XYPOINT:case N.XYPOINT_MOVABLE:var h=e.segments[0].slice();h.sort(B);for(var i=[],p=0;p<h.length;p++){var c,l=h[p],f=0<p?h[p-1][0]:-1/0,g=p<h.length-1?h[h.length-1][0]:1/0,m=Math.max(l[0]-.5*n,.5*(l[0]+f)),M=Math.min(l[0]+.5*n,.5*(l[0]+g)),r=[m,l[1],M,l[1]];2<(c=x.clipStrokeEdges(r,t)).length&&i.push(c)}return{graphMode:N.Y,segments:i};default:throw new Error("Unimplemented graph mode: "+e.graphMode)}}(e,t,(t.xmax-t.xmin)*(.075/a))).segments.length?(r=F(t,o.graphMode),s=D(o),u=s.independentMin,d=s.independentMax,h=this.audioCtx.sampleRate,p=a*(d-u)/(r.independentMax-r.independentMin),c=Math.floor(h*p),function(e,t,n,i){for(var a=e.sampleRate,o=e.getChannelData(0),r=e.getChannelData(1),s=t.graphMode,u=F(n,s),d=D(t),h=d.independentMin,p=d.independentMax,c=p-h,l=0,f=0,g=o.length-1,m=g/a,M=X(),x=0;x<o.length;x++){for(var y=k(Y=(g-x)/g*h+x/g*p,u);l<t.segments.length&&t.segments[l][f]<Y;)(f+=2)>=t.segments[l].length&&(l+=1,f=0);var v,C,b,P,S,B=t.segments[l],O=NaN,w=NaN;B&&2<B.length&&0<=f-2&&f+1<B.length&&(w=(B[B.length-2]-Y)*(m/c),v=B[f-2],C=B[f-1],b=B[f],P=B[f+1],O=(b-Y)/(S=b-v)*C+(Y-v)/S*P),M=V(M,{independent:Y,dependent:O},u,a,w),o[x]+=M.amplitude*y.left,r[x]+=M.amplitude*y.right}if(i&&t.poi&&t.poi.intersections)for(var I=function(e,t){if(e===N.X)return t.y;if(e===N.Y)return t.x;throw _(e)}(s,t.poi.intersections),T=0,A=I;T<A.length;T++){var Y=A[T],x=Math.round((Y-h)/(p-h)*g);E(i,e,x,k(Y,u))}}(l=this.audioCtx.createBuffer(2,c,h),o,t,this.poiBuffer),this.connectBuffer(l),f=this.audioCtx.currentTime,(g=function(){var e,t;void 0!==m.playTimeout&&M.cancelAnimationFrame(m.playTimeout),m.audioCtx&&(e=m.audioCtx.currentTime-f,t=(p-e)/p*u+e/p*d,m.audioPointMove(n,t),e<p?m.playTimeout=M.requestAnimationFrame(g):i())})()):M.requestAnimationFrame(i))},o.prototype.loadPOI=function(){var t=this;this.playbackSupported&&!this.poiBuffer&&this.audioCtx&&this.audioCtx.decodeAudioData(n.slice(0),function(e){t.poiBuffer=e})},o);function o(e){var t=e.audioPointMove,n=e.animationFinished;this.audioSpeed=50,this.audioVolume=.5,this.audioPointMove=t,this.animationFinished=n}function X(){return{amplitude:0,phase:0,noiseVal:0,lowerOctaveGain:0,upperOctaveGain:0}}function k(e,t){var n=t.independentMin,i=t.independentMax,a=Math.abs((e-n)/(i-n));return isFinite(a)||(a=.5),a=Math.max(Math.min(a,1),0),{left:Math.cos(Math.PI/2*a),right:Math.sin(Math.PI/2*a)}}function V(e,t,n,i,a){var o,r=t.independent,s=t.dependent,u=e.phase,d=e.noiseVal,h=e.lowerOctaveGain,p=e.upperOctaveGain,c=n.dependentMin,l=n.dependentMax,f=0,g=0,m=0;return!isNaN(s)&&c<=s&&s<=l?(u+=(o=(s-c)/(l-c),Math.min(Math.max(C*Math.pow(2,o),v),b))/i,m=a<4*y?g=0:(g=.5,0<=r?.15:0),s<0&&(f+=.1*(d=S(d)))):f+=.04*(d=S(d)),p+=(m-p)/(i*y),{amplitude:f+=(h+=(g-h)/(i*y))*P(u)+p*P(2*u),phase:u,noiseVal:d,lowerOctaveGain:h,upperOctaveGain:p}}function P(e){return.8782*(r(e)+.25*r(2*e)+.25*r(3*e))}function r(e){return Math.sin(2*Math.PI*e)}function S(e){return(e+.2*(2*Math.random()-1))/1.02}function E(e,t,n,i){for(var a=e.getChannelData(0),o=t.getChannelData(0),r=t.getChannelData(1),s=0;s<a.length&&s+n<o.length;s++)o[s+n]+=a[s]*i.left,r[s+n]+=a[s]*i.right}function s(e){switch(e.graphMode){case N.X:case N.Y:case N.XYPOINT:case N.XYPOINT_MOVABLE:return 0<e.segments.length;default:return!1}}function F(e,t){switch(t){case N.Y:case N.XYPOINT:case N.XYPOINT_MOVABLE:return{independentMin:e.xmin,independentMax:e.xmax,dependentMin:e.ymin,dependentMax:e.ymax};case N.X:return{independentMin:e.ymin,independentMax:e.ymax,dependentMin:e.xmin,dependentMax:e.xmax};default:throw _(t)}}function D(e){var t=e.segments[0],n=e.segments[e.segments.length-1];return{independentMin:t[0],independentMax:n[n.length-2]}}function _(e){return"Unexpected graph mode. Received "+e}function B(e,t){return e[0]-t[0]}e.default=a,e.canPlaySketch=function(e){for(var t=0,n=e.branches;t<n.length;t++){if(s(n[t]))return!0}return!1},e.canPlayBranch=s,e.getFirstPlayableBranchIndex=function(e){for(var t=0;t<e.branches.length;t++)if(s(e.branches[t]))return t;return 0},e.getReportedBranch=function(e,t){for(var n=0,i=0;i<=t;i++)s(e.branches[i])&&(n+=1);return n}});
define('graphing/audiographnavigator',["require","exports","main/propagate_selection","tslib","underscore","core/types/graphmode","core/lib/label","core/math/poi-type","graphing/tonegenerator","underscore","lib/aria"],function(require,e,t,s,v,y,u,h,f,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(n.prototype.reset=function(){this.currentPoint=void 0,this.resetToFirstBranch(),this.sampledPoints=[],this.pois=[],this.independent=0,this.xstep=0,this.ystep=0},n.prototype.resetToFirstBranch=function(){var e=this.getCurrentSketch();this.branch=e?f.getFirstPlayableBranchIndex(e):0},n.prototype.getBranchPoints=function(e){var t=[];if(0<=e)for(var r=0,n=this.getSampledPoints();r<n.length;r++){var i=n[r];i.branch===e&&t.push(i)}return t},n.prototype.resetTracePoint=function(){this.drawTrace(this.getCurrentPoint())},n.prototype.drawTrace=function(e){var t,r,n,i=this.getCurrentSketch();e&&i&&(t=i.branches[this.branch])&&t.graphMode!==y.XYPOINT&&(r={x:e.x,y:e.y},n={branchInfo:{branch:e.branch,id:i.id,sketch:i},pt:r},o.isEqual(n,this.grapher.traceLayer.getTraceInfo())||(this.grapher.traceLayer.setTraceInfo(n),this.grapher.redrawAllLayers()))},n.prototype.moveToOrigin=function(){var e,t,r,n=this.getCurrentSketch();n&&f.canPlaySketch(n)&&(e=n.branches[this.branch],f.canPlayBranch(e)&&((t=e.graphMode)===y.Y?this.setIndependent("x",0):t===y.X?this.setIndependent("y",0):t===y.XYPOINT&&(r=this.getSortedPOI()[0],this.setIndependent("x",r?r.x:0))))},n.prototype.getCurrentSketch=function(){var e=this.getSelectedItem();if(e){var t=this.audiograph.getFocusedCell();if("table"===e.type){if(t&&(i=this.getGraphSketchForTableCell(e,t)),!i)for(var r=0,n=e.columnModels;r<n.length;r++){var i,o=n[r];if(void 0!==(i=this.grapher.getGraphSketch(o.id)))break}}else i=this.grapher.getGraphSketch(e.id)}return i},n.prototype.getFirstTraceableSketch=function(e){for(var t=this.controller.getItemCount(),r=this.controller.shouldAudioTraceReverseExpressions(),n=0;n<t;n++){var i=r?t-1-n:n,o=this.controller.getItemModelByIndex(i);if(o&&this.canTrace(o)){var a,s=r?this.prevTableColumn(o):this.nextTableColumn(o);if(a=s?(this.audiograph.setFocusedCell(s),this.getGraphSketchForTableCell(o,s)):this.grapher.getGraphSketch(o.id)){e&&e.selectAssociatedExpression&&this.controller.dispatch({type:"set-selected-index",index:i});break}}}return a},n.prototype.canTrace=function(e){if("image"===e.type)return!1;if("shouldGraph"in e){var t=this.grapher.getGraphSketch(e.id);return!!t&&f.canPlaySketch(t)}return!1},n.prototype.getTraceableExpressionCount=function(){for(var e=0,t=this.controller.getItemCount(),r=0;r<t;r++){var n=this.controller.getItemModelByIndex(r);n&&this.canTrace(n)&&e++}return e},n.prototype.computeStepSizes=function(){var e,t,r,n,i,o,a,s,h,p=this.grapher.getProjection().viewport;p&&(e=(this.viewport=p).xmin,t=p.xmax,this.xstep=Math.abs(t-e)/100,this.xscale=t-e,r=p.ymin,n=p.ymax,this.ystep=Math.abs(n-r)/100,this.yscale=n-r,(i=this.getCurrentSketch())&&f.canPlaySketch(i)&&(o=i.branches[this.branch],f.canPlayBranch(o)&&((a=o.graphMode)===y.Y?this.independent<e?this.independent=e:this.independent>t&&(this.independent=t):a===y.X?this.independent<r?this.independent=r:this.independent>n&&(this.independent=n):a===y.XYPOINT&&(h=s=void 0,this.independent<e?(h=this.getSortedPOI()[0],this.independent=h&&void 0!==h.x?h.x:0):this.independent>t&&(h=(s=this.getSortedPOI())[s.length-1],this.independent=h&&void 0!==h.x?h.x:0)))))},n.prototype.getPoint=function(e,t){var r,n,i,o,a=this.getCurrentSketch();if(!a||!f.canPlaySketch(a))return r;var s=0,h=a.branches[e];if(h){var p=f.getReportedBranch(a,e);return"compiled"in h&&h.compiled&&(o=h.compiled.fn),(i=h.graphMode)===y.Y?((n=this.getInterveningPOIs(t,t+this.xstep,e,i)[0])&&n.x===t&&n.branch===e||(n=void 0,s=o?o(t):0),n?r={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:p,graphMode:i,intersects:n.intersects}:o&&(r={x:t,y:s,branch:e,reportedBranch:p,graphMode:i})):i===y.X?((n=this.getInterveningPOIs(t,t+this.ystep,e,i)[0])&&n.y===t&&n.branch===e||(n=void 0,s=o?o(t):0),n?r={x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:p,graphMode:i,intersects:n.intersects}:o&&(r={y:t,x:s,branch:e,reportedBranch:p,graphMode:i})):i===y.XYPOINT&&(r=(n=this.getInterveningPOIs(t,t+this.xstep,e,i)[0])&&n.x===t&&n.branch===e?{x:n.x,y:n.y,type:n.type,typeChain:n.typeChain,branch:n.branch,reportedBranch:p,graphMode:i,intersects:n.intersects}:{x:t,y:NaN,branch:e,reportedBranch:p,graphMode:i}),r}},n.prototype.getSampledPoints=function(){return 0===this.sampledPoints.length&&this.updateSampledPoints(),this.sampledPoints},n.prototype.updateSampledPoints=function(){var e=this.getCurrentSketch();if(e&&f.canPlaySketch(e)){for(var t=[],r=0;r<e.branches.length;r++){var n=e.branches[r];if(f.canPlayBranch(n)){var i=n.graphMode,o=0,a=0,s=0,h=[];if(i===y.Y||i===y.XYPOINT?(o=this.viewport.xmin,a=this.viewport.xmax,s=this.xstep):i===y.X&&(o=this.viewport.ymin,a=this.viewport.ymax,s=this.ystep),0!==o||0!==a||0!==s){for(var p=0;u.value(o+p*s).value<=a;p++){var c,d=u.value(o+p*s).value,l=this.getInterveningPOIs(d,d+s,r,i);0<l.length?h.push.apply(h,l):(c=this.getPoint(r,d))&&h.push(c)}t.push.apply(t,this.removeDuplicates(h,i))}}}this.sampledPoints=t}},n.prototype.getCurrentPoint=function(){return this.currentPoint||this.updateCurrentPoint(),this.currentPoint},n.prototype.updateCurrentPoint=function(e){var t;e?((t=(this.currentPoint=e).graphMode)===y.Y||t===y.XYPOINT?this.independent=void 0!==e.x?e.x:0:t===y.X&&(this.independent=void 0!==e.y?e.y:0),this.branch=e.branch):this.currentPoint=this.getPoint(this.branch,this.independent)},n.prototype.prevPoint=function(){this.moveToPoint(-1)},n.prototype.nextPoint=function(){this.moveToPoint(1)},n.prototype.firstPoint=function(){var e=this.getSampledPoints();0<e.length&&this.updateCurrentPoint(e[0])},n.prototype.lastPoint=function(){var e=this.getSampledPoints();0<e.length&&this.updateCurrentPoint(e[e.length-1])},n.prototype.moveToPoint=function(e){var t,r,n,i,o=this.getCurrentPoint();o&&(o.graphMode!==y.XYPOINT?(t=this.getSampledPoints(),-1!==(r=this.getPointIndex(t,o))&&((n=r+e)<=0?(n=0,a.queue(this.controller.s("graphing-calculator-narration-audio-trace-first-point"))):n>=t.length-1&&(n=t.length-1,a.queue(this.controller.s("graphing-calculator-narration-audio-trace-last-point"))),i=t[n],this.updateCurrentPoint(i))):this.moveToPOI(e))},n.prototype.canMoveToPrevPoint=function(){var e=this.getCurrentPoint();if(!e)return!1;if(e.graphMode===y.XYPOINT)return this.canMoveToPrevPOI();var t=this.getSampledPoints();return 0<this.getPointIndex(t,e)},n.prototype.canMoveToNextPoint=function(){var e=this.getCurrentPoint();if(!e)return!1;if(e.graphMode===y.XYPOINT)return this.canMoveToNextPOI();var t=this.getSampledPoints();return this.getPointIndex(t,e)<t.length-1},n.prototype.prevPOI=function(){this.moveToPOI(-1)},n.prototype.nextPOI=function(){this.moveToPOI(1)},n.prototype.getSortedPOI=function(){return this.pois&&0!==this.pois.length||this.updatePOI(),this.pois},n.prototype.updatePOI=function(){var e=[],t=[],r=this.getCurrentSketch();if(r&&f.canPlaySketch(r)){for(var n,i,o,a=0;a<r.branches.length;a++){var s=r.branches[a];if(s){var h,p=f.getReportedBranch(r,a),c=s.graphMode,t=[];if(0<(h=r.getBranchPOI(a)).length){c===y.Y||c===y.XYPOINT?t=v.sortBy(h,"x"):c===y.X&&(t=v.sortBy(h,"y"));for(var d=[],l=0,u=t;l<u.length;l++){var g=u[l];d.push((i=c,o=p,{x:(n=g).x,y:n.y,branch:n.branch,reportedBranch:o,type:n.type,graphMode:i,intersects:n.intersects}))}e.push.apply(e,this.removeDuplicates(d,c))}}}this.pois=e}},n.prototype.removeDuplicates=function(e,t){for(var r=[],n=0,i=e;n<i.length;n++){var o,a=i[n];(a=s.__assign({},a)).graphMode=t,0!==r.length?(o=r[r.length-1],u.value(o.x).value===u.value(a.x).value&&u.value(o.y).value===u.value(a.y).value&&o.branch===a.branch?(o.typeChain||(o.typeChain=void 0!==o.type?[o.type]:[]),void 0!==a.type&&-1===o.typeChain.indexOf(a.type)&&o.typeChain.push(a.type),a.type===h.INTERSECTION&&a.intersects&&void 0===o.intersects&&(o.intersects=a.intersects)):r.push(a)):r.push(a)}return r},n.prototype.getInterveningPOIs=function(e,t,r,n){for(var i=[],o=NaN,a=0,s=this.getSortedPOI();a<s.length;a++){var h=s[a];h&&(n!==y.Y&&n!==y.XYPOINT||isNaN(h.x)?n!==y.X||isNaN(h.y)||(o=h.y):o=h.x,h.branch===r&&!isNaN(o)&&(e<=o&&o<t||t<=o&&o<e)&&i.push(h))}return t<e?i.reverse():i},n.prototype.setIndependent=function(e,t){for(var r=this.getSampledPoints(),n=0,i=r;n<i.length;n++){var o=i[n];if(o&&o.hasOwnProperty(e)&&o[e]===t){if("x"===e)return this.independent=void 0!==o.x?o.x:0,void this.updateCurrentPoint();if("y"===e)return this.independent=void 0!==o.y?o.y:0,void this.updateCurrentPoint()}}var a,s=!0;0<r.length&&(a=r[Math.floor((r.length-1)/2)])&&("x"===e?(this.independent=void 0!==a.x?a.x:0,s=!1):"y"===e&&(this.independent=void 0!==a.y?a.y:0,s=!1)),s&&(this.independent=0),this.resetToFirstBranch(),this.updateCurrentPoint()},n.prototype.moveToPOI=function(e){var t,r;this.getCurrentPoint()&&(t=this.getSampledPoints(),-1===(r=this.getPOIIndexByDirection(e))?a.queue(this.controller.s("graphing-calculator-narration-audio-trace-no-more-pois")):this.updateCurrentPoint(t[r]))},n.prototype.getPOIIndexByDirection=function(e){var t=this.getCurrentPoint();if(!t)return-1;var r=this.getSampledPoints(),n=this.getPointIndex(r,t),i=-1;if(-1!==n)for(var o=t.graphMode,a=1===e?r.length-1:0,s=n;s!==a+e;s+=e){var h=r[s];if(((o===y.Y||o===y.XYPOINT)&&t.x!==h.x||o===y.X&&t.y!==h.y)&&void 0!==h.type){i=s;break}}return i},n.prototype.canMoveToPrevPOI=function(){return-1!==this.getPOIIndexByDirection(-1)},n.prototype.canMoveToNextPOI=function(){return-1!==this.getPOIIndexByDirection(1)},n.prototype.getPointIndex=function(e,t){var r=-1;if(0<e.length&&t)for(var n=t.graphMode,i=0;i<e.length;i++){var o=e[i];if(((n===y.Y||n===y.XYPOINT)&&o.x===t.x||n===y.X&&o.y===t.y)&&o.branch===t.branch){r=i;break}}return r},n.prototype.prevCurve=function(){this.controller.shouldAudioTraceReverseExpressions()?this.curveDown():this.curveUp()},n.prototype.nextCurve=function(){this.controller.shouldAudioTraceReverseExpressions()?this.curveUp():this.curveDown()},n.prototype.curveUp=function(){var e,t,r,n,i=this.getSelectedItem();i&&((e=this.prevTableColumn(i))?this.audiograph.setFocusedCell(e):(t=i.index,-1===(r=this.findPrevTraceableIndex({index:t,focusTableCell:!0}))||(n=this.controller.getItemModelByIndex(r))&&this.controller.dispatch({type:"set-selected-id",id:n.id})),!e&&this.getSelectedItem()===i||this.audiograph.enterAudioTrace())},n.prototype.curveDown=function(){var e,t,r,n,i=this.getSelectedItem();i&&((e=this.nextTableColumn(i))?this.audiograph.setFocusedCell(e):(t=i.index,-1===(r=this.findNextTraceableIndex({index:t,focusTableCell:!0}))||(n=this.controller.getItemModelByIndex(r))&&this.controller.dispatch({type:"set-selected-id",id:n.id})),!e&&this.getSelectedItem()===i||this.audiograph.enterAudioTrace())},n.prototype.canMoveToPrevCurve=function(){var e=this.getSelectedItem();return!!e&&(this.controller.shouldAudioTraceReverseExpressions()?-1!==this.findNextTraceableIndex({index:e.index,focusTableCell:!1}):-1!==this.findPrevTraceableIndex({index:e.index,focusTableCell:!1}))},n.prototype.canMoveToNextCurve=function(){var e=this.getSelectedItem();return!!e&&(this.controller.shouldAudioTraceReverseExpressions()?-1!==this.findPrevTraceableIndex({index:e.index,focusTableCell:!1}):-1!==this.findNextTraceableIndex({index:e.index,focusTableCell:!1}))},n.prototype.findPrevTraceableIndex=function(e){var t,r=e.index;do{r--;var n=(t=this.controller.getItemModelByIndex(r))&&this.prevTableColumn(t);if(n)return e.focusTableCell&&this.audiograph.setFocusedCell(n),r}while(t&&!this.canTrace(t));return t?r:-1},n.prototype.findNextTraceableIndex=function(e){var t,r=e.index;do{r++;var n=(t=this.controller.getItemModelByIndex(r))&&this.nextTableColumn(t);if(n)return e.focusTableCell&&this.audiograph.setFocusedCell(n),r}while(t&&!this.canTrace(t));return t?r:-1},n.prototype.prevTableColumn=function(e){return this.tableColumn(e,-1)},n.prototype.nextTableColumn=function(e){return this.tableColumn(e,1)},n.prototype.tableColumn=function(e,t){var r;if(e&&"table"===e.type){var n=this.audiograph.getFocusedCell(),i=void 0,o=void 0,a=void 0,s=((a=-1===t?(i=n?Math.max(n.location.column-1,0):NaN,o=n&&n.tableId===e.id&&!isNaN(i)?i:e.columnModels.length-1,0):(i=n?Math.min(n.location.column+1,e.columnModels.length-1):NaN,o=n&&n.tableId===e.id&&!isNaN(i)?i:0,e.columnModels.length-1))-o)/t;if(isFinite(s)&&0<=s)for(var h=o;h!==a;h+=t){var p=e.columnModels[h];if(p&&this.grapher.getGraphSketch(p.id)){r={tableId:e.id,location:{column:h,row:0}};break}}}return r},n.prototype.getGraphSketchForTableCell=function(e,t){if(e&&"table"===e.type&&t){var r=e.columnModels[t.location.column];return r?this.grapher.getGraphSketch(r.id):void 0}},n.prototype.getXScale=function(){return this.xscale},n.prototype.getYScale=function(){return this.yscale},n.prototype.getSelectedItem=function(){var e=this.controller.getSelectedItem();return e&&"folder"===e.type?this.controller.getItemModel(t.getSelectedId(e)):e},n);function n(e,t,r){this.grapher=r,this.controller=e,this.audiograph=t,this.reset()}e.default=r});
define('lib/mathspeak',["require","exports","vendor/mathquill","jquery"],function(require,t,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMathspeakFromText=void 0;var i=/`[^`]*`/g,o=e.MQ.StaticMath(r("<span/>")[0]);t.getMathspeakFromText=function(t){for(var e,r="",n=0,a=function(t){if(null==t)return!0;var e=t.match(/`/g);return(null!=e&&e.length||0)%2==0}(t)?function(t){var e=[];if(null==t||0==t.length)return e;for(var r,n=0;r=i.exec(t);){var a=t.slice(n,r.index);0<a.length&&e.push({from:n,to:r.index,type:"text",text:a}),n=r.index+r[0].length,e.push({from:r.index,to:n,type:"math",text:r[0].slice(1,-1)})}var l=t.slice(n);return 0<l.length&&e.push({from:n,to:t.length,type:"text",text:l}),e}(t):[{from:0,to:t.length,type:"text",text:t}];n<a.length;n++){var l=a[n];r+="text"===l.type?l.text:(e=l.text).match(/^\s*[\d]{0,3}(\.[\d]*)?\s*$/)?e:(o.latex(e),o.mathspeak().trim())}return r}});
define('graphing/audiograph',["require","exports","tslib","browser","keys","lib/aria","graphing/audiographnavigator","graphing/tonegenerator","core/types/graphmode","core/lib/label","core/math/poi-type","graphing-calc/models/expression","graphing-calc/models/table","expressions/colors","lib/mathspeak"],function(require,r,o,l,u,h,i,d,c,a,p,n,g,y,s){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.audioSpeedOptions=void 0,r.audioSpeedOptions=[{speed:150,displayedSpeed:"1/4 x"},{speed:100,displayedSpeed:"1/2 x"},{speed:50,displayedSpeed:"1 x"},{speed:30,displayedSpeed:"2 x"},{speed:16,displayedSpeed:"4 x"}];var t=(e.prototype.remove=function(){},e.prototype.handleKeydown=function(t){var e=t.altKey||t.metaKey,r=t.altKey&&!t.metaKey&&!t.ctrlKey&&!t.shiftKey,o=t.ctrlKey&&!t.metaKey&&!t.altKey,i=l.IS_APPLE?o:e,a=i&&(61===t.which||187===t.which),n=i&&!t.shiftKey&&(173===t.which||189===t.which),s=i&&!t.shiftKey&&"0"===u.lookupChar(t);r&&"S"===u.lookupChar(t)?this.agNavigator.getSelectedItem()&&(this.audioTraceActive||this.isFocusInExpressionsView())&&(t.preventDefault(),t.stopPropagation(),this.describeCurve()):r&&"T"===u.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),this.toggleAudioTrace()):a?(t.preventDefault(),t.stopPropagation(),this.zoom("in")):n?(t.preventDefault(),t.stopPropagation(),this.zoom("out")):s?(t.preventDefault(),t.stopPropagation(),this.zoom("default")):this.audioTraceActive&&(this.sliderTraceActive?this.sliderTraceKeydown(t):this.audioTraceKeydown(t))},e.prototype.sliderTraceKeydown=function(t){var e=t.altKey||t.metaKey,r=!e&&!t.ctrlKey&&!t.shiftKey;r&&u.lookup(t)===u.LEFT||"J"===u.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),this.decrementSliderValue()):r&&u.lookup(t)===u.RIGHT||"L"===u.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),this.incrementSliderValue()):r&&u.lookup(t)===u.PAGEDOWN?(t.preventDefault(),t.stopPropagation(),this.decrementBigSliderValue()):r&&u.lookup(t)===u.PAGEUP?(t.preventDefault(),t.stopPropagation(),this.incrementBigSliderValue()):e||u.lookup(t)!==u.DOWN&&(t.shiftKey||u.lookup(t)!==u.TAB)&&"K"!==u.lookupChar(t)?!e&&(u.lookup(t)===u.UP||t.shiftKey&&u.lookup(t)===u.TAB||"I"===u.lookupChar(t))?(t.preventDefault(),t.stopPropagation(),this.prevSlider()):r&&u.lookup(t)===u.HOME||"U"===u.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),this.sliderMin()):r&&u.lookup(t)===u.END||"N"===u.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),this.sliderMax()):(this.stopAnimations(),this.audioTraceKeydown(t)):(t.preventDefault(),t.stopPropagation(),this.nextSlider())},e.prototype.audioTraceKeydown=function(t){var e=this,r=t.altKey||t.metaKey,o=r&&!t.ctrlKey&&!t.shiftKey,i=!r&&!t.ctrlKey&&!t.shiftKey,a=u.lookupChar(t);if(u.lookup(t)===u.UP&&o)t.preventDefault(),t.stopPropagation(),h.clear(),this.agNavigator.prevCurve();else if(u.lookup(t)===u.DOWN&&o)t.preventDefault(),t.stopPropagation(),h.clear(),this.agNavigator.nextCurve();else if(i&&u.lookup(t)===u.LEFT||u.lookup(t)===u.UP||"J"===a)t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"previous-point"});else if(i&&u.lookup(t)===u.RIGHT||u.lookup(t)===u.DOWN||"L"===a)t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"keypad/audio-trace",command:"next-point"});else if(r||u.lookup(t)!==u.PAGEDOWN&&(t.shiftKey||u.lookup(t)!==u.TAB)&&"I"!==a)if(!r&&(u.lookup(t)===u.PAGEUP||t.shiftKey&&u.lookup(t)===u.TAB||"K"===a))t.preventDefault(),t.stopPropagation(),this.reportAndMoveToPrevPOI();else if(i&&u.lookup(t)===u.HOME||"U"===a)t.preventDefault(),t.stopPropagation(),this.reportAndMoveToFirstPoint();else if(i&&u.lookup(t)===u.END||"N"===a)t.preventDefault(),t.stopPropagation(),this.reportAndMoveToLastPoint();else if(i&&"X"===a)t.preventDefault(),t.stopPropagation(),this.reportX();else if(i&&"P"===a)t.preventDefault(),t.stopPropagation(),this.reportPOICount();else if(i&&"Y"===a)t.preventDefault(),t.stopPropagation(),this.reportY();else if(i&&"T"===a)t.preventDefault(),t.stopPropagation(),this.reportType();else if(i&&"B"===a)t.preventDefault(),t.stopPropagation(),this.reportBranch();else if(i&&"O"===a)t.preventDefault(),t.stopPropagation(),this.reportAndMoveToOrigin();else if(i&&"H"===a)t.preventDefault(),t.stopPropagation(),this.hearGraph();else if(i&&"string"==typeof a&&"0"<=a&&a<="9"){t.preventDefault(),t.stopPropagation(),h.clear(),this.tonegen.stop();var n=this.agNavigator.getCurrentSketch();if(n){for(var s=void 0,l=s=48===t.which?9:t.which-49,c=-1,p=0;p<n.branches.length;p++)if(d.canPlayBranch(n.branches[p])&&--l,l<0){c=p;break}0<=c?this.tonegen.getPlaybackSupported()?(h.alert(this.controller.s("graphing-calculator-narration-audio-trace-branch-number",{branch:s+1})),clearTimeout(this.playTimeout),this.playTimeout=setTimeout(function(){return e.tonegen.playBranchByIndex(n,c,e.grapher.getCurrentViewport())},500)):h.alert(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play")):h.alert(this.controller.s("graphing-calculator-narration-audio-trace-branch-not-found",{branch:s+1}))}else h.alert(this.controller.s("graphing-calculator-narration-audio-trace-no-graph-selected"))}else r&&"string"==typeof a&&"1"<=a&&a<="5"?(t.preventDefault(),t.stopPropagation(),this.controller.dispatch({type:"set-audio-trace-speed",speed:parseInt(a,10)-1})):t.altKey||t.ctrlKey||t.metaKey||"V"!==a?i&&"A"===a?(t.preventDefault(),t.stopPropagation(),h.clear(),this.queueAnimatingPoints(!0),h.alert()):i&&"S"===a&&this.controller.isListEnabled()?(t.preventDefault(),t.stopPropagation(),this.toggleSliderTrace()):i&&"C"===a?(t.preventDefault(),t.stopPropagation(),this.reportColor()):i&&this.exitAudioTrace():(t.preventDefault(),t.stopPropagation(),t.shiftKey?this.controller.dispatch({type:"keypad/audio-trace",command:"volume-down"}):this.controller.dispatch({type:"keypad/audio-trace",command:"volume-up"}));else t.preventDefault(),t.stopPropagation(),this.reportAndMoveToNextPOI();this.controller.dispatch({type:"render"})},e.prototype.describeCurve=function(){var r=this;h.clear();var t=this.agNavigator.getCurrentSketch();if(t){h.queue(this.controller.s("graphing-calculator-narration-audio-trace-description-color",{color:y.getColorName(this.controller,t.color)}));var e=d.getReportedBranch(t,t.branches.length-1);1<e&&h.queue(this.controller.s("graphing-calculator-narration-audio-trace-description-branch-count",{branches:e}));var o=t.getPOI();if(0<o.length){for(var i=[],a=0,n=o;a<n.length;a++){var s=n[a];void 0===i[s.type]?i[s.type]=1:i[s.type]+=1}i.forEach(function(t,e){e===p.INTERSECTION?h.queue(1===t?r.controller.s("graphing-calculator-narration-audio-trace-description-one-intersection"):r.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intersections",{count:t})):e===p.ZERO?h.queue(1===t?r.controller.s("graphing-calculator-narration-audio-trace-description-one-root"):r.controller.s("graphing-calculator-narration-audio-trace-description-multiple-roots",{count:t})):e===p.INTERCEPT?h.queue(1===t?r.controller.s("graphing-calculator-narration-audio-trace-description-one-intercept"):r.controller.s("graphing-calculator-narration-audio-trace-description-multiple-intercepts",{count:t})):e===p.EXTREMUM?h.queue(1===t?r.controller.s("graphing-calculator-narration-audio-trace-description-one-extremum"):r.controller.s("graphing-calculator-narration-audio-trace-description-multiple-extrema",{count:t})):e===p.LABEL&&h.queue(1===t?r.controller.s("graphing-calculator-narration-audio-trace-description-one-label"):r.controller.s("graphing-calculator-narration-audio-trace-description-multiple-labels",{count:t}))})}h.alert()}else h.alert(this.controller.s("graphing-calculator-narration-audio-trace-description-unavailable"))},e.prototype.queueCoordinates=function(t,e,r){var o;void 0===r&&(r=!1),t&&(o=this.agNavigator.getCurrentSketch(),(t.hasOwnProperty("branch")&&o&&1<o.branches.length&&this.lastSpokenBranch!==t.reportedBranch||"branch"===e)&&"number"==typeof t.reportedBranch&&h.queue(this.controller.s("graphing-calculator-narration-audio-trace-property-branch-number",{branch:t.reportedBranch})),this.lastSpokenBranch=t.reportedBranch?t.reportedBranch:t.branch+1,t.hasOwnProperty("type")&&!e?h.queue(this.controller.s("graphing-calculator-narration-audio-trace-property-type-before-coordinates",{type:this.describePOI(t)})):"type"===e&&h.queue(this.describePOI(t)),e&&"x"!==e||h.queue(this.controller.s("graphing-calculator-narration-audio-trace-property-x",{x:a.value(t.x,this.agNavigator.getXScale()).ariaString})),e&&"y"!==e||h.queue(this.controller.s("graphing-calculator-narration-audio-trace-property-y",{y:a.value(t.y,this.agNavigator.getYScale()).ariaString})),r&&h.alert())},e.prototype.describePOI=function(t){if(t.typeChain){for(var e=[],r=0;r<t.typeChain.length;r++)e.push(this.poiTypeToText(t,r));return e.join(", ")}return this.poiTypeToText(t)},e.prototype.poiTypeToText=function(t,e){switch(e&&t.typeChain?t.typeChain[e]:t.type){case p.INTERSECTION:var r=this.getIntersectingCurves(t);return""!==r?this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection-with-curves",{curves:r}):this.controller.s("graphing-calculator-narration-audio-trace-point-type-intersection");case p.ZERO:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-root");case p.INTERCEPT:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-intercept");case p.EXTREMUM:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-extremum");case p.DEFINITION:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-definition");case p.TRACE:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-trace");case p.LABEL:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-label");default:return this.controller.s("graphing-calculator-narration-audio-trace-point-type-not-a-poi")}},e.prototype.getIntersectingCurves=function(t){return t&&t.intersects?this.getExpressionAriaLabel(t.intersects):""},e.prototype.getExpressionAriaLabel=function(t){var e=this.controller.getItemModel(t);return e?"expression"===e.type&&e.label?s.getMathspeakFromText(e.label):this.controller.isItemSecret(e.id)?this.controller.s("graphing-calculator-narration-audio-trace-secret-expression",{index:e.secretIndex}):"table"===e.type&&this.focusedCell?this.controller.s("graphing-calculator-narration-audio-trace-expression-with-column",{index:e.displayIndex,column:this.focusedCell.location.column+1}):this.controller.s("shared-calculator-narration-expression-index",{index:e.displayIndex}):""},e.prototype.exitAudioTrace=function(t){var e;this.audioTraceActive&&(this.audioTraceActive=!1,this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/123"}),t=t||this.controller.s("graphing-calculator-text-audio-trace-off"),this.controller.dispatch({type:"toast/close"}),this.wasFocusInExpressionsView&&((e=this.agNavigator.getSelectedItem())&&this.controller.isItemSelectable(e.id)||(e=this.controller.getFirstFullyVisibleItem()),e&&this.controller.isItemSelectable(e.id)&&this.controller.dispatch({type:"move-focus-to-item",id:e.id,where:"table"===e.type&&void 0!==this.focusedCell?o.__assign({location:"cell"},this.focusedCell.location):"end"})),this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.stopAnimations(),this.sliderTraceActive=!1,this.sliderIndex=0,this.tonegen.stop(),this.tonegen.suspend(),this.agNavigator.reset(),this.lastSpokenBranch=1,this.grapher.traceLayer.setTraceInfo(void 0),this.grapher.redrawAllLayers(),h.alert(t),this.resumeAnimations())},e.prototype.isFocusInExpressionsView=function(){return!!this.controller.getFocusedItem()},e.prototype.canAudioTraceCurrentExp=function(){var t=this.agNavigator.getSelectedItem();return!!t&&("table"===t.type?!!this.agNavigator.getCurrentSketch():this.agNavigator.canTrace(t))},e.prototype.enterAudioTrace=function(t){var e,r,o=this,i=this.agNavigator.getSelectedItem(),a=i&&"table"!==i.type&&!this.agNavigator.canTrace(i)?this.getExpressionAriaLabel(i.id):void 0,n=!1;if(this.audioTraceActive||(this.wasFocusInExpressionsView=this.isFocusInExpressionsView(),i&&a&&h.queue(this.controller.s("graphing-calculator-narration-audio-trace-unsupported-expression",{expression:a})),n=!!a||!this.wasFocusInExpressionsView),n)e=this.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!0});else if(!a){if(i&&"expression"===i.type&&i.formula&&i.formula.error)return this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-graph-to-trace")}});i&&"table"===i.type?(r=g.getSelectedCell(i),this.focusedCell&&this.focusedCell.tableId===i.id&&(!r||r.column===this.focusedCell.location.column&&r.row===this.focusedCell.location.row)||(this.focusedCell=void 0!==r?{tableId:i.id,location:r}:void 0)):this.focusedCell=void 0,e=this.agNavigator.getCurrentSketch()}if(!e)return this.agNavigator.reset(),this.lastSpokenBranch=1,this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-graph-to-trace")}});var s=e.branches[0].graphMode;return s===c.IMPLICIT?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-implicit-support")}})):s===c.PARAMETRIC?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-parametric-support")}})):s===c.POLAR?(this.exitAudioTrace(),this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-no-polar-support")}})):(this.agNavigator.reset(),this.agNavigator.computeStepSizes(),this.lastSpokenBranch=1,this.grapher.traceLayer.clearOpenedPOI(),this.grapher.redrawAllLayers(),this.audioTraceActive||(this.controller.isKeypadEnabled()||this.controller.dispatch({type:"toast/show",toast:{message:this.controller.s("graphing-calculator-text-audio-trace-on"),noAria:!0,onHide:function(){return o.exitAudioTrace()},hideAfter:0}}),a&&e&&h.queue(this.controller.s("graphing-calculator-narration-audio-trace-tracing-different-expression",{expression:this.getExpressionAriaLabel(e.id)})),h.queue(this.controller.s("graphing-calculator-text-audio-trace-on")),this.pauseAnimations(),this.queueAnimatingPoints(!1),this.tonegen.resume(),t&&t.fromKeypad||(h.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-use-arrow-keys")),this.tonegen.getPlaybackSupported()&&h.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-hear-graph")),1<this.agNavigator.getTraceableExpressionCount()&&(l.IS_APPLE?h.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-mac")):h.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-expression-navigation-windows"))),l.IS_APPLE?h.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-mac")):h.queue(this.controller.s("graphing-calculator-narration-audio-trace-instructions-disable-windows"))),this.wasFocusInExpressionsView&&(this.controller.find$(".dcg-graph-outer").one("focusin",function(){setTimeout(function(){h.alert()},0)}),this.controller.focusGraphPaper())),this.agNavigator.moveToOrigin(),h.queue(this.getExpressionAriaLabel(e.id)),this.reportAudioTrace({playSound:!1}),this.wasFocusInExpressionsView||h.alert(),this.audioTraceActive=!0,void(this.controller.isKeypadEnabled()&&this.controller.dispatch({type:"keypad/audio"})))},e.prototype.checkIfSelectedItemChanged=function(t){this.lastSelectedId!==t&&(this.lastSelectedId=t,this.audioTraceActive&&(t?(h.queue(this.getExpressionAriaLabel(t)),this.exitSliderTrace(),this.agNavigator.updatePOI(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),h.alert()):this.exitAudioTrace()))},e.prototype.pauseAnimations=function(){var e=this;this.sliderArray.length=0,this.controller.getAllModelsWithSliders().forEach(function(t){t.slider.isPlaying&&(e.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1}),e.sliderArray.push(t))})},e.prototype.resumeAnimations=function(){if(0!==this.sliderArray.length){for(var t=0;t<this.sliderArray.length;t++){var e=this.sliderArray[t];!0!==e.slider.isPlaying&&this.controller.dispatch({type:"set-slider-isplaying",id:e.id,isPlaying:!0})}this.sliderArray.length=0}},e.prototype.stopAnimations=function(){var e=this;this.controller.getAllModelsWithSliders().forEach(function(t){t.slider.isPlaying&&e.controller.dispatch({type:"set-slider-isplaying",id:t.id,isPlaying:!1})})},e.prototype.getAnimatingVars=function(){for(var t=[],e=0;e<this.sliderArray.length;e++)t.push('"'+n.getAssignment(this.sliderArray[e])+'"');return t},e.prototype.hasActiveSliders=function(){for(var t=this.controller.getAllModelsWithSliders(),e=0;e<t.length;e++)if(t[e].slider.isPlaying)return!0;return!1},e.prototype.queueAnimatingPoints=function(t){1===this.sliderArray.length?h.queue(this.controller.s("graphing-calculator-narration-audio-trace-one-slider-paused")):1<this.sliderArray.length?h.queue(this.controller.s("graphing-calculator-narration-audio-trace-multiple-sliders-paused",{sliders:this.sliderArray.length})):t&&h.queue(this.controller.s("graphing-calculator-narration-audio-trace-no-sliders-paused"))},e.prototype.queueSliderLatex=function(){this.hasActiveSliders()||this.tonegen.stop();var t=this.getSelectedSlider();t?h.queue(t.latex):h.queue(this.controller.s("graphing-calculator-narration-audio-trace-slider-value-unknown"))},e.prototype.getSelectedSlider=function(){var t=this.controller.getAllModelsWithSliders();return this.sliderIndex<=t.length-1?t[this.sliderIndex]:null},e.prototype.incrementSliderValue=function(){this.adjustSlider("up")},e.prototype.decrementSliderValue=function(){this.adjustSlider("down")},e.prototype.incrementBigSliderValue=function(){this.adjustSlider("bigup")},e.prototype.decrementBigSliderValue=function(){this.adjustSlider("bigdown")},e.prototype.nextSlider=function(){this.adjustSlider("next")},e.prototype.prevSlider=function(){this.adjustSlider("prev")},e.prototype.sliderMin=function(){this.adjustSlider("min")},e.prototype.sliderMax=function(){this.adjustSlider("max")},e.prototype.adjustSlider=function(t){var e=this.getSelectedSlider();if(e){var r=e.latex,o=this.controller.getAllModelsWithSliders().length;switch(t){case"up":case"down":case"bigup":case"bigdown":case"min":case"max":this.controller.dispatch({type:"adjust-slider-by-keyboard",id:e.id,adjustment:t}),this.queueSliderLatex(),h.alert();break;case"next":return this.sliderIndex++,this.sliderIndex>=o&&(h.queue(this.controller.s("graphing-calculator-narration-audio-trace-last-slider")),this.sliderIndex=o-1),this.queueSliderLatex(),void h.alert();case"prev":return this.sliderIndex--,this.sliderIndex<0&&(h.queue(this.controller.s("graphing-calculator-narration-audio-trace-first-slider")),this.sliderIndex=0),this.queueSliderLatex(),void h.alert()}e.slider.isPlaying||r===e.latex||(this.queueSliderLatex(),h.alert())}else h.queue(this.controller.s("graphing-calculator-narration-audio-trace-cannot-change-slider-value"))},e.prototype.toggleAudioTrace=function(){this.audioTraceActive?this.exitAudioTrace():this.enterAudioTrace()},e.prototype.toggleSliderTrace=function(){this.sliderTraceActive?this.exitSliderTrace():this.enterSliderTrace()},e.prototype.enterSliderTrace=function(){this.sliderTraceActive||((this.sliderIndex=0)!==this.controller.getAllModelsWithSliders().length?(h.queue(this.controller.s("graphing-calculator-narration-slider-trace-on")),this.queueSliderLatex(),this.sliderTraceActive=!0):(h.queue(this.controller.s("graphing-calculator-narration-slider-trace-no-sliders")),this.sliderTraceActive=!1),h.alert())},e.prototype.exitSliderTrace=function(){this.sliderTraceActive&&(h.queue(this.controller.s("graphing-calculator-narration-slider-trace-off")),this.sliderTraceActive=!1,this.sliderIndex=0,h.alert())},e.prototype.recomputePoints=function(){this.audioTraceActive&&(this.tonegen.isAnimating()||(this.agNavigator.updatePOI(),this.agNavigator.updateSampledPoints(),this.agNavigator.updateCurrentPoint(),this.agNavigator.resetTracePoint(),this.agNavigator.computeStepSizes()))},e.prototype.reportAndMoveToPrevPoint=function(){h.clear(),this.agNavigator.prevPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},e.prototype.reportAndMoveToNextPoint=function(){h.clear(),this.agNavigator.nextPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},e.prototype.reportAndMoveToOrigin=function(){h.clear(),this.agNavigator.moveToOrigin(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},e.prototype.reportAndMoveToPrevPOI=function(){h.clear(),this.agNavigator.prevPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},e.prototype.reportAndMoveToNextPOI=function(){h.clear(),this.agNavigator.nextPOI(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},e.prototype.reportAndMoveToFirstPoint=function(){h.clear(),this.agNavigator.firstPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},e.prototype.reportAndMoveToLastPoint=function(){h.clear(),this.agNavigator.lastPoint(),this.reportAudioTrace(),this.controller.dispatch({type:"render"})},e.prototype.reportX=function(){h.clear(),this.reportAudioTrace({propToSpeak:"x",playSound:!1})},e.prototype.reportY=function(){h.clear(),this.reportAudioTrace({propToSpeak:"y",playSound:!1})},e.prototype.reportColor=function(){h.clear();var t=this.agNavigator.getCurrentSketch();t?h.queue(y.getColorName(this.controller,t.color)):h.queue(this.controller.s("graphing-calculator-narration-color-unknown")),h.alert()},e.prototype.reportPOICount=function(){h.clear();var t=this.agNavigator.getCurrentSketch(),e=t?t.getPOI().length:0;h.alert(this.controller.s("graphing-calculator-narration-audio-trace-poi-count",{x:e}))},e.prototype.reportType=function(){h.clear(),this.reportAudioTrace({propToSpeak:"type",playSound:!1})},e.prototype.reportBranch=function(){h.clear(),this.reportAudioTrace({propToSpeak:"branch",playSound:!1})},e.prototype.describePoint=function(){h.clear(),this.reportAudioTrace({playSound:!1}),h.alert()},e.prototype.playCurrentPoint=function(){var t=this.agNavigator.getCurrentPoint();t&&this.tonegen.playPoint(t,this.grapher.getCurrentViewport())},e.prototype.reportAudioTrace=function(t){var e,r,o,i=this.agNavigator.getCurrentPoint();i&&(e=t&&t.propToSpeak,r=!t||void 0===t.playSound||t.playSound,o=!t||void 0===t.speakCoordinates||t.speakCoordinates,this.tonegen.stop(),r&&this.playCurrentPoint(),o&&(this.queueCoordinates(i,e),setTimeout(function(){h.alert()},e?0:100)))},e.prototype.adjustPlaybackSpeed=function(t){if(!(t<0||t>=r.audioSpeedOptions.length)){this.audioSpeedIndex=t;var e=r.audioSpeedOptions[t];return this.tonegen.setAudioSpeed(e.speed),h.alert(this.controller.s("graphing-calculator-narration-audio-trace-playback-speed",{speed:e.displayedSpeed}))}},e.prototype.speedUp=function(){this.adjustPlaybackSpeed(this.audioSpeedIndex+1)},e.prototype.speedDown=function(){this.adjustPlaybackSpeed(this.audioSpeedIndex-1)},e.prototype.adjustVolume=function(t){h.clear();var e=this.tonegen.getAudioVolume(),r="up"===t?Math.min(100,Math.round(100*(e+.1))):Math.max(0,Math.round(100*(e-.1)));this.tonegen.setAudioVolume(r/100),this.playCurrentPoint(),h.alert(this.controller.s("graphing-calculator-narration-audio-trace-volume",{volume:r}))},e.prototype.zoom=function(t){this.grapher.viewportController.zoom(t)},e.prototype.getFocusedCell=function(){return this.focusedCell},e.prototype.setFocusedCell=function(t){this.focusedCell=t},e.prototype.getAudioTraceActive=function(){return this.audioTraceActive},e.prototype.hearGraph=function(){var t,e=this;h.clear(),this.tonegen.getPlaybackSupported()?(this.tonegen.stop(),(t=this.agNavigator.getCurrentSketch())&&d.canPlaySketch(t)?(this.isTracing=!0,h.alert(this.controller.s("graphing-calculator-narration-audio-trace-playing-graph")),clearTimeout(this.playTimeout),this.playTimeout=setTimeout(function(){return e.tonegen.playSketch(t,e.grapher.getCurrentViewport())},500)):h.alert(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-trace-this-expression"))):h.alert(this.controller.s("graphing-calculator-narration-audio-trace-unable-to-play-audio"))},e.prototype.stopGraph=function(){this.tonegen.getPlaybackSupported()&&this.tonegen.stop()},e.prototype.getIsTracing=function(){return this.isTracing},e.prototype.getAudioSpeedIndex=function(){return this.audioSpeedIndex},e);function e(t,e){var r=this;this.grapher=e,this.controller=t,this.audioTraceActive=!1,this.isTracing=!1,this.wasFocusInExpressionsView=!1,this.focusedCell=void 0,this.sliderTraceActive=!1,this.sliderIndex=0,this.sliderArray=[],this.lastSpokenBranch=1,this.agNavigator=new i.default(t,this,this.grapher),this.tonegen=new d.default({audioPointMove:function(t,e){r.agNavigator.drawTrace(r.agNavigator.getPoint(t,e))},animationFinished:function(){r.recomputePoints(),r.isTracing&&(r.isTracing=!1,r.controller.dispatch({type:"render"}))}}),this.audioSpeedIndex=2,this.tonegen.suspend()}r.default=t});

define('loadcss!graphing-calc/keypads/audio', function(){});
define('graphing-calc/keypads/audio',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad","keypad/btn","../../lib/tooltip","graphing/audiograph","shared/dcgviews/localize","loadcss!./audio"],function(require,e,t,n,o,a,c,i,r,s,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d,u=n.Components,p=u.If,g=u.IfElse,h=(d=o.default,t.__extends(v,d),v.prototype.template=function(){var e=this;return n.createElement(c.default,{controller:this.props.controller},n.createElement("div",{class:n.const("dcg-audio-keypad-container")},n.createElement("div",{class:n.const("dcg-audio-keypad-column dcg-playback-column")},g(function(){return e.controller.isAudioTracing()},{true:function(){return n.createElement(i.default,{command:n.const("stop-graph"),colspan:e.const(1),style:e.const("blue"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"stop-graph"})}},n.createElement("span",{class:n.const("dcg-stop-icon-container")},n.createElement("span",{class:n.const("dcg-stop-icon")})),n.createElement("span",null,function(){return e.controller.s("graphing-calculator-button-audio-trace-stop-graph")}))},false:function(){return n.createElement(i.default,{command:n.const("hear-graph"),colspan:e.const(1),style:e.const("blue"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"hear-graph"})}},n.createElement("span",{class:n.const("dcg-play-icon-container")},n.createElement("i",{class:n.const("dcg-icon-play")})),n.createElement("span",null,function(){return e.controller.s("graphing-calculator-button-audio-trace-hear-graph")}))}}),n.createElement("div",{class:n.const("dcg-key-nav-section")},a.view(this,"volume-down",{disabled:this.bindFn(this.isVolumeDownDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container"),role:n.const("heading"),"aria-level":n.const("2")},n.createElement("span",{class:n.const("dcg-key-nav-section-title")},function(){return e.controller.s("graphing-calculator-label-audio-trace-volume")}),n.createElement("span",{class:n.const("dcg-keypad-volume-value dcg-key-nav-section-value")},function(){return e.getAudioTraceVolume()})),a.view(this,"volume-up",{disabled:this.bindFn(this.isVolumeUpDisabled)})),n.createElement("div",{class:n.const("dcg-key-nav-section")},a.view(this,"speed-down",{disabled:this.bindFn(this.isSpeedDownDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container"),role:n.const("heading"),"aria-level":n.const("2")},n.createElement("span",{class:n.const("dcg-key-nav-section-title")},function(){return e.controller.s("graphing-calculator-label-audio-trace-speed")}),n.createElement("span",{class:n.const("dcg-keypad-speed-value dcg-key-nav-section-value")},function(){return e.getAudioTraceSpeed()})),a.view(this,"speed-up",{disabled:this.bindFn(this.isSpeedUpDisabled)})),a.view(this,"audio-trace-off",{style:"highlight"})),n.createElement("div",{class:n.const("dcg-audio-keypad-spacer")}),n.createElement("div",{class:n.const("dcg-audio-keypad-column dcg-navigation-column")},n.createElement("span",{class:n.const("dcg-key-section-title dcg-center-col"),role:n.const("heading"),"aria-level":n.const("2")},function(){return e.controller.s("graphing-calculator-heading-audio-trace-navigation")}),n.createElement("div",{class:n.const("dcg-key-nav-section dcg-center-col")},a.view(this,"previous-point",{disabled:this.bindFn(this.isPrevPointDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container"),role:n.const("heading"),"aria-level":n.const("2")},function(){return e.controller.s("graphing-calculator-label-audio-trace-point")}),a.view(this,"next-point",{disabled:this.bindFn(this.isNextPointDisabled)})),n.createElement("div",{class:n.const("dcg-key-nav-section")},a.view(this,"previous-poi",{disabled:this.bindFn(this.isPrevPOIDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container dcg-poi-section-container"),role:n.const("heading"),"aria-level":n.const("2")},n.createElement(l.Localize,{i18n:this.const(this.controller),key:this.const("graphing-calculator-heading-keypad-audio-trace-point-of-interest")},n.createElement("span",{class:n.const("dcg-key-nav-section-value")},n.const("Point")),n.createElement("span",{class:n.const("dcg-key-nav-section-title")},n.const("of Interest")))),a.view(this,"next-poi",{disabled:this.bindFn(this.isNextPOIDisabled)})),n.createElement("div",{class:n.const("dcg-key-nav-section dcg-center-col")},a.view(this,"previous-curve",{disabled:this.bindFn(this.isPrevCurveDisabled)}),n.createElement("div",{class:n.const("dcg-key-nav-section-title-container"),role:n.const("heading"),"aria-level":n.const("2")},function(){return e.controller.s("graphing-calculator-label-audio-trace-curve")}),a.view(this,"next-curve",{disabled:this.bindFn(this.isNextCurveDisabled)}))),n.createElement("div",{class:n.const("dcg-audio-keypad-spacer")}),n.createElement("div",{class:n.const("dcg-audio-keypad-column dcg-screenreader-options")},n.createElement("span",{class:n.const("dcg-key-section-title"),role:n.const("heading"),"aria-level":n.const("2")},function(){return e.layoutWidth()<=460?e.controller.s("graphing-calculator-heading-audio-trace-describe"):e.controller.s("graphing-calculator-heading-audio-trace-screen-reader")},n.createElement(r.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-audio-trace-need-screen-reader")},gravity:this.const("s"),targetClickBehavior:this.const("stick")},n.createElement("i",{class:n.const("dcg-icon-question-sign")}))),n.createElement(i.default,{command:n.const("describe-point"),colspan:this.const(1),style:this.const("default"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"describe-point"})}},n.createElement("span",null,function(){return e.layoutWidth()<=460?e.controller.s("graphing-calculator-button-audio-trace-describe-point-short"):e.controller.s("graphing-calculator-button-audio-trace-describe-point")})),n.createElement(i.default,{command:n.const("describe-curve"),colspan:this.const(1),style:this.const("default"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"describe-curve"})}},n.createElement("span",null,function(){return e.layoutWidth()<=460?e.controller.s("graphing-calculator-button-audio-trace-describe-curve-short"):e.controller.s("graphing-calculator-button-audio-trace-describe-curve")})),n.createElement(p,{predicate:function(){return e.controller.getCanShowKeyboardShortcuts()}},function(){return n.createElement("div",{class:n.const("dcg-keypad-btn-container dcg-keypad-link")},n.createElement("a",{class:n.const("dcg-shared-dark-gray-link"),role:n.const("link"),"dcg-command":n.const("keyboard-shortcuts"),onTap:function(){e.dispatch({type:"keypad/audio-trace",command:"keyboard-shortcuts"})}},n.createElement("i",{class:n.const("dcg-icon-keyboard")}),n.createElement("span",null,function(){return e.layoutWidth()<=700?e.controller.s("graphing-calculator-link-audio-trace-shortcuts"):e.controller.s("graphing-calculator-link-audio-trace-keyboard-shortcuts")})))}))))},v.prototype.layoutWidth=function(){return this.controller.getLayoutMeasurements().width},v.prototype.isPrevPointDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToPrevPoint()},v.prototype.isNextPointDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToNextPoint()},v.prototype.isPrevPOIDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToPrevPOI()},v.prototype.isNextPOIDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToNextPOI()},v.prototype.isPrevCurveDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToPrevCurve()},v.prototype.isNextCurveDisabled=function(){var e=this.controller.getAudioGraph();return!e||!e.agNavigator.canMoveToNextCurve()},v.prototype.getAudioTraceVolume=function(){var e=this.controller.getAudioGraph();return e?100*e.tonegen.getAudioVolume()+"%":""},v.prototype.isVolumeDownDisabled=function(){var e=this.controller.getAudioGraph();return!e||e.tonegen.getAudioVolume()<=0},v.prototype.isVolumeUpDisabled=function(){var e=this.controller.getAudioGraph();return!e||1<=e.tonegen.getAudioVolume()},v.prototype.getAudioTraceSpeed=function(){var e=this.controller.getAudioGraph();return e?s.audioSpeedOptions[e.getAudioSpeedIndex()].displayedSpeed:""},v.prototype.isSpeedDownDisabled=function(){var e=this.controller.getAudioGraph();return!e||e.getAudioSpeedIndex()<=0},v.prototype.isSpeedUpDisabled=function(){var e=this.controller.getAudioGraph();return!e||e.getAudioSpeedIndex()===s.audioSpeedOptions.length-1},v);function v(){return null!==d&&d.apply(this,arguments)||this}e.default=h});
define('graphing-calc/keypads/trig',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(require,t,e,i,n,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var c,o=i.Components.If,a=(c=n.default,e.__extends(d,c),d.prototype.template=function(){var t=this;return i.createElement(s.default,{controller:this.props.controller},this.b("sin"),this.b("arcsin"),this.b("sinh"),this.b("cos"),this.b("arccos"),this.b("cosh"),this.b("tan"),this.b("arctan"),this.b("tanh"),i.createElement(o,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("csc")}),i.createElement(o,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("arccsc")}),i.createElement(o,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("csch")}),i.createElement(o,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("sec")}),i.createElement(o,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("arcsec")}),i.createElement(o,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("sech")}),i.createElement(o,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("cot")}),i.createElement(o,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("arccot")}),i.createElement(o,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("coth")}))},d.prototype.b=function(t){return r.view(this,t,{style:"popover"})},d.prototype.isNotRestricted=function(){return!this.controller.areFunctionsRestricted()},d);function d(){return null!==c&&c.apply(this,arguments)||this}t.default=a});
define('graphing-calc/keypads/stats',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(require,t,e,i,n,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=i.Components.If,b=(o=n.default,e.__extends(c,o),c.prototype.template=function(){var t=this;return i.createElement(s.default,{controller:this.props.controller},this.b("total"),this.b("length"),this.b("mean"),this.b("median"),this.b("min"),this.b("max"),this.b("quartile"),this.b("quantile"),this.b("stdev"),this.b("stdevp"),i.createElement(a,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("mad")}),this.b("var"),i.createElement(a,{predicate:this.bindFn(this.isNotRestricted)},function(){return t.b("cov")}),this.b("corr"),this.b("spearman"),this.b("nCr"),this.b("nPr"),this.b("stats"),i.createElement(a,{predicate:this.bindFn(this.areDistributionsEnabled)},function(){return t.b("ttest")}),i.createElement(a,{predicate:this.bindFn(this.areDistributionsEnabled)},function(){return t.b("tscore")}),i.createElement(a,{predicate:this.bindFn(this.areDistributionsEnabled)},function(){return t.b("ittest")}))},c.prototype.b=function(t){return r.view(this,t,{style:"popover-short"})},c.prototype.isNotRestricted=function(){return!this.controller.areFunctionsRestricted()},c.prototype.areDistributionsEnabled=function(){return this.controller.areDistributionsEnabled()},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.default=b});
define('graphing-calc/keypads/misc',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(require,t,e,o,i,s,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,h=o.Components.If,l=(n=i.default,e.__extends(u,n),u.prototype.template=function(){var t=this;return o.createElement(r.default,{controller:this.props.controller},this.b("join"),this.b("sort"),this.b("shuffle"),this.b("lcm"),this.b("gcd"),this.b("mod"),this.b("ceil"),this.b("floor"),this.b("round"),this.b("sign"),this.b("%"),this.b("exp"),this.b("ln"),this.b("nthroot"),this.b("polygon"),this.b("log"),this.b("loga"),this.b("ddx"),this.b("int"),this.b("sum"),this.b("prod"),o.createElement(h,{predicate:this.bindFn(this.shouldShowGeometryButtons)},function(){return t.b("distance")}),o.createElement(h,{predicate:this.bindFn(this.shouldShowGeometryButtons)},function(){return t.b("midpoint")}))},u.prototype.b=function(t){return s.view(this,t,{style:this.shouldShowGeometryButtons()?"popover-very-short":"popover-short"})},u.prototype.shouldShowGeometryButtons=function(){return this.controller.areFunctionsRestricted()&&this.controller.areGeometryFunctionsForceEnabled()},u);function u(){return null!==n&&n.apply(this,arguments)||this}t.default=l});
define('graphing-calc/keypads/distributions',["require","exports","tslib","dcgview","./dcgview-graphing","keypad/keys","keypad/keypad"],function(require,t,e,s,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=i.default,e.__extends(c,o),c.prototype.template=function(){var t=this;return s.createElement(r.default,{controller:this.props.controller},s.createElement("div",{class:s.const("dcg-section-heading")},function(){return t.controller.s("graphing-calculator-heading-dist-tab-visualizations")},s.createElement("a",{href:s.const("https://support.desmos.com/hc/en-us/articles/360022405991"),target:s.const("_blank"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-dist-tab-visualizations")}},s.createElement("i",{class:s.const("dcg-icon-question-sign")}))),this.b("histogram"),this.b("dotplot"),this.b("boxplot"),s.createElement("div",{class:s.const("dcg-section-heading")},function(){return t.controller.s("graphing-calculator-heading-dist-tab-distributions")},s.createElement("a",{href:s.const("https://support.desmos.com/hc/en-us/articles/360022401451#distributions"),target:s.const("_blank"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-dist-tab-distributions")}},s.createElement("i",{class:s.const("dcg-icon-question-sign")}))),this.b("normaldist"),this.b("tdist"),this.b("poissondist"),this.b("binomialdist"),this.b("uniformdist"),s.createElement("div",{class:s.const("dcg-popover-section-separator")}),this.b("pdf"),this.b("cdf"),this.b("inversecdf"),this.b("random"))},c.prototype.b=function(t){return n.view(this,t,{style:"popover-short"})},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.default=a});

define('loadcss!graphing-calc/keypads/functions-popover', function(){});
define('graphing-calc/keypads/functions-popover',["require","exports","tslib","dcgview","./dcgview-graphing","./trig","./stats","./misc","./distributions","loadcss!./functions-popover"],function(require,t,n,e,c,o,r,s,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,l=e.Components,u=l.SwitchUnion,d=l.If,p=(i=c.default,n.__extends(g,i),g.prototype.template=function(){var t=this;return e.createElement("div",{class:e.const("dcg-functions-popover dcg-popover dcg-top")},e.createElement("div",{class:e.const("dcg-popover-interior")},e.createElement("div",{class:e.const("dcg-popover-header")},e.createElement("span",{role:e.const("button"),"dcg-command":e.const("trigTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"trig"===t.controller.getKeypadFunctionsTab()}},onTap:function(){t.dispatch({type:"keypad/set-functions-tab",tab:"trig"})}},function(){return t.controller.s("graphing-calculator-button-functions-menu-trig")}),e.createElement("span",{role:e.const("button"),"dcg-command":e.const("statsTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"stats"===t.controller.getKeypadFunctionsTab()}},onTap:function(){t.dispatch({type:"keypad/set-functions-tab",tab:"stats"})}},function(){return t.controller.s("graphing-calculator-button-functions-menu-stats")}),e.createElement(d,{predicate:function(){return t.controller.areDistributionsEnabled()}},function(){return e.createElement("span",{role:e.const("button"),"dcg-command":e.const("distTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"dist"===t.controller.getKeypadFunctionsTab()}},onTap:function(){t.dispatch({type:"keypad/set-functions-tab",tab:"dist"})}},function(){return t.controller.s("graphing-calculator-button-functions-menu-dist")})}),e.createElement("span",{role:e.const("button"),"dcg-command":e.const("miscTab"),class:function(){return{"dcg-heading":!0,"dcg-selected":"misc"===t.controller.getKeypadFunctionsTab()}},onTap:function(){t.dispatch({type:"keypad/set-functions-tab",tab:"misc"})}},function(){return t.controller.s("graphing-calculator-button-functions-menu-misc")})),e.createElement("div",{class:e.const("dcg-interior-buttons")},u(function(){return t.controller.getKeypadFunctionsTab()},{trig:function(){return e.createElement(o.default,{controller:t.props.controller})},stats:function(){return e.createElement(r.default,{controller:t.props.controller})},misc:function(){return e.createElement(s.default,{controller:t.props.controller})},dist:function(){return e.createElement(a.default,{controller:t.props.controller})}}))),e.createElement("div",{class:e.const("dcg-arrow")}))},g);function g(){return null!==i&&i.apply(this,arguments)||this}t.default=p});

define('loadcss!graphing-calc/keypads/graphing-keypad-container', function(){});
define('graphing-calc/keypads/main',["require","exports","tslib","dcgview","./dcgview-graphing","./qwerty","./qwerty-capital","./numbers","./letters","./letters-capital","./audio","./functions-popover","jquery","underscore","../../lib/tooltip","loadcss!./graphing-keypad-container"],function(require,t,e,o,n,r,i,l,c,a,s,d,p,u,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var y,f=o.Components,g=f.SwitchUnion,m=f.If,b=(y=n.default,e.__extends(k,y),k.prototype.template=function(){var t=this;return o.createElement("div",{class:o.const("dcg-keypad"),role:o.const("complementary"),"aria-label":o.const("Keypad")},o.createElement("div",{class:o.const("dcg-keys-container"),style:this.bindFn(this.computeStyles),didMount:this.bindFn(this.didMountContainer),"aria-hidden":function(){return!t.controller.isKeypadOpen()}},o.createElement("div",{class:o.const("dcg-keys-background dcg-do-not-blur"),style:function(){return{background:t.controller.getPillboxBackgroundColor()}}},o.createElement("div",{class:o.const("dcg-keys")},g(function(){return t.controller.getKeypadLayout()},{letters:function(){return o.createElement(r.default,{controller:t.props.controller})},capitalLetters:function(){return o.createElement(i.default,{controller:t.props.controller})},mainNumbers:function(){return o.createElement(l.default,{controller:t.props.controller})},noQwertyLetters:function(){return o.createElement(c.default,{controller:t.props.controller})},noQwertyCapitalLetters:function(){return o.createElement(a.default,{controller:t.props.controller})},audio:function(){return o.createElement(s.default,{controller:t.props.controller})}}),o.createElement(m,{predicate:function(){return t.controller.isKeypadFunctionsPopoverOpen()}},function(){return o.createElement(d.default,{controller:t.props.controller})})),o.createElement(m,{predicate:this.bindFn(this.isHideKeypadButtonVisible)},function(){return o.createElement("div",{class:o.const("dcg-minimize-keypad-container")},o.createElement(h.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-hide-keypad")},gravity:t.const("ne"),offset:t.const({left:6})},o.createElement("div",{role:o.const("button"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-hide-keypad")},class:o.const("dcg-minimize-keypad"),style:function(){return{"border-bottom-color":t.controller.getPillboxBackgroundColor(),background:t.controller.getPillboxBackgroundColor()}},onTap:function(){t.controller.dispatch({type:"keypad/set-minimized",minimized:!0})}},o.createElement("i",{class:o.const("dcg-icon-keyboard")}),o.createElement("i",{class:o.const("dcg-icon-caret-down")}))))}))),o.createElement(m,{predicate:this.bindFn(this.isShowKeypadButtonVisible)},function(){return o.createElement("div",{class:o.const("dcg-show-keypad-container")},o.createElement(h.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-show-keypad")},gravity:t.const("ne")},o.createElement("div",{role:o.const("button"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-show-keypad")},class:o.const("dcg-btn-flat-gray dcg-show-keypad dcg-do-not-blur"),style:function(){return{background:t.controller.getPillboxBackgroundColor()}},onTap:function(){t.controller.dispatch({type:"keypad/set-minimized",minimized:!1})}},o.createElement("i",{class:o.const("dcg-icon-keyboard")}),o.createElement("i",{class:o.const("dcg-icon-caret-up dcg-do-not-blur")}))))}))},k.prototype.didMountContainer=function(t){this.containerElt=t},k.prototype.isShowKeypadButtonVisible=function(){return"none"===this.controller.getBrailleMode()&&!this.controller.isKeypadOpen()&&!this.controller.isNarrow()&&!this.controller.isInEditListMode()&&(this.controller.isListVisible()||this.controller.inAudioTraceMode())},k.prototype.isHideKeypadButtonVisible=function(){return"none"===this.controller.getBrailleMode()&&this.controller.isKeypadOpen()&&(!this.controller.isNarrow()||this.controller.inAudioTraceMode())},k.prototype.didMount=function(){this.updatePopoverPosition()},k.prototype.didUpdate=function(){this.updatePopoverPosition()},k.prototype.computeStyles=function(){var t={};return this.controller.isNarrow()||(t.transition="transform .3s, opacity .3s"),this.controller.isKeypadOpen()||(t.opacity="0",t.transform="translate3d(0, 255px, 0)"),t},k.prototype.updatePopoverPosition=function(){var t,e,o,n,r,i,l;this.controller.isKeypadFunctionsPopoverOpen()?(e={keypadTop:(t=this.controller.computeMajorLayout()).keypad.top,keypadWidth:t.keypad.width,keypadHeight:t.keypad.height,showToLeft:t.grapher.height<525},u.isEqual(e,this.__popoverCache)||(this.__popoverCache=e,n=(o=p(this.containerElt)).find("[dcg-command=functions]"),r=o.find(".dcg-functions-popover"),i=o.find(".dcg-arrow"),e.showToLeft?(r.removeClass("dcg-top").addClass("dcg-left"),l=e.keypadHeight-(n.offset().top-o.offset().top)-n.outerHeight()/2-2-10,i.css({left:"auto",bottom:l})):(r.removeClass("dcg-left").addClass("dcg-top"),i.css({left:r.width()-n.width()/2,bottom:"auto"})))):this.__popoverCache=void 0},k);function k(){return null!==y&&y.apply(this,arguments)||this}t.default=b});

define('loadcss!pillboxes', function(){});
define('main/graphpaper-branding-view',["require","exports","tslib","dcgview","loadcss!pillboxes"],function(require,e,n,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,c=t.Components.SwitchUnion,o=(r=t.Class,n.__extends(a,r),a.prototype.template=function(){var e=this;return this.controller=this.props.controller(),c(function(){return e.controller.getBrandingMode()},{"static-edit-link":function(){return t.createElement("div",{class:t.const("dcg-graphpaper-branding")},t.createElement("a",{href:function(){return e.controller.getEditLink()},target:t.const("_blank")},t.createElement("span",{class:t.const("dcg-powered-by"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-edit-on-desmos")}},function(){return e.controller.s("graphing-calculator-link-edit-on-desmos")}),t.createElement("i",{class:t.const("dcg-icon-desmos")})))},"edit-link":function(){return t.createElement("div",{class:t.const("dcg-graphpaper-branding")},t.createElement("span",{class:t.const("dcg-edit-branding"),onTap:function(){return e.controller.dispatch({type:"open-on-web"})}},t.createElement("span",{class:t.const("dcg-powered-by"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-edit-on-desmos")}},function(){return e.controller.s("graphing-calculator-link-edit-on-desmos")}),t.createElement("i",{class:t.const("dcg-icon-desmos")})))},"powered-by":function(){return t.createElement("div",{class:t.const("dcg-graphpaper-branding dcg-unclickable")},t.createElement("span",{class:t.const("dcg-powered-by"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-powered-by-desmos")}},function(){return e.controller.s("graphing-calculator-label-powered-by")}),t.createElement("i",{class:t.const("dcg-icon-desmos")}))}})},a);function a(){return null!==r&&r.apply(this,arguments)||this}e.default=o});

define('loadcss!main/settings-view', function(){});
define('main/settings-view',["require","exports","tslib","keys","scroll_helpers","lib/tooltip","dcgview","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","jquery","core/graphing-calc/json/graph-settings","core/math/evaluate-single-expression","graphing/viewport","dcgview-helpers/checkbox","main/manage-focus-helper","../dcgview-helpers/mathquill-braille-wrapper","main/mathquill-operators","loadcss!./settings-view"],function(require,t,e,r,n,o,i,s,c,a,l,g,u,d,p,h,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var b,f=i.Components,x=f.Input,y=f.If,v=(b=i.Class,e.__extends(A,b),A.prototype.template=function(){var e=this;return i.createElement(h.default,{latex:function(){return e.props.parent().getLimitLatex(e.props.limit())},controller:this.props.controller,ariaLabel:function(){return e.props.ariaLabel()},onBrailleInput:function(t){return e.props.parent().setLimitLatex(e.props.limit(),t)},onBrailleFocusedChanged:function(t){return e.props.parent().onFocusedChanged(e.props.limit(),t)},brailleShouldFocus:function(){return e.props.parent().getFocusedLimit()===e.props.limit()},hasError:function(){return e.props.parent().isLimitInvalid(e.props.limit())},onExpressionSizeExceeded:function(){},dataDCGLimit:function(){return e.props.limit()}},i.createElement(c.default,{isFocused:function(){return e.props.parent().getFocusedLimit()===e.props.limit()},latex:function(){return e.props.parent().getLimitLatex(e.props.limit())},capExpressionSize:function(){return e.props.parent().getCapExpressionSize()},config:this.bindFn(this.getMQConfig),getAriaLabel:function(){return e.props.ariaLabel()},getAriaPostLabel:this.const(""),onUserChangedLatex:function(t){return e.props.parent().setLimitLatex(e.props.limit(),t)},onFocusedChanged:function(t){return e.props.parent().onFocusedChanged(e.props.limit(),t)},hasError:this.const(!1),selectOnFocus:this.const(!0),needsSystemKeypad:function(){return e.props.needsSystemKeypad()}},i.createElement("span",{class:function(){return{"dcg-math-field":!0,"dcg-math-input":!0,"dcg-invalid":e.props.parent().isLimitInvalid(e.props.limit()),"dcg-focus":e.props.parent().getFocusedLimit()===e.props.limit()}},"data-dcg-limit":function(){return e.props.limit()}})))},A.prototype.getMQConfig=function(){return{autoOperatorNames:m.getAutoOperators({colorMethods:this.props.controller().canUseAdvancedStyling()})}},A);function A(){return null!==b&&b.apply(this,arguments)||this}var E,w=(E=i.Class,e.__extends(M,E),M.prototype.template=function(){var e=this;return this.controller=this.props.controller(),i.createElement("div",{class:i.const("dcg-settings-view-container")},i.createElement(o.Tooltip,{tooltip:function(){return e.controller.s("graphing-calculator-label-tooltip-graph-settings")},gravity:this.const("w")},i.createElement("div",{class:i.const("dcg-btn-flat-gray dcg-settings-pillbox dcg-action-settings"),role:i.const("button"),tabindex:i.const("0"),"aria-haspopup":i.const("true"),"aria-expanded":function(){return e.controller.isGraphSettingsOpen()},"aria-label":function(){return e.controller.s("graphing-calculator-label-tooltip-graph-settings")},onTap:this.bindFn(this.onTapSettingsButton),manageFocus:this.const(p.manageFocusHelper({controller:this.controller,location:{type:"settings",location:"icon"}})),style:function(){return{background:e.controller.getPillboxBackgroundColor()}}},i.createElement("i",{class:i.const("dcg-icon-wrench"),"aria-hidden":i.const("true")}))),i.createElement(y,{predicate:function(){return e.controller.isGraphSettingsOpen()}},function(){return i.createElement("div",{class:i.const("dcg-settings-container dcg-left dcg-popover dcg-constrained-height-popover"),style:e.bindFn(e.getContainerStyle),didMount:e.bindFn(e.didMountContainer),didUnmount:e.bindFn(e.didUnmountContainer)},i.createElement("div",{class:i.const("dcg-popover-interior"),role:i.const("complementary"),"aria-label":i.const("Graph Settings")},i.createElement("div",{class:i.const("dcg-visual-settings")},i.createElement("div",{class:function(){return{"dcg-modern-btn":!0,"dcg-action-projectormode":!0,"dcg-active":e.getProjectorMode()}},role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-projector-mode")},"aria-pressed":e.bindFn(e.getProjectorMode),onTap:e.bindFn(e.toggleProjectorMode),manageFocus:e.const(p.manageFocusHelper({controller:e.controller,location:{type:"settings",location:"projector-mode"}}))},function(){return e.controller.s("graphing-calculator-button-settings-projector-mode")}),i.createElement(d.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-reverse-contrast")},onChange:e.bindFn(e.toggleInvertedColors),checked:function(){return e.controller.getInvertedColors()},green:e.const(!0)},function(){return e.controller.s("graphing-calculator-label-settings-reverse-contrast")})),i.createElement(y,{predicate:function(){return e.controller.getBrailleControls()}},function(){return i.createElement("div",{class:i.const("dcg-braille-container")},i.createElement("div",{class:i.const("dcg-group-title")},function(){return e.controller.s("graphing-calculator-label-settings-braille-mode")}),i.createElement("div",{role:i.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-label-settings-braille-mode")},class:i.const("dcg-braille-options-buttons")},i.createElement("span",{class:function(){return{"dcg-modern-btn":!0,"dcg-braille-option":!0,"dcg-active":"none"===e.controller.getBrailleMode()}},role:i.const("button"),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"none"})},tabindex:i.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-off")},"aria-pressed":function(){return"none"===e.controller.getBrailleMode()}},function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-off")}),i.createElement("span",{class:function(){return{"dcg-modern-btn":!0,"dcg-braille-option":!0,"dcg-active":"nemeth"===e.controller.getBrailleMode()}},role:i.const("button"),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"nemeth"})},tabindex:i.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-nemeth")},"aria-pressed":function(){return"nemeth"===e.controller.getBrailleMode()}},function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-nemeth")}),i.createElement("span",{class:function(){return{"dcg-modern-btn":!0,"dcg-braille-option":!0,"dcg-active":"ueb"===e.controller.getBrailleMode()}},role:i.const("button"),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"ueb"})},tabindex:i.const(0),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-ueb")},"aria-pressed":function(){return"ueb"===e.controller.getBrailleMode()}},function(){return e.controller.s("graphing-calculator-button-settings-braille-mode-ueb")})),i.createElement(y,{predicate:function(){return"none"!==e.controller.getBrailleMode()}},function(){return i.createElement("div",{class:i.const("dcg-checkbox-title dcg-six-key-checkbox")},i.createElement(d.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-six-key-braille")},onChange:function(t){return e.controller.dispatch({type:"set-six-key-input",useSixKeyInput:t})},checked:function(){return e.controller.getSixKeyInput()},green:e.const(!0)},function(){return e.controller.s("graphing-calculator-label-settings-six-key-braille")}),i.createElement("a",{href:i.const("https://www.desmos.com/accessibility#braille"),class:i.const("dcg-six-key-info"),target:i.const("_blank")},i.createElement("i",{class:i.const("dcg-icon-question-sign")})))}))}),i.createElement("div",{class:i.const("dcg-top-section-flex dcg-grid-settings-container")},i.createElement("div",{class:i.const("dcg-grid-settings")},i.createElement(d.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-grid")},onChange:e.bindFn(e.toggleGrid),checked:e.bindFn(e.getShowGrid),green:e.const(!0)},function(){return e.controller.s("graphing-calculator-label-settings-grid")}),i.createElement(y,{predicate:e.bindFn(e.getShowGrid)},function(){return i.createElement("div",{class:i.const("dcg-circle-icon-group dcg-grid-group")},i.createElement("div",{class:function(){return{"dcg-circle-icon":!0,"dcg-action-cartesian":!0,"dcg-active":!e.getPolarMode()}},role:i.const("button"),tabindex:i.const("0"),ariaPressed:function(){return!e.getPolarMode()},"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-cartesian-grid")},onTap:e.bindFn(e.setCartesianMode)}),i.const(""),i.createElement("div",{class:function(){return{"dcg-circle-icon":!0,"dcg-action-polar":!0,"dcg-active":e.getPolarMode()}},role:i.const("button"),tabindex:i.const("0"),ariaPressed:function(){return e.getPolarMode()},"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-polar-grid")},onTap:e.bindFn(e.setPolarMode)}))}),i.createElement(d.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-arrows")},onChange:e.bindFn(e.toggleArrows),checked:function(){return e.getAxisArrowMode()!==l.AxisArrowModes.NONE},green:e.const(!0)},function(){return e.controller.s("graphing-calculator-label-settings-arrows")}),i.createElement(y,{predicate:function(){return e.getAxisArrowMode()!==l.AxisArrowModes.NONE}},function(){return i.createElement("div",{class:i.const("dcg-circle-icon-group dcg-arrow-group")},i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:function(){return{"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-active":e.getAxisArrowMode()===l.AxisArrowModes.BOTH}},"dcg-arrows":i.const("BOTH"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-show-both")},"aria-pressed":function(){return e.getAxisArrowMode()===l.AxisArrowModes.BOTH},onTap:function(){return e.setAxisArrowMode(l.AxisArrowModes.BOTH)}},i.createElement("i",{class:i.const("dcg-icon-arrows-two")})),i.const(""),i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:function(){return{"dcg-circle-icon":!0,"dcg-arrows":!0,"dcg-active":e.getAxisArrowMode()===l.AxisArrowModes.POSITIVE}},"dcg-arrows":i.const("POSITIVE"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-show-positive")},"aria-pressed":function(){return e.getAxisArrowMode()===l.AxisArrowModes.POSITIVE},onTap:function(){return e.setAxisArrowMode(l.AxisArrowModes.POSITIVE)}},i.createElement("i",{class:i.const("dcg-icon-arrows-one")})))})),i.createElement("div",{class:i.const("dcg-top-checkboxes-container")},i.createElement(d.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-axis-numbers")},onChange:e.bindFn(e.toggleAxisNumbers),checked:e.bindFn(e.getAxisNumbers),small:e.const(!0),green:e.const(!0)},function(){return e.controller.s("graphing-calculator-label-settings-axis-numbers")}),i.createElement(y,{predicate:function(){return e.getShowGrid()&&!e.getPolarMode()}},function(){return i.createElement(d.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-minor-gridlines")},onChange:e.bindFn(e.toggleMinorGridlines),checked:e.bindFn(e.getMinorGridlines),small:e.const(!0),green:e.const(!0)},function(){return e.controller.s("graphing-calculator-label-settings-minor-gridlines")})}),i.createElement(y,{predicate:function(){return e.controller.canUseAdvancedStyling()&&!e.getPolarMode()}},function(){return i.createElement(d.Checkbox,{checked:function(){return e.controller.getGraphSettings().restrictGridToFirstQuadrant},ariaLabel:e.const("One Quadrant"),onChange:function(t){return e.controller.dispatch({type:"set-graph-settings",restrictGridToFirstQuadrant:t})},small:e.const(!0),green:e.const(!0)},i.const("One Quadrant"))}),i.createElement(y,{predicate:function(){return!e.getSquareAxes()}},function(){return i.createElement("div",{role:i.const("button"),tabindex:i.const("0"),class:i.const("dcg-action-zoom-square dcg-btn-light-gray"),onTap:e.bindFn(e.zoomSquare)},function(){return e.controller.s("graphing-calculator-button-settings-zoom-square")})}))),i.createElement("div",{class:i.const("dcg-axes-settings-container")},i.createElement("div",{class:i.const("dcg-checkbox-title dcg-x-axis-title")},i.createElement(d.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-x-axis")},onChange:e.bindFn(e.toggleXAxis),checked:e.bindFn(e.getShowXAxis),green:e.const(!0)},function(){return e.controller.s("graphing-calculator-label-settings-x-axis")}),i.createElement(x,{class:e.const("dcg-axis-label dcg-x-axis-label"),placeholder:function(){return e.controller.s("graphing-calculator-label-settings-add-label")},"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-x-axis-label")},disabled:function(){return!e.getShowXAxis()||void 0},"aria-disabled":function(){return!e.getShowXAxis()||void 0},onInput:e.bindFn(e.onXAxisLabelInput),value:e.bindFn(e.getXAxisLabel)})),i.createElement("div",{class:i.const("dcg-editable-mathquill-container dcg-x-axis-options")},i.createElement(v,{limit:e.const("xmin"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-x-axis-min")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),i.createElement(s.default,{config:e.const({}),latex:e.const("\\le x\\le")},i.createElement("span",{class:i.const("dcg-interval-interior")})),i.createElement(v,{limit:e.const("xmax"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-x-axis-max")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),i.createElement(y,{predicate:function(){return!e.getPolarMode()}},function(){return i.createElement("span",{class:i.const("dcg-step-container")},i.createElement("span",{class:i.const("dcg-step-label"),"aria-hidden":i.const("true")},function(){return e.controller.s("graphing-calculator-label-settings-step")}),i.createElement(v,{limit:e.const("xstep"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-x-axis-step")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}))})),i.createElement("div",{class:i.const("dcg-checkbox-title dcg-y-axis-title")},i.createElement(d.Checkbox,{ariaLabel:function(){return e.controller.s("graphing-calculator-label-settings-y-axis")},onChange:e.bindFn(e.toggleYAxis),checked:e.bindFn(e.getShowYAxis),green:e.const(!0)},function(){return e.controller.s("graphing-calculator-label-settings-y-axis")}),i.createElement(x,{class:e.const("dcg-axis-label dcg-y-axis-label"),placeholder:function(){return e.controller.s("graphing-calculator-label-settings-add-label")},"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-y-axis-label")},disabled:function(){return!e.getShowYAxis()||void 0},"aria-disabled":function(){return!e.getShowYAxis()||void 0},onInput:e.bindFn(e.onYAxisLabelInput),value:e.bindFn(e.getYAxisLabel)})),i.createElement("div",{class:i.const("dcg-editable-mathquill-container dcg-y-axis-options")},i.createElement(v,{limit:e.const("ymin"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-y-axis-min")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),i.createElement(s.default,{config:e.const({}),latex:e.const("\\le y\\le")},i.createElement("span",{class:i.const("dcg-interval-interior")})),i.createElement(v,{limit:e.const("ymax"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-y-axis-max")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}),i.createElement(y,{predicate:function(){return!e.getPolarMode()}},function(){return i.createElement("span",{class:i.const("dcg-step-container")},i.createElement("span",{class:i.const("dcg-step-label"),"aria-hidden":i.const("true")},function(){return e.controller.s("graphing-calculator-label-settings-step")}),i.createElement(v,{limit:e.const("ystep"),ariaLabel:function(){return e.controller.s("graphing-calculator-narration-settings-y-axis-step")},needsSystemKeypad:function(){return!e.controller.isKeypadEnabled()},parent:e.const(e),controller:e.props.controller}))}))),i.createElement("div",{class:i.const("dcg-radiangroup"),role:i.const("group"),"aria-label":function(){return e.controller.s("graphing-calculator-narration-settings-angle")}},i.createElement("div",{class:function(){return{"dcg-action-radianmode":!0,"dcg-modern-btn":!0,"dcg-active":!e.getDegreeMode()}},"aria-pressed":function(){return!e.getDegreeMode()},role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-radians")},onTap:e.bindFn(e.setRadianMode)},function(){return e.controller.s("graphing-calculator-button-settings-radians")}),i.createElement("div",{class:function(){return{"dcg-action-degreemode":!0,"dcg-modern-btn":!0,"dcg-active":e.getDegreeMode()}},"aria-pressed":e.bindFn(e.getDegreeMode),role:i.const("button"),tabindex:i.const("0"),"aria-label":function(){return e.controller.s("graphing-calculator-button-settings-degrees")},onTap:e.bindFn(e.setDegreeMode),manageFocus:e.const(p.manageFocusHelper({controller:e.controller,location:{type:"settings",location:"degree-mode"}}))},function(){return e.controller.s("graphing-calculator-button-settings-degrees")})),i.createElement("div",{class:i.const("dcg-arrow")})))}))},M.prototype.didMountContainer=function(t){var n=this;this.node=t,a(document).on("dcg-tapstart.settings-view wheel.settings-view",function(t){n.eventShouldClosePopover(t)&&n.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:"keyboard"===t.device})}),a(document).on("keydown.settings-view",function(t){if("Esc"===r.lookup(t)&&n.controller.dispatch({type:"close-graph-settings",focusIconAfterClose:!0}),n.controller.isGraphSettingsOpen()&&"Tab"===r.lookup(t)&&!t.altKey&&!t.metaKey&&!t.ctrlKey){var e=n.controller.getFocusLocation();if(!e||"settings"!==e.type)return;t.shiftKey||"degree-mode"!==e.location?t.shiftKey&&"icon"===e.location&&(n.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"degree-mode"}}),t.preventDefault(),t.stopPropagation()):(n.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:"icon"}}),t.preventDefault(),t.stopPropagation())}})},M.prototype.didUnmountContainer=function(){a(document).off(".settings-view")},M.prototype.didUpdate=function(){var t;this.controller.isGraphSettingsOpen()&&((t=this.controller.getKeypadHeight())!==this.cachedKeypadHeight&&document.activeElement&&a(document.activeElement).closest(this.node).length&&n.scrollVisible(a(document.activeElement),a(this.node).find(".dcg-popover-interior"),50),this.cachedKeypadHeight=t)},M.prototype.eventShouldClosePopover=function(t){var e=a(t.target),n=!!e.closest(this.node).length,r=!!e.closest(".dcg-action-settings").length,o=this.isMathquillFocused()&&e.closest(".dcg-keypad").length,i=!!e.closest(".dcg-action-undo").length||!!e.closest(".dcg-action-redo").length;return!(n||r||o||i)},M.prototype.onTapSettingsButton=function(t){this.controller.dispatch({type:"toggle-graph-settings",focusOnOpen:"keyboard"===t.device})},M.prototype.isMathquillFocused=function(){return void 0!==this.getFocusedLimit()},M.prototype.getLimitLatex=function(t){return this.controller.getSettingsViewModel().limitLatex[t]},M.prototype.setLimitLatex=function(t,e){e!==this.controller.getSettingsViewModel().limitLatex[t]&&this.controller.dispatch({type:"set-axis-limit-latex",limit:t,latex:e})},M.prototype.getFocusedLimit=function(){var t=this.controller.getFocusLocation();if(t&&"settings"===t.type)return t.location},M.prototype.getInvalidLimits=function(){var t=!!this.controller.getGraphSettings().degreeMode,e=g.default(this.getLimitLatex("xmin"),t),n=g.default(this.getLimitLatex("xmax"),t),r=g.default(this.getLimitLatex("ymin"),t),o=g.default(this.getLimitLatex("ymax"),t),i=""===this.getLimitLatex("xstep")?0:g.default(this.getLimitLatex("xstep"),t),s=""===this.getLimitLatex("ystep")?0:g.default(this.getLimitLatex("ystep"),t),c={},a=new u.Viewport(e,n,r,o);return isFinite(e)&&isFinite(n)?(c.xmin=!a.isXValid(),c.xmax=c.xmin):(c.xmin=!isFinite(e),c.xmax=!isFinite(n)),isFinite(r)&&isFinite(o)?(c.ymin=!a.isYValid(),c.ymax=c.ymin):(c.ymin=!isFinite(r),c.ymax=!isFinite(o)),c.xstep=!isFinite(i)||i<0,c.ystep=!isFinite(s)||s<0,c},M.prototype.isLimitInvalid=function(t){return this.getInvalidLimits()[t]},M.prototype.onFocusedChanged=function(t,e){e?this.controller.dispatch({type:"set-focus-location",location:{type:"settings",location:t}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"settings",location:t}})},M.prototype.onXAxisLabelInput=function(t){this.controller.dispatch({type:"set-graph-settings",xAxisLabel:t})},M.prototype.onYAxisLabelInput=function(t){this.controller.dispatch({type:"set-graph-settings",yAxisLabel:t})},M.prototype.getXAxisLabel=function(){return this.controller.getGraphSettings().xAxisLabel},M.prototype.getYAxisLabel=function(){return this.controller.getGraphSettings().yAxisLabel},M.prototype.getShowXAxis=function(){return!!this.controller.getGraphSettings().showXAxis},M.prototype.toggleXAxis=function(){this.controller.dispatch({type:"set-graph-settings",showXAxis:!this.getShowXAxis()})},M.prototype.getShowYAxis=function(){return!!this.controller.getGraphSettings().showYAxis},M.prototype.toggleYAxis=function(){this.controller.dispatch({type:"set-graph-settings",showYAxis:!this.getShowYAxis()})},M.prototype.getAxisNumbers=function(){return!!this.controller.getGraphSettings().xAxisNumbers},M.prototype.toggleAxisNumbers=function(){var t=this.getAxisNumbers();this.controller.dispatch({type:"set-graph-settings",xAxisNumbers:!t,yAxisNumbers:!t,polarNumbers:!t})},M.prototype.getMinorGridlines=function(){return 0===this.controller.getGraphSettings().xAxisMinorSubdivisions},M.prototype.toggleMinorGridlines=function(){var t=this.getMinorGridlines()?1:0;this.controller.dispatch({type:"set-graph-settings",yAxisMinorSubdivisions:t,xAxisMinorSubdivisions:t})},M.prototype.getPolarMode=function(){return!!this.controller.getGraphSettings().polarMode},M.prototype.setPolarMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!0})},M.prototype.setCartesianMode=function(){this.controller.dispatch({type:"set-graph-settings",polarMode:!1})},M.prototype.getDegreeMode=function(){return!!this.controller.getGraphSettings().degreeMode},M.prototype.setRadianMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!1})},M.prototype.setDegreeMode=function(){this.controller.dispatch({type:"set-graph-settings",degreeMode:!0})},M.prototype.getProjectorMode=function(){return!!this.controller.getGraphSettings().config.projectorMode},M.prototype.toggleInvertedColors=function(){this.controller.dispatch({type:"set-inverted-colors",value:!this.controller.getInvertedColors()})},M.prototype.toggleProjectorMode=function(){this.controller.dispatch({type:"set-projector-mode",value:!this.getProjectorMode()})},M.prototype.getAxisArrowMode=function(){return this.controller.getGraphSettings().xAxisArrowMode},M.prototype.setAxisArrowMode=function(t){this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:t,yAxisArrowMode:t})},M.prototype.getShowGrid=function(){return this.controller.getGraphSettings().showGrid},M.prototype.toggleGrid=function(){this.controller.dispatch({type:"set-graph-settings",showGrid:!this.getShowGrid()})},M.prototype.toggleArrows=function(){var t=this.getAxisArrowMode()===l.AxisArrowModes.NONE?l.AxisArrowModes.BOTH:l.AxisArrowModes.NONE;this.controller.dispatch({type:"set-graph-settings",xAxisArrowMode:t,yAxisArrowMode:t})},M.prototype.getSquareAxes=function(){return!!this.controller.getGraphSettings().squareAxes},M.prototype.getContainerStyle=function(){return this.controller.getKeypadHeight()?"bottom: 0":""},M.prototype.zoomSquare=function(){this.controller.dispatch({type:"zoom",direction:"square"})},M.prototype.getCapExpressionSize=function(){return!!this.controller.getGraphSettings().config.capExpressionSize},M);function M(){return null!==E&&E.apply(this,arguments)||this}t.default=w});
define('main/zoom-buttons-view',["require","exports","tslib","dcgview","lib/tooltip","loadcss!pillboxes"],function(require,t,o,n,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,r=(l=n.Class,o.__extends(i,l),i.prototype.init=function(){this.controller=this.props.controller()},i.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-zoom-container")},n.createElement("div",{class:n.const("dcg-zoominout-pillbox dcg-btn-flat-gray dcg-btn-flat-gray-group"),style:function(){return{background:t.controller.getPillboxBackgroundColor()}}},n.createElement(e.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-tooltip-zoom-in")},gravity:this.const("w")},n.createElement("div",{class:n.const("dcg-action-zoomin"),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return t.controller.s("graphing-calculator-label-tooltip-zoom-in")},onTap:this.bindFn(this.zoomIn),style:function(){return{background:t.controller.getPillboxBackgroundColor()}}},n.createElement("i",{class:n.const("dcg-icon dcg-icon-plus"),"aria-hidden":n.const("true")}))),n.createElement(e.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-tooltip-zoom-out")},gravity:this.const("w")},n.createElement("div",{class:n.const("dcg-option dcg-action-zoomout dcg-tooltip-e"),tooltip:function(){return t.controller.s("graphing-calculator-label-tooltip-zoom-out")},role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return t.controller.s("graphing-calculator-label-tooltip-zoom-out")},onTap:this.bindFn(this.zoomOut),style:function(){return{background:t.controller.getPillboxBackgroundColor()}}},n.createElement("i",{class:n.const("dcg-icon dcg-icon-minus"),"aria-hidden":n.const("true")})))),n.createElement(e.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-tooltip-zoom-default")},gravity:this.const("w")},n.createElement("div",{class:function(){return{"dcg-btn-flat-gray":!0,"dcg-option":!0,"dcg-action-zoomrestore":!0,"dcg-disabled":t.getZoomedDefault()}},"aria-disabled":this.bindFn(this.getZoomedDefault),role:n.const("button"),tabindex:n.const("0"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-zoom-default")},onTap:this.bindFn(this.zoomRestore),style:function(){return{background:t.controller.getPillboxBackgroundColor()}}},n.createElement("i",{class:n.const("dcg-icon dcg-icon-home"),"aria-hidden":n.const("true")}))))},i.prototype.zoomIn=function(){this.controller.dispatch({type:"zoom",direction:"in"})},i.prototype.zoomOut=function(){this.controller.dispatch({type:"zoom",direction:"out"})},i.prototype.zoomRestore=function(){this.controller.dispatch({type:"zoom",direction:"default"})},i.prototype.getZoomedDefault=function(){return this.controller.getGraphSettings().zoomedDefault},i);function i(){return null!==l&&l.apply(this,arguments)||this}t.default=r});
define('main/reset-button-view',["require","exports","tslib","dcgview","lib/tooltip","loadcss!pillboxes"],function(require,t,e,o,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,l=(n=o.Class,e.__extends(i,n),i.prototype.init=function(){this.controller=this.props.controller()},i.prototype.template=function(){var t=this;return o.createElement("div",{class:o.const("dcg-reset-container")},o.createElement(r.Tooltip,{tooltip:function(){return t.controller.s("graphing-calculator-label-tooltip-reset")},gravity:this.const("w")},o.createElement("div",{class:o.const("dcg-reset-pillbox dcg-action-reset dcg-btn-flat-gray"),role:o.const("button"),tabindex:o.const("0"),"aria-label":function(){return t.controller.s("graphing-calculator-label-tooltip-reset")},onTap:this.bindFn(this.reset),style:function(){return{background:t.controller.getPillboxBackgroundColor()}}},o.createElement("i",{class:o.const("dcg-icon dcg-icon-reset"),"aria-hidden":o.const("true")}))))},i.prototype.reset=function(){this.controller.dispatch({type:"reset-graph"})},i);function i(){return null!==n&&n.apply(this,arguments)||this}t.default=l});
define('main/pillbox-view',["require","exports","tslib","dcgview","./graphpaper-branding-view","./settings-view","./zoom-buttons-view","./reset-button-view","loadcss!pillboxes"],function(require,t,e,o,n,r,l,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,c=o.Components.If,u=(s=o.Class,e.__extends(a,s),a.prototype.init=function(){this.controller=this.props.controller()},a.prototype.template=function(){var t=this;return o.createElement("div",null,o.createElement(c,{predicate:this.bindFn(this.shouldShowContainer)},function(){return o.createElement("div",{class:o.const("dcg-pillbox-container"),role:o.const("group"),"aria-label":function(){return t.controller.s("graphing-calculator-narration-graph-settings-controls")}},o.createElement("div",{class:o.const("dcg-overgraph-pillbox-elements"),style:t.bindFn(t.getContainerStyle)},o.createElement(c,{predicate:t.bindFn(t.shouldShowSettings)},function(){return o.createElement(r.default,{controller:t.props.controller})}),o.createElement(c,{predicate:t.bindFn(t.shouldShowResetButton)},function(){return o.createElement(i.default,{controller:t.props.controller})}),o.createElement(c,{predicate:t.bindFn(t.shouldShowZoomButtons)},function(){return o.createElement(l.default,{controller:t.props.controller})})))}),o.createElement(n.default,{controller:function(){return t.props.controller()}}))},a.prototype.getContainerStyle=function(){var t=this.controller.isKeypadOpen()?this.controller.getKeypadHeight():0;return this.controller.isGraphSettingsOpen()?"bottom: "+t+"px;":"bottom: auto"},a.prototype.shouldShowContainer=function(){return this.shouldShowSettings()||this.shouldShowZoomButtons()||this.shouldShowResetButton()},a.prototype.shouldShowSettings=function(){return this.controller.getGraphSettings().config.settingsMenu},a.prototype.shouldShowZoomButtons=function(){return this.controller.getGraphSettings().config.zoomButtons},a.prototype.shouldShowResetButton=function(){return this.controller.getGraphSettings().config.showResetButtonOnGraphpaper&&this.controller.hasDefaultState()},a);function a(){return null!==s&&s.apply(this,arguments)||this}t.default=u});

define('loadcss!main/toast-view', function(){});
define('main/toast-view',["require","exports","tslib","dcgview","loadcss!./toast-view"],function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ToastView=void 0;var r,o=n.Components.If,s=(r=n.Class,t.__extends(a,r),a.prototype.template=function(){var e=this;return n.createElement("span",{class:n.const("dcg-toast")},n.createElement("i",{class:n.const("dcg-icon-error")}),n.createElement(o,{predicate:function(){return!e.props.showUndo()&&(!e.props.showClose||e.props.showClose())}},function(){return n.createElement("i",{class:n.const("dcg-icon-remove"),onTap:function(){return e.props.onClose&&e.props.onClose()},role:n.const("link"),tabindex:n.const(0),"aria-label":n.const("Dismiss Notice")})}),n.createElement("span",{class:n.const("dcg-msg"),"aria-atomic":function(){return!e.props.noAria()},"aria-live":function(){return e.props.noAria()?"":"assertive"}},function(){return e.props.message()}),n.createElement(o,{predicate:this.props.showUndo},function(){return n.createElement("a",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-undo"),onTap:function(){return e.props.onUndo&&e.props.onUndo()}},function(){return e.props.s("shared-calculator-label-toast-undo")})}),n.createElement(o,{predicate:this.props.showLearnMore},function(){return n.createElement("a",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-learn-more-link"),target:n.const("_blank"),onTap:function(){return e.props.onLearnMore&&e.props.onLearnMore()}},function(){return e.props.s("shared-calculator-label-toast-learn-more")})}),n.createElement(o,{predicate:function(){return!!e.props.link&&!!e.props.link()}},function(){return n.createElement("a",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-learn-more-link"),target:n.const("_blank"),href:function(){return e.props.link().url}},function(){return e.props.link().text})}))},a.prototype.shouldUpdate=function(){return!!this.props.message()},a);function a(){return null!==r&&r.apply(this,arguments)||this}var c,i=(c=n.Class,t.__extends(l,c),l.prototype.template=function(){var e=this;return n.createElement("div",{class:function(){return{"dcg-toast-view":!0,"dcg-visible":!!e.props.message()}},"toast-style":function(){return e.props.toastStyle&&e.props.toastStyle()}},n.createElement(o,{predicate:function(){return!!e.props.message()}},function(){return n.createElement("div",{class:n.const("dcg-toast-wrapper")},n.createElement("div",{class:n.const("dcg-toast-cover")}),n.createElement(s,t.__assign({},e.props)))}))},l);function l(){return null!==c&&c.apply(this,arguments)||this}e.ToastView=i});
define('main/disable-dragdrop-events',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){e.on("drag dragend dragenter dragover dragleave drop",function(e){e.preventDefault(),e.stopPropagation()})}});
define('graphing-calc/views/main',["require","exports","tslib","touchtracking","ipad.scrollfix","dcgview","jquery","../../expressions/list-view","graphing-calc/keypads/main","main/pillbox-view","main/toast-view","main/disable-dragdrop-events","lib/tooltip","main/manage-focus-helper"],function(require,t,o,e,r,n,l,i,c,a,s,g,p,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var u,f=n.Components.If,h=(u=n.Class,o.__extends(m,u),m.prototype.init=function(){this.controller=this.props.controller()},m.prototype.settings=function(){return this.controller.getGraphSettings()},m.prototype.template=function(){var o=this;return n.createElement("div",{class:n.const("dcg-calculator-api-container"),style:n.const("width: 100%; height: 100%; position: relative;")},n.createElement("div",{class:function(){return{"dcg-container":!0,"dcg-fullscreen":!o.controller.isListVisible(),"dcg-narrow":o.controller.isNarrow(),"dcg-PROJECTOR-MODE":o.settings().config.projectorMode,"dcg-inverted-colors":!!o.settings().config.invertedColors,"dcg-EDIT-LIST-MODE":o.controller.isInEditListMode(),"dcg-no-graphpaper":!o.settings().config.graphpaper,"dcg-no-branding":!o.settings().config.branding,"dcg-no-expression-topbar":!o.settings().config.expressionsTopbar,"dcg-default-border":!!o.settings().config.border,"dcg-no-hyperlinks":!o.settings().config.links,"dcg-has-background-color":o.controller.hasBackgroundColor(),"dcg-is-interactive":o.settings().config.expressions||!o.settings().config.lockViewport}},style:function(){return{"font-size":o.settings().config.fontSize+"px",background:o.getContainerBackgroundColor(),color:o.controller.getTextColor()}},role:n.const("application"),"aria-label":function(){return o.controller.s("graphing-calculator-narration-main-desmos-graphing-calculator")},"x-ms-format-detection":n.const("none"),didMount:this.bindFn(this.didMountRoot)},n.createElement(f,{predicate:function(){return o.controller.getGraphSettings().config.expressions}},function(){return n.createElement(i.default,{controller:o.props.controller})}),n.createElement(f,{predicate:function(){return o.controller.isListEnabled()&&!o.controller.isListVisible()}},function(){return n.createElement("div",{class:function(){return{"dcg-overgraph-icon-container":!0,"dcg-bottom-right":o.controller.isNarrow()}}},n.createElement(p.Tooltip,{tooltip:function(){return o.controller.s("graphing-calculator-label-tooltip-show-list")},gravity:function(){return o.controller.isNarrow()?"nw":"se"}},n.createElement("div",{class:function(){return{"dcg-show-expressions-tab":!0,"dcg-overgraph-icon":!0,"dcg-rotated":o.controller.isNarrow()}},"aria-label":function(){return o.controller.s("graphing-calculator-label-tooltip-show-list")},role:n.const("button"),tabindex:n.const("0"),onTap:function(){o.controller.dispatch({type:"show-expressions-list"}),o.controller.dispatch({type:"set-focus-location",location:{type:"hide-expression-list-btn"}})},manageFocus:o.const(d.manageFocusHelper({controller:o.controller,location:{type:"show-expression-list-btn"}}))},n.createElement("i",{class:n.const("dcg-icon-show")}))))}),n.createElement(f,{predicate:this.bindFn(this.showHamburger)},function(){return n.createElement("div",{class:n.const("dcg-overgraph-icon-container")},n.createElement(p.Tooltip,{tooltip:function(){return o.controller.s("graphing-calculator-label-tooltip-open-graph")},gravity:o.const("se")},n.createElement("div",{role:n.const("button"),"aria-label":function(){return o.controller.s("graphing-calculator-label-tooltip-open-graph")},class:n.const("dcg-action-opendrawer dcg-in-api-action-opendrawer dcg-overgraph-icon"),onTap:function(){return o.controller.dispatch({type:"open-drawer"})}},n.createElement("i",{class:n.const("dcg-icon-hamburger")}))))}),n.createElement(a.default,{controller:this.props.controller}),n.createElement(s.ToastView,{message:function(){var t=o.controller.getToastData().message;return o.controller.raw(t||"")},link:function(){return o.controller.getToastData().link||void 0},showUndo:function(){return!!o.controller.getToastData().undoCallback},showLearnMore:function(){return!!o.controller.getToastData().learnMoreCallback},noAria:function(){return!!o.controller.getToastData().noAria},toastStyle:function(){return o.controller.getToastData().toastStyle},s:this.controller.s,onUndo:function(){return o.controller.dispatch({type:"toast/undo"})},onLearnMore:function(){return o.controller.dispatch({type:"toast/learn-more"})},onClose:function(){return o.controller.dispatch({type:"toast/close"})}}),n.createElement("div",{class:n.const("dcg-grapher")}),n.createElement(f,{predicate:function(){return o.controller.getGraphSettings().config.keypad}},function(){return n.createElement(c.default,{controller:o.props.controller})})))},m.prototype.showHamburger=function(){return!!this.controller.getGraphSettings().config.showHamburger&&!this.controller.isInEditListMode()&&this.controller.isNarrow()},m.prototype.getContainerBackgroundColor=function(){return this.controller.hasTransparentBackground()?"none":this.controller.getBackgroundColor()},m.prototype.didMountRoot=function(t){e.monitor(t),this.controller.getGraphSettings().config.disableScrollFix||r.limitScrollOnElement(t),this.setupFileDragDrop(t)},m.prototype.setupFileDragDrop=function(t){var o=this,e=l(t);g.default(e);var r=l(),n=this;function i(){r=l(),e.off(".filedraggedover"),n.controller.dispatch({type:"file-is-not-dragged-over"})}e.on("dragenter",function(t){o.controller.areImagesEnabled()&&(0===r.length&&e.on("dcg-tapstart.filedraggedover",i),r=r.add(t.target),o.controller.dispatch({type:"file-is-dragged-over"}))}).on("dragleave",function(t){0===(r=r.not(t.target)).length&&i()}).on("drop",i)},m);function m(){return null!==u&&u.apply(this,arguments)||this}t.default=h});
define('worker/workerpoolconnection',['require','pjs','underscore_model'],function(require){"use strict";return require("pjs")(require("underscore_model").UnderscoreModel,function(e,o){e.init=function(e){o.init.call(this),this.workerPool=e,this.worker=e.allocateWorker(),this.worker.__connections[this.guid]=this},e.destroy=function(){this.sendMessage({type:"destroy"}),delete this.worker.__connections[this.guid]},e.killWorker=function(){this.worker.__isFake||this.workerPool.killWorker(this.worker)},e.onWorkerKilled=function(){},e.onResponse=function(e){},e.sendMessage=function(e){this.worker.__isFake?this.worker.postMessage(e):this.worker.postMessage({connectionId:this.guid,originalMessage:e})}})});

define('text!worker_src_underlying',[],function () { return 'var requirejs,require,define;!function(p){var o,u,a,d,g={},q={},O={},h={},n=Object.prototype.hasOwnProperty,i=[].slice;function E(e,r){return n.call(e,r)}function f(e,r){var n,i,t,o,u,f,c,l,s,p,a=r&&r.split("/"),d=O.map,g=d&&d["*"]||{};if(e&&"."===e.charAt(0))if(r){for(e=(a=a.slice(0,a.length-1)).concat(e.split("/")),l=0;l<e.length;l+=1)if("."===(p=e[l]))e.splice(l,1),--l;else if(".."===p){if(1===l&&(".."===e[2]||".."===e[0]))break;0<l&&(e.splice(l-1,2),l-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((a||g)&&d){for(l=(n=e.split("/")).length;0<l;--l){if(i=n.slice(0,l).join("/"),a)for(s=a.length;0<s;--s)if(t=(t=d[a.slice(0,s).join("/")])&&t[i]){o=t,u=l;break}if(o)break;!f&&g&&g[i]&&(f=g[i],c=l)}!o&&f&&(o=f,u=c),o&&(n.splice(0,u,o),e=n.join("/"))}return e}function j(e,r){return function(){return u.apply(p,i.call(arguments,0).concat([e,r]))}}function m(e){var r;if(E(q,e)&&(r=q[e],delete q[e],h[e]=!0,o.apply(p,r)),!E(g,e)&&!E(h,e))throw new Error("No "+e);return g[e]}function c(e){var r,n=e?e.indexOf("!"):-1;return-1<n&&(r=e.substring(0,n),e=e.substring(n+1,e.length)),[r,e]}a=function(e,r){var n,i,t=c(e),o=t[0];return e=t[1],o&&(n=m(o=f(o,r))),o?e=n&&n.normalize?n.normalize(e,(i=r,function(e){return f(e,i)})):f(e,r):(o=(t=c(e=f(e,r)))[0],e=t[1],o&&(n=m(o))),{f:o?o+"!"+e:e,n:e,pr:o,p:n}},d={require:function(e){return j(e)},exports:function(e){var r=g[e];return void 0!==r?r:g[e]={}},module:function(e){return{id:e,uri:"",exports:g[e],config:(r=e,function(){return O&&O.config&&O.config[r]||{}})};var r}},o=function(e,r,n,i){var t,o,u,f,c,l,s=[];if(i=i||e,"function"==typeof n){for(r=!r.length&&n.length?["require","exports","module"]:r,c=0;c<r.length;c+=1)if("require"===(o=(f=a(r[c],i)).f))s[c]=d.require(e);else if("exports"===o)s[c]=d.exports(e),l=!0;else if("module"===o)t=s[c]=d.module(e);else if(E(g,o)||E(q,o)||E(h,o))s[c]=m(o);else{if(!f.p)throw new Error(e+" missing "+o);f.p.load(f.n,j(i,!0),function(r){return function(e){g[r]=e}}(o),{}),s[c]=g[o]}u=n.apply(g[e],s),e&&(t&&t.exports!==p&&t.exports!==g[e]?g[e]=t.exports:u===p&&l||(g[e]=u))}else e&&(g[e]=n)},requirejs=require=u=function(e,r,n,i,t){return"string"==typeof e?d[e]?d[e](r):m(a(e,r).f):(e.splice||(O=e,r.splice?(e=r,r=n,n=null):e=p),r=r||function(){},"function"==typeof n&&(n=i,i=t),i?o(p,e,r,n):setTimeout(function(){o(p,e,r,n)},4),u)},u.config=function(e){return(O=e).deps&&u(O.deps,O.callback),u},(define=function(e,r,n){r.splice||(n=r,r=[]),E(g,e)||E(q,e)||(q[e]=[e,r,n])}).amd={jQuery:!0}}(),"undefined"!=typeof ALMOND_OVERRIDES&&ALMOND_OVERRIDES&&(define=ALMOND_OVERRIDES.define||define,require=ALMOND_OVERRIDES.require||require,requirejs=ALMOND_OVERRIDES.requirejs||requirejs);\ndefine("core/vendor/almond", function(){});\n\ndefine(\'core/lib/worker-i18n\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.s=void 0,e.s=function(e,r){return{key:e,vars:r}}});\ndefine("pjs",[],function(){var f,a,p;function l(n){return"object"==typeof n}function y(n){return"function"==typeof n}function v(){}return f="prototype",a={}.hasOwnProperty,function t(r,n){function i(){var n=new o;return y(n.init)&&n.init.apply(n,arguments),n}function o(){}n===p&&(n=r,r=Object),i.Bare=o;var e,u=v[f]=r[f],c=o[f]=i[f]=new v;return(c.constructor=i).mixin=function(n){return o[f]=i[f]=t(i,n)[f],i},(i.open=function(n){if(e={},y(n)?e=n.call(i,c,u,i,r):l(n)&&(e=n),l(e))for(var t in e)a.call(e,t)&&(c[t]=e[t]);return y(c.init)||(c.init=r),i})(n)}});\ndefine(\'core/math/mathshim\',[\'require\'],function(require){"use strict";var h={};return h.cosh=Math.cosh||function(t){return.5*(Math.exp(t)+Math.exp(-t))},h.sinh=Math.sinh&&0!==Math.sinh(1e-20)?Math.sinh:function(t){var a=0<t?1:-1;return t=0<t?t:-t,.5*-a*Math.exp(t)*h.expm1(-2*t)},h.tanh=Math.tanh&&0!==Math.tanh(1e-20)?Math.tanh:function(t){var a=0<t?1:-1;t=0<t?t:-t;var n=h.expm1(-2*t);return-a*n/(2+n)},h.acosh=Math.acosh||function(t){return t<1?NaN:Math.log(t+h.sqrtxsqm1(t))},h.asinh=Math.asinh&&0!==Math.asinh(1e-20)?Math.asinh:function(t){var a=0<t?1:-1;return 1+(t=0<t?t:-t)*t==1?a*h.log1p(t):a*Math.log(t+h.sqrtxsqp1(t))},h.atanh=Math.atanh&&0!==Math.atanh(1e-20)?Math.atanh:function(t){return.5*(h.log1p(t)-h.log1p(-t))},h.expm1=Math.expm1||function(t){return t+.5*t*t===t?t:Math.exp(t)-1},h.log1p=Math.log1p||function(t){return t-.5*t*t===t?t:Math.log(1+t)},h.sqrtxsqp1=function(t){var a=t*t;return 1+a==1?1:1+a==a?Math.abs(t):Math.sqrt(1+a)},h.sqrtxsqm1=function(t){var a=t*t;return a<1?NaN:a-1==a?Math.abs(t):Math.sqrt(a-1)},h});\ndefine(\'core/math/distance\',["require","exports"],function(require,s){"use strict";Object.defineProperty(s,"__esModule",{value:!0}),s.approx=s.pointToSegment=s.closestPointOnSegment=s.pointToSegmentParameter=s.mean=s.hypot=void 0;var t=Math.hypot&&Math.hypot(1/0,NaN)===1/0;function u(t){return t===1/0||t===-1/0}function h(t,e,n,r,i,o,a,u,h){var p=s.hypot(a-r,u-i,h-o);return 0===p?0:(t-r)/p*((a-r)/p)+(e-i)/p*((u-i)/p)+(n-o)/p*((h-o)/p)}function p(t,e,n,r,i,o){var a=h(t,e,0,n,r,0,i,o,0);return a<=0?[n,r]:1<=a?[i,o]:[n+a*(i-n),r+a*(o-r)]}s.hypot=t?Math.hypot:function(t,e,n){if(u(t)||u(e)||void 0!==n&&u(n))return 1/0;if(isNaN(t)||isNaN(e)||void 0!==n&&isNaN(n))return NaN;if(0===t&&0===e&&(void 0===n||0===n))return 0;for(var r=0,i=0,o=0;o<arguments.length;o+=1){var a=Math.abs(Number(arguments[o]));r<a&&(i*=r/a*(r/a),r=a),i+=0===a&&0===r?0:a/r*(a/r)}return r===1/0?1/0:r*Math.sqrt(i)},s.mean=function(t,e){return 0<t==0<e?t+.5*(e-t):.5*(t+e)},s.pointToSegmentParameter=h,s.closestPointOnSegment=p,s.pointToSegment=function(t,e,n,r,i,o){var a=p(t,e,n,r,i,o);return s.hypot(t-a[0],e-a[1])},s.approx=function(t,e,n){if(void 0===n&&(n=1),t===e)return!0;if(!isFinite(t)||!isFinite(e))return!1;if(50<n)throw new Error("Within "+(52-n)+" bits isn\'t really approximate any more");var r=Math.max(Math.max(Math.abs(t),Math.abs(e)),1);return r===r+(1===n?.5:Math.pow(.5,n))*Math.abs(e-t)}});\ndefine(\'core/math/poi\',["require","exports","core/math/distance"],function(require,i,m){"use strict";function J(i,t){var r;t<i&&(r=i,i=t,t=r);var n=0<i,e=0<t,a=.01<Math.abs(i),s=.01<Math.abs(t);if(a||s)return m.mean(i,t);if(0===i)return t*Math.abs(t);if(0===t)return i*Math.abs(i);if(n!=e)return 0;var f=n?Math.sqrt(i*t):-Math.sqrt(i*t);return i<=f&&f<=t?f:m.mean(i,t)}function F(i,t,r,n,e,a,s){var f,u,o,c;if(isFinite(n))return isFinite(t)||(f=l(i,t,r,n,s))&&(i=f[0],t=f[1]),isFinite(a)||(f=l(r,n,e,a,s))&&(e=f[0],a=f[1]),u=t===n?[i,t]:v(i,t,r,n,s,n),o=a===n?[e,a]:v(r,n,e,a,s,n),u&&o&&(c=J(u[0],o[0])),void 0!==c?[c,s(c)]:void 0}function l(i,t,r,n,e){if(isFinite(t)!==isFinite(n))for(;;){var a=J(i,r),s=e(a);if(a===i||a===r)return isFinite(t)?[i,t]:[r,n];isFinite(s)!==isFinite(t)?(r=a,n=s):(i=a,t=s)}}function v(i,t,r,n,e,a){if(t===a!=(n===a))for(;;){var s=J(i,r),f=e(s);if(s===i||s===r)return t===a?[i,t]:[r,n];f===a!=(t===a)?(r=s,n=f):(i=s,t=f)}}function L(i,t){var r=i[0],n=i[1],e=t[0],a=t[1];return(e-r)*(e-r)+(a-n)*(a-n)}function P(i,t,r,n,e,a){var s,f,u,o,c,F,v,b,M,h=a(i),d=a(t),m=a(r),l=L(h,n),P=L(d,n),C=L(m,n);if(!(t<=i||r<=t)&&isFinite(l)&&isFinite(P)&&isFinite(C)&&!(l<=P||C<=P))for(;;){if(Math.abs(m[0]-h[0])<e&&Math.abs(m[1]-h[1])<e)return[i,r];var O=J(i,t),p=a(O),x=L(p,n),N=J(t,r),q=a(N),E=L(q,n);if(!isFinite(x)||!isFinite(E))return;if(O===i||O===t||N===t||N===r)return x<P&&x<E?[O,O]:E<x&&E<P?[N,N]:[t,t];if(!(x!==P&&E!==P||x!==(P=L(d=a(t=.5*(O+t)),n))&&E!==P))return[i,r];x<P&&x<E?(r=(s=[t,O])[0],t=s[1],m=(f=[d,p])[0],d=f[1],C=(u=[P,x])[0],P=u[1]):E<x&&E<P?(i=(o=[t,N])[0],t=o[1],h=(c=[d,q])[0],d=c[1],l=(F=[P,E])[0],P=F[1]):(i=(v=[O,N])[0],r=v[1],h=(b=[p,q])[0],m=b[1],l=(M=[x,E])[0],C=M[1])}}function C(i,t,r){return void 0===t&&(t=-1/0),void 0===r&&(r=1/0),Math.min(r,Math.max(t,i))}function o(i,t,r,n,e,a){var s,f,u,o,c;c=void 0!==n&&void 0!==e?r+.01*(r<.5*(n+e)?e-n:n-e):1<Math.abs(r)?1.00001*r:r+1e-5;var F=i(r),v=i(c),b=L(F,t),M=L(v,t);if(isFinite(b)&&isFinite(M)){if(b===M)return[r,c];for(b<M&&(r=(s=[c,r])[0],c=s[1],f=[v,F],b=(u=[M,b])[0],M=u[1]);isFinite(r)&&isFinite(c)&&r!==c;){if(void 0!==e&&e<c)return[e,e];if(void 0!==n&&c<n)return[n,n];var h=r+3*(c-r),d=L(i(h),t);if(!isFinite(d))return[r,c];if(d===M)return[r,c];if(M<d){var m=r<c?P(r,c,h,t,a,i):P(h,c,r,t,a,i);return m?[C(m[0],n,e),C(m[1],n,e)]:m}r=(o=[c,M,h,d])[0],b=o[1],c=o[2],M=o[3]}return[r,c]}}function c(i,t,r,n){return!r||n&&Math.min(L(i(n[0]),t),L(i(n[1]),t))<Math.min(L(i(r[0]),t),L(i(r[1]),t))}function O(i,t,r,n,e,a,s,f){var u=Math.abs(n-t),o=Math.abs(a-n),c=Math.abs(f-a);return o<u&&c<u?[[i,t],[r,n]]:o<c&&u<c?[[e,a],[s,f]]:[[r,n],[e,a]]}Object.defineProperty(i,"__esModule",{value:!0}),i.bisectJump=i.findLocalClosestPointOnParametric=i.bisectClosestPointOnParametric=i.bisectExtremum=i.bisectFinite=i.flatCenter=i.bisectZero=i.floatMiddle=void 0,i.floatMiddle=J,i.bisectZero=function(i,t,r,n,e){if(!isNaN(t)&&!isNaN(n)&&t<0!=n<0)for(;;){var a=J(i,r),s=e(a);if(!isFinite(s))return;if(a===i||a===r)return Math.abs(t)<=Math.abs(n)?[i,t]:[r,n];if(0===s)return F(i,t,a,s,r,n,e);t<0!=s<0?(r=a,n=s):(i=a,t=s)}},i.flatCenter=F,i.bisectFinite=l,i.bisectExtremum=function(i,t,r,n,e,a,s){if(i<r&&r<e&&isFinite(t)&&isFinite(n)&&isFinite(a)&&t!==n&&n!==a&&t<n==a<n)for(;;){var f=J(i,r),u=s(f),o=J(r,e),c=s(o);if(!isFinite(u)||!isFinite(c))return;if(f===i||f===r||o===r||o===e)return n<u==t<n?[f,u]:n<c==t<n?[o,c]:[r,n];if(u===n||c===n)return F(i,t,r,n,e,a,s);t<u==t<n&&t<u==n<u?(e=r,a=n,r=f,n=u):a<c==a<n&&n<c==a<c?(i=r,t=n,r=o,n=c):(i=f,t=u,e=o,a=c)}},i.bisectClosestPointOnParametric=P,i.findLocalClosestPointOnParametric=function(i,t,r,n,e,a){var s,f,u=o(i,t,r,n,e,a);return void 0===n||c(i,t,u,s=o(i,t,n,n,e,a))&&(u=s),void 0===e||c(i,t,u,f=o(i,t,e,n,e,a))&&(u=f),u},i.bisectJump=function(i,t,r,n,e,a,s,f){if(f=f||0,!((r-i)*(e-r)<=0)&&isFinite(i)&&isFinite(r)&&isFinite(e)&&isFinite(t)&&isFinite(a)){if(!isFinite(n)){var u=l(i,t,r,n,s),o=l(r,n,e,a,s);if(!u||!o)return;return[u,o]}if(!(Math.abs(n-((e-r)*t+(r-i)*a)/(e-i))<f))for(;;){var c=J(i,r),F=s(c),v=J(r,e),b=s(v),M=Math.abs(F-m.mean(t,n)),h=Math.abs(n-m.mean(F,b)),d=Math.abs(b-m.mean(n,a));if(M<=f&&h<=f&&d<=f)return;if(!isFinite(F)){u=l(i,t,c,F,s),o=l(c,F,e,a,s);if(!u||!o)return;return[u,o]}if(!isFinite(b)){u=l(i,t,v,b,s),o=l(v,b,e,a,s);if(!u||!o)return;return[u,o]}if(!(c!==i&&c!==r||v!==r&&v!==e))return Math.abs(n-t)>Math.abs(a-n)?[[i,t],[r,n]]:[[r,n],[e,a]];if(c===i||c===r)return O(i,t,r,n,v,b,e,a);if(v===r||v===e)return O(i,t,c,F,r,n,e,a);d<M&&h<=M?(e=r,a=n,r=c,n=F):M<d&&h<=d?(i=r,t=n,r=v,n=b):(i=c,t=F,e=v,a=b)}}}});\ndefine(\'core/math/quadrature\',[\'require\',\'core/math/mathshim\',\'core/math/poi\'],function(require){"use strict";var h=require("core/math/mathshim"),a=require("core/math/poi"),l=a.bisectJump,J=a.bisectFinite,r=Math.pow(2,-13),o=r*r,F=o*o,j=o,k=32,y=[],z=[];!function(a,r){for(var t=k;0<t;t--){var i=3.154019550531224/k*t,n=h.sinh(i),e=h.cosh(Math.PI/2*n),o=1/(Math.exp(Math.PI/2*n)*e),s=h.cosh(i)/(e*e);a.push(o),r.push(s)}}(y,z);for(var t=0,i=0;i<z.length;i++)t+=z[i];var A=1/(1+2*t);function B(a,r,t){return.5*(r*(2-t)+a*t)}function C(a,r,t,i,n){return{x1:a,x2:r,value:t,error:i,minerror:n}}function D(a,r,t){var i=Math.abs(a(B(r,t,o))),n=Math.abs(a(B(r,t,2*o))),e=Math.abs(a(B(r,t,4*o)));return!(i<o||n<o)&&(1.95*n<i&&1.95*e<n)}function p(a,r,t){var i,n,e=B(t,r,y[0]),o=B(r,t,y[0]),s=a(e),h=a(o),u=B(r,t,1),N=a(u);if(isFinite(N)&&!isFinite(s)){if(i=J(e,s,u,N,a),Math.abs((i[0]-r)/(t-r))>j)return C(r,t,NaN,NaN,NaN);r=i[0],s=i[1]}if(isFinite(N)&&!isFinite(h)){if(n=J(u,N,o,h,a),Math.abs((n[0]-t)/(t-r))>j)return C(r,t,NaN,NaN,NaN);t=n[0],h=n[1]}if(isFinite(s)&&isFinite(h)&&!isFinite(N)){if(i=J(e,s,u,N,a),n=J(u,N,o,h,a),Math.abs((n[0]-i[0])/(t-r))>j)return C(r,t,NaN,NaN,NaN);N=.5*(i[1]+n[1])}if(D(a,r,t)||D(a,t,r))return C(r,t,NaN,NaN,NaN);for(var m,x,f=N,M=0,b=0,v=0,c=0,l=0;l<k;l+=4)m=a(B(r,t,y[l])),x=a(B(t,r,y[l])),c=Math.max(c,Math.abs(m),Math.abs(x)),M+=z[l]*(m+x),m=a(B(r,t,y[l+1])),x=a(B(t,r,y[l+1])),c=Math.max(c,Math.abs(m),Math.abs(x)),v+=z[l+1]*(m+x),m=a(B(r,t,y[l+2])),x=a(B(t,r,y[l+2])),c=Math.max(c,Math.abs(m),Math.abs(x)),b+=z[l+2]*(m+x),m=a(B(r,t,y[l+3])),x=a(B(t,r,y[l+3])),c=Math.max(c,Math.abs(m),Math.abs(x)),v+=z[l+3]*(m+x);var F=f+M,p=F+b,d=p+v,g=Math.abs(b-F),I=Math.abs(v-p),P=A*(t-r)*d,q=A*Math.abs(t-r)*c*z[0],w=0===g?A*Math.abs(t-r)*I:A*Math.abs(t-r)*I*(I/g)*(I/g);return C(r,t,P,w=Math.max(w,q),q)}function d(a){for(var r=-1/0,t=-1/0,i=-1,n=0,e=0;e<a.length;e++){var o=a[e];n+=o.value,o.error>r&&(r=o.error,i=e),o.minerror>t&&(t=o.minerror)}return{maxerror:r,maxminerror:t,maxindex:i,totalvalue:n}}return{quad:function a(r,t,i,n){if(void 0===n&&(n=32),isNaN(t)||isNaN(i))return NaN;var e,o=1;if(i<t&&(e=t,t=i,i=e,o=-1),t===1/0&&i===1/0)return NaN;if(t===-1/0&&i===-1/0)return NaN;if(t===-1/0&&i===1/0)return o*a(function(a){return r(a/((1+a)*(1-a)))*(1+a*a)/((1+a)*(1+a)*(1-a)*(1-a))},-1,1,n);if(t===-1/0)return o*a(function(a){return-r(i-a/(1-a))/((1-a)*(1-a))},1,0,n);if(i===1/0)return o*a(function(a){return r(t+a/(1-a))/((1-a)*(1-a))},0,1,n);for(var s,h,u,N,m,x=[p(r,t,i)],f=d(x),M=1;M<n&&!(Math.abs(f.maxerror/f.totalvalue)<=32*F||f.maxerror<=32*F||f.maxerror<=32*f.maxminerror)&&isFinite(f.maxerror)&&isFinite(f.maxminerror);M++){var b=x[x.length-1];x[x.length-1]=x[f.maxindex],x[f.maxindex]=b;var v=x.pop(),c=(s=r,h=B(v.x2,v.x1,.125),u=B(v.x1,v.x2,.125),m=N=void 0,N=.5*(h+u),(m=l(h,s(h),N,s(N),u,s(u),s,0))?.5*(m[0][0]+m[1][0]):N);x.push(p(r,v.x1,c)),x.push(p(r,c,v.x2)),f=d(x)}return isFinite(f.maxerror)&&isFinite(f.maxminerror)?Math.abs(f.totalvalue)<=10*f.maxminerror?0:o*f.totalvalue:NaN}}});\ndefine(\'core/math/tofraction\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e,r){if(void 0===r&&(r=1e6),e===1/0)return{n:1/0,d:1};if(e===-1/0)return{n:-1/0,d:1};if(!isFinite(e))return{n:NaN,d:1};for(var n,t,i,u=0,f=1,d=1,o=0;t=(n=Math.floor(e))*f+u,!(r<(i=n*o+d))&&(u=f,d=o,f=t,o=i,e!==n);)e=1/(e-n);return{n:f,d:o}}});\n!function(n){"use strict";function d(n,t){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}function f(n,t,r,e,o,u){return d((c=d(d(t,n),d(e,u)))<<(f=o)|c>>>32-f,r);var c,f}function l(n,t,r,e,o,u,c){return f(t&r|~t&e,n,t,o,u,c)}function v(n,t,r,e,o,u,c){return f(t&e|r&~e,n,t,o,u,c)}function g(n,t,r,e,o,u,c){return f(t^r^e,n,t,o,u,c)}function m(n,t,r,e,o,u,c){return f(r^(t|~e),n,t,o,u,c)}function i(n,t){var r,e,o,u;n[t>>5]|=128<<t%32,n[14+(t+64>>>9<<4)]=t;for(var c=1732584193,f=-271733879,i=-1732584194,a=271733878,h=0;h<n.length;h+=16)c=l(r=c,e=f,o=i,u=a,n[h],7,-680876936),a=l(a,c,f,i,n[h+1],12,-389564586),i=l(i,a,c,f,n[h+2],17,606105819),f=l(f,i,a,c,n[h+3],22,-1044525330),c=l(c,f,i,a,n[h+4],7,-176418897),a=l(a,c,f,i,n[h+5],12,1200080426),i=l(i,a,c,f,n[h+6],17,-1473231341),f=l(f,i,a,c,n[h+7],22,-45705983),c=l(c,f,i,a,n[h+8],7,1770035416),a=l(a,c,f,i,n[h+9],12,-1958414417),i=l(i,a,c,f,n[h+10],17,-42063),f=l(f,i,a,c,n[h+11],22,-1990404162),c=l(c,f,i,a,n[h+12],7,1804603682),a=l(a,c,f,i,n[h+13],12,-40341101),i=l(i,a,c,f,n[h+14],17,-1502002290),c=v(c,f=l(f,i,a,c,n[h+15],22,1236535329),i,a,n[h+1],5,-165796510),a=v(a,c,f,i,n[h+6],9,-1069501632),i=v(i,a,c,f,n[h+11],14,643717713),f=v(f,i,a,c,n[h],20,-373897302),c=v(c,f,i,a,n[h+5],5,-701558691),a=v(a,c,f,i,n[h+10],9,38016083),i=v(i,a,c,f,n[h+15],14,-660478335),f=v(f,i,a,c,n[h+4],20,-405537848),c=v(c,f,i,a,n[h+9],5,568446438),a=v(a,c,f,i,n[h+14],9,-1019803690),i=v(i,a,c,f,n[h+3],14,-187363961),f=v(f,i,a,c,n[h+8],20,1163531501),c=v(c,f,i,a,n[h+13],5,-1444681467),a=v(a,c,f,i,n[h+2],9,-51403784),i=v(i,a,c,f,n[h+7],14,1735328473),c=g(c,f=v(f,i,a,c,n[h+12],20,-1926607734),i,a,n[h+5],4,-378558),a=g(a,c,f,i,n[h+8],11,-2022574463),i=g(i,a,c,f,n[h+11],16,1839030562),f=g(f,i,a,c,n[h+14],23,-35309556),c=g(c,f,i,a,n[h+1],4,-1530992060),a=g(a,c,f,i,n[h+4],11,1272893353),i=g(i,a,c,f,n[h+7],16,-155497632),f=g(f,i,a,c,n[h+10],23,-1094730640),c=g(c,f,i,a,n[h+13],4,681279174),a=g(a,c,f,i,n[h],11,-358537222),i=g(i,a,c,f,n[h+3],16,-722521979),f=g(f,i,a,c,n[h+6],23,76029189),c=g(c,f,i,a,n[h+9],4,-640364487),a=g(a,c,f,i,n[h+12],11,-421815835),i=g(i,a,c,f,n[h+15],16,530742520),c=m(c,f=g(f,i,a,c,n[h+2],23,-995338651),i,a,n[h],6,-198630844),a=m(a,c,f,i,n[h+7],10,1126891415),i=m(i,a,c,f,n[h+14],15,-1416354905),f=m(f,i,a,c,n[h+5],21,-57434055),c=m(c,f,i,a,n[h+12],6,1700485571),a=m(a,c,f,i,n[h+3],10,-1894986606),i=m(i,a,c,f,n[h+10],15,-1051523),f=m(f,i,a,c,n[h+1],21,-2054922799),c=m(c,f,i,a,n[h+8],6,1873313359),a=m(a,c,f,i,n[h+15],10,-30611744),i=m(i,a,c,f,n[h+6],15,-1560198380),f=m(f,i,a,c,n[h+13],21,1309151649),c=m(c,f,i,a,n[h+4],6,-145523070),a=m(a,c,f,i,n[h+11],10,-1120210379),i=m(i,a,c,f,n[h+2],15,718787259),f=m(f,i,a,c,n[h+9],21,-343485551),c=d(c,r),f=d(f,e),i=d(i,o),a=d(a,u);return[c,f,i,a]}function a(n){for(var t="",r=32*n.length,e=0;e<r;e+=8)t+=String.fromCharCode(n[e>>5]>>>e%32&255);return t}function h(n){var t=[];for(t[(n.length>>2)-1]=void 0,e=0;e<t.length;e+=1)t[e]=0;for(var r=8*n.length,e=0;e<r;e+=8)t[e>>5]|=(255&n.charCodeAt(e/8))<<e%32;return t}function e(n){for(var t,r="0123456789abcdef",e="",o=0;o<n.length;o+=1)t=n.charCodeAt(o),e+=r.charAt(t>>>4&15)+r.charAt(15&t);return e}function r(n){return unescape(encodeURIComponent(n))}function o(n){return a(i(h(t=r(n)),8*t.length));var t}function u(n,t){return function(n,t){var r,e,o=h(n),u=[],c=[];for(u[15]=c[15]=void 0,16<o.length&&(o=i(o,8*n.length)),r=0;r<16;r+=1)u[r]=909522486^o[r],c[r]=1549556828^o[r];return e=i(u.concat(h(t)),512+8*t.length),a(i(c.concat(e),640))}(r(n),r(t))}function t(n,t,r){return t?r?u(t,n):e(u(t,n)):r?o(n):e(o(n))}"function"==typeof define&&define.amd?define(\'core/lib/md5\',[],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:n.md5=t}(this);\ndefine(\'core/vendor/d3-color\',[\'require\'],function(require){function e(e,t,r){(e.prototype=t.prototype=r).constructor=e}function t(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function h(){}var r=.7,n=1/r,i="\\\\s*([+-]?\\\\d+)\\\\s*",a="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)\\\\s*",o="\\\\s*([+-]?\\\\d*\\\\.?\\\\d+(?:[eE][+-]?\\\\d+)?)%\\\\s*",s=/^#([0-9a-f]{3,8})$/,l=new RegExp("^rgb\\\\("+[i,i,i]+"\\\\)$"),u=new RegExp("^rgb\\\\("+[o,o,o]+"\\\\)$"),g=new RegExp("^rgba\\\\("+[i,i,i,a]+"\\\\)$"),c=new RegExp("^rgba\\\\("+[o,o,o,a]+"\\\\)$"),d=new RegExp("^hsl\\\\("+[a,o,o]+"\\\\)$"),b=new RegExp("^hsla\\\\("+[a,o,o,a]+"\\\\)$"),p={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function m(){return this.rgb().formatHex()}function f(){return this.rgb().formatRgb()}function y(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=s.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?w(t):3===r?new v(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?k(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?k(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=l.exec(e))?new v(t[1],t[2],t[3],1):(t=u.exec(e))?new v(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=g.exec(e))?k(t[1],t[2],t[3],t[4]):(t=c.exec(e))?k(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=d.exec(e))?E(t[1],t[2]/100,t[3]/100,1):(t=b.exec(e))?E(t[1],t[2]/100,t[3]/100,t[4]):p.hasOwnProperty(e)?w(p[e]):"transparent"===e?new v(NaN,NaN,NaN,0):null}function w(e){return new v(e>>16&255,e>>8&255,255&e,1)}function k(e,t,r,n){return n<=0&&(e=t=r=NaN),new v(e,t,r,n)}function N(e){return e instanceof h||(e=y(e)),e?new v((e=e.rgb()).r,e.g,e.b,e.opacity):new v}function x(e,t,r,n){return 1===arguments.length?N(e):new v(e,t,r,null==n?1:n)}function v(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function M(){return"#"+q(this.r)+q(this.g)+q(this.b)}function R(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===e?")":", "+e+")")}function q(e){return((e=Math.max(0,Math.min(255,Math.round(e)||0)))<16?"0":"")+e.toString(16)}function E(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||1<=r?e=t=NaN:t<=0&&(e=NaN),new C(e,t,r,n)}function $(e){if(e instanceof C)return new C(e.h,e.s,e.l,e.opacity);if(e instanceof h||(e=y(e)),!e)return new C;if(e instanceof C)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(r-n)/s+6*(r<n):r===a?(n-t)/s+2:(t-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=0<l&&l<1?0:o,new C(o,s,l,e.opacity)}function H(e,t,r,n){return 1===arguments.length?$(e):new C(e,t,r,null==n?1:n)}function C(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function j(e,t,r){return 255*(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)}return e(h,y,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:m,formatHex:m,formatHsl:function(){return $(this).formatHsl()},formatRgb:f,toString:f}),e(v,x,t(h,{brighter:function(e){return e=null==e?n:Math.pow(n,e),new v(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=null==e?r:Math.pow(r,e),new v(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:M,formatHex:M,formatRgb:R,toString:R})),e(C,H,t(h,{brighter:function(e){return e=null==e?n:Math.pow(n,e),new C(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=null==e?r:Math.pow(r,e),new C(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new v(j(240<=e?e-240:120+e,i,n),j(e,i,n),j(e<120?240+e:e-120,i,n),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return(1===(e=isNaN(e)?1:Math.max(0,Math.min(1,e)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===e?")":", "+e+")")}})),{Color:h,darker:r,brighter:n,color:y,rgbConvert:N,rgb:x,Rgb:v,hslConvert:$,hsl:H}});\ndefine(\'core/math/builtin\',[\'require\',\'core/math/mathshim\',\'core/math/distance\',\'core/math/quadrature\',\'core/math/tofraction\',\'core/math/poi\',\'core/lib/md5\',\'core/vendor/d3-color\'],function(require){"use strict";var e=require("core/math/mathshim"),a=require("core/math/distance"),r=require("core/math/quadrature"),t=require("core/math/tofraction").default,f=require("core/math/poi").floatMiddle,n=require("core/lib/md5"),u=require("core/vendor/d3-color");function o(r,t,n){return Math.max(t,Math.min(n,r))}var s={};s.cosh=e.cosh,s.sinh=e.sinh,s.tanh=e.tanh,s.acosh=e.acosh,s.asinh=e.asinh,s.atanh=e.atanh,s.expm1=e.expm1,s.log1p=e.log1p,s.sqrtxsqp1=e.sqrtxsqp1,s.sqrtxsqm1=e.sqrtxsqm1,s.mod=function(r,t){return r-t*Math.floor(r/t)},s.round=function(r,t){if(void 0===t&&(t=0),0===(t=Math.round(t)))return Math.round(r);var n=Math.pow(10,t);return Math.round(r*n)/n},s.sign=Math.sign||function(r){return 0===r?0:0<r?1:r<0?-1:NaN},s.lcm=function(r,t){r=Math.round(r),t=Math.round(t);var n=s.gcd(r,t);return Math.abs(r/n*t)},s.gcd=function(r,t){var n;if((r=Math.round(r))<0&&(r=-r),(t=Math.round(t))<0&&(t=-t),r<t&&(n=t,t=r,r=n),0===t)return r;for(var a=r%t;0<a;)a=(r=t)%(t=a);return t},s.listGCD=function(r){if(0===r.length)return NaN;for(var t=r[0],n=1;n<r.length;n++)t=s.gcd(t,r[n]);return t},s.listLCM=function(r){if(0===r.length)return NaN;for(var t=r[0],n=1;n<r.length;n++)t=s.lcm(t,r[n]);return t},s.nCr=function(r,t){if((r=Math.round(r))<(t=Math.round(t))||r<0||t<0)return 0;if(t===1/0||r===1/0)return NaN;for(var n=1,a=0;a<t;a++)n*=(r-a)/(a+1);return n},s.nPr=function(r,t){if((r=Math.round(r))<(t=Math.round(t))||r<0||t<0)return 0;if(t===1/0||r===1/0)return NaN;for(var n=1,a=0;a<t;a++)n*=r-a;return n},s.factorial=function(r){return s.gamma(r+1)},s.gamma=function(r){if(r<0)return Math.PI/(s.sin(Math.PI*r)*s.gamma(1-r));if(170<r)return 1/0;var t=Math.round(r)===r,n=r<15?i(r):r<120?h(r):Math.exp(c(r));return t?Math.round(n):n};var i=function(r){var t=1+r*(4.077131788261185+r*(7.024675027156382+r*(6.657107767450176+r*(3.766266976716022+r*(1.2792371666711133+r*(.24304596436338005+.020049769312165774*r)))))),n=1+r*(4.154347453162709+r*(7.270007565107539+r*(6.97805297331391+r*(3.989651532924167+r*(1.367176195613119+r*(.26175627691546965+.021742722739397567*r))))));return Math.E*Math.pow((1+r)/Math.E,1+r)/(r*Math.sqrt(1+r))*(t/n)},h=function(r){var t=r-1;return Math.pow(t,t)*Math.exp(m(t)-t)*Math.sqrt(2*Math.PI*t)},c=function(r){var t=r-1;return t*(Math.log(t)-1)+.5*Math.log(2*Math.PI*t)+m(t)};s.lnGamma=function(r){return r<0?NaN:r<15?Math.log(i(r)):c(r)},s.bernoulliTable=[1/6,-1/30,1/42,-1/30,5/66,-691/2730,7/6,-3617/510,43867/798,-174611/330,854513/138,-236364091/2730,8553103/6,-23749461029/870],s.cotDerivative=function(r,t){if(r!==Math.floor(r))return NaN;if(r<0)return NaN;if(0===r)return 1/s.tan(t);var n=s.sin(t);if(1===r)return-1/(n*n);var a=s.cos(t);if(2===r)return 2*a/(n*n*n);for(var e,u,o,i=[0,2],f=3;f<=r;f++){for(e=[],c=0;c<f;c++)(o=u=0)<c&&(u=(f-c+1)*i[c-1]),c+2<f&&(o=(c+1)*i[c+1]),e.push(-(u+o));i=e}for(var h=0,c=r-1;0<=c;c--)h=e[c]+a*h;return h/Math.pow(n,r+1)},s.polyGamma=function(r,t){if(r<0)return NaN;if(r!==Math.floor(r))return NaN;var n=r%2==0?-1:1;if(t<0)return-n*s.polyGamma(r,1-t)-Math.pow(Math.PI,r+1)*s.cotDerivative(r,Math.PI*t);for(var a=s.factorial(r),e=0,u=Math.pow(t,-(r+1));t<10;)e+=u,t++,u=Math.pow(t,-(r+1));e+=0===r?-Math.log(t):u*t/r,e+=.5*u;for(var o=s.bernoulliTable,i=r+1,f=2,h=u*t*i/f,c=1/(t*t),M=1;M<=14;M++)e+=(h*=c)*o[M-1],h*=++i/++f,h*=++i/++f;return a*n*e},s.toFraction=t,s.log=function(r){var t=Math.log(r);return Math.exp(Math.round(t))===r?Math.round(t):t},s.log_base=function(r,t){if(0===t)return NaN;var n=t===Math.E?Math.log(r):2===t&&Math.log2?Math.log2(r):10===t&&Math.log10?Math.log10(r):Math.log(r)/Math.log(t);return Math.pow(t,Math.round(n))===r?Math.round(n):n},s.common_log=function(r){return s.log_base(r,10)},s.pow=function(r,t){if(!isFinite(r)&&0===t)return NaN;if(0<=r||t===Math.floor(t))return Math.pow(r,t);var n=s.toFraction(t,100);return a.approx(n.n/n.d,t,2)&&n.d%2==1?(n.n%2==0?1:-1)*Math.pow(-r,t):NaN},s.nthroot=function(r,t){return s.pow(r,1/t)};var M=1/Math.PI;function l(r){return!(1e12<r)&&Math.round(M*r)*Math.PI===r}function v(r){if(!(1e12<r)){var t=Math.round(2*M*r);return t%2==1&&t*Math.PI==2*r}}s.sin=function(r){return l(Math.abs(r))?0:Math.sin(r)},s.cos=function(r){return v(Math.abs(r))?0:Math.cos(r)},s.tan=function(r){var t=Math.abs(r);return l(t)?0:v(t)?1/0:Math.tan(r)},s.sec=function(r){return v(Math.abs(r))?1/0:1/Math.cos(r)},s.csc=function(r){return l(Math.abs(r))?1/0:1/Math.sin(r)},s.cot=function(r){var t=Math.abs(r);return l(t)?1/0:v(t)?0:1/Math.tan(r)},s.acot=function(r){return Math.PI/2-Math.atan(r)},s.acsc=function(r){return Math.asin(1/r)},s.asec=function(r){return Math.acos(1/r)},s.sech=function(r){return 1/s.cosh(r)},s.csch=function(r){return 1/s.sinh(r)},s.coth=function(r){return 1/s.tanh(r)},s.asech=function(r){return s.acosh(1/r)},s.acsch=function(r){return s.asinh(1/r)},s.acoth=function(r){return s.atanh(1/r)},s.mean=function(r){for(var t=0,n=0;n<r.length;n++)t+=r[n];return t/r.length},s.total=function(r){for(var t=0,n=0;n<r.length;n++)t+=r[n];return t};function N(r){return 50<r?Math.exp(.5*((1-r)*e.log1p(-1/(r-1))-1)+m(.5*(r-1))-m(.5*(r-2)))*Math.sqrt((1-1/r)/(2*Math.PI)):s.gamma((r+1)/2)/(s.gamma(r/2)*Math.sqrt(r*Math.PI))}var m=function(r){var t=r*r;return(.08333333333333333-(.002777777777777778-(.0007936507936507937-(.0005952380952380953-.0008417508417508417/t)/t)/t)/t)/r};s.tpdf=function(r,t){return t<=0?NaN:N(t)*Math.pow(1+r*r/t,-(t+1)/2)};var d=function(r,t){if(0<t)return 1-d(r,-t);if(t===-1/0)return 0;var n=Math.sqrt(2*r/(r+1));if(Math.abs(t/n)<.001)return.5*(1+Math.sqrt(Math.PI)*N(r)*n*s.erf(t/n));if(t/r<-1e3){var a=t*t;return N(r)*Math.pow(r,.5*(r-1))*Math.pow(Math.abs(t),-r)*(1-r*r*(r+1)*(1/(2+r)+r*(r+3)/(4*(4+r)*a))/(2*a))}var e=Math.sqrt(t*t+r);return q((t+e)/(2*e),r/2,r/2)};s.tcdf=function(r,t,n){return n<=0?NaN:r===-1/0?d(n,t):0<r&&0<t?d(n,-r)-d(n,-t):d(n,t)-d(n,r)};function p(r,t,n){return(r-t)/(Math.SQRT2*Math.abs(n))}function g(r){return r<0?.5*Math.exp(-r*r)*s.erfcx(-r):1-.5*Math.exp(-r*r)*s.erfcx(r)}var q=function(r,t,n){if(r<0||1<r)throw new RangeError("First argument must be between 0 and 1.");if(1===t&&1===n)return r;if(0===r)return 0;if(1===r)return 1;if(0===t)return 1;if(0===n)return 0;var a=Math.exp(s.lnGamma(t+n)-s.lnGamma(t)-s.lnGamma(n)+t*Math.log(r)+n*e.log1p(-r));return r<(t+1)/(t+n+2)?a*x(r,t,n)/t:1-a*x(1-r,n,t)/n},x=function(r,t,n){var a,e,u,o,i=1e-30,f=1,h=t+n,c=t+1,M=t-1,s=1,l=1-h*r/c;for(Math.abs(l)<i&&(l=i),o=l=1/l;f<=100&&(l=1+(e=f*(n-f)*r/((M+(a=2*f))*(t+a)))*l,Math.abs(l)<i&&(l=i),s=1+e/s,Math.abs(s)<i&&(s=i),o*=(l=1/l)*s,l=1+(e=-(t+f)*(h+f)*r/((t+a)*(c+a)))*l,Math.abs(l)<i&&(l=i),s=1+e/s,Math.abs(s)<i&&(s=i),o*=u=(l=1/l)*s,!(Math.abs(u-1)<3e-7));f++);return o};s.normalcdf=function(r,t,n,a){var e=p(t,n,a);if(r===-1/0)return g(e);var u=p(r,n,a);return 0<r&&0<t?g(-u)-g(-e):g(e)-g(u)},s.normalpdf=function(r,t,n){return 1/Math.sqrt(2*Math.PI*n*n)*Math.exp(-(r-t)*(r-t)/(2*n*n))},s.random=function(r){var t=n(r);return(4294967296*(2097151&parseInt(t.slice(0,8),16))+parseInt(t.slice(8,16),16))/9007199254740992},s.shuffle=function(r,t){for(var n=t.length-1;0<n;n--){var a=r+"::sc"+n,e=Math.floor(s.random(a)*(n+1)),u=t[n];t[n]=t[e],t[e]=u}},s.randomPerm=function(r,t){for(var n=[],a=0;a<t;a++)n.push(a);return s.shuffle(r,n),n},s.uniformSample=function(r,t,n){return s.random(r)*(n-t)+t},s.normalSample=function(r,t,n){for(var a,e,u,o,i=0;a=r+"::sc"+i,i+=1,e=2*s.uniformSample(a,0,1)-1,a=r+"::sc"+i,i+=1,1<=(o=e*e+(u=2*s.uniformSample(a,0,1)-1)*u)||0===o;);return t+n*e*Math.sqrt(-2*Math.log(o)/o)},s.tSample=function(r,t){if(t<=0)return NaN;for(var n,a,e,u=0;f=r+"::sc"+u,u+=1,n=2*s.uniformSample(f,0,1)-1,f=r+"::sc"+u,u+=1,1<(e=n*n+(a=2*s.uniformSample(f,0,1)-1)*a););var o=n*n/e,i=t*(Math.pow(e,-2/t)-1),f=r+"::sc"+u;return u+=1,(s.uniformSample(f,0,1)<.5?-1:1)*Math.sqrt(o*i)},s.binomSample=function(r,t,n){return(t=o(Math.round(t),0,1/0))===1/0?NaN:(n=o(n,0,1),s.invBinom(s.uniformSample(r,0,1),t,n))},s.poissonSample=function(r,t){return t<=0?NaN:s.invPoisson(s.uniformSample(r,0,1),t)};function b(r,t,n){if(t<=r)return 1;if(r<0)return 0;for(var a=n/(1-n),e=Math.pow(1-n,t),u=e,o=1;o<=Math.min(t,r);o++)u+=e*=(t-o+1)/o*a;return u}s.binomcdf=function(r,t,n,a){return(n=o(Math.round(n),0,1/0))===1/0?NaN:(a=o(a,0,1),t<0?0:(r=Math.ceil(r),t=Math.floor(t),r===-1/0?b(t,n,a):b(t,n,a)-b(r-1,n,a)))},s.binompdf=function(r,t,n){return r=Math.round(r),(t=o(Math.round(t),0,1/0))===1/0?NaN:(n=o(n,0,1),r<0||t<r?0:s.nCr(t,r)*Math.pow(n,r)*Math.pow(1-n,t-r))},s.poissonpdf=function(r,t){return t<=0?NaN:(r=Math.round(r))<0?0:Math.exp(-t+r*Math.log(t)-s.lnGamma(r+1))};function P(r,t){if(r===1/0)return 1;if(r<0)return 0;for(var n=1,a=1,e=1;e<=r;e++){var u=a;if((a+=n*=t/e)===u)break}return Math.exp(-t)*a}s.poissoncdf=function(r,t,n){return n<=0?NaN:(r=Math.ceil(r),(t=Math.floor(t))<0?0:r===-1/0?P(t,n):P(t,n)-P(r-1,n))},s.uniformpdf=function(r,t,n){return n<=t?NaN:r<t||n<r?0:1/(n-t)};function w(r,t,n){return n<=t?NaN:r<t?0:n<r?1:(r-t)/(n-t)}s.uniformcdf=function(r,t,n,a){return w(t,n,a)-w(r,n,a)},s.erf=function(r){var t=-r*r;if(t<-750)return 0<=r?1:-1;if(.065<=r)return 1-Math.exp(t)*s.erfcx(r);if(r<=-.065)return Math.exp(t)*s.erfcx(-r)-1;return r*(1.1283791670955126+t*(.37612638903183754+t*(.11283791670955126+t*(.026866170645131252+.005223977625442188*t))))},s.erfcx=function(r){if(r<0)return r<-6.1?2*Math.exp(r*r):2*Math.exp(r*r)-s.erfcx(-r);if(50<r){var t=.5641895835477563,n=r*r;return 5e7<r?t/r:t*(n*(4.5+n)+2)/(r*(n*(5+n)+3.75))}return(.9999999999999999+r*(2.224574423459406+r*(2.444115549920689+r*(1.7057986861852539+r*(.8257463703357973+r*(.28647031042892007+r*(.07124513844341643+r*(.012296749268608364+r*(.001347817214557592+7263959403471071e-20*r)))))))))/(1+r*(3.352953590554884+r*(5.227518529742423+r*(5.003720878235473+r*(3.266590890998987+r*(1.5255421920765353+r*(.5185887413188858+r*(.12747319185915415+r*(.02185979575963238+r*(.0023889438122503674+.00012875032817508128*r))))))))))},s.invNorm=function(r){var t,n,a;return.5<r?-s.invNorm(1-r):.5===r?0:r<0?NaN:0===r?-1/0:(a=r<.02425?(((((-.00778489400243029*(t=Math.sqrt(-2*Math.log(r)))-.322396458041136)*t-2.40075827716184)*t-2.54973253934373)*t+4.37466414146497)*t+2.93816398269878)/((((.00778469570904146*t+.32246712907004)*t+2.445134137143)*t+3.75440866190742)*t+1):(((((-39.6968302866538*(n=(t=r-.5)*t)+220.946098424521)*n-275.928510446969)*n+138.357751867269)*n-30.6647980661472)*n+2.50662827745924)*t/(((((-54.4760987982241*n+161.585836858041)*n-155.698979859887)*n+66.8013118877197)*n-13.2806815528857)*n+1))-Math.sqrt(2*Math.PI)*(.5*s.erfcx(-a/Math.SQRT2)-Math.exp(.5*a*a)*r)},s.invPoisson=function(r,t){if(t<=0||r<0||1<r)return NaN;if(0===r)return 0;if(1===r)return 1/0;for(var n=1,a=1,e=1;Math.exp(-t)*a<r;){if(a+(n*=t/e)===a)return 1/0;a+=n,e+=1}return e-1},s.invBinom=function(r,t,n){if(t!==Math.round(t))return NaN;if(n<0||1<n)return NaN;if(r<0||1<r)return NaN;if(0===r)return 0;if(1===r)return t;if(0===t)return 0;if(1===n)return t;if(0===n)return 0;for(var a=n/(1-n),e=Math.pow(1-n,t),u=e,o=1;u<r;){if(u+(e*=(t-o+1)/o*a)===u)return t;if(t<o)return t;u+=e,o+=1}return o-1},s.invT=function(r,t){return isNaN(t)||t<=0||r<0||1<r?NaN:0===r?-1/0:1===r?1/0:1===t||2===t||4===t?I(t,r):.5===r?0:.5<r?(n=1<t?s.invNorm(r):I(1,r),a=1<t?I(1,r):Math.pow(s.tpdf(0,t)*Math.pow(t,(t-1)/2)/(1-r),1/t),S(t,r,n,a)):-s.invT(1-r,t);var n,a};var I=function(r,t){var n=4*t*(1-t);switch(r){case 1:return Math.tan(Math.PI*(t-.5));case 2:return 2*(t-.5)*Math.sqrt(2/n);case 4:var a=Math.cos(Math.acos(Math.sqrt(n))/3)/Math.sqrt(n);return 2*Math.sign(t-.5)*Math.sqrt(a-1);default:throw new Error("_invTSimple() must be called with 1, 2, or 4 df.")}},S=function(r,t,n,a){if(!isFinite(n)||!isFinite(a))return NaN;for(var e,u,o=n,i=a;;){if(e=f(o,i),u=d(r,e),e===o||e===i)return t<u?o:i;u<t?o=e:i=e}};function T(r,t,n){return n<0?s.tcdf(-1/0,r,t):0<n?s.tcdf(-1/0,-r,t):2*s.tcdf(-1/0,-Math.abs(r),t)}return s.invUniform=function(r,t,n){return r<0||1<r||n<=t?NaN:0===r?t:1===r?n:t+r*(n-t)},s.tscore=function(r,t){var n=s.stdev(r);return(s.mean(r)-t)*Math.sqrt(r.length)/n},s.itscore=function(r,t){var n=r.length,a=s.mean(r),e=s.stdev(r),u=t.length,o=s.mean(t),i=s.stdev(t);return(a-o)/(Math.sqrt(((n-1)*e*e+(u-1)*i*i)/(n+u-2))*Math.sqrt(1/n+1/u))},s.ttest=function(r,t){1===arguments.length&&(t=0);var n=s.tscore(r,t),a=r.length-1;return{lessThan:T(n,a,-1),greaterThan:T(n,a,1),notEqual:T(n,a,0)}},s.ittest=function(r,t){var n=s.itscore(r,t),a=r.length+t.length-2;return{lessThan:T(n,a,-1),greaterThan:T(n,a,1),notEqual:T(n,a,0)}},s.stats=function(r){return{min:s.listMin(r),q1:s.quartile(r,1),median:s.median(r),q3:s.quartile(r,3),max:s.listMax(r)}},s.length=function(r){return r.length},s.listMin=function(r){if(r.length<1)return NaN;var t=r[0];if(isNaN(t))return NaN;for(var n=1;n<r.length;n++){if(isNaN(r[n]))return NaN;r[n]<t&&(t=r[n])}return t},s.listMax=function(r){if(r.length<1)return NaN;var t=r[0];if(isNaN(t))return NaN;for(var n=1;n<r.length;n++){if(isNaN(r[n]))return NaN;r[n]>=t&&(t=r[n])}return t},s.quantile=function(r,t){if(!isFinite(t)||t<0||1<t)return NaN;if(r.some(isNaN))return NaN;if(0===r.length)return NaN;var n=r.length,a=s.sortPerm(r),e=t*(n-1);return Math.floor(e)===e?r[a[e]]:(Math.ceil(e)-e)*r[a[Math.floor(e)]]+(e-Math.floor(e))*r[a[Math.ceil(e)]]},s.quartile=function(r,t){if(!isFinite(t)||t<0||4<t)return NaN;if(r.some(isNaN))return NaN;var n=s.sortPerm(r),a=s.quartileIndex(r,t),e=Math.floor(a),u=Math.ceil(a);return(r[n[e]]+r[n[u]])/2},s.sortPerm=function(n){for(var r=n.length,t=[],a=0;a<r;a++)t.push(a);return t.sort(function(r,t){return n[r]-n[t]}),t},s.quartileIndex=function(r,t){t=Math.round(t);var n,a=r.length,e=a%2==1;return 1===a?0:(0===t&&(n=0),2===t&&(n=(a-1)/2),4===t&&(n=a-1),1===t&&(n=e?(a+1)/4-1:(a+2)/4-1),3===t&&(n=e?(3*a+3)/4-1:(3*a+2)/4-1),n)},s.upperQuantileIndex=function(r,t){return s.sortPerm(r)[Math.ceil(t*(r.length-1))]+1},s.lowerQuantileIndex=function(r,t){return s.sortPerm(r)[Math.floor(t*(r.length-1))]+1},s.upperQuartileIndex=function(r,t){return s.sortPerm(r)[Math.ceil(s.quartileIndex(r,t))]+1},s.lowerQuartileIndex=function(r,t){return s.sortPerm(r)[Math.floor(s.quartileIndex(r,t))]+1},s.median=function(r){return s.quantile(r,.5)},s.argMin=function(r){if(r.length<1)return 0;var t=r[0];if(isNaN(t))return 0;for(var n=0,a=1;a<r.length;a++){if(isNaN(r[a]))return 0;r[a]<t&&(t=r[n=a])}return n+1},s.argMax=function(r){if(r.length<1)return 0;var t=r[0];if(isNaN(t))return 0;for(var n=0,a=1;a<r.length;a++)if(r[a]>=t){if(isNaN(r[a]))return 0;t=r[n=a]}return n+1},s.varp=function(r){for(var t=s.mean(r),n=0,a=0;a<r.length;a++){var e=r[a]-t;n+=e*e}return n/r.length},s.mad=function(r){for(var t=s.mean(r),n=0,a=0;a<r.length;a++)n+=Math.abs(r[a]-t);return n/r.length},s.var=function(r){var t=r.length;return s.varp(r)*t/(t-1)},s.covp=function(r,t){if(r.length!==t.length)return NaN;for(var n=r.length,a=s.mean(r),e=s.mean(t),u=0,o=0;o<n;o++)u+=(r[o]-a)*(t[o]-e);return u/n},s.cov=function(r,t){if(r.length!==t.length)return NaN;var n=r.length;return s.covp(r,t)*n/(n-1)},s.corr=function(r,t){if(r.length!==t.length)return NaN;for(var n,a,e=r.length,u=s.mean(r),o=s.mean(t),i=0,f=0,h=0,c=0;c<e;c++)i+=(n=r[c]-u)*n,f+=(a=t[c]-o)*a,h+=n*a;return h/Math.sqrt(i*f)},s.rank=function(r){var t=r.length;if(0===t)return[];for(var n=[],a=[],e=0;e<t;e++)a.push([r[e],e]);a.sort(function(r,t){var n=r[0],a=t[0];return n===1/0&&a===1/0||n===-1/0&&a===-1/0?0:n-a}),e=0;for(var u=1;e<t;){for(f=e;f<t-1&&a[f][0]===a[f+1][0];)f+=1;for(var o,i=f-e+1,f=0;f<i;f++)n[o=a[e+f][1]]=isNaN(r[o])?NaN:u+.5*(i-1);u+=i,e+=i}return n},s.spearman=function(r,t){return s.corr(s.rank(r),s.rank(t))},s.stdev=function(r){return Math.sqrt(s.var(r))},s.stdevp=function(r){return Math.sqrt(s.varp(r))},s.quad=r.quad,s.distance=function(r,t){return a.hypot(t[0]-r[0],t[1]-r[1])},s.midpoint=function(r,t){return[.5*(r[0]+t[0]),.5*(r[1]+t[1])]},s.addPoints=function(r,t){return[r[0]+t[0],r[1]+t[1]]},s.subtractPoints=function(r,t){return[r[0]-t[0],r[1]-t[1]]},s.negatePoint=function(r){return[-r[0],-r[1]]},s.multiplyPoint=function(r,t){return[t*r[0],t*r[1]]},s.dividePoint=function(r,t){return[r[0]/t,r[1]/t]},s.rgb=function(r,t,n){return[o(Math.round(r),0,255),o(Math.round(t),0,255),o(Math.round(n),0,255)]},s.hsv=function(r,t,n){r=o(r,0,360),t=o(t,0,1);var a=(n=o(n,0,1))*(1-t/2);t=0==a||1==a?0:(n-a)/Math.min(a,1-a);var e=u.hsl(r,t,a).rgb();return s.rgb(e.r,e.g,e.b)},s});\ndefine(\'core/math/functions\',["require","exports","core/math/builtin"],function(require,e,r){"use strict";function u(e){delete e.fn}function a(e){e.fn=i(e.args,e.source)}function i(e,t){var n=e.join(",");return new Function("BuiltIn","return (function("+n+\'){"use strict"; \'+t+"})")(r)}Object.defineProperty(e,"__esModule",{value:!0}),e.closureFunctionWithBuiltIn=e.createEvaluateFunction=e.rehydrateCompiledFunction=e.dehydrateCompiledFunction=e.rehydrateGraphData=e.dehydrateGraphData=void 0,e.dehydrateGraphData=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t].compiled;r&&u(r)}},e.rehydrateGraphData=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t].compiled;r&&a(r)}},e.dehydrateCompiledFunction=u,e.rehydrateCompiledFunction=a,e.createEvaluateFunction=function(e,t){for(var n=[],r=0;r<t;r++)n.push("values["+r+"]");return i(["values"],"return "+e(n))},e.closureFunctionWithBuiltIn=i});\ndefine(\'core/math/parser/input-span\',["require","exports"],function(require,n){"use strict";function e(n,t,e){return{input:n,start:t,end:e}}Object.defineProperty(n,"__esModule",{value:!0}),n.slice=n.joinSpans=n.emptySpanAt=n.Span=void 0,n.Span=e,n.emptySpanAt=function(n,t){return e(n,t,t)},n.joinSpans=function(n,t){if(n.input!==t.input)throw new Error("Programming Error: cannot form a span on different inputs");return e(n.input,n.start,t.end)},n.slice=function(n){return n.input.slice(n.start,n.end)}});\ndefine(\'core/math/policy\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.defaultPolicy=void 0;var n=["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"];e.defaultPolicy={assignmentForbidden:function(e){return!0},graphingEnabled:function(){return!1},isValidSlider:function(e){return!1},sliderVariables:function(e){return[]},ansEnabled:function(){return!1},disabledFeatures:function(){return n}}});\ndefine(\'core/math/parsenode/base\',[\'require\',\'pjs\',\'core/math/functions\',\'core/math/parser/input-span\',\'core/math/policy\'],function(require){"use strict";var e=require("pjs"),s=require("core/math/functions"),r=require("core/math/parser/input-span"),u=require("core/math/policy").defaultPolicy;return e(function(e,n,t){e.init=function(){this._dependencies=[],this._dummyDependencies=[],this._exports=[]};var i=e.exportPenalty=0;e.tmpVar=function(){return"tmp"+i++},e.dependencies=function(){return this.getDependencies()},e.evaluateOnce=function(e){void 0===e&&(e={});var n=this.getConcreteTree(u,e).getEvaluationInfo();return n?n[0].val:NaN},e.setInputSpan=function(e){this._inputSpan=e},e.getInputString=function(){return void 0===this._inputSpan?"":r.slice(this._inputSpan)},e.getInputSpan=function(){return this._inputSpan},e.shouldExportAns=function(){return!1},e.getAnsVariable=function(){return this.shouldExportAns()&&this.userData&&this.userData.hasOwnProperty("index")?["ans_"+this.userData.index]:[]},e.addDependency=function(e){this.dependsOn(e)||this._dependencies.push(e)},e.addDependencies=function(e){for(var n=0;n<e.length;n++)this.addDependency(e[n])},e.addDummyDependency=function(e){-1===this._dummyDependencies.indexOf(e)&&this._dummyDependencies.push(e)},e.addDummyDependencies=function(e){for(var n=0;n<e.length;n++)this.addDummyDependency(e[n])},e.mergeDependencies=function(){for(var e=0;e<arguments.length;e++)this.addDependencies(arguments[e].getDependencies()),this.addDummyDependencies(arguments[e].getDummyDependencies())},e.getDependencies=function(){return this._dependencies},e.getDummyDependencies=function(){return this._dummyDependencies},e.removeDependency=function(e){var n=this._dependencies.indexOf(e);0<=n&&this._dependencies.splice(n,1)},e.dependsOn=function(e){return-1<this._dependencies.indexOf(e)},e.getExports=function(){return(this._exports||[]).concat(this.getAnsVariable())},e.getLegalExports=function(n){return this.getExports().filter(function(e){return!n.assignmentForbidden(e)})},e.exportsSymbol=function(e){return-1<this._exports.indexOf(e)},e.exportTo=function(e,n,t){for(var i=this.getLegalExports(e),r=0;r<i.length;r++){var s=i[r];if(t[s])return;t[s]=n.blocksExport?n:this}},e.getOperator=function(){return this.operator||"="},e.isInequality=function(){return!1},e.isShadeBetween=function(){return!1},e.getAllIds=function(){return this.userData?[this.userData.id]:[]},e.getEvaluationInfo=function(){return!1},e.shouldPromoteToSlider=function(e){return!1},e.getSliderVariables=function(e,n){return e.sliderVariables(n.getDependencies())},e.getCompiledFunction=function(e){var n,t,i=this.getEvalStrings(),r=i.statements.join(";")+";return "+i.expression;return void 0!==e||-1!==(n=(e=this.getDependencies()).indexOf("x"))&&(t=e[0],e[0]=e[n],e[n]=t),{args:e,source:r,fn:s.closureFunctionWithBuiltIn(e,r)}},e.getCompiledDerivative=function(){var e=this.getDependencies();return this.takeDerivative(e[0]||"x").getCompiledFunction()},e.asValue=function(){}})});\ndefine(\'core/math/parsenode/error\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(t,i){t.init=function(t){i.init.call(this),this._msg=t,this._sliderVariables=[],this.blocksExport=!0},t.evaluateOnce=function(t){return this._msg},t.isError=!0,t.getError=function(){return this._msg},t.setDependencies=function(t){return this._dependencies=t,this},t.allowExport=function(){return this.blocksExport=!1,this}})});\n!function(n,r){var t,e;"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define("underscore",r):(t=n._,e=r(),(n._=e).noConflict=function(){return n._=t,e})}(this,function(){var n="object"==typeof self&&self.self===self&&self||"object"==typeof global&&global.global===global&&global||Function("return this")()||{},e=Array.prototype,i=Object.prototype,p="undefined"!=typeof Symbol?Symbol.prototype:null,u=e.push,f=e.slice,s=i.toString,o=i.hasOwnProperty,r=Array.isArray,a=Object.keys,t=Object.create,c=n.isNaN,l=n.isFinite,v=function(){};function h(n){return n instanceof h?n:this instanceof h?void(this._wrapped=n):new h(n)}h.VERSION="1.10.2";function g(u,o,n){if(void 0===o)return u;switch(null==n?3:n){case 1:return function(n){return u.call(o,n)};case 3:return function(n,r,t){return u.call(o,n,r,t)};case 4:return function(n,r,t,e){return u.call(o,n,r,t,e)}}return function(){return u.apply(o,arguments)}}function y(n,r,t){return null==n?er:Vn(n)?g(n,r,t):(Kn(n)&&!Pn(n)?or:ur)(n)}function d(n,r){return y(n,r,1/0)}function m(n,r,t){return h.iteratee!==d?h.iteratee(n,r):y(n,r,t)}function b(u,o){return o=null==o?u.length-1:+o,function(){for(var n=Math.max(arguments.length-o,0),r=Array(n),t=0;t<n;t++)r[t]=arguments[t+o];switch(o){case 0:return u.call(this,r);case 1:return u.call(this,arguments[0],r);case 2:return u.call(this,arguments[0],arguments[1],r)}for(var e=Array(o+1),t=0;t<o;t++)e[t]=arguments[t];return e[o]=r,u.apply(this,e)}}function j(n){if(!Kn(n))return{};if(t)return t(n);v.prototype=n;var r=new v;return v.prototype=null,r}function _(r){return function(n){return null==n?void 0:n[r]}}function w(n,r){return null!=n&&o.call(n,r)}function x(n,r){for(var t=r.length,e=0;e<t;e++){if(null==n)return;n=n[r[e]]}return t?n:void 0}h.iteratee=d;var S=Math.pow(2,53)-1,A=_("length");function O(n){var r=A(n);return"number"==typeof r&&0<=r&&r<=S}function M(n,r,t){if(r=g(r,t),O(n))for(u=0,o=n.length;u<o;u++)r(n[u],u,n);else for(var e=xn(n),u=0,o=e.length;u<o;u++)r(n[e[u]],e[u],n);return n}function E(n,r,t){r=m(r,t);for(var e=!O(n)&&xn(n),u=(e||n).length,o=Array(u),i=0;i<u;i++){var a=e?e[i]:i;o[i]=r(n[a],a,n)}return o}function N(f){return function(n,r,t,e){var u=3<=arguments.length;return function(n,r,t,e){var u=!O(n)&&xn(n),o=(u||n).length,i=0<f?0:o-1;for(e||(t=n[u?u[i]:i],i+=f);0<=i&&i<o;i+=f){var a=u?u[i]:i;t=r(t,n[a],a,n)}return t}(n,g(r,e,4),t,u)}}var k=N(1),I=N(-1);function T(n,r,t){var e=(O(n)?un:In)(n,r,t);if(void 0!==e&&-1!==e)return n[e]}function B(n,e,r){var u=[];return e=m(e,r),M(n,function(n,r,t){e(n,r,t)&&u.push(n)}),u}function R(n,r,t){r=m(r,t);for(var e=!O(n)&&xn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(!r(n[i],i,n))return!1}return!0}function F(n,r,t){r=m(r,t);for(var e=!O(n)&&xn(n),u=(e||n).length,o=0;o<u;o++){var i=e?e[o]:o;if(r(n[i],i,n))return!0}return!1}function q(n,r,t,e){return O(n)||(n=An(n)),"number"==typeof t&&!e||(t=0),0<=cn(n,r,t)}var D=b(function(n,t,e){var u,o;return Vn(t)?o=t:Pn(t)&&(u=t.slice(0,-1),t=t[t.length-1]),E(n,function(n){var r=o;if(!r){if(u&&u.length&&(n=x(n,u)),null==n)return;r=n[t]}return null==r?r:r.apply(n,e)})});function W(n,r){return E(n,ur(r))}function z(n,e,r){var t,u,o=-1/0,i=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=O(n)?n:An(n)).length;a<f;a++)null!=(t=n[a])&&o<t&&(o=t);else e=m(e,r),M(n,function(n,r,t){u=e(n,r,t),(i<u||u===-1/0&&o===-1/0)&&(o=n,i=u)});return o}function P(n,r,t){if(null==r||t)return O(n)||(n=An(n)),n[ir(n.length-1)];var e=(O(n)?qn:An)(n),u=A(e);r=Math.max(Math.min(r,u),0);for(var o=u-1,i=0;i<r;i++){var a=ir(i,o),f=e[i];e[i]=e[a],e[a]=f}return e.slice(0,r)}function K(i,r){return function(e,u,n){var o=r?[[],[]]:{};return u=m(u,n),M(e,function(n,r){var t=u(n,r,e);i(o,n,t)}),o}}var L=K(function(n,r,t){w(n,t)?n[t].push(r):n[t]=[r]}),V=K(function(n,r,t){n[t]=r}),C=K(function(n,r,t){w(n,t)?n[t]++:n[t]=1}),J=/[^\\ud800-\\udfff]|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff]/g;var U=K(function(n,r,t){n[t?0:1].push(r)},!0);function $(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[0]:G(n,n.length-r)}function G(n,r,t){return f.call(n,0,Math.max(0,n.length-(null==r||t?1:r)))}function H(n,r,t){return f.call(n,null==r||t?1:r)}function Q(n,r,t,e){for(var u=(e=e||[]).length,o=0,i=A(n);o<i;o++){var a=n[o];if(O(a)&&(Pn(a)||Ln(a)))if(r)for(var f=0,c=a.length;f<c;)e[u++]=a[f++];else Q(a,r,t,e),u=e.length;else t||(e[u++]=a)}return e}var X=b(function(n,r){return nn(n,r)});function Y(n,r,t,e){tr(r)||(e=t,t=r,r=!1),null!=t&&(t=m(t,e));for(var u=[],o=[],i=0,a=A(n);i<a;i++){var f=n[i],c=t?t(f,i,n):f;r&&!t?(i&&o===c||u.push(f),o=c):t?q(o,c)||(o.push(c),u.push(f)):q(u,f)||u.push(f)}return u}var Z=b(function(n){return Y(Q(n,!0,!0))});var nn=b(function(n,r){return r=Q(r,!0,!0),B(n,function(n){return!q(r,n)})});function rn(n){for(var r=n&&z(n,A).length||0,t=Array(r),e=0;e<r;e++)t[e]=W(n,e);return t}var tn=b(rn);function en(o){return function(n,r,t){r=m(r,t);for(var e=A(n),u=0<o?0:e-1;0<=u&&u<e;u+=o)if(r(n[u],u,n))return u;return-1}}var un=en(1),on=en(-1);function an(n,r,t,e){for(var u=(t=m(t,e,1))(r),o=0,i=A(n);o<i;){var a=Math.floor((o+i)/2);t(n[a])<u?o=a+1:i=a}return o}function fn(o,i,a){return function(n,r,t){var e=0,u=A(n);if("number"==typeof t)0<o?e=0<=t?t:Math.max(t+u,e):u=0<=t?Math.min(t+1,u):t+u+1;else if(a&&t&&u)return n[t=a(n,r)]===r?t:-1;if(r!=r)return 0<=(t=i(f.call(n,e,u),rr))?t+e:-1;for(t=0<o?e:u-1;0<=t&&t<u;t+=o)if(n[t]===r)return t;return-1}}var cn=fn(1,un,an),ln=fn(-1,on);function pn(n,r,t,e,u){if(!(e instanceof r))return n.apply(t,u);var o=j(n.prototype),i=n.apply(o,u);return Kn(i)?i:o}var sn=b(function(r,t,e){if(!Vn(r))throw new TypeError("Bind must be called on a function");var u=b(function(n){return pn(r,u,t,this,e.concat(n))});return u}),vn=b(function(u,o){var i=vn.placeholder,a=function(){for(var n=0,r=o.length,t=Array(r),e=0;e<r;e++)t[e]=o[e]===i?arguments[n++]:o[e];for(;n<arguments.length;)t.push(arguments[n++]);return pn(u,a,this,this,t)};return a});vn.placeholder=h;var hn=b(function(n,r){var t=(r=Q(r,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var e=r[t];n[e]=sn(n[e],n)}});var gn=b(function(n,r,t){return setTimeout(function(){return n.apply(null,t)},r)}),yn=vn(gn,h,1);function dn(n){return function(){return!n.apply(this,arguments)}}function mn(n,r){var t;return function(){return 0<--n&&(t=r.apply(this,arguments)),n<=1&&(r=null),t}}var bn=vn(mn,2),jn=!{toString:null}.propertyIsEnumerable("toString"),_n=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function wn(n,r){var t=_n.length,e=n.constructor,u=Vn(e)&&e.prototype||i,o="constructor";for(w(n,o)&&!q(r,o)&&r.push(o);t--;)(o=_n[t])in n&&n[o]!==u[o]&&!q(r,o)&&r.push(o)}function xn(n){if(!Kn(n))return[];if(a)return a(n);var r=[];for(var t in n)w(n,t)&&r.push(t);return jn&&wn(n,r),r}function Sn(n){if(!Kn(n))return[];var r=[];for(var t in n)r.push(t);return jn&&wn(n,r),r}function An(n){for(var r=xn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=n[r[u]];return e}function On(n){for(var r={},t=xn(n),e=0,u=t.length;e<u;e++)r[n[t[e]]]=t[e];return r}function Mn(n){var r=[];for(var t in n)Vn(n[t])&&r.push(t);return r.sort()}function En(f,c){return function(n){var r=arguments.length;if(c&&(n=Object(n)),r<2||null==n)return n;for(var t=1;t<r;t++)for(var e=arguments[t],u=f(e),o=u.length,i=0;i<o;i++){var a=u[i];c&&void 0!==n[a]||(n[a]=e[a])}return n}}var Nn=En(Sn),kn=En(xn);function In(n,r,t){r=m(r,t);for(var e,u=xn(n),o=0,i=u.length;o<i;o++)if(r(n[e=u[o]],e,n))return e}function Tn(n,r,t){return r in t}var Bn=b(function(n,r){var t={},e=r[0];if(null==n)return t;Vn(e)?(1<r.length&&(e=g(e,r[1])),r=Sn(n)):(e=Tn,r=Q(r,!1,!1),n=Object(n));for(var u=0,o=r.length;u<o;u++){var i=r[u],a=n[i];e(a,i,n)&&(t[i]=a)}return t}),Rn=b(function(n,t){var r,e=t[0];return Vn(e)?(e=dn(e),1<t.length&&(r=t[1])):(t=E(Q(t,!1,!1),String),e=function(n,r){return!q(t,r)}),Bn(n,e,r)}),Fn=En(Sn,!0);function qn(n){return Kn(n)?Pn(n)?n.slice():Nn({},n):n}function Dn(n,r){var t=xn(r),e=t.length;if(null==n)return!e;for(var u=Object(n),o=0;o<e;o++){var i=t[o];if(r[i]!==u[i]||!(i in u))return!1}return!0}function Wn(n,r,t,e){if(n===r)return 0!==n||1/n==1/r;if(null==n||null==r)return!1;if(n!=n)return r!=r;var u=typeof n;return("function"==u||"object"==u||"object"==typeof r)&&function(n,r,t,e){n instanceof h&&(n=n._wrapped);r instanceof h&&(r=r._wrapped);var u=s.call(n);if(u!==s.call(r))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+r;case"[object Number]":return+n!=+n?+r!=+r:0==+n?1/n==1/r:+n==+r;case"[object Date]":case"[object Boolean]":return+n==+r;case"[object Symbol]":return p.valueOf.call(n)===p.valueOf.call(r)}var o="[object Array]"===u;if(!o){if("object"!=typeof n||"object"!=typeof r)return!1;var i=n.constructor,a=r.constructor;if(i!==a&&!(Vn(i)&&i instanceof i&&Vn(a)&&a instanceof a)&&"constructor"in n&&"constructor"in r)return!1}e=e||[];var f=(t=t||[]).length;for(;f--;)if(t[f]===n)return e[f]===r;if(t.push(n),e.push(r),o){if((f=n.length)!==r.length)return!1;for(;f--;)if(!Wn(n[f],r[f],t,e))return!1}else{var c,l=xn(n);if(f=l.length,xn(r).length!==f)return!1;for(;f--;)if(c=l[f],!w(r,c)||!Wn(n[c],r[c],t,e))return!1}return t.pop(),e.pop(),!0}(n,r,t,e)}function zn(r){return function(n){return s.call(n)==="[object "+r+"]"}}var Pn=r||zn("Array");function Kn(n){var r=typeof n;return"function"==r||"object"==r&&!!n}var Ln=zn("Arguments"),Vn=zn("Function"),Cn=zn("String"),Jn=zn("Number"),Un=zn("Date"),$n=zn("RegExp"),Gn=zn("Error"),Hn=zn("Symbol"),Qn=zn("Map"),Xn=zn("WeakMap"),Yn=zn("Set"),Zn=zn("WeakSet");!function(){Ln(arguments)||(Ln=function(n){return w(n,"callee")})}();var nr=n.document&&n.document.childNodes;function rr(n){return Jn(n)&&c(n)}function tr(n){return!0===n||!1===n||"[object Boolean]"===s.call(n)}function er(n){return n}function ur(r){return Pn(r)?function(n){return x(n,r)}:_(r)}function or(r){return r=kn({},r),function(n){return Dn(n,r)}}function ir(n,r){return null==r&&(r=n,n=0),n+Math.floor(Math.random()*(r-n+1))}"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof nr&&(Vn=function(n){return"function"==typeof n||!1});var ar=Date.now||function(){return(new Date).getTime()},fr={"&":"&amp;","<":"&lt;",">":"&gt;",\'"\':"&quot;","\'":"&#x27;","`":"&#x60;"},cr=On(fr);function lr(r){function t(n){return r[n]}var n="(?:"+xn(r).join("|")+")",e=RegExp(n),u=RegExp(n,"g");return function(n){return n=null==n?"":""+n,e.test(n)?n.replace(u,t):n}}var pr=lr(fr),sr=lr(cr);var vr=0;function hr(n){return"\\\\"+dr[n]}var gr=h.templateSettings={evaluate:/<%([\\s\\S]+?)%>/g,interpolate:/<%=([\\s\\S]+?)%>/g,escape:/<%-([\\s\\S]+?)%>/g},yr=/(.)^/,dr={"\'":"\'","\\\\":"\\\\","\\r":"r","\\n":"n","\\u2028":"u2028","\\u2029":"u2029"},mr=/\\\\|\'|\\r|\\n|\\u2028|\\u2029/g;function br(n,r){return n._chain?h(r).chain():r}function jr(t){return M(Mn(t),function(n){var r=h[n]=t[n];h.prototype[n]=function(){var n=[this._wrapped];return u.apply(n,arguments),br(this,r.apply(h,n))}}),h}M(["pop","push","reverse","shift","sort","splice","unshift"],function(r){var t=e[r];h.prototype[r]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==r&&"splice"!==r||0!==n.length||delete n[0],br(this,n)}}),M(["concat","join","slice"],function(n){var r=e[n];h.prototype[n]=function(){return br(this,r.apply(this._wrapped,arguments))}}),h.prototype.valueOf=h.prototype.toJSON=h.prototype.value=function(){return this._wrapped},h.prototype.toString=function(){return String(this._wrapped)};var _r=jr({default:h,VERSION:"1.10.2",iteratee:d,restArguments:b,each:M,forEach:M,map:E,collect:E,reduce:k,foldl:k,inject:k,reduceRight:I,foldr:I,find:T,detect:T,filter:B,select:B,reject:function(n,r,t){return B(n,dn(m(r)),t)},every:R,all:R,some:F,any:F,contains:q,includes:q,include:q,invoke:D,pluck:W,where:function(n,r){return B(n,or(r))},findWhere:function(n,r){return T(n,or(r))},max:z,min:function(n,e,r){var t,u,o=1/0,i=1/0;if(null==e||"number"==typeof e&&"object"!=typeof n[0]&&null!=n)for(var a=0,f=(n=O(n)?n:An(n)).length;a<f;a++)null!=(t=n[a])&&t<o&&(o=t);else e=m(e,r),M(n,function(n,r,t){((u=e(n,r,t))<i||u===1/0&&o===1/0)&&(o=n,i=u)});return o},shuffle:function(n){return P(n,1/0)},sample:P,sortBy:function(n,e,r){var u=0;return e=m(e,r),W(E(n,function(n,r,t){return{value:n,index:u++,criteria:e(n,r,t)}}).sort(function(n,r){var t=n.criteria,e=r.criteria;if(t!==e){if(e<t||void 0===t)return 1;if(t<e||void 0===e)return-1}return n.index-r.index}),"value")},groupBy:L,indexBy:V,countBy:C,toArray:function(n){return n?Pn(n)?f.call(n):Cn(n)?n.match(J):O(n)?E(n,er):An(n):[]},size:function(n){return null==n?0:O(n)?n.length:xn(n).length},partition:U,first:$,head:$,take:$,initial:G,last:function(n,r,t){return null==n||n.length<1?null==r?void 0:[]:null==r||t?n[n.length-1]:H(n,Math.max(0,n.length-r))},rest:H,tail:H,drop:H,compact:function(n){return B(n,Boolean)},flatten:function(n,r){return Q(n,r,!1)},without:X,uniq:Y,unique:Y,union:Z,intersection:function(n){for(var r=[],t=arguments.length,e=0,u=A(n);e<u;e++){var o=n[e];if(!q(r,o)){for(var i=1;i<t&&q(arguments[i],o);i++);i===t&&r.push(o)}}return r},difference:nn,unzip:rn,zip:tn,object:function(n,r){for(var t={},e=0,u=A(n);e<u;e++)r?t[n[e]]=r[e]:t[n[e][0]]=n[e][1];return t},findIndex:un,findLastIndex:on,sortedIndex:an,indexOf:cn,lastIndexOf:ln,range:function(n,r,t){null==r&&(r=n||0,n=0),t=t||(r<n?-1:1);for(var e=Math.max(Math.ceil((r-n)/t),0),u=Array(e),o=0;o<e;o++,n+=t)u[o]=n;return u},chunk:function(n,r){if(null==r||r<1)return[];for(var t=[],e=0,u=n.length;e<u;)t.push(f.call(n,e,e+=r));return t},bind:sn,partial:vn,bindAll:hn,memoize:function(e,u){var o=function(n){var r=o.cache,t=""+(u?u.apply(this,arguments):n);return w(r,t)||(r[t]=e.apply(this,arguments)),r[t]};return o.cache={},o},delay:gn,defer:yn,throttle:function(t,e,u){var o,i,a,f,c=0;function l(){c=!1===u.leading?0:ar(),o=null,f=t.apply(i,a),o||(i=a=null)}function n(){var n=ar();c||!1!==u.leading||(c=n);var r=e-(n-c);return i=this,a=arguments,r<=0||e<r?(o&&(clearTimeout(o),o=null),c=n,f=t.apply(i,a),o||(i=a=null)):o||!1===u.trailing||(o=setTimeout(l,r)),f}return u=u||{},n.cancel=function(){clearTimeout(o),c=0,o=i=a=null},n},debounce:function(t,e,u){function o(n,r){i=null,r&&(a=t.apply(n,r))}var i,a,n=b(function(n){var r;return i&&clearTimeout(i),u?(r=!i,i=setTimeout(o,e),r&&(a=t.apply(this,n))):i=gn(o,e,this,n),a});return n.cancel=function(){clearTimeout(i),i=null},n},wrap:function(n,r){return vn(r,n)},negate:dn,compose:function(){var t=arguments,e=t.length-1;return function(){for(var n=e,r=t[e].apply(this,arguments);n--;)r=t[n].call(this,r);return r}},after:function(n,r){return function(){if(--n<1)return r.apply(this,arguments)}},before:mn,once:bn,keys:xn,allKeys:Sn,values:An,mapObject:function(n,r,t){r=m(r,t);for(var e=xn(n),u=e.length,o={},i=0;i<u;i++){var a=e[i];o[a]=r(n[a],a,n)}return o},pairs:function(n){for(var r=xn(n),t=r.length,e=Array(t),u=0;u<t;u++)e[u]=[r[u],n[r[u]]];return e},invert:On,functions:Mn,methods:Mn,extend:Nn,extendOwn:kn,assign:kn,findKey:In,pick:Bn,omit:Rn,defaults:Fn,create:function(n,r){var t=j(n);return r&&kn(t,r),t},clone:qn,tap:function(n,r){return r(n),n},isMatch:Dn,isEqual:function(n,r){return Wn(n,r)},isEmpty:function(n){return null==n||(O(n)&&(Pn(n)||Cn(n)||Ln(n))?0===n.length:0===xn(n).length)},isElement:function(n){return!(!n||1!==n.nodeType)},isArray:Pn,isObject:Kn,isArguments:Ln,isFunction:Vn,isString:Cn,isNumber:Jn,isDate:Un,isRegExp:$n,isError:Gn,isSymbol:Hn,isMap:Qn,isWeakMap:Xn,isSet:Yn,isWeakSet:Zn,isFinite:function(n){return!Hn(n)&&l(n)&&!c(parseFloat(n))},isNaN:rr,isBoolean:tr,isNull:function(n){return null===n},isUndefined:function(n){return void 0===n},has:function(n,r){if(!Pn(r))return w(n,r);for(var t=r.length,e=0;e<t;e++){var u=r[e];if(null==n||!o.call(n,u))return!1;n=n[u]}return!!t},identity:er,constant:function(n){return function(){return n}},noop:function(){},property:ur,propertyOf:function(r){return null==r?function(){}:function(n){return Pn(n)?x(r,n):r[n]}},matcher:or,matches:or,times:function(n,r,t){var e=Array(Math.max(0,n));r=g(r,t,1);for(var u=0;u<n;u++)e[u]=r(u);return e},random:ir,now:ar,escape:pr,unescape:sr,result:function(n,r,t){Pn(r)||(r=[r]);var e=r.length;if(!e)return Vn(t)?t.call(n):t;for(var u=0;u<e;u++){var o=null==n?void 0:n[r[u]];void 0===o&&(o=t,u=e),n=Vn(o)?o.call(n):o}return n},uniqueId:function(n){var r=++vr+"";return n?n+r:r},templateSettings:gr,template:function(o,n,r){!n&&r&&(n=r),n=Fn({},n,h.templateSettings);var t,e=RegExp([(n.escape||yr).source,(n.interpolate||yr).source,(n.evaluate||yr).source].join("|")+"|$","g"),i=0,a="__p+=\'";o.replace(e,function(n,r,t,e,u){return a+=o.slice(i,u).replace(mr,hr),i=u+n.length,r?a+="\'+\\n((__t=("+r+"))==null?\'\':_.escape(__t))+\\n\'":t?a+="\'+\\n((__t=("+t+"))==null?\'\':__t)+\\n\'":e&&(a+="\';\\n"+e+"\\n__p+=\'"),n}),a+="\';\\n",n.variable||(a="with(obj||{}){\\n"+a+"}\\n"),a="var __t,__p=\'\',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,\'\');};\\n"+a+"return __p;\\n";try{t=new Function(n.variable||"obj","_",a)}catch(n){throw n.source=a,n}function u(n){return t.call(this,n,h)}var f=n.variable||"obj";return u.source="function("+f+"){\\n"+a+"}",u},chain:function(n){var r=h(n);return r._chain=!0,r},mixin:jr});return _r._=_r});\ndefine(\'core/lib/label\',["require","exports","underscore","core/math/distance","core/math/tofraction"],function(require,e,r,c,d){"use strict";function i(e,t){if(void 0===t&&(t=e),isNaN(e)||!isFinite(e))return{ariaString:"undefined",string:"undefined",value:e};if(0===e)return{ariaString:"0",string:"0",value:e};Math.abs(e)>Math.abs(t)&&(t=e);var n=d.default(e/Math.PI,24);if(m(t)&&c.approx(n.n/n.d*Math.PI,e,3))return{ariaString:s(r=(0===n.n?"0":1===n.n?"":-1===n.n?"-":n.n.toString()+"")+(1===n.d?"":"/"+n.d.toString())),string:r,value:n.n/n.d*Math.PI};if(m(t))return{ariaString:s(r="-0"===(a=l(e.toFixed(v(t))))?"0":a),string:r,value:parseFloat(r)};var r,a,i=p(e.toExponential(v(t/e))).split("e"),u=i[0]+"10",o=i[1].replace("+","");return{ariaString:s(r=p(e.toExponential(v(t/e))).replace("+","")),string:r,mantissa:u,superscript:o,value:parseFloat(r)}}Object.defineProperty(e,"__esModule",{value:!0}),e.trimLatex=e.latexToIdentifier=e.identifierToHTML=e.identifierToLatex=e.formatSymbol=e.truncatedAriaLabel=e.truncatedLatexLabel=e.truncatedPlainmathLabel=e.truncatedHTMLLabel=e.numericLabel=e.canDisplayAsFraction=e.point=e.value=void 0,e.value=i;var t={"[e]":" times 10 to the ","[+]":" plus ","[-]":" minus ","[*]":" times ","[/]":" over ","[]":" pi ","[]":" tau ","[]":" theta ","[]":" phi "},n=new RegExp(Object.keys(t).join("|"),"gi");function a(e){return t["["+e+"]"]}var u=/\\.\\d+/g;function o(e){return e[0]+e.slice(1).split("").join(" ")}function s(e){return e.replace(u,o).replace(n,a).replace(/ +/gi," ").trim()}e.point=function(e,t,n,r){var a=i(e,t);return[a,i(r(a.value),n)]};var f=/\\.?0+$/;function l(e){return-1===e.indexOf(".")?e:e.replace(f,"")}function p(e){return e.replace(/\\.?0+e/,"e")}function m(e){return 1e-4<(e=Math.abs(e))&&e<1e7}function v(e){return e=Math.abs(e),e=Math.max(e,1e-16),Math.max(3,Math.floor(4.5-Math.log(e)/Math.LN10))}function h(e){return 1e6/Math.sqrt(Math.abs(e))}function b(e){var t=h(e);if(t<1)return!1;if(1e12<t)return!1;var n=d.default(e,t),r=n.n,a=n.d;return 1!==a&&e===e+Math.pow(2,-3)*Math.abs(r/a-e)}function g(e,t){if(t=t||{},isNaN(e)||!isFinite(e))return{type:"undefined"};if(0===e||t.zeroCutoff&&Math.abs(e)<t.zeroCutoff)return{type:"decimal",value:"0"};var n=t.smallCutoff||.001,r=t.bigCutoff||1e6,a=t.digits||10,i=p(e.toExponential(a-2)).match(/([\\d\\.\\-]+)e\\+?([\\d\\-]+)/);if(!i)return{type:"undefined"};var u=parseInt(i[2],10)>=a,o=b(e);if(Math.abs(e)>r||Math.abs(e)<n||u)return{type:"scientific",mantissa:i[1],exponent:i[2]};if(o&&t.displayAsFraction){var c=d.default(e,h(e));return{type:"fraction",numerator:c.n.toString(),denominator:c.d.toString()}}var s=l(e.toPrecision(a));return e!==Number(s)&&t.addEllipses&&(s+="..."),{type:"decimal",value:s}}function x(e){e=e.replace("\\\\","");var t={pi:"",tau:"",theta:"",phi:"",div:"",cdot:"",times:"",lt:"<",gt:">",le:"",ge:"",sim:"",ldots:"",prime:"",approx:""};return t.hasOwnProperty(e)?t[e]:e}e.canDisplayAsFraction=b,e.numericLabel=g,e.truncatedHTMLLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"<span class=\'dcg-cross\'></span>10<sup>"+n.exponent+"</sup>";case"fraction":return"1"===n.denominator?n.numerator:n.numerator+"/"+n.denominator;default:return n}},e.truncatedPlainmathLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+" * 10^"+n.exponent;case"fraction":return"1"===n.denominator?n.numerator:n.numerator+"/"+n.denominator;default:return n}},e.truncatedLatexLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return n.value;case"scientific":return n.mantissa+"\\\\times10^{"+n.exponent+"}";case"fraction":return"1"===n.denominator?n.numerator:"-"===n.numerator[0]?"-\\\\frac{"+n.numerator.slice(1)+"}{"+n.denominator+"}":"\\\\frac{"+n.numerator+"}{"+n.denominator+"}";default:return n}},e.truncatedAriaLabel=function(e,t){var n=g(e,t);switch(n.type){case"undefined":return"undefined";case"decimal":return s(n.value);case"scientific":return s(n.mantissa+"e"+n.exponent);case"fraction":return s(n.numerator+"/"+n.denominator);default:return n}},e.formatSymbol=x,e.identifierToLatex=function(e){var t=e.split("_"),n="";return 1<t[0].length&&(n+="\\\\"),n+=t[0],t[1]&&(n+="_{"+t[1]+"}"),n},e.identifierToHTML=function(e){if(!e)return"";var t=e.split("_").map(x).map(r.escape),n=t[0];return t[1]&&(n+="<sub>"+t[1]+"</sub>"),n},e.latexToIdentifier=function(e){return(e=e.replace(/\\\\operatorname\\{(.*)\\}/,"$1")).replace(/[{}\\\\]/g,"")},e.trimLatex=function(e){return e.replace(/^(\\\\ | |\\\\space)+/,"").replace(/(\\\\ | |\\\\space)+$/,"")}});\ndefine(\'core/math/types\',["require","exports","core/lib/worker-i18n"],function(require,t,r){"use strict";function s(e){switch(e){case t.Any:return"Any";case t.Number:return"Number";case t.Bool:return"Bool";case t.Point:return"Point";case t.Distribution:return"Distribution";case t.ListOfAny:return"ListOfAny";case t.ListOfNumber:return"ListOfNumber";case t.ListOfBool:return"ListOfBool";case t.ListOfPoint:return"ListOfPoint";case t.ListOfDistribution:return"ListOfDistribution";case t.EmptyList:return"EmptyList";case t.ErrorType:return"ErrorType";case t.SeedType:return"SeedType";case t.RGBColor:return"RGBColor";case t.ListOfColor:return"ListOfColor";default:throw new Error("Invalid type: "+e)}}Object.defineProperty(t,"__esModule",{value:!0}),t.isOneOf=t.hasListType=t.listType=t.elementType=t.isList=t.prettyPrint=t.repr=t.ListOfColor=t.RGBColor=t.SeedType=t.ErrorType=t.EmptyList=t.ListOfDistribution=t.ListOfPoint=t.ListOfBool=t.ListOfNumber=t.ListOfAny=t.Distribution=t.Point=t.Bool=t.Number=t.Any=void 0,t.Any=0,t.Number=1,t.Bool=2,t.Point=3,t.Distribution=4,t.ListOfAny=5,t.ListOfNumber=6,t.ListOfBool=7,t.ListOfPoint=8,t.ListOfDistribution=9,t.EmptyList=10,t.ErrorType=11,t.SeedType=12,t.RGBColor=13,t.ListOfColor=14,t.repr=s,t.prettyPrint=function(e){switch(e){case t.Any:return r.s("shared-calculator-label-value-type-any");case t.Number:return r.s("shared-calculator-label-value-type-number");case t.Bool:return r.s("shared-calculator-label-value-type-bool");case t.Point:return r.s("shared-calculator-label-value-type-point");case t.Distribution:return r.s("shared-calculator-label-value-type-distribution");case t.ListOfAny:return r.s("shared-calculator-label-value-type-list-of-any");case t.ListOfNumber:return r.s("shared-calculator-label-value-type-list-of-numbers");case t.ListOfBool:return r.s("shared-calculator-label-value-type-list-of-bool");case t.ListOfPoint:return r.s("shared-calculator-label-value-type-list-of-points");case t.ListOfDistribution:return r.s("shared-calculator-label-value-type-list-of-distributions");case t.EmptyList:return r.s("shared-calculator-label-value-type-empty-list");case t.ErrorType:return r.s("shared-calculator-label-value-type-error");case t.SeedType:return r.s("shared-calculator-label-value-type-seed");case t.RGBColor:return r.s("shared-calculator-label-value-type-color");case t.ListOfColor:return r.s("shared-calculator-label-value-type-list-of-colors");default:throw new Error("Invalid type: "+e)}},t.isList=function(e){switch(e){case t.ListOfAny:case t.ListOfNumber:case t.ListOfBool:case t.ListOfPoint:case t.ListOfDistribution:case t.ListOfColor:case t.EmptyList:return!0;case t.Any:case t.Number:case t.Bool:case t.Point:case t.Distribution:case t.ErrorType:case t.SeedType:case t.RGBColor:return!1;default:throw new Error("Invalid type: "+e)}},t.elementType=function(e){switch(e){case t.EmptyList:case t.ListOfNumber:return t.Number;case t.ListOfBool:return t.Bool;case t.ListOfPoint:return t.Point;case t.ListOfDistribution:return t.Distribution;case t.ListOfColor:return t.RGBColor;case t.ListOfAny:return t.Any;case t.Any:case t.Number:case t.Bool:case t.Point:case t.Distribution:case t.ErrorType:case t.SeedType:case t.RGBColor:return t.Any;default:throw new Error("Invalid type: "+e)}},t.listType=function(e){switch(e){case t.Any:return t.ListOfAny;case t.Number:return t.ListOfNumber;case t.Bool:return t.ListOfBool;case t.Point:return t.ListOfPoint;case t.Distribution:return t.ListOfDistribution;case t.RGBColor:return t.ListOfColor;case t.EmptyList:case t.ListOfNumber:case t.ListOfBool:case t.ListOfPoint:case t.ListOfDistribution:case t.ListOfColor:case t.ListOfAny:case t.ErrorType:case t.SeedType:throw new Error("Type "+s(e)+" does not implement listType.");default:throw new Error("Invalid type: "+e)}},t.hasListType=function(e){switch(e){case t.Any:case t.Number:case t.Bool:case t.Point:case t.Distribution:case t.RGBColor:return!0;case t.EmptyList:case t.ListOfNumber:case t.ListOfBool:case t.ListOfPoint:case t.ListOfDistribution:case t.ListOfColor:case t.ListOfAny:case t.ErrorType:case t.SeedType:return!1;default:throw new Error("Invalid type: "+e)}},t.isOneOf=function(e,t){for(var r=0,s=t;r<s.length;r++){if(e===s[r])return!0}return!1}});\ndefine(\'core/math/errormsg\',[\'require\',\'core/lib/worker-i18n\',\'core/math/parsenode/error\',\'core/lib/label\',\'core/math/types\'],function(require){"use strict";var s=require("core/lib/worker-i18n"),u=require("core/math/parsenode/error"),c=require("core/lib/label"),e=require("core/math/types");return{parseError:function(){return u(s.s("shared-calculator-error-parse-error"))},unrecognizedSymbol:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-unrecognized-symbol",{symbol:r}))},unexpectedInequality:function(){return u(s.s("shared-calculator-error-unexpected-inequality"))},unexpectedSymbol:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-unexpected-symbol",{symbol:r}))},addTypeError:function(r){return u(s.s("shared-calculator-error-add-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},subtractTypeError:function(r){return u(s.s("shared-calculator-error-subtract-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},multiplyTypeError:function(r){return u(s.s("shared-calculator-error-multiply-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},divideTypeError:function(r){return u(s.s("shared-calculator-error-divide-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},exponentTypeError:function(r){return u(s.s("shared-calculator-error-exponent-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},negativeTypeError:function(r){return u(s.s("shared-calculator-error-negative-type-error",{symbol:r[0]})).allowExport()},comparatorTypeError:function(r){return u(s.s("shared-calculator-error-comparator-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},andTypeError:function(r){return u(s.s("shared-calculator-error-and-type-error",{symbol:"and",symbol1:r[0],symbol2:r[1]})).allowExport()},listTypeError:function(r){return u(s.s("shared-calculator-error-list-type-error",{symbol1:r[0]})).allowExport()},pointTypeError:function(r){return u(s.s("shared-calculator-error-point-type-error",{symbol1:r,symbol2:e.prettyPrint(e.Point)})).allowExport()},indexTypeError:function(r){return u(s.s("shared-calculator-error-index-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},orderedPairAccessTypeError:function(r){return u(s.s("shared-calculator-error-ordered-pair-access-type-error",{symbol:r[0]})).allowExport()},functionTypeError:function(r,e){switch(e.length){case 1:return u(s.s("shared-calculator-error-function-type-error-1",{fn:c.formatSymbol(r),arg:e[0]})).allowExport();case 2:return u(s.s("shared-calculator-error-function-type-error-2",{fn:c.formatSymbol(r),arg1:e[0],arg2:e[1]})).allowExport();default:return u(s.s("shared-calculator-error-function-type-error-many",{fn:c.formatSymbol(r)})).allowExport()}},illegalDotCall:function(r){return u(s.s("shared-calculator-error-illegal-dot-call",{symbol:c.formatSymbol(r)}))},dotLHSTypeError:function(r,e){return u(s.s("shared-calculator-error-dot-lhs-type-error",{symbol:c.formatSymbol(r),type:e}))},sumLowerBoundTypeError:function(r){return u(s.s("shared-calculator-error-sum-lower-bound-type-error",{symbol:r[0]})).allowExport()},sumUpperBoundTypeError:function(r){return u(s.s("shared-calculator-error-sum-upper-bound-type-error",{symbol:r[0]})).allowExport()},sumInfiniteBoundError:function(){return u(s.s("shared-calculator-error-sum-infinite-bound-type-error"))},sumArgumentTypeError:function(r){return u(s.s("shared-calculator-error-sum-argument-type-error",{symbol:r[0]})).allowExport()},productLowerBoundTypeError:function(r){return u(s.s("shared-calculator-error-product-lower-bound-type-error",{symbol:r[0]})).allowExport()},productUpperBoundTypeError:function(r){return u(s.s("shared-calculator-error-product-upper-bound-type-error",{symbol:r[0]})).allowExport()},productInfiniteBoundError:function(){return u(s.s("shared-calculator-error-product-infinite-bound-type-error"))},productArgumentTypeError:function(r){return u(s.s("shared-calculator-error-product-argument-type-error",{symbol:r[0]})).allowExport()},integralLowerBoundTypeError:function(r){return u(s.s("shared-calculator-error-integral-lower-bound-type-error",{symbol:r[0]})).allowExport()},integralUpperBoundTypeError:function(r){return u(s.s("shared-calculator-error-integral-upper-bound-type-error",{symbol:r[0]})).allowExport()},integralArgumentTypeError:function(r){return u(s.s("shared-calculator-error-integral-argument-type-error",{symbol:r[0]})).allowExport()},derivativeTypeError:function(r){return u(s.s("shared-calculator-error-derivative-type-error",{symbol:r[0]})).allowExport()},derivativeVariableTypeError:function(r,e){return u(s.s("shared-calculator-error-derivative-variable-type-error",{symbol1:c.formatSymbol(r),symbol2:e[0]}))},piecewiseConditionTypeError:function(r){return u(s.s("shared-calculator-error-piecewise-condition-type-error",{symbol1:e.prettyPrint(e.Bool),symbol2:r[0]})).allowExport()},piecewiseBranchTypeError:function(r){return u(s.s("shared-calculator-error-piecewise-branch-type-error",{symbol1:r[0],symbol2:r[1]})).allowExport()},piecewiseBranchLengthError:function(r){return u(s.s("shared-calculator-error-piecewise-branch-length-error",{symbol:r})).allowExport()},tableHeaderTypeError:function(r){return u(s.s("shared-calculator-error-table-header-type-error",{symbol:r[0]}))},tableEntryTypeError:function(r){return u(s.s("shared-calculator-error-table-entry-type-error",{symbol:r[0]}))},regressionTypeError:function(r){return u(s.s("shared-calculator-error-regression-type-error",{symbol1:r[0],symbol2:r[1]}))},heterogeneousList:function(){return u(s.s("shared-calculator-error-heterogeneous-list")).allowExport()},deeplyNested:function(){return u(s.s("shared-calculator-error-deeply-nested")).allowExport()},polygonListTypeError:function(r){return u(s.s("shared-calculator-error-polygon-list-type-error",{type:r[0]}))},polygonPointArgsError:function(){return u(s.s("shared-calculator-error-polygon-point-args-error"))},polygonTwoNumbersError:function(){return u(s.s("shared-calculator-error-two-numbers-error"))},boxplotOffsetInvalid:function(){return u(s.s("shared-calculator-error-boxplot-offset-invalid"))},boxplotBreadthInvalid:function(){return u(s.s("shared-calculator-error-boxplot-breadth-invalid"))},tooManyArguments:function(r,e){return u(s.s("shared-calculator-error-too-many-arguments",{symbol:r,max:e}))},pdfWrongArity:function(){var r=s.s("shared-calculator-error-pdf-wrong-arity-recommendation"),e=s.s("shared-calculator-error-pdf-wrong-arity",{recommendation:r});return u(e)},cdfRequiresArguments:function(){var r=s.s("shared-calculator-error-cdf-wrong-arity-recommendation"),e=s.s("shared-calculator-error-cdf-wrong-arity",{recommendation:r});return u(e)},cdfTooManyArguments:function(){var r=s.s("shared-calculator-error-cdf-too-many-arguments-recommendation"),e=s.s("shared-calculator-error-cdf-too-many-arguments",{recommendation:r});return u(e)},tdistWrongArity:function(){return u(s.s("shared-calculator-error-tdist-wrong-arity"))},randomArity:function(){return u(s.s("shared-calculator-error-random-arity"))},randomFromBroadcastDistribution:function(){return u(s.s("shared-calculator-error-random-from-broadcast-distribution"))},wrongArity:function(r,e,o,n){var t,a;if(r=c.formatSymbol(r),1===e)n=n||r+"(x)",a=s.s("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),t=1<o?s.s("shared-calculator-error-wrong-arity-single-arg-too-many",{dependency:r,supplement:a}):s.s("shared-calculator-error-wrong-arity-single-arg-too-few",{dependency:r,supplement:a});else{var l=[];if(!n){for(var i=0;i<e;i++)l[i]=i+1;n=c.formatSymbol(r)+"("+l.join(", ")+")"}a=s.s("shared-calculator-error-wrong-arity-supplement",{recommendation:n}),t=s.s("shared-calculator-error-wrong-arity-many-arg",{dependency:r,assignment_arity:e,supplement:a})}return u(t)},wrongParametrizedReducerArity:function(r){return u(s.s("shared-calculator-error-wrong-two-arg-arity",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3], 1)"}))},wrongDoubleReducerArity:function(r){return u(s.s("shared-calculator-error-wrong-two-arg-arity",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3], [3,2,1])"}))},primedFunctionArity:function(){return u(s.s("shared-calculator-error-primed-function-arity"))},zeroArgReducer:function(r){return u(s.s("shared-calculator-error-zero-arg-reducer",{symbol:c.formatSymbol(r)}))},malformedPoint:function(){return u(s.s("shared-calculator-error-malformed-point"))},badTupleDimensions:function(r){return u(s.s("shared-calculator-error-bad-tuple-dimensions",{symbol:r}))},badImplicitCall:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-bad-implicit-call",{symbol:r}))},adjacentNumbers:function(r,e){return u(s.s("shared-calculator-error-adjacent-numbers",{left:r,right:e}))},identifierAsFunction:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-identifier-as-function",{symbol:r}))},binaryOperatorMissingOperand:function(r){return"%"===(r=c.formatSymbol(r))&&(r="% of"),u(s.s("shared-calculator-error-binary-operator-missing-operand",{symbol:r}))},unaryOperatorMissingLeft:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-unary-operator-missing-left",{symbol:r}))},unaryOperatorMissingRight:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-unary-operator-missing-right",{symbol:r}))},fractionMissingNumerator:function(){return u(s.s("shared-calculator-error-fraction-missing-numerator"))},fractionMissingDenominator:function(){return u(s.s("shared-calculator-error-fraction-missing-denominator"))},fractionEmpty:function(){return u(s.s("shared-calculator-error-fraction-empty"))},emptySubscript:function(){return u(s.s("shared-calculator-error-empty-subscript"))},emptySuperscript:function(){return u(s.s("shared-calculator-error-empty-superscript"))},invalidSubscript:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-invalid-subscript",{symbol:r}))},invalidOperatorName:function(){return u(s.s("shared-calculator-error-invalid-operator-name"))},unexpectedSubscript:function(){return u(s.s("shared-calculator-error-unexpected-subscript"))},superscriptWithPrime:function(){return u(s.s("shared-calculator-error-superscript-with-prime"))},unexpectedPrime:function(){return u(s.s("shared-calculator-error-unexpected-prime"))},primeWithoutParen:function(){return u(s.s("shared-calculator-error-prime-without-paren"))},emptyRadical:function(){return u(s.s("shared-calculator-error-empty-radical"))},emptyRadicalIndex:function(){return u(s.s("shared-calculator-error-empty-radical-index"))},emptyParen:function(){return u(s.s("shared-calculator-error-empty-paren"))},emptySquareBracket:function(){return u(s.s("shared-calculator-error-empty-square-bracket"))},emptyPipe:function(){return u(s.s("shared-calculator-error-empty-pipe"))},badTrigExponent:function(r){var e=r+"^2",o=r+"^-1";return u(s.s("shared-calculator-error-bad-trig-exponent",{form1:e,form2:o}))},badLogExponent:function(r){var e=r+"^2";return u(s.s("shared-calculator-error-bad-log-exponent",{form:e}))},inequalityChainTooLong:function(){return u(s.s("shared-calculator-error-inequality-chain-too-long"))},piecewiseMissingCondition:function(){return u(s.s("shared-calculator-error-piecewise-missing-condition"))},piecewisePartMissingCondition:function(){return u(s.s("shared-calculator-error-piecewise-part-missing-condition"))},colonMissingCondition:function(){return u(s.s("shared-calculator-error-colon-missing-condition"))},blankExpression:function(){return u(s.s("shared-calculator-error-blank-expression"))},functionNotDefined:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-function-not-defined",{dependency:r}))},parameterAlreadyDefined:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-parameter-already-defined",{dependency:r}))},cannotRedefine:function(r,e){return r=c.formatSymbol(r),u(void 0===e?s.s("shared-calculator-error-cannot-redefine",{symbol:r}):s.s("shared-calculator-error-cannot-redefine-root",{symbol:r,symbolRoot:e}))},cannotSubscript:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-cannot-subscript",{symbol:r}))},multiplyDefined:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-multiply-defined",{dependency:r}))},shadowedIndex:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-shadowed-index",{symbol:r}))},cycle:function(r){var e=(r=r.map(c.formatSymbol)).pop();return u(s.s("shared-calculator-error-dependency-cycle",{symbols:r.join("\', \'"),lastSymbol:e}))},selfReferentialFunction:function(r){return u(s.s("shared-calculator-error-self-referential-function",{symbol:c.formatSymbol(r)}))},simulationFPSNonNegativeNumber:function(){return u(s.s("shared-calculator-error-simulation-fps-nonnegative"))},sliderLimitReferencesExport:function(r){return u(s.s("shared-calculator-error-slider-limit-references-export",{symbol:c.formatSymbol(r)}))},sliderMinInvalid:function(){return u(s.s("shared-calculator-error-slider-min-invalid"))},sliderMaxInvalid:function(){return u(s.s("shared-calculator-error-slider-max-invalid"))},sliderMaxLessThanMin:function(){return u(s.s("shared-calculator-error-slider-max-less-than-min"))},sliderStepInvalid:function(){return u(s.s("shared-calculator-error-slider-step-invalid"))},domainMinInvalid:function(){return u(s.s("shared-calculator-error-domain-min-invalid"))},domainMaxInvalid:function(){return u(s.s("shared-calculator-error-domain-max-invalid"))},domainMaxLessThanMin:function(){return u(s.s("shared-calculator-error-domain-max-less-than-min"))},cdfMinInvalid:function(){return u(s.s("shared-calculator-error-cdf-min-invalid"))},cdfMaxInvalid:function(){return u(s.s("shared-calculator-error-cdf-max-invalid"))},cdfMaxLessThanMin:function(){return u(s.s("shared-calculator-error-cdf-max-less-than-min"))},tooManyVariables:function(r){if(0===(r=r.map(c.formatSymbol)).length)return u(s.s("shared-calculator-error-too-many-variables-no-symbols"));var e=r.pop();return 0<r.length?u(s.s("shared-calculator-error-too-many-variables-many-symbols",{variables:r.join("\', \'"),lastVariable:e})):u(s.s("shared-calculator-error-too-many-variables-one-symbol",{variable:e}))},addArgumentsToDefinition:function(r,e,o){r=r.map(c.formatSymbol);var n=(e=c.formatSymbol(e))+"("+(o=o.map(c.formatSymbol)).join(",")+","+r.join(",")+")",t=r.pop(),a={symbols:r.join("\', \'"),lastSymbol:t,newSignature:n};return r.length?u(s.s("shared-calculator-error-add-arguments-to-definition-many",a)):u(s.s("shared-calculator-error-add-arguments-to-definition-one",a))},invalidLHS:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-invalid-lhs",{symbol:r}))},unplottablePolarFunction:function(){return u(s.s("shared-calculator-error-unplottable-polar-function"))},invalidInequalityVariables:function(){return u(s.s("shared-calculator-error-invalid-inequality-variables"))},invalidImplicitVariables:function(){return u(s.s("shared-calculator-error-invalid-implicit-variables"))},singleVariableImplicitEquationsDisabled:function(){return u(s.s("shared-calculator-error-single-variable-implicit-equations-disabled"))},implicitsDisabled:function(){return u(s.s("shared-calculator-error-implicits-disabled"))},inequalitiesDisabled:function(){return u(s.s("shared-calculator-error-inequalities-disabled"))},complicatedPolarImplicit:function(){return u(s.s("shared-calculator-error-complicated-polar-implicit"))},invalidDoubleInequalityVariables:function(){return u(s.s("shared-calculator-error-invalid-double-inequality-variables"))},mismatchedDoubleInequality:function(){return u(s.s("shared-calculator-error-mismatched-double-inequality",{example:"1 < y < 2"}))},complicatedDoubleInequality:function(){return u(s.s("shared-calculator-error-complicated-double-inequality"))},equationRequired:function(r){return r?(r=c.formatSymbol(r),u(s.s("shared-calculator-error-equation-required-symbol",{lhs:r+"="}))):u(s.s("shared-calculator-error-equation-required"))},variableAsFunction:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-variable-as-function",{dependency:r}))},distributionAsFunction:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-distribution-as-function",{symbol:r}))},invalidTableHeader:function(r){return u(s.s("shared-calculator-error-invalid-table-header",{supplement:r}))},invalidTableEntry:function(r){return u(s.s("shared-calculator-error-invalid-table-entry",{supplement:r}))},invalidFirstTableColumn:function(){return u(s.s("shared-calculator-error-invalid-first-table-column",{most:"\'y\', \'r\',",last:"\'\'"}))},invalidDependentFirstTableColumn:function(){return u(s.s("shared-calculator-error-invalid-dependent-first-table-column"))},invalidRegressionParameter:function(r){return u(s.s("shared-calculator-error-invalid-regression-parameter",{symbol:c.formatSymbol(r)}))},optimizationError:function(){return u(s.s("shared-calculator-error-optimization-error"))},nonListDoubleReducer:function(r){return u(s.s("shared-calculator-error-non-list-double-reducer",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3], [3,2,1])"})).allowExport()},nonListParametrizedReducer:function(r){return u(s.s("shared-calculator-error-non-list-parameterized-reducer",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3], 1)"})).allowExport()},methodRequiresList:function(r){return u(s.s("shared-calculator-error-method-requires-list",{symbol:c.formatSymbol(r),recommendation:c.formatSymbol(r)+"([1,2,3])"})).allowExport()},variableRange:function(r){return u(s.s("shared-calculator-error-variable-range",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},variableListIndicies:function(r){return u(s.s("shared-calculator-error-variable-list-indices",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},variableFilter:function(r){return u(s.s("shared-calculator-error-variable-filter",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},functionFreeVariable:function(r,e){return u(s.s("shared-calculator-error-variable-function-free-variable",{functionSymbol:r,variableSymbol:e})).allowExport()},nonArithmeticRange:function(r){return u(s.s("shared-calculator-error-non-arithmetic-range")).allowExport()},invalidHalfEmptyRange:function(){return u(s.s("shared-calculator-error-invalid-half-empty-range"))},sumMissingBound:function(){return u(s.s("shared-calculator-error-sum-missing-bound"))},productMissingBound:function(){return u(s.s("shared-calculator-error-product-missing-bound"))},incorrectSumLowerBound:function(){return u(s.s("shared-calculator-error-incorrect-sum-lower-bound"))},incorrectProductLowerBound:function(){return u(s.s("shared-calculator-error-incorrect-product-lower-bound"))},badSumBoundDependency:function(r){return u(s.s("shared-calculator-error-bad-sum-bound-dependency",{symbol:c.formatSymbol(r)}))},badProductBoundDependency:function(r){return u(s.s("shared-calculator-error-bad-product-bound-dependency",{symbol:c.formatSymbol(r)}))},integralMissingBound:function(){return u(s.s("shared-calculator-error-integral-missing-bound"))},integralMissingDifferential:function(){return u(s.s("shared-calculator-error-integral-missing-differential"))},differentialWithSuperscript:function(){return u(s.s("shared-calculator-error-differential-with-superscript"))},sumMissingBody:function(){return u(s.s("shared-calculator-error-sum-missing-body"))},productMissingBody:function(){return u(s.s("shared-calculator-error-product-missing-body"))},integralMissingBody:function(){return u(s.s("shared-calculator-error-integral-missing-body"))},derivativeMissingBody:function(){return u(s.s("shared-calculator-error-derivative-missing-body"))},mismatchedBraces:function(r,e){return r=c.formatSymbol(r),e=c.formatSymbol(e),u(s.s("shared-calculator-error-mismatched-braces",{symbol1:r,symbol2:e}))},shadowedIntegrationVariable:function(r){return u(s.s("shared-calculator-error-shadowed-integration-variable",{symbol:c.formatSymbol(r)}))},badIntegralBoundDependency:function(r){return u(s.s("shared-calculator-error-bad-integral-bound-dependency",{symbol:c.formatSymbol(r)}))},percentMissingOf:function(){return u(s.s("shared-calculator-error-percent-missing-of"))},illegalBinWidth:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-illegal-bin-width",{symbol:r}))},ttestListTooShort:function(r){return r=c.formatSymbol(r),u(s.s("shared-calculator-error-ttest-list-too-short",{symbol:r}))},badSampleSize:function(){return u(s.s("shared-calculator-error-bad-sample-size"))},variableSampleSize:function(r){return u(s.s("shared-calculator-error-variable-sample-size",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},variableSeed:function(r){return u(s.s("shared-calculator-error-variable-seed",{symbol:c.formatSymbol(r[0])})).setDependencies(r).allowExport()},badAnsContext:function(){return u(s.s("shared-calculator-error-bad-ans-context"))},ansUndefined:function(){return u(s.s("shared-calculator-error-ans-undefined"))},variablesUnsupported:function(r){return u(s.s("shared-calculator-error-variables-unsupported",{variable:c.formatSymbol(r)}))},functionUnsupported:function(r){return u(s.s("shared-calculator-error-function-unsupported",{symbol:c.formatSymbol(r)}))},logbaseUnsupported:function(){return u(s.s("shared-calculator-error-logbase-unsupported"))},constantUnsupported:function(r){return u(s.s("shared-calculator-error-constant-unsupported",{symbol:c.formatSymbol(r)}))},assignmentsUnsupported:function(){return u(s.s("shared-calculator-error-assignments-unsupported"))},functionDefinitionsUnsupported:function(){return u(s.s("shared-calculator-error-function-definition-unsupported"))},equationsUnsupported:function(){return u(s.s("shared-calculator-error-equations-unsupported"))},inequalitiesUnsupported:function(){return u(s.s("shared-calculator-error-inequalities-unsupported"))},regressionsUnsupported:function(){return u(s.s("shared-calculator-error-regressions-unsupported"))},pointsUnsupported:function(){return u(s.s("shared-calculator-error-points-unsupported"))},colorsUnsupported:function(){return u(s.s("shared-calculator-error-colors-unsupported"))},featureUnavailable:function(){return u(s.s("shared-calculator-error-feature-unavailable"))},fractionsUnavailable:function(){return u(s.s("basic-calculator-error-fractions-unavailable"))},nonSquareDeterminant:function(){return u(s.s("shared-calculator-error-non-square-determinant"))},nonSquareTrace:function(){return u(s.s("shared-calculator-error-non-square-trace"))},nonSquareInverse:function(){return u(s.s("shared-calculator-error-non-square-inverse"))},singularInverse:function(){return u(s.s("shared-calculator-error-non-singular-inverse"))},clickableObjectAssignmentNotDefined:function(r){return u(s.s("shared-calculator-error-clickable-object-assignment-not-defined",{symbol:r}))},clickableObjectAlreadyAssigned:function(r){return u(s.s("shared-calculator-error-multiply-defined",{dependency:r}))},clickableObjectAssignmentNotIdentifier:function(){return u(s.s("shared-calculator-error-clickable-object-assignment-not-identifier"))},clickableObjectInvalidExpression:function(){return u(s.s("shared-calculator-error-clickable-object-invalid-expression"))},matrixAssignment:function(){return u(s.s("shared-calculator-error-matrix-assignment"))},matrixAddDimensions:function(){return u(s.s("shared-calculator-error-matrix-add-dimensions"))},matrixSubtractDimensions:function(){return u(s.s("shared-calculator-error-matrix-subtract-dimensions"))},matrixMultiplyDimensions:function(){return u(s.s("shared-calculator-error-matrix-multiply-dimensions"))},matrixFractionalPower:function(){return u(s.s("shared-calculator-error-matrix-fractional-power"))},matrixPowerDimensions:function(){return u(s.s("shared-calculator-error-matrix-power-dimensions"))},matrixElementTypeError:function(r){return u(s.s("shared-calculator-error-matrix-element-type-error",{arg:r[0]}))},matrixInvalidVariable:function(r){return u(s.s("shared-calculator-error-matrix-invalid-variable",{symbol:c.formatSymbol(r)}))}}});\ndefine(\'core/math/parsenode/expression\',[\'require\',\'pjs\',\'./base\',\'core/math/errormsg\',\'core/math/types\'],function(require){"use strict";var e=require("pjs"),t=require("./base"),r=require("core/math/errormsg"),i=require("core/math/types");return e(t,function(e,t){e.init=function(e){if(!Array.isArray(e))throw new TypeError("Argument to expression constructor must be an Array.");t.init.call(this),this.args=e,this.valueType=this._getValueType(e),this.registerDependencies(),this.computeTreeSize()},e._getValueType=function(e){return i.Any},e.shouldExportAns=function(){return!0},e.registerDependencies=function(){for(var e=0;e<this.args.length;e++)this.mergeDependencies(this.args[e])},e.computeTreeSize=function(){for(var e=0,t=0;t<this.args.length;t++)this.args[t].treeSize&&(e+=this.args[t].treeSize);if(this.treeSize=e+1,1e4<e)throw r.deeplyNested()},e.copyWithArgs=function(e){return new this.constructor(e)}})});\ndefine(\'core/math/parsenode/scalarexpression\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,s){t.init=function(t){s.init.call(this,t)},t.getEvalStrings=function(){for(var t=[],s=[],n=0;n<this.args.length;n++){var i=this.args[n].getEvalStrings(),t=t.concat(i.statements);s.push(i.expression)}return{statements:t,expression:this.scalarEvalExpression(s)}}})});\ndefine(\'core/math/parsenode/expressionTypes\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";var n=require("pjs"),t=require("./scalarexpression"),e={Add:n(t,{}),Subtract:n(t,{}),Multiply:n(t,{}),Divide:n(t,{}),Exponent:n(t,{}),Negative:n(t,{}),And:n(t,{isInequality:function(){return this.args[0].isInequality()&&this.args[1].isInequality()}}),PercentOf:n(t,{})};return e.RawExponent=n(e.Exponent,{}),e});\ndefine(\'core/math/maybe-rational\',["require","exports","core/math/builtin"],function(require,t,i){"use strict";function o(t,n){return{n:t,d:n}}function d(t){return"object"==typeof t&&"number"==typeof t.n&&"number"==typeof t.d}Object.defineProperty(t,"__esModule",{value:!0}),t.total=t.mod=t.nthroot=t.sqrt=t.pow=t.div=t.sub=t.mul=t.add=t.reciprocal=t.abs=t.neg=t.maybeRational=t.asFloat=t.fromDecimalString=t.isRational=void 0,t.isRational=d;var h=Math.pow(2,53)-1;function f(t){return d(t)?t.n/t.d:t}function c(t,n){if(!isFinite(t)||!isFinite(n)||0===n||Math.floor(t)!==t||Math.floor(n)!==n||Math.abs(t)>h||Math.abs(n)>h)return t/n;n<0&&(t=-t,n=-n);var r=i.gcd(t,n);return o(t/r,n/r)}function s(t){return d(t)?o(-t.n,t.d):-t}function M(t){return d(t)?0===t.n?t.d/t.n:o(t.n<0?-t.d:t.d,Math.abs(t.n)):1/t}function e(t,n){if(!d(t)||!d(n))return f(t)+f(n);var r=i.gcd(t.d,n.d);return c(t.n*(n.d/r)+n.n*(t.d/r),t.d/r*n.d)}function u(t,n){if(!d(t)||!d(n))return f(t)*f(n);var r=i.gcd(t.n,n.d),a=i.gcd(n.n,t.d);return c(t.n/r*(n.n/a),t.d/a*(n.d/r))}function p(t,n){return e(t,s(n))}function l(t,n){return d(t)&&d(n)?u(t,M(n)):f(t)/f(n)}function r(t,n){if(!d(t)||!d(n))return i.pow(f(t),f(n));var r=function(t,n){var r=t,a=n;if(n.n<0&&(a=s(n),r=M(t)),!d(r)||!d(a))return i.pow(f(t),f(n));if(t=r,1===(n=a).d)return c(Math.pow(t.n,n.n),Math.pow(t.d,n.n));var o=t.n<0;if(o&&n.d%2!=1)return NaN;var e=(o?-1:1)*Math.round(Math.pow(Math.abs(t.n),1/n.d)),u=Math.round(Math.pow(Math.abs(t.d),1/n.d));return Math.pow(e,n.d)!==t.n||Math.pow(u,n.d)!==t.d?i.pow(f(t),f(n)):c(Math.pow(e,n.n),Math.pow(u,n.n))}(t,n);return d(r)?r:i.pow(f(t),f(n))}t.fromDecimalString=function(t){var n=t.match(/^(-)?(\\d*)?(?:\\.(\\d*))?$/);if(!n)return NaN;var r=n[1],a=n[2],o=n[3];if(!a&&!o)return NaN;var e=!!r;if(o){var u=o.replace(/0+$/,""),i=u.length,d=Math.pow(10,i),f=parseInt(a||"0",10)*d+parseInt(u||"0",10);return h<f||h<d?parseFloat(t):c(e?-f:f,d)}return f=parseInt(a,10),h<f?parseFloat(t):c(e?-f:f,1)},t.asFloat=f,t.maybeRational=c,t.neg=s,t.abs=function(t){return d(t)?o(Math.abs(t.n),Math.abs(t.d)):Math.abs(t)},t.reciprocal=M,t.add=e,t.mul=u,t.sub=p,t.div=l,t.pow=r,t.sqrt=function(t){if(!d(t))return Math.sqrt(t);var n=Math.round(Math.sqrt(t.n)),r=Math.round(Math.sqrt(t.d));return n*n!==t.n||r*r!==t.d?Math.sqrt(f(t)):c(n,r)},t.nthroot=function(t,n){return r(t,M(n))},t.mod=function(t,n){if(d(t)&&d(n))return p(t,u(n,o(Math.floor(f(l(t,n))),1)));var r=f(t),a=f(n);return r-a*Math.floor(r/a)},t.total=function(t){for(var n=o(0,1),r=0,a=t;r<a.length;r++)n=e(n,a[r]);return n}});\ndefine(\'core/math/parsenode/constant\',[\'require\',\'pjs\',\'./scalarexpression\',\'core/math/maybe-rational\',\'core/math/types\'],function(require){"use strict";var t=require("pjs"),a=require("./scalarexpression"),n=require("core/math/maybe-rational"),e=require("core/math/types");return t(a,function(t,a){t.init=function(t){"number"==typeof t&&(t=n.maybeRational(t,1)),this._constantValue=t,a.init.call(this,[])},t.isConstant=!0,t.getEvalStrings=function(){return{statements:[],expression:this.scalarExprString()}},t.asValue=function(){return"boolean"==typeof this._constantValue?this._constantValue:n.asFloat(this._constantValue)},t.asMaybeRationalValue=function(){return"boolean"==typeof this._constantValue?NaN:this._constantValue},t.scalarExprString=function(){return 0<this.asValue()?String(this.asValue()):"("+String(this.asValue())+")"},t.getEvaluationInfo=function(){return[{val:this.asValue()}]},t.isNaN=function(){return"number"==typeof this.asValue()&&isNaN(this.asValue())},t._getValueType=function(){switch(typeof this.asValue()){case"number":return e.Number;case"boolean":return e.Bool;default:throw new Error("Constant node expects value of type number or boolean, but saw "+typeof value)}}})});\ndefine(\'core/math/parsenode/mixednumber\',[\'require\',\'pjs\',\'./constant\'],function(require){"use strict";return require("pjs")(require("./constant"),function(n,i){n.init=function(n){i.init.call(this,n)},n.is_mixed_number=!0})});\ndefine(\'core/math/parsenode/identifier\',[\'require\',\'pjs\',\'./expression\',\'core/lib/label\',\'core/math/parser/input-span\'],function(require){"use strict";var n=require("pjs"),e=require("./expression"),i=require("core/lib/label"),a=require("core/math/parser/input-span");return n(e,function(n,e,t){n.init=function(n){e.init.call(this,[]),this._symbol=i.latexToIdentifier(n),this.setInputSpan(new a.Span(n,0,n.length)),this.addDependency(this._symbol)},n.evaluate=function(){throw"Cannot evaluate undefined variable "+this._symbol}})});\ndefine(\'core/math/parsenode/ans\',[\'require\',\'pjs\',\'./identifier\'],function(require){"use strict";return require("pjs")(require("./identifier"),function(i,n,e){})});\ndefine(\'core/math/parsenode/freevariable\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(i,n){i.init=function(i){n.init.call(this,[]),this.addDependency(i),this._symbol=i},i.isFreeVariable=!0,i.scalarEvalExpression=function(i){return this._symbol},i.copyWithArgs=function(i){return this}})});\ndefine(\'core/math/parsenode/dummyindex\',[\'require\',\'pjs\',\'./freevariable\'],function(require){"use strict";return require("pjs")(require("./freevariable"),function(){})});\ndefine(\'core/math/parsenode/list\',[\'require\',\'pjs\',\'./expression\',\'core/math/types\'],function(require){"use strict";var t=require("pjs"),n=require("./expression"),u=require("core/math/types");return t(n,function(t,n,i){t.init=function(t){n.init.call(this,t),this.length=t.length},t.isList=!0,t.getEvalStrings=function(){for(var t=[],n=[],s=0;s<this.args.length;s++){var r=this.args[s].getEvalStrings();Array.prototype.push.apply(t,r.statements),n.push(r.expression)}return{statements:t,expression:"["+n.join(",")+"]"}},t.asValue=function(){for(var t=[],n=0;n<this.args.length;n++)t.push(this.args[n].asValue());return t},t.asMaybeRationalValue=function(){for(var t=[],n=0;n<this.args.length;n++)t.push(this.args[n].asMaybeRationalValue());return t},t.getEvaluationInfo=function(){if(this.args.every(function(t){return t.isConstant}))return[{val:this.args.map(function(t){return t.asValue()})}]},i.eachArgs=function(t,n,s){var r=function(t){for(var n=1/0,s=0;s<t.length;s++)(t[s].isList||t[s].isBroadcast)&&(n=Math.min(n,t[s].length));return n}(n);if(isFinite(r))for(var i=0;i<r;i++){for(var e=[],a=0;a<n.length;a++)e.push(n[a].isList||u.isList(n[a].valueType)?n[a].elementAt(t,i):n[a]);s(e)}else s(n)},i.mapArgs=function(t,n,s){var r=[];return i.eachArgs(t,n,function(t){r.push(s(t))}),r},i.wrap=function(t){return t.isList||u.isList(t.valueType)?t:i([t])}})});\ndefine(\'core/math/parsenode/range\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(n,i,t){n.init=function(n){i.init.call(this,n),this.beginning=n[0],this.end=n[1]},n.isHalfEmpty=function(){return this.end&&this.end.args&&0===this.end.args.length}})});\ndefine(\'core/math/parsenode/broadcast\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,n,s){t.init=function(t,s){if(n.init.call(this,s),this._replacedSymbols=t,this._expression=s[0],this._lists=s.slice(1),!t.length)throw new Error("Cannot construct a broadcast node with no replaced symbols");for(var r=0;r<t.length;r++)this.removeDependency(t[r]);for(var e=1/0,i=0;i<this._lists.length;i++){if(!this._lists[i].isList)throw new Error("List arguments of broadcast must be list literals");e=Math.min(e,this._lists[i].length)}this.length=e},t.isBroadcast=!0,t.copyWithArgs=function(t){return new this.constructor(this._replacedSymbols,t)},t.getEvalStrings=function(){var t=[],s=this._expression.getEvalStrings();Array.prototype.push.apply(t,s.statements);for(var r=[],e=[],i=0;i<this._lists.length;i++){var n=this._lists[i].getEvalStrings();Array.prototype.push.apply(t,n.statements);var a=this.tmpVar();e.push(a),r.push("var "+a+" = "+n.expression)}var o=this.tmpVar(),h=this.tmpVar();r.push("var "+o+" = []");var l=[];for(i=0;i<e.length;i++)l.push("var "+this._replacedSymbols[i]+" = "+e[i]+"["+h+"]");return r.push("for (var "+h+" = 0; "+h+" < "+this.length+"; "+h+"++) {\\n  "+l.join(";\\n  ")+";\\n  "+o+".push("+s.expression+");\\n}"),{statements:t.concat(r),expression:o}}})});\ndefine(\'core/math/parsenode/listaccess\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,s){t.init=function(t){s.init.call(this,t),this.list=t[0],this.index=t[1]},t.getEvalStrings=function(){var t=this.index.getEvalStrings(),s=this.list.getEvalStrings(),i=t.statements.concat(s.statements),n=this.tmpVar();i.push("var "+n+" = "+s.expression);var e=this.tmpVar();return i.push("var "+e+" = Math.floor("+t.expression+") - 1"),{statements:i,expression:"("+e+" >= 0 && "+e+" < "+n+".length ? "+n+"["+e+"] : NaN)"}}})});\ndefine(\'core/math/parsenode/dotaccess\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),{})});\ndefine(\'core/math/parsenode/dotaccessexponent\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),{})});\ndefine(\'core/math/parsenode/orderedpair\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(e,r,s){e.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue()]},e.asValue=e.asArray,e.getSliderVariables=function(r,e){return r.sliderVariables(e.getDependencies()).filter(function(e){return!r.validParametricVariable(e)})},e.getEvalStrings=function(){for(var e=[],r=[],s=0;s<this.args.length;s++){var t=this.args[s].getEvalStrings(),e=e.concat(t.statements);r.push(t.expression)}return{statements:e,expression:"["+r.join(",")+"]"}}})});\ndefine(\'core/math/parsenode/movablepoint\',[\'require\',\'pjs\',\'./orderedpair\'],function(require){"use strict";return require("pjs")(require("./orderedpair"),function(i,n){i.init=function(i,t,e){n.init.call(this,i),this.moveStrategy=t,this.defaultDragMode=e},i.isMovablePoint=!0})});\ndefine(\'core/math/parsenode/orderedpairaccess\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(t,s){t.init=function(t){s.init.call(this,t),this.point=t[0],this.index=t[1]},t.getEvalStrings=function(){var t=this.index.getEvalStrings(),s=this.point.getEvalStrings(),n=[];return Array.prototype.push.apply(n,t.statements),Array.prototype.push.apply(n,s.statements),{statements:n,expression:s.expression+"["+t.expression+"-1]"}}})});\ndefine(\'core/math/parsenode/polygon\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,n){i.init=function(i){n.init.call(this,i),this._symbol="polygon"}})});\ndefine(\'core/math/comparators\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.get=e.table=void 0,e.table={"<":{inclusive:!1,direction:-1},"!=":{inclusive:!1,direction:0},">":{inclusive:!1,direction:1},"<=":{inclusive:!0,direction:-1},"=":{inclusive:!0,direction:0},">=":{inclusive:!0,direction:1}},e.get=function(e,i){switch(i){case-1:return e?"<=":"<";case 0:return e?"=":"!=";case 1:return e?">=":">";default:throw"Programming error.  Comparators must have a direction of -1, 0, or 1"}}});\ndefine(\'core/math/parsenode/basecomparator\',[\'require\',\'pjs\',\'./scalarexpression\',\'./expressionTypes\',\'core/math/comparators\',\'core/math/functions\'],function(require){"use strict";var a=require("pjs"),t=require("./scalarexpression"),n=require("./expressionTypes").Subtract,o=require("core/math/comparators").table,c=require("core/math/functions");return a(t,function(t,e,i){i.create=function(n,r){return r=r||n,a(i,function(t,e){t.operator=n,t.isInequality=function(){return 0!==o[n].direction},t.compiledOperator=r,t.scalarEvalExpression=function(t){return t.join(r)},t.evaluate=c.createEvaluateFunction(t.scalarEvalExpression,2)})},t.init=function(t){e.init.call(this,t),this._difference=-1===o[this.operator].direction?n([t[1],t[0]]):n([t[0],t[1]])}})});\ndefine(\'core/math/parsenode/comparator\',[\'require\',\'core/math/parsenode/basecomparator\'],function(require){"use strict";var e=require("core/math/parsenode/basecomparator");return{"<":e.create("<"),">":e.create(">"),"<=":e.create("<="),">=":e.create(">="),"=":e.create("=","===")}});\ndefine(\'core/math/parsenode/doubleinequality\',[\'require\',\'pjs\',\'./base\',\'core/math/comparators\',\'./comparator\'],function(require){"use strict";var i=require("pjs"),e=require("./base"),t=require("core/math/comparators"),n=require("./comparator");return i(e,function(i,s){i.init=function(i){s.init.call(this),this.args=i,this._symbol=i[2]._symbol,this._operators=[i[1],i[3]],this._expressions=[i[0],i[4]];var e=t.get(t.table[i[1]].inclusive&&t.table[i[3]].inclusive,t.table[i[1]].direction);this._indicator=n[e]([i[0],i[4]]),this.addDependency(this._symbol),this.mergeDependencies(this._expressions[0],this._expressions[1])},i.isInequality=function(){return!0},i.isShadeBetween=function(){return!0}})});\ndefine(\'core/math/parsenode/repeatedoperator\',[\'require\',\'pjs\',\'./scalarexpression\',\'./dummyindex\'],function(require){"use strict";var t=require("pjs"),s=require("./scalarexpression"),i=require("./dummyindex");return t(s,function(t,s){t.init=function(t){s.init.call(this,t),this._index=t[0],this.addDummyDependency(this._index._symbol),this._index instanceof i&&this.removeDependency(this._index._symbol)},t.getEvalStrings=function(){var t=[],s=this.tmpVar(),i=this._index._symbol,e=this.tmpVar(),n=this.tmpVar(),r=this.args[1].getEvalStrings(),a=this.args[2].getEvalStrings(),h=this.args[3].getEvalStrings();Array.prototype.push.apply(t,r.statements),t.push("var "+e+" = Math.round("+r.expression+")"),Array.prototype.push.apply(t,a.statements),t.push("var "+n+" = Math.round("+a.expression+")"),t.push("var "+s+"="+this.starting_value);var o="for (var "+i+"="+e+";"+i+"<="+n+";"+i+"++) {"+h.statements.join(";")+";"+s+this.in_place_operator+h.expression+"};",p="if(!isFinite("+n+"-"+e+")) {"+s+"=("+n+"<"+e+"?"+this.starting_value+":NaN);}else{"+o+"}";return t.push(p),{statements:t,expression:s}},t.evaluate=function(t,s,i){var e=i.getCompiledFunction([this._index._symbol]).fn;if(s=Math.round(s),t=Math.round(t),!isFinite(s-t))return s<t?this.starting_value:NaN;for(var n=this.starting_value,r=t;r<=s;r++)n=this.update(n,e(r));return n}})});\ndefine(\'core/math/parsenode/sum\',[\'require\',\'pjs\',\'./repeatedoperator\'],function(require){"use strict";return require("pjs")(require("./repeatedoperator"),function(t,n){t.in_place_operator="+=",t.starting_value=0,t.evaluateConstant=function(t){var n=1+Math.round(t[1])-Math.round(t[0]);return n<=0?this.starting_value:n*t[2]},t.update=function(t,n){return t+n}})});\ndefine(\'core/math/parsenode/product\',[\'require\',\'pjs\',\'./repeatedoperator\'],function(require){"use strict";return require("pjs")(require("./repeatedoperator"),function(t,n){t.in_place_operator="*=",t.starting_value=1,t.evaluateConstant=function(t){var n=1+Math.round(t[1])-Math.round(t[0]);return n<=0?this.starting_value:Math.pow(t[2],n)},t.update=function(t,n){return t*n}})});\ndefine(\'core/math/parsenode/integral\',[\'require\',\'pjs\',\'./scalarexpression\',\'./dummyindex\',\'core/math/builtin\'],function(require){"use strict";var t=require("pjs"),s=require("./scalarexpression"),e=require("./dummyindex"),r=require("core/math/builtin");return t(s,function(t,s){t.init=function(t){s.init.call(this,t),this._differential=t[0],this.addDummyDependency(this._differential._symbol),this._differential instanceof e&&this.removeDependency(this._differential._symbol)},t.getEvalStrings=function(){var t=this.args[0],s=this.args[1],e=this.args[2],i=this.args[3],n=[],r=this.tmpVar(),a=t._symbol,o=this.tmpVar(),p=this.tmpVar(),u=s.getEvalStrings(),h=e.getEvalStrings(),l=i.getEvalStrings();return Array.prototype.push.apply(n,u.statements),Array.prototype.push.apply(n,h.statements),n.push("var "+o+" = "+u.expression),n.push("var "+p+" = "+h.expression),n.push("var "+r+" = function ("+a+") { "+l.statements.join("; ")+"; return "+l.expression+";}"),{statements:n,expression:"BuiltIn.quad("+[r,o,p].join(", ")+")"}},t.evaluate=function(t,s,e){var i=this.args[0],n=e.getCompiledFunction([i._symbol]).fn;return r.quad(n,t,s)}})});\ndefine(\'core/math/parsenode/functioncall\',[\'require\',\'pjs\',\'./expression\',\'./identifier\'],function(require){"use strict";var i=require("pjs"),t=require("./expression"),s=require("./identifier");return i(t,function(i,n){i.init=function(i,t){"string"==typeof i&&(i=s(i)),this._identifier=i,this._symbol=i._symbol,n.init.call(this,t),this.addDependency(this._symbol)},i.copyWithArgs=function(i){return new this.constructor(s(this._symbol),i)}})});\ndefine(\'core/math/parsenode/seededfunctioncall\',[\'require\',\'pjs\',\'./functioncall\'],function(require){"use strict";return require("pjs")(require("./functioncall"),function(i,t){i.init=function(i,n){t.init.call(this,i,n),this.seed=n[0]}})});\ndefine(\'core/math/parsenode/functionexponent\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(n,e){})});\ndefine(\'core/math/parsenode/functionfactorial\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(n,e){})});\ndefine(\'core/math/parsenode/prime\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,n){t.init=function(t,i){n.init.call(this,i),this.order=t},t.copyWithArgs=function(t){return new this.constructor(this.order,t)}})});\ndefine(\'core/math/parsenode/piecewise\',[\'require\',\'pjs\',\'./scalarexpression\',\'./constant\',\'core/math/maybe-rational\'],function(require){"use strict";var n=require("pjs"),t=require("./scalarexpression"),r=require("./constant"),a=require("core/math/maybe-rational").maybeRational,e=n(t,{});return e.chain=function(n,t){for(var r,a=t;n.length;)r=n.pop(),a=e([r.condition,r.if_expr,a]);return a},e.empty=function(){return e([r(!0),r(a(1,1)),r(NaN)])},e});\ndefine(\'core/math/parsenode/derivative\',[\'require\',\'pjs\',\'./scalarexpression\',\'./identifier\'],function(require){"use strict";var i=require("pjs"),n=require("./scalarexpression"),t=require("./identifier");return i(n,function(i,s){i.init=function(i,n){this._symbol=i instanceof t?i._symbol:t(i)._symbol,s.init.call(this,n)}})});\ndefine(\'core/math/parsenode/nativefunction\',[\'require\',\'pjs\',\'./scalarexpression\',\'core/math/functions\'],function(require){"use strict";var n=require("pjs"),t=require("./scalarexpression"),a=require("core/math/functions");return n(t,function(t,e,r){t.init=function(t,r){if(t.length>=this._requiredArity)for(;t.length<this._maxArity;)t.push(this._optionalArguments[t.length-this._requiredArity]);this._errorSymbol="logbase"===this._symbol?"log":r||this._symbol,e.init.call(this,t)},t.copyWithArgs=function(t){var r=e.copyWithArgs.call(this,t);return r._errorSymbol=this._errorSymbol,r},t.scalarEvalExpression=function(t){return this.head+"("+t.join(",")+")"},r.create=function(e,i,o,s){return n(this,function(t,r,n){n.isFunction=!0,t._symbol=e,t.head=i,t._requiredArity=o,t._optionalArguments=s||[],t._maxArity=t._requiredArity+t._optionalArguments.length,t.evaluate=a.createEvaluateFunction(t.scalarEvalExpression.bind(t),t._maxArity),n.getConcreteInvocationTree=function(t,r,e,i){return n(e,i).getConcreteTree(t,r)},n.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/typedfunction\',[\'require\',\'pjs\',\'./nativefunction\'],function(require){"use strict";return require("pjs")(require("./nativefunction"),function(t,e,n,o){n.create=function(t,e,n,r){var u=n.length,i=o.create.call(this,t,e,u);return i.prototype._inputTypes=n,i.prototype._outputType=r,i}})});\ndefine(\'core/math/parsenode/trigfunction\',[\'require\',\'pjs\',\'./nativefunction\',\'./expressionTypes\',\'core/math/errormsg\'],function(require){"use strict";var e=require("pjs"),t=require("./nativefunction"),o=require("./expressionTypes").Multiply,u=require("core/math/errormsg");return e(t,function(e,t,r,n){r.create=function(e,t){var c=n.create(e,t,1);return c.getConcreteInvocationTree=function(e,t,r,n){if(r.length<1)throw u.wrongArity(n,1,r.length);var i=t.trigAngleMultiplier?[o([r[0],t.trigAngleMultiplier])].concat(r.slice(1)):r;return c(i,n).getConcreteTree(e,t)},c.getCacheKeys=function(){return["trigAngleMultiplier"]},c}})});\ndefine(\'core/math/parsenode/inversetrigfunction\',[\'require\',\'pjs\',\'./nativefunction\',\'./expressionTypes\'],function(require){"use strict";var e=require("pjs"),t=require("./nativefunction"),c=require("./expressionTypes").Divide;return e(t,function(e,t,n,r){n.create=function(e,t,n){var u=r.create(e,t,1,n);return u.getConcreteInvocationTree=function(e,t,n,r){var i=u(n,r);return(t.trigAngleMultiplier?c([i,t.trigAngleMultiplier]):i).getConcreteTree(e,t)},u.getCacheKeys=function(){return["trigAngleMultiplier"]},u}})});\ndefine(\'core/math/parsenode/distribution\',[\'require\',\'pjs\',\'./scalarexpression\',\'core/math/errormsg\'],function(require){"use strict";var e=require("pjs"),t=require("./scalarexpression"),o=require("core/math/errormsg");return e(t,function(t,n,i){t.init=function(t,i){var r="tdist"===this._symbol;if(t.length<this._requiredArity){if(r)throw o.tdistWrongArity();throw o.wrongArity(i,this._requiredArity,t.length)}if(t.length>this._maxArity){if(r)throw o.tdistWrongArity();throw o.wrongArity(this._symbol,this._maxArity,t.length)}for(;t.length<this._maxArity;)t.push(this._optionalArguments[t.length-this._requiredArity]);n.init.call(this,t)},t.scalarEvalExpression=function(t){return this.head+"("+t.join(",")+")"},i.create=function(r,n,o){return e(this,function(t,i,e){e.isFunction=!0,t._symbol=r,t._requiredArity=n,t._optionalArguments=o||[],t._maxArity=t._requiredArity+t._optionalArguments.length,e.getConcreteInvocationTree=function(t,i,r,n){return e(r,n)},e.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/reducerfunction\',[\'require\',\'pjs\',\'./expression\',\'core/math/functions\',\'core/math/errormsg\',\'./distribution\',\'core/math/types\'],function(require){"use strict";var i=require("pjs"),t=require("./expression"),s=require("core/math/functions"),r=require("core/math/errormsg"),o=require("./distribution"),a=require("core/math/types");return i(t,function(t,n,e){t.init=function(t,e){if(0===t.length)throw r.zeroArgReducer(e);if(t[0]instanceof o&&"length"!==this._symbol&&!t[0][this._symbol])throw r.functionTypeError(this._symbol,[a.prettyPrint(this.args[0].valueType)]);n.init.call(this,t)},t.evalExpression=function(t){return this.head+"("+t+")"},t.getEvalStrings=function(){var t=this.args[0].getEvalStrings();return{statements:t.statements,expression:this.evalExpression(t.expression)}},e.create=function(n,r){return i(e,function(t,e,i){t._symbol=n,t.head=r,t._arity=1,i.isFunction=!0,i.allowDotCalls=!0,i.dotMinArity=0,i.dotMaxArity=0,t.evaluate=s.createEvaluateFunction(t.evalExpression.bind(t),t._arity),i.getConcreteInvocationTree=function(t,e,n,r){return i(n,r).getConcreteTree(t,e)},i.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/doublereducerfunction\',[\'require\',\'pjs\',\'./expression\',\'core/math/functions\',\'core/math/errormsg\'],function(require){"use strict";var i=require("pjs"),e=require("./expression"),s=require("core/math/functions"),r=require("core/math/errormsg");return i(e,function(e,n,t){e.init=function(e,t){if(n.init.call(this,e),2!==this.args.length)throw r.wrongDoubleReducerArity(t)},e.evalExpression=function(e){return this.head+"("+e.join(",")+")"},e.getEvalStrings=function(){for(var e=[],t=[],n=Math.min(this.args[0].length,this.args[1].length),r=0;r<this.args.length;r++){var i=this.args[r],s=i.getEvalStrings();Array.prototype.push.apply(e,s.statements),t.push(i.length===n?s.expression:s.expression+".slice(0,"+n+")")}return{statements:e,expression:this.evalExpression(t)}},t.create=function(n,r){return i(t,function(e,t,i){e._symbol=n,e.head=r,e._arity=2,i.isFunction=!0,e.evaluate=s.createEvaluateFunction(e.evalExpression.bind(e),e._arity),i.getConcreteInvocationTree=function(e,t,n,r){return i(n,r).getConcreteTree(e,t)},i.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/parametrizedreducerfunction\',[\'require\',\'pjs\',\'./expression\',\'core/math/functions\',\'core/math/errormsg\',\'./distribution\',\'core/math/types\'],function(require){"use strict";var i=require("pjs"),t=require("./expression"),s=require("core/math/functions"),r=require("core/math/errormsg"),o=require("./distribution"),a=require("core/math/types");return i(t,function(t,n,e){t.init=function(t,e){if(t.length<2&&void 0!==this._optionalArgument&&t.push(this._optionalArgument),2!==t.length)throw r.wrongParametrizedReducerArity(e);if(t[0]instanceof o&&!t[0][this._symbol])throw r.functionTypeError(e,[a.prettyPrint(this.args[0].valueType)]);n.init.call(this,t)},t.evalExpression=function(t){return this.head+"("+t.join(",")+")"},t.getEvalStrings=function(){var t=[],e=this.args[0].getEvalStrings(),n=this.args[1].getEvalStrings();return Array.prototype.push.apply(t,e.statements),Array.prototype.push.apply(t,n.statements),{statements:t,expression:this.evalExpression([e.expression,n.expression])}},e.create=function(n,r,o){return i(e,function(t,e,i){t._symbol=n,t.head=r,t._optionalArgument=o,t._arity=2,i.isFunction=!0,i.allowDotCalls=!0,i.dotMinArity=void 0===o?1:0,i.dotMaxArity=1,t.evaluate=s.createEvaluateFunction(t.evalExpression.bind(t),t._arity),i.getConcreteInvocationTree=function(t,e,n,r){return i(n,r).getConcreteTree(t,e)},i.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/toplevelfunction\',[\'require\',\'pjs\',\'./nativefunction\',\'core/math/errormsg\'],function(require){"use strict";var c=require("pjs"),n=require("./nativefunction"),o=require("core/math/errormsg");return c(n,function(n,e,t,r){t.create=function(n){return c(t,function(n,e,t){t.isFunction=!0,t.getConcreteInvocationTree=function(n,e,t,r){throw o.unexpectedSymbol(r)},t.getCacheKeys=function(){return[]}})}})});\ndefine(\'core/math/parsenode/builtinfunction\',[\'require\',\'core/math/parsenode/nativefunction\',\'core/math/parsenode/typedfunction\',\'core/math/parsenode/trigfunction\',\'core/math/parsenode/inversetrigfunction\',\'core/math/parsenode/reducerfunction\',\'core/math/parsenode/doublereducerfunction\',\'core/math/parsenode/parametrizedreducerfunction\',\'core/math/parsenode/distribution\',\'core/math/parsenode/toplevelfunction\',\'core/math/types\',\'core/math/maybe-rational\',\'core/math/parsenode/constant\'],function(require){"use strict";var e=require("core/math/parsenode/nativefunction"),t=require("core/math/parsenode/typedfunction"),a=require("core/math/parsenode/trigfunction"),r=require("core/math/parsenode/inversetrigfunction"),n=require("core/math/parsenode/reducerfunction"),i=require("core/math/parsenode/doublereducerfunction"),o=require("core/math/parsenode/parametrizedreducerfunction"),c=require("core/math/parsenode/distribution"),l=require("core/math/parsenode/toplevelfunction"),s=require("core/math/types"),u=require("core/math/maybe-rational").maybeRational,m=require("core/math/parsenode/constant"),d=m(u(1,1)),p=m(u(0,1)),I=m(u(1,2));return{sin:a.create("sin","BuiltIn.sin"),cos:a.create("cos","BuiltIn.cos"),tan:a.create("tan","BuiltIn.tan"),cot:a.create("cot","BuiltIn.cot"),sec:a.create("sec","BuiltIn.sec"),csc:a.create("csc","BuiltIn.csc"),arcsin:r.create("arcsin","Math.asin"),arccos:r.create("arccos","Math.acos"),arctan:r.create("arctan","Math.atan2",[d]),arccot:r.create("arccot","BuiltIn.acot"),arcsec:r.create("arcsec","BuiltIn.asec"),arccsc:r.create("arccsc","BuiltIn.acsc"),sinh:e.create("sinh","BuiltIn.sinh",1),cosh:e.create("cosh","BuiltIn.cosh",1),tanh:e.create("tanh","BuiltIn.tanh",1),coth:e.create("coth","BuiltIn.coth",1),sech:e.create("sech","BuiltIn.sech",1),csch:e.create("csch","BuiltIn.csch",1),arcsinh:e.create("arcsinh","BuiltIn.asinh",1),arccosh:e.create("arccosh","BuiltIn.acosh",1),arctanh:e.create("arctanh","BuiltIn.atanh",1),arccoth:e.create("arccoth","BuiltIn.acoth",1),arcsech:e.create("arcsech","BuiltIn.asech",1),arccsch:e.create("arccsch","BuiltIn.acsch",1),sqrt:e.create("sqrt","Math.sqrt",1),rtxsqpone:e.create("rtxsqpone","BuiltIn.sqrtxsqp1",1),rtxsqmone:e.create("rtxsqmone","BuiltIn.sqrtxsqm1",1),nthroot:e.create("nthroot","BuiltIn.nthroot",2),log:e.create("log","BuiltIn.common_log",1),logbase:e.create("logbase","BuiltIn.log_base",2),ln:e.create("ln","BuiltIn.log",1),exp:e.create("exp","Math.exp",1),floor:e.create("floor","Math.floor",1),ceil:e.create("ceil","Math.ceil",1),round:e.create("round","BuiltIn.round",1,[p]),abs:e.create("abs","Math.abs",1),sign:e.create("sign","BuiltIn.sign",1),mod:e.create("mod","BuiltIn.mod",2),nCr:e.create("nCr","BuiltIn.nCr",2),nPr:e.create("nPr","BuiltIn.nPr",2),factorial:e.create("factorial","BuiltIn.factorial",1),polyGamma:e.create("polyGamma","BuiltIn.polyGamma",2),lcm:n.create("lcm","BuiltIn.listLCM"),gcd:n.create("gcd","BuiltIn.listGCD"),mean:n.create("mean","BuiltIn.mean"),total:n.create("total","BuiltIn.total"),stdev:n.create("stdev","BuiltIn.stdev"),stdevp:n.create("stdevp","BuiltIn.stdevp"),mad:n.create("mad","BuiltIn.mad"),length:n.create("length","BuiltIn.length"),min:n.create("min","BuiltIn.listMin"),max:n.create("max","BuiltIn.listMax"),argmin:n.create("argmin","BuiltIn.argMin"),argmax:n.create("argmax","BuiltIn.argMax"),median:n.create("median","BuiltIn.median"),var:n.create("var","BuiltIn.var"),varp:n.create("varp","BuiltIn.varp"),cov:i.create("cov","BuiltIn.cov"),covp:i.create("covp","BuiltIn.covp"),corr:i.create("corr","BuiltIn.corr"),spearman:i.create("spearman","BuiltIn.spearman"),quantile:o.create("quantile","BuiltIn.quantile"),quartile:o.create("quartile","BuiltIn.quartile"),upperQuantileIndex:o.create("upperQuantileIndex","BuiltIn.upperQuantileIndex"),lowerQuantileIndex:o.create("lowerQuantileIndex","BuiltIn.lowerQuantileIndex"),quartileIndex:o.create("quartileIndex","BuiltIn.quartileIndex"),upperQuartileIndex:o.create("upperQuartileIndex","BuiltIn.upperQuartileIndex"),lowerQuartileIndex:o.create("lowerQuartileIndex","BuiltIn.lowerQuartileIndex"),normalcdf:e.create("normalcdf","BuiltIn.normalcdf",2,[p,d]),normalpdf:e.create("normalpdf","BuiltIn.normalpdf",1,[p,d]),normalSample:t.create("normalSample","BuiltIn.normalSample",[s.SeedType,s.Number,s.Number],s.Number),uniformSample:t.create("uniformSample","BuiltIn.uniformSample",[s.SeedType,s.Number,s.Number],s.Number),tSample:t.create("tSample","BuiltIn.tSample",[s.SeedType,s.Number],s.Number),poissonSample:t.create("poissonSample","BuiltIn.poissonSample",[s.SeedType,s.Number],s.Number),binomSample:t.create("binomSample","BuiltIn.binomSample",[s.SeedType,s.Number,s.Number],s.Number),binomcdf:e.create("binomcdf","BuiltIn.binomcdf",3,[I]),binompdf:e.create("binompdf","BuiltIn.binompdf",2,[I]),poissoncdf:e.create("poissoncdf","BuiltIn.poissoncdf",3),poissonpdf:e.create("poissonpdf","BuiltIn.poissonpdf",2),uniformcdf:e.create("uniformcdf","BuiltIn.uniformcdf",2,[p,d]),uniformpdf:e.create("uniformpdf","BuiltIn.uniformpdf",1,[p,d]),invNorm:e.create("invNorm","BuiltIn.invNorm",1),invT:e.create("invT","BuiltIn.invT",2),invPoisson:e.create("invPoisson","BuiltIn.invPoisson",2),invBinom:e.create("invBinom","BuiltIn.invBinom",3),invUniform:e.create("invUniform","BuiltIn.invUniform",3),erf:e.create("erf","BuiltIn.erf",1),tpdf:e.create("tpdf","BuiltIn.tpdf",2),tcdf:e.create("tcdf","BuiltIn.tcdf",3),tscore:o.create("tscore","BuiltIn.tscore",p),distance:t.create("distance","BuiltIn.distance",[s.Point,s.Point],s.Number),midpoint:t.create("midpoint","BuiltIn.midpoint",[s.Point,s.Point],s.Point),addPoints:t.create("addPoints","BuiltIn.addPoints",[s.Point,s.Point],s.Point),subtractPoints:t.create("addPoints","BuiltIn.subtractPoints",[s.Point,s.Point],s.Point),negatePoint:t.create("negatePoint","BuiltIn.negatePoint",[s.Point],s.Point),multiplyPoint:t.create("multiplyPoint","BuiltIn.multiplyPoint",[s.Point,s.Number],s.Point),dividePoint:t.create("dividePoint","BuiltIn.dividePoint",[s.Point,s.Number],s.Point),normaldist:c.create("normaldist",0,[p,d]),tdist:c.create("tdist",1),binomialdist:c.create("binomialdist",1,[I]),poissondist:c.create("poissondist",1),uniformdist:c.create("uniformdist",0,[p,d]),pdf:t.create("pdf","BuiltIn.normpdf",[s.Distribution,[s.Number,s.ListOfNumber,s.EmptyList]],s.Number).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=1}),cdf:t.create("cdf","BuiltIn.normcdf",[s.Distribution,[s.Number,s.ListOfNumber,s.EmptyList],[s.Number,s.ListOfNumber,s.EmptyList]],s.Number).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=2}),random:e.create("random","",2).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=3}),rgb:t.create("rgb","BuiltIn.rgb",[s.Number,s.Number,s.Number],s.RGBColor),hsv:t.create("hsv","BuiltIn.hsv",[s.Number,s.Number,s.Number],s.RGBColor),shuffle:e.create("shuffle","",2).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=2,a.minArityUsageExample="shuffle([1,2,3])",e.minArityUsageExample=a.minArityUsageExample,a.maxArityUsageExample="shuffle([1,2,3],2)",e.maxArityUsageExample=a.maxArityUsageExample,a.dotMaxArityUsageExample=".shuffle(2)"}),sort:e.create("sort","",1).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=0,a.dotMaxArity=1,a.minArityUsageExample="sort([3,2,1])",e.minArityUsageExample=a.minArityUsageExample,a.maxArityUsageExample="sort([1,2,3],[3,2,1])",e.maxArityUsageExample=a.maxArityUsageExample,a.dotMaxArityUsageExample=".sort([3,4])"}),join:e.create("join","",2).open(function(e,t,a){a.allowDotCalls=!0,a.dotMinArity=1,a.dotMaxArity=1/0,a.minArityUsageExample="join([1,2],[3,4])",e.minArityUsageExample=a.minArityUsageExample,a.dotMinArityUsageExample=".join([3,4])"}),polygon:l.create("polygon"),histogram:l.create("histogram"),dotplot:l.create("dotplot"),boxplot:l.create("boxplot"),ttest:l.create("ttest"),ittest:l.create("ittest"),stats:l.create("stats"),det:l.create("det"),inv:l.create("inv"),transpose:l.create("transpose"),rref:l.create("rref"),trace:l.create("trace")}});\ndefine(\'core/math/parsenode/histogram\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,n){i.init=function(i){n.init.call(this,i),this._symbol="histogram"}})});\ndefine(\'core/math/parsenode/object3d\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(i,n){t.init.call(this,i),this._symbol=n}})});\ndefine(\'core/math/parsenode/dotplot\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(i){t.init.call(this,i),this._symbol="dotplot"}})});\ndefine(\'core/math/parsenode/boxplot\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,n){i.init=function(i){n.init.call(this,i),this._symbol="boxplot"}})});\ndefine(\'core/math/parsenode/ttest\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,i){t.init=function(){i.init.apply(this,arguments),this._symbol="ttest"}})});\ndefine(\'core/math/parsenode/independent-ttest\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(){t.init.apply(this,arguments),this._symbol="ittest"}})});\ndefine(\'core/math/parsenode/stats\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(i,t){i.init=function(){t.init.apply(this,arguments),this._symbol="stats"}})});\ndefine(\'core/math/parsenode/equation\',[\'require\',\'./base\',\'pjs\',\'./expressionTypes\',\'core/math/parsenode/comparator\'],function(require){"use strict";var s=require("./base"),t=require("pjs"),e=require("./expressionTypes").Subtract,r=require("core/math/parsenode/comparator");return t(s,function(s,i){s.init=function(s,t){i.init.call(this),this.mergeDependencies(s,t),this._lhs=s,this._rhs=t,this._difference=e([this._lhs,this._rhs])},s.asComparator=function(){return r["="]([this._lhs,this._rhs])}})});\ndefine(\'core/math/parsenode/assignment\',[\'require\',\'./base\',\'./equation\',\'./identifier\',\'pjs\'],function(require){"use strict";var e=require("./base"),t=require("./equation"),s=require("./identifier");return require("pjs")(e,function(e,i){e.init=function(e,t){i.init.call(this),e=e._symbol,this.mergeDependencies(t),this._expression=t,this._symbol=e,this._exports=this.computeExports()},e.shouldExportAns=function(){return!0},e.computeExports=function(){for(var e=this._symbol,t=this.getDependencies(),i=0;i<t.length;i++)if(t[i]===e)return[];return[e]},e.isEquation=function(e){return-1!==e.getDependencies().indexOf(this._symbol)},e.asEquation=function(){var e=t(s(this._symbol),this._expression);return e.userData=this.userData,e.metaData=this.metaData,e},e.shouldPromoteToSlider=function(e){return!!this._expression.isConstant&&(!this._expression.is_mixed_number&&("number"==typeof this._expression.asValue()&&(!!isFinite(this._expression.asValue())&&e.isValidSlider(this._symbol))))}})});\ndefine(\'core/math/parsenode/functiondefinition\',[\'require\',\'pjs\',\'./base\',\'core/math/errormsg\',\'./equation\',\'./identifier\',\'./functioncall\'],function(require){"use strict";var e=require("pjs"),t=require("./base"),a=require("core/math/errormsg"),i=require("./equation"),n=require("./identifier"),r=require("./functioncall");return e(t,function(e,s){e.init=function(e,t,i){s.init.call(this),e=e._symbol,this._argSymbols=t.map(function(e){return e._symbol}),this._symbol=e,this._exports=[e],this._expression=i,this.addDependencies(this._argSymbols),this.addDummyDependencies(this._argSymbols),this.mergeDependencies(this._expression)},e.isFunction=!0,e.getConcreteInvocationTree=function(e,t,i,s){if(i.length!==this._argSymbols.length)throw a.wrongArity(s,this._argSymbols.length,i.length);for(var n=Object.create(t),r=0;r<this._argSymbols.length;r++)n[this._argSymbols[r]]=i[r];return this._expression.getConcreteTree(e,n)},e.getSliderVariables=function(e,t){var i=this._argSymbols;return e.sliderVariables(t.getDependencies()).filter(function(e){return-1===i.indexOf(e)})},e.asEquation=function(){var e=this._argSymbols.map(function(e){return n(e)}),t=i(r(n(this._symbol),e),this._expression);return t.userData=this.userData,t.metaData=this.metaData,t}})});\ndefine(\'core/math/parsenode/optimizedregression\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(i,n){i.init=function(i,e,t,s,a){for(var r in n.init.call(this),this.parameters=i,this.residuals=e,this.statistics=t,this.model=s,this.isModelValid=a.isModelValid,this.residualVariable=a.residualVariable,this.residualSuggestionId=a.residualSuggestionId,this.shouldSuggestLogMode=a.shouldSuggestLogMode,this.isLinear=a.isLinear,this.parameterWarning=a.parameterWarning,this._exports=[this.residualVariable],i)i.hasOwnProperty(r)&&this._exports.push(r);this.mergeDependencies(s)},i.getCompiledFunction=function(){return this.model.getCompiledFunction.apply(this.model,arguments)},i.getCompiledDerivative=function(){return this.model.getCompiledDerivative.apply(this.model,arguments)},i.evaluate=function(){return this.model.evaluate.apply(this.model,arguments)}})});\ndefine(\'numeric\',[],function(){"use strict";var y="undefined"==typeof exports?function(){}:exports;return"undefined"!=typeof global&&(global.numeric=y),y.version="1.2.6",y._myIndexOf=function(r){for(var n=this.length,e=0;e<n;++e)if(this[e]===r)return e;return-1},y.myIndexOf=Array.prototype.indexOf?Array.prototype.indexOf:y._myIndexOf,y.precision=4,y.largeArray=50,y.compile=function(){var r=Array.prototype.slice.call(arguments),n=r.pop(),n="return function ("+r.join(",")+") {"+n+"}";return new Function(["numeric"],n)(y)},y._dim=function(r){for(var n=[];"object"==typeof r;)n.push(r.length),r=r[0];return n},y.dim=function(r){var n;return"object"==typeof r?"object"==typeof(n=r[0])?"object"==typeof n[0]?y._dim(r):[r.length,n.length]:[r.length]:[]},y.mapreduce=function(r,n){return y.compile("x","accum","_s","_k",\'if(typeof accum === "undefined") accum = \'+n+\';\\nif(typeof x === "number") { var xi = x; \'+r+\'; return accum; }\\nif(typeof _s === "undefined") _s = numeric.dim(x);\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i,xi;\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) {\\n        accum = arguments.callee(x[i],accum,_s,_k+1);\\n    }    return accum;\\n}\\nfor(i=_n-1;i>=1;i-=2) { \\n    xi = x[i];\\n    \'+r+";\\n    xi = x[i-1];\\n    "+r+";\\n}\\nif(i === 0) {\\n    xi = x[i];\\n    "+r+"\\n}\\nreturn accum;")},y.mapreduce2=function(r,n){return y.compile("x","var n = x.length;\\nvar i,xi;\\n"+n+"\\nfor(i=n-1;i!==-1;--i) { \\n    xi = x[i];\\n    "+r+"\\n}\\nreturn accum;")},y.rep=function(r,n,e){void 0===e&&(e=0);var t,i=r[e],o=Array(i);if(e===r.length-1){for(t=i-2;0<=t;t-=2)o[t+1]=n,o[t]=n;return-1===t&&(o[0]=n),o}for(t=i-1;0<=t;t--)o[t]=y.rep(r,n,e+1);return o},y.dotMMsmall=function(r,n){for(var e,t,i,o,a,f,u=r.length,c=n.length,s=n[0].length,m=Array(u),l=u-1;0<=l;l--){for(i=Array(s),o=r[l],t=s-1;0<=t;t--){for(a=o[c-1]*n[c-1][t],e=c-2;1<=e;e-=2)f=e-1,a+=o[e]*n[e][t]+o[f]*n[f][t];0===e&&(a+=o[0]*n[0][t]),i[t]=a}m[l]=i}return m},y._getCol=function(r,n,e){for(var t=r.length-1;0<t;--t)e[t]=r[t][n],e[--t]=r[t][n];0===t&&(e[0]=r[0][n])},y.dotMMbig=function(r,n){var e,t,i,o=y._getCol,a=n.length,f=Array(a),u=r.length,c=n[0].length,s=new Array(u),m=y.dotVV;for(t=--u;-1!==t;--t)s[t]=Array(c);for(t=--c;-1!==t;--t)for(o(n,t,f),i=u;-1!==i;--i)e=r[i],s[i][t]=m(e,f);return s},y.dotMV=function(r,n){for(var e=r.length,t=(n.length,Array(e)),i=y.dotVV,o=e-1;0<=o;o--)t[o]=i(r[o],n);return t},y.dotVM=function(r,n){for(var e,t,i,o=r.length,a=n[0].length,f=Array(a),u=a-1;0<=u;u--){for(t=r[o-1]*n[o-1][u],e=o-2;1<=e;e-=2)i=e-1,t+=r[e]*n[e][u]+r[i]*n[i][u];0===e&&(t+=r[0]*n[0][u]),f[u]=t}return f},y.dotVV=function(r,n){for(var e,t=r.length,i=r[t-1]*n[t-1],o=t-2;1<=o;o-=2)e=o-1,i+=r[o]*n[o]+r[e]*n[e];return 0===o&&(i+=r[0]*n[0]),i},y.dot=function(r,n){var e=y.dim;switch(1e3*e(r).length+e(n).length){case 2002:return n.length<10?y.dotMMsmall(r,n):y.dotMMbig(r,n);case 2001:return y.dotMV(r,n);case 1002:return y.dotVM(r,n);case 1001:return y.dotVV(r,n);case 1e3:return y.mulVS(r,n);case 1:return y.mulSV(r,n);case 0:return r*n;default:throw new Error("numeric.dot only works on vectors and matrices")}},y.diag=function(r){for(var n,e,t,i=r.length,o=Array(i),a=i-1;0<=a;a--){for(t=Array(i),n=a+2,e=i-1;n<=e;e-=2)t[e]=0,t[e-1]=0;for(a<e&&(t[e]=0),t[a]=r[a],e=a-1;1<=e;e-=2)t[e]=0,t[e-1]=0;0===e&&(t[0]=0),o[a]=t}return o},y.getDiag=function(r){for(var n=Math.min(r.length,r[0].length),e=Array(n),t=n-1;1<=t;--t)e[t]=r[t][t],e[--t]=r[t][t];return 0===t&&(e[0]=r[0][0]),e},y.identity=function(r){return y.diag(y.rep([r],1))},y.pointwise=function(r,n,e){void 0===e&&(e="");for(var t,i=[],o=/\\[i\\]$/,a="",f=!1,u=0;u<r.length;u++)o.test(r[u])?a=t=r[u].substring(0,r[u].length-3):t=r[u],"ret"===t&&(f=!0),i.push(t);return i[r.length]="_s",i[r.length+1]="_k",i[r.length+2]=\'if(typeof _s === "undefined") _s = numeric.dim(\'+a+\');\\nif(typeof _k === "undefined") _k = 0;\\nvar _n = _s[_k];\\nvar i\'+(f?"":", ret = Array(_n)")+";\\nif(_k < _s.length-1) {\\n    for(i=_n-1;i>=0;i--) ret[i] = arguments.callee("+r.join(",")+",_s,_k+1);\\n    return ret;\\n}\\n"+e+"\\nfor(i=_n-1;i!==-1;--i) {\\n    "+n+"\\n}\\nreturn ret;",y.compile.apply(null,i)},y.pointwise2=function(r,n,e){void 0===e&&(e="");for(var t,i=[],o=/\\[i\\]$/,a="",f=!1,u=0;u<r.length;u++)o.test(r[u])?a=t=r[u].substring(0,r[u].length-3):t=r[u],"ret"===t&&(f=!0),i.push(t);return i[r.length]="var _n = "+a+".length;\\nvar i"+(f?"":", ret = Array(_n)")+";\\n"+e+"\\nfor(i=_n-1;i!==-1;--i) {\\n"+n+"\\n}\\nreturn ret;",y.compile.apply(null,i)},y._biforeach=function r(n,e,t,i,o){if(i!==t.length-1)for(var a=t[i]-1;0<=a;a--)r("object"==typeof n?n[a]:n,"object"==typeof e?e[a]:e,t,i+1,o);else o(n,e)},y._biforeach2=function r(n,e,t,i,o){if(i===t.length-1)return o(n,e);for(var a=t[i],f=Array(a),u=a-1;0<=u;--u)f[u]=r("object"==typeof n?n[u]:n,"object"==typeof e?e[u]:e,t,i+1,o);return f},y._foreach=function r(n,e,t,i){if(t!==e.length-1)for(var o=e[t]-1;0<=o;o--)r(n[o],e,t+1,i);else i(n)},y._foreach2=function r(n,e,t,i){if(t===e.length-1)return i(n);for(var o=e[t],a=Array(o),f=o-1;0<=f;f--)a[f]=r(n[f],e,t+1,i);return a},y.ops2={add:"+",sub:"-",mul:"*",div:"/",mod:"%",and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">=",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"},y.opseq={addeq:"+=",subeq:"-=",muleq:"*=",diveq:"/=",modeq:"%=",lshifteq:"<<=",rshifteq:">>=",rrshifteq:">>>=",bandeq:"&=",boreq:"|=",bxoreq:"^="},y.mathfuns=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan","isNaN","isFinite"],y.mathfuns2=["atan2","pow","max","min"],y.ops1={neg:"-",not:"!",bnot:"~",clone:""},y.mapreducers={any:["if(xi) return true;","var accum = false;"],all:["if(!xi) return false;","var accum = true;"],sum:["accum += xi;","var accum = 0;"],prod:["accum *= xi;","var accum = 1;"],norm2Squared:["accum += xi*xi;","var accum = 0;"],norminf:["accum = max(accum,abs(xi));","var accum = 0, max = Math.max, abs = Math.abs;"],norm1:["accum += abs(xi);","var accum = 0, abs = Math.abs;"],sup:["accum = max(accum,xi);","var accum = -Infinity, max = Math.max;"],inf:["accum = min(accum,xi);","var accum = Infinity, min = Math.min;"]},function(){for(var t,r,n,e,i=0;i<y.mathfuns2.length;++i)t=y.mathfuns2[i],y.ops2[t]=t;for(i in y.ops2){y.ops2.hasOwnProperty(i)&&(t=y.ops2[i],n="",e=-1!==y.myIndexOf.call(y.mathfuns2,i)?(n="var "+t+" = Math."+t+";\\n",r=function(r,n,e){return r+" = "+t+"("+n+","+e+")"},function(r,n){return r+" = "+t+"("+r+","+n+")"}):(r=function(r,n,e){return r+" = "+n+" "+t+" "+e},y.opseq.hasOwnProperty(i+"eq")?function(r,n){return r+" "+t+"= "+n}:function(r,n){return r+" = "+r+" "+t+" "+n}),y[i+"VV"]=y.pointwise2(["x[i]","y[i]"],r("ret[i]","x[i]","y[i]"),n),y[i+"SV"]=y.pointwise2(["x","y[i]"],r("ret[i]","x","y[i]"),n),y[i+"VS"]=y.pointwise2(["x[i]","y"],r("ret[i]","x[i]","y"),n),y[i]=y.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar VV = numeric."+i+"VV, VS = numeric."+i+"VS, SV = numeric."+i+\'SV;\\nvar dim = numeric.dim;\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof x === "object") {\\n      if(typeof y === "object") x = numeric._biforeach2(x,y,dim(x),0,VV);\\n      else x = numeric._biforeach2(x,y,dim(x),0,VS);\\n  } else if(typeof y === "object") x = numeric._biforeach2(x,y,dim(y),0,SV);\\n  else \'+e("x","y")+"\\n}\\nreturn x;\\n"),y[t]=y[i],y[i+"eqV"]=y.pointwise2(["ret[i]","x[i]"],e("ret[i]","x[i]"),n),y[i+"eqS"]=y.pointwise2(["ret[i]","x"],e("ret[i]","x"),n),y[i+"eq"]=y.compile("var n = arguments.length, i, x = arguments[0], y;\\nvar V = numeric."+i+"eqV, S = numeric."+i+\'eqS\\nvar s = numeric.dim(x);\\nfor(i=1;i!==n;++i) { \\n  y = arguments[i];\\n  if(typeof y === "object") numeric._biforeach(x,y,s,0,V);\\n  else numeric._biforeach(x,y,s,0,S);\\n}\\nreturn x;\\n\'))}for(i=0;i<y.mathfuns2.length;++i)t=y.mathfuns2[i],delete y.ops2[t];for(i=0;i<y.mathfuns.length;++i)t=y.mathfuns[i],y.ops1[t]=t;for(i in y.ops1)y.ops1.hasOwnProperty(i)&&(n="",t=y.ops1[i],-1!==y.myIndexOf.call(y.mathfuns,i)&&Math.hasOwnProperty(t)&&(n="var "+t+" = Math."+t+";\\n"),y[i+"eqV"]=y.pointwise2(["ret[i]"],"ret[i] = "+t+"(ret[i]);",n),y[i+"eq"]=y.compile("x",\'if(typeof x !== "object") return \'+t+"x\\nvar i;\\nvar V = numeric."+i+"eqV;\\nvar s = numeric.dim(x);\\nnumeric._foreach(x,s,0,V);\\nreturn x;\\n"),y[i+"V"]=y.pointwise2(["x[i]"],"ret[i] = "+t+"(x[i]);",n),y[i]=y.compile("x",\'if(typeof x !== "object") return \'+t+"(x)\\nvar i;\\nvar V = numeric."+i+"V;\\nvar s = numeric.dim(x);\\nreturn numeric._foreach2(x,s,0,V);\\n"));for(i=0;i<y.mathfuns.length;++i)t=y.mathfuns[i],delete y.ops1[t];for(i in y.mapreducers)y.mapreducers.hasOwnProperty(i)&&(t=y.mapreducers[i],y[i+"V"]=y.mapreduce2(t[0],t[1]),y[i]=y.compile("x","s","k",t[1]+\'if(typeof x !== "object") {    xi = x;\\n\'+t[0]+\'\\n    return accum;\\n}if(typeof s === "undefined") s = numeric.dim(x);\\nif(typeof k === "undefined") k = 0;\\nif(k === s.length-1) return numeric.\'+i+"V(x);\\nvar xi;\\nvar n = x.length, i;\\nfor(i=n-1;i!==-1;--i) {\\n   xi = arguments.callee(x[i]);\\n"+t[0]+"\\n}\\nreturn accum;\\n"))}(),y.inv=function(r){for(var n,e,t,i,o,a=y.dim(r),f=Math.abs,u=a[0],c=a[1],s=y.clone(r),m=y.identity(u),l=0;l<c;++l){for(var h=-1,d=-1,p=l;p!==u;++p)d<(o=f(s[p][l]))&&(h=p,d=o);for(e=s[h],s[h]=s[l],s[l]=e,i=m[h],m[h]=m[l],m[l]=i,r=e[l],o=l;o!==c;++o)e[o]/=r;for(o=c-1;-1!==o;--o)i[o]/=r;for(p=u-1;-1!==p;--p)if(p!==l){for(n=s[p],t=m[p],r=n[l],o=l+1;o!==c;++o)n[o]-=e[o]*r;for(o=c-1;0<o;--o)t[o]-=i[o]*r,t[--o]-=i[o]*r;0===o&&(t[0]-=i[0]*r)}}return m},y.det=function(r){var n=y.dim(r);if(2!==n.length||n[0]!==n[1])throw new Error("numeric: det() only works on square matrices");for(var e,t,i,o,a,f,u,c=n[0],s=1,m=y.clone(r),l=0;l<c-1;l++){for(e=(t=l)+1;e<c;e++)Math.abs(m[e][l])>Math.abs(m[t][l])&&(t=e);for(t!==l&&(f=m[t],m[t]=m[l],m[l]=f,s*=-1),i=m[l],e=l+1;e<c;e++){for(a=(o=m[e])[l]/i[l],t=l+1;t<c-1;t+=2)u=t+1,o[t]-=i[t]*a,o[u]-=i[u]*a;t!==c&&(o[t]-=i[t]*a)}if(0===i[l])return 0;s*=i[l]}return s*m[l][l]},y.transpose=function(r){for(var n,e,t,i,o=r.length,a=r[0].length,f=Array(a),u=0;u<a;u++)f[u]=Array(o);for(n=o-1;1<=n;n-=2){for(t=r[n],e=r[n-1],u=a-1;1<=u;--u)(i=f[u])[n]=t[u],i[n-1]=e[u],(i=f[--u])[n]=t[u],i[n-1]=e[u];0===u&&((i=f[0])[n]=t[0],i[n-1]=e[0])}if(0===n){for(e=r[0],u=a-1;1<=u;--u)f[u][0]=e[u],f[--u][0]=e[u];0===u&&(f[0][0]=e[0])}return f},y.negtranspose=function(r){for(var n,e,t,i,o=r.length,a=r[0].length,f=Array(a),u=0;u<a;u++)f[u]=Array(o);for(n=o-1;1<=n;n-=2){for(t=r[n],e=r[n-1],u=a-1;1<=u;--u)(i=f[u])[n]=-t[u],i[n-1]=-e[u],(i=f[--u])[n]=-t[u],i[n-1]=-e[u];0===u&&((i=f[0])[n]=-t[0],i[n-1]=-e[0])}if(0===n){for(e=r[0],u=a-1;1<=u;--u)f[u][0]=-e[u],f[--u][0]=-e[u];0===u&&(f[0][0]=-e[0])}return f},y.norm2=function(r){return Math.sqrt(y.norm2Squared(r))},y.linspace=function(r,n,e){if(void 0===e&&(e=Math.max(Math.round(n-r)+1,1)),e<2)return 1===e?[r]:[];for(var t=Array(e),i=--e;0<=i;i--)t[i]=(i*n+(e-i)*r)/e;return t},y.getBlock=function(r,f,u){var c=y.dim(r);return function r(n,e){var t,i=f[e],o=u[e]-i,a=Array(o);if(e===c.length-1){for(t=o;0<=t;t--)a[t]=n[t+i];return a}for(t=o;0<=t;t--)a[t]=r(n[t+i],e+1);return a}(r,0)},y.setBlock=function(r,f,u,n){var c=y.dim(r);return function r(n,e,t){var i,o=f[t],a=u[t]-o;if(t===c.length-1)for(i=a;0<=i;i--)n[i+o]=e[i];for(i=a;0<=i;i--)r(n[i+o],e[i],t+1)}(r,n,0),r},y.getRange=function(r,n,e){for(var t,i,o,a=n.length,f=e.length,u=Array(a),c=a-1;-1!==c;--c)for(u[c]=Array(f),i=u[c],o=r[n[c]],t=f-1;-1!==t;--t)i[t]=o[e[t]];return u},y.blockMatrix=function(r){var n=y.dim(r);if(n.length<4)return y.blockMatrix([r]);for(var e,t,i=n[0],o=n[1],a=0,f=0,u=0;u<i;++u)a+=r[u][0].length;for(e=0;e<o;++e)f+=r[0][e][0].length;var c=Array(a);for(u=0;u<a;++u)c[u]=Array(f);var s,m,l,h,d,p=0;for(u=0;u<i;++u){for(s=f,e=o-1;-1!==e;--e)for(s-=(t=r[u][e])[0].length,l=t.length-1;-1!==l;--l)for(d=t[l],m=c[p+l],h=d.length-1;-1!==h;--h)m[s+h]=d[h];p+=r[u][0].length}return c},y.tensor=function(r,n){if("number"==typeof r||"number"==typeof n)return y.mul(r,n);var e=y.dim(r),t=y.dim(n);if(1!==e.length||1!==t.length)throw new Error("numeric: tensor product is only defined for vectors");for(var i,o,a,f=e[0],u=t[0],c=Array(f),s=f-1;0<=s;s--){for(i=Array(u),a=r[s],o=u-1;3<=o;--o)i[o]=a*n[o],i[--o]=a*n[o],i[--o]=a*n[o],i[--o]=a*n[o];for(;0<=o;)i[o]=a*n[o],--o;c[s]=i}return c},y.epsilon=2220446049250313e-31,y.LU=function(r,n){n=n||!1;var e,t,i,o,a,f,u,c,s,m=Math.abs,l=r.length,h=l-1,d=new Array(l);for(n||(r=y.clone(r)),i=0;i<l;++i){for(s=m((f=r[u=i])[i]),t=i+1;t<l;++t)s<(o=m(r[t][i]))&&(s=o,u=t);for((d[i]=u)!=i&&(r[i]=r[u],r[u]=f,f=r[i]),a=f[i],e=i+1;e<l;++e)r[e][i]/=a;for(e=i+1;e<l;++e){for(c=r[e],t=i+1;t<h;++t)c[t]-=c[i]*f[t],c[++t]-=c[i]*f[t];t===h&&(c[t]-=c[i]*f[t])}}return{LU:r,P:d}},y.LUsolve=function(r,n){for(var e,t,i,o,a=r.LU,f=a.length,u=y.clone(n),c=r.P,s=f-1;-1!==s;--s)u[s]=n[s];for(s=0;s<f;++s)for(t=c[s],c[s]!==s&&(o=u[s],u[s]=u[t],u[t]=o),i=a[s],e=0;e<s;++e)u[s]-=u[e]*i[e];for(s=f-1;0<=s;--s){for(i=a[s],e=s+1;e<f;++e)u[s]-=u[e]*i[e];u[s]/=i[s]}return u},y.solve=function(r,n,e){return y.LUsolve(y.LU(r,e),n)},y});\ndefine(\'core/math/qr\',["require","exports"],function(require,r){"use strict";function f(r,t,n){for(var e=r.reflectors,a=r.r,l=r.p,h=t.slice(),o=0;o<e.length;o++)!function(r,t){for(var n=r.length,e=t.length,a=0,l=0,h=e-n;h<e;h++)a+=r[h+n-e]*t[h],l+=r[h+n-e]*r[h+n-e];for(var o=a/l,h=e-n;h<e;h++)t[h]=2*o*r[h+n-e]-t[h]}(e[o],h);for(o=e.length;o<a[0].length;o++)h[o]=0;h.length=a[0].length;for(var f=Math.pow(2,-52),g=n.regularize?f*Math.abs(a[0][0])*Math.max(a.length,a[0].length):0,o=e.length-1;0<=o;o--){var i=a[o];if(Math.abs(i[o])<=g)h[o]=0;else{for(var u=o+1;u<e.length;u++)h[o]-=h[u]*i[u];h[o]/=i[o]}}for(var v,o=l.length-1;0<=o;o--){l[o]!==o&&(v=h[o],h[o]=h[l[o]],h[l[o]]=v)}return h}function n(r){var t=r.r,n=Math.min(t.length,t[0].length),e=t[0][0],a=t[n-1][n-1];return 0===e?1/0:Math.abs(e/a)}Object.defineProperty(r,"__esModule",{value:!0}),r.isNumericallyFullRank=r.conditionNumber=r.qrSolve=r.qr=void 0,r.qr=function(r,t){if(!t||!t.mutateInput){var n=r;r=Array(r.length);for(var e=0;e<n.length;e++)r[e]=n[e].slice()}for(var a=Math.min(r.length,r[0].length),l=Array(a),h=[],o=0;o<a;o++){for(var f=-1/0,g=o,i=o;i<r[o].length;i++){var u=function(r,t,n){for(var e=0;t<r.length;t++)e+=r[t][n]*r[t][n];return e}(r,o,i);f<u&&(f=u,g=i)}if((l[o]=g)!==o)for(e=0;e<r.length;e++){var v=r[e][g];r[e][g]=r[e][o],r[e][o]=v}for(var c=function(r,t,n,e){var a=Array(r.length-t);if(1===a.length)return a[0]=1,a;if(0===e){for(var l=a[0]=1;l<a.length;l++)a[l]=0;return a}var h=r[t][n]<0?-1:1;a[0]=r[t][n]+h*Math.sqrt(e);for(var o=t+1;o<r.length;o++)a[o-t]=r[o][n];return a}(r,o,o,f),i=o;i<r[o].length;i++)!function(r,t,n){for(var e=r.length,a=t.length,l=0,h=0,o=a-e;o<a;o++)l+=r[o+e-a]*t[o][n],h+=r[o+e-a]*r[o+e-a];for(var f=l/h,o=a-e;o<a;o++)t[o][n]=2*f*r[o+e-a]-t[o][n]}(c,r,i);h.push(c)}return{reflectors:h,r:r,p:l}},r.qrSolve=function(r,t,n){return(Array.isArray(t[0])?function(r,t,n){for(var e=Array(r.r[0].length),a=0;a<e.length;a++)e[a]=Array(t[0].length);for(var l=Array(t.length),h=0;h<t[0].length;h++){for(a=0;a<t.length;a++)l[a]=t[a][h];for(var o=f(r,l,n),a=0;a<o.length;a++)e[a][h]=o[a]}return e}:f)(r,t,n)},r.conditionNumber=n,r.isNumericallyFullRank=function(r){var t=Math.pow(2,-52);return Math.max(r.r.length,r.r[0].length)*t*n(r)<1}});\ndefine(\'core/math/least-squares\',["require","exports","numeric","core/math/distance","./qr"],function(require,r,N,v,G){"use strict";function L(r,e){for(var n=[],t=0;t<e;t++)n.push(r);return n}function J(r,e){for(var n=O(r,e),t=0,a=0,o=n;a<o.length;a++){var i=o[a];t+=i*i}return t/n.length}function O(r,e){return r.apply(void 0,e)}function P(r,e){for(var n=[],t=0,a=r;t<a.length;t++){var o=a[t].apply(void 0,e);n.push(o)}return n}function R(r,e){for(var n=[],t=0;t<r.length;t++)e[t]&&n.push(r[t]);return n}function k(r,e,n){for(var t=[],a=0,o=0;a<r.length;a++){var i=0;n[a]&&(i=e[o],o+=1),t.push(r[a]+i)}return t}function f(r,e,n,t){var a,o=t.maxIterations,i=t.linearSubset||L(!1,n.length),u=N.not(i),s=R(e,i),l=R(e,u),v=n,f=0,S=.001;N.any(i)&&(a={Jv:x=N.transpose(P(s,v)),F:y=G.qr(x)},h=O(r,v),v=k(v,N.neg(G.qrSolve(y,h,{regularize:!0})),i));for(var p=!1,g=J(r,v);f<o&&!p&&isFinite(g);){var h=O(r,v),d=P(l,v),M=N.transpose(d),c=void 0,E=void 0;E=a?(y=a.F,x=a.Jv,c=N.dot(d,N.sub(h,N.dot(x,G.qrSolve(y,h,{regularize:!0})))),N.dot(d,N.sub(M,N.dot(x,G.qrSolve(y,M,{regularize:!0}))))):(c=N.dot(d,h),N.dot(d,M));for(var m=v,q=!1;f<o&&!p&&!q;){f+=1;var b=N.add(E,N.diag(L(S,l.length)));m=k(v,N.neg(N.solve(b,c,!0)),u),p=N.all(N.eq(m,v));var x,y,z,I=void 0;a&&(I={Jv:x=N.transpose(P(s,m)),F:y=G.qr(x)},z=O(r,m),m=k(m,N.neg(G.qrSolve(y,z,{regularize:!0})),i));var F=J(r,m);(q=F<g)?(v=m,g=F,a=I,S*=.1):(S=Math.max(S,1e-64),S*=2)}}return{solution:v,MSE:g}}Object.defineProperty(r,"__esModule",{value:!0}),r.testOnlyExports=r.optimizeNonLinear=r.optimizeLinear=r.tryRoundingSmallParametersToZero=r.evaluateMeanSquare=void 0,r.evaluateMeanSquare=J,r.tryRoundingSmallParametersToZero=function(r,e){var n=e.solution.map(function(r){return Math.abs(r)<1e-6?0:r}),t=J(r,n);return isFinite(e.MSE)&&!isFinite(e.MSE)||t<e.MSE||e.MSE!==e.MSE+Math.pow(.5,8)*(t-e.MSE)?e:{solution:n,MSE:t}},r.optimizeLinear=function(r,e){for(var n=P(e,u=L(0,e.length)),t=G.qr(N.transpose(n),{mutateInput:!0}),a=0;a<2;a++)var o=O(r,u),i=N.neg(G.qrSolve(t,o,{regularize:!1})),u=N.add(u,i);var s=J(r,u);if(G.isNumericallyFullRank(t))return{solution:u,MSE:s};for(var l=L(0,e.length),a=0;a<2;a++)o=O(r,l),i=N.neg(G.qrSolve(t,o,{regularize:!0})),l=N.add(l,i);var v=J(r,l);return.999*v<=s?{solution:l,MSE:v}:{solution:u,MSE:s}};function S(r){for(var e=[],n=0;n<o.length;n++){for(var t=[],a=0;a<r;a++)t[a]=0===n&&1!==r?0:1===n&&1!==r?1:o[503*(n*r+a)%o.length];e.push(t)}return e}function p(r,e,n,t,a){for(var o=[],i=0,u=n;i<u.length;i++){var s=u[i];o.push({soln:f(r,e,s,a),initialGuess:s})}o.sort(function(r,e){return isNaN(r.soln.MSE)?1:isNaN(e.soln.MSE)?-1:r.soln.MSE-e.soln.MSE});for(var l=[],v=0;v<t;v++)l.push(o[v].initialGuess);return l}var o=[18.9,.105,.0113,.089,4.414,.373,.06,.149,1.84,9.26,5,.7,.2,1.13,2.61,1,.007,30,120,1500,4e-4,7.23,-1,-.0081,-.03,-28.6,-1.71,-.4,-6.94,-.777,-500];var s=[3,5,7,11,13,17,19];function g(r,e){for(var n=[],t=0;t<r.length;t++){for(var a=r[t],o=[],i=0;i<a.length;i++){var u=s[i%s.length]*t%r.length;o.push(function(r,e,n,t){if(!e)return r;if("known"!==e.type)return r;var a=e.bounds;return a[0]===-1/0&&a[1]===1/0?r:a[0]===-1/0?a[1]-Math.exp(-r):a[1]===1/0?a[0]+Math.exp(r):n/(t-1)*a[1]+(t-1-n)/(t-1)*a[0]}(a[i],e[i],u,r.length))}n.push(o)}return n}r.optimizeNonLinear=function(r,e,n){var t=(n=n||{}).linearSubset,a=n.bounds,o=n.preferredInitialGuess,i=S(e.length);a&&(i=g(i,a));var u=p(r,e,i,5,{maxIterations:3,linearSubset:t}),s=f(r,e,p(r,e,u,1,{maxIterations:60,linearSubset:t})[0],{maxIterations:250,linearSubset:t});if(!o)return s;var l=f(r,e,o,{maxIterations:100,linearSubset:t});return isFinite(l.MSE)&&(l.MSE<s.MSE||v.approx(l.MSE,s.MSE,8))?l:s},r.testOnlyExports={generateInitialGuesses:S,mapInitialGuesses:g}});\ndefine(\'core/math/builtinconstants\',[\'require\',\'core/math/parsenode/constant\',\'core/math/maybe-rational\'],function(require){"use strict";var t=require("core/math/parsenode/constant"),a=require("core/math/maybe-rational").maybeRational;return{pi:t(Math.PI),tau:t(2*Math.PI),e:t(Math.E),trigAngleMultiplier:t(a(1,1)),infty:t(1/0)}});\ndefine(\'core/math/builtinframe\',[\'require\',\'core/math/builtinconstants\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var n,r=require("core/math/builtinconstants"),t=require("core/math/parsenode/builtinfunction"),e={};for(n in r)r.hasOwnProperty(n)&&(e[n]=r[n]);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e});\n!function(){var e,n,o,a,u,c,i,f,l,s,y,p,_,h,b,v,d,w,m,O,t={};!function(e){var o="object"==typeof t?t:"object"==typeof self?self:"object"==typeof this?this:{};function n(n,r){return n!==o&&("function"==typeof Object.create?Object.defineProperty(n,"__esModule",{value:!0}):n.__esModule=!0),function(t,e){return n[t]=r?r(t,e):e}}"function"==typeof define&&define.amd?define("tslib",["exports"],function(t){e(n(o,n(t)))}):"object"==typeof module&&"object"==typeof module.exports?e(n(o,n(module.exports))):e(n(o))}(function(t){var r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};e=function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)},n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},o=function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]]);return n},a=function(t,e,n,r){var o,a=arguments.length,u=a<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;0<=c;c--)(o=t[c])&&(u=(a<3?o(u):3<a?o(e,n,u):o(e,n))||u);return 3<a&&u&&Object.defineProperty(e,n,u),u},u=function(n,r){return function(t,e){r(t,e,n)}},c=function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},i=function(a,u,c,i){return new(c=c||Promise)(function(t,e){function n(t){try{o(i.next(t))}catch(t){e(t)}}function r(t){try{o(i.throw(t))}catch(t){e(t)}}function o(e){e.done?t(e.value):new c(function(t){t(e.value)}).then(n,r)}o((i=i.apply(a,u||[])).next())})},f=function(n,r){var o,a,u,c={label:0,sent:function(){if(1&u[0])throw u[1];return u[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(u=2&e[0]?a.return:e[0]?a.throw||((u=a.return)&&u.call(a),0):a.next)&&!(u=u.call(a,e[1])).done)return u;switch(a=0,u&&(e=[2&e[0],u.value]),e[0]){case 0:case 1:u=e;break;case 4:return c.label++,{value:e[1],done:!1};case 5:c.label++,a=e[1],e=[0];continue;case 7:e=c.ops.pop(),c.trys.pop();continue;default:if(!(u=0<(u=c.trys).length&&u[u.length-1])&&(6===e[0]||2===e[0])){c=0;continue}if(3===e[0]&&(!u||e[1]>u[0]&&e[1]<u[3])){c.label=e[1];break}if(6===e[0]&&c.label<u[1]){c.label=u[1],u=e;break}if(u&&c.label<u[2]){c.label=u[2],c.ops.push(e);break}u[2]&&c.ops.pop(),c.trys.pop();continue}e=r.call(n,c)}catch(t){e=[6,t],a=0}finally{o=u=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},l=function(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])},s=function(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}},y=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,a=n.call(t),u=[];try{for(;(void 0===e||0<e--)&&!(r=a.next()).done;)u.push(r.value)}catch(t){o={error:t}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return u},p=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(y(arguments[e]));return t},_=function(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),o=0,e=0;e<n;e++)for(var a=arguments[e],u=0,c=a.length;u<c;u++,o++)r[o]=a[u];return r},h=function(t){return this instanceof h?(this.v=t,this):new h(t)},b=function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),a=[],u={};return r("next"),r("throw"),r("return"),u[Symbol.asyncIterator]=function(){return this},u;function r(r){o[r]&&(u[r]=function(n){return new Promise(function(t,e){1<a.push([r,n,t,e])||c(r,n)})})}function c(t,e){try{(n=o[t](e)).value instanceof h?Promise.resolve(n.value.v).then(i,f):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function i(t){c("next",t)}function f(t){c("throw",t)}function l(t,e){t(e),a.shift(),a.length&&c(a[0][0],a[0][1])}},v=function(r){var o,t={};return e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(o=!o)?{value:h(r[e](t)),done:"return"===e}:n?n(t):t}:n}},d=function(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=i[Symbol.asyncIterator];return e?e.call(i):(i=s(i),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(c){t[c]=i[c]&&function(u){return new Promise(function(t,e){var n,r,o,a;u=i[c](u),n=t,r=e,o=u.done,a=u.value,Promise.resolve(a).then(function(t){n({value:t,done:o})},r)})}}},w=function(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t},m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e},O=function(t){return t&&t.__esModule?t:{default:t}},t("__extends",e),t("__assign",n),t("__rest",o),t("__decorate",a),t("__param",u),t("__metadata",c),t("__awaiter",i),t("__generator",f),t("__exportStar",l),t("__values",s),t("__read",y),t("__spread",p),t("__spreadArrays",_),t("__await",h),t("__asyncGenerator",b),t("__asyncDelegator",v),t("__asyncValues",d),t("__makeTemplateObject",w),t("__importStar",m),t("__importDefault",O)})}();\ndefine(\'core/math/reparameterization\',["require","exports","core/math/parsenode/constant","core/math/builtinframe","tslib","core/math/distance","core/math/policy"],function(require,e,C,h,T,k,y){"use strict";function D(e,t,a){var r=e.getPolynomialCoefficients(t).map(function(e){return e.getConcreteTree(y.defaultPolicy,h)});return(a-r[0].asValue())/r[1].asValue()}function O(e,t){return e.map(function(e){return t[e]?+t[e].asValue():NaN})}Object.defineProperty(e,"__esModule",{value:!0}),e.solveForOriginalParameters=e.mapInitialGuesses=void 0,e.mapInitialGuesses=function(e,t){var a={};for(var r in e)e[r].isConstant&&(a[r]=e[r]);var n,s,o,i,l,u=t.model;switch(u.type){case"trig":for(var c=[(l=[u.amplitudeNode,u.frequencyNode,u.phaseNode].map(function(e){return+e.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()}))[0]*Math.cos(l[2]),l[0]*Math.sin(l[2]),l[1]],d=0;d<u.newParameterSymbols.length;d++)a[u.newParameterSymbols[d]]=C(c[d]);break;case"exp":if(u.intercept&&(a[u.intercept.newParameterSymbols[0]]=C(Math.log(u.intercept.sign*u.intercept.node.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()))),u.base&&(a[u.base.newParameterSymbols[0]]=C(Math.log(+u.base.node.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()))),u.shiftScale)for(var m=u.shiftScale,p=m.mulNode,f=m.addNode,b=m.newParameterSymbols,g=m.stats,c=(n=[p,f].map(function(e){return+e.substitute(a).getConcreteTree(y.defaultPolicy,h).asValue()}),o=(s=g).range,i=s.midrange,[o*n[0],n[1]+i*n[0]]),d=0;d<b.length;d++)a[b[d]]=C(c[d]);break;default:throw new Error("Unexpected model type "+u.type)}for(var r in a)t.expression.dependsOn(r)||delete a[r];return a},e.solveForOriginalParameters=function(e,t,a){e=T.__assign({},e);var r,n,s,o,i,l,u,c,d,m=t.model;switch(m.type){case"trig":for(var p=(d=O(m.newParameterSymbols,e),[k.hypot(d[0],d[1]),d[2],Math.atan2(d[1],d[0])]),f=[m.amplitudeNode,m.frequencyNode,m.phaseNode],b=0;b<f.length;b++){var g=f[b].substitute(e),h=p[b];e[N=g.getDependencies()[0]]=C(D(g,N,h))}break;case"exp":if(m.shiftScale)for(var y=m.shiftScale,P=y.mulNode,v=y.addNode,w=y.stats,S=y.newParameterSymbols,p=(i=O(S,e),u=(l=w).range,c=l.midrange,[i[0]/u,i[1]-c*i[0]/u]),f=[P,v],b=0;b<f.length;b++){g=f[b].substitute(e),h=p[b];e[N=g.getDependencies()[0]]=C(D(g,N,h))}m.intercept&&(r=m.intercept.node.getDependencies()[0],n=D(m.intercept.node,r,m.intercept.sign*Math.exp(+e[m.intercept.newParameterSymbols[0]].asValue())),e[r]=C(n)),m.base&&(s=m.base.node.getDependencies()[0],o=D(m.base.node,s,Math.exp(+e[m.base.newParameterSymbols[0]].asValue())),e[s]=C(o));break;default:throw new Error("Unimplemented model "+m.type)}for(var N,V={},M=0,x=a;M<x.length;M++){V[N=x[M]]=e[N]}return V}});\ndefine(\'core/math/parsenode/regression\',[\'require\',\'pjs\',\'./base\',\'core/math/distance\',\'core/math/builtin\',\'core/lib/label\',\'core/math/errormsg\',\'./error\',\'./optimizedregression\',\'./list\',\'./functioncall\',\'./identifier\',\'./constant\',\'./freevariable\',\'./expressionTypes\',\'core/math/types\',\'core/math/least-squares\',\'core/math/reparameterization\'],function(require){"use strict";var e=require("pjs"),r=require("./base"),p=require("core/math/distance"),v=require("core/math/builtin"),D=require("core/lib/label"),S=require("core/math/errormsg"),t=require("./error"),T=require("./optimizedregression"),V=require("./list"),n=require("./functioncall"),a=require("./identifier"),R=require("./constant"),h=require("./freevariable"),i=require("./expressionTypes"),y=require("core/math/types"),g=require("core/math/least-squares"),s=require("core/math/reparameterization"),M=s.solveForOriginalParameters,G=s.mapInitialGuesses,_=g.optimizeLinear,d=g.optimizeNonLinear,F=g.evaluateMeanSquare,o=i.Subtract;return e(r,function(e,i,r){function m(e,r,i,t){var n=r.getDependencies();for(h=0;h<n.length;h++)if(!e.validRegressionParameter(n[h]))throw S.invalidRegressionParameter(n[h]);var a=r.getCompiledFunction(n).fn;if(n.length){for(var s,o,u=r.findLinearSubset(n),l=u.every(function(e){return e}),f=[],h=0;h<n.length;h++)f.push(r.takeDerivative(n[h]).getCompiledFunction(n).fn);l?(o=g.tryRoundingSmallParametersToZero(a,_(a,f))).isLinear=!0:(s={linearSubset:u,bounds:function(e,r){for(var i=[],t=0;t<e.length;t++)i.push(r.boundDomain(e[t]));return i}(n,r),preferredInitialGuess:function(e,r,i){var t=[];r=r||{},i=i||{};for(var n=0;n<e.length;n++){var a=e[n],s=D.identifierToLatex(a);i[a]&&isFinite(i[a].asValue())?t.push(+i[a].asValue()):r.hasOwnProperty(s)&&isFinite(r[s])?t.push(+r[s].asValue()):t.push(1)}return t}(n,i,t)},(o=g.tryRoundingSmallParametersToZero(a,d(a,f,s))).isLinear=!1)}else o={solution:[],MSE:F(a,[]),isLinear:!0};return o}function L(e,r){for(var i={},t=r.getDependencies(),n=0;n<t.length;n++)i[t[n]]=R(e.solution[n]);return i}function c(e,r){var i=e.length,t=e[0],n=r[0],a=e[i-1],s=r[i-1];if(isFinite(t)&&isFinite(a)&&isFinite(n)&&isFinite(s)&&s-n!=0){var o=a-t;if(0!=o){for(var u=1;u<i-1;u++){var l=e[u],f=r[u],h=(s*(l-t)+n*(a-l))/o;if(!p.approx(f,h,5))return}return 1}}}e.init=function(e,r){i.init.call(this),this._lhs=e,this.isLhsSimple=e instanceof a,this._logLhs=n("ln",[e]),this._rhs=r,this._difference=o([e,r]),this._logDifference=o([n("ln",[e]),n("ln",[r])]),this.mergeDependencies(e,r)},e.isRegression=!0,e.chooseResidualVariable=function(e){if(this.userData&&this.userData.residualVariable){var r=D.latexToIdentifier(this.userData.residualVariable);if(!e[r])return r}for(var i,t=this.getDependencies(),n=0;n<t.length;n++){var a=t[n].match(/_(.*)/);if(a&&!e[i="e_"+a[1]])return i}for(var s=1;;){if(!e[i="e_"+s])return i;s++}},e.getRHSModel=function(e,r,i){for(var t,n,a=this._rhs.getDependencies(),s=0;s<a.length;s++){var o=a[s];if(r[o]&&r[o].tryGetConcreteTree){var u=r[o].tryGetConcreteTree(e,r);if(!u.isError&&u.valueType===y.ListOfNumber){if(void 0!==t){t=void 0;break}0===u.getDependencies().length&&(t=o,n=u)}}}var l=Object.create(r);void 0!==t&&(l[t]=h(this.tmpVar()));var f=this._rhs.tryGetConcreteTree(e,l);return{node:f,substituted:f.isError?f:f.substitute(i),listNode:n,isValid:void 0!==t}},e.computeStatistics=function(e,r,i,t,n,a){if(t.getDependencies().length)throw S.optimizationError();var s=O(e,t);if(!isFinite(s))throw S.optimizationError();if(0<r.getDependencies().length)return{RMSE:Math.sqrt(s)};var o=y.isList(r.valueType)?v.varp(r.asValue()):0;if(r.getDependencies().length||!isFinite(o)||o<=0||!this.isLhsSimple)return{RMSE:Math.sqrt(s)};var u,l,f=1-s/o;if(i.isValid){var h=[],c=[],g=n&&(a===N.LINLOG||a===N.LOGLOG);V.eachArgs(e,[i.listNode,r],function(e){h.push(g?Math.log(e[0].asValue()):+e[0].asValue()),c.push(+e[1].asValue())});var d=v.corr(h,c);if(p.approx((u=h,l=c,_(function(e,r){for(var i=[],t=0;t<u.length;t++)i.push(l[t]-(e*u[t]+r));return i},[function(){return u.map(function(e){return-e})},function(){return u.map(function(){return-1})}],[0,0])).MSE,s,8))return{r:d,rsquared:d*d}}return{Rsquared:f}},e.getResidualSuggestionId=function(e,r){var i,t=this._rhs.getDependencies();for(var n in r)if(r.hasOwnProperty(n)&&r[n].concreteTree.isTable&&r[n].concreteTree.columns[0]){var a=r[n].rawTree.columns;if(a&&a.length){var s=a[0].getExports();if(1===s.length&&-1!==t.indexOf(s[0])){for(var o=1;o<a.length;o++)if(-1!==a[o].getDependencies().indexOf(e))return;i=i||n}}}return i||void 0};var N={NONE:0,LOGLIN:1,LOGLOG:2,LINLOG:3};function b(e,r,i,t){var n=Object.create(i);for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a]);return V.wrap(r.getConcreteTree(e,n))}function O(e,r){var i=0;return r.eachElement(e,function(e){var r=e.asValue();i+=r*r}),i/r.length}function E(e,r,i,t,n){var a=i.reparameterizeRegression();if(!a||0===a.length)return{parameters:L(h=m(e,i=i.deriveRegressionRestrictions(),t,n),i),isLinear:h.isLinear,parameterWarning:!1};for(var s=i.getDependencies(),o=1/0,u={},l=!1,f=0;f<a.length;f++){var h,c=a[f],g=c.expression;if((h=m(e,g=g.deriveRegressionRestrictions(),G(t,c),G(n,c))).MSE<o){var d=L(h,g),p=M(d,c,s),v=O(e,b(e,i.substitute(p),r,p));if(u&&(!isFinite(v)||o<=v)){isFinite(v)||(l=!0);continue}o=h.MSE,u=p}}return{parameters:u,isLinear:!1,parameterWarning:l}}e.linearizingTransformation=function(e,r,i){if(!this.isLhsSimple)return N.NONE;if(!i.isValid)return N.NONE;var t=i.substituted;if(t.isError)return N.NONE;if(t.valueType!==y.Number)return N.NONE;var n=t.getDependencies();if(1!==n.length)return N.NONE;if(isFinite(i.node.polynomialOrder(n[0])))return N.NONE;var a=t.getCompiledFunction(n).fn,s=i.listNode;if(t.valueType!==y.Number)return N.NONE;var o=s.mapElements(e,function(e){return+e.asValue()});if(o.length<3)return N.NONE;o.sort(function(e,r){return e-r});var u=o.map(a),l=u.map(Math.log),f=o.map(Math.log),h=!0;return V.wrap(r).eachElement(e,function(e){isFinite(Math.log(+e.asValue()))||(h=!1)}),c(o,l)&&h?N.LOGLIN:c(f,l)&&h?N.LOGLOG:c(f,u)?N.LINLOG:N.NONE},e.optimize=function(e,r,i,t,n){var a=this._lhs.getConcreteTree(e,r),s=this._rhs.getConcreteTree(e,r);this.typeCheck(e,[a,s]);var o,u,l,f,h=function(e){var r={};for(var i in e)r[i]=R(e[i]);return r}(this.userData.regressionParameters),c=E(e,r,V.wrap(this._difference.getConcreteTree(e,r)),h,t),g=c.parameters,d=c.isLinear,p=this.getRHSModel(e,r,g),v=b(e,this._difference,r,g),m=this.linearizingTransformation(e,a,p);f=!this.userData.isLogModeRegression||m!==N.LOGLIN&&m!==N.LOGLOG?this.computeStatistics(e,a,p,v,this.userData.isLogModeRegression,m):(o=this._logDifference.getConcreteTree(e,r),u=this._logLhs.getConcreteTree(e,r),g=(c=E(e,r,o,h,t)).parameters,d=c.isLinear,p=this.getRHSModel(e,r,g),v=b(e,this._difference,r,g),l=b(e,this._logDifference,r,g),this.computeStatistics(e,u,p,l,this.userData.isLogModeRegression,m));var L=this.chooseResidualVariable(i),O=this.getResidualSuggestionId(L,n);return this.userData.residualVariable=D.identifierToLatex(L),T(g,v,f,p.substituted,{isModelValid:p.isValid,residualVariable:L,residualSuggestionId:O,shouldSuggestLogMode:m!==N.NONE,isLinear:d,parameterWarning:c.parameterWarning})},e.tryOptimize=function(){try{return this.optimize.apply(this,arguments)}catch(e){return e instanceof t?e:S.parseError()}},e.exportTo=function(e,r,i){if(!r.isError){for(var t in r.parameters)r.parameters.hasOwnProperty(t)&&(e.assignmentForbidden(t)||(i[t]=i[t]?S.multiplyDefined(t):r.parameters[t]));e.assignmentForbidden(r.residualVariable)||(i[r.residualVariable]=r.residuals)}},e.getSliderVariables=function(){return[]}})});\ndefine(\'core/math/parsenode/image\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(i,e,t,h){i.isImage=!0,i.init=function(i,t){e.init.call(this),this.center=i.center,this.radianAngle=i.radianAngle,this.width=i.width,this.height=i.height,this.opacity=i.opacity,this.moveStrategy=t,this.mergeDependencies(this.center,this.radianAngle,this.width,this.height,this.opacity)}})});\ndefine(\'core/math/parsenode/simulation\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(i,n,t,s){i.isSimulation=!0,i.init=function(i){n.init.call(this),this.fps=i,this.mergeDependencies(this.fps)}})});\ndefine(\'core/math/parsenode/slider\',[\'require\',\'pjs\',\'./assignment\',\'./identifier\'],function(require){"use strict";var i=require("pjs"),n=require("./assignment"),r=require("./identifier");return i(n,function(i,e,s,t){i.isSlider=!0,i.init=function(i,s){e.init.call(this,r(i._symbol),i._expression),this.setInputSpan(i._inputSpan),this.sliderAssignment=i,this.sliderMin=s.sliderMin,this.sliderMax=s.sliderMax,this.sliderSoftMin=s.sliderSoftMin,this.sliderSoftMax=s.sliderSoftMax,this.sliderStep=s.sliderStep,this.sliderIsPlayingOnce=s.sliderIsPlayingOnce,this.sliderMin&&this.mergeDependencies(this.sliderMin),this.sliderMax&&this.mergeDependencies(this.sliderMax),this.sliderStep&&this.mergeDependencies(this.sliderStep)},i.shouldPromoteToSlider=function(i){return!1},i.asAssignment=function(){return n(this._symbol,this._expression)}})});\ndefine(\'core/math/parsenode/table\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(t,e){t.init=function(t){e.init.call(this),this.columns=t,this._exports=[],this.mergeDependencies.apply(this,t);for(var n=0;n<t.length;n++)Array.prototype.push.apply(this._exports,t[n].getExports())},t.exportPenalty=1,t.isTable=!0,t.exportTo=function(t,n,e){for(var s=0;s<this.columns.length;s++){var r,i=this.columns[s].getExports();i.length&&(r=i[0],t.assignmentForbidden(r)||e[r]||(n.isError?e[r]=n:this.columns[s].exportTo(t,n.columns[s],e)))}},t.getAllIds=function(){return this.columns.map(function(t){return t.header.userData.id})}})});\ndefine(\'core/math/parsenode/tablecolumn\',[\'require\',\'pjs\',\'./base\',\'./list\',\'./constant\',\'./identifier\'],function(require){"use strict";var e=require("pjs"),r=require("./base"),o=require("./list"),t=require("./constant"),i=require("./identifier");return e(r,function(e,n){function s(e){return e.isError?t(NaN):e}e.init=function(e,t,i){n.init.call(this),this.header=e,this.length=t,this.values=i,this.isIndependent=!1,this.registerDependencies(),this._exports=this.computeExports()},e.registerDependencies=function(){this.mergeDependencies(this.header),this.mergeDependencies.apply(this,this.values)},e.computeExports=function(){return this.header instanceof i?[this.header._symbol]:[]},e.isDiscrete=function(e){return 1!==this.header.getDependencies().length||1!==e.header.getDependencies().length||this.header.getDependencies()[0]!==e.header.getDependencies()[0]},e._exportSymbolsTo=function(e,t,i){if(e.length){var n=e[0];if(t.isError)i[n]=t;else try{i[n]=o(t.values.map(s))}catch(e){if(!(e instanceof r))throw e;i[n]=e}}},e.exportTo=function(e,t,i){var n=this.getLegalExports(e);this._exportSymbolsTo(n,t,i)},e.exportToLocal=function(e,t){this._exportSymbolsTo(this.getExports(),e,t)}})});\ndefine(\'core/math/parsenode/solvedequation\',[\'require\',\'pjs\',\'./base\'],function(require){"use strict";return require("pjs")(require("./base"),function(e,t){e.init=function(e,i){t.init.call(this),this._symbol=e,this._expression=i,this.mergeDependencies(i)},e.getCompiledFunction=function(){return this._expression.getCompiledFunction.apply(this._expression,arguments)},e.getCompiledDerivative=function(){return this._expression.getCompiledDerivative.apply(this._expression,arguments)},e.evaluate=function(){return this._expression.evaluate.apply(this._expression,arguments)}})});\ndefine(\'core/math/parsenode/seed\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,n){t.init=function(t){"string"!=typeof t&&(t=""+t),this._stringValue=t,n.init.call(this,[])},t.isString=!0,t.getEvalStrings=function(){return{statements:[],expression:"\'"+this.asValue()+"\'"}},t.asValue=function(){return this._stringValue}})});\ndefine(\'core/math/parsenode/extendseed\',[\'require\',\'pjs\',\'./expression\'],function(require){"use strict";return require("pjs")(require("./expression"),function(t,s){t.init=function(t,e){s.init.call(this,e),this.seed=e[0],this.userSeed=e[1],this.tag=t},t.getEvalStrings=function(){var t=this.seed.getEvalStrings(),e=this.userSeed.getEvalStrings(),s=[];return Array.prototype.push.apply(s,t.statements),Array.prototype.push.apply(s,e.statements),{statements:s,expression:"("+t.expression+") + \'::"+this.tag+"\' + ("+e.expression+")"}},t.asValue=function(){return this.seed.asValue()+"::"+this.tag+this.userSeed.asValue()},t.copyWithArgs=function(t){return new this.constructor(this.tag,t)}})});\ndefine(\'core/math/parsenode/rgbcolor\',[\'require\',\'pjs\',\'./scalarexpression\'],function(require){"use strict";return require("pjs")(require("./scalarexpression"),function(s,a,t){s.asArray=function(){return[+this.args[0].asValue(),+this.args[1].asValue(),+this.args[2].asValue()]},s.asValue=s.asArray,s.getEvalStrings=function(){for(var s=[],a=[],t=0;t<this.args.length;t++){var r=this.args[t].getEvalStrings(),s=s.concat(r.statements);a.push(r.expression)}return{statements:s,expression:"["+a.join(",")+"]"}}})});\ndefine(\'parsenodes\',[\'require\',\'core/math/parsenode/expressionTypes\',\'core/math/parsenode/base\',\'core/math/parsenode/expression\',\'core/math/parsenode/scalarexpression\',\'core/math/parsenode/error\',\'core/math/parsenode/constant\',\'core/math/parsenode/mixednumber\',\'core/math/parsenode/identifier\',\'core/math/parsenode/ans\',\'core/math/parsenode/freevariable\',\'core/math/parsenode/dummyindex\',\'core/math/parsenode/list\',\'core/math/parsenode/range\',\'core/math/parsenode/broadcast\',\'core/math/parsenode/listaccess\',\'core/math/parsenode/dotaccess\',\'core/math/parsenode/dotaccessexponent\',\'core/math/parsenode/orderedpair\',\'core/math/parsenode/movablepoint\',\'core/math/parsenode/orderedpairaccess\',\'core/math/parsenode/polygon\',\'core/math/parsenode/basecomparator\',\'core/math/parsenode/comparator\',\'core/math/parsenode/doubleinequality\',\'core/math/parsenode/repeatedoperator\',\'core/math/parsenode/sum\',\'core/math/parsenode/product\',\'core/math/parsenode/integral\',\'core/math/parsenode/functioncall\',\'core/math/parsenode/seededfunctioncall\',\'core/math/parsenode/functionexponent\',\'core/math/parsenode/functionfactorial\',\'core/math/parsenode/prime\',\'core/math/parsenode/piecewise\',\'core/math/parsenode/derivative\',\'core/math/parsenode/builtinfunction\',\'core/math/parsenode/nativefunction\',\'core/math/parsenode/typedfunction\',\'core/math/parsenode/reducerfunction\',\'core/math/parsenode/parametrizedreducerfunction\',\'core/math/parsenode/doublereducerfunction\',\'core/math/parsenode/toplevelfunction\',\'core/math/parsenode/distribution\',\'core/math/parsenode/histogram\',\'core/math/parsenode/object3d\',\'core/math/parsenode/dotplot\',\'core/math/parsenode/boxplot\',\'core/math/parsenode/ttest\',\'core/math/parsenode/independent-ttest\',\'core/math/parsenode/stats\',\'core/math/parsenode/assignment\',\'core/math/parsenode/functiondefinition\',\'core/math/parsenode/equation\',\'core/math/parsenode/regression\',\'core/math/parsenode/image\',\'core/math/parsenode/simulation\',\'core/math/parsenode/slider\',\'core/math/parsenode/table\',\'core/math/parsenode/tablecolumn\',\'core/math/parsenode/solvedequation\',\'core/math/parsenode/optimizedregression\',\'core/math/parsenode/seed\',\'core/math/parsenode/extendseed\',\'core/math/parsenode/rgbcolor\'],function(require){"use strict";var e=require("core/math/parsenode/expressionTypes"),o={Base:require("core/math/parsenode/base"),Expression:require("core/math/parsenode/expression"),ScalarExpression:require("core/math/parsenode/scalarexpression"),Error:require("core/math/parsenode/error"),Constant:require("core/math/parsenode/constant"),MixedNumber:require("core/math/parsenode/mixednumber"),Identifier:require("core/math/parsenode/identifier"),Ans:require("core/math/parsenode/ans"),FreeVariable:require("core/math/parsenode/freevariable"),DummyIndex:require("core/math/parsenode/dummyindex"),List:require("core/math/parsenode/list"),Range:require("core/math/parsenode/range"),Broadcast:require("core/math/parsenode/broadcast"),ListAccess:require("core/math/parsenode/listaccess"),DotAccess:require("core/math/parsenode/dotaccess"),DotAccessExponent:require("core/math/parsenode/dotaccessexponent"),OrderedPair:require("core/math/parsenode/orderedpair"),MovablePoint:require("core/math/parsenode/movablepoint"),OrderedPairAccess:require("core/math/parsenode/orderedpairaccess"),Polygon:require("core/math/parsenode/polygon"),BaseComparator:require("core/math/parsenode/basecomparator"),Comparator:require("core/math/parsenode/comparator"),DoubleInequality:require("core/math/parsenode/doubleinequality"),RepeatedOperator:require("core/math/parsenode/repeatedoperator"),Sum:require("core/math/parsenode/sum"),Product:require("core/math/parsenode/product"),Integral:require("core/math/parsenode/integral"),FunctionCall:require("core/math/parsenode/functioncall"),SeededFunctionCall:require("core/math/parsenode/seededfunctioncall"),FunctionExponent:require("core/math/parsenode/functionexponent"),FunctionFactorial:require("core/math/parsenode/functionfactorial"),Prime:require("core/math/parsenode/prime"),Piecewise:require("core/math/parsenode/piecewise"),Derivative:require("core/math/parsenode/derivative"),BuiltInFunction:require("core/math/parsenode/builtinfunction"),NativeFunction:require("core/math/parsenode/nativefunction"),TypedFunction:require("core/math/parsenode/typedfunction"),ReducerFunction:require("core/math/parsenode/reducerfunction"),ParametrizedReducerFunction:require("core/math/parsenode/parametrizedreducerfunction"),DoubleReducerFunction:require("core/math/parsenode/doublereducerfunction"),TopLevelFunction:require("core/math/parsenode/toplevelfunction"),Distribution:require("core/math/parsenode/distribution"),Histogram:require("core/math/parsenode/histogram"),Object3D:require("core/math/parsenode/object3d"),DotPlot:require("core/math/parsenode/dotplot"),BoxPlot:require("core/math/parsenode/boxplot"),TTest:require("core/math/parsenode/ttest"),IndependentTTest:require("core/math/parsenode/independent-ttest"),Stats:require("core/math/parsenode/stats"),Assignment:require("core/math/parsenode/assignment"),FunctionDefinition:require("core/math/parsenode/functiondefinition"),Equation:require("core/math/parsenode/equation"),Regression:require("core/math/parsenode/regression"),Image:require("core/math/parsenode/image"),Simulation:require("core/math/parsenode/simulation"),Slider:require("core/math/parsenode/slider"),Table:require("core/math/parsenode/table"),TableColumn:require("core/math/parsenode/tablecolumn"),SolvedEquation:require("core/math/parsenode/solvedequation"),OptimizedRegression:require("core/math/parsenode/optimizedregression"),Seed:require("core/math/parsenode/seed"),ExtendSeed:require("core/math/parsenode/extendseed"),RGBColor:require("core/math/parsenode/rgbcolor")};for(var r in e)o[r]=e[r];for(var a in o)o.hasOwnProperty(a)&&"Comparator"!==a&&"BuiltInFunction"!==a&&(o[a].prototype.type=a);for(var t in o.Comparator)o.Comparator.hasOwnProperty(t)&&(o.Comparator[t].prototype.type="Comparator[\'"+t+"\']");for(var n in o.BuiltInFunction)o.BuiltInFunction.hasOwnProperty(n)&&(o.BuiltInFunction[n].prototype.type="BuiltInFunction[\'"+n+"\']");return o});\ndefine(\'core/math/parser/char-codes\',["require","exports"],function(require,e){"use strict";function t(e){return 97<=e&&e<=122}function i(e){return 65<=e&&e<=90}Object.defineProperty(e,"__esModule",{value:!0}),e.isWhitespace=e.isSingleQuote=e.isDot=e.isBackslash=e.isLetter=e.isUpperCaseLetter=e.isLowerCaseLetter=e.isDigit=void 0,e.isDigit=function(e){return 48<=e&&e<=57},e.isLowerCaseLetter=t,e.isUpperCaseLetter=i,e.isLetter=function(e){return t(e)||i(e)},e.isBackslash=function(e){return 92===e},e.isDot=function(e){return 46===e},e.isSingleQuote=function(e){return 39===e},e.isWhitespace=function(e){if(9<=e&&e<=13)return!0;if(8192<=e&&e<=8202)return!0;switch(e){case 32:case 160:case 5760:case 8232:case 8233:case 8239:case 8287:case 12288:case 65279:return!0;default:return!1}}});\ndefine(\'core/math/parser/latex-lexer\',["require","exports","./char-codes","./input-span"],function(require,e,o,p){"use strict";function s(e,t,n){return{type:e,span:t,val:n}}function t(e,t,n){for(;o.isWhitespace(e.charCodeAt(t));)t+=1;return{input:e,prevSpan:n,pos:t,token:function(e,t){var n=t;if(t>=e.length)return s("End",p.emptySpanAt(e,t),"");var r=e.charCodeAt(t);{if(o.isDigit(r))return s("Digit",a=p.Span(e,n,t+1),e.charAt(n));if(o.isLetter(r))return s("Letter",a=p.Span(e,n,t+1),e.charAt(n));if(o.isBackslash(r)){if(t+=1,o.isLetter(e.charCodeAt(t))){for(;o.isLetter(e.charCodeAt(t));)t+=1;var a=p.Span(e,n,t),i=p.slice(a);return s(u[i]||"Cmd",a,i)}t+=1;a=p.Span(e,n,t),i=p.slice(a);return s("EscapedSymbol",a,i)}if(o.isSingleQuote(r)){for(t+=1;o.isSingleQuote(e.charCodeAt(t));)t+=1;if("^"===e.charAt(t)){t+=1;a=p.Span(e,n,t),i=p.slice(a);return s("Primes^",a,i)}a=p.Span(e,n,t),i=p.slice(a);return s("Primes",a,i)}a=p.Span(e,n,t+1),i=e.charAt(n);return s(c[i]||"Symbol",a,i)}}(e,t)}}function n(e){return t(e.input,e.token.span.end,e.token.span)}function r(e){return e.token}Object.defineProperty(e,"__esModule",{value:!0}),e.isDone=e.isAt=e.eat=e.peek=e.advance=e.lex=e.LatexToken=e.spanStates=void 0,e.spanStates=function(e,t){return p.joinSpans(e.token.span,t.prevSpan)},e.LatexToken=s,e.lex=function(e){return t(e,0,p.emptySpanAt(e,0))},e.advance=n,e.peek=r,e.eat=function(e,t){if(r(e).type!==t)throw"Parse Error: expected "+t+".";return n(e)},e.isAt=function(e,t){return r(e).type===t},e.isDone=function(e){return e.pos>=e.input.length};var u={"\\\\left":"Left","\\\\right":"Right","\\\\sqrt":"Sqrt","\\\\frac":"Frac","\\\\operatorname":"OperatorName"},c={"[":"[","]":"]","{":"{","}":"}","^":"^",_:"_"}});\ndefine(\'core/math/parser/latex-node\',["require","exports"],function(require,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Symbol=r.OperatorName=r.LeftRight=r.SupSub=r.Frac=r.Sqrt=r.Group=void 0,r.Group=function(r,t){return{type:"Group",span:r,args:t}},r.Sqrt=function(r,t,e){return{type:"Sqrt",span:r,optArg:t,arg:e}},r.Frac=function(r,t,e){return{type:"Frac",span:r,num:t,den:e}},r.SupSub=function(r,t,e,n){return{type:"SupSub",span:r,sup:t,sub:e,nprimes:n}},r.LeftRight=function(r,t,e,n){return{type:"LeftRight",span:r,left:t,right:e,arg:n}},r.OperatorName=function(r,t){return{type:"OperatorName",span:r,arg:t}},r.Symbol=function(r,t){return{type:"Symbol",span:r,val:t}}});\ndefine(\'core/math/parser/latex-parser\',["require","exports","./latex-lexer","./input-span","./latex-node"],function(require,e,v,o,f){"use strict";function p(e){switch(e){case"Frac":return 2;case"^":case"_":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":return 1;default:return 0}}function d(e,r){return{state:e,tree:r}}function u(e,r){var a=e,t=[];e:for(;!v.isDone(e);){var s=v.peek(e);switch(s.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":case"[":case"{":case"^":case"_":case"Primes":case"Primes^":case"Left":case"Frac":case"Sqrt":case"OperatorName":case"]":if("]"===s.type&&r)break e;var c,n;if(e=(n=l(e)).state,"Group"===(c=n.tree).type)for(var o=0,p=c.args;o<p.length;o++){var u=p[o];t.push(u)}else t.push(c);break;case"}":case"Right":case"End":break e;default:throw"Unexpected token type "+s.type+"."}}var i=v.spanStates(a,e);return d(e,f.Group(i,t))}function l(e){var r=v.peek(e);switch(r.type){case"Cmd":case"EscapedSymbol":case"Letter":case"Digit":case"Symbol":return d(e=v.advance(e),r);case"[":case"]":return d(e=v.advance(e),f.Symbol(r.span,r.val));case"{":var a,t;return e=(t=u(e=v.advance(e),!1)).state,a=t.tree,d(e=v.eat(e,"}"),a);case"^":case"_":case"Primes":case"Primes^":return function(e){var r,a,t,s,c,n=e,o=0;e:for(;!v.isDone(e);){var p=v.peek(e);switch(p.type){case"^":if(e=v.advance(e),s)throw"Parse Error: double superscript.";r=i(e,p),e=r.state,s=r.tree;break;case"_":if(e=v.advance(e),c)throw"Parse Error: double subscript.";a=i(e,p),e=a.state,c=a.tree;break;case"Primes":if(e=v.advance(e),0<o)throw"Parse Error: double primes.";o=p.val.length;break;case"Primes^":if(e=v.advance(e),0<o)throw"Parse Error: double primes.";if(s)throw"Parse Error: double superscript";o=p.val.length-1,t=i(e,p),e=t.state,s=t.tree;break;default:break e}}var u=v.spanStates(n,e);return d(e,f.SupSub(u,s,c,o))}(e);case"Left":return function(e){var r,a=e;e=v.eat(e,"Left");var t,s=v.peek(e);e=v.advance(e),r=u(e,!1),e=r.state,t=r.tree,e=v.eat(e,"Right");var c=v.peek(e);e=v.advance(e);var n=v.spanStates(a,e);return d(e,f.LeftRight(n,s,c,t))}(e);case"Frac":return function(e){var r,a,t,s,c=e,n=v.peek(e);e=v.eat(e,"Frac"),r=i(e,n),e=r.state,t=r.tree,a=i(e,n),e=a.state,s=a.tree;var o=v.spanStates(c,e);return d(e,f.Frac(o,t,s))}(e);case"Sqrt":return function(e){var r,a,t,s,c=e,n=v.peek(e);e=v.eat(e,"Sqrt"),v.isAt(e,"[")&&(r=function(e){var r,a;return e=v.eat(e,"["),r=u(e,!0),e=r.state,a=r.tree,d(e=v.eat(e,"]"),a)}(e),e=r.state,t=r.tree);a=i(e,n),e=a.state,s=a.tree;var o=v.spanStates(c,e);return d(e,f.Sqrt(o,t,s))}(e);case"OperatorName":return function(e){var r,a,t=e,s=v.peek(e);e=v.eat(e,"OperatorName"),r=i(e,s),e=r.state,a=r.tree;var c=v.spanStates(t,e);return d(e,f.OperatorName(c,a))}(e);case"}":case"Right":throw"Parse Error: unexpected "+r.val+".";case"End":throw"Parse Error: unexpected end.";default:throw"Unexpected token type "+r.type+"."}}function i(e,r){var a,t,s=p(r.type);if(s<=0)throw new Error("Programming Error: greediness must be greater than 0.");var c=p(v.peek(e).type);if(0<c&&c<=s){var n=o.slice(r.span);throw"Parse Error: can\'t use "+o.slice(v.peek(e).span)+" as argument of "+n+". Use {}."}return e=(a=l(e)).state,"Group"!==(t=a.tree).type&&(t=f.Group(t.span,[t])),d(e,t)}Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0,e.parse=function(e){var r=u(v.lex(e),!1),a=r.state,t=r.tree;if(!v.isDone(a))throw"Parse error: unexpected "+o.slice(v.peek(a).span)+".";return t}});\ndefine(\'core/math/parser/command-aliases\',["require","exports","./char-codes"],function(require,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.translateCmd=void 0;var c={mcd:"gcd",gcf:"gcd",mcm:"lcm",signum:"sign",stdDevP:"stdevp",stddevp:"stdevp",stdDev:"stdev",stddev:"stdev",variance:"var",TTest:"ttest",TScore:"tscore",IndependentTTest:"ittest",iTTest:"ittest",inverseCdf:"quantile",inversecdf:"quantile",arsinh:"arcsinh",arcosh:"arccosh",artanh:"arctanh",arcsch:"arccsch",arsech:"arcsech",arcoth:"arccoth"};e.translateCmd=function(e){for(var t=0;s.isBackslash(e.charCodeAt(t));)t+=1;return 0<t&&(e=e.slice(t)),c[e]||e}});\ndefine(\'core/math/parser/surface-node\',["require","exports","./command-aliases"],function(require,n,t){"use strict";function a(n){if("Subscript"===n.type){if("Alphanumeric"!==n.args[1].type)return!1;n=n.args[0]}switch(n.type){case"Cmd":case"Letter":return!0;default:return!1}}Object.defineProperty(n,"__esModule",{value:!0}),n.unwrapSeq=n.isDerivative=n.isSuperscriptedIdentifier=n.isIdentifier=n.MixedNumber=n.Alphanumeric=n.Cmd=n.Decimal=n.Letter=n.Juxt=n.PercentOf=n.Dot=n.Ellipsis=n.Colon=n.EmptyRangeEnd=n.EmptyPiecewise=n.Piecewise=n.Product=n.Sum=n.EmptyIntegral=n.Integral=n.Derivative=n.Frac=n.Nthroot=n.Sqrt=n.Seq=n.Prime=n.Superscript=n.Subscript=n.Pipes=n.List=n.Paren=n.Index=n.ImplicitCall=n.Call=n.Bang=n.Div=n.Mul=n.Sub=n.Add=n.Neg=n.Pos=n.Tilde=n.InequalityChain=n.TrailingInequalityPiece=n.Inequality=n.Equals=void 0,n.Equals=function(n,e){return{type:"Equals",span:n,args:e}},n.Inequality=function(n,e,t){return{type:"Inequality",span:n,symbol:e,args:t}},n.TrailingInequalityPiece=function(n,e,t){return{type:"TrailingInequalityPiece",span:n,symbol:e,args:t}},n.InequalityChain=function(n,e,t){return{type:"InequalityChain",span:n,first:e,chain:t}},n.Tilde=function(n,e){return{type:"Tilde",span:n,args:e}},n.Pos=function(n,e){return{type:"Pos",span:n,args:e}},n.Neg=function(n,e){return{type:"Neg",span:n,args:e}},n.Add=function(n,e){return{type:"Add",span:n,args:e}},n.Sub=function(n,e){return{type:"Sub",span:n,args:e}},n.Mul=function(n,e){return{type:"Mul",span:n,args:e}},n.Div=function(n,e){return{type:"Div",span:n,args:e}},n.Bang=function(n,e){return{type:"Bang",span:n,args:e}},n.Call=function(n,e){return{type:"Call",span:n,args:e}},n.ImplicitCall=function(n,e){return{type:"ImplicitCall",span:n,args:e}},n.Index=function(n,e){return{type:"Index",span:n,args:e}},n.Paren=function(n,e){return{type:"Paren",span:n,args:e}},n.List=function(n,e){return{type:"List",span:n,args:e}},n.Pipes=function(n,e){return{type:"Pipes",span:n,args:e}},n.Subscript=function(n,e){return{type:"Subscript",span:n,args:e}},n.Superscript=function(n,e){return{type:"Superscript",span:n,args:e}},n.Prime=function(n,e,t){return{type:"Prime",span:n,nprimes:e,args:t}},n.Seq=function(n,e){return{type:"Seq",span:n,args:e}},n.Sqrt=function(n,e){return{type:"Sqrt",span:n,args:e}},n.Nthroot=function(n,e){return{type:"Nthroot",span:n,args:e}},n.Frac=function(n,e){return{type:"Frac",span:n,args:e}},n.Derivative=function(n,e){return{type:"Derivative",span:n,args:e}},n.Integral=function(n,e){return{type:"Integral",span:n,args:e}},n.EmptyIntegral=function(n,e){return{type:"EmptyIntegral",span:n,args:e}},n.Sum=function(n,e){return{type:"Sum",span:n,args:e}},n.Product=function(n,e){return{type:"Product",span:n,args:e}},n.Piecewise=function(n,e){return{type:"Piecewise",span:n,args:e}},n.EmptyPiecewise=function(n){return{type:"EmptyPiecewise",span:n}},n.EmptyRangeEnd=function(n){return{type:"EmptyRangeEnd",span:n}},n.Colon=function(n,e){return{type:"Colon",span:n,args:e}},n.Ellipsis=function(n,e){return{type:"Ellipsis",span:n,args:e}},n.Dot=function(n,e){return{type:"Dot",span:n,args:e}},n.PercentOf=function(n,e){return{type:"PercentOf",span:n,args:e}},n.Juxt=function(n,e){return{type:"Juxt",span:n,args:e}},n.Letter=function(n,e){return{type:"Letter",span:n,val:e}},n.Decimal=function(n,e){return{type:"Decimal",span:n,val:e}},n.Cmd=function(n,e){return{type:"Cmd",span:n,val:t.translateCmd(e)}},n.Alphanumeric=function(n,e){return{type:"Alphanumeric",span:n,val:e}},n.MixedNumber=function(n,e,t,r){return{type:"MixedNumber",span:n,whole:e,num:t,den:r}},n.isIdentifier=a,n.isSuperscriptedIdentifier=function(n){return"Superscript"===n.type&&a(n.args[0])},n.isDerivative=function(n,e){if("Letter"!==n.type||"d"!==n.val)return!1;if("Juxt"!==e.type)return!1;var t=e.args,r=t[0],i=t[1];return"Letter"===r.type&&"d"===r.val&&a(i)},n.unwrapSeq=function(n){return"Seq"===n.type?n.args:[n]}});\ndefine(\'core/math/parser/surface-node-error\',["require","exports"],function(require,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AdjacentNumbers=n.FractionEmpty=n.FractionMissingDenominator=n.FractionMissingNumerator=n.DifferentialWithSuperscript=n.IntegralMissingDifferential=n.DerivativeMissingBody=n.IntegralMissingBody=n.ProductMissingBody=n.SumMissingBody=n.IntegralMissingBound=n.MissingBound=n.ProductMissingBound=n.SumMissingBound=n.UnexpectedPrime=n.SuperscriptWithPrime=n.PrimeWithoutParen=n.PercentMissingOf=n.FunctionMissingArgument=n.UnexpectedSubscript=n.InvalidSubscript=n.InvalidOperatorName=n.UnrecognizedSymbol=n.UnexpectedDifferential=n.UnexpectedCloseDelimiter=n.MissingCloseDelimiter=n.UnaryOperatorMissingLeft=n.UnaryOperatorMissingRight=n.BinaryOperatorMissingLeft=n.BinaryOperatorMissingRight=n.UnexpectedEnd=n.EmptyRadicalIndex=n.EmptyPipe=n.EmptySquareBracket=n.EmptyRadical=n.EmptySuperscript=n.EmptySubscript=n.EmptyGroup=n.EmptyInput=n.UnexpectedParseError=n.Err=void 0,n.Err=function(n,t){return{type:"Err",span:n,error:t}},n.UnexpectedParseError=function(){return{type:"UnexpectedParseError"}},n.EmptyInput=function(){return{type:"EmptyInput"}},n.EmptyGroup=function(){return{type:"EmptyGroup"}},n.EmptySubscript=function(){return{type:"EmptySubscript"}},n.EmptySuperscript=function(){return{type:"EmptySuperscript"}},n.EmptyRadical=function(){return{type:"EmptyRadical"}},n.EmptySquareBracket=function(){return{type:"EmptySquareBracket"}},n.EmptyPipe=function(){return{type:"EmptyPipe"}},n.EmptyRadicalIndex=function(){return{type:"EmptyRadicalIndex"}},n.UnexpectedEnd=function(){return{type:"UnexpectedEnd"}},n.BinaryOperatorMissingRight=function(n){return{type:"BinaryOperatorMissingRight",val:n}},n.BinaryOperatorMissingLeft=function(n){return{type:"BinaryOperatorMissingLeft",val:n}},n.UnaryOperatorMissingRight=function(n){return{type:"UnaryOperatorMissingRight",val:n}},n.UnaryOperatorMissingLeft=function(n){return{type:"UnaryOperatorMissingLeft",val:n}},n.MissingCloseDelimiter=function(n,t){return{type:"MissingCloseDelimiter",open:n,close:t}},n.UnexpectedCloseDelimiter=function(n,t){return{type:"UnexpectedCloseDelimiter",open:n,close:t}},n.UnexpectedDifferential=function(){return{type:"UnexpectedDifferential"}},n.UnrecognizedSymbol=function(n){return{type:"UnrecognizedSymbol",val:n}},n.InvalidOperatorName=function(n){return{type:"InvalidOperatorName",val:n}},n.InvalidSubscript=function(n){return{type:"InvalidSubscript",val:n}},n.UnexpectedSubscript=function(n){return{type:"UnexpectedSubscript",base:n}},n.FunctionMissingArgument=function(n){return{type:"FunctionMissingArgument",val:n}},n.PercentMissingOf=function(){return{type:"PercentMissingOf"}},n.PrimeWithoutParen=function(){return{type:"PrimeWithoutParen"}},n.SuperscriptWithPrime=function(){return{type:"SuperscriptWithPrime"}},n.UnexpectedPrime=function(){return{type:"UnexpectedPrime"}},n.SumMissingBound=function(){return{type:"SumMissingBound"}},n.ProductMissingBound=function(){return{type:"ProductMissingBound"}},n.MissingBound=function(){return{type:"MissingBound"}},n.IntegralMissingBound=function(){return{type:"IntegralMissingBound"}},n.SumMissingBody=function(){return{type:"SumMissingBody"}},n.ProductMissingBody=function(){return{type:"ProductMissingBody"}},n.IntegralMissingBody=function(){return{type:"IntegralMissingBody"}},n.DerivativeMissingBody=function(){return{type:"DerivativeMissingBody"}},n.IntegralMissingDifferential=function(){return{type:"IntegralMissingDifferential"}},n.DifferentialWithSuperscript=function(){return{type:"DifferentialWithSuperscript"}},n.FractionMissingNumerator=function(){return{type:"FractionMissingNumerator"}},n.FractionMissingDenominator=function(){return{type:"FractionMissingDenominator"}},n.FractionEmpty=function(){return{type:"FractionEmpty"}},n.AdjacentNumbers=function(n){return{type:"AdjacentNumbers",args:n}}});\ndefine(\'core/math/parser/expression-token-tables\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.allTokenTypes=e.rightTable=e.leftTable=e.escapedSymbolTable=e.symbolTable=e.commandTable=void 0;e.commandTable={"\\\\lt":"<","\\\\gt":">","\\\\le":"<=","\\\\ge":">=","\\\\leq":"<=","\\\\geq":">=","\\\\ldots":"...","\\\\sim":"~","\\\\cdot":"*","\\\\times":"*","\\\\div":"/","\\\\ln":"Ln","\\\\log":"Log","\\\\int":"Int","\\\\sum":"Sum","\\\\prod":"Prod","\\\\backslash":"Err"};for(var a=0,l=["sin","cos","tan","cot","sec","csc"];a<l.length;a++){var o=l[a];e.commandTable["\\\\"+o]="Trig",e.commandTable["\\\\"+o+"h"]="Trig",e.commandTable["\\\\arc"+o]="Trig",e.commandTable["\\\\arc"+o+"h"]="Trig",e.commandTable["\\\\ar"+o+"h"]="Trig"}e.symbolTable={"+":"+","-":"-","*":"*","/":"/","!":"!","(":"(",")":")","[":"[","]":"]",",":",","...":"...",":":":","=":"=",">=":">=","<=":"<=",">":">","<":"<","~":"~",".":"."},e.escapedSymbolTable={"\\\\{":"\\\\{","\\\\}":"\\\\}","\\\\%":"%"},e.leftTable={"|":"(|","\\\\{":"\\\\{","[":"[","(":"("},e.rightTable={"|":"|)","\\\\}":"\\\\}","]":"]",")":")"},e.allTokenTypes=Object.keys({"+":!0,"-":!0,"*":!0,"/":!0,"!":!0,"(":!0,")":!0,"\\\\{":!0,"\\\\}":!0,"(|":!0,"|)":!0,"[":!0,"]":!0,",":!0,"...":!0,":":!0,"=":!0,">":!0,"<":!0,">=":!0,"<=":!0,"~":!0,"%":!0,".":!0,Letter:!0,Decimal:!0,Cmd:!0,Differential:!0,End:!0,Trig:!0,Ln:!0,Log:!0,Int:!0,Sum:!0,Prod:!0,Err:!0})});\ndefine(\'core/math/parser/expression-lexer\',["require","exports","./expression-token-tables","./input-span","./input-span","./surface-node"],function(require,e,E,I,n,d){"use strict";function v(e,n,r,t,a,i,s,p){return{opts:e,input:n,prevSpan:r,startIndex:t,endIndex:a,token:i,mode:s,parent:p}}function D(e,n,r){return{type:e,span:n,val:r}}function s(e,n,r,t,a,i){var s=n.args;if(r>s.length&&i)return c(i,t);var p=function e(n,r,t){var a=n.args;if(r>=a.length){var i=I.emptySpanAt(n.span.input,n.span.end);return A(r,D("End",i,""))}var s=n.args[r];switch(s.type){case"Sqrt":case"Frac":case"SupSub":return A(r,s);case"Letter":if(!t||"integral"!==t.type)return A(r,s);if("d"!=s.val)return A(r,s);var p=e(n,r+1,t),o=p.endIndex,u=p.token;if("Letter"!==u.type&&"Cmd"!==u.type)return A(r,s);var l={type:"Differential",span:I.joinSpans(s.span,u.span),val:u.val};return A(o,l);case"LeftRight":var f=s.left,v=E.leftTable[f.val]||"Err",c=I.joinSpans(s.span,f.span);return A(r,D(v,c,f.val));case"OperatorName":for(var g=[],d=0,m=s.arg.args;d<m.length;d++){var y=m[d];if("Letter"!==y.type)return A(r,D("Err",s.span,I.slice(s.arg.span)));g.push(y.val)}var S="\\\\"+g.join(""),h=E.commandTable[S]||"Cmd";return A(r,D(h,s.span,S));case"Cmd":var b=E.commandTable[s.val]||"Cmd";return A(r,D(b,s.span,s.val));case"EscapedSymbol":var x=E.escapedSymbolTable[s.val]||"Err";return A(r,D(x,s.span,s.val));case"Symbol":if(T(s))return w(n,r);var k=E.symbolTable[s.val]||"Err";return A(r,D(k,s.span,s.val));case"Digit":return L(n,r);default:var j=s;throw"Unexpected atom "+j.type+"."}}(n,r=S(s,r),a),o=p.token,u=p.endIndex;if("End"===o.type&&i){var l=i.input.args[i.startIndex];if("LeftRight"===l.type){var f=l.right;return v(e,n,t,r,u,D(E.rightTable[f.val]||"Err",f.span,f.val),a,i)}}else"Int"===o.type?a=g(a):"Differential"===o.type&&(a=m(a));return v(e,n,t,r,u,o,a,i)}function c(e,n){var r=e.input,t=e.endIndex,a=e.mode,i=e.parent;return s(e.opts,r,t+1,n,a,i)}function r(e){return e.token}function g(e){return{type:"integral",parent:e}}function m(e){if(!e||"integral"!==e.type)throw new Error("Programming Error: expected lexer to be in integral mode.");return e.parent}function A(e,n){return{token:n,endIndex:e}}function w(e,n){var r=e.args[n];if("Symbol"!==r.type||"."!==r.val)throw new Error("Programming Error: expected \'.\'");if(n+2<e.args.length&&T(e.args[n+1])&&T(e.args[n+2])){var t=I.joinSpans(r.span,e.args[n+2].span);return A(n+2,D("...",t,I.slice(t)))}var a=S(e.args,n+1);return a<e.args.length&&"Digit"===e.args[a].type?L(e,n):A(n,D(E.symbolTable[r.val]||"Err",r.span,r.val))}function L(e,n){var r=function(e,n){for(var r=e.args,t=r[n].span,a=[];n<r.length;n++){var i=S(r,n);if(i>=r.length)break;if("Digit"!==(c=r[i]).type)break;n=i,a.push(c.val)}if((n=S(r,n))>=r.length)return;var s=r[n];if("Frac"!==s.type)return;for(var p=[],o=[],u=0,l=s.num.args;u<l.length;u++){if(!y(c=l[u])){if("Digit"!==c.type)return;p.push(c.val)}}for(var f=0,v=s.den.args;f<v.length;f++){var c;if(!y(c=v[f])){if("Digit"!==c.type)return;o.push(c.val)}}var g=I.joinSpans(t,s.span);return A(n,d.MixedNumber(g,a.join(""),p.join(""),o.join("")))}(e,n);if(r)return r;for(var t=e.args,a=e.args[n].span,i=[],s=!1,p=!1;n<t.length;n++){var o=S(t,n);if(o>=t.length)break;var u=t[o];if("Digit"===u.type)n=o,s=!0,i.push(u.val);else{if(p||!T(u))break;if(o+1<t.length&&T(e.args[o+1]))break;n=o,p=!0,i.push(".")}}if(!s)throw new Error("Programming Error: decimals must have at least one digit.");return A(n-1,D("Decimal",I.joinSpans(a,e.args[n-1].span),i.join("")))}function y(e){switch(e.type){case"Sqrt":case"Frac":case"SupSub":case"LeftRight":case"OperatorName":case"Symbol":case"Letter":case"Digit":return;case"Cmd":return"\\\\space"===e.val;case"EscapedSymbol":return"\\\\ "===e.val||"\\\\:"===e.val||"\\\\,"===e.val||"\\\\;"===e.val;default:throw"Unexpected atom "+e.type+"."}}function S(e,n){for(;n<e.length&&y(e[n]);)n+=1;return n}function T(e){return"Symbol"===e.type&&"."===e.val}Object.defineProperty(e,"__esModule",{value:!0}),e.didAdvance=e.isDone=e.isAt=e.endIntegral=e.beginIntegral=e.peek=e.advance=e.lexAt=e.lex=e.emptySpanAtState=e.joinState=e.spanStates=e.Span=void 0,Object.defineProperty(e,"Span",{enumerable:!0,get:function(){return n.Span}}),e.spanStates=function(e,n){return I.joinSpans(e.token.span,n.prevSpan)},e.joinState=function(e,n){return I.joinSpans(e,n.prevSpan)},e.emptySpanAtState=function(e){return I.emptySpanAt(e.token.span.input,e.token.span.start)},e.lex=function(e,n){return s(n,e,0,I.emptySpanAt(e.span.input,e.span.start),void 0,void 0)},e.lexAt=s,e.advance=function(e){var n=e.input.args[e.startIndex],r=e.token.span;return n&&"LeftRight"===n.type?s(e.opts,n.arg,0,r,e.mode,e):c(e,r)},e.peek=r,e.beginIntegral=g,e.endIntegral=m,e.isAt=function(e,n){return r(e).type===n},e.isDone=function(e){return e.startIndex>=e.input.args.length},e.didAdvance=function(e,n){return n.token.span.start>e.token.span.start}});\ndefine(\'core/math/parser/precspec\',["require","exports","./expression-token-tables"],function(require,e,o){"use strict";function p(e,r){for(var t=0,n=o.allTokenTypes;t<n.length;t++){var i=n[t];if(void 0===r[i])throw new Error("Programming Error: token "+i+" must be a assigned a "+e+" precedence")}}function s(e,r,t,n){if(void 0!==r[t])throw new Error("Programming Error: duplicate "+e+" entry for token "+t+".");r[t]=n}Object.defineProperty(e,"__esModule",{value:!0}),e.precSpec=e.ra=e.la=e.r=e.l=e.initial=void 0,e.initial=function(e){return{type:"initial",tokenType:e}},e.l=function(e){return{type:"l",tokenType:e}},e.r=function(e){return{type:"r",tokenType:e}},e.la=function(e){return{type:"la",tokenType:e}},e.ra=function(e){return{type:"ra",tokenType:e}},e.precSpec=function(e){for(var t={},r={},n={},i=0;i<e.length;i++)for(var o=0,a=e[i];o<a.length;o++){var c=a[o],l=c.type,u=c.tokenType;switch(l){case"initial":s("initial",t,u,i);break;case"l":s("left",r,u,i);break;case"r":s("right",n,u,i);break;case"la":s("left",r,u,i),s("right",n,u,i);break;case"ra":s("left",r,u,i),s("right",n,u,i-1)}}function f(e){return n[e]}return p("left",r),p("right",n),{rightPrec:f,leftPrec:function(e){return r[e]},initialPrec:function(e){var r=t[e];return void 0===r?f(e):r}}}});\ndefine(\'core/math/parser/expression-parser\',["require","exports","core/math/errormsg","tslib","./surface-node","./surface-node-error","./input-span","./expression-lexer","./precspec"],function(require,e,z,a,H,K,p,Q,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parse=void 0;var t=[[r.initial("("),r.la(")"),r.initial("\\\\{"),r.la("\\\\}"),r.r("["),r.la("]"),r.initial("(|"),r.la("|)"),r.la("Differential"),r.la("End")],[r.ra("...")],[r.la(",")],[r.ra(":")],[r.la("="),r.la(">"),r.la("<"),r.la(">="),r.la("<="),r.la("~")],[r.la("+"),r.la("-")],[r.la("*"),r.la("/"),r.la("Decimal"),r.la("MixedNumber"),r.la("Letter"),r.la("Cmd"),r.la("%"),r.r("("),r.la("\\\\{"),r.la("(|"),r.la("Frac"),r.la("Sqrt"),r.la("Trig"),r.la("Ln"),r.la("Log"),r.ra("Int"),r.ra("Sum"),r.ra("Prod")],[r.initial("+"),r.initial("-")],[r.la("!")],[r.la("SupSub")],[r.l("["),r.la(".")],[r.l("(")],[r.la("Err")]],n=r.precSpec(t),V=n.leftPrec,k=n.rightPrec,X=n.initialPrec,s={trailingComma:!1};function Y(e,r){var t=Q.lex(e,r);if(Q.isDone(t))return K.Err(Q.spanStates(t,t),K.EmptyGroup());var a=$(t,0),n=a.state,s=a.tree;return"Err"===s.type||Q.isDone(n)?s:pe(n).tree}function Z(e,r){return{state:e,tree:r}}function $(e,r){var t,a,n=e,s=function(e){var r,t,a,n,s,i,p,u,c,o,l,d,y,E,f,v,S,m,g,b=e,M=Q.peek(e),P=X(M.type);switch(M.type){case"+":if(e=Q.advance(e),r=$(e,P),e=r.state,"Err"!==(g=r.tree).type)return Z(e,H.Pos(Q.spanStates(b,e),[g]));if(!ee(g.error))return Z(e,g);var h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingRight(M.val));return Z(e,x);case"-":if(e=Q.advance(e),t=$(e,P),e=t.state,"Err"!==(g=t.tree).type)return Z(e,H.Neg(Q.spanStates(b,e),[g]));if(!ee(g.error))return Z(e,g);h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingRight(M.val));return Z(e,x);case"(":return ne(e);case"\\\\{":return e=Q.advance(e),Q.isAt(e,"\\\\}")?Z(e=Q.advance(e),H.EmptyPiecewise(Q.spanStates(b,e))):(a=$(e,P),e=a.state,g=a.tree,n=ie(b,e,g,"\\\\{","\\\\}"),e=n.state,"Err"===(g=n.tree).type?Z(e,g):Z(e,H.Piecewise(Q.spanStates(b,e),[g])));case"[":return e=Q.advance(e),Q.isAt(e,"]")?Z(e=Q.advance(e),H.List(Q.spanStates(b,e),[])):(s=$(e,P),e=s.state,g=s.tree,i=ie(b,e,g,"[","]"),e=i.state,"Err"===(g=i.tree).type?Z(e,g):Z(e,H.List(Q.spanStates(b,e),[g])));case"(|":if(e=Q.advance(e),Q.isAt(e,"|)")){e=Q.advance(e);h=Q.spanStates(b,e);return Z(e,K.Err(h,K.EmptyPipe()))}return p=$(e,P),e=p.state,g=p.tree,u=ie(b,e,g,"(|","|)"),e=u.state,"Err"===(g=u.tree).type?Z(e,g):Z(e,H.Pipes(Q.spanStates(b,e),[g]));case"Frac":if(e.opts.disallowFrac)throw z.fractionsUnavailable();e=Q.advance(e);var D=Y(M.num,e.opts),A=Y(M.den,e.opts);if("Err"===D.type&&"EmptyGroup"===D.error.type&&"Err"===A.type&&"EmptyGroup"===A.error.type){h=Q.spanStates(b,e),x=K.Err(h,K.FractionEmpty());return Z(e,x)}if("Err"===D.type&&"EmptyGroup"===D.error.type){h=Q.spanStates(b,e),x=K.Err(h,K.FractionMissingNumerator());return Z(e,x)}if("Err"===A.type&&"EmptyGroup"===A.error.type){h=Q.spanStates(b,e),x=K.Err(h,K.FractionMissingDenominator());return Z(e,x)}if("Err"===D.type)return Z(e,D);if("Err"===A.type)return Z(e,A);if(H.isDerivative(D,A)&&"Juxt"===A.type){var j=A.args[1],U=void 0;if(c=$(e,V("*")-1),e=c.state,"Err"!==(U=c.tree).type)return Z(e,H.Derivative(Q.spanStates(b,e),[j,U]));if(ee(U.error)){h=Q.spanStates(b,e);return Z(e,K.Err(h,K.DerivativeMissingBody()))}return Z(e,U)}return Z(e,H.Frac(Q.spanStates(b,e),[D,A]));case"Sqrt":if(e=Q.advance(e),M.optArg){var C=Y(M.optArg,e.opts);return"Err"===C.type?"EmptyGroup"===C.error.type?Z(e,K.Err(C.span,K.EmptyRadicalIndex())):Z(e,C):"Err"===(k=Y(M.arg,e.opts)).type?"EmptyGroup"===k.error.type?Z(e,K.Err(k.span,K.EmptyRadical())):Z(e,k):Z(e,H.Nthroot(Q.spanStates(b,e),[C,k]))}var k;return"Err"===(k=Y(M.arg,e.opts)).type?"EmptyGroup"===k.error.type?Z(e,K.Err(k.span,K.EmptyRadical())):Z(e,k):Z(e,H.Sqrt(Q.spanStates(b,e),[k]));case"Trig":case"Ln":e=Q.advance(e);var w=H.Cmd(Q.spanStates(b,e),M.val),B=0;if("SupSub"===(R=Q.peek(e)).type){if(e=Q.advance(e),R.sub){h=Q.spanStates(b,e),x=K.Err(h,K.UnexpectedSubscript(w.val));return Z(e,x)}if(O=te(R,e.opts)){if("Err"===O.type)return Z(e,O);w=H.Superscript(Q.spanStates(b,e),[w,O])}B=R.nprimes}if(I=Q.isAt(e,"(")){if(o=ne(e),e=o.state,"Err"===(g=o.tree).type)return Z(e,g);g=H.Call(Q.spanStates(b,e),[w,g.args[0]])}else{if(l=$(e,P-1),e=l.state,"Err"===(g=l.tree).type)return ee(g.error)?Z(e,K.Err(Q.spanStates(b,e),K.FunctionMissingArgument(M.val))):Z(e,g);g=H.ImplicitCall(Q.spanStates(b,e),[w,g])}if(0<B){h=Q.spanStates(b,e);if(!I){x=K.Err(h,K.PrimeWithoutParen());return Z(e,x)}g=H.Prime(h,B,[g])}return Z(e,g);case"Log":e=Q.advance(e);var I,w=H.Cmd(Q.spanStates(b,e),M.val),B=0,L=void 0,O=void 0;if("SupSub"===(R=Q.peek(e)).type&&(e=Q.advance(e),L=re(R,e.opts),O=te(R,e.opts),B=R.nprimes),L&&"Err"===L.type)return Z(e,L);if(O&&"Err"===O.type)return Z(e,O);if(I=Q.isAt(e,"(")){if(d=ne(e),e=d.state,"Err"===(g=d.tree).type)return Z(e,g);g=g.args[0]}else if(y=$(e,P-1),e=y.state,"Err"===(g=y.tree).type)return ee(g.error)?Z(e,K.Err(Q.spanStates(b,e),K.FunctionMissingArgument(M.val))):Z(e,g);var q=L?H.Seq(Q.spanStates(b,e),H.unwrapSeq(g).concat(L)):g,N=L?H.Cmd(Q.spanStates(b,e),"\\\\logbase"):w;if(O&&(N=H.Superscript(Q.spanStates(b,e),[N,O])),g=I?H.Call(Q.spanStates(b,e),[N,q]):H.ImplicitCall(Q.spanStates(b,e),[N,q]),0<B){h=Q.spanStates(b,e);if(!I){x=K.Err(h,K.PrimeWithoutParen());return Z(e,x)}g=H.Prime(h,B,[g])}return Z(e,g);case"Int":e=Q.advance(e);var R=Q.peek(e);if(e=Q.advance(e),"Err"===(G=ae(R,b,e)).type)return"MissingBound"===G.error.type?Z(e,K.Err(G.span,K.IntegralMissingBound())):Z(e,G);O=G.sup,L=G.sub,j=void 0;if(Q.isAt(e,"Differential"))return E=se(e),e=E.state,"Err"===(j=E.tree).type?Z(e,j):Z(e,H.EmptyIntegral(Q.spanStates(b,e),[j,L,O]));if(f=$(e,P),e=f.state,"Err"===(g=f.tree).type)return ee(g.error)?Z(e,K.Err(g.span,K.IntegralMissingBody())):Z(e,g);var F=g;return Q.isAt(e,"Differential")?(v=se(e),e=v.state,"Err"===(j=v.tree).type?Z(e,j):Z(e,H.Integral(Q.spanStates(b,e),[j,L,O,F]))):Z(e,K.Err(Q.spanStates(b,e),K.IntegralMissingDifferential()));case"Sum":e=Q.advance(e);R=Q.peek(e);if(e=Q.advance(e),"Err"===(G=ae(R,b,e)).type)return"MissingBound"===G.error.type?Z(e,K.Err(G.span,K.SumMissingBound())):Z(e,G);O=G.sup,L=G.sub;return S=$(e,P),e=S.state,"Err"===(g=S.tree).type?ee(g.error)?Z(e,K.Err(g.span,K.SumMissingBody())):Z(e,g):Z(e,H.Sum(Q.spanStates(b,e),[g,L,O]));case"Prod":e=Q.advance(e);var G,R=Q.peek(e);if(e=Q.advance(e),"Err"===(G=ae(R,b,e)).type)return"MissingBound"===G.error.type?Z(e,K.Err(G.span,K.ProductMissingBound())):Z(e,G);O=G.sup,L=G.sub;return m=$(e,P),e=m.state,"Err"===(g=m.tree).type?ee(g.error)?Z(e,K.Err(g.span,K.ProductMissingBody())):Z(e,g):Z(e,H.Product(Q.spanStates(b,e),[g,L,O]));case"Cmd":return e=Q.advance(e),g=H.Cmd(Q.spanStates(b,e),M.val),Z(e,g);case"Letter":return e=Q.advance(e),g=H.Letter(Q.spanStates(b,e),M.val),Z(e,g);case"Decimal":e=Q.advance(e);var _=H.Decimal(Q.spanStates(b,e),M.val);if("Decimal"!==(R=e.token).type&&"MixedNumber"!==R.type)return Z(e,_);var T=e;e=Q.advance(e);var h=Q.spanStates(b,e),W="MixedNumber"===R.type?R:H.Decimal(Q.spanStates(T,e),R.val);return Z(e,K.Err(h,K.AdjacentNumbers([_,W])));case"MixedNumber":if(e.opts.disallowFrac)throw z.fractionsUnavailable();if(e=Q.advance(e),"Decimal"!==(R=e.token).type&&"MixedNumber"!==R.type)return Z(e,M);T=e;e=Q.advance(e);h=Q.spanStates(b,e),W="MixedNumber"===R.type?R:H.Decimal(Q.spanStates(T,e),R.val);return Z(e,K.Err(h,K.AdjacentNumbers([M,W])));case"*":case"/":case",":case"=":case">":case"<":case">=":case"<=":case"~":case":":case"...":case"%":case".":e=Q.advance(e);h=Q.spanStates(b,e),x=K.Err(h,K.BinaryOperatorMissingLeft(M.val));return Z(e,x);case"!":e=Q.advance(e);h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingLeft(M.val));return Z(e,x);case"SupSub":e=Q.advance(e);var J="supsub";M.sub?J="subscript":M.sup?J="superscript":0<M.nprimes&&(J="prime");h=Q.spanStates(b,e),x=K.Err(h,K.UnaryOperatorMissingLeft(J));return Z(e,x);case")":case"\\\\}":case"]":case"|)":case"Differential":return pe(e);case"Err":e=Q.advance(e);h=Q.spanStates(b,e),x=K.Err(h,K.UnrecognizedSymbol(M.val));return Z(e,x);case"End":h=Q.spanStates(b,e),x=K.Err(h,K.UnexpectedEnd());return Z(e,x);default:throw"Unexpected token type "+M.type+"."}}(e);if(e=s.state,"Err"===(t=s.tree).type)return Z(e,t);if(!Q.didAdvance(n,e))throw new Error("Programming Error: parseInitial did not advance state.");for(;!Q.isDone(e);){if((!Q.isAt(e,"(")||(a=t,H.isIdentifier(a)||"Prime"===a.type&&H.isIdentifier(a.args[0]))?V(Q.peek(e).type):k("("))<=r)break;var i,p=e;if(e=(i=function(e,r){var t,a,n,s,i,p,u,c,o,l,d,y,E,f,v,S=Q.peek(e),m=k(S.type);switch(S.type){case"+":case"-":case"*":case"/":case"=":case"~":case":":case".":if(e=Q.advance(e),t=$(e,m),e=t.state,"Err"!==(v=t.tree).type)return Z(e,function(e,r,t){switch(e){case"+":return H.Add(r,t);case"-":return H.Sub(r,t);case"*":return H.Mul(r,t);case"/":return H.Div(r,t);case"=":return H.Equals(r,t);case"~":return H.Tilde(r,t);case":":return H.Colon(r,t);case".":return H.Dot(r,t);default:throw"Unexpected token type "+e+"."}}(S.type,Q.joinState(r.span,e),[r,v]));if(ee(v.error)){var g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v);case"%":e=Q.advance(e);var M=Q.peek(e);if("Cmd"!==M.type||"of"!==M.val&&"\\\\of"!==M.val){b=K.Err(S.span,K.PercentMissingOf());return Z(e,b)}if(e=Q.advance(e),a=$(e,m),e=a.state,"Err"!==(v=a.tree).type)return Z(e,H.PercentOf(Q.joinState(r.span,e),[r,v]));if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v);case">=":case"<=":case">":case"<":var P=S.type;if(e=Q.advance(e),n=w(e,P),e=n.state,P=n.symbol,s=$(e,m),e=s.state,"Err"===(v=s.tree).type){if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v)}for(var h=H.Inequality(Q.joinState(r.span,e),P,[r,v]),x=[],D=Q.peek(e).type;">="===D||"<="===D||">"===D||"<"===D;){var A=e;if(P=D,e=Q.advance(e),i=w(e,P),e=i.state,P=i.symbol,p=$(e,m),e=p.state,"Err"===(v=p.tree).type){if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v)}x.push(H.TrailingInequalityPiece(Q.spanStates(A,e),P,[v])),D=Q.peek(e).type}return x.length?Z(e,H.InequalityChain(Q.joinState(r.span,e),h,x)):Z(e,h);case"!":return Z(e=Q.advance(e),H.Bang(Q.joinState(r.span,e),[r]));case"[":A=e;if(e=Q.advance(e),Q.isAt(e,"]")){e=Q.advance(e);g=Q.spanStates(A,e);return Z(e,K.Err(g,K.EmptySquareBracket()))}return u=$(e,m),e=u.state,v=u.tree,c=ie(A,e,v,"[","]"),e=c.state,"Err"===(v=c.tree).type?Z(e,v):Z(e,H.Index(Q.joinState(r.span,e),[r,v]));case"Sqrt":case"Frac":case"Letter":case"Cmd":case"Trig":case"Ln":case"Log":case"Sum":case"Int":case"Prod":case"Decimal":case"MixedNumber":case"\\\\{":case"(|":return o=$(e,m),e=o.state,"Err"===(v=o.tree).type?Z(e,v):Z(e,H.Juxt(Q.joinState(r.span,e),[r,v]));case"(":if(H.isIdentifier(r)){if(l=ne(e),e=l.state,"Err"===(v=l.tree).type)return Z(e,v);g=Q.joinState(r.span,e);return Z(e,H.Call(g,[r,v.args[0]]))}if("Prime"===r.type&&H.isIdentifier(r.args[0])){if(d=ne(e),e=d.state,"Err"===(v=d.tree).type)return Z(e,v);g=Q.joinState(r.span,e);return Z(e,H.Prime(g,r.nprimes,[H.Call(g,[r.args[0],v.args[0]])]))}return y=$(e,m),e=y.state,"Err"===(v=y.tree).type?Z(e,v):Z(e,H.Juxt(Q.joinState(r.span,e),[r,v]));case"SupSub":e=Q.advance(e);var j=B(S),U=te(S,e.opts);if(j&&"Err"===j.type)return Z(e,j);if(U&&"Err"===U.type)return Z(e,U);if(j&&(r=H.Subscript(Q.joinState(r.span,e),[r,j])),U&&(r=H.Superscript(Q.joinState(r.span,e),[r,U])),0<S.nprimes){g=Q.joinState(r.span,e);if(!H.isIdentifier(r)){b=K.Err(g,K.UnexpectedPrime());return Z(e,b)}r=H.Prime(g,S.nprimes,[r])}return Z(e,r);case",":for(var C=[r];Q.isAt(e,",")&&(e=Q.advance(e),!Q.isAt(e,"..."))&&(!e.opts.trailingComma||!function(e){return Q.isAt(e,")")||Q.isAt(e,"]")||Q.isAt(e,"\\\\}")}(e));){if(E=$(e,m),e=E.state,"Err"===(v=E.tree).type){if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v)}C.push(v)}return Z(e,H.Seq(Q.joinState(r.span,e),C));case"...":if(e=Q.advance(e),Q.isAt(e,",")&&(e=Q.advance(e)),m>=V(Q.peek(e).type))return Z(e,H.Ellipsis(Q.joinState(r.span,e),[r,H.EmptyRangeEnd(Q.emptySpanAtState(e))]));if(f=$(e,m),e=f.state,"Err"!==(v=f.tree).type)return Z(e,H.Ellipsis(Q.joinState(r.span,e),[r,v]));if(ee(v.error)){g=Q.joinState(r.span,e),b=K.Err(g,K.BinaryOperatorMissingRight(S.val));return Z(e,b)}return Z(e,v);case"]":case")":case"\\\\}":case"|)":case"Differential":return pe(e);case"Err":return $(e,m);case"End":g=Q.spanStates(e,e),b=K.Err(g,K.UnexpectedEnd());return Z(e,b);default:throw"Unexpected token type "+S.type+"."}}(e,t)).state,"Err"===(t=i.tree).type)return Z(e,t);if(!Q.didAdvance(p,e))throw new Error("Programming Error: parseSuccessor did not advance state.")}return Z(e,t)}function ee(e){return"UnexpectedDifferential"===e.type||"UnexpectedCloseDelimiter"===e.type||"UnexpectedEnd"===e.type||"BinaryOperatorMissingLeft"===e.type}function w(e,r){if(!Q.isAt(e,"="))return{state:e,symbol:r};switch(r){case">":e=Q.advance(e),r=">=";break;case"<":e=Q.advance(e),r="<="}return{state:e,symbol:r}}function re(e,r){if(e.sub){var t=Y(e.sub,r);return"Err"===t.type&&"EmptyGroup"===t.error.type?K.Err(t.span,K.EmptySubscript()):t}}function B(e){if(e.sub){var r=e.sub;if(0===r.args.length)return K.Err(r.span,K.EmptySubscript());for(var t=[],a=0,n=r.args;a<n.length;a++){var s=n[a];if("Digit"!==s.type&&"Letter"!==s.type){var i=s.span;return K.Err(i,K.InvalidSubscript(p.slice(i)))}t.push(s.val)}return H.Alphanumeric(r.span,t.join(""))}}function te(e,r){if(e.sup){var t=Y(e.sup,r);return"Err"===t.type?"EmptyGroup"===t.error.type?K.Err(t.span,K.EmptySuperscript()):t:0<e.nprimes?K.Err(e.span,K.SuperscriptWithPrime()):t}}function ae(e,r,t){if("SupSub"!==e.type){var a=Q.spanStates(r,t);return K.Err(a,K.MissingBound())}if(0<e.nprimes){a=Q.spanStates(r,t);return K.Err(a,K.UnexpectedPrime())}var n=re(e,t.opts),s=te(e,t.opts);if(!n||"Err"===n.type&&"EmptySubscript"===n.error.type||!s||"Err"===s.type&&"EmptySuperscript"===s.error.type){a=Q.spanStates(r,t);return K.Err(a,K.MissingBound())}return"Err"===n.type?n:"Err"===s.type?s:{type:"Bounds",sup:s,sub:n}}function ne(e){var r,t,a,n=e,s=Q.peek(e),i=X(s.type);if(!Q.isAt(e,"("))throw new Error("Programming Error: expected \'(\' at start of parseParen.");if(e=Q.advance(e),Q.isAt(e,")")){var p=H.Seq(Q.emptySpanAtState(e),[]);e=Q.advance(e);var u=Q.spanStates(n,e);return Z(e,H.Paren(u,[p]))}return e=(t=ie(n,e=(r=$(e,i)).state,r.tree,"(",")")).state,"Err"===(a=t.tree).type?Z(e,a):Z(e,H.Paren(Q.spanStates(n,e),[a]))}function se(e){var r=e,t=Q.peek(e);if("Differential"!==t.type)throw new Error("Programming Error: expected differential");e=Q.advance(e);var a=H.Cmd(t.span,t.val),n=Q.peek(e);if("SupSub"===n.type){e=Q.advance(e);var s=Q.spanStates(r,e),i=B(n);if(i){if("Err"===i.type)return Z(e,i);a=H.Subscript(s,[a,i])}if(n.sup)return Z(e,K.Err(s,K.DifferentialWithSuperscript()));if(0<n.nprimes)return Z(e,K.Err(s,K.UnexpectedPrime()))}return Z(e,a)}function ie(e,r,t,a,n){if("Err"===t.type&&"UnexpectedEnd"!==t.error.type)return Z(r,t);if("Err"!==t.type&&Q.isAt(r,n))return Z(r=Q.advance(r),t);var s=Q.spanStates(e,r);return Z(r,K.Err(s,K.MissingCloseDelimiter(a,n)))}function pe(e){var r=e;switch(Q.peek(e).type){case")":e=Q.advance(e);var t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("(",")")));case"]":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("[","]")));case"\\\\}":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("\\\\{","\\\\}")));case"|)":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedCloseDelimiter("|","|")));case"Differential":e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedDifferential()));default:e=Q.advance(e);t=Q.spanStates(r,e);return Z(e,K.Err(t,K.UnexpectedParseError()))}}e.parse=function(e,r){var t=Y(e,r?a.__assign(a.__assign({},s),r):s);return"Err"===t.type&&"EmptyGroup"===t.error.type?K.Err(t.span,K.EmptyInput()):t}});\ndefine(\'core/math/inverses\',[],function(){"use strict";var n={};return["sin","cos","tan","cot","sec","csc","sinh","cosh","tanh","coth","sech","csch"].forEach(function(c){n[c]="arc"+c,n["arc"+c]=c}),n});\ndefine(\'core/math/parser/lower\',["require","exports","core/math/inverses","core/math/errormsg","tslib","./input-span","./surface-node","../maybe-rational"],function(require,e,m,V,a,X,Y,Z){"use strict";function $(e,r){for(var t=[],a=0;a<r.length;a++)t.push(re(e,r[a]));return t}function ee(e){if("Paren"!==e.type)return!1;var r=e.args[0];return"Seq"===r.type&&2===r.args.length}function re(e,r){return e.setInput(te(e,r),r.span)}function te(e,r){var t=e.nodes;switch(r.type){case"Pos":return te(e,r.args[0]);case"Neg":for(var a=-1,n=r.args[0];;)if("Pos"===n.type||"Paren"===n.type&&!ee(n))n=n.args[0];else{if("Neg"!==n.type)break;n=n.args[0],a*=-1}switch(n.type){case"Decimal":var s=ue(n);return t.Constant(-1===a?Z.neg(s):s);case"MixedNumber":s=oe(n);return t.MixedNumber(-1===a?Z.neg(s):s);default:return-1===a?t.Negative([re(e,n)]):te(e,n)}case"Add":return t.Add($(e,r.args));case"Sub":return t.Subtract($(e,r.args));case"Mul":return t.Multiply($(e,r.args));case"Div":return t.Divide($(e,r.args));case"Bang":var i=r.args[0];return"Call"===i.type?t.FunctionFactorial($(e,i.args)):t.FunctionCall("\\\\factorial",$(e,r.args));case"PercentOf":return t.PercentOf($(e,r.args));case"Call":return se(e,r);case"ImplicitCall":return function(e){var r=e.args,t=r[0],a=r[1];"Superscript"===t.type&&(t=t.args[0]);if("Cmd"===t.type&&"logbase"===t.val&&"Seq"===a.type&&2===a.args.length){if(!le(a.args[0]))throw V.badImplicitCall("log")}else if(!le(a)){if("Cmd"===t.type)throw V.badImplicitCall(t.val);throw V.parseError()}}(r),se(e,r);case"Dot":var c=r.args[1],u=$(e,r.args),o=u[0],p=u[1];if(de(c)){var l=X.emptySpanAt(c.span.input,c.span.end),d=e.setInput(ge(e),l);p=e.setInput(t.SeededFunctionCall(p,[d]),c.span)}else if("Letter"===c.type)switch(c.val){case"x":return t.OrderedPairAccess([o,t.Constant(1)]);case"y":return t.OrderedPairAccess([o,t.Constant(2)])}return t.DotAccess([o,p]);case"Prime":var g=r.args[0];if("Call"!==g.type)throw"ImplicitCall"===g.type?V.primeWithoutParen():V.unexpectedPrime();var y=g.args,f=y[0],m=y[1],v=Y.unwrapSeq(m).length;if("Cmd"===f.type&&"logbase"===f.val){if(2!==v)throw V.primedFunctionArity()}else if(1!==v)throw V.primedFunctionArity();return t.Prime(r.nprimes,$(e,r.args));case"Index":var h=r.args,w=h[0],S=h[1];if("Seq"===S.type)return t.ListAccess([te(e,w),t.List($(e,S.args))]);if("Ellipsis"!==S.type)return ie(S)?t.ListAccess([te(e,w),ce(e,S)]):t.ListAccess($(e,r.args));var b=S.args,x=b[0],C=b[1];return t.ListAccess([te(e,w),t.Range([t.List($(e,Y.unwrapSeq(x))),t.List("EmptyRangeEnd"===C.type?[]:$(e,Y.unwrapSeq(C)))])]);case"Paren":var q=r.args[0];return"Seq"===q.type?t.OrderedPair($(e,q.args)):te(e,q);case"List":if(0===r.args.length)return t.List([]);var E=r.args[0];if("Ellipsis"!==E.type)return t.List($(e,Y.unwrapSeq(E)));var I=E.args,x=I[0],C=I[1];return t.Range([t.List($(e,Y.unwrapSeq(x))),t.List($(e,Y.unwrapSeq(C)))]);case"Pipes":return t.FunctionCall("\\\\abs",$(e,r.args));case"Subscript":var P=r.args,M=P[0],D=P[1];if(0===D.val.length)throw V.emptySubscript();var L=void 0;switch(M.type){case"Letter":case"Cmd":L=M.val;break;default:throw V.unexpectedSubscript()}return t.Identifier(L+"_"+D.val);case"Superscript":var A=r.args,M=A[0],B=A[1];if("Call"!==M.type||"Seq"===M.args[1].type||function(e){if("Call"!==e.type)return!1;var r=e.args[0];for(;"Superscript"===r.type||"Subscript"===r.type||"Prime"===r.type;)r=r.args[0];return"Cmd"===r.type&&(ae(r.val)||ne(r.val))}(M)){if("Dot"!==M.type)return t.Exponent($(e,r.args));var c=M.args[1],O=$(e,M.args),o=O[0],p=O[1],N=re(e,B);if("Letter"===c.type)switch(c.val){case"x":return t.Exponent([t.OrderedPairAccess([o,t.Constant(1)]),N]);case"y":return t.Exponent([t.OrderedPairAccess([o,t.Constant(2)]),N])}else if("Call"===c.type){if("Letter"===(f=c.args[0]).type)switch(f.val){case"x":return t.Multiply([t.OrderedPairAccess([o,t.Constant(1)]),t.Exponent([re(e,c.args[1]),N])]);case"y":return t.Exponent([t.OrderedPairAccess([o,t.Constant(2)]),t.Exponent([re(e,c.args[1]),N])])}}return t.DotAccessExponent([o,p,N])}return t.FunctionExponent($(e,[M.args[0],M.args[1],B]));case"Sqrt":return t.FunctionCall("sqrt",$(e,r.args));case"Nthroot":return t.FunctionCall("nthroot",$(e,[r.args[1],r.args[0]]));case"Frac":return t.Divide($(e,r.args));case"Derivative":var F=$(e,r.args);if(!Y.isIdentifier(r.args[0]))throw V.parseError();return t.Derivative(F[0],[F[1]]);case"Integral":var R=r.args,F=$(e,[T=R[0],R[1],k=R[2],W=R[3]]);return t.Integral(F);case"EmptyIntegral":var U=$(e,r.args),T=U[0],_=U[1],k=U[2],W=t.Constant(Z.maybeRational(1,1));return t.Integral([T,_,k,W]);case"Sum":var j=r.args,z=j[0],H=j[1],k=j[2];if("Equals"!=H.type)throw V.incorrectSumLowerBound();if(!Y.isIdentifier(H.args[0]))throw V.incorrectSumLowerBound();var J=re(ye(e,(F=$(e,[H.args[0],H.args[1],k]))[0]),z);return t.Sum(F.concat(J));case"Product":var G=r.args,z=G[0],K=G[1],k=G[2];if("Equals"!=K.type)throw V.incorrectProductLowerBound();if(!Y.isIdentifier(K.args[0]))throw V.incorrectProductLowerBound();J=re(ye(e,(F=$(e,[K.args[0],K.args[1],k]))[0]),z);return t.Product(F.concat(J));case"Juxt":return t.Multiply($(e,r.args));case"Letter":return t.Identifier(r.val);case"Cmd":var Q=r.val;if("ans"===Q){if(void 0===e.currentIndex)throw V.badAnsContext();return t.Ans("ans_{"+(e.currentIndex-1)+"}")}if("approx"===Q)throw V.unrecognizedSymbol(Q);return t.Identifier(Q);case"Decimal":return t.Constant(ue(r));case"MixedNumber":return t.MixedNumber(oe(r));case"Piecewise":return function(e,r){var t,a=e.nodes,n=r.args[0],s=Y.unwrapSeq(n),i=[];e:for(t=0;t<s.length;t++){var c=s[t];switch(c.type){case"Colon":var u=c.args,o=u[0],p=u[1];if(!ie(o))throw V.colonMissingCondition();i.push({condition:ce(e,o),if_expr:re(e,p)});break;case"Equals":case"Inequality":case"InequalityChain":i.push({condition:ce(e,c),if_expr:a.Constant(Z.maybeRational(1,1))});break;default:break e}}if(0===t)throw V.piecewiseMissingCondition();if(t<s.length-1)throw V.piecewisePartMissingCondition();var l=t===s.length-1?re(e,s[t]):a.Constant(NaN);if(!a.Piecewise.chain)throw V.featureUnavailable();return a.Piecewise.chain(i,l)}(e,r);case"EmptyPiecewise":if(!t.Piecewise.empty)throw V.featureUnavailable();return t.Piecewise.empty();case"Equals":throw V.unexpectedSymbol("=");case"Inequality":case"InequalityChain":throw V.unexpectedInequality();case"Tilde":throw V.unexpectedSymbol("~");case"Seq":throw V.unexpectedSymbol(",");case"Colon":throw V.unexpectedSymbol(":");case"Ellipsis":throw V.unexpectedSymbol("...");case"EmptyRangeEnd":throw V.invalidHalfEmptyRange();case"Err":throw function(e){switch(e.type){case"UnexpectedParseError":case"MissingBound":case"EmptyGroup":case"UnexpectedDifferential":case"UnexpectedEnd":return V.parseError();case"InvalidOperatorName":return V.invalidOperatorName();case"UnexpectedCloseDelimiter":case"MissingCloseDelimiter":return V.mismatchedBraces(e.open,e.close);case"UnrecognizedSymbol":return"."===e.val?V.unexpectedSymbol(e.val):V.unrecognizedSymbol(e.val);case"EmptyInput":return V.blankExpression();case"BinaryOperatorMissingRight":case"BinaryOperatorMissingLeft":return V.binaryOperatorMissingOperand("%"===e.val?"% of":e.val);case"UnaryOperatorMissingLeft":return V.unaryOperatorMissingLeft(e.val);case"UnaryOperatorMissingRight":return V.unaryOperatorMissingRight(e.val);case"UnexpectedSubscript":return V.cannotSubscript(e.base);case"PercentMissingOf":return V.percentMissingOf();case"SumMissingBound":return V.sumMissingBound();case"ProductMissingBound":return V.productMissingBound();case"IntegralMissingBound":return V.integralMissingBound();case"SumMissingBody":return V.sumMissingBody();case"ProductMissingBody":return V.productMissingBody();case"IntegralMissingBody":return V.integralMissingBody();case"DerivativeMissingBody":return V.derivativeMissingBody();case"IntegralMissingDifferential":return V.integralMissingDifferential();case"DifferentialWithSuperscript":return V.differentialWithSuperscript();case"FractionMissingNumerator":return V.fractionMissingNumerator();case"FractionMissingDenominator":return V.fractionMissingDenominator();case"FractionEmpty":return V.fractionEmpty();case"EmptySuperscript":return V.emptySuperscript();case"EmptySubscript":return V.emptySubscript();case"InvalidSubscript":return V.invalidSubscript(e.val);case"SuperscriptWithPrime":return V.superscriptWithPrime();case"PrimeWithoutParen":return V.primeWithoutParen();case"UnexpectedPrime":return V.unexpectedPrime();case"EmptyRadical":return V.emptyRadical();case"EmptyRadicalIndex":return V.emptyRadicalIndex();case"EmptySquareBracket":return V.emptySquareBracket();case"EmptyPipe":return V.emptyPipe();case"FunctionMissingArgument":return V.wrongArity(e.val,1,0);case"AdjacentNumbers":return V.adjacentNumbers(pe(e.args[0]),pe(e.args[1]));default:throw"Unexpected surface node "+e.type+"."}}(r.error);default:throw"Unexpected surface node "+r.type+"."}}function ae(e){return m.hasOwnProperty(e)}function ne(e){return"ln"===e||"log"===e||"logbase"===e}function se(e,r){var t,a,n=e.nodes,s=r.args,i=s[0],c=s[1],u=re(e,i),o=$(e,Y.unwrapSeq(c));if(de(i)){var p=X.emptySpanAt(c.span.input,c.span.start),l=e.setInput(ge(e),p);return n.SeededFunctionCall(u,[l].concat(o))}if(Y.isIdentifier(i))return n.FunctionCall(u,o);if("Superscript"===i.type){var d=i.args,g=d[0],y=d[1];if("Cmd"===g.type){var f=g.val;if(ae(f)||ne(f)){if("Decimal"===(a=y).type&&"2"===a.val)return n.Exponent([n.FunctionCall(f,o),re(e,y)]);if("Neg"===(t=y).type&&"Decimal"===(t=t.args[0]).type&&"1"===t.val&&void 0!==m[f])return n.FunctionCall(m[f],o);throw ae(f)?V.badTrigExponent(f):V.badLogExponent("logbase"===f?"log":f)}}}return n.Multiply([u,re(e,c)])}function ie(e){return"Equals"===e.type||"Inequality"===e.type||"InequalityChain"===e.type}function ce(e,r){var t=e.nodes;switch(r.type){case"Equals":return t.Comparator["="]($(e,r.args));case"Inequality":return t.Comparator[r.symbol]($(e,r.args));case"InequalityChain":if(1<r.chain.length)throw V.inequalityChainTooLong();var a=r.first,n=a.symbol,s=a.args,i=s[0],c=s[1],u=r.chain[0],o=u.symbol,p=u.args[0],l=X.emptySpanAt(r.span.input,r.span.start);return t.And([ce(e,Y.Inequality(l,n,[i,c])),ce(e,Y.Inequality(l,o,[c,p]))]);default:throw V.parseError()}}function ue(e){return Z.fromDecimalString(e.val)}function oe(e){var r=Z.fromDecimalString(e.whole),t=Z.fromDecimalString(e.num),a=Z.fromDecimalString(e.den);return Z.add(r,Z.div(t,a))}function pe(e){switch(e.type){case"Decimal":return e.val;case"MixedNumber":return e.whole+" "+e.num+"/"+e.den;default:throw new Error("Unexpected node type "+e.type)}}function le(e){switch(e.type){case"Letter":case"Decimal":case"MixedNumber":case"Cmd":case"EmptyPiecewise":return!0;case"Neg":for(var r=e.args[0];;)if("Pos"===r.type||"Paren"===r.type&&!ee(r))r=r.args[0];else{if("Neg"!==r.type)break;r=r.args[0]}return"Decimal"===r.type||"MixedNumber"===r.type;case"Pos":case"Paren":return le(e.args[0]);case"Juxt":case"Mul":case"Div":return le(e.args[0])&&le(e.args[1]);case"Subscript":return le(e.args[0]);case"Superscript":case"Frac":case"Add":case"Sub":return le(e.args[0])&&le(e.args[1]);case"Piecewise":return"Equals"===(r=e.args[0]).type||"Inequality"===r.type||"InequalityChain"===r.type;case"Call":var t=e.args,a=t[0],n=t[1];return Y.isIdentifier(a)||Y.isSuperscriptedIdentifier(a)?!1:le(a)&&le(n);case"Derivative":case"Sqrt":case"Nthroot":case"Pipes":case"Bang":return!1;case"Neg":case"Equals":case"Inequality":case"InequalityChain":case"Tilde":case"ImplicitCall":case"Index":case"List":case"Seq":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Colon":case"Ellipsis":case"Dot":case"PercentOf":case"Prime":case"EmptyRangeEnd":return!1;default:throw"Unexpected surface node "+e.type+"."}}function de(e){return"Cmd"===e.type&&("random"===e.val||"shuffle"===e.val)}function ge(e){var r=e.nodes.ExtendSeed("",[e.nodes.Identifier("globalRandomSeed"),e.nodes.Seed(e.nextSeed())]);if(!e.seedExtensions)return r;for(var t=0,a=e.seedExtensions;t<a.length;t++)var n=a[t],r=e.nodes.ExtendSeed("ro",[r,n]);return r}function ye(e,r){var t=e.seedExtensions||[];return a.__assign(a.__assign({},e),{seedExtensions:t.concat(r)})}Object.defineProperty(e,"__esModule",{value:!0}),e.lower=void 0,e.lower=function(e,r){return a=r,(t=e).setInput(function(e,r){var t=e.nodes;switch(r.type){case"Equals":var a=r.args,n=a[0],s=a[1];if("Call"===n.type){var i=n.args,c=i[0],u=i[1],o=Y.unwrapSeq(u);if(Y.isIdentifier(c)&&o.every(Y.isIdentifier))return t.FunctionDefinition(re(e,c),$(e,o),re(e,s))}else if(Y.isIdentifier(n))return t.Assignment(re(e,n),re(e,s));return t.Equation(re(e,n),re(e,s));case"Tilde":var p=$(e,r.args),n=p[0],s=p[1];return t.Regression(n,s);case"Inequality":return ce(e,r);case"InequalityChain":if(1<r.chain.length)throw V.inequalityChainTooLong();var l=r.first,d=l.symbol,g=l.args,y=g[0],f=g[1],m=r.chain[0],v=m.symbol,h=m.args[0];return Y.isIdentifier(f)?t.DoubleInequality([re(e,y),d,re(e,f),v,re(e,h)]):ce(e,r);case"Seq":if(!r.args.every(ee))throw V.malformedPoint();return t.List($(e,r.args));case"Call":var w=r.args,S=w[0],b=w[1];if("Cmd"===S.type)switch(S.val){case"polygon":return t.Polygon($(e,Y.unwrapSeq(b)));case"histogram":return t.Histogram($(e,Y.unwrapSeq(b)));case"cube":case"sphere":case"cone":case"dodecahedron":case"octahedron":case"tetrahedron":return t.Object3D($(e,Y.unwrapSeq(b)),S.val);case"dotplot":return t.DotPlot($(e,Y.unwrapSeq(b)));case"boxplot":return t.BoxPlot($(e,Y.unwrapSeq(b)));case"ttest":return t.TTest($(e,Y.unwrapSeq(b)));case"ittest":return t.IndependentTTest($(e,Y.unwrapSeq(b)));case"stats":return t.Stats($(e,Y.unwrapSeq(b)));default:return te(e,r)}return te(e,r);default:return te(e,r)}}(t,a),a.span);var t,a}});\ndefine(\'core/math/baseparser\',["require","exports","core/math/errormsg","parsenodes","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/parser/lower"],function(require,r,f,m,v,g,h){"use strict";function w(){throw f.featureUnavailable()}function b(r,e){return r.setInputSpan(e),r}Object.defineProperty(r,"__esModule",{value:!0}),r.parse=void 0,r.parse=function(r,e){var a=typeof r;if("string"!=a)throw new Error("Type Error: parse can only be called with strings, got "+JSON.stringify(r)+" of type "+a);var t=m;if((e=e||{}).disabledFeatures){t=Object.create(t);for(var o=0,n=e.disabledFeatures;o<n.length;o++){var i=n[o];if(!t[i])throw new Error("Programming Error: "+i+" cannot be disabled because it is not a parsenode.");t[i]=w}}var s=void 0===e.seedPrefix?"":e.seedPrefix,c=0,d={nodes:t,currentIndex:e.index,setInput:b,nextSeed:function(){var r=s+"::vc"+c;return c+=1,r}},p={};void 0!==e.trailingComma&&(p.trailingComma=e.trailingComma),e.disallowFrac&&(p.disallowFrac=!0);try{var l=v.parse(r),u=g.parse(l,p);return h.lower(d,u)}catch(r){return r instanceof m.Error?r:"string"==typeof r?m.Error(r):f.parseError()}}});\ndefine(\'core/math/rational-arithmetic-sequence\',[\'require\',\'core/math/distance\',\'core/math/builtin\'],function(require){"use strict";var o=require("core/math/distance"),e=require("core/math/builtin");return function(n,t){var r=e.toFraction(n),a=e.toFraction(t);if(o.approx(r.n/r.d,n)&&o.approx(a.n/a.d,t)){var c=e.lcm(r.d,a.d),i=r.n*(c/r.d);return{nstart:i,nstep:a.n*(c/a.d)-i,lcm:c}}}});\ndefine(\'core/math/sliders\',["require","exports"],function(require,e){"use strict";function u(e,a){var r=Math.round(1e6*e)/1e6;return Math.abs(r-e)<a?r:e}function d(e){var a,r=e.target,t=e.hardMin,i=e.hardMax,n=e.step,o=1e-10;if(void 0!==t&&void 0!==i&&(o=Math.min(o,Math.abs(i-t)/1e3)),n&&(o=Math.min(o,n/10)),void 0!==t&&(t=u(t,o)),void 0!==i&&(i=u(i,o)),e.forceSliderToMax&&void 0!==i&&(r=i),i<t)return t;if(r<=t)return t;if(i<=r)return i;n&&(a=void 0!==t?t:0,r=n*Math.round((r-a)/n)+a);var d=u(r,o);return!n&&t!==d&&i!==d||(r=d),r<=t?t:i<=r?i:r}Object.defineProperty(e,"__esModule",{value:!0}),e.computeSoftMax=e.constrainSliderValueLikeEvaluator=e.determineWhichLimitsAreCompatibleWithValue=e.roundToReasonableDecimal=void 0,e.roundToReasonableDecimal=u,e.determineWhichLimitsAreCompatibleWithValue=function(e){var a=!0,r=!0,t=!0;return void 0!==e.hardMin&&e.target<e.hardMin&&(a=!1),void 0!==e.hardMax&&e.target>e.hardMax&&(r=!1),e.step&&d({target:e.target,step:e.step,hardMin:a?e.hardMin:void 0,hardMax:r?e.hardMax:void 0})!==e.target&&(t=!1),{min:a,max:r,step:t}},e.constrainSliderValueLikeEvaluator=d,e.computeSoftMax=function(e){var a,r=e.storedMax,t=e.sliderValue,i=e.hardMin,n=e.step,o=10;return o<r&&(o=r),o<t&&(o=t),o<i&&(o=i),n&&(o=o<=(a=d({target:o,hardMin:i,hardMax:void 0,step:n}))?a:a+n),o}});\ndefine(\'core/math/features/getConcreteTree\',[\'require\',\'parsenodes\',\'core/math/errormsg\',\'core/math/types\',\'core/lib/label\',\'core/math/builtin\',\'core/math/distance\',\'core/math/maybe-rational\',\'core/math/rational-arithmetic-sequence\',\'core/math/sliders\'],function(require){"use strict";var p=require("parsenodes"),d=require("core/math/errormsg"),u=require("core/math/types"),o=require("core/lib/label"),g=require("core/math/builtin"),a=require("core/math/distance"),m=require("core/math/maybe-rational"),y=m.maybeRational,f=require("core/math/rational-arithmetic-sequence"),C=p.List,h=p.Range,i=p.OrderedPair,c=p.ScalarExpression,T=p.Constant,v=p.ExtendSeed,l=p.Multiply,_=p.Identifier,b=p.DummyIndex,w=p.BuiltInFunction,L=require("core/math/sliders");function x(e,t,r){for(var i=[],n=0;n<e.length;n++)i.push(e[n].getConcreteTree(t,r));return i}function e(){return this.getDependencies().concat([this._symbol])}function A(e,t,r,i){var n=i.length-1,s=e[t];if(!s)throw d.unexpectedSymbol(".");if(s.isError)throw s;if(!s.isFunction)throw d.unexpectedSymbol(".");if(!s.allowDotCalls)throw d.illegalDotCall(r);var o,a="random"===t,c="random"===t||"shuffle"===t,h=c?i[1].valueType:i[0].valueType;if((o=h)!==u.Distribution&&!u.isList(o))throw d.dotLHSTypeError("."+r,u.prettyPrint(h));var l=c?1:0;if(n<s.dotMinArity){if(a)throw d.randomArity();throw d.wrongArity("."+r,s.dotMinArity-l,n-l,s.dotMinArityUsageExample)}if(n>s.dotMaxArity){if(a)throw d.randomArity();throw d.wrongArity("."+r,s.dotMaxArity-l,n-l,s.dotMaxArityUsageExample)}}function O(e,t,r,i,n){var s=x(r,i,n);return A(n,e,t,s),n[e].getConcreteInvocationTree(i,n,s,t)}function D(e,t){return!e.isError&&-1===t.indexOf(e.valueType)?d.parseError():e}function P(e,t,r){if(t){var i=t.getDependencies();if(t.isError)r.errors[e]=!0;else if(0<i.length){r.errors[e]=!0;for(var n=0;n<i.length;n++)i[n]===r.exportedSymbol?r.errors.cycle=!0:r.missingVars.push(i[n])}else r.values[e]=+t.asValue();r.valids[e]=isFinite(r.values[e]),r.valids[e]||(r.values[e]=void 0)}else r.valids[e]=!0}function E(e){return e&&e.valueType===u.ListOfNumber&&1===e.length&&e.args?e.args[0]:e}function S(e,t,r,i,n,s){if(i<t.length&&!a.approx(s,t.elementAt(e,i).asValue(),10))throw d.nonArithmeticRange();if(n-i<=r.length&&1<n-i&&!a.approx(s,r.elementAt(e,r.length-n+i).asValue(),10))throw d.nonArithmeticRange()}function s(e,t){for(var r=!1,i=!1,n=!1,s=0;s<e.length;s++){var o=e[s];(o.isList||o.isBroadcast)&&(i=!0,0===o.length&&(n=!0));for(var a=o.getDependencies(),c=0;c<a.length;c++)if(-1!==t.indexOf(a[c])){if(o.isList||o.isBroadcast)return"list"}else r=!0}return i?n?"empty":r?"broadcast":"list":"none"}function F(e){for(var t=[],r=[],i=[],n=0;n<e.length;n++){var s,o=e[n];if(o.isList){for(var a,c=!1,h=0;h<i.length;h++)if(o===i[h]){c=!0,(s=p.DummyIndex(r[h])).valueType=u.elementType(o.valueType),t.push(s);break}c||(a=p.Base.prototype.tmpVar(),r.push(a),i.push(o),(s=p.DummyIndex(a)).valueType=u.elementType(o.valueType),t.push(s))}else o.isBroadcast?(Array.prototype.push.apply(r,o._replacedSymbols),Array.prototype.push.apply(i,o._lists),t.push(o._expression)):t.push(o)}return{replacedArgs:i,concreteArgs:t,replacedSymbols:r}}p.Base.prototype.tryGetConcreteTree=function(){var t;try{t=this.getConcreteTree.apply(this,arguments)}catch(e){t=e instanceof p.Base?e:d.parseError()}return t},p.Base.prototype.getConcreteTree=function(e,t,r){if(this.isConcreteTreeCacheValid(t))return this.__cachedConcreteTree.value;for(var i=this._getConcreteTree(e,t,r),n={},s=this.getCacheKeys().slice();s.length;){var o,a=s.pop();n.hasOwnProperty(a)||(o=t[a],(n[a]=o)&&Array.prototype.push.apply(s,o.getCacheKeys()))}return this.__cachedConcreteTree={keys:n,value:i},i},p.Base.prototype.getCacheKeys=function(){return this.getDependencies()},p.Histogram.prototype.getCacheKeys=e,p.Object3D.prototype.getCacheKeys=e,p.DotPlot.prototype.getCacheKeys=e,p.BoxPlot.prototype.getCacheKeys=e,p.TTest.prototype.getCacheKeys=e,p.IndependentTTest.prototype.getCacheKeys=e,p.Base.prototype.isConcreteTreeCacheValid=function(e){if(!this.__cachedConcreteTree)return!1;for(var t in this.__cachedConcreteTree.keys)if(this.__cachedConcreteTree.keys.hasOwnProperty(t)&&e[t]!==this.__cachedConcreteTree.keys[t])return!1;return!0},p.PercentOf.prototype._getConcreteTree=function(e,t){return p.Divide([p.Multiply(this.args),p.Constant(y(100,1))]).getConcreteTree(e,t)},p.Assignment.prototype._getConcreteTree=function(e,t){return this._expression.getConcreteTree(e,t)},p.Identifier.prototype._getConcreteTree=function(e,t){var r=o.latexToIdentifier(this.getInputString()),i=t[this._symbol];if(i){if(i.isError)throw i;if(i.isFunction)throw d.identifierAsFunction(r);return i.getConcreteTree(e,t)}if(w.hasOwnProperty(this._symbol))throw d.functionUnsupported(r);return p.FreeVariable(this._symbol)},p.Ans.prototype._getConcreteTree=function(e,t){if(void 0===t[this._symbol])throw d.ansUndefined();return _.prototype._getConcreteTree.call(this,e,t)},p.Equation.prototype._getConcreteTree=function(e,t){return this.asComparator().getConcreteTree(e,t)},p.Constant.prototype._getConcreteTree=function(e,t){return new this.constructor(this._constantValue)},p.Seed.prototype._getConcreteTree=function(e,t){return new this.constructor(this._stringValue)},p.Derivative.prototype._getConcreteTree=function(e,t){var r;if(t[this._symbol]){var i=Object.create(t);i[this._symbol]=p.FreeVariable(this._symbol);var n=t[this._symbol].getConcreteTree(e,t);if(n.valueType!==u.Number&&n.valueType!==u.ListOfNumber)throw d.derivativeVariableTypeError(this._symbol,[u.prettyPrint(n.valueType)]);var s={};return s[this._symbol]=n,r=this.args[0].getConcreteTree(e,i),this.typeCheck(e,[r]),r.takeDerivative(this._symbol).substitute(s).getConcreteTree(e,t)}return r=this.args[0].getConcreteTree(e,t),this.typeCheck(e,[r]),r.takeDerivative(this._symbol).getConcreteTree(e,t)},p.DoubleInequality.prototype._getConcreteTree=function(e,t){return new this.constructor([p.Piecewise([this._indicator,this._expressions[0],T(NaN)]).getConcreteTree(e,t),this._operators[0],_(this._symbol),this._operators[1],p.Piecewise([this._indicator,this._expressions[1],T(NaN)]).getConcreteTree(e,t)])},p.Expression.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return this.typeCheck(e,r),this._constantCollapsedCopy(e,r)},p.Add.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.addPoints(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Subtract.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.subtractPoints(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Multiply.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Number,u.ListOfNumber])?p.BuiltInFunction.multiplyPoint(this.args).getConcreteTree(e,t):u.isOneOf(r[0].valueType,[u.Number,u.ListOfNumber])&&u.isOneOf(r[1].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.multiplyPoint([this.args[1],this.args[0]]).getConcreteTree(e,t):n.call(this,e,t)},p.Divide.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])&&u.isOneOf(r[1].valueType,[u.Number,u.ListOfNumber])?p.BuiltInFunction.dividePoint(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Negative.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return u.isOneOf(r[0].valueType,[u.Point,u.ListOfPoint])?p.BuiltInFunction.negatePoint(this.args).getConcreteTree(e,t):n.call(this,e,t)},p.Error.prototype._getConcreteTree=function(e,t){return this},p.FreeVariable.prototype._getConcreteTree=function(e,t){return this},p.FunctionCall.prototype._getConcreteTree=function(e,t){var r="logbase"===this._symbol?"log":o.latexToIdentifier(this._identifier.getInputString()),i=t[this._symbol];if(i&&i.isError)throw i;if(!i||!i.isFunction){if(w.hasOwnProperty(this._symbol))throw"logbase"===this._symbol&&t.ln&&t.log?d.logbaseUnsupported():d.functionUnsupported(r);if(i&&i.getConcreteTree(e,t).valueType===u.Distribution)throw d.distributionAsFunction(i._symbol);if(1==this.args.length){var n=[_(this._symbol),this.args[0]];return l(n).getConcreteTree(e,t)}if(i)throw d.variableAsFunction(r);throw d.functionNotDefined(r)}var s=x(this.args,e,t);return i.getConcreteInvocationTree(e,t,s,r)},p.DotAccess.prototype._getConcreteTree=function(e,t){var r,i,n=this.args[0],s=this.args[1];if(s instanceof p.Identifier)return i=o.latexToIdentifier(s.getInputString()),r=[n],O(s._symbol,i,r,e,t);if(s instanceof p.SeededFunctionCall)return i=o.latexToIdentifier(s._identifier.getInputString()),r=[s.seed,n].concat(s.args.slice(1)),O(s._symbol,i,r,e,t);if(s instanceof p.FunctionCall)return"x"===s._symbol&&1===s.args.length?p.Multiply([p.OrderedPairAccess([n,p.Constant(1)]),s.args[0]]).getConcreteTree(e,t):"y"===s._symbol&&1===s.args.length?p.Multiply([p.OrderedPairAccess([n,p.Constant(2)]),s.args[0]]).getConcreteTree(e,t):(i=o.latexToIdentifier(s._identifier.getInputString()),r=[n].concat(s.args),O(s._symbol,i,r,e,t));throw d.unexpectedSymbol(".")},p.DotAccessExponent.prototype._getConcreteTree=function(e,t){return"FunctionCall"!==this.args[1].type||1!==this.args[1].args.length||t[this.args[1]._symbol]&&t[this.args[1]._symbol].isFunction?p.Exponent([p.DotAccess([this.args[0],this.args[1]]),this.args[2]]).getConcreteTree(e,t):p.Multiply([p.DotAccess([this.args[0],p.Identifier(this.args[1]._symbol)]),p.Exponent([this.args[1].args[0],this.args[2]])]).getConcreteTree(e,t)},p.FunctionExponent.prototype._getConcreteTree=function(e,t){var r=this.args[0]._symbol;return t[r]&&t[r].isFunction?p.Exponent([p.FunctionCall(r,[this.args[1]]),this.args[2]]).getConcreteTree(e,t):l([this.args[0],p.Exponent([this.args[1],this.args[2]])]).getConcreteTree(e,t)},p.FunctionFactorial.prototype._getConcreteTree=function(e,t){var r=this.args[0]._symbol;return t[r]&&t[r].isFunction?p.FunctionCall("\\\\factorial",[p.FunctionCall(r,[this.args[1]])]).getConcreteTree(e,t):l([this.args[0],p.FunctionCall("\\\\factorial",[this.args[1]])]).getConcreteTree(e,t)},p.FunctionDefinition.prototype._getConcreteTree=function(e,t){for(var r=0;r<this._argSymbols.length;r++){if(t[this._argSymbols[r]])throw d.parameterAlreadyDefined(this._argSymbols[r]);if(this._argSymbols[r]===this._symbol)throw d.parameterAlreadyDefined(this._argSymbols[r])}return this._expression.getConcreteTree(e,t)},p.Image.prototype._getConcreteTree=function(e,t){var r=this.center.tryGetConcreteTree(e,t),i=this.radianAngle.tryGetConcreteTree(e,t),n=this.width.tryGetConcreteTree(e,t),s=this.height.tryGetConcreteTree(e,t),o=this.opacity.tryGetConcreteTree(e,t),a=[u.Point,u.ListOfPoint],c=[u.Number,u.ListOfNumber],r=D(r,a),i=D(i,c),n=D(n,c),s=D(s,c),o=D(o,c);return p.Image({center:r,radianAngle:i,width:n,height:s,opacity:o},this.moveStrategy)},p.Simulation.prototype._getConcreteTree=function(e,t){var r=this.fps.tryGetConcreteTree(e,t);return p.Simulation(r)},p.Slider.prototype._getConcreteTree=function(e,t){var r,i,n,s,o,a,c,h,l,u=this._expression.getConcreteTree(e,t),p=E(this.sliderMin&&this.sliderMin.tryGetConcreteTree(e,t)),g=E(this.sliderMax&&this.sliderMax.tryGetConcreteTree(e,t)),y=E(this.sliderStep&&this.sliderStep.tryGetConcreteTree(e,t)),f={exportedSymbol:this._symbol,errors:{},values:{},valids:{},missingVars:[],errMsg:void 0};return P("min",p,f),P("max",g,f),P("step",y,f),y&&f.valids.step&&(0===f.values.step?delete f.values.step:f.values.step=Math.abs(f.values.step)),f.errors.cycle?u=d.sliderLimitReferencesExport(f.exportedSymbol):(f.errors.min||!f.valids.min?f.errMsg=d.sliderMinInvalid():f.errors.max||!f.valids.max?f.errMsg=d.sliderMaxInvalid():!f.errors.step&&f.valids.step||(f.errMsg=d.sliderStepInvalid()),f.values.min>f.values.max&&(f.valids.min=!1,f.valids.max=!1,f.errMsg||(f.errMsg=d.sliderMaxLessThanMin()))),u.isConstant&&(r=t.initialEvaluation&&t.initialEvaluation.asValue()&&this.sliderIsPlayingOnce,i=f.values.max,n=+u.asValue(),s=f.values.min,o=f.values.step,!r||isFinite(i)||(a=E(this.sliderSoftMax&&this.sliderSoftMax.tryGetConcreteTree(e,t)))&&(i=L.computeSoftMax({storedMax:+a.asValue(),sliderValue:n,step:o,hardMin:s})),c=L.constrainSliderValueLikeEvaluator({target:n,hardMin:s,hardMax:i,step:o,forceSliderToMax:r}),h=m.fromDecimalString(c.toString()),l=isFinite(m.asFloat(h))?h:c,u=T(l)),u.sliderInfo=f,u},p.Integral.prototype._getConcreteTree=function(e,t){if(t[this._differential._symbol])throw d.shadowedIntegrationVariable(this._differential._symbol);var r=this.args[0],i=this.args[1].getConcreteTree(e,t),n=this.args[2].getConcreteTree(e,t);if(i.dependsOn(r._symbol)||n.dependsOn(r._symbol))throw d.badIntegralBoundDependency(r._symbol);var s=Object.create(t);return s[this._differential._symbol]=b(this._differential._symbol),c.prototype._getConcreteTree.call(this,e,s)},p.ListAccess.prototype._getConcreteTree=function(e,t){var r,i=this.list.getConcreteTree(e,t);if(this.index instanceof h&&this.index.isHalfEmpty()){if(r=h([this.index.beginning,C([T(y(i.length,1))])]).getConcreteTree(e,t),Math.round(+r.args[0].asValue())>i.length)return C([])}else r=this.index.getConcreteTree(e,t);var n=[i,r];this.typeCheck(e,n);var s=r.getDependencies();if(s.length){if(r.isList)throw d.variableListIndicies(s);if(r.valueType===u.ListOfBool)throw d.variableFilter(s)}if(r.isList){if(r.valueType===u.EmptyList)return C([]);var o=[],a=0;if(r.valueType===u.ListOfNumber){for(;a<r.length;a++){var c=r.args[a];o.push(i.elementAt(e,c.asValue()-1))}return C(o)}if(r.valueType===u.ListOfBool){for(;a<r.length;a++){r.args[a]._constantValue&&o.push(i.elementAt(e,a))}return C(o)}}return this._constantCollapsedCopy(e,n)},p.List.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t);return this.typeCheck(e,r),new this.constructor(r)},p.ParametrizedReducerFunction.prototype._getConcreteTree=function(t,r){if(this.args[0]instanceof p.List&&this.args[0].valueType===u.ListOfDistribution)return p.List(p.List.mapArgs(t,[this.args[0]],function(e){return this.copyWithArgs([e[0],this.args[1]]).getConcreteTree(t,r)}.bind(this)));if(this.args[0]instanceof p.Distribution)return this.args[0][this._symbol](this.args.slice(1)).getConcreteTree(t,r);var i=x(this.args,t,r);switch(s([i[1]],this.getDummyDependencies())){case"none":return this.typeCheck(t,i),this._constantCollapsedCopy(t,i);case"empty":return p.List([]);case"list":return p.List(p.List.mapArgs(t,[i[1]],function(e){return e=[i[0]].concat(e),this.typeCheck(t,e),this._constantCollapsedCopy(t,e)}.bind(this)));case"broadcast":var e=F([i[1]]),n=[i[0]].concat(e.concreteArgs);return this.typeCheck(t,n),p.Broadcast(e.replacedSymbols,[this.copyWithArgs(n)].concat(e.replacedArgs))}},p.Prime.prototype._getConcreteTree=function(e,t){var r=this.args[0],i=r.args[0];if(!t[r._symbol])throw d.functionNotDefined(r._symbol);var n,s=this.tmpVar();if("logbase"===r._symbol){if(2!==r.args.length)throw d.primedFunctionArity();n=[_(s),r.args[1]]}else{if(1!==r.args.length)throw d.primedFunctionArity();n=[_(s)]}for(var o=r.copyWithArgs(n).getConcreteTree(e,t),a=0;a<this.order;a++)o=o.takeDerivative(s);var c={};return c[s]=i,o.substitute(c).getConcreteTree(e,t)},p.Range.prototype._getConcreteTree=function(e,t){var r=this.beginning.getConcreteTree(e,t),i=this.end.getConcreteTree(e,t);if(r.getDependencies().length)throw d.variableRange(r.getDependencies());if(i.getDependencies().length)throw d.variableRange(i.getDependencies());if(!r.isList||!i.isList)throw new Error("Programming Error: range bounds must be List nodes.");var n,s,o,a=r.elementAt(e,0).asValue(),c=i.elementAt(e,i.length-1).asValue()-a;o=1===r.length?0<=c?1:-1:(n=r.elementAt(e,1).asValue(),s=f(a,n),r.elementAt(e,1).asValue()-a);var h=Math.round(c/o)+1;if(!isFinite(h)||h<r.length||h<i.length)throw d.nonArithmeticRange();var l,u=[];if(s)for(var p=s.nstart,g=0;g<h;g++)S(e,r,i,g,h,p/s.lcm),u.push(T(y(p,s.lcm))),p+=s.nstep;else for(u.push(T(a)),g=1;g<h;g++)S(e,r,i,g,h,l=a+g*o),u.push(T(y(l,1)));return C(u)},p.ReducerFunction.prototype._getConcreteTree=function(t,r){if(this.args[0]instanceof p.List&&this.args[0].valueType===u.ListOfDistribution&&"length"!==this._symbol)return p.List(p.List.mapArgs(t,this.args,function(e){return this.copyWithArgs(e).getConcreteTree(t,r)}.bind(this)));if(this.args[0]instanceof p.Distribution&&"length"!==this._symbol)return this.args[0][this._symbol]().getConcreteTree(t,r);var e=x(this.args,t,r);if(1===this.args.length)return e=[p.List.wrap(e[0])],this.typeCheck(t,e),this._constantCollapsedCopy(t,e);switch(s(e,this.getDummyDependencies())){case"none":return e=[p.List(e)],this.typeCheck(t,e),this._constantCollapsedCopy(t,e);case"empty":return p.List([]);case"list":return p.List(p.List.mapArgs(t,e,function(e){return e=[p.List(e)],this.typeCheck(t,e),this._constantCollapsedCopy(t,e)}.bind(this)));case"broadcast":var i=F(e),e=[p.List(i.concreteArgs)];return this.typeCheck(t,e),p.Broadcast(i.replacedSymbols,[this.copyWithArgs(e)].concat(i.replacedArgs))}},p.RepeatedOperator.prototype._getConcreteTree=function(e,t){if(t[this._index._symbol])throw d.shadowedIndex(this._index._symbol);var r=this.args[1].getConcreteTree(e,t),i=this.args[2].getConcreteTree(e,t);if(r.dependsOn(this._index._symbol)||i.dependsOn(this._index._symbol))throw this instanceof p.Sum?d.badSumBoundDependency(this._index._symbol):this instanceof p.Product?d.badProductBoundDependency(this._index._symbol):d.parseError();var n=Object.create(t);return n[this._index._symbol]=b(this._index._symbol),c.prototype._getConcreteTree.call(this,e,n)};var n=function(t,e){var r=x(this.args,t,e);switch(s(r,this.getDummyDependencies())){case"none":return this.typeCheck(t,r),this._constantCollapsedCopy(t,r);case"empty":return p.List([]);case"list":return p.List(p.List.mapArgs(t,r,function(e){return this.typeCheck(t,e),this._constantCollapsedCopy(t,e)}.bind(this)));case"broadcast":var i=F(r);return this.typeCheck(t,i.concreteArgs),p.Broadcast(i.replacedSymbols,[this.copyWithArgs(i.concreteArgs)].concat(i.replacedArgs))}};function t(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});if(0<e.length){if(1===e.length&&e.push(p.Constant(1)),e[1].getDependencies().length)throw d.illegalBinWidth(this._symbol).setDependencies(e[1].getDependencies());if(e[1].valueType!==u.Number)throw d.illegalBinWidth(this._symbol);var i=e[1].asValue();if(!isFinite(i)||i<=0)throw d.illegalBinWidth(this._symbol)}return this.typeCheck(t,e),new this.constructor(e)}p.ScalarExpression.prototype._getConcreteTree=n,p.Object3D.prototype._getConcreteTree=n,p.Piecewise.prototype._getConcreteTree=function(e,t){var r=x(this.args,e,t),i=r[0];if(i.isConstant&&i.valueType===u.Bool&&r[1].valueType===r[2].valueType)return i.asValue()?r[1]:r[2];if(i.valueType===u.Bool&&u.isList(r[1].valueType)&&u.isList(r[2].valueType)&&r[1].length!==r[2].length)throw d.piecewiseBranchLengthError(i.getDependencies()[0]);return n.call(this,e,t)},p.Regression.prototype._getConcreteTree=function(e,t){return new this.constructor(this._lhs,this._rhs)},p.Polygon.prototype._getConcreteTree=function(t,r){var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),1===e.length&&e[0].valueType===u.ListOfPoint?new this.constructor(e):e.every(function(e){return e.valueType===u.Point})?new this.constructor([C(e)]):2===e.length?new this.constructor([i(this.args).getConcreteTree(t,r)]):d.parseError()},p.Histogram.prototype._getConcreteTree=t,p.DotPlot.prototype._getConcreteTree=t,p.BoxPlot.prototype._getConcreteTree=function(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),1!==e.length||e[0].valueType!==u.ListOfNumber&&e[0].valueType!==u.EmptyList?d.parseError():new this.constructor(e)},p.TTest.prototype._getConcreteTree=function(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),new this.constructor(e)},p.IndependentTTest.prototype._getConcreteTree=function(t,r){if(!r[this._symbol])throw d.functionUnsupported(this._symbol);var e=this.args.map(function(e){return e.getConcreteTree(t,r)});return this.typeCheck(t,e),new this.constructor(e)},p.SolvedEquation.prototype._getConcreteTree=function(e,t){return new this.constructor(this._symbol,this._expression.getConcreteTree(e,t))},p.Table.prototype._getConcreteTree=function(e,t){for(var r=[],i=Object.create(t),n=0;n<this.columns.length;n++){var s=this.columns[n].getConcreteTree(e,i,t);s.isIndependent&&this.columns[n].exportToLocal(s,i),r.push(s)}return new this.constructor(r)},p.TableColumn.prototype._getConcreteTree=function(e,t,r){var i,n,s=this.header.getConcreteTree(e,t);if(s.isFreeVariable){i=[];for(var o,a=0;a<this.values.length;a++){this.values[a].tableError()?i.push(d.invalidTableEntry(this.values[a].tableError())):(o=this.values[a].tryGetConcreteTree(e,t)).isError?i.push(o):o.tableError()?i.push(d.invalidTableEntry(o.tableError())):o.valueType===u.Number?i.push(o):i.push(d.tableEntryTypeError([u.prettyPrint(o.valueType)]))}return(n=new this.constructor(s,this.length,i)).isIndependent=!0,n}if(s.isConstant){for(var c=[],h=0;h<this.length;h++)c.push(s);i=c}else i=s.isList?s.args.slice():[];return(s=this.header.getConcreteTree(e,r)).isError||s.valueType===u.Number||s.valueType===u.ListOfNumber||s.valueType===u.EmptyList||(s=d.tableHeaderTypeError([u.prettyPrint(s.valueType)])),n=new this.constructor(s,this.length,i)},p.BuiltInFunction.pdf.prototype._getConcreteTree=function(t,r){if(this.args[0]instanceof C)return p.List(p.List.mapArgs(t,this.args,function(e){return this.copyWithArgs(e).getConcreteTree(t,r)}.bind(this)));if(this.typeCheck(t,this.args),!(this.args[0]instanceof p.Distribution))throw d.functionTypeError(this._symbol,[u.prettyPrint(this.args[0].valueType)]);return this.args[0].pdf([this.args[1]]).getConcreteTree(t,r)},p.BuiltInFunction.cdf.prototype._getConcreteTree=function(t,r){var e=this.args;if(2===e.length&&(e=[e[0],p.Constant(-1/0),e[1]]),e[0]instanceof p.List)return p.List(p.List.mapArgs(t,e,function(e){return this.copyWithArgs(e).getConcreteTree(t,r)}.bind(this)));if(this.typeCheck(t,e),!(e[0]instanceof p.Distribution))throw d.functionTypeError(this._symbol,[u.prettyPrint(e[0].valueType)]);return e[0].cdf(e.slice(1)).getConcreteTree(t,r)},p.BuiltInFunction.random.prototype._getConcreteTree=function(e,t){var r=this.args;(r.length<=1||!(r[1]instanceof p.Distribution)&&!(r[1]instanceof p.List)&&r.length<4)&&(r=[r[0],w.uniformdist([])].concat(r.slice(1)));var i=r[0],n=r[1],s=r[2],o=r[3];if(this.typeCheck(e,r.slice(1)),s&&s.getDependencies().length)throw d.variableSampleSize(s.getDependencies());if(o&&o.getDependencies().length)throw d.variableSeed(o.getDependencies());if(o&&(i=v("us",[i,o])),s){var a=s.asValue();if(a<1)throw d.badSampleSize();a=Math.round(a);for(var c,h=[],l=0;l<a;l++)c=v("lc",[i,T(y(l,1))]),h.push(n.sample([c]).getConcreteTree(e,t));return C(h)}return n.sample([i]).getConcreteTree(e,t)},p.BuiltInFunction.shuffle.prototype._getConcreteTree=function(e,t){var r=this.args;this.typeCheck(e,r.slice(1));var i,n=r[0],s=r[1],o=r[2];if(o&&o.getDependencies().length)throw d.variableSeed(o.getDependencies());if(o&&(n=v("us",[n,o])),"List"===s.type)return i=s.args.slice(),g.shuffle(n.asValue(),i),C(i);if("Broadcast"!==s.type)throw d.parseError();for(var a=s,c=[a._expression],h=g.randomPerm(n.asValue(),a.length),l=0;l<a._lists.length;l++){i=[];for(var u=0;u<h.length;u++)i.push(a._lists[l].args[h[u]]);c.push(p.List(i))}return a.copyWithArgs(c)},p.BuiltInFunction.sort.prototype._getConcreteTree=function(e,t){var r=this.args;if(1===r.length&&(r=r.concat(r[0])),this.typeCheck(e,r),0!==r[1].getDependencies().length)throw d.functionFreeVariable(this._errorSymbol,r[1].getDependencies()[0]);if("List"!==r[1].type)throw d.parseError();var i,n=r[1].asValue(),s=g.sortPerm(n);if("List"===r[0].type){for(i=[],h=0;h<Math.min(s.length,r[0].args.length);h++)i.push(r[0].args[s[h]]);return p.List(i)}if("Broadcast"!==r[0].type)throw d.parseError();for(var o=[r[0]._expression],a=0;a<r[0]._lists.length;a++){i=[];for(var c=r[0]._lists[a].args,h=0;h<Math.min(s.length,c.length);h++)i.push(c[s[h]]);o.push(p.List(i))}return r[0].copyWithArgs(o)},p.BuiltInFunction.join.prototype._getConcreteTree=function(e,t){var r=this.args;this.typeCheck(e,r);for(var i=[],n=0;n<r.length;n++){var s=r[n];if("Broadcast"===s.type&&(s=s.asList(e)),"List"===s.type)for(var o=0;o<s.args.length;o++)i.push(s.args[o]);else i.push(s)}return p.List(i)}});\ndefine(\'core/math/features/getValueType\',[\'require\',\'parsenodes\',\'core/math/types\'],function(require){"use strict";var e=require("parsenodes"),r=require("core/math/types");function t(){return r.Number}function n(){return r.Bool}function i(e){for(var t=0;t<e.length;t++)if(e[t].valueType===r.Point)return r.Point;return r.Number}var u={Add:i,Multiply:i,Divide:i,Subtract:i,Exponent:t,Negative:i,And:n,Piecewise:function(e){return e[1].valueType},BaseComparator:n,RepeatedOperator:t,List:function(e){if(0===e.length)return r.EmptyList;for(var t=e[0].valueType,n=1;n<e.length;n++)if(e[n].valueType!==t)return r.ListOfAny;return r.hasListType(t)?r.listType(t):r.ListOfAny},ListAccess:function(e){return r.elementType(e[0].valueType)},Broadcast:function(e){return r.listType(e[0].valueType)},Seed:function(e){return r.SeedType},ExtendSeed:function(e){return r.SeedType},OrderedPairAccess:t,OrderedPair:function(){return r.Point},RGBColor:function(){return r.RGBColor},NativeFunction:t,ReducerFunction:t,DoubleReducerFunction:t,ParametrizedReducerFunction:t,Distribution:function(){return r.Distribution},DummyIndex:t,FreeVariable:t,TypedFunction:function(){return this._outputType},Derivative:t,Integral:t,Identifier:function(){return r.Any}};for(var o in u)e[o].prototype._getValueType=u[o]});\ndefine(\'core/math/features/typeCheck\',[\'require\',\'parsenodes\',\'core/math/types\',\'core/math/errormsg\'],function(require){"use strict";var u=require("parsenodes"),s=require("core/math/types"),h=require("core/math/errormsg"),a=s.isOneOf;function l(r){for(var t=[],e=0;e<r.length;e++)t.push(s.prettyPrint(r[e].valueType));return t}function r(i,o){return function(r,t){for(var e=0;e<t.length;e++)if(t[e].valueType!==i[e])throw o(l(t))}}function t(r,t){var e=t.length,i=t[0];if(e<2)throw h.methodRequiresList(this._symbol);if(!a(i.valueType,[s.ListOfNumber,s.EmptyList]))throw h.methodRequiresList(this._symbol);if(2<e)throw h.tooManyArguments(this._symbol,2)}var e={Add:r([s.Number,s.Number],h.addTypeError),Multiply:r([s.Number,s.Number],h.multiplyTypeError),Divide:r([s.Number,s.Number],h.divideTypeError),Subtract:r([s.Number,s.Number],h.subtractTypeError),Exponent:r([s.Number,s.Number],h.exponentTypeError),Negative:r([s.Number],h.negativeTypeError),BaseComparator:r([s.Number,s.Number],h.comparatorTypeError),And:r([s.Bool,s.Bool],h.andTypeError),ExtendSeed:function(r,t){if(2!==t.length||t[0].valueType!==s.SeedType||!a(t[1].valueType,[s.SeedType,s.Number]))throw h.functionUnsupported("random")},List:function(r,t){if(0!==t.length){var e=t[0].valueType;if(!s.hasListType(e))throw h.listTypeError([s.prettyPrint(e)]);for(var i=0;i<t.length;i++){var o=t[i].valueType;if(!s.hasListType(o))throw h.listTypeError([s.prettyPrint(o)]);if(o!==e)throw h.heterogeneousList()}}},Broadcast:function(r,t){},Distribution:function(r,t){},RGBColor:function(r,t){},OrderedPair:function(r,t){if(0===t.length)throw h.emptyParen();if(r.dimensions&&t.length!==r.dimensions())throw h.badTupleDimensions(r.dimensions());for(var e=0;e<t.length;e++){var i=t[e].valueType;if(i!==s.Number)throw h.pointTypeError(s.prettyPrint(i))}},Piecewise:function(r,t){if(t[0].valueType!==s.Bool)throw h.piecewiseConditionTypeError(l(t));if(t[1].valueType!==t[2].valueType)throw h.piecewiseBranchTypeError([s.prettyPrint(t[1].valueType),s.prettyPrint(t[2].valueType)])},ListAccess:function(r,t){var e=s.isList(t[0].valueType),i=t[1].valueType,o=i===s.EmptyList||i===s.Number||i===s.ListOfNumber||i===s.ListOfBool;if(!e||!o)throw h.indexTypeError(l(t))},OrderedPairAccess:r([s.Point,s.Number],h.orderedPairAccessTypeError),Sum:function(r,t){if(t[1].valueType!==s.Number)throw h.sumLowerBoundTypeError([s.prettyPrint(t[1].valueType)]);if(t[2].valueType!==s.Number)throw h.sumUpperBoundTypeError([s.prettyPrint(t[2].valueType)]);if(t[3].valueType!==s.Number)throw h.sumArgumentTypeError([s.prettyPrint(t[3].valueType)])},Product:function(r,t){if(t[1].valueType!==s.Number)throw h.productLowerBoundTypeError([s.prettyPrint(t[1].valueType)]);if(t[2].valueType!==s.Number)throw h.productUpperBoundTypeError([s.prettyPrint(t[2].valueType)]);if(t[3].valueType!==s.Number)throw h.productArgumentTypeError([s.prettyPrint(t[3].valueType)])},Integral:function(r,t){if(t[1].valueType!==s.Number)throw h.integralLowerBoundTypeError([s.prettyPrint(t[1].valueType)]);if(t[2].valueType!==s.Number)throw h.integralUpperBoundTypeError([s.prettyPrint(t[2].valueType)]);if(t[3].valueType!==s.Number)throw h.integralArgumentTypeError([s.prettyPrint(t[3].valueType)])},NativeFunction:function(r,t){var e=this._errorSymbol,i=t.length,o="logbase"===this._symbol?1:0;if(i<this._requiredArity)throw h.wrongArity(e,this._requiredArity-o,i-o);if(i>this._maxArity)throw h.wrongArity(e,this._maxArity-o,i-o);for(var n=0;n<t.length;n++){if(t[n].valueType!==s.Number)throw h.functionTypeError(e,l(t))}},ReducerFunction:function(r,t){if(!a(t[0].valueType,[s.ListOfNumber,s.EmptyList]))throw h.functionTypeError(this._symbol,l(t))},DoubleReducerFunction:function(r,t){var e=t[0],i=t[1];if(!s.isList(e.valueType)||!s.isList(i.valueType))throw h.nonListDoubleReducer(this._symbol);if(!a(e.valueType,[s.ListOfNumber,s.EmptyList])||!a(i.valueType,[s.ListOfNumber,s.EmptyList]))throw h.functionTypeError(this._symbol,l(t))},ParametrizedReducerFunction:function(r,t){if(!a(t[0].valueType,[s.ListOfNumber,s.EmptyList]))throw h.nonListParametrizedReducer(this._symbol);if(t[1].valueType!==s.Number)throw h.functionTypeError(this._symbol,l(t))},TypedFunction:function(r,t){var e=this._errorSymbol,i=t.length,o="pdf"===this._symbol,n="cdf"===this._symbol;if(i<this._requiredArity){if(o)throw h.pdfWrongArity();if(n)throw h.cdfRequiresArguments();throw h.wrongArity(e,this._requiredArity,i)}if(i>this._maxArity){if(o)throw h.pdfWrongArity();if(n)throw h.cdfTooManyArguments();throw h.wrongArity(e,this._maxArity,i)}for(var u=0;u<t.length;u++){var s=t[u].valueType,y=this._inputTypes[u],p=Array.isArray(y);if(!p&&s!==y||p&&!a(s,y))throw h.functionTypeError(e,l(t))}},Derivative:function(r,t){if(!a(t[0].valueType,[s.Number,s.ListOfNumber,s.EmptyList,s.Point,s.ListOfPoint]))throw h.derivativeTypeError(l(t))},Regression:function(r,t){if(!a(t[0].valueType,[s.Number,s.ListOfNumber])||!a(t[1].valueType,[s.Number,s.ListOfNumber]))throw h.regressionTypeError(l(t))},Polygon:function(r,t){if(1===t.length&&t[0].valueType!==s.ListOfPoint)throw h.polygonListTypeError(l(t));if(2===t.length&&t[0].valueType===s.Number&&t[1].valueType===s.Number)throw h.polygonTwoNumbersError();if(2<t.length&&!t.every(function(r){return r.valueType===s.Point}))throw h.polygonPointArgsError()},Object3D:function(r,t){if(t.length<3)throw h.wrongArity(this._symbol,3,t.length)},Histogram:t,DotPlot:t,BoxPlot:function(r,t){var e=t.length,i=t[0];if(0===e)throw h.methodRequiresList(this._symbol);if(!a(i.valueType,[s.ListOfNumber,s.EmptyList]))throw h.methodRequiresList(this._symbol);if(1<e)throw h.methodRequiresList(this._symbol)},TTest:function(r,t){var e=this._symbol;if(0===t.length)throw h.methodRequiresList(e);if(t[0].valueType===s.EmptyList)throw h.ttestListTooShort(e);if(t[0].valueType!==s.ListOfNumber)throw h.methodRequiresList(e);if(2<t.length)throw h.tooManyArguments(e,2);if(t[0].length<2)throw h.ttestListTooShort(e);if(t[1]&&t[1].valueType!==s.Number)throw h.functionTypeError(e,l(t))},IndependentTTest:function(r,t){var e=this._symbol;if(2!==t.length)throw h.wrongDoubleReducerArity(e);if(!s.isList(t[0].valueType)||!s.isList(t[1].valueType))throw h.nonListDoubleReducer(e);if(t[0].valueType===s.EmptyList||t[1].valueType===s.EmptyList)throw h.ttestListTooShort("ittest");if(t[0].valueType!==s.ListOfNumber||t[1].valueType!==s.ListOfNumber)throw h.functionTypeError(e,l(t));if(t[0].args.length<2||t[1].args.length<2)throw h.ttestListTooShort("ittest")},Stats:function(r,t){var e=t.length,i=t[0];if(0===e)throw h.methodRequiresList(this._symbol);if(i.valueType===s.EmptyList)throw h.functionTypeError(this._symbol,l(t));if(i.valueType!==s.ListOfNumber)throw h.methodRequiresList(this._symbol);if(1<e)throw h.methodRequiresList(this._symbol)}};for(var i in e)u[i].prototype.typeCheck=e[i];u.BuiltInFunction.random.prototype.typeCheck=function(r,t){var e=t.length,i=t[0],o=t[1],n=t[2];if(3<e)throw h.randomArity();if(!i)throw h.randomArity();if(!(i instanceof u.Distribution||i instanceof u.List))throw h.randomArity();if(i instanceof u.Distribution&&i.args&&(i.args[0]instanceof u.List||i.args[1]instanceof u.List))throw h.randomFromBroadcastDistribution();if(o&&o.valueType!==s.Number)throw h.randomArity();if(n&&n.valueType!==s.Number)throw h.randomArity()},u.BuiltInFunction.shuffle.prototype.typeCheck=function(r,t){var e=t.length;if(e<1)throw h.wrongArity(this._errorSymbol,1,e,this.minArityUsageExample);if(2<e)throw h.wrongArity(this._errorSymbol,2,e,this.maxArityUsageExample);if(!s.isList(t[0].valueType)||2===e&&t[1].valueType!==s.Number)throw h.functionTypeError(this._errorSymbol,l(t))},u.BuiltInFunction.length.prototype.typeCheck=function(r,t){if(1!==t.length||!s.isList(t[0].valueType))throw h.parseError()},u.BuiltInFunction.sort.prototype.typeCheck=function(r,t){var e=t.length;if(e<1)throw h.wrongArity(this._errorSymbol,1,e,this.minArityUsageExample);if(2<e)throw h.wrongArity(this._errorSymbol,2,e,this.maxArityUsageExample);if(!s.isList(t[0].valueType)||!a(t[1].valueType,[s.ListOfNumber,s.EmptyList]))throw h.functionTypeError(this._errorSymbol,l(t))},u.BuiltInFunction.join.prototype.typeCheck=function(r,t){var e=t.length;if(e<this._requiredArity)throw h.wrongArity(this._errorSymbol,this._requiredArity,e,this.minArityUsageExample);var i=t[0].valueType;s.isList(i)||(i=s.listType(i));for(var o=1;o<t.length;o++){var n=t[o].valueType;if(s.isList(n)||(n=s.listType(n)),n!==s.EmptyList&&(i===s.EmptyList&&(i=n),n!==i))throw h.functionTypeError(this._errorSymbol,l(t))}}});\ndefine(\'core/math/features/repr\',[\'require\',\'parsenodes\'],function(require){"use strict";function e(r,t,e){e=e||0;var i=Array(e+1).join("  "),s=i+"  ";return"[\\n"+s+r.map(function(r){return r.repr(t,e+1)}).join(",\\n"+s)+"\\n"+i+"]"}function s(r,t){return""+(t=t||"")+r}var i=require("parsenodes");i.Expression.prototype.repr=function(r,t){return s(this.type,r)+"("+e(this.args,r,t)+")"},i.DoubleInequality.prototype.repr=function(r,t){t=t||0;var e=Array(t+1).join("  "),i=e+"  ";return s(this.type,r)+"([\\n"+i+this.args[0].repr(r,t+1)+",\\n"+i+"\'"+this.args[1]+"\',\\n"+i+this.args[2].repr(r,t+1)+",\\n"+i+"\'"+this.args[3]+"\',\\n"+i+this.args[4].repr(r,t+1)+"\\n"+e+"])"},i.Identifier.prototype.repr=i.FreeVariable.prototype.repr=function(r){return s(this.type,r)+"(\'"+this._symbol+"\')"},i.Constant.prototype.repr=function(r){return s(this.type,r)+"("+this.asValue()+")"},i.ExtendSeed.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this.tag+"\', "+e(this.args,r,t)+")"},i.Seed.prototype.repr=function(r){return s(this.type,r)+"("+this.asValue()+")"},i.FunctionCall.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this._symbol+"\', "+e(this.args,r,t)+")"},i.Assignment.prototype.repr=function(r,t){return s(this.type,r)+"("+i.Identifier(this._symbol).repr(r,t)+", "+this._expression.repr(r,t)+")"},i.Regression.prototype.repr=i.Equation.prototype.repr=function(r,t){return s(this.type,r)+"("+this._lhs.repr(r,t)+", "+this._rhs.repr(r,t)+")"},i.FunctionDefinition.prototype.repr=function(r,t){return s(this.type,r)+"("+i.Identifier(this._symbol).repr(r,t)+", "+e(this._argSymbols.map(function(r){return i.Identifier(r)}),r,t)+", "+this._expression.repr(r,t)+")"},i.Error.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this._msg+"\')"},i.Derivative.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this._symbol+"\', "+e(this.args,r,t)+")"},i.SolvedEquation.prototype.repr=function(r,t){return s(this.type,r)+"(\'"+this._symbol+"\', "+this._expression.repr(r,t)+")"},i.OptimizedRegression.prototype.repr=function(r,t){return s(this.type,r)+"("+JSON.stringify(this.parameters)+", "+JSON.stringify(this.residuals)+", "+JSON.stringify(this.statistics)+", "+this.model.repr(r,t+1)+", "+JSON.stringify({isModelValid:this.isModelValid,residualVariable:this.residualVariable,residualSuggestionId:this.residualSuggestionId,shouldSuggestLogMode:this.shouldSuggestLogMode,isLinear:this.isLinear,parameterWarning:this.parameterWarning})+")"},i.Table.prototype.repr=function(r,t){return s(this.type,r)+"("+e(this.columns,r,t)+")"},i.TableColumn.prototype.repr=function(r,t){return s(this.type,r)+"("+this.header.repr(r,t)+", "+this.length+", "+e(this.values,r,t)+")"},i.Image.prototype.repr=function(r,t){var e=Array(t+1).join("  "),i=e+"  ";return s(this.type,r)+"({\\n"+i+"center: "+this.center.repr(r,t+1)+",\\n"+i+"radianAngle: "+this.radianAngle.repr(r,t+1)+",\\n"+i+"width: "+this.width.repr(r,t+1)+",\\n"+i+"height: "+this.height.repr(r,t+1)+"},\\n"+i+"opacity: "+this.opacity.repr(r,t+1)+",\\n"+i+JSON.stringify(this.moveStrategy)+"\\n"+e+")"},i.Simulation.prototype.repr=function(r){return s(this.type,r)+"({\\n)"},i.Slider.prototype.repr=function(r,t){var e=Array(t+1).join("  "),i=e+"  ";return s(this.type,r)+"({\\n"+i+"sliderAssignment: "+this.sliderAssignment.repr(r,t+1)+",\\n"+i+"sliderMin: "+(this.sliderMin&&this.sliderMin.repr(r,t+1))+",\\n"+i+"sliderMax: "+(this.sliderMax&&this.sliderMax.repr(r,t+1))+",\\n"+i+"sliderStep: "+(this.sliderStep&&this.sliderStep.repr(r,t+1))+"},\\n"+e+")"},i.Broadcast.prototype.repr=function(r,t){return s(this.type,r)+"([\'"+this._replacedSymbols.join("\', ")+"\'], "+e(this.args,r,t)+")"}});\ndefine(\'core/math/features/scalarEvalExpression\',[\'require\',\'parsenodes\',\'core/math/functions\'],function(require){"use strict";var n=require("parsenodes"),t=require("core/math/functions"),e={Add:function(n){return"("+n.join("+")+")"},Multiply:function(n){return"("+n.join("*")+")"},Divide:function(n){return"("+n.join("/")+")"},Subtract:function(n){return"("+n.join("-")+")"},Exponent:function(n){return"BuiltIn.pow("+n.join(",")+")"},RawExponent:function(n){return"Math.pow("+n.join(",")+")"},Negative:function(n){return"(-"+n[0]+")"},And:function(n){return n.join("&&")},Piecewise:function(n){return"("+n[0]+"?"+n[1]+":"+n[2]+")"}},i={Add:2,Multiply:2,Divide:2,Subtract:2,Exponent:2,RawExponent:2,Negative:1,And:2,Piecewise:3};for(var r in e){var o=n[r].prototype;o.scalarEvalExpression=e[r],o.evaluate=t.createEvaluateFunction(o.scalarEvalExpression,i[r])}});\ndefine(\'core/math/reconstitute-node\',[\'require\',\'parsenodes\',\'core/math/types\'],function(require){"use strict";var s=require("parsenodes"),u=require("core/math/types");return function t(e,n){if(u.isList(e)){for(var r=[],o=0;o<n.length;o++)r.push(t(u.elementType(e),n[o]));var a=s.List(r);return a.valueType=e,a}switch(e){case u.Number:case u.Bool:return s.Constant(n);case u.Point:return s.OrderedPair([s.Constant(n[0]),s.Constant(n[1])]);case u.RGBColor:return s.RGBColor([s.Constant(n[0]),s.Constant(n[1]),s.Constant(n[2])]);default:throw new Error("Cannot reconstitute value of a "+u.prettyPrint(e)+".")}}});\ndefine(\'core/math/features/constantcollapsedcopy\',[\'require\',\'parsenodes\',\'core/math/reconstitute-node\',\'core/math/maybe-rational\',\'core/math/errormsg\'],function(require){"use strict";var e=require("parsenodes"),u=e.Constant,l=e.Multiply,c=e.Subtract,i=e.Exponent,s=e.RawExponent,r=e.Seed,o=e.BuiltInFunction,h=require("core/math/reconstitute-node"),p=require("core/math/maybe-rational"),y=require("core/math/errormsg");function f(t){if(t.isConstant){var n=t.asValue();return"number"==typeof n&&!isFinite(n)}}var t={Expression:function(t,n){return this.copyWithArgs(n)},FreeVariable:function(t,n){return this},ScalarExpression:function(t,n){for(var e=[],a=0;a<n.length;a++){if(!n[a].isConstant&&!n[a].isString)return this.copyWithArgs(n);e.push(n[a].asValue())}return u(this.evaluate(e))},TypedFunction:function(t,n){for(var e=[],a=0;a<n.length;a++){if(0!==n[a].getDependencies().length)return this.copyWithArgs(n);e.push(n[a].asValue())}return h(this._outputType,this.evaluate(e))},OrderedPair:function(t,n){return this.copyWithArgs(n)},RGBColor:function(t,n){return this.copyWithArgs(n)},Distribution:function(t,n){return this.copyWithArgs(n)},Add:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.add(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):0===n[0].asValue()?n[1]:0===n[1].asValue()?n[0]:this.copyWithArgs(n)},Multiply:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.mul(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):1===n[0].asValue()?n[1]:1===n[1].asValue()?n[0]:this.copyWithArgs(n)},Subtract:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.sub(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):0===n[0].asValue()?e.Negative([n[1]]):0===n[1].asValue()?n[0]:this.copyWithArgs(n)},Divide:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.div(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):1===n[1].asValue()?n[0]:this.copyWithArgs(n)},Exponent:function(t,n){if(n[0].isConstant&&n[1].isConstant)return u(p.pow(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue()));if(n[0].isConstant){if(n[0].asValue()===Math.E)return o.exp([n[1]]);if(0<n[0].asValue())return s(n)}if(n[1].isConstant){var e=n[1].asValue();if(1===e)return n[0];if(e===Math.floor(e))return s(n);var a=n[1].asMaybeRationalValue();return p.isRational(a)?a.d%2==1?l([a.n%2==0?u(p.maybeRational(1,1)):o.sign([n[0]]),s([o.abs([n[0]]),n[1]])]):s(n):this.copyWithArgs(n)}return this.copyWithArgs(n)},RawExponent:function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.pow(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):this.copyWithArgs(n)},Negative:function(t,n){return n[0].isConstant?u(p.neg(n[0].asMaybeRationalValue())):n[0]instanceof e.Negative?n[0].args[0]:this.copyWithArgs(n)},And:function(t,n){return n[0].isConstant&&n[1].isConstant?u(n[0].asValue()&&n[1].asValue()):n[0].isConstant&&!0===n[0]?n[1]:n[0].isConstant&&!1===n[0]?u(!1):n[1].isConstant&&!0===n[1]?n[0]:n[1].isConstant&&!1===n[1]?u(!1):this.copyWithArgs(n)},Piecewise:function(t,n){return n[0].isConstant&&!0===n[0].asValue()?n[1]:n[0].isConstant&&!1===n[0].asValue()?n[2]:this.copyWithArgs(n)},Integral:function(t,n){var e=n[0],a=n[1],s=n[2],i=n[3],r=i.getDependencies();if(a.isConstant&&s.isConstant){var o=s.asValue()-a.asValue();if(i.isConstant)return u(i.asValue()*o);if(!i.dependsOn(e._symbol))return l([i,u(o)]);if(1===r.length&&r[0]===e._symbol)return u(this.evaluate(a.asValue(),s.asValue(),i))}else if(!i.dependsOn(e._symbol))return l([i,c([s,a])]);return this.copyWithArgs(n)},ListAccess:function(t,n){return n[1].isConstant?n[0].elementAt(t,n[1].asValue()-1):this.copyWithArgs(n)},OrderedPairAccess:function(t,n){return n[1].isConstant&&n[0]instanceof e.OrderedPair?n[0].elementAt(t,n[1].asValue()-1):this.copyWithArgs(n)},Broadcast:function(t,n){for(var e=n[0].getDependencies(),a=0;a<e.length;a++)if(-1===this._replacedSymbols.indexOf(e[a]))return this.copyWithArgs(n);for(a=1;a<n.length;a++)if(0!==n[a].getDependencies().length)return this.copyWithArgs(n);var s=n[0].getCompiledFunction(this._replacedSymbols).fn,i=n.slice(1).map(function(t){return t.asValue()}),r=[];for(a=0;a<this.length;a++){for(var o=[],u=0;u<i.length;u++)o.push(i[u][a]);r.push(s.apply(void 0,o))}return h(this.valueType,r)},ReducerFunction:function(t,n){return 0===n[0].getDependencies().length?h(this.valueType,this.evaluate([n[0].asValue()])):this.copyWithArgs(n)},DoubleReducerFunction:function(t,n){if(0!==n[0].getDependencies().length||0!==n[1].getDependencies().length)return this.copyWithArgs(n);var e=Math.min(n[0].length,n[1].length);return h(this.valueType,this.evaluate([n[0].asValue().slice(0,e),n[1].asValue().slice(0,e)]))},ParametrizedReducerFunction:function(t,n){var e=n[0],a=n[1];return a.isConstant&&0===e.getDependencies().length?h(this.valueType,this.evaluate([e.asValue(),a.asValue()])):this.copyWithArgs(n)},RepeatedOperator:function(t,n){var e=n[1],a=n[2];if(f(e)||f(a))switch(this.type){case"Sum":throw y.sumInfiniteBoundError();case"Product":throw y.productInfiniteBoundError();default:throw y.parseError()}if(e.isConstant&&a.isConstant){var s=e.asValue(),i=a.asValue(),r=n[3];if(r.isConstant)return u(this.evaluateConstant([s,i,r.asValue()]));var o=r.getDependencies();if(0===o.length||1===o.length&&o[0]===n[0]._symbol)return u(this.evaluate(s,i,r))}return this.copyWithArgs(n)},ExtendSeed:function(t,n){var e=n[0],a=n[1];return 0===e.getDependencies().length&&0===a.getDependencies().length?r(e.asValue()+"::"+this.tag+a.asValue()):this.copyWithArgs(n)}};for(var n in t)e[n].prototype._constantCollapsedCopy=t[n];o.mod.prototype._constantCollapsedCopy=function(t,n){return n[0].isConstant&&n[1].isConstant?u(p.mod(n[0].asMaybeRationalValue(),n[1].asMaybeRationalValue())):this.copyWithArgs(n)},o.sqrt.prototype._constantCollapsedCopy=function(t,n){return n[0].isConstant?u(p.sqrt(n[0].asMaybeRationalValue())):this.copyWithArgs(n)},o.nthroot.prototype._constantCollapsedCopy=function(t,n){var e=n[0],a=n[1];if(a.isConstant){if(e.isConstant)return u(p.nthroot(e.asMaybeRationalValue(),a.asMaybeRationalValue()));var s=[e,u(p.reciprocal(a.asMaybeRationalValue()))];return i(s)._constantCollapsedCopy(t,s)}return this.copyWithArgs(n)},o.abs.prototype._constantCollapsedCopy=function(t,n){return n[0].isConstant?u(p.abs(n[0].asMaybeRationalValue())):this.copyWithArgs(n)},o.total.prototype._constantCollapsedCopy=function(t,n){if(!n[0].isList)return this.copyWithArgs(n);for(var e=n[0].args,a=0;a<e.length;a++)if(!e[a].isConstant)return this.copyWithArgs(n);return u(p.total(n[0].asMaybeRationalValue()))}});\ndefine(\'core/math/features/polynomialorder\',[\'require\',\'parsenodes\'],function(require){"use strict";var r,e=require("parsenodes"),o={Expression:"this.dependsOn(symbol) ? Infinity : 0",FreeVariable:"(symbol === this._symbol ? 1 : 0)",Constant:"0",Add:"Math.max(order0, order1)",Subtract:"Math.max(order0, order1)",Multiply:"order0 + order1",Negative:"order0",Divide:"order1 > 0 ? Infinity : order0"};for(var t in o){var a=o[t];e[t].prototype.polynomialOrder=(r=(r=(r=a).replace("order0","this.args[0].polynomialOrder(symbol)")).replace("order1","this.args[1].polynomialOrder(symbol)"),new Function(["symbol"],"return "+r))}e.Exponent.prototype.polynomialOrder=function(r){var e=this.args[0].polynomialOrder(r),o=this.args[1].polynomialOrder(r);if(0===e&&0===o)return 0;var t=this.args[1];return t.isConstant&&t.asValue()===Math.round(t.asValue())&&0<t.asValue()?e*t.asValue():1/0},e.Piecewise.prototype.polynomialOrder=function(r){return this.dependsOn(r)?this.args[2].isConstant&&this.args[2].isNaN()?this.args[1].polynomialOrder(r):1/0:0},e.List.prototype.polynomialOrder=function(r){return 1/0}});\ndefine(\'core/math/features/polynomialcoefficients\',[\'require\',\'parsenodes\',\'core/math/maybe-rational\'],function(require){"use strict";var g=require("parsenodes"),t=require("core/math/maybe-rational").maybeRational,n=g.Constant(t(0,1)),e=g.Constant(t(1,1));g.FreeVariable.prototype.getPolynomialCoefficients=function(t){return t===this._symbol?[n,e]:[this]},g.Constant.prototype.getPolynomialCoefficients=function(t){return[this]},g.Add.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1,n=i.length-1,s=[],a=0;a<=Math.max(o,n);a++)a<=o&&a<=n?s.push(g.Add([e[a],i[a]])):s.push(n<o?e[a]:i[a]);return s},g.Subtract.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1,n=i.length-1,s=[],a=0;a<=Math.max(o,n);a++)a<=o&&a<=n?s.push(g.Subtract([e[a],i[a]])):s.push(n<o?e[a]:g.Negative([i[a]]));return s},g.Negative.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=[],o=0;o<e.length;o++)i.push(g.Negative([e[o]]));return i},g.Exponent.prototype.getPolynomialCoefficients=function(t){var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1;if(0<i.length-1)throw"can\'t solve for variable in exponent";if(0==o)return[g.Exponent([e[0],i[0]])];if(this.args[1].isConstant)switch(this.args[1].asValue()){case 0:return[n];case 1:return e;case 2:return g.Multiply([this.args[0],this.args[0]]).getPolynomialCoefficients(t)}throw"Unable to compile polynomial representation"},g.Multiply.prototype.getPolynomialCoefficients=function(t){for(var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=e.length-1,n=i.length-1,s=[],a=0;a<=o;a++)for(var r=0;r<=n;r++){var l=g.Multiply([e[a],i[r]]),f=s[a+r];s[a+r]=void 0===f?l:g.Add([f,l])}return s},g.Divide.prototype.getPolynomialCoefficients=function(t){var e=this.args[0].getPolynomialCoefficients(t),i=this.args[1].getPolynomialCoefficients(t),o=[];if(0<i.length-1)throw"Can\'t solve for variable in denominator";for(var n=0;n<e.length;n++)o.push(g.Divide([e[n],i[0]]));return o},g.Expression.prototype.getPolynomialCoefficients=function(t){if(this.dependsOn(t))throw"Unimplemented polynomialCoefficient call";return[this]},g.Piecewise.prototype.getPolynomialCoefficients=function(t){return this.dependsOn(t)?this.args[1].getPolynomialCoefficients(t):[this]}});\ndefine(\'core/math/features/extractconditions\',[\'require\',\'parsenodes\'],function(require){"use strict";var e=require("parsenodes");e.Expression.prototype.extractConditions=function(t,n){if(!this.dependsOn(t))return n;for(var s=0;s<this.args.length;s++){n=this.args[s].extractConditions(t,n)}return n},e.Piecewise.prototype.extractConditions=function(t,n){if(!this.dependsOn(t))return n;if(!this.args[0].dependsOn(t))return n=this.args[1].extractConditions(t,n),n=this.args[2].extractConditions(t,n);var s={};return s[t]=n,e.Piecewise([this.args[0].substitute(s),n,e.Constant(NaN)])}});\ndefine(\'core/math/features/piecewiseDependsOn\',[\'require\',\'parsenodes\'],function(require){"use strict";var e=require("parsenodes");e.Expression.prototype.piecewiseDependsOn=function(e){if(!this.dependsOn(e))return!1;for(var n=0;n<this.args.length;n++){if(this.args[n].piecewiseDependsOn(e))return!0}return!1},e.Piecewise.prototype.piecewiseDependsOn=function(e){return this.dependsOn(e)}});\ndefine(\'core/math/domaintypes\',["require","exports"],function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.intersectDomains=t.allReals=t.knownDomain=t.unknownDomain=t.emptyDomain=void 0,t.emptyDomain=function(){return{type:"empty"}},t.unknownDomain=function(){return{type:"unknown"}},t.knownDomain=function(n){return isNaN(n[0])||isNaN(n[1])||n[1]<n[0]?t.emptyDomain():{type:"known",bounds:n}},t.allReals=function(){return t.knownDomain([-1/0,1/0])},t.intersectDomains=function(n,e){if("empty"===n.type||"empty"===e.type)return t.emptyDomain();if("unknown"===n.type||"unknown"===e.type)return t.unknownDomain();if(n.bounds&&e.bounds){var o=[Math.max(n.bounds[0],e.bounds[0]),Math.min(n.bounds[1],e.bounds[1])];return t.knownDomain(o)}return t.emptyDomain()}});\ndefine(\'core/math/features/bounddomain\',[\'require\',\'parsenodes\',\'core/math/builtinframe\',\'core/math/domaintypes\',\'core/math/comparators\',\'core/math/maybe-rational\',\'core/math/policy\'],function(require){"use strict";var n=require("parsenodes"),u=require("core/math/builtinframe"),m=require("core/math/domaintypes"),l=require("core/math/comparators").table,o=require("core/math/maybe-rational").maybeRational,d=require("core/math/policy").defaultPolicy,D=n.Constant(o(0,1));n.Base.prototype.boundDomain=function(n){return m.unknownDomain()},n.List.prototype.boundDomain=function(n){if(!this.dependsOn(n))return m.allReals();if(!this.args.length)return m.allReals();var o=this.args[0].boundDomain(n);if("known"!==o.type)return m.unknownDomain();for(var a=0;a<this.args.length;a++){var t=this.args[a].boundDomain(n);if("known"!==t.type)return m.unknownDomain();if(t.bounds[0]!==o.bounds[0]||t.bounds[1]!==o.bounds[1])return m.unknownDomain()}return o},n.Expression.prototype.boundDomain=function(n){for(var o=m.allReals(),a=0;a<this.args.length;a++)o=m.intersectDomains(o,this.args[a].boundDomain(n));return o},n.Constant.prototype.boundDomain=function(n){return this.isNaN()?m.emptyDomain():m.allReals()},n.Piecewise.prototype.boundDomain=function(n){return this.args[2].isConstant&&isNaN(this.args[2].asValue())?m.intersectDomains(this.args[0].boundDomain(n),this.args[1].boundDomain(n)):m.unknownDomain()},n.OrderedPair.prototype.boundDomain=function(n){return m.intersectDomains(this.args[0].boundDomain(n),this.args[1].boundDomain(n))},n.BaseComparator.prototype.boundDomain=function(n){if(!this.dependsOn(n))return m.allReals();if("="===this.operator)return m.unknownDomain();var o=this._difference,a=this._difference.boundDomain(n);if(1<o.polynomialOrder(n))return m.unknownDomain();var t=o.getPolynomialCoefficients(n),e=t[1]?t[1].getConcreteTree(d,u):D,i=t[0]?t[0].getConcreteTree(d,u):D;if(!e.isConstant||!i.isConstant)return m.unknownDomain();if(isNaN(e.asValue())||isNaN(i.asValue()))return m.emptyDomain();if(0===e.asValue())return l[this.operator].inclusive?0<=i.asValue()?a:m.emptyDomain():0<i.asValue()?a:m.emptyDomain();var r=-i.asValue()/e.asValue(),s=e.asValue()<0?[-1/0,r]:[r,1/0];return m.intersectDomains(a,m.knownDomain(s))}});\ndefine(\'core/math/features/derivative\',[\'require\',\'parsenodes\',\'core/math/baseparser\',\'core/math/builtinframe\',\'core/math/parsenode/builtinfunction\',\'core/math/maybe-rational\',\'core/math/policy\',\'core/math/types\',\'core/math/errormsg\'],function(require){"use strict";var u=require("parsenodes"),t=require("core/math/baseparser"),o=require("core/math/builtinframe"),e=require("core/math/parsenode/builtinfunction"),r=require("core/math/maybe-rational").maybeRational,c=require("core/math/policy").defaultPolicy,i=require("core/math/types"),s=require("core/math/errormsg"),n=u.Constant(r(0,1)),x=u.Constant(r(1,1)),a=u.Constant(r(2,1)),y=u.OrderedPair([n,n]),d={FreeVariable:function(t){return t===this._symbol?x:n},Constant:function(t){return isFinite(this.asValue())?n:u.Constant(this.asValue())},Negative:function(t){return u.Negative([this.args[0].takeDerivative(t)])},Add:function(t){return u.Add([this.args[0].takeDerivative(t),this.args[1].takeDerivative(t)])},Subtract:function(t){return u.Subtract([this.args[0].takeDerivative(t),this.args[1].takeDerivative(t)])},Multiply:function(t){return u.Add([f(t,this.args[0],u.Multiply([this.args[0].takeDerivative(t),this.args[1]])),f(t,this.args[1],u.Multiply([this.args[0],this.args[1].takeDerivative(t)]))])},Divide:function(t){return u.Subtract([f(t,this.args[0],u.Divide([this.args[0].takeDerivative(t),this.args[1]])),f(t,this.args[1],u.Divide([u.Multiply([this.args[0],this.args[1].takeDerivative(t)]),u.Exponent([this.args[1],a])]))])},Exponent:function(t){return u.Add([f(t,this.args[0],u.Multiply([u.Multiply([this.args[1],u.Exponent([this.args[0],u.Subtract([this.args[1],x])])]),this.args[0].takeDerivative(t)])),f(t,this.args[1],u.Multiply([u.Piecewise([u.Comparator["="]([this.args[0],n]),u.Piecewise([u.Comparator[">"]([this.args[1],n]),n,u.Constant(NaN)]),u.Multiply([u.FunctionCall("\\\\ln",[this.args[0]]),u.Exponent([this.args[0],this.args[1]])])]),this.args[1].takeDerivative(t)]))]).getConcreteTree(c,o)},Sum:function(t){return this.copyWithArgs([this.args[0],this.args[1],this.args[2],this.args[3].takeDerivative(t)])},Product:function(t){var e=u.Sum([this.args[0],this.args[1],this.args[2],u.Piecewise([u.Comparator["="]([n,this.args[3]]),x,n])]),r=u.Multiply([u.Sum([this.args[0],this.args[1],this.args[2],u.Divide([this.args[3].takeDerivative(t),this.args[3]])]),u.Product(this.args)]),a=u.Product([this.args[0],this.args[1],this.args[2],u.Piecewise([u.Comparator["="]([n,this.args[3]]),this.args[3].takeDerivative(t),this.args[3]])]);return u.Piecewise([u.Comparator["="]([n,e]),r,u.Piecewise([u.Comparator["="]([x,e]),a,n])])},Piecewise:function(t){return 2===this.args.length?u.Piecewise([this.args[0],this.args[1].takeDerivative(t)]):3===this.args.length?u.Piecewise([this.args[0],this.args[1].takeDerivative(t),this.args[2].takeDerivative(t)]):void 0},List:function(e){return u.List(this.args.map(function(t){return t.takeDerivative(e)}))},ListAccess:function(t){return new this.constructor([this.args[0].takeDerivative(t),this.args[1]])},OrderedPair:function(t){return new this.constructor([this.args[0].takeDerivative(t),this.args[1].takeDerivative(t)])},OrderedPairAccess:function(t){return new this.constructor([this.args[0].takeDerivative(t),this.args[1]])},Integral:function(t){var e=this.args[0],r=this.args[1],a=this.args[2],i=this.args[3],s={};s[e._symbol]=a;var n={};return n[e._symbol]=r,u.Add([f(t,i,this.copyWithArgs([e,r,a,i.takeDerivative(t)])),u.Subtract([f(t,a,u.Multiply([i.substitute(s),a.takeDerivative(t)])),f(t,r,u.Multiply([i.substitute(n),r.takeDerivative(t)]))])])},SolvedEquation:function(t){return this._expression.takeDerivative(t)},OptimizedRegression:function(t){return this.model.takeDerivative(t)},Broadcast:function(t){for(var e=this._replacedSymbols.slice(),r=this.args.slice(1),a=this._expression.takeDerivative(t),i=0;i<this._replacedSymbols.length;i++){var s,n,x=this._replacedSymbols[i],o=this.args[i+1];o.dependsOn(t)&&(s=this.tmpVar(),n=u.DummyIndex(s),e.push(s),r.push(o.takeDerivative(t)),a=u.Add([a,u.Multiply([this._expression.takeDerivative(x),n])]))}return u.Broadcast(e,[a].concat(r))},Seed:function(t){return u.Constant(NaN)}},v={exp:"\\\\exp(x)*x_1",ln:"\\\\{x >= 0: x_1/x \\\\}",log:"\\\\{ x >= 0: x_1/(x*\\\\ln(10)) \\\\}",sqrt:"x_1/(2*\\\\sqrt{x})",rtxsqpone:"x*x_1/\\\\rtxsqpone(x)",rtxsqmone:"x*x_1/\\\\rtxsqmone(x)",sin:"\\\\cos(x)*x_1",cos:"-\\\\sin(x)*x_1",tan:"\\\\sec(x)^2*x_1",arcsin:"x_1/\\\\sqrt{1 - x^2}",arccos:"-x_1/\\\\sqrt{1 - x^2}",sinh:"\\\\cosh(x)*x_1",cosh:"\\\\sinh(x)*x_1",tanh:"(\\\\sech(x))^2*x_1",arcsinh:"x_1/\\\\sqrt{x^2 + 1}",arccosh:"\\\\{ x > 0: x_1/\\\\rtxsqmone(x) \\\\}",arctanh:"\\\\{ \\\\abs(x) < 1: x_1/(1 - x^2) \\\\}",csc:"-\\\\cot(x)*\\\\csc(x)*x_1",sec:"\\\\tan(x)*\\\\sec(x)*x_1",cot:"-\\\\csc(x)^2*x_1",arccsc:"-x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arcsec:"x_1/(\\\\abs(x)*\\\\rtxsqmone(x))",arccot:"-x_1/(1+x^2)",csch:"-\\\\coth(x)*\\\\csch(x)*x_1",sech:"-\\\\tanh(x)*\\\\sech(x)*x_1",coth:"-(\\\\csch(x))^2*x_1",arccsch:"-x_1/(\\\\abs(x)*\\\\rtxsqpone(x))",arcsech:"\\\\{ x >= 0: -x_1/(x*\\\\sqrt{1 - x^2}) \\\\}",arccoth:"\\\\{ \\\\abs(x) > 1 : x_1/(1 - x^2) \\\\}",factorial:"(x)!*\\\\polyGamma(0, x + 1)*x_1",floor:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",ceil:"\\\\{ \\\\mod(x, 1) > 0: 0*x_1 \\\\}",abs:"\\\\{ \\\\abs(x) > 0: \\\\sign(x)*x_1 \\\\}",sign:"\\\\{ \\\\abs(x) > 0: 0*x_1 \\\\}",mean:"\\\\mean(x_1)",total:"\\\\total(x_1)",length:"0",var:"2*\\\\cov(x, x_1)",varp:"2*\\\\cov(x, x_1)*(\\\\length(x)-1)/\\\\length(x)",stdev:"\\\\cov(x, x_1)/\\\\stdev(x)",stdevp:"\\\\covp(x, x_1)/\\\\stdevp(x)",mad:"\\\\mean(\\\\sign(x-\\\\mean(x))*(x_1 - \\\\mean(x_1)))",min:"x_1[\\\\argmin(x)]",max:"x_1[\\\\argmax(x)]",median:"0.5*(x_1[\\\\lowerQuantileIndex(x, 0.5)] + x_1[\\\\upperQuantileIndex(x, 0.5)])",argmin:"0/0",argmax:"0/0",gcd:"0/0",lcm:"0/0",erf:"\\\\frac{2x_1}{\\\\sqrt{\\\\pi }}e^{-x^2}",invNorm:"\\\\frac{x_1}{\\\\pdf(\\\\normaldist(0,1),\\\\invNorm(x))}",negatePoint:"-x_1"},p={logbase:["\\\\{x > 0: \\\\frac{x_1}{x*\\\\ln(y)}\\\\}","\\\\frac{-\\\\log_{y}(x)*y_1}{y*\\\\ln(y)}"],nthroot:["x^{1/y - 1}/y*x_1","-\\\\frac{x^{1/y}*\\\\ln(x)*y_1}{y^2}"],polyGamma:["0/0","\\\\polyGamma(1 + x, y)*y_1"],mod:["\\\\{ \\\\abs(\\\\mod(x, y)) > 0: x_1 \\\\}","\\\\{ \\\\mod(x/y, 1) > 0: -\\\\floor(x/y)*y_1 \\\\}"],round:["\\\\{ \\\\abs(\\\\mod(x, 1) - 0.5) > 0: 0*x_1 \\\\}","0/0"],cov:["\\\\cov(x_1, y)","\\\\cov(x, y_1)"],covp:["\\\\covp(x_1, y)","\\\\covp(x, y_1)"],corr:["(\\\\cov(x_1, y) - (\\\\cov(x, y)*\\\\cov(x, x_1)/\\\\var(x)))/(\\\\stdevp(x)\\\\stdevp(y))","(\\\\cov(x, y_1) - (\\\\cov(x, y)*\\\\cov(y, y_1)/\\\\var(y)))/(\\\\stdevp(x)\\\\stdevp(y))"],spearman:["0/0","0/0"],quantile:["\\\\{ \\\\floor(y*(\\\\length(x)-1)) = y*(\\\\length(x)-1) :   x_1[\\\\upperQuantileIndex(x, y)],  (\\\\ceil(y*(\\\\length(x)-1)) - y*(\\\\length(x)-1))*x_1[\\\\lowerQuantileIndex(x, y)] +   (y*(\\\\length(x)-1) - \\\\floor(y*(\\\\length(x)-1)))*x_1[\\\\upperQuantileIndex(x, y)]\\\\}","\\\\{ \\\\floor(y*(\\\\length(x)-1)) < y*(\\\\length(x)-1) :   (x[\\\\upperQuantileIndex(x, y)] - x[\\\\lowerQuantileIndex(x, y)])*y_1\\\\}"],quartile:["0.5*(x_1[\\\\lowerQuartileIndex(x, y)] + x_1[\\\\upperQuartileIndex(x, y)])","0/0"],tscore:["\\\\frac{\\\\sqrt{\\\\length(x)}(\\\\stdev(x)*\\\\mean(x_1)-(\\\\mean(x)-y)*\\\\frac{\\\\cov(x,x_1)}{\\\\stdev(x)})}{\\\\stdev(x)^2}","-y_1*\\\\sqrt{\\\\length(x)}/\\\\stdev(x)"],quartileIndex:["0/0","0/0"],upperQuartileIndex:["0/0","0/0"],lowerQuartileIndex:["0/0","0/0"],upperQuantileIndex:["0/0","0/0"],lowerQuantileIndex:["0/0","0/0"],nCr:["0/0","0/0"],nPr:["0/0","0/0"],arctan:["x_1*y/(y^2+x^2)","-y_1*x/(y^2+x^2)"],poissonpdf:["0/0","y_1\\\\frac{e^{-y}(\\\\floor(x)-y)y^{(\\\\floor(x)-1)}}{\\\\floor(x)!}"],invPoisson:["0/0","0/0"],tpdf:["x_1*\\\\pdf(\\\\tdist(y),x)*\\\\frac{-(y+1)*x}{y+x^2}","y_1*\\\\frac{1}{2}\\\\pdf(\\\\tdist(y),x)(  \\\\frac{x^2-1}{y + x^2} + \\\\ln(\\\\frac{y}{y + x^2}) +   \\\\polyGamma(0, \\\\frac{1+y}{2}) - \\\\polyGamma(0, y/2))"],invT:["x_1/\\\\pdf(\\\\tdist(y),\\\\invT(x, y))","0/0"],addPoints:["x_1","y_1"],subtractPoints:["x_1","-y_1"],multiplyPoint:["x_1*y","x*y_1"],dividePoint:["x_1/y","-x*(y_1/y^2)"],midpoint:["x_1/2","y_1/2"],distance:["-((y.x-x.x)*x_1.x+(y.y-x.y)*x_1.y)/\\\\distance(x,y)","((y.x-x.x)*y_1.x+(y.y-x.y)*y_1.y)/\\\\distance(x,y)"]},h={tcdf:["-x_1*\\\\pdf(\\\\tdist(z),x)","y_1*\\\\pdf(\\\\tdist(z),y)","0/0"],poissoncdf:["0/0","0/0","z_1\\\\sum _{n=\\\\max(0,\\\\floor(\\\\min(x,y)))}^{\\\\floor(\\\\max(x,y))}\\\\frac{e^{-z}(n-z)z^{(n-1)}}{n!}"],normalpdf:["-x_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","y_1*\\\\frac{x-y}{z^2} \\\\pdf(\\\\normaldist(y,z),x)","z_1*(\\\\frac{(x-y-z)*(x-y+z)}{z^3}) \\\\pdf(\\\\normaldist(y,z),x)"],binompdf:["0/0","0/0","\\\\{0<=z<=1: z_1*\\\\pdf(\\\\binomialdist(y,z),x)*(\\\\frac{\\\\round(x)}{z}-\\\\frac{\\\\round(y)-\\\\round(x)}{1-z}), 0 \\\\}"],invBinom:["0/0","0/0","0/0"],uniformpdf:["0","\\\\{y<=x: \\\\frac{y_1}{(z-y)^2}, 0\\\\}","\\\\{z>=x: -\\\\frac{z_1}{(z-y)^2}, 0\\\\}"],invUniform:["\\\\{y<=x<=z: x_1*(z-y), 0\\\\}","\\\\{y<=x<=z: y_1*(1-x), 0\\\\}","\\\\{y<=x<=z: z_1*x, 0\\\\}"]},l={normalcdf:["-x_1\\\\pdf(\\\\normaldist(z,u), x)","y_1\\\\pdf(\\\\normaldist(z,u), y)","-z_1*(\\\\pdf(\\\\normaldist(z,u), y) - \\\\pdf(\\\\normaldist(z,u), x))","u_1*(  \\\\{\\\\abs(y)=1/0:0,\\\\frac{z-y}{u}\\\\pdf(\\\\normaldist(z,u),y)\\\\} -   \\\\{\\\\abs(x)=1/0:0,\\\\frac{z-x}{u}\\\\pdf(\\\\normaldist(z,u),x)\\\\})"],binomcdf:["0/0","0/0","0/0","\\\\{0<=u<=1: u_1*\\\\sum _{n=\\\\max(0,\\\\round(\\\\min(x,y)))}^{\\\\round(\\\\max(x,y))}(  \\\\pdf(\\\\binomialdist(z,u),n)*(\\\\frac{n}{u}-\\\\frac{\\\\round(z)-n}{1-u})), 0 \\\\}"],uniformcdf:["\\\\{z>u: 0/0, -x_1\\\\pdf(\\\\uniformdist(z,u), x)\\\\}","\\\\{z>u: 0/0, y_1\\\\pdf(\\\\uniformdist(z,u), y)\\\\}","\\\\{z>u: 0/0, z_1*(\\\\frac{\\\\{z<x<u:u-x,0\\\\} + \\\\{z<y<u:y-u,0\\\\}}{(u-z)^2})\\\\}","\\\\{z>u: 0/0, u_1*(\\\\frac{\\\\{z<x<u:x-z,0\\\\} + \\\\{z<y<u:z-y,0\\\\}}{(u-z)^2})\\\\}"]};for(var _ in v)e[_].prototype.takeDerivative=function(a,i){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t)};return f(t,e[0],a.substitute(r),i).getConcreteTree(c,o)}}(t.parse(v[_]),e[_].prototype._outputType||i.Number);for(_ in p)e[_].prototype.takeDerivative=function(a,i,s){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t),y:e[1],y_1:e[1].takeDerivative(t)};return u.Add([f(t,e[0],a.substitute(r),s),f(t,e[1],i.substitute(r),s)]).getConcreteTree(c,o)}}(t.parse(p[_][0]),t.parse(p[_][1]),e[_].prototype._outputType||i.Number);for(_ in h)e[_].prototype.takeDerivative=function(a,i,s,n){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t),y:e[1],y_1:e[1].takeDerivative(t),z:e[2],z_1:e[2].takeDerivative(t)};return u.Add([u.Add([f(t,e[0],a.substitute(r),n),f(t,e[1],i.substitute(r),n)]),f(t,e[2],s.substitute(r),n)]).getConcreteTree(c,o)}}(t.parse(h[_][0]),t.parse(h[_][1]),t.parse(h[_][2]),e[_].prototype._outputType||i.Number);for(_ in l)e[_].prototype.takeDerivative=function(a,i,s,n,x){return function(t){var e=this.args,r={x:e[0],x_1:e[0].takeDerivative(t),y:e[1],y_1:e[1].takeDerivative(t),z:e[2],z_1:e[2].takeDerivative(t),u:e[3],u_1:e[3].takeDerivative(t)};return u.Add([u.Add([f(t,e[0],a.substitute(r),x),f(t,e[1],i.substitute(r),x)]),u.Add([f(t,e[2],s.substitute(r),x),f(t,e[3],n.substitute(r),x)])]).getConcreteTree(c,o)}}(t.parse(l[_][0]),t.parse(l[_][1]),t.parse(l[_][2]),t.parse(l[_][3]),e[_].prototype._outputType||i.Number);var f=function(t,e,r,a){if(void 0===a&&(a=i.Number),e.dependsOn(t))return r;if(a===i.Number)return n;if(a===i.Point)return y;throw s.parseError()};for(var m in d){var g=d[m];u[m].prototype.takeDerivative=g}["tSample","poissonSample","uniformSample","normalSample","binomSample"].forEach(function(t){e[t].prototype.takeDerivative=function(t){for(var e=0;e<this.args.length;e++)if(this.args[e].dependsOn(t))return u.Constant(NaN);return n}})});\ndefine(\'core/math/features/substitute\',[\'require\',\'parsenodes\'],function(require){"use strict";var t=require("parsenodes"),s={Identifier:function(t){return t[this._symbol]?t[this._symbol]:this},FreeVariable:function(t){return t[this._symbol]?t[this._symbol]:this},Constant:function(t){return this},Expression:function(s){return this.copyWithArgs(this.args.map(function(t){return t.substitute(s)}))},List:function(s){return t.List(this.args.map(function(t){return t.substitute(s)}))},SolvedEquation:function(t){return new this.constructor(this._symbol,this._expression.substitute(t))},OptimizedRegression:function(t){return new this.constructor(this.model.substitute(t),this.parameters,this.residualVariables,this.residuals,this.statistics)}};for(var i in s)t[i].prototype.substitute=s[i]});\ndefine(\'core/math/features/isImplicit\',[\'require\',\'parsenodes\'],function(require){"use strict";var i=require("parsenodes");function t(t){return!(t[0]instanceof i.FreeVariable)||t[1].dependsOn(t[0]._symbol)}i.Base.prototype.isImplicit=function(){return!1},i.Equation.prototype.isImplicit=function(){return t(this.args)},i.BaseComparator.prototype.isImplicit=function(){return t(this.args)},i.Broadcast.prototype.isImplicit=function(){return this._expression.isImplicit()}});\ndefine(\'core/math/workerconfig\',[],function(){"use strict";return{pointsOfInterest:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,sliders:!0}});\ndefine(\'core/math/features/solve\',[\'require\',\'core/math/baseparser\',\'parsenodes\',\'core/math/errormsg\',\'core/math/builtinframe\',\'core/math/workerconfig\',\'core/math/maybe-rational\',\'core/math/policy\'],function(require){"use strict";var e=require("core/math/baseparser"),t=require("parsenodes"),r=t.Base,d=t.Constant,a=t.Equation,C=t.SolvedEquation,i=t.BaseComparator,y=t.List,q=require("core/math/errormsg"),v=require("core/math/builtinframe"),V=require("core/math/workerconfig"),n=require("core/math/maybe-rational").maybeRational,h=require("core/math/policy").defaultPolicy,T=d(n(0,1));var s=e.parse("b*b"),o=e.parse("4*a*c"),l=e.parse("(-b+\\\\sqrt{b*b-4*a*c})/(2*a)"),c=e.parse("(-b-\\\\sqrt{b*b-4*a*c})/(2*a)"),u=e.parse("[\\\\{\\\\abs(b)>0:-c/b\\\\}]"),p=e.parse("[\\\\{\\\\abs(a)>0:-b/(2*a)\\\\}]"),f=e.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},p\\\\}]"),b=e.parse("[\\\\{a=0:\\\\{b<0:-c/b\\\\},a>0:q\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:-m\\\\}\\\\},a>0:\\\\{f<g:-m\\\\},p\\\\},\\\\{a=0:\\\\{b=0:\\\\{c>0:m\\\\}\\\\},a>0:\\\\{f<g:m\\\\},q\\\\},\\\\{a=0:\\\\{b>0:-c/b\\\\},a>0:p\\\\}]");function I(e,r,t,a){for(var i,n,s,o,l=[],c=[],u=0;u<t.length;u++){var p=t[u],f=0;y.eachArgs(e,[r],function(e){var r=e[0];f=Math.max(f,r.polynomialOrder(p))});var b=2<f,g=1<t.length&&!e.validSolvedVariable(p),m=a&&r.piecewiseDependsOn(p);b||g||m?(c[u]={},l[u]=1/0):(c[u]=[],l[u]=0,y.eachArgs(e,[r],function(e){var r,t,a,i=e[0];r=i.getPolynomialCoefficients(p),(t=Object.create(v)).a=r[2]?r[2].tryGetConcreteTree(h,v):T,t.b=r[1]?r[1].tryGetConcreteTree(h,v):T,t.c=r[0]?r[0].tryGetConcreteTree(h,v):T,n=t,c[u].push(n),l[u]=Math.max(l[u],0===(a=n).a.asValue()?0===a.b.asValue()?0:1:2)}))}return o=1===t.length?(n=c[0],s=t[0],l[0]):(i=0!==l[0]&&(0===l[1]||l[0]<l[1])?0:1,n=c[i],s=t[i],l[i]),{localFrame:n,variableOfInterest:s,effectiveOrder:o}}var E={inequality:function(e){return g(e),b.getConcreteTree(h,e)},generalEquation:function(e){return g(e),e.a.isConstant&&0===e.a.asValue()?u.getConcreteTree(h,e):e.f.isConstant&&e.g.isConstant&&e.f.asValue()-e.g.asValue()==0?p.getConcreteTree(h,e):f.getConcreteTree(h,e)}};function g(e){e.f=s.getConcreteTree(h,e),e.g=o.getConcreteTree(h,e),e.p=l.getConcreteTree(h,e),e.q=c.getConcreteTree(h,e),e.m=d(n(1e305,1))}r.prototype.trySolve=function(e,r){try{return this.solve(e,r)}catch(e){if(e instanceof t.Error)return e;throw e}},a.prototype.solve=function(e,r){return this.asComparator().solve(e,r)},i.prototype.solve=function(e,r){var t=this.tryGetConcreteTree(e,r);if(t.isError)return t;if(t.isConstant)return t;var a="="!==this.getOperator();if(!V.plotImplicits&&t.isImplicit())throw new q.implicitsDisabled;var i=this._difference.tryGetConcreteTree(e,r);i.isBroadcast&&(i=i.asList(e));var n=i.getDependencies();if(0===n.length)return i.isList?y(i.args.map(function(e){return d(0===e.asValue())})):d(0===i.asValue());if(1===n.length&&i.isList&&!a)return i;if(1===n.length&&!a&&!V.plotSingleVariableImplicitEquations)return q.singleVariableImplicitEquationsDisabled();var s=y.wrap(i);if(2<n.length)return q.tooManyVariables(this.getSliderVariables(e,t)).setDependencies(n);if(a&&!e.validInequalityVariables(n))return q.invalidInequalityVariables().setDependencies(n);var o=I(e,s,n,a),l=o.localFrame,c=o.effectiveOrder,u=o.variableOfInterest;if(e.complicatedPolarImplicit(u,c))return q.complicatedPolarImplicit().setDependencies(n);if(!e.validImplicitVariables(n))return q.invalidImplicitVariables();if(2<c)return i;for(var p=a?E.inequality:E.generalEquation,f=[],b=0;b<l.length;b++){var g=p(l[b]);if(g.isError)return g;if(g.isConstant)f.push(g);else for(var m=0;m<g.args.length;m++){var v=g.args[m],h=s.args[b].extractConditions(u,v).getConcreteTree(e,r);f.push(h)}}return C(u,y(f))}});\ndefine(\'core/types/graphmode\',["require","exports"],function(require,I){"use strict";Object.defineProperty(I,"__esModule",{value:!0}),I.PARAMETRIC_CURVE_3D=I.Z_3D=I.OBJECT3D=I.VISUALIZATION=I.NONE=I.IMPLICIT=I.POLYGONFILL=I.POLAR=I.PARAMETRIC=I.XYPOINT_MOVABLE=I.XYPOINT=I.Y=I.X=void 0,I.X=1,I.Y=2,I.XYPOINT=3,I.XYPOINT_MOVABLE=4,I.PARAMETRIC=5,I.POLAR=6,I.POLYGONFILL=7,I.IMPLICIT=8,I.NONE=10,I.VISUALIZATION=11,I.OBJECT3D=12,I.Z_3D=13,I.PARAMETRIC_CURVE_3D=14});\ndefine(\'core/math/distribution-spec\',["require","exports","core/math/baseparser","tslib"],function(require,d,i,l){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),d.getFunctionSpecFromTree=d.parseToplevelFunction=d.DistributionParameterDefaultsMap=void 0,d.DistributionParameterDefaultsMap={normaldist:{type:"distribution",symbol:"normaldist",params:["mean","stdev"],defaults:["0","1"],discrete:!1},tdist:{type:"distribution",symbol:"tdist",params:["dof"],defaults:[void 0],discrete:!1},binomialdist:{type:"distribution",symbol:"binomialdist",params:["trials","probsuccess"],defaults:[void 0,"0.5"],discrete:!0},poissondist:{type:"distribution",symbol:"poissondist",params:["mean"],defaults:[void 0],discrete:!0},uniformdist:{type:"distribution",symbol:"uniformdist",params:["min","max"],defaults:["0","1"],discrete:!1}};var u={Histogram:{type:"visualization",symbol:"histogram",params:["data","binwidth"],defaults:[void 0,"1"]},DotPlot:{type:"visualization",symbol:"dotplot",params:["data","binwidth"],defaults:[void 0,"1"]},BoxPlot:{type:"visualization",symbol:"boxplot",params:["data"],defaults:[void 0]}};function s(t){var i=t,s=u[i.type];if(!s)switch("Assignment"===i.type&&(i=i._expression),i.type){case"FunctionCall":s=d.DistributionParameterDefaultsMap[i._symbol];break;default:return}if(s){for(var e={},a=s.params,o=i.args,r=0;r<a.length;r++){var n=o[r];e[a[r]]=n&&n.getInputString()||""}return l.__assign(l.__assign({},s),{span:i.getInputSpan(),values:e})}}d.parseToplevelFunction=function(t){return s(i.parse(t,{trailingComma:!0}))},d.getFunctionSpecFromTree=s});\ndefine(\'core/math/evaluationstate\',["require","exports","core/vendor/d3-color","parsenodes","./errormsg","core/types/graphmode","core/lib/label","core/math/distribution-spec","./types"],function(require,e,m,h,b,_,E,y,S){"use strict";function V(e){return e.isError?e.getError():void 0===e.asValue()?"":+e.asValue()}function M(){return{operator:"=",variables:[]}}function x(e,r,i){var a=e.variables;if(a&&a.length){for(var s={},t=0,n=a;t<n.length;t++){s[o=n[t]]=!0}for(var o in i)s[o]=!0;i=s}e.variables=r.sliderVariables(Object.keys(i))}Object.defineProperty(e,"__esModule",{value:!0}),e.addSliderPrompts=e.EvaluationState=e.defaultEvaluationState=void 0,e.defaultEvaluationState=M,e.EvaluationState=function(e,r,i){if(r.isTable)return function(e,r){for(var i=[],a=0;a<e.columns.length;a++){var s=r.columns[a],t=s.isError?[]:s.values.map(V),n={dependent:!s.isIndependent,discrete:!!s.isIndependent,values:t};s.isError&&(n.error=s.getError()),i.push(n)}return{column_data:i}}(r,i);if(r.isImage)return a=e,s=r,n={variables:[],errorMap:{},dimensions:{}},(t=i).center.isError&&(n.errorMap.center=!0),t.radianAngle.isError&&(n.errorMap.angle=!0),t.width.isError&&(n.errorMap.width=!0),t.height.isError&&(n.errorMap.height=!0),t.opacity.isError&&(n.errorMap.opacity=!0),t.center.isError||t.radianAngle.isError||t.width.isError||t.height.isError||t.opacity.isError?n.variables=s.getSliderVariables(a,t):(n.dimensions.x=[],n.dimensions.y=[],n.dimensions.radianAngle=[],n.dimensions.width=[],n.dimensions.height=[],n.dimensions.opacity=[],h.List.eachArgs(a,[t.center,t.radianAngle,t.width,t.height,t.opacity],function(e){var r=e[0].asValue(),i=+e[1].asValue(),a=Math.atan2(Math.sin(i),Math.cos(i));n.dimensions.x.push(+r[0]),n.dimensions.y.push(+r[1]),n.dimensions.radianAngle.push(a),n.dimensions.width.push(+e[2].asValue()),n.dimensions.height.push(+e[3].asValue()),n.dimensions.opacity.push(Math.max(0,Math.min(1,+e[4].asValue())))}),(a.graphingEnabled()?s.getGraphMode(a,t):_.NONE)!==_.NONE&&(n.is_graphable=!0),t.moveStrategy&&(n.move_strategy=t.moveStrategy)),n;var a,s,t,n;if(r.isSimulation)return function(e,r){var i=r.fps,a=i.asValue(),s=void 0;("number"!=typeof a||a<0)&&(a=0,s=b.simulationFPSNonNegativeNumber().getError());for(var t={},n=0,o=i.getDependencies();n<o.length;n++){t[o[n]]=!0}var l={variables:[],fps:a,fps_error:s};return x(l,e,t),l}(e,i);var o,l=M();if(i.isError&&(!(r instanceof h.FunctionDefinition)||i.blocksExport))return l.error=i.getError(),l.variables=r.getSliderVariables(e,i),l.is_single_identifier=r instanceof h.Identifier,l;i instanceof h.RGBColor&&(o=i.asValue(),l.rgb_value=m.rgb(o[0],o[1],o[2]).formatHex()),i.moveStrategy&&(l.move_strategy=i.moveStrategy,l.default_drag_mode=i.defaultDragMode),r.isInequality()&&(l.is_inequality=!0),l.operator=r.getOperator(),i instanceof h.SolvedEquation?!0!==i._expression.asValue()&&!1!==i._expression.asValue()&&(l.assignment=i._symbol):r instanceof h.Assignment&&(l.assignment=r._symbol);var d,u=e.graphingEnabled()?r.getGraphMode(e,i):_.NONE;u!==_.NONE&&(l.is_graphable=!0,l.expression_type=r.getExpressionType(u,i.valueType),i.isShadeBetween()&&(l.is_shade_between=!0),(d=r.tableInfo(e,i))&&(l.is_tableable=!0,l.table_info=d)),void 0!==i.valueType&&S.isList(i.valueType)&&(l.is_concrete_list=!0),l.variables=l.is_graphable?[]:r.getSliderVariables(e,i),l.is_single_identifier=r instanceof h.Identifier,i.isConstant&&(l.constant_value=i.asValue());var g=i.getEvaluationInfo();if(!g||"="!==l.operator||r.isConstant||r.isFunction||i.valueType===S.Bool||i.valueType===S.ListOfBool||r instanceof h.Equation||r instanceof h.And||(l.is_evaluable=!0,l.zero_values=g),i instanceof h.OptimizedRegression){var p=i,c={};for(var v in p.parameters)p.parameters.hasOwnProperty(v)&&(c[E.identifierToLatex(v)]=+p.parameters[v].asValue());l.is_regression=!0,l.regression={parameters:c,residualVariable:E.identifierToLatex(p.residualVariable),residualSuggestionId:p.residualSuggestionId,shouldSuggestLogMode:p.shouldSuggestLogMode,isLinear:p.isLinear,statistics:p.statistics,parameterWarning:p.parameterWarning}}var f=y.getFunctionSpecFromTree(r);return f&&f.discrete&&(l.is_discrete_distribution=!0),l},e.addSliderPrompts=x});\ndefine(\'core/math/statementanalysis\',[\'require\',\'core/math/evaluationstate\',\'pjs\',\'core/types/graphmode\',\'core/math/workerconfig\'],function(require){"use strict";var i=require("core/math/evaluationstate").EvaluationState,e=require("pjs"),t=require("core/types/graphmode"),r=require("core/math/workerconfig");return e(function(e){e.init=function(e,t,r){this.policy=e,this.rawTree=t,this.concreteTree=r,this.evaluationState=i(e,t,r)},e.exportTo=function(e,t){this.rawTree.exportTo(e,this.concreteTree,t)},e.graph=function(e){return this.rawTree.graph(this.policy,this.concreteTree,e)},e.getGraphMode=function(){return this.rawTree.getGraphMode(this.policy,this.concreteTree)},e.getGraphInfo=function(){return this.rawTree.getGraphInfo(this.policy,this.concreteTree)},e.shouldIntersect=function(){if(!this.evaluationState.is_graphable)return!1;if(!this.rawTree.userData.shouldGraph)return!1;if(!r.pointsOfInterest)return!1;var e=this.getGraphMode();return e===t.X||e===t.Y}})});\ndefine(\'core/math/expression-types\',["require","exports"],function(require,T){"use strict";var l,i;Object.defineProperty(T,"__esModule",{value:!0}),T.isClickableExpressionType=T.getReconciledExpressionProps=T.EXPRESSION_PROP_DEFAULTS=T.ExpressionType=void 0,(i=l=T.ExpressionType||(T.ExpressionType={})).X_OR_Y="X_OR_Y",i.SINGLE_POINT="SINGLE_POINT",i.POINT_LIST="POINT_LIST",i.PARAMETRIC="PARAMETRIC",i.POLAR="POLAR",i.IMPLICIT="IMPLICIT",i.POLYGON="POLYGON",i.HISTOGRAM="HISTOGRAM",i.DOTPLOT="DOTPLOT",i.BOXPLOT="BOXPLOT",i.TTEST="TTEST",i.STATS="STATS",i.CUBE="CUBE",i.SPHERE="SPHERE",T.EXPRESSION_PROP_DEFAULTS={X_OR_Y:{points:!1,lines:!0,fill:!1},SINGLE_POINT:{points:!0,lines:!1,fill:!1},POINT_LIST:{points:!0,lines:!1,fill:!1},PARAMETRIC:{points:!1,lines:!0,fill:!1},POLAR:{points:!1,lines:!0,fill:!1},IMPLICIT:{points:!1,lines:!0,fill:!1},POLYGON:{points:!1,lines:!0,fill:!0},HISTOGRAM:{points:!1,lines:!0,fill:!0},DOTPLOT:{points:!0,lines:!1,fill:!1},BOXPLOT:{points:!1,lines:!0,fill:!1},TTEST:{points:!1,lines:!1,fill:!1},STATS:{points:!1,lines:!1,fill:!1},CUBE:{points:!1,lines:!1,fill:!0},SPHERE:{points:!1,lines:!1,fill:!0}},T.getReconciledExpressionProps=function(i,s){if(void 0===i)return{points:!1,lines:!1,fill:!1};var e=T.EXPRESSION_PROP_DEFAULTS[i];switch(i){case l.SINGLE_POINT:return{points:!0,lines:!1,fill:!1};case l.POINT_LIST:case l.DOTPLOT:return{points:void 0===s.points?e.points:s.points,lines:void 0===s.lines?e.lines:s.lines,fill:!1};case l.PARAMETRIC:case l.POLYGON:case l.X_OR_Y:case l.POLAR:case l.IMPLICIT:case l.HISTOGRAM:case l.BOXPLOT:case l.TTEST:case l.STATS:case l.CUBE:case l.SPHERE:return{points:!1,lines:void 0===s.lines?e.lines:s.lines,fill:void 0===s.fill?e.fill:s.fill};default:return i}},T.isClickableExpressionType=function(i){if(void 0===i)return!1;switch(i){case l.SINGLE_POINT:case l.POINT_LIST:case l.PARAMETRIC:case l.POLYGON:case l.X_OR_Y:case l.POLAR:case l.IMPLICIT:return!0;case l.HISTOGRAM:case l.BOXPLOT:case l.DOTPLOT:case l.TTEST:case l.STATS:case l.CUBE:case l.SPHERE:return!1;default:return i}}});\ndefine(\'core/math/features/analyze\',[\'require\',\'underscore\',\'parsenodes\',\'core/math/statementanalysis\',\'core/math/builtin\',\'core/math/builtinframe\',\'core/math/parsenode/builtinfunction\',\'core/math/errormsg\',\'core/math/comparators\',\'core/math/types\',\'core/types/graphmode\',\'core/math/expression-types\',\'core/math/distribution-spec\',\'core/math/workerconfig\'],function(require){"use strict";var l=require("underscore"),u=require("parsenodes"),h=require("core/math/statementanalysis"),a=require("core/math/builtin"),c=require("core/math/builtinframe"),o=require("core/math/parsenode/builtinfunction"),p=require("core/math/errormsg"),n=require("core/math/comparators"),s=require("core/math/types"),d=require("core/types/graphmode"),y=require("core/math/expression-types").ExpressionType,g=require("core/math/distribution-spec").DistributionParameterDefaultsMap,b=require("core/math/workerconfig");function v(e,t,r,i){if(i.isError)return h(e,r,i);var n=i.getDependencies();switch(i.valueType){case s.Distribution:case s.ListOfDistribution:case s.RGBColor:case s.ListOfColor:case s.EmptyList:return h(e,r,i);case s.Point:case s.ListOfPoint:return n.length?e.validParametricVariables(n)?h(e,r,i):h(e,r,p.tooManyVariables(r.getSliderVariables(e,i)).setDependencies(n)):h(e,r,i);case s.Number:case s.ListOfNumber:return 0===n.length?h(e,r,i):n.length<=e.dimensions()-1?e.validExpressionVariables(n)?h(e,r,i):h(e,r,p.equationRequired(e.implicitDependency(n)).setDependencies(n)):e.validImplicitVariables(n)?h(e,r,p.equationRequired().setDependencies(n)):h(e,r,p.tooManyVariables(r.getSliderVariables(e,i)).setDependencies(n));default:return h(e,r,p.parseError())}}function m(e){return o.pdf([e,u.FreeVariable("x")])}function e(e,t){var r=this.tryGetConcreteTree(e,t),i=r.getDependencies();return i.length?h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i)):h(e,this,this.tryGetConcreteTree(e,t))}function t(a){return function(e,t){var r=this.tryGetConcreteTree(e,t),i=r.getDependencies();if(i.length)return h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i));var n,s=h(e,this,this.tryGetConcreteTree(e,t));return r.isError||(s.evaluationState.expression_type=y.TTEST,n=r.args.map(function(e){return e.asValue()}),s.evaluationState.ttest_results=a.apply(null,n)),s}}u.Base.prototype.analyze=function(e,t){return h(e,this,this.tryGetConcreteTree(e,t))},u.FunctionCall.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);return!r.isError&&g[this._symbol]&&0===r.getDependencies().length&&(r=m(r).tryGetConcreteTree(e,t)),v(e,0,this,r)},u.Expression.prototype.analyze=function(e,t){return v(e,0,this,this.tryGetConcreteTree(e,t))},u.FunctionDefinition.prototype.analyze=function(e,t){if(c[this._symbol])return this.asEquation().analyze(e,t);var r=this._symbol.split("_")[0];if(o[r])return h(e,this,p.cannotRedefine(this._symbol,r));var i=this.tryGetConcreteTree(e,t);if(i.isError)return h(e,this,i);var n=this._argSymbols,s=i.getDependencies();if(-1!==s.indexOf(this._symbol))return h(e,this,p.selfReferentialFunction(this._symbol));var a=s.filter(function(e){return-1===n.indexOf(e)});return e.unplottablePolarFunction(this._symbol,s)?h(e,this,p.unplottablePolarFunction()):a.some(e.assignmentForbidden)?h(e,this,p.addArgumentsToDefinition(a,this._symbol,n).setDependencies(s)):a.length?h(e,this,p.tooManyVariables(this.getSliderVariables(e,i)).setDependencies(s)):h(e,this,i)},u.Assignment.prototype.analyze=function(e,t,r){var i=this._symbol;if(!e.validLHS(i))return h(e,this,p.invalidLHS(i));if(c[i])return this.asEquation().analyze(e,t);var n=this.tryGetConcreteTree(e,t);if(!n.isError&&this._expression instanceof u.FunctionCall&&g[this._expression._symbol]&&0===n.getDependencies().length&&(n=m(n).tryGetConcreteTree(e,t)),n.isError)return h(e,this,n);var s=n.getDependencies();if(this.isEquation(n))return this.asEquation().analyze(e,t);if(1<s.length){var a=this.getSliderVariables(e,n);return a.length?h(e,this,p.tooManyVariables(a).allowExport().setDependencies(s)):h(e,this,n)}var o=this.getMoveStrategy(e,t,n,r,this.userData);if(o){var l=this.getDefaultDragMode(o);return h(e,this,u.MovablePoint(n.args,o,l))}return h(e,this,n)},u.Regression.prototype.analyze=function(e,t,r,i,n){return h(e,this,this.tryOptimize(e,t,r,i,n))},u.Polygon.prototype.analyze=e,u.Histogram.prototype.analyze=e,u.Object3D.prototype.analyze=e,u.DotPlot.prototype.analyze=e,u.BoxPlot.prototype.analyze=e,u.TTest.prototype.analyze=t(a.ttest),u.IndependentTTest.prototype.analyze=t(a.ittest),u.Stats.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t),i=r.getDependencies();if(i.length)return h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i));var n,s=h(e,this,this.tryGetConcreteTree(e,t));return r.isError||(s.evaluationState.expression_type=y.STATS,n=r.args.map(function(e){return e.asValue()}),s.evaluationState.stats_results=a.stats.apply(null,n)),s},u.Equation.prototype.analyze=u.BaseComparator.prototype.analyze=function(e,t){var r="="!==this.getOperator();if(!b.plotInequalities&&r)return h(e,this,p.inequalitiesDisabled());var i=this.trySolve(e,t);if(i.isError)return h(e,this,i);if(i instanceof u.SolvedEquation&&i.getDependencies().length){var n=i.getDependencies().concat(i._symbol);if(!e.validImplicitVariables(n))return h(e,this,p.invalidImplicitVariables().setDependencies(n))}return this.getGraphMode(e,i)!==d.IMPLICIT||e.validImplicitVariables(i.getDependencies())?h(e,this,i):h(e,this,p.invalidImplicitVariables().setDependencies(i.getDependencies()))},u.DoubleInequality.prototype.analyze=function(e,t){if(!b.plotInequalities)return h(e,this,p.inequalitiesDisabled());var r=this.tryGetConcreteTree(e,t);if(r.isError)return h(e,this,r);var i=r.getDependencies();return n.table[this._operators[0]].direction!==n.table[this._operators[1]].direction?h(e,this,p.mismatchedDoubleInequality()):e.validDoubleInequalitySymbol(r._symbol)&&e.validDoubleInequalityVariables(i)?2<i.length?h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i)):-1!==r._expressions[0].getDependencies().indexOf(r._symbol)||-1!==r._expressions[1].getDependencies().indexOf(r._symbol)?h(e,this,p.complicatedDoubleInequality().setDependencies(i)):h(e,this,r):h(e,this,p.invalidDoubleInequalityVariables().setDependencies(i))},u.And.prototype.analyze=function(e,t){var r=this.tryGetConcreteTree(e,t);if(r.isError)return h(e,this,r);var i=r.getDependencies();return i.length?e.validDoubleInequalityVariables(i)?h(e,this,p.complicatedDoubleInequality().setDependencies(i)):h(e,this,p.tooManyVariables(this.getSliderVariables(e,r)).setDependencies(i)):h(e,this,r)},u.OrderedPair.prototype.analyze=function(e,t,r){var i=this.tryGetConcreteTree(e,t);if(i.isError)return h(e,this,i);var n=this.getMoveStrategy(e,t,i,r,this.userData);if(n){var s=this.getDefaultDragMode(n);return h(e,this,u.MovablePoint(i.args,n,s))}return v(e,0,this,i)},u.Table.prototype.analyze=function(e,t){for(var r=Object.create(t),i=[],n=0;n<this.columns.length;n++){var s,a=this.columns[n].analyze(e,r,t);0===n&&(a.concreteTree.isIndependent?e.validFirstColumnVariable(a.concreteTree.header._symbol)?a.concreteTree.header._symbol:a=h(e,this.columns[n],p.invalidFirstTableColumn()):a=h(e,this.columns[n],p.invalidDependentFirstTableColumn())),a.concreteTree.isIndependent?a.rawTree.exportToLocal(a.concreteTree,r):a.concreteTree.isError||(s=function(e,t){return e.filter(function(e){return!t[e]})}(a.concreteTree.header.getDependencies(),r)).length&&(a=h(e,this.columns[n],p.tooManyVariables(s).setDependencies(s))),i.push(a.concreteTree)}var o=u.Table(i),l=h(e,this,o);return l.evaluationState.is_graphable=!0,l},u.TableColumn.prototype.analyze=function(e,t,r){var i=this.header.tableError();if(i)return h(e,this,p.invalidTableHeader(i));var n=this.tryGetConcreteTree(e,t,r);if(n.isError)return h(e,this,n);if(n.header.isError)return h(e,this,n.header);if(n.values.isError)return h(e,this,n.values);for(var s,a,o=0;o<n.values.length;o++){n.values[o].isError||((s=this.values[o]&&this.values[o].tableError())?n.values[o]=p.invalidTableEntry(s):(a=n.values[o].getDependencies()).length&&(n.values[o]=p.tooManyVariables(a).setDependencies(a)))}return h(e,this,n)},u.Image.prototype.analyze=function(e,t,r){var i=this.tryGetConcreteTree(e,t);if(i.radianAngle.isError||i.center.isError||i.width.isError||i.height.isError||i.opacity.isError)return h(e,this,i);var n=i.center.getDependencies(),s=i.radianAngle.getDependencies(),a=i.width.getDependencies(),o=i.height.getDependencies(),l=i.opacity.getDependencies();return n.length||s.length||a.length||o.length||l.length?h(e,this,u.Image({center:n.length?p.tooManyVariables(s).setDependencies(n):i.center,radianAngle:s.length?p.tooManyVariables(s).setDependencies(s):i.radianAngle,width:a.length?p.tooManyVariables(a).setDependencies(a):i.width,height:o.length?p.tooManyVariables(o).setDependencies(o):i.height,opacity:l.length?p.tooManyVariables(l).setDependencies(l):i.opacity})):(i.moveStrategy=this.getMoveStrategy(e,t,i,r,this.userData),h(e,this,i))},u.Simulation.prototype.analyze=function(e,t,r){var i=this.tryGetConcreteTree(e,t);return h(e,this,i)},u.Slider.prototype.analyze=function(e,t){var r,i,n,s=this.tryGetConcreteTree(e,t),a=s.sliderInfo,o=(i=a.missingVars.length?(r=l.unique(a.missingVars),h(e,this,p.tooManyVariables(e.sliderVariables(r)).setDependencies(r).allowExport())):h(e,this,s)).evaluationState;return b.sliders&&(o.assignment=a.exportedSymbol,o.slider_min_number=a.values.min,o.slider_max_number=a.values.max,o.slider_step_number=a.values.step,o.slider_min_valid=a.valids.min,o.slider_max_valid=a.valids.max,o.slider_step_valid=a.valids.step,n=o.slider_min_valid&&o.slider_max_valid&&o.slider_step_valid,o.is_slider=!0,o.raw_slider_latex=this.getInputString(),o.is_slidable=n,o.is_animatable=o.is_slidable&&!o.is_graphable,a.errMsg&&(o.error=a.errMsg.getError())),delete o.is_evaluable,delete o.zero_values,i}});\ndefine(\'core/math/features/analyzeFourFunction\',[\'require\',\'parsenodes\',\'core/math/statementanalysis\',\'core/math/errormsg\',\'core/math/parsenode/builtinfunction\',\'core/math/builtinconstants\'],function(require){"use strict";var n=require("parsenodes"),u=require("core/math/statementanalysis"),s=require("core/math/errormsg"),a=require("core/math/parsenode/builtinfunction"),p=require("core/math/builtinconstants");function t(n,t){return u(n,this,s.inequalitiesUnsupported())}n.Base.prototype.analyzeFourFunction=function(n,t){var r=this.tryGetConcreteTree(n,t);return r.isError?u(n,this,r):u(n,this,s.parseError())},n.Expression.prototype.analyzeFourFunction=function(n,t){var r=this.tryGetConcreteTree(n,t);if(r.isError)return u(n,this,r);var o=r.getDependencies();if(0<o.length){var e=o[0],i=a.hasOwnProperty(e)?s.functionUnsupported(e):p.hasOwnProperty(e)?s.constantUnsupported(e):s.variablesUnsupported(e);return u(n,this,i)}return u(n,this,r)},n.Assignment.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.assignmentsUnsupported())},n.FunctionDefinition.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.functionDefinitionsUnsupported())},n.Equation.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.equationsUnsupported())},n.And.prototype.analyzeFourFunction=t,n.DoubleInequality.prototype.analyzeFourFunction=t,n.BaseComparator.prototype.analyzeFourFunction=t,n.Regression.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.regressionsUnsupported())},n.OrderedPair.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.pointsUnsupported())},n.RGBColor.prototype.analyzeFourFunction=function(n,t){return u(n,this,s.colorsUnsupported())}});\ndefine(\'core/math/features/analyzeScientific\',[\'require\',\'parsenodes\',\'core/math/statementanalysis\',\'core/math/errormsg\',\'core/math/builtinframe\'],function(require){"use strict";var t=require("parsenodes"),s=require("core/math/statementanalysis"),a=require("core/math/errormsg"),c=require("core/math/builtinframe");function e(t,e){return s(t,this,a.inequalitiesUnsupported())}t.Base.prototype.analyzeScientific=function(t,e){var i=this.tryGetConcreteTree(t,e);return i.isError?s(t,this,i):s(t,this,a.parseError())},t.Expression.prototype.analyzeScientific=function(t,e){var i=this.tryGetConcreteTree(t,e);if(i.isError)return s(t,this,i);var n=i.getDependencies();return 0<n.length?s(t,this,a.tooManyVariables(n)):s(t,this,i)},t.Assignment.prototype.analyzeScientific=function(t,e){var i=this._symbol;if(c[i])return s(t,this,a.cannotRedefine(i));var n=this.tryGetConcreteTree(t,e);if(n.isError)return s(t,this,n);var r=n.getDependencies();return this.isEquation(n)?s(t,this,a.equationsUnsupported()):0<r.length?s(t,this,a.tooManyVariables(r)):s(t,this,n)},t.FunctionDefinition.prototype.analyzeScientific=function(t,e){if(c[this._symbol])return s(t,this,a.cannotRedefine(this._symbol));var i=this.tryGetConcreteTree(t,e);if(i.isError)return s(t,this,i);var n=this._argSymbols,r=i.getDependencies();if(-1!==r.indexOf(this._symbol))return s(t,this,a.selfReferentialFunction(this._symbol));var o=r.filter(function(t){return-1===n.indexOf(t)});return o.length?s(t,this,a.addArgumentsToDefinition(o,this._symbol,n)):s(t,this,i)},t.Equation.prototype.analyzeScientific=function(t,e){return s(t,this,a.equationsUnsupported())},t.And.prototype.analyzeScientific=e,t.DoubleInequality.prototype.analyzeScientific=e,t.BaseComparator.prototype.analyzeScientific=e,t.Regression.prototype.analyzeScientific=function(t,e){return s(t,this,a.regressionsUnsupported())},t.OrderedPair.prototype.analyzeScientific=function(t,e){return s(t,this,a.pointsUnsupported())},t.RGBColor.prototype.analyzeScientific=function(t,e){return s(t,this,a.colorsUnsupported())}});\ndefine(\'core/math/features/analyzeSingleExpressionScientific\',[\'require\',\'parsenodes\',\'core/math/statementanalysis\',\'core/math/errormsg\',\'core/math/parsenode/builtinfunction\',\'core/math/builtinconstants\'],function(require){"use strict";var e=require("parsenodes"),s=require("core/math/statementanalysis"),p=require("core/math/errormsg"),a=require("core/math/parsenode/builtinfunction"),c=require("core/math/builtinconstants");function n(e,n){return s(e,this,p.inequalitiesUnsupported())}e.Base.prototype.analyzeSingleExpressionScientific=function(e,n){var t=this.tryGetConcreteTree(e,n);return t.isError?s(e,this,t):s(e,this,p.parseError())},e.Expression.prototype.analyzeSingleExpressionScientific=function(e,n){var t=this.tryGetConcreteTree(e,n);if(t.isError)return s(e,this,t);var i=t.getDependencies();if(0<i.length){var r=i[0],o=a.hasOwnProperty(r)?p.functionUnsupported(r):c.hasOwnProperty(r)?p.constantUnsupported(r):p.variablesUnsupported(r);return s(e,this,o)}return s(e,this,t)},e.Assignment.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.assignmentsUnsupported())},e.FunctionDefinition.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.functionDefinitionsUnsupported())},e.Equation.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.equationsUnsupported())},e.And.prototype.analyzeSingleExpressionScientific=n,e.DoubleInequality.prototype.analyzeSingleExpressionScientific=n,e.BaseComparator.prototype.analyzeSingleExpressionScientific=n,e.Regression.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.regressionsUnsupported())},e.OrderedPair.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.pointsUnsupported())},e.RGBColor.prototype.analyzeSingleExpressionScientific=function(e,n){return s(e,this,p.colorsUnsupported())}});\ndefine(\'core/lib/dragmode\',["require","exports"],function(require,e){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.reconcileDragMode=e.DragMode=void 0,(r=o=e.DragMode||(e.DragMode={})).NONE="NONE",r.X="X",r.Y="Y",r.XY="XY",r.AUTO="AUTO",e.reconcileDragMode=function(e,r){var n,t=!(n=r)||"none"===n[0].type&&"none"===n[1].type?o.NONE:"none"===n[1].type?o.X:"none"===n[0].type?o.Y:o.XY;switch(e){case o.NONE:return o.NONE;case o.AUTO:case o.XY:return t;case o.X:return t===o.X||t===o.XY?o.X:o.NONE;case o.Y:return t===o.Y||t===o.XY?o.Y:o.NONE;default:return o.NONE}}});\ndefine(\'core/math/features/getgraphmode\',[\'require\',\'parsenodes\',\'core/types/graphmode\',\'core/lib/dragmode\',\'core/lib/dragmode\',\'core/math/types\'],function(require){"use strict";var o=require("parsenodes"),i=require("core/types/graphmode"),a=require("core/lib/dragmode").reconcileDragMode,p=require("core/lib/dragmode").DragMode,u=require("core/math/types");function s(e,t){var r,o,s,n=t.getDependencies();switch(t.valueType){case u.Point:case u.ListOfPoint:return t.isMovablePoint&&(r=this.userData,o=t,s=!r||!r.hasOwnProperty("dragMode")||r.dragMode===p.AUTO?o.defaultDragMode:r.dragMode,a(s,o.moveStrategy)!==p.NONE)?i.XYPOINT_MOVABLE:0===n.length?i.XYPOINT:e.validParametricVariables(n)?2===e.dimensions()?i.PARAMETRIC:i.PARAMETRIC_CURVE_3D:i.NONE;case u.Number:case u.ListOfNumber:return 2===e.dimensions()&&1===n.length?i.Y:3===e.dimensions()&&2===n.length?i.Z_3D:i.NONE;default:return i.NONE}}function n(e,t){var r=t._expression.getDependencies();if(1<r.length)return i.NONE;if(t._expression.valueType!==u.Number&&t._expression.valueType!==u.ListOfNumber)return i.NONE;var o=t._symbol;return e.graphMode(o,r)}function e(e,t){return t.isError?i.NONE:i.VISUALIZATION}o.Base.prototype.getGraphMode=function(e,t){return i.NONE},o.Expression.prototype.getGraphMode=s,o.Equation.prototype.getGraphMode=o.BaseComparator.prototype.getGraphMode=function(e,t){var r=t.getDependencies();return t.isConstant?i.NONE:t instanceof o.SolvedEquation?0===r.length?e.graphableAsConstant(t._symbol)?e.constantGraphMode(t._symbol):i.NONE:n(e,t):1===r.length||2===r.length?i.IMPLICIT:i.NONE},o.DoubleInequality.prototype.getGraphMode=function(e,t){return e.constantGraphMode(t._symbol)},o.Assignment.prototype.getGraphMode=function(e,t){if(t instanceof o.SolvedEquation)return n(e,t);if(this.isEquation(t))return this.asEquation().getGraphMode(e,t);var r=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:case u.EmptyList:switch(r.length){case 0:return e.graphableAsConstant(this._symbol)?e.constantGraphMode(this._symbol):i.NONE;case 1:return t.valueType!==u.ListOfNumber||e.graphableListVariables(this._symbol,r[0])?this.isSlider?i.NONE:e.graphMode(this._symbol,r):i.NONE;case 2:return 3===e.dimensions()&&"z"===this._symbol?i.Z_3D:i.NONE;default:return i.NONE}break;default:return s.call(this,e,t)}},o.FunctionDefinition.prototype.getGraphMode=function(e,t){if(1!==this._argSymbols.length)return i.NONE;var r=e.graphMode(this._symbol,this._argSymbols),o=t.getDependencies();switch(t.valueType){case u.Number:case u.ListOfNumber:switch(o.length){case 0:return r;case 1:return o[0]!==this._argSymbols[0]?i.NONE:r;default:return i.NONE}break;default:return i.NONE}},o.Regression.prototype.getGraphMode=function(e,t){return!this.isLhsSimple||!t.isModelValid||1!==t.model.getDependencies().length?i.NONE:i.Y},o.Polygon.prototype.getGraphMode=function(e,t){return t.isError?i.NONE:i.POLYGONFILL},o.Object3D.prototype.getGraphMode=function(e,t){return t.isError?i.NONE:i.OBJECT3D},o.Histogram.prototype.getGraphMode=e,o.DotPlot.prototype.getGraphMode=e,o.BoxPlot.prototype.getGraphMode=e,o.Image.prototype.getGraphMode=function(e,t){return!this.userData.showPoints||this.center.isError||this.radianAngle.isError||this.width.isError||this.height.isError||this.opacity.isError?i.NONE:i.XYPOINT}});\ndefine(\'core/lib/color-helpers\',["require","exports"],function(require,e){"use strict";function c(e){return s(e)?(e.match(/^#([A-Fa-f0-9]{3})$/g)&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]),e.toLowerCase()):e}function s(e){return"string"==typeof e&&(e.match(/^#([A-Fa-f0-9]{3})$/g)||e.match(/^#([A-Fa-f0-9]{6})$/g))}Object.defineProperty(e,"__esModule",{value:!0}),e.colors=e.getDisplayColor=e.mutateOpacity=e.parseHex=e.invertColor=e.shadeColor=e.isValidHexColor=e.normalizeColor=void 0,e.normalizeColor=c,e.isValidHexColor=s,e.shadeColor=function(e,r){if(!s(e=c(e)))return e;1<r&&(r=1),r<-1&&(r=-1);var t=parseInt(e.slice(1),16),a=r<0?0:255,o=r<0?-1*r:r,n=t>>16,i=t>>8&255,l=255&t;return"#"+(16777216+65536*(Math.round((a-n)*o)+n)+256*(Math.round((a-i)*o)+i)+(Math.round((a-l)*o)+l)).toString(16).slice(1)},e.invertColor=function(e){if(!s(e=c(e)))return e;var r="0123456789abcdef";return"#"+e.slice(1).split("").map(function(e){return r[15-r.indexOf(e)]}).join("")},e.parseHex=function(e){var r,t,a;return a=3===(e=e.replace(/#/,"")).length?(r=parseInt(e.slice(0,1)+e.slice(0,1),16),t=parseInt(e.slice(1,2)+e.slice(1,2),16),parseInt(e.slice(2,3)+e.slice(2,3),16)):6===e.length?(r=parseInt(e.slice(0,2),16),t=parseInt(e.slice(2,4),16),parseInt(e.slice(4,6),16)):t=r=0,{r:r,g:t,b:a}},e.mutateOpacity=function(e,r){var t=/(rgba\\([\\d]+\\,\\ ?[\\d]+\\,\\ ?[\\d]+\\,\\ ?)[\\d.]+(\\))/;return e.match(t)?e.replace(t,"$1"+r+"$2"):e},e.getDisplayColor=function(e,r,t){if(r&&r.colorLatexValue){var a=r.colorLatexValue;return Array.isArray(a)&&void 0!==t?a[t]||"#000000":a}return e.color},e.colors={RED:"#c74440",BLUE:"#2d70b3",GREEN:"#388c46",PURPLE:"#6042a6",ORANGE:"#fa7e19",BLACK:"#000000",GRAY:"#aaaaaa"}});\ndefine(\'core/math/features/getgraphinfo\',[\'require\',\'parsenodes\',\'core/math/builtinframe\',\'core/math/domaintypes\',\'core/math/policy\',\'core/lib/color-helpers\'],function(require){"use strict";var e=require("parsenodes"),i=require("core/math/builtinframe"),o=require("core/math/domaintypes"),r=require("core/math/policy").defaultPolicy,s=require("core/lib/color-helpers").getDisplayColor;e.Base.prototype.getGraphInfo=function(e,t,i){var r,n,a=t.getDependencies();switch(a.length){case 0:r=t.getLinearCoefficients(),n=t.boundDomain("x");break;case 1:"known"===(n=t.boundDomain(a[0])).type&&(r=t.getLinearCoefficients());break;case 2:n=o.unknownDomain()}return{graphMode:this.getGraphMode(e,t),color:s(this.userData,this.metaData,i),pointStyle:this.userData.pointStyle,lineStyle:this.userData.lineStyle,operator:this.getOperator(),isLinear:!!r,linearCoefficients:r,domainBound:n}},e.Base.prototype.getLinearCoefficients=function(){var e=this.getDependencies();switch(e.length){case 0:return[+this.asValue(),0];case 1:if(1<this.polynomialOrder(e[0]))return;var t=this.getPolynomialCoefficients(e[0]);return[t[0]?+t[0].tryGetConcreteTree(r,i).asValue():0,t[1]?+t[1].tryGetConcreteTree(r,i).asValue():0];default:return}},e.OrderedPair.prototype.getLinearCoefficients=function(){var e=this.args[0].getLinearCoefficients(),t=this.args[1].getLinearCoefficients();if(e&&t)return[e,t]}});\ndefine(\'core/math/features/getMoveStrategy\',[\'require\',\'parsenodes\',\'core/math/types\',\'core/math/maybe-rational\',\'core/math/builtinframe\',\'core/math/functions\'],function(require){"use strict";var P=require("parsenodes"),V=require("core/math/types"),e=require("core/math/maybe-rational").maybeRational,h=require("core/math/builtinframe"),_=require("core/math/functions"),y=P.Constant(e(0,1));function F(e){return{type:"none",inputString:e}}function I(e){return{type:"updateCoordinate",inputString:e}}function M(e,t,n){return{type:"updateSlider",inputString:e,id:t,coefficients:n}}function x(e,t,n,r,i,a){for(var o=t.getDependencies(),s=0;s<o.length;s++)if(i[o[s]])return!1;for(var u=o.length-1;0<=u;u--){var c=o[u];if(!a[c]){var g=r[c];if(void 0!==g){var f=n[c];if(1===f.order){var p=f.tree.getPolynomialCoefficients(c),d=p[1]?p[1].getConcreteTree(e,h):y,l=p[0]?p[0].getConcreteTree(e,h):y;if(l.isConstant&&d.isConstant)if(isFinite(l.asValue())&&isFinite(d.asValue()))if(0!==d.asValue())return{symbol:c,id:g,coefficients:[-l.asValue()/d.asValue(),1/d.asValue()]}}}}}return!1}function D(e,t){var n=function(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}(e),r={};for(var i in t){var a=t[i].evaluationState.assignment;t[i].evaluationState.is_slidable&&n[a]&&(r[a]=i)}return r}function T(e,t,n,r){for(var i=[],a=0;a<n.length;a++){var o=n[a],s={};i.push(s);for(var u=0;u<r.length;u++){var c=r[u],g=Object.create(t);g[c]=P.FreeVariable(c);var f=o.tryGetConcreteTree(e,g);f.isError?s[c]={tree:f,order:1/0}:s[c]={tree:f,order:f.polynomialOrder(c)}}}return i}function j(e,t,n){for(var r=0;r<e.length;r++){var i=e[r];0!==t[i].order&&(n[i]=!0)}}P.Base.prototype.getMoveStrategy=function(){},P.Assignment.prototype.getMoveStrategy=function(e,t,n,r,i){if(this._expression instanceof P.OrderedPair)return this._expression.getMoveStrategy(e,t,n,r,i)},P.OrderedPair.prototype.getMoveStrategy=function(e,t,n,r,i){if((!i||!1!==i.shouldGraph)&&n.valueType===V.Point&&0===n.getDependencies().length){for(var a,o,s,u,c=D(this.getDependencies(),r),g=Object.keys(c),f=this.args,p=T(e,t,f,g),d=[],l={},h={},y=0;y<2;y++){var v,m=f[y],C=m.getInputString();m.isConstant?d[y]=I(C):((v=x(e,m,p[y],c,l,h))&&(d[y]=M(C,v.id,v.coefficients),l[v.symbol]=!0,j(g,p[y],h)),d[y]||(d[y]=F(C)))}if("none"!==d[0].type||"none"!==d[1].type)return d;if(1===g.length){var S,b=g[0],O=c[b];try{S=P.OrderedPair([p[0][b].tree,p[1][b].tree]).getCompiledFunction()}catch(e){return}return _.dehydrateCompiledFunction(S),[(a=f[0].getInputString(),s=r[o=O].evaluationState,u=S,{type:"updateSliderNonlinear",inputString:a,id:o,initialValue:s.constant_value,min:s.slider_min_number,max:s.slider_max_number,compiled:u}),F(f[1].getInputString())]}}},P.Image.prototype.getMoveStrategy=function(e,t,n,r,i){if((!i||!1!==i.shouldGraph)&&(!i||!1!==i.showPoints)&&"OrderedPair"===n.center.type&&n.center.args[0].isConstant&&n.center.args[1].isConstant&&n.width.isConstant&&n.height.isConstant&&n.radianAngle.isConstant&&n.opacity.isConstant){var a=D(this.getDependencies(),r),o=Object.keys(a),s=[this.width,this.height];"OrderedPair"===this.center.type&&s.push(this.center.args[0],this.center.args[1]);for(var u=[],c={},g={},f=T(e,t,s,o),p=[2,3,0,1],d=0;d<p.length;d++){var l,h,y=p[d],v=s[y];v?(l=v.getInputString(),v.isConstant?u[y]=I(l):((h=x(e,v,f[y],a,c,g))&&(u[y]=M(l,h.id,h.coefficients),c[h.symbol]=!0,j(o,f[y],g)),u[y]||(u[y]=F(l)))):u[y]=F("")}if("none"!==u[0].type||"none"!==u[1].type||"none"!==u[2].type||"none"!==u[3].type)return u}}});\ndefine(\'core/math/features/getDefaultDragMode\',[\'require\',\'parsenodes\',\'core/lib/dragmode\'],function(require){"use strict";var e=require("parsenodes"),t=require("core/lib/dragmode").DragMode;e.Base.prototype.getMoveStrategy=function(){return t.NONE},e.Assignment.prototype.getDefaultDragMode=function(e){return"none"!==e[0].type&&"none"!==e[1].type?t.XY:"none"!==e[0].type?t.X:"none"!==e[1].type?t.Y:t.NONE},e.OrderedPair.prototype.getDefaultDragMode=function(e){return"updateSlider"===e[0].type&&"updateSlider"===e[1].type?t.XY:"updateSlider"===e[0].type?t.X:"updateSlider"===e[1].type?t.Y:t.NONE}});\ndefine(\'core/math/features/tableinfo\',[\'require\',\'parsenodes\',\'core/math/types\',\'core/lib/label\',\'core/math/distribution-spec\'],function(require){"use strict";var i=require("parsenodes"),o=i.List,a=require("core/math/types"),s=require("core/lib/label"),l=require("core/math/distribution-spec").getFunctionSpecFromTree;i.Base.prototype.tableInfo=function(e,t){return!1},i.Identifier.prototype.tableInfo=function(e,t){return!!e.validFirstColumnVariable(this._symbol)&&{independent_variable:this._symbol,dependent_column:this.getInputString(),by_reference:!1}},i.Expression.prototype.tableInfo=function(e,t){var n=t.getDependencies();if(l(this))return!1;switch(t.valueType){case a.Point:case a.ListOfPoint:return 0!==n.length?!1:(!t.isMovablePoint||"updateSlider"!==t.moveStrategy[0].type&&"updateSlider"!==t.moveStrategy[1].type)&&{independent_variable:"x",dependent_column:"y",by_reference:!1,values:o.wrap(t).mapElements(e,function(e){return e.asArray()})};case a.Number:if(1!==n.length)return!1;var r=n[0];return e.validFirstColumnVariable(r)?{independent_variable:r,dependent_column:this.getInputString(),by_reference:!1}:!1;default:return!1}},i.Assignment.prototype.tableInfo=function(e,t){if(t instanceof i.SolvedEquation)return!1;if(!this.getInputString().length)return!1;if(l(this))return!1;var n,r=t.getDependencies();if(1<r.length)return!1;if(0===r.length){if(!e.tableableAsConstant(this._symbol))return!1;n=e.implicitIndependent(this._symbol)}else n=r[0];return!!e.validFirstColumnVariable(n)&&{independent_variable:n,dependent_column:e.assignmentForbidden(this._symbol)?s.trimLatex(this.getInputString().replace(/[^=]*=/,"")):s.trimLatex(this.getInputString().split("=")[0]),by_reference:!e.assignmentForbidden(this._symbol)}},i.FunctionDefinition.prototype.tableInfo=function(e,t){if(1!==this._argSymbols.length)return!1;if(!this.getInputString().length)return!1;if(1<t.getDependencies().length)return!1;var n=this._argSymbols[0];if(!e.validFirstColumnVariable(n))return!1;var r=e.assignmentForbidden(this._symbol);return{independent_variable:n,dependent_column:r?s.trimLatex(this.getInputString().replace(/[^=]*=/,"")):s.trimLatex(this.getInputString().split("=")[0]),by_reference:!r}},i.BaseComparator.prototype.tableInfo=function(e,t){return!1},i.DoubleInequality.prototype.tableInfo=function(e,t){return!1},i.Equation.prototype.tableInfo=function(e,t){return!1}});\ndefine(\'core/math/features/tableerror\',[\'require\',\'parsenodes\',\'core/lib/worker-i18n\'],function(require){"use strict";var r=require("parsenodes"),e=require("core/lib/worker-i18n");r.Base.prototype.tableError=function(){return this.isInequality()?e.s("shared-calculator-error-table-inequality-supplement"):!(this instanceof r.Expression)&&e.s("shared-calculator-error-table-generic-supplement")},r.List.prototype.tableError=function(){return e.s("shared-calculator-error-table-list-supplement")},r.Equation.prototype.tableError=r.Assignment.prototype.tableError=function(){return e.s("shared-calculator-error-table-equation-supplement")},r.FunctionDefinition.prototype.tableError=function(){return e.s("shared-calculator-error-table-function-definition-supplement")},r.Regression.prototype.tableError=function(){return e.s("shared-calculator-error-table-regression-supplement")}});\ndefine(\'core/math/curve-accumulator\',["require","exports","core/math/distance"],function(require,t,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Accumulator=void 0;var e=(i.prototype.colinear=function(t,e,i){this.map&&(t=this.map(t),e=this.map(e),i=this.map(i));var n=h.pointToSegmentParameter(i[0],i[1],i[2]||0,t[0],t[1],t[2]||0,e[0],e[1],e[2]||0);if(n<1)return!1;var s=[t[0]+n*(e[0]-t[0]),t[1]+n*(e[1]-t[1]),3===t.length?t[2]+n*(e[2]-t[2]):0];return Math.abs(i[0]-s[0])<=this.xtolerance&&Math.abs(i[1]-s[1])<=this.ytolerance&&(2===t.length||Math.abs(i[2]-s[2])<=this.ztolerance)},i.prototype.addPoint=function(t){if(this.dimensions=t.length,this.xtolerance<0&&this.ytolerance<0&&(2===this.dimensions||this.ztolerance<0))this.segment.push.apply(this.segment,t);else if(this.segment.length){var e=2===this.dimensions?[this.segment[this.segment.length-2],this.segment[this.segment.length-1]]:[this.segment[this.segment.length-3],this.segment[this.segment.length-2],this.segment[this.segment.length-1]];if(t[0]!==e[0]||t[1]!==e[1]||t[2]!==e[2]){if(!this.pivotPoint||!this.pendingPoint)return this.pivotPoint=t,void(this.pendingPoint=t);(!this.colinear(e,this.pivotPoint,t)||h.hypot(e[0]-t[0],e[1]-t[1],(e[2]||0)-(t[2]||0))<h.hypot(e[0]-this.pendingPoint[0],e[1]-this.pendingPoint[1],(e[2]||0)-(this.pendingPoint[2]||0)))&&(this.flushPending(),this.pivotPoint=t),this.pendingPoint=t}}else this.segment.push.apply(this.segment,t)},i.prototype.flushPending=function(){this.pendingPoint&&(this.segment.push.apply(this.segment,this.pendingPoint),this.pivotPoint=void 0,this.pendingPoint=void 0)},i.prototype.breakSegment=function(){this.flushPending(),this.segment.length>(this.dimensions||2)&&this.segments.push(this.segment),this.segment=[]},i.prototype.getSegments=function(){return this.breakSegment(),this.segments},i.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0}},i);function i(t){t?(this.xtolerance=t.xtolerance||t.tolerance||0,this.ytolerance=t.ytolerance||t.tolerance||0,this.ztolerance=t.ztolerance||t.tolerance||0,this.map=t.map):this.xtolerance=this.ytolerance=this.ztolerance=0,this.segments=[],this.segment=[],this.pivotPoint=void 0,this.pendingPoint=void 0}t.Accumulator=e});\ndefine(\'core/math/implicit-plotter\',["require","exports","core/math/distance","./curve-accumulator"],function(require,e,v,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.displayTriangles=e.traceContours=e.triangulate=e.buildQuadTree=e.sampleImplicitDiagnostic=e.sampleImplicit=void 0;var w=5,D=Math.pow(2,14);function n(e,r){var i=Math.pow(2,-w),n=s(r,i),t=s(r,2*i),c=u(e,n,t),a=o(c.root,e,n);return{paddedDomain:n,rootDomain:t,quadTree:c,triangles:a,contours:b(a,e,n)}}function y(e,r,i){return{x:e,y:r,z:i}}function N(e,r,i){return{x:e,y:r,isZero:i}}function c(e,r,i){return{vertices:[e,r,i],visited:!1,next:void 0}}function s(e,r){var i=(1+r)*e.xmin-r*e.xmax,n=(1+r)*e.xmax-r*e.xmin;return{xmin:i,ymin:(1+r)*e.ymin-r*e.ymax,xmax:n,ymax:(1+r)*e.ymax-r*e.ymin,xtolerance:e.xtolerance,ytolerance:e.ytolerance}}function F(e,r){return{depth:e,vertices:r,children:void 0,center:void 0}}function I(e,r,i){e.center=j(e.vertices[0],e.vertices[1],e.vertices[2],e.vertices[3],r,i)}function u(e,r,i){var n,t,c,a,s,u,o=(n=e,c=(t=i).xmin,a=t.xmax,s=t.ymin,u=t.ymax,F(0,[Q(c,u,n),Q(a,u,n),Q(a,s,n),Q(c,s,n)])),l=[];(T=[]).push(o);var v,f,d,h,x,z,m,y,N,p,g,b,k=1,M=!0;e:for(;T.length;)for(var A,S=l,l=T,T=S;A=l.pop();)if(function(e,r,i){if(e.depth<w)return!0;if(function(e,r){return e.vertices[0].x<r.xmin||e.vertices[0].y>r.ymax||e.vertices[2].x>r.xmax||e.vertices[2].y<r.ymin}(e,i))return!1;if(function(e,r){if(e.vertices[1].x-e.vertices[0].x<10*r.xtolerance)return!0;if(e.vertices[0].y-e.vertices[3].y<10*r.ytolerance)return!0;return!1}(e,i))return!1;var n=e.vertices[0],t=e.vertices[1],c=e.vertices[2],a=e.vertices[3];if(isNaN(n.z)&&isNaN(t.z)&&isNaN(c.z)&&isNaN(a.z))return!1;if(isNaN(n.z)||isNaN(t.z)||isNaN(c.z)||isNaN(a.z))return!0;var s=j(n,t,c,a,r,i),u=_(n,t,r,i),o=_(t,c,r,i),l=_(c,a,r,i),v=_(a,n,r,i);return P(n,u,r)||P(t,u,r)||P(t,o,r)||P(c,o,r)||P(c,l,r)||P(a,l,r)||P(a,v,r)||P(n,v,r)||q(n,u,s,r,i)||q(u,t,s,r,i)||q(t,o,s,r,i)||q(o,c,s,r,i)||q(c,l,s,r,i)||q(l,a,s,r,i)||q(a,v,s,r,i)||q(v,n,s,r,i)}(A,e,r)){if(f=e,b=g=p=N=y=m=z=x=h=d=void 0,d=(v=A).depth+1,h=v.vertices[0],x=v.vertices[1],z=v.vertices[2],m=v.vertices[3],y=Z(h,x,f),N=Z(x,z,f),p=Z(z,m,f),g=Z(m,h,f),b=Z(h,z,f),v.children=[F(d,[h,y,b,g]),F(d,[y,x,N,b]),F(d,[b,N,z,p]),F(d,[g,b,p,m])],!A.children){M=!1;break e}if(T.push(A.children[0]),T.push(A.children[1]),T.push(A.children[2]),T.push(A.children[3]),D<=(k+=3)){M=!1;break e}}else I(A,e,r);for(var C=0;C<l.length;C++)I(l[C],e,r);for(C=0;C<T.length;C++)I(T[C],e,r);return{root:o,resolved:M}}function q(e,r,i,n,t){if(0<e.z==0<r.z&&0<r.z==0<i.z)return!1;var c,a,s,u;if(0<e.z==0<r.z){if(0<(c=Z(e,r,n)).z!=0<e.z)return!0;a=f(e,i,n,t),s=f(r,i,n,t),u=f(c,i,n,t)}else if(0<r.z==0<i.z){if(0<(c=Z(r,i,n)).z!=0<r.z)return!0;a=f(r,e,n,t),s=f(i,e,n,t),u=f(c,e,n,t)}else{if(0<(c=Z(i,e,n)).z!=0<i.z)return!0;a=f(i,r,n,t),s=f(e,r,n,t),u=f(c,r,n,t)}var o=t.xtolerance,l=t.ytolerance;return o*l<v.pointToSegment(l*u.x,o*u.y,l*a.x,o*a.y,l*s.x,o*s.y)}function P(e,r,i){if(isNaN(e.z)&&isNaN(r.z))return!1;if(isNaN(e.z)||isNaN(r.z))return 0<e.z||0<r.z;var n=4*Z(e,r,i).z-r.z-3*e.z,t=1e-4,c=(i((1-t)*e.x+t*r.x,(1-t)*e.y+t*r.y)-e.z)/t,a=Math.max(Math.abs(e.z),Math.abs(r.z));return Math.abs(n-c)>.125*a}function p(e,r){return e.x<r.xmin||e.x>r.xmax||e.y<r.ymin||e.y>r.ymax}function Q(e,r,i){return y(e,r,i(e,r))}function Z(e,r,i){return Q(.5*(e.x+r.x),.5*(e.y+r.y),i)}function _(e,r,i,n){if(p(e,n)||p(r,n))return Z(e,r,i);if(isNaN(e.z)||isNaN(r.z))return function(e,r,i,n){if(isNaN(e.z)===isNaN(r.z))return Z(e,r,i);{var t;isNaN(e.z)&&(t=e,e=r,r=t)}var c=e.x,a=r.x,s=e.y,u=r.y,o=e.z,l=n.xtolerance,v=n.ytolerance;for(;Math.abs(c-a)>l||Math.abs(s-u)>v;){var f=.5*(c+a),d=.5*(s+u),h=i(f,d);isNaN(h)===isNaN(o)?(c=f,s=d,o=h):(a=f,u=d)}return y(c,s,o)}(e,r,i,n);if(0<e.z!=0<r.z)return Z(e,r,i);var t=.01,c=i(.99*e.x+t*r.x,.99*e.y+t*r.y)-e.z,a=r.z-i(t*e.x+.99*r.x,t*e.y+.99*r.y);return isNaN(c)||isNaN(a)||0<c==0<a?Z(e,r,i):g(y(e.x,e.y,c),y(r.x,r.y,a),i)}function j(e,r,i,n,t,c){var a=_(e,i,t,c);return 0<e.z==0<i.z&&0<a.z!=0<e.z?a:(a=_(r,n,t,c),0<r.z==0<n.z&&0<a.z!=0<r.z?a:Z(e,i,t))}function g(e,r,i){if(isNaN(e.z))return r;if(isNaN(r.z))return e;if(isFinite(e.z)||isFinite(r.z)){if(isFinite(e.z)){if(isFinite(r.z)){var n=1-e.z/r.z,t=1-r.z/e.z;return Q(e.x/n+r.x/t,e.y/n+r.y/t,i)}return e}return r}return Z(e,r,i)}function f(e,r,i,n){var t=e.x,c=r.x,a=e.y,s=r.y,u=e.z,o=r.z,l=n.xtolerance,v=n.ytolerance;if(p(e,n)||p(r,n)){var f=Z(e,r,i);return N(f.x,f.y,!1)}for(;Math.abs(t-c)>l||Math.abs(a-s)>v;){var d=.5*(t+c),h=.5*(a+s),x=i(d,h);0<x==0<u?(t=d,a=h,u=x):(c=d,s=h,o=x)}if(isNaN(u))return N(c,s,!1);if(isNaN(o))return N(t,a,!1);var z=g(y(t,a,u),y(c,s,o),i),m=0===u||0===o||0===z.z||z.z>=u==o>=z.z&&Math.abs(z.z)<1e250;return N(z.x,z.y,m)}function o(e,r,i){var n={triangles:[],edgeCache:{},domain:i,fn:r};return function e(r,i){if(!r.children)return;e(r.children[0],i);e(r.children[1],i);e(r.children[2],i);e(r.children[3],i);t(r.children[0],r.children[1],i);t(r.children[3],r.children[2],i);l(r.children[1],r.children[2],i);l(r.children[0],r.children[3],i)}(e,n),n.triangles}function t(e,r,i){e.children&&r.children?(t(e.children[1],r.children[0],i),t(e.children[2],r.children[3],i)):e.children?(t(e.children[1],r,i),t(e.children[2],r,i)):r.children?(t(e,r.children[0],i),t(e,r.children[3],i)):function(e,r,i){if(!e.center||!r.center)return;var n,t;t=e.depth>=r.depth?(n=_(e.vertices[1],e.vertices[2],i.fn,i.domain),d(e.vertices[1],r.center,e.vertices[2],e.center,n)):(n=_(r.vertices[0],r.vertices[3],i.fn,i.domain),d(r.vertices[0],r.center,r.vertices[3],e.center,n));z(t,i.edgeCache,i.domain);for(var c=0;c<4;c++)i.triangles.push(t[c])}(e,r,i)}function l(e,r,i){e.children&&r.children?(l(e.children[2],r.children[1],i),l(e.children[3],r.children[0],i)):e.children?(l(e.children[2],r,i),l(e.children[3],r,i)):r.children?(l(e,r.children[1],i),l(e,r.children[0],i)):function(e,r,i){if(!e.center||!r.center)return;var n,t;t=e.depth>=r.depth?(n=_(e.vertices[3],e.vertices[2],i.fn,i.domain),d(e.vertices[2],r.center,e.vertices[3],e.center,n)):(n=_(r.vertices[1],r.vertices[0],i.fn,i.domain),d(r.vertices[1],r.center,r.vertices[0],e.center,n));z(t,i.edgeCache,i.domain);for(var c=0;c<4;c++)i.triangles.push(t[c])}(e,r,i)}function d(e,r,i,n,t){return[c(e,t,r),c(r,t,i),c(i,t,n),c(n,t,e)]}function x(e,r,i){return 0<e.z&&!p(e,i)&&(!(0<r.z)||p(r,i))}function h(e,r){return e.x+","+e.y+","+r.x+","+r.y}function z(e,r,i){m(e[0],e[1],e[2],h(e[1].vertices[2],e[1].vertices[0]),r,i),m(e[1],e[2],e[3],h(e[2].vertices[0],e[2].vertices[2]),r,i),m(e[2],e[3],e[0],h(e[3].vertices[2],e[3].vertices[0]),r,i),m(e[3],e[0],e[1],h(e[0].vertices[0],e[0].vertices[2]),r,i)}function m(e,r,i,n,t,c){var a,s,u,o,l,v,f=r.vertices[0],d=r.vertices[1],h=r.vertices[2];x(d,h,c)&&(r.next=i),x(f,d,c)&&(r.next=e),x(h,f,c)&&(a=r,(u=t)[s=n]?a.next=u[s]:u[s]=a),x(f,h,c)&&(o=r,(v=t)[l=n]?v[l].next=o:v[l]=o)}function b(e,r,i){for(var n={fillAccumulator:new a.Accumulator(i),strokeAccumulator:new a.Accumulator(i),fn:r,domain:i},t=0;t<e.length;t++){var c=e[t];c.next&&!c.visited&&function(e,r){for(;;){var i=e.vertices[0],n=e.vertices[1],t=e.vertices[2];if(k(i,n,r),k(n,t,r),k(t,i,r),e.visited)break;if(!e.next)break;e.visited=!0,e=e.next}r.strokeAccumulator.breakSegment(),r.fillAccumulator.breakSegment()}(c,n)}return{strokeSegments:n.strokeAccumulator.finish().segments,fillSegments:n.fillAccumulator.finish().segments}}function k(e,r,i){var n;x(e,r,i.domain)&&(n=f(e,r,i.fn,i.domain),i.fillAccumulator.addPoint([n.x,n.y]),n.isZero?i.strokeAccumulator.addPoint([n.x,n.y]):i.strokeAccumulator.breakSegment())}e.sampleImplicit=function(e,r){var i=n(e,r);return{segments:i.contours.strokeSegments,fillSegments:i.contours.fillSegments,resolved:i.quadTree.resolved}},e.sampleImplicitDiagnostic=n,e.buildQuadTree=u,e.triangulate=o,e.traceContours=b,e.displayTriangles=function(e){for(var r=[],i=0;i<e.length;i++){var n=e[i];r.push([n.vertices[0].x,n.vertices[0].y,n.vertices[1].x,n.vertices[1].y,n.vertices[2].x,n.vertices[2].y,n.vertices[0].x,n.vertices[0].y])}return r}});\ndefine(\'core/math/poi-finding-accumulator\',["require","exports","core/math/workerconfig","tslib","./curve-accumulator","./poi"],function(require,e,t,i,r,o){"use strict";function s(e){return Math.abs(e)<5e-8}Object.defineProperty(e,"__esModule",{value:!0});var u,f=(u=r.Accumulator,i.__extends(h,u),h.prototype.getPOI=function(){return t.pointsOfInterest?(void 0!==this.fn&&(this.poiData.intercept=this.findIntercept(this.fn)),this.poiData):{zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}}},h.prototype.addLinearZero=function(e){var t=-e[0]/e[1];this.isOutsideDomain(t)||(this.poiData.zeros={x:[t],y:[0]})},h.prototype.addLinearIntercept=function(e){this.isOutsideDomain(0)||(this.poiData.intercept={x:[0],y:[e[0]]})},h.prototype.isOutsideDomain=function(e){return!this.domain||void 0===this.domain.min||void 0===this.domain.max||e<this.domain.min||e>this.domain.max||isNaN(e)},h.prototype.addPoint=function(e){0===this.segment.length&&s(e[1])&&(this.poiData.zeros.x.push(e[0]),this.poiData.zeros.y.push(e[1])),this.updateZeroBuffer(e),this.updateExtremumBuffer(e),u.prototype.addPoint.call(this,e)},h.prototype.updateZeroBuffer=function(e){if(this.fn)if(isFinite(e[0])&&isFinite(e[1]))switch(this.zeroBuffer.length){case 0:if(s(e[1]))return;return void this.zeroBuffer.push(e);case 1:return 0===e[1]||(0<e[1]==0<this.zeroBuffer[0][1]||(t=o.bisectZero(this.zeroBuffer[0][0],this.zeroBuffer[0][1],e[0],e[1],this.fn))&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0),void this.zeroBuffer.push(e);case 2:if(0===e[1])return;return 0<e[1]==0<this.zeroBuffer[0][1]||(t=o.flatCenter(this.zeroBuffer[0][0],this.zeroBuffer[0][1],this.zeroBuffer[1][0],this.zeroBuffer[1][1],e[0],e[1],this.fn))&&(this.poiData.zeros.x.push(t[0]),this.poiData.zeros.y.push(t[1])),this.zeroBuffer.length=0,void this.zeroBuffer.push(e);var t}else this.zeroBuffer.length=0},h.prototype.updateExtremumBuffer=function(e){if(this.fn)if(isFinite(e[0])&&isFinite(e[1]))switch(this.extremumBuffer.length){case 0:return void this.extremumBuffer.push(e);case 1:return e[1]===this.extremumBuffer[0][1]&&(this.extremumBuffer.length=0),void this.extremumBuffer.push(e);case 2:return e[1]===this.extremumBuffer[1][1]||(e[1]>this.extremumBuffer[1][1]==this.extremumBuffer[1][1]>this.extremumBuffer[0][1]||(t=this.bisectExtremumUsingDerivative(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1]))&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1]),!o.bisectJump(this.extremumBuffer[0][0],this.extremumBuffer[0][1],t[0],t[1],e[0],e[1],this.fn,this.ytolerance)&&t[0]>this.segment[this.segment.length-2]&&(this.pendingPoint=t)),this.extremumBuffer.shift()),void this.extremumBuffer.push(e);case 3:if(e[1]===this.extremumBuffer[1][1])return;if(e[1]>this.extremumBuffer[1][1]==this.extremumBuffer[1][1]>this.extremumBuffer[0][1])return this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e);var t=void 0,i=.5*(this.extremumBuffer[1][0]+this.extremumBuffer[2][0]),r=this.fn(i);return(t=r===this.extremumBuffer[1][1]?o.flatCenter(this.extremumBuffer[0][0],this.extremumBuffer[0][1],this.extremumBuffer[1][0],this.extremumBuffer[1][1],e[0],e[1],this.fn):this.bisectExtremumUsingDerivative(this.extremumBuffer[1][0],this.extremumBuffer[1][1],i,r,this.extremumBuffer[2][0],this.extremumBuffer[2][1]))&&(this.poiData.extrema.x.push(t[0]),this.poiData.extrema.y.push(t[1])),this.extremumBuffer.shift(),this.extremumBuffer.shift(),void this.extremumBuffer.push(e)}else this.zeroBuffer.length=0},h.prototype.bisectExtremumUsingDerivative=function(e,t,i,r,s,u){var f,h,n,m;if(this.fn)return this.derivative&&(h=this.derivative(e),n=this.derivative(s),isNaN(h)||isNaN(n)||h<0==n<0||(m=o.bisectZero(e,h,s,n,this.derivative))&&(f=[m[0],this.fn(m[0])])),f=f||o.bisectExtremum(e,t,i,r,s,u,this.fn)},h.prototype.breakSegment=function(){this.zeroBuffer.length=0,this.extremumBuffer.length=0,this.flushPending(),2<this.segment.length&&(this.segments.push(this.segment),s(this.segment[this.segment.length-1])&&(this.poiData.zeros.x.push(this.segment[this.segment.length-2]),this.poiData.zeros.y.push(this.segment[this.segment.length-1]))),this.segment=[]},h.prototype.findIntercept=function(e){if(!e)return{x:[],y:[]};var t=e(0);return isFinite(t)?{x:[0],y:[e(0)]}:{x:[],y:[]}},h.prototype.finish=function(){return{segments:this.getSegments(),resolved:!0,poi:this.getPOI()}},h);function h(e,t,i){var r=u.call(this,e)||this;return r.domain=e,r.fn=t,r.derivative=i,r.poiData={zeros:{x:[],y:[]},intercept:{x:[],y:[]},extrema:{x:[],y:[]}},r.zeroBuffer=[],r.extremumBuffer=[],r}e.default=f});\ndefine(\'core/math/plotter\',["require","exports","tslib","core/math/distance","./poi","./implicit-plotter","./curve-accumulator","./poi-finding-accumulator","core/types/graphmode","./domaintypes"],function(require,e,t,F,v,b,o,a,k,g){"use strict";function A(e,i){var n=new a.default(i),t=e[0]+i.min*e[1],r=e[0]+i.max*e[1];return isFinite(t)&&isFinite(r)&&(n.addPoint([i.min,t]),n.addPoint([i.max,r]),n.addLinearZero(e),n.addLinearIntercept(e)),n.finish()}function I(e,i){var n=e(i);return{segments:[t.__spreadArrays(n,n)],resolved:!0}}function x(e,i,n){var t=n.fn,r=n.jumpTolerance,a=e[0],o=e[1],s=i[0],m=i[1],c=F.mean(a,s),l=t(c);return v.bisectJump(a,o,c,l,s,m,t,r)}Object.defineProperty(e,"__esModule",{value:!0});var y=function(e,i,n){var t=n.fn,r=n.jumpTolerance,a=n.accumulator;if(!isFinite(r)||r<=0)return i;var o=x(e,i,n);if(!o)return i;for(var s=(i[0]-e[0])/10,m=[-s,s],c=i,l=0;l<m.length;l++){var u=e[0]+m[l],p=t(u);isFinite(p)||(u=e[0],p=e[1],u=e[0],p=e[1]);var d=i[0]+m[l],f=t(d);if(isFinite(f)?c=[d,f]:(d=i[0],f=i[1]),x([u,p],[d,f],n)){var h=o[0],v=o[1];return a.addPoint(h),a.breakSegment(),a.addPoint(v),i}}return c},w=function(e,i,n){this.derivative=n,this.accumulator=new a.default(i,e,n),this.fn=e,this.jumpTolerance=i.ytolerance||i.tolerance||0};function P(e,i,n){var t=i,r=e(t);return isFinite(r)||(r=e(t=i+n)),isFinite(r)||(r=e(t=i-n)),[t,r]}function R(e,i,n){var t,r,a,o,s=new w(e,i,n),m=i.step/10,c=i.min,l=P(e,c,m),u=l[0],p=l[1],d=[u,p];isFinite(p)&&s.accumulator.addPoint([u,p]);for(var f=Math.ceil((i.max-i.min)/i.step),h=1;h<=f;h++)u=(t=P(e,(f-h)/f*i.min+h/f*i.max,m))[0],p=t[1],isFinite(p)&&isFinite(d[1])?(u=(r=y(d,[u,p],s))[0],p=r[1],s.accumulator.addPoint([u,p])):isFinite(p)&&!isFinite(d[1])?(o=v.bisectFinite(d[0],d[1],u,p,e))&&(o[0]!==u&&s.accumulator.addPoint(o),u=(a=y(o,[u,p],s))[0],p=a[1],s.accumulator.addPoint([u,p])):!isFinite(p)&&isFinite(d[1])&&(o=v.bisectFinite(d[0],d[1],u,p,e))&&((o=y(d,o,s))[0]!==d[0]&&s.accumulator.addPoint(o),s.accumulator.breakSegment()),d=[u,p];return s.accumulator.finish()}function M(e,i,l,u){var n,t,r,p=i.min,a=i.max-i.min,d=i.xtolerance&&i.ytolerance?Math.min(i.xtolerance,i.ytolerance):i.tolerance?i.tolerance:0,o=Math.floor(a/(Math.PI/l));function s(e,i){var n=i%2==0?1:-1;if(u||-1!=n){for(var t=i*(Math.PI/l),r=[p,p+1,p+2,p+3],a=!1,o=0,s=r.length;o<s;o++){var m=e(r[o]),c=e(r[o]+t);if(isFinite(m)&&isFinite(c)&&(a=!0),isFinite(m)!==isFinite(c)||Math.abs(m-n*c)>d)return}if(a)return 1}}for(n=1;n<=o;n++)if(s(e,n)){for(r=n,t=2;t*n<=o;t++)s(e,t*n)||(r=void 0);if(r)break}return r?r*(Math.PI/l):null}function u(e){return[e[1]*Math.cos(e[0]),e[1]*Math.sin(e[0])]}function S(e,i){return i.map=u,R(e,i)}function D(i,e){if(e.max<e.min)return{segments:[],resolved:!0};var n,t=new o.Accumulator(e),r=e.min,a=i(r);return isFinite(a[0])&&isFinite(a[1])&&t.addPoint(a),function(e,i){for(var n=e.min,t=e.max,r=e.step,a=t-n,o=Math.ceil(a/r),s=a/o,m=0;m<o;m++)i(n+m*s);i(t)}(e,function(e){n=i(e),E(i,r,a,e,n,10,t),r=e,a=n}),t.finish()}function E(e,i,n,t,r,a,o){if(t!==i){var s=o.xtolerance,m=o.ytolerance,c=o.ztolerance,l=F.mean(i,t),u=e(l),p=isFinite(n[0])&&isFinite(n[1])&&(2===n.length||isFinite(n[2])),d=isFinite(r[0])&&isFinite(r[1])&&(2===r.length||isFinite(r[2])),f=isFinite(u[0])&&isFinite(u[1])&&(2===u.length||isFinite(u[2]));if(0===a||l===i||l===t)return o.breakSegment(),void(d&&o.addPoint(r));if(p||d)if(p===d){if(p&&f&&d){var h=F.pointToSegmentParameter(u[0],u[1],u[2]||0,n[0],n[1],n[2]||0,r[0],r[1],r[2]||0);if(.2<h&&h<.8&&Math.abs(u[0]-(n[0]+h*(r[0]-n[0])))<=s&&Math.abs(u[1]-(n[1]+h*(r[1]-n[1])))<=m&&(2===n.length||Math.abs(u[2]-(n[2]+h*(r[2]-n[2])))<=c))return void o.addPoint(r)}n[0]===u[0]&&n[1]===u[1]||E(e,i,n,l,u,a-1,o),r[0]===u[0]&&r[1]===u[1]||E(e,l,u,t,r,a-1,o)}else{for(var v=i,x=t,g=n,y=r;i!==l&&l!==t;)f==p?(i=l,n=u,p=f):(t=l,r=u,d=f),u=e(l=i+(t-i)/2),f=isFinite(u[0])&&isFinite(u[1])&&(2===u.length||isFinite(u[2]));p?(E(e,v,g,i,n,a-1,o),o.breakSegment()):(o.breakSegment(),o.addPoint(r),E(e,t,r,x,y,a-1,o))}}}function _(e,i,n){var t=e.viewport.xmin,r=e.viewport.xmax,a=e.viewport.ymin,o=e.viewport.ymax,s=e.trigAngleMultiplier||1,m=e.oversample||4,c=1/m*(r-t)/e.screen.width,l=1/m*(o-a)/e.screen.height,u=i.domainBound;switch(i.graphMode){case k.X:switch((f=g.intersectDomains(g.knownDomain([a,o]),u)).type){case"empty":return!1;case"known":a=f.bounds[0],o=f.bounds[1]}d={min:a,max:o,xtolerance:l,ytolerance:c,step:l};break;case k.Y:switch((f=g.intersectDomains(g.knownDomain([t,r]),u)).type){case"empty":return!1;case"known":t=f.bounds[0],r=f.bounds[1]}d={min:t,max:r,xtolerance:c,ytolerance:l,step:c};break;case k.POLAR:if(!i.domain)throw new Error("Expected polar graph to have domain");var p,d={min:i.domain.min,max:i.domain.max,step:2*Math.PI/s/1e3,tolerance:Math.min(c,l)};i.domain.isExplicit||(p=M(n,d,s,"="===i.operator))&&(d.max=d.min+p),d.step=Math.max(d.step,(d.max-d.min)/11999);break;case k.PARAMETRIC:case k.PARAMETRIC_CURVE_3D:var f,h=i.domain?i.domain.min:0,v=i.domain?i.domain.max:1,x=i.domain?i.domain.step:.01;switch((f=g.intersectDomains(g.knownDomain([h,v]),u)).type){case"empty":return!1;case"known":h=f.bounds[0],v=f.bounds[1]}d={min:h,max:v,step:x,xtolerance:c,ytolerance:l,ztolerance:Math.min(c,l)};break;case k.IMPLICIT:d={xmin:t,xmax:r,ymin:a,ymax:o,xtolerance:c,ytolerance:l};break;case k.Z_3D:return{xmin:-10,xmax:10,ymin:-10,ymax:10};default:return!1}return d}e.default={sampleXYNaive:function(e,i){for(var n,t=new a.default(i,e),r=i.min;r<=i.max+i.step/2;r+=i.step)n=e(r),isFinite(n)?t.addPoint([r,n]):t.breakSegment();return t.finish()},sampleLinear:A,sampleXY:R,findPiPeriod:M,samplePolar:S,sampleParametricRecursive:D,subsampleParametricRecursive:E,validateViewState:function(e){if(!e)return!1;var i=e.viewport.xmin,n=e.viewport.xmax,t=e.viewport.ymin,r=e.viewport.ymax;return!(!isFinite(i)||!isFinite(n)||n<=i)&&(!(!isFinite(t)||!isFinite(r)||r<=t)&&(!(!isFinite(e.screen.width)||e.screen.width<=0)&&!(!isFinite(e.screen.height)||e.screen.height<=0)))},computeDomain:_,computeGraphData:function(e){var i,n,t,r,a,o,s,m=e.viewState,c=e.graphInfo,l=e.compiled,u=e.derivative,p=e.discrete,d=e.maxOverride,f=l.fn,h=_(m,c,f),v=c.graphMode;if(h){switch(v){case k.X:case k.Y:var x,g,y,F,w=u?u.fn:void 0;F=p?(x=h.min,g=h.max,y=h.step,function(e){for(var i=e.fn,n=e.domain,t=n.min,r=n.max,a=Math.floor(t),o=Math.ceil(r),s=[],m=a;m<=o;m++){var c=i(m);isFinite(m)&&isFinite(c)&&s.push([m,c])}return{segments:s,resolved:!0}}({fn:f,domain:{min:Math.max(x,0),max:void 0!==d?Math.min(d,g):g,step:y}})):c.isLinear?A(c.linearCoefficients,h):R(f,h,w);break;case k.POLAR:F=S(f,h);break;case k.IMPLICIT:F=b.sampleImplicit(f,h);break;case k.PARAMETRIC:h.step||(h.step=(h.max-h.min)/1e3),F=h.max===h.min?I(f,h.min):c.isLinear?(n=c.linearCoefficients,t=h,r=A(n[0],t),a=A(n[1],t),r.segments.length&&a.segments.length&&4===r.segments[0].length&&4===a.segments[0].length?{segments:[[r.segments[0][1],a.segments[0][1],r.segments[0][3],a.segments[0][3]]],resolved:!0}:{segments:[],resolved:!0}):D(f,h);break;case k.PARAMETRIC_CURVE_3D:return h.step||(h.step=(h.max-h.min)/1e3),F=h.max===h.min?I(f,h.min):D(f,h),{graphMode:k.PARAMETRIC_CURVE_3D,segments:F.segments,cacheKey:l.source+":"+JSON.stringify(h),color:c.color,style:"dummy"};case k.Z_3D:return{meshData:function(e,i){for(var n=e.fn,t=i.xmin,r=i.xmax,a=i.ymin,o=(r-t)/30,s=(i.ymax-a)/30,m=[],c=[],l=[],u=o/1e3,p=s/1e3,d=0;d<30;d++)for(var f=0;f<30;f++){var h=t+d*o,v=a+f*s,x=n(h,v);m.push(h,v,x);var g=(n(h+u,v)-x)*p,y=(n(h,v+p)-x)*u,F=-u*p,w=Math.sqrt(g*g+y*y+F*F);c.push(g/w,y/w,F/w)}for(d=0;d<29;d++)for(f=0;f<29;f++){var P=30*f+d,M=30*f+d+1,b=30*(f+1)+d,k=30*(f+1)+d+1;l.push(P,b,M),l.push(b,k,M)}return{cacheKey:e.source+":"+JSON.stringify(i),positions:new Float32Array(m),normals:new Float32Array(c),faces:new Int16Array(l)}}(l,h),color:c.color,graphMode:k.Z_3D,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},compiled:l,style:"dummy"};default:throw new Error("Programming Error: unexpected graphmode "+v)}i=F.poi}else F={segments:[],resolved:!0};if((!i||250<i.zeros.x.length+i.extrema.x.length+i.intercept.x.length)&&(i={zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}}),v===k.X)for(var P in i){i.hasOwnProperty(P)&&(s=i[o=P].y,i[o].y=i[o].x,i[o].x=s)}var M={segments:F.segments,resolved:F.resolved,graphMode:v,color:c.color,style:p?c.pointStyle:c.lineStyle,lineWidth:c.lineWidth,lineOpacity:c.lineOpacity,operator:c.operator,poi:i,compiled:l};return v===k.POLAR&&(M.sampledDomain={min:h.min,max:h.max,step:h.step}),F.fillSegments&&(M.fillSegments=F.fillSegments),M},polygonsFromSegments:function(e,i,n){for(var t=function(e){var i=e[e.length-1];return i[i.length-2]},r=[],a=0,o=0,s=[],m=[],c=-1/0,l=-1/0;;){if(c<=l){if(a>=i.length)break;m.push(i[a++])}if(l<=c){if(o>=e.length)break;s.push(e[o++])}c=t(m),l=t(s),F.approx(c,l,4)&&(r.push(function(e,i,n){var t,r,a,o,s=[],m=null;switch(n){case k.POLAR:m=u;break;case k.X:m=function(e){return[e[1],e[0]]}}for(t=0;t<e.length;t++)for(o=e[t],r=0;r<o.length;r+=2)a=[o[r],o[r+1]],m&&(a=m(a)),s.push(a[0],a[1]);for(t=i.length-1;0<=t;t--)for(r=(o=i[t]).length-2;0<=r;r-=2)a=[o[r],o[r+1]],m&&(a=m(a)),s.push(a[0],a[1]);return s}(s,m,n)),m=[],s=[],l=c=Math.max(c,l))}return r}}});\ndefine(\'core/lib/deepCopy\',["require","exports"],function(require,r){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.default=function r(e){var t=e;if(t&&"function"==typeof t.toJSON&&(t=t.toJSON()),!t)return t;if("object"!=typeof t)return t;if(Array.isArray(t))return t.map(r);var n={};for(var o in t)t.hasOwnProperty(o)&&(n[o]=r(t[o]));return n}});\ndefine(\'core/types/styles\',["require","exports"],function(require,e){"use strict";var t,S;Object.defineProperty(e,"__esModule",{value:!0}),e.LineStyle=e.PointStyle=void 0,(t=e.PointStyle||(e.PointStyle={})).POINT="POINT",t.OPEN="OPEN",t.CROSS="CROSS",(S=e.LineStyle||(e.LineStyle={})).SOLID="SOLID",S.DASHED="DASHED",S.DOTTED="DOTTED"});\ndefine(\'core/math/cdf-branches\',["require","exports","tslib","core/lib/deepCopy","core/math/plotter","core/math/domaintypes","core/types/styles"],function(require,e,b,p,y,v,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.makeCDFTopBranches=void 0;function _(e){var i=e.viewState,t=e.graphInfo,d=e.compiled,o=e.derivative,a=e.bounds,n=e.included,r=e.discrete,s=p.default(t),c=v.intersectDomains(t.domainBound,v.knownDomain(a));if("known"===c.type)return s.domainBound=c,r?s.pointStyle=n?u.PointStyle.POINT:u.PointStyle.OPEN:s.lineStyle=u.LineStyle.SOLID,y.default.computeGraphData({graphInfo:s,viewState:i,compiled:d,derivative:o,discrete:r})}e.makeCDFTopBranches=function(e){var i,t,d,o,a,n,r,s,c,p,v=e.viewState,u=e.graphInfo,l=e.compiled,h=e.derivative,m=e.bounds,f=e.discrete,S=e.maxOverride,g=m[0],w=m[1],I=[];return f?(g=Math.ceil(g),w=Math.floor(w),t=void 0!==S?S:1/0,g===-1/0&&t<=w?(i=_({bounds:[g,t],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(i)):g===-1/0&&w<1/0?(i=_({bounds:[g,w],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(i),I.push(_({bounds:[w+1,t],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}))):-1/0<g&&t<=w?(i=_({bounds:[g,t],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(_({bounds:[-1/0,g-1],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f})),I.push(i)):(i=_({bounds:[g,w],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),d=_({bounds:[-1/0,g-1],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),o=_({bounds:[w+1,t],included:!1,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(i),a=void 0,d&&o&&(r=o,s=(n=d).segments,c=r.segments,p=b.__spreadArrays(s,c),a=b.__assign(b.__assign({},n),{segments:p}),I.push(a)))):(i=_({bounds:[g,w],included:!0,viewState:v,graphInfo:u,compiled:l,derivative:h,discrete:f}),I.push(y.default.computeGraphData({viewState:v,graphInfo:u,compiled:l,derivative:h}))),{cdfTopBranch:i,topBranches:I}}});\ndefine(\'core/math/copy-defined-pois\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(e){for(var r=[],t=[],u=e.length,n=0;n<u;n++)r.push(e[n][0]),t.push(e[n][1]);return{defined:{x:r,y:t}}}});\ndefine(\'core/types/opacity\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HIGH=e.DEFAULT=e.LOW=void 0,e.LOW=.2,e.DEFAULT=.4,e.HIGH=.8});\ndefine(\'core/types/slider-loop-modes\',["require","exports"],function(require,e){"use strict";var o,r;Object.defineProperty(e,"__esModule",{value:!0}),e.getSliderIcon=e.SliderLoopMode=void 0,(r=o=e.SliderLoopMode||(e.SliderLoopMode={})).LOOP_FORWARD_REVERSE="LOOP_FORWARD_REVERSE",r.LOOP_FORWARD="LOOP_FORWARD",r.PLAY_ONCE="PLAY_ONCE",r.PLAY_INDEFINITELY="PLAY_INDEFINITELY",e.getSliderIcon=function(e){switch(e){case o.LOOP_FORWARD:return"dcg-icon-arrow-one-way";case o.LOOP_FORWARD_REVERSE:return"dcg-icon-arrow-two-way";case o.PLAY_ONCE:return"dcg-icon-arrow-once";case o.PLAY_INDEFINITELY:return"dcg-icon-arrow-infinite"}}});\ndefine(\'core/types/label-sizes\',["require","exports"],function(require,e){"use strict";var i;Object.defineProperty(e,"__esModule",{value:!0}),e.LabelSize=void 0,(i=e.LabelSize||(e.LabelSize={})).SMALL="small",i.MEDIUM="medium",i.LARGE="large"});\ndefine(\'core/types/label-orientations\',["require","exports"],function(require,e){"use strict";var t;Object.defineProperty(e,"__esModule",{value:!0}),e.LabelOrientation=void 0,(t=e.LabelOrientation||(e.LabelOrientation={})).DEFAULT="default",t.LEFT="left",t.RIGHT="right",t.ABOVE="above",t.BELOW="below"});\ndefine(\'core/lib/default-spec\',["require","exports","underscore","core/lib/deepCopy"],function(require,e,u,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.populateDefaults=e.stripDefaultsAndMaybeReturnUndefined=e.stripDefaults=void 0,e.stripDefaults=function(e,r){var t={};for(var n in r)r.hasOwnProperty(n)&&(u.isEqual(e[n],r[n])||(t[n]=r[n]));return t},e.stripDefaultsAndMaybeReturnUndefined=function(e,r){var t=void 0,n={};for(var a in r)r.hasOwnProperty(a)&&(u.isEqual(e[a],r[a])||(n[a]=r[a],t=n));return t},e.populateDefaults=function(e,r){r=r||{};var t={};for(var n in e)e.hasOwnProperty(n)&&!r.hasOwnProperty(n)&&(t[n]=a.default(e[n]));for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n]);return t}});\ndefine(\'core/lib/copy-properties\',["require","exports","core/lib/deepCopy"],function(require,r,n){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.makeTrueMap=r.extractPropertiesLike=r.copyAllProperties=r.copyProperties=void 0,r.copyProperties=function(r){var e=r.from,o=r.to,t=r.props;for(var i in t)t[i]&&e.hasOwnProperty(i)&&(o[i]=n.default(e[i]))},r.copyAllProperties=function(r,e){for(var o in r)r.hasOwnProperty(o)&&(e[o]=r[o])},r.extractPropertiesLike=function(r,e){var o={};for(var t in e)e.hasOwnProperty(t)&&(o[t]=r[t]);return o},r.makeTrueMap=function(r){var e={};for(var o in r)r.hasOwnProperty(o)&&(e[o]=!0);return e}});\ndefine(\'core/graphing-calc/json/expression\',["require","exports","tslib","core/types/opacity","core/types/styles","core/lib/dragmode","core/types/slider-loop-modes","core/types/label-sizes","core/types/label-orientations","core/lib/default-spec","../../lib/copy-properties"],function(require,t,r,e,i,a,l,s,n,o,d){"use strict";var L,D;function c(e){return d.extractPropertiesLike(e,t.DEFAULTS_DYNAMIC)}Object.defineProperty(t,"__esModule",{value:!0}),t.computeParsableState=t.areDynamicPropertiesStrictEqual=t.extractDynamicProperties=t.stripDefaults=t.inflateDefaults=t.SLIDER_DEFAULTS=t.DEFAULTS=t.DEFAULTS_DYNAMIC=t.DEFAULT_SLIDER_PERIOD=t.EditableLabelMode=t.CLICKABLEINFO_DEFAULTS=t.VIZ_DEFAULTS=t.CDF_DEFAULTS=void 0,t.CDF_DEFAULTS={show:!1,min:"",max:""},t.VIZ_DEFAULTS={breadth:"",axisOffset:"",alignedAxis:"x",showBoxplotOutliers:!0,binAlignment:"center",dotplotXMode:"exact",dotplotSize:"medium",histogramMode:""},t.CLICKABLEINFO_DEFAULTS={enabled:!1,description:"",rules:[{id:"1",expression:"",assignment:""}]},(D=L=t.EditableLabelMode||(t.EditableLabelMode={})).None="NONE",D.Math="MATH",D.Text="TEXT",t.DEFAULT_SLIDER_PERIOD=4e3,t.DEFAULTS_DYNAMIC={polarDomain:{min:"",max:""},parametricDomain:{min:"",max:""},cdf:t.CDF_DEFAULTS,colorLatex:"",fillOpacity:""+e.DEFAULT,lineOpacity:"",pointOpacity:"",lineWidth:"",vizProps:t.VIZ_DEFAULTS,clickableInfo:t.CLICKABLEINFO_DEFAULTS},t.DEFAULTS=r.__assign(r.__assign({folderId:"",latex:"",color:"",showLabel:!1,label:"",hidden:!1,secret:!1,dragMode:a.DragMode.AUTO,labelSize:s.LabelSize.MEDIUM,labelOrientation:n.LabelOrientation.DEFAULT,verticalLabel:!1,suppressTextOutline:!1,interactiveLabel:!1,editableLabelMode:L.None,residualVariable:"",isLogModeRegression:!1,pointStyle:i.PointStyle.POINT,lineStyle:i.LineStyle.SOLID,regressionParameters:{},displayEvaluationAsFraction:!1,slider:{}},t.DEFAULTS_DYNAMIC),{points:void 0,lines:void 0,fill:void 0}),t.SLIDER_DEFAULTS={hardMin:!1,hardMax:!1,animationPeriod:t.DEFAULT_SLIDER_PERIOD,loopMode:l.SliderLoopMode.LOOP_FORWARD_REVERSE,playDirection:1,isPlaying:!1,min:"-10",max:"10",step:""},t.inflateDefaults=function(e){return r.__assign(r.__assign(r.__assign({},t.DEFAULTS),e),{slider:r.__assign(r.__assign({},t.SLIDER_DEFAULTS),e.slider),cdf:r.__assign(r.__assign({},t.CDF_DEFAULTS),e.cdf),vizProps:r.__assign(r.__assign({},t.VIZ_DEFAULTS),e.vizProps),clickableInfo:r.__assign(r.__assign({},t.CLICKABLEINFO_DEFAULTS),e.clickableInfo)})},t.stripDefaults=function(e){var i=o.stripDefaults(t.DEFAULTS,r.__assign(r.__assign({},e),{slider:o.stripDefaults(t.SLIDER_DEFAULTS,e.slider)})),a=o.stripDefaultsAndMaybeReturnUndefined(t.CDF_DEFAULTS,e.cdf);void 0===a?delete i.cdf:i.cdf=a;var l=o.stripDefaultsAndMaybeReturnUndefined(t.VIZ_DEFAULTS,e.vizProps);void 0===l?delete i.vizProps:i.vizProps=l;var s=o.stripDefaultsAndMaybeReturnUndefined(t.CLICKABLEINFO_DEFAULTS,e.clickableInfo);return void 0===s?delete i.clickableInfo:i.clickableInfo=s,i},t.extractDynamicProperties=c,t.areDynamicPropertiesStrictEqual=function(e,i){for(var a in t.DEFAULTS_DYNAMIC)if(t.DEFAULTS_DYNAMIC.hasOwnProperty(a)&&e[a]!==i[a])return!1;return!0},t.computeParsableState=function(e){return r.__assign({type:"statement",id:e.id,latex:e.latex,label:e.label,color:e.color,fill:e.fill,points:e.points,lines:e.lines,pointStyle:e.pointStyle,lineStyle:e.lineStyle,dragMode:e.dragMode,labelSize:e.labelSize,labelOrientation:e.labelOrientation,verticalLabel:e.verticalLabel,suppressTextOutline:e.suppressTextOutline,interactiveLabel:e.interactiveLabel,editableLabelMode:e.editableLabelMode,residualVariable:e.residualVariable,regressionParameters:e.regressionParameters,isLogModeRegression:e.isLogModeRegression,showLabel:e.showLabel,shouldGraph:e.hidden,slider:{min:e.slider.hardMin?e.slider.min:"",max:e.slider.hardMax?e.slider.max:"",softMin:e.slider.hardMin?"":e.slider.min,softMax:e.slider.hardMax?"":e.slider.max,step:e.slider.step,isPlayingOnce:e.slider.isPlaying&&e.slider.loopMode===l.SliderLoopMode.PLAY_ONCE}},c(e))}});\ndefine(\'core/math/features/graph\',["require","exports","parsenodes","core/math/comparators","core/math/builtin","tslib","core/math/plotter","core/types/graphmode","core/lib/dragmode","core/math/expression-types","core/math/cdf-branches","core/math/copy-defined-pois","core/math/distribution-spec","core/graphing-calc/json/expression","core/types/opacity","core/lib/color-helpers","core/types/styles","core/math/types"],function(require,e,v,D,S,A,V,_,B,f,F,Y,w,y,b,z,E,x){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var M=v.List;function G(e,a){for(var t=1/0,s=-1/0,r=1/0,i=-1/0,o=0,n=a;o<n.length;o++)for(var l=n[o],p=0;p<l.length;p+=2){var h=l[p],u=l[p+1];h<t&&(t=h),s<h&&(s=h),u<r&&(r=u),i<u&&(i=u)}if(isFinite(t)&&isFinite(r))return{type:e,xmin:t,ymin:r,xmax:s,ymax:i}}function O(e,a,t){var s={};t-=.5*a;for(var r=e.length-1;0<=r;r--){var i=e[r],o=Math.floor((i-t)/a);s[o]?s[o].data.push(i):s[o]={id:o,data:[i],min:o*a+t,max:o*a+t+a,center:o*a+t+a/2}}return s}v.Base.prototype._graph=function(I,e,P,N){var C=this;if(e instanceof v.SolvedEquation)return this._graph(I,e._expression,P,N);function a(e){var a=e.editableLabelMode;return a===y.EditableLabelMode.Text||a===y.EditableLabelMode.Math}var t=e.getExpressionType(N.graphMode,e.valueType),s=f.getReconciledExpressionProps(t,{points:this.userData.points,lines:this.userData.lines,fill:this.userData.fill});switch(N.graphMode){case _.XYPOINT_MOVABLE:var r=X([e.asArray()]),i=this.userData.shouldGraph&&s.points,o=this.userData.showLabel&&!i;return i?[{segments:[r],graphMode:N.graphMode,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:a(this.userData),labels:this.computedLabels||[],poi:Y.default(r),movablePointInfo:[]}]:o?[{segments:[r],graphMode:_.XYPOINT,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,nakedLabel:!0,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,editableLabel:a(this.userData),labels:this.computedLabels||[],poi:Y.default(r),showPoint:!1}]:[];case _.XYPOINT:var n=[],l=M.wrap(e).mapElements(I,function(e){return e.asArray()}),p=this.userData.shouldGraph&&s.points,h=this.userData.shouldGraph&&s.lines,u=this.userData.showLabel&&!p&&!h;return(this.userData.showLabel||p)&&n.push({segments:[X(l)],graphMode:N.graphMode,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.pointStyle,showLabel:!!this.userData.showLabel,showPoint:p,labelSize:this.userData.labelSize,labelOrientation:this.userData.labelOrientation,pointOpacity:this.metaData.computedPointOpacity,verticalLabel:this.userData.verticalLabel,suppressTextOutline:this.userData.suppressTextOutline,interactiveLabel:!!this.userData.interactiveLabel,editableLabel:a(this.userData),nakedLabel:u,labels:this.computedLabels||[],poi:Y.default(l)}),h&&n.push({segments:L(l),graphMode:_.PARAMETRIC,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity,poi:{}}),n;case _.PARAMETRIC:case _.PARAMETRIC_CURVE_3D:var g=this.userData,m=this.metaData,d=[],n=M.wrap(e).mapElements(I,function(e,a){if(0===e.getDependencies().length){var t=X([e.asArray()]);return{segments:[t],graphMode:_.XYPOINT,color:z.getDisplayColor(g,m),style:g.lineStyle,lineWidth:C.metaData.computedLineWidth,lineOpacity:C.metaData.computedLineOpacity,poi:Y.default(t)}}var s=e.getCompiledFunction(),r=C.getGraphInfo(I,e,a);return r.graphMode=N.graphMode,r.domain={min:C.metaData.evaluatedDomainMin,max:C.metaData.evaluatedDomainMax},r.style=C.userData.lineStyle,r.lineWidth=C.metaData.computedLineWidth,r.lineOpacity=C.metaData.computedLineOpacity,V.default.computeGraphData({viewState:P,graphInfo:r,compiled:s})});if(s.fill){if(n.forEach(function(e){d.push({segments:e.segments,color:z.getDisplayColor(g,m),fillOpacity:C.metaData.computedFillOpacity,graphMode:_.POLYGONFILL,poi:{}})}),!s.lines)return d;n=n.concat(d)}return n;case _.X:case _.Y:case _.IMPLICIT:case _.POLAR:case _.Z_3D:var T=[],E=e.valueType===x.Number;return M.wrap(e).eachElement(I,function(e,a){var t,s=N.graphMode===_.IMPLICIT||N.graphMode===_.Z_3D?e.getCompiledFunction(["x","y"]):e.getCompiledFunction(),r=w.getFunctionSpecFromTree(C),i=r&&r.discrete,o=function(e,a){if(e){var t,s,r,i,o,n,l,p=e.discrete?"discreteDistribution":"continuousDistribution";if("binomialdist"===e.symbol)return t=a.args[1].asValue(),s=2<a.args.length?a.args[2].asValue():.5,{type:p,xmin:0,xmax:t,ymin:0,ymax:h=S.binompdf(s*t,t,s)};if("poissondist"===e.symbol)return{type:p,xmin:0,xmax:2.5*(r=a.args[1].asValue()),ymin:0,ymax:h=Math.max(S.poissonpdf(Math.floor(r),r),S.poissonpdf(Math.ceil(r),r))};if("normaldist"===e.symbol)return r=1<a.args.length?a.args[1].asValue():0,i=2<a.args.length?a.args[2].asValue():1,h=S.normalpdf(r,r,i),{type:p,xmin:r-2*Math.abs(i),xmax:r+2*Math.abs(i),ymin:0,ymax:h};if("uniformdist"===e.symbol)return r=((o=1<a.args.length?a.args[1].asValue():0)+(n=2<a.args.length?a.args[2].asValue():1))/2,{type:p,xmin:o-(l=n-o)/3,xmax:n+l/3,ymin:0,ymax:h=S.uniformpdf(r,o,n)};if("tdist"===e.symbol){var h,u=a.args[1].asValue();return{type:p,xmin:-3,xmax:3,ymin:0,ymax:h=S.tpdf(0,u)}}}}(r,e);try{t=e.getCompiledDerivative()}catch(e){}var n=C.getGraphInfo(I,e,a);n.graphMode=N.graphMode,n.style=C.userData.lineStyle,n.lineWidth=C.metaData.computedLineWidth,n.lineOpacity=C.metaData.computedLineOpacity,N.graphMode===_.POLAR&&(n.domain={min:C.metaData.evaluatedDomainMin,max:C.metaData.evaluatedDomainMax,isExplicit:C.metaData.isExplicitDomain});var l=z.getDisplayColor(C.userData,C.metaData),p=C.metaData.evaluatedCDFMin,h=C.metaData.evaluatedCDFMax;if(isNaN(p)||isNaN(h)||!E){var u={viewState:P,graphInfo:n,compiled:s,derivative:t,discrete:i,maxOverride:void 0};r&&"binomialdist"===r.symbol&&(u.maxOverride=e.args[1].asValue());var g=V.default.computeGraphData(u);o&&(g.boundingBox=o);var m,d=z.getDisplayColor(C.userData,C.metaData);g.fillSegments?(g.fillSegments,m=A.__rest(g,["fillSegments"]),T.push(m)):i?T.push({graphMode:_.XYPOINT,segments:[X(g.segments)],showPoint:C.userData.shouldGraph,color:d,style:g.style,boundingBox:o,poi:Y.default(g.segments)}):T.push(g),n.graphMode===_.IMPLICIT&&"="!==n.operator&&T.push({graphMode:_.POLYGONFILL,segments:g.fillSegments,poi:{},color:d})}else{var c={viewState:P,graphInfo:n,compiled:s,derivative:t,bounds:[p,h],discrete:i,maxOverride:void 0};r&&"binomialdist"===r.symbol&&(c.maxOverride=e.args[1].asValue());var v,D=F.makeCDFTopBranches(c),f=D.cdfTopBranch,y=D.topBranches;if(y.forEach(function(e){e&&o&&(e.boundingBox=o)}),y.every(function(e){return void 0!==e}))if(i)T=y.map(function(e){return{graphMode:_.XYPOINT,segments:[X(e.segments)],showPoint:C.userData.shouldGraph,color:l,style:e.style,poi:Y.default(e.segments),boundingBox:o}}),f&&f.segments.length&&(v=[],f.segments.forEach(function(e){isNaN(e[0])||isNaN(e[1])||v.push([e[0],0,e[0],e[1]])}),T.push({graphMode:_.PARAMETRIC,segments:v,boundingBox:o,poi:{},color:l}));else if(T=y,f&&f.segments.length){for(var b=void 0,x=void 0,M=0;M<f.segments.length;M++){if(4<=(O=f.segments[M]).length){b=O[0];break}}for(var O,L,M=f.segments.length-1;0<=M;M--){if(4<=(O=f.segments[M]).length){x=O[O.length-2];break}}void 0!==b&&void 0!==x&&isFinite(b)&&isFinite(x)&&(L=V.default.polygonsFromSegments(f.segments,[[b,0,x,0]],f.graphMode),T.push({graphMode:_.POLYGONFILL,segments:L,poi:{},color:l}))}}}),T;case _.POLYGONFILL:case _.VISUALIZATION:case _.OBJECT3D:case _.NONE:return!1;default:var c=N.graphMode;throw new Error("Unexpected graphMode: "+c)}},v.Base.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a);return this._graph(e,a,t,s)},v.BaseComparator.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a),r=s.graphMode;if(r===_.IMPLICIT)return this._graph(e,a,t,s);if(r===_.NONE)return!1;if(!(a instanceof v.SolvedEquation))return!1;var i=this.getOperator(),o=[],n=[],l=!0;a._expression.eachElement(e,function(e){o.push(e.getCompiledFunction());try{n.push(e.getCompiledDerivative())}catch(e){l=!1}}),l||(n=void 0);for(var p=[],h=[-1,0,0,1],u=o.length,g=0;g<u;g++){var m=this.getGraphInfo(e,a._expression.args[g]);m.graphMode=r,m.style=this.userData.lineStyle,s.graphMode===_.POLAR&&(m.domain={min:this.metaData.evaluatedDomainMin,max:this.metaData.evaluatedDomainMax,isExplicit:this.metaData.isExplicitDomain});var d=V.default.computeGraphData({viewState:t,graphInfo:m,compiled:o[g],derivative:n?n[g]:void 0});d.operator=D.get(D.table[i].inclusive,h[g%4]),p.push(d)}for(g=0;g<u;g+=4){var c=V.default.polygonsFromSegments(p[g+1].segments,p[g+2].segments,r);p.push({graphMode:_.POLYGONFILL,segments:c,poi:{},color:z.getDisplayColor(this.userData,this.metaData)})}return p},v.DoubleInequality.prototype.graph=function(r,e,i){var o=this,n=this.getGraphInfo(r,e);if(n.graphMode===_.NONE)return!1;var l=[],p=D.get(D.table[this._operators[0]].inclusive,0),h=D.get(D.table[this._operators[1]].inclusive,0),u=this.userData,g=this.metaData,m=z.getDisplayColor(this.userData,this.metaData);return M.eachArgs(r,e._expressions,function(e){e[0].userData=e[1].userData=u,e[0].metaData=e[1].metaData=g;var a=o._graph(r,e[0],i,n)[0];a.operator=p,l.push(a);var t=o._graph(r,e[1],i,n)[0];t.operator=h,l.push(t);var s=V.default.polygonsFromSegments(a.segments,t.segments,a.graphMode);l.push({graphMode:_.POLYGONFILL,segments:s,poi:{},color:m})}),l},v.Regression.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a);return this._graph(e,a.model,t,s)},v.Polygon.prototype.graph=function(e,a,t){var s=[],r=void 0===this.userData.lines||this.userData.lines,i=void 0===this.userData.fill||this.userData.fill;if(!i&&!r)return s;var o=this.getGraphInfo(e,a),n=a.args[0].asValue();if(!n.length)return s;var l=L(A.__spreadArrays(n,[n[0]]));return l.length&&(i&&s.push({segments:l,graphMode:_.POLYGONFILL,poi:{},color:o.color,fillOpacity:this.metaData.computedFillOpacity,style:o.style}),r&&s.push({segments:l,graphMode:_.PARAMETRIC,poi:{},color:o.color,style:this.userData.lineStyle,lineWidth:this.metaData.computedLineWidth,lineOpacity:this.metaData.computedLineOpacity})),s};function R(e){return Array.prototype.concat.apply([],e)}function X(e){for(var a=[],t=0,s=e;t<s.length;t++){var r=s[t],i=r[0],o=r[1];isNaN(i)||isNaN(o)||a.push(r)}return a}function L(e){for(var a=[],t=[],s=0,r=e;s<r.length;s++){var i=r[s],o=i[0],n=i[1];isNaN(o)||isNaN(n)?(4<=a.length&&t.push(a),a=[]):a.push(o,n)}return 4<=a.length&&t.push(a),t}v.Object3D.prototype.graph=function(e,a,t){var s,r,i,o=this.getGraphInfo(e,a);return[{segments:[(s=e,r=a,i=[],M.wrap(r).eachElement(s,function(e){i.push(e.args.map(function(e){return e.asValue()}))}),i)],color:o.color,objectName:this._symbol,graphMode:_.OBJECT3D}]},v.Histogram.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a),r=a.args[0].asValue(),i=a.args[1].asValue(),o=O(r,i,this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?i/2:0),n=1;this.userData.vizProps&&"density"===this.userData.vizProps.histogramMode?n=1/(r.length*i):this.userData.vizProps&&"relative"===this.userData.vizProps.histogramMode&&(n=1/r.length);var l=[],p=[];for(var h in o){var u=o[h],g=u.data.length;p.push([u.min,0*n,u.min,g*n,u.max,g*n,u.max,0*n]);var m=0;o[u.id+1]&&(m=o[u.id+1].data.length);var d=[u.min,0*n,u.min,g*n,u.max,g*n];m<g&&d.push(u.max,m*n),l.push(d)}var c=G("histogram",p);return c&&i&&(c.binWidth=i),[{segments:p,graphMode:_.POLYGONFILL,boundingBox:c,poi:{},color:s.color,fillOpacity:b.DEFAULT},{segments:l,graphMode:_.Y,poi:{zeros:{x:[],y:[]},extrema:{x:[],y:[]},intercept:{x:[],y:[]}},color:s.color}]},v.DotPlot.prototype.graph=function(e,a,t){var s,r=this.getGraphInfo(e,a),i=a.args[1].asValue(),o=this.userData.vizProps&&"left"===this.userData.vizProps.binAlignment?i/2:0,n=O(a.args[0].asValue(),i,o),l=!1,p=[];for(var h in n)for(var u,g=(u=n[h]).data.length-1;0<=g;g--)u.center!==u.data[g]&&(l=!0);if(this.userData.vizProps&&"exact"===this.userData.vizProps.dotplotXMode)for(var h in n){(s=(u=n[h]).data).reverse();for(var m=0;m<s.length;m++)p.push([s[m],m+1])}else for(var h in n){s=(u=n[h]).data;for(m=0;m<s.length;m++)p.push([u.center,m+1])}var d=G("dotplot",p);return d&&i&&(d.ymin=0,d.xmin-=.5*i,d.xmax+=.5*i,d.binWidth=i),[{segments:[p],graphMode:_.XYPOINT,boundingBox:d,poi:Y.default(p),color:r.color,style:this.userData.pointStyle,pointSize:this.userData.vizProps&&this.userData.vizProps.dotplotSize,showPoint:!0,needsDotplotXMode:l}]},v.BoxPlot.prototype.graph=function(e,a,t){var s=this.getGraphInfo(e,a),r=this.metaData.evaluatedAxisOffset,i=this.metaData.evaluatedBreadth,o=a.args[0].asValue();if(isNaN(i)||isNaN(r))return!1;var n,l,p,h=Math.min.apply(null,o),u=Math.max.apply(null,o),g=S.quartile(o,1),m=S.quartile(o,2),d=S.quartile(o,3),c=r,v=c-i/2,D=c+i/2,f=i/10,y=[];this.userData.vizProps.showBoxplotOutliers&&(l=g-1.5*(n=d-g),p=d+1.5*n,h=1/0,u=-1/0,o.forEach(function(e){l<=e&&e<h&&(h=e),u<e&&e<=p&&(u=e),(e<l||p<e)&&y.push([e,c])}));var b=[[g,v,d,v,d,D,g,D,g,v],[m,v,m,D],[g,c,h,c],[d,c,u,c],[h,c-f,h,c+f],[u,c-f,u,c+f]];if(this.userData.vizProps&&"y"===this.userData.vizProps.alignedAxis){for(var x=0,M=b;x<M.length;x++)for(var O=M[x],L=0;L<O.length;L+=2){var I=O[L];O[L]=O[L+1],O[L+1]=I}for(var P=0,N=y;P<N.length;P++){var C=N[P],I=C[0];C[0]=C[1],C[1]=I}}var T=[{segments:b,graphMode:_.PARAMETRIC,boundingBox:G("boxplot",b.concat(y)),poi:{},color:s.color}];return y.length&&T.push({segments:[y],graphMode:_.XYPOINT,color:s.color,style:E.PointStyle.OPEN,showPoint:!0,poi:Y.default(y)}),T},v.Table.prototype.isValueDraggable=function(e,a,t){if(!e.columns[a].isIndependent)return!1;var s=this.columns[a].values,r=s&&s[t];return!(!r||!isFinite(r.asValue())||0!==r._dependencies.length)},v.Table.prototype.graph=function(e,a,t){var s={};if(a.columns[0].isError)return s;for(var r=a.columns[0],i=r.values,o=1;o<this.columns.length;o++){var n=a.columns[o];if(!n.isError){var l=this.columns[o].header.userData,p=this.columns[o].header.metaData;if(!l.hidden){for(var h=l.dragMode,u=h===B.DragMode.X||h===B.DragMode.XY,g=h===B.DragMode.Y||h===B.DragMode.XY,m=!!l.points,d=!!l.lines,c=n.isDiscrete(r),v=d&&c,D=d&&!c,f=[],y=[],b=[],x=[],M=[],O=[],L=1/0,I=-1/0,P=1/0,N=-1/0,C=0;C<i.length;C++){var T,E,S,A,V=i[C],F=n.values[C];V&&F&&isFinite(V.asValue())&&isFinite(F.asValue())?(T=V.asValue(),E=F.asValue(),m&&(S=u&&this.isValueDraggable(a,0,C),A=g&&this.isValueDraggable(a,o,C),S||A?(b.push([T,E]),x.push({index:C,dragX:S,dragY:A})):y.push([T,E])),v&&O.push([T,E]),T<L&&(L=T),I<T&&(I=T),E<P&&(P=E),N<E&&(N=E)):v&&(1<O.length&&M.push(O),O=[])}var w,G={type:"table",xmin:L,xmax:I,ymin:P,ymax:N};b.length&&f.push({graphMode:_.XYPOINT_MOVABLE,segments:[b],color:z.getDisplayColor(l,p),tableId:l.tableId,poi:Y.default(b),movablePointInfo:x,boundingBox:G,pointOpacity:1}),y.length&&f.push({segments:[y],graphMode:_.XYPOINT,showPoint:!0,poi:Y.default(y),color:z.getDisplayColor(l,p),style:l.pointStyle,tableId:l.tableId,boundingBox:G}),(M.length||O.length)&&(M.push(O),f.push({segments:M.map(R),graphMode:_.PARAMETRIC,poi:{},color:z.getDisplayColor(l,p),style:l.lineStyle,tableId:l.tableId,boundingBox:G})),!D||(w=this.columns[o].header.graph(e,a.columns[o].header,t)).length&&Array.prototype.push.apply(f,w),f.length&&(s[l.id]=f)}}}return s},v.Image.prototype.graph=function(e,a,t){var s=[];if(!("OrderedPair"===a.center.type&&a.center.args[0].isConstant&&a.center.args[1].isConstant&&a.radianAngle.isConstant&&a.width.isConstant&&a.height.isConstant&&a.opacity.isConstant))return s;for(var r,i,o,n=[],l=[],p=a.width.asValue()/2,h=a.height.asValue()/2,u=a.radianAngle.asValue(),g=-1;g<=1;g++)for(var m=-1;m<=1;m++){var d=[a.center.args[0].asValue()+g*p*Math.cos(u)+m*h*Math.sin(u),a.center.args[1].asValue()-g*p*Math.sin(u)+m*h*Math.cos(u)];(r=a.moveStrategy,i=g,o=m,!!r&&(0===i&&0===o?"none"!==r[2].type||"none"!==r[3].type:0!==i&&0!==o?"none"!==r[0].type&&"none"!==r[1].type:0!==i?"none"!==r[0].type:0!==o&&"none"!==r[1].type))&&(n.push(d),l.push([g,m]))}return s.push({segments:[n],scaleFactors:[l],graphMode:_.XYPOINT_MOVABLE,color:z.getDisplayColor(this.userData,this.metaData),style:this.userData.style,poi:Y.default(n),movablePointInfo:[],pointOpacity:1}),s}});\ndefine(\'core/math/features/elementAt\',[\'require\',\'parsenodes\',\'core/math/builtinframe\'],function(require){"use strict";var n=require("parsenodes"),o=require("core/math/builtinframe");function t(t,e){for(var r=0;r<this.length;r++)e(this.elementAt(t,r),r)}function e(t,e){for(var r=[],s=0;s<this.length;s++)r.push(e(this.elementAt(t,s),s));return r}n.List.prototype.elementAt=function(t,e){return 0<=(e=Math.floor(e))&&e<this.args.length?this.args[e]:n.Constant(NaN)},n.Broadcast.prototype.elementAt=function(t,e){if((e=Math.floor(e))<0||e>=this.length)return n.Constant(NaN);for(var r={},s=0;s<this._replacedSymbols.length;s++)r[this._replacedSymbols[s]]=this._lists[s].elementAt(t,e);return this._expression.substitute(r).getConcreteTree(t,o)},n.Broadcast.prototype.asList=function(t){for(var e=[],r=0;r<this.length;r++)e.push(this.elementAt(t,r));return n.List(e)},n.List.prototype.eachElement=t,n.Broadcast.prototype.eachElement=t,n.List.prototype.mapElements=e,n.Broadcast.prototype.mapElements=e,n.OrderedPair.prototype.elementAt=function(t,e){switch(e){case 0:return this.args[0];case 1:return this.args[1];default:return n.Constant(NaN)}},n.RGBColor.prototype.elementAt=function(t,e){switch(e){case 0:return this.args[0];case 1:return this.args[1];case 2:return this.args[2];default:return n.Constant(NaN)}}});\ndefine(\'core/lib/number-to-latex\',["require","exports"],function(require,e){"use strict";function o(e){var r,t,n,i,a,o,u=e+"";return/\\d+\\.?\\d*e[\\+\\-]*\\d+/i.test(u)&&(r=String(u).toLowerCase().split("e"),t=parseFloat(r[0]),n=parseInt(r[1],10),i=Math.abs(n),a=Math.abs(t).toString().split("."),u=n<0?"0."+new Array(i).join("0")+a.join(""):((o=a[1])&&(i-=o.length),a.join("")+new Array(i+1).join("0")),t<0&&(u="-"+u)),u}Object.defineProperty(e,"__esModule",{value:!0}),e.numberToStatsConfidenceLatex=e.numberToDecimalString=void 0,e.default=function(e){if("string"==typeof e)return e;if(void 0===e)return"";var r=e+"";return r=(r=r.replace(/1e\\+?([-\\d]+)/,"10^{$1}")).replace(/([-\\d\\.]+)e\\+?([-\\d]+)/,"$1\\\\cdot 10^{$2}")},e.numberToDecimalString=o,e.numberToStatsConfidenceLatex=function(e,r){void 0===r&&(r=2);var t,n=o(e),i=n.indexOf(".");if(-1===i)return n;for(var a=i+1;a<n.length;a++)if(t){if(n[a]!==t)break}else{if("0"!==n[a]&&"9"!==n[a])break;t=n[a]}return n.substr(0,Math.max(i+5,a+r))}});\ndefine(\'core/math/features/printLatex\',[\'require\',\'parsenodes\',\'core/lib/label\',\'core/lib/number-to-latex\'],function(require){"use strict";var e=require("parsenodes"),t=require("core/lib/label"),r=require("core/lib/number-to-latex").default;function i(){return t.identifierToLatex(this._symbol)+" "}function n(t){switch(t){case">":return"\\\\gt ";case"<":return"\\\\lt ";case">=":return"\\\\ge ";case"<=":return"\\\\le ";case"=":return"="}}function a(t){return t.printLatex()}function s(){switch(this._symbol){case"sqrt":return"\\\\sqrt{"+this.args[0].printLatex()+"}";case"nthroot":return"\\\\sqrt["+this.args[1].printLatex()+"]{"+this.args[0].printLatex()+"}";case"logbase":return"\\\\log_{"+this.args[1].printLatex()+"}\\\\left("+this.args[0].printLatex()+"\\\\right)";default:return t.identifierToLatex(this._symbol)+"\\\\left("+this.args.map(a).join(", ")+"\\\\right)"}}function o(t){return t.isConstant&&!0===t.asValue()}e.Identifier.prototype.printLatex=i,e.FreeVariable.prototype.printLatex=i,e.Constant.prototype.printLatex=function(){return r(this.asValue())},e.Negative.prototype.printLatex=function(){return"-\\\\left("+this.args[0].printLatex()+"\\\\right)"},e.Add.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)+\\\\left("+this.args[1].printLatex()+"\\\\right)"},e.PercentOf.prototype.printLatex=function(){return this.args[0].printLatex()+" \\\\% \\\\operatorname{of} "+this.args[1].printLatex()},e.Subtract.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)-\\\\left("+this.args[1].printLatex()+"\\\\right)"},e.Multiply.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)*\\\\left("+this.args[1].printLatex()+"\\\\right)"},e.Divide.prototype.printLatex=function(){return"\\\\frac{"+this.args[0].printLatex()+"}{"+this.args[1].printLatex()+"}"},e.Exponent.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)^{"+this.args[1].printLatex()+"}"},e.Assignment.prototype.printLatex=function(){return t.identifierToLatex(this._symbol)+"="+this._expression.printLatex()},e.Equation.prototype.printLatex=function(){return this._lhs.printLatex()+"="+this._rhs.printLatex()},e.BaseComparator.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+n(this.operator)+"\\\\left("+this.args[1].printLatex()+"\\\\right)"},e.DoubleInequality.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)"+n(this.args[1])+this.args[2].printLatex()+n(this.args[3])+"\\\\left("+this.args[4].printLatex()+"\\\\right)"},e.And.prototype.printLatex=function(){if(!(this.args[0]instanceof e.BaseComparator&&this.args[1]instanceof e.BaseComparator))throw new Error("Not implemented");if(this.args[0].args[1].printLatex()!==this.args[1].args[0].printLatex())throw new Error("Not implemented");return"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)"+n(this.args[0].operator)+"\\\\left("+this.args[0].args[1].printLatex()+"\\\\right)"+n(this.args[1].operator)+"\\\\left("+this.args[1].args[1].printLatex()+"\\\\right)"},e.NativeFunction.prototype.printLatex=s,e.TypedFunction.prototype.printLatex=s,e.ReducerFunction.prototype.printLatex=s,e.ParametrizedReducerFunction.prototype.printLatex=s,e.DoubleReducerFunction.prototype.printLatex=s,e.FunctionCall.prototype.printLatex=s,e.Distribution.prototype.printLatex=s,e.SeededFunctionCall.prototype.printLatex=function(){return t.identifierToLatex(this._symbol)+"\\\\left("+this.args.slice(1).map(a).join(", ")+"\\\\right)"},e.DotAccess.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")"},e.DotAccessExponent.prototype.printLatex=function(){return"("+this.args[0].printLatex()+").("+this.args[1].printLatex()+")^{"+this.args[2].printLatex()+"}"},e.Prime.prototype.printLatex=function(){switch(this.args[0]._symbol){case"logbase":return"\\\\log_{"+this.args[0].args[1].printLatex()+"}"+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args[0].printLatex()+"\\\\right)";default:return t.identifierToLatex(this.args[0]._symbol)+Array(this.order+1).join("\'")+"\\\\left("+this.args[0].args.map(a).join(", ")+"\\\\right)"}},e.List.prototype.printLatex=function(){return"\\\\left["+this.args.map(a).join(", ")+"\\\\right]"},e.Range.prototype.printLatex=function(){return"\\\\left["+this.args[0].args.map(a).join(", ")+" ... "+this.args[1].args.map(a).join(", ")+"\\\\right]"},e.ListAccess.prototype.printLatex=function(){return"\\\\left("+this.args[0].printLatex()+"\\\\right)\\\\left["+this.args[1].printLatex()+"\\\\right]"},e.OrderedPair.prototype.printLatex=function(){return"\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.Sum.prototype.printLatex=function(){return"\\\\sum_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},e.Product.prototype.printLatex=function(){return"\\\\prod_{"+this.args[0].printLatex()+"="+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)"},e.Integral.prototype.printLatex=function(){return"\\\\int_{"+this.args[1].printLatex()+"}^{"+this.args[2].printLatex()+"}\\\\left("+this.args[3].printLatex()+"\\\\right)d"+this.args[0].printLatex()},e.FunctionExponent.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)^{"+this.args[2].printLatex()+"}"},e.FunctionFactorial.prototype.printLatex=function(){return this.args[0].printLatex()+"\\\\left("+this.args[1].printLatex()+"\\\\right)!"},e.Piecewise.prototype.printLatex=function(){var t=this;if(o(t.args[0]))return t.args[1].printLatex();for(var r,i=["\\\\left\\\\{"];;){if(o(t.args[0])){i.push(t.args[1].printLatex());break}if(i.push(t.args[0].printLatex(),": "),(r=t.args[2]).isConstant&&r.isNaN()){i.push(t.args[1].printLatex());break}if(i.push(t.args[1].printLatex(),", "),!(t.args[2]instanceof e.Piecewise)){i.push(t.args[2].printLatex());break}t=t.args[2]}return i.push("\\\\right\\\\}"),i.join("")},e.FunctionDefinition.prototype.printLatex=function(){return t.identifierToLatex(this._symbol)+"\\\\left("+this._argSymbols.map(t.identifierToLatex).join(", ")+"\\\\right) = "+this._expression.printLatex()},e.Derivative.prototype.printLatex=function(){return"\\\\frac{d}{d"+t.identifierToLatex(this._symbol)+"}\\\\left("+this.args[0].printLatex()+"\\\\right)"},e.Regression.prototype.printLatex=function(){return"\\\\left("+this._lhs.printLatex()+"\\\\right)\\\\sim\\\\left("+this._rhs.printLatex()+"\\\\right)"},e.Polygon.prototype.printLatex=function(){return"\\\\polygon\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.Histogram.prototype.printLatex=function(){return"\\\\histogram\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.Object3D.prototype.printLatex=function(){return"\\\\"+this._symbol+"\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.DotPlot.prototype.printLatex=function(){return"\\\\dotplot\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.BoxPlot.prototype.printLatex=function(){return"\\\\boxplot\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.TTest.prototype.printLatex=function(){return"\\\\TTest\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.IndependentTTest.prototype.printLatex=function(){return"\\\\IndependentTTest\\\\left("+this.args.map(a).join(", ")+"\\\\right)"},e.Stats.prototype.printLatex=function(){return"\\\\Stats\\\\left("+this.args.map(a).join(", ")+"\\\\right)"}});\ndefine(\'core/math/features/statistics\',[\'require\',\'parsenodes\',\'core/math/maybe-rational\'],function(require){"use strict";var r=require("parsenodes"),i=r.BuiltInFunction,n=require("core/math/maybe-rational").maybeRational,s=r.Constant(n(0,1)),o=r.Constant(n(1,1)),e=r.Constant(n(2,1)),t=r.Constant(n(1,2)),a=r.Constant(-1/0);i.normaldist.prototype.pdf=function(t){return i.normalpdf([t[0],this.args[0],this.args[1]])},i.normaldist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.normalcdf([n,r,this.args[0],this.args[1]])},i.normaldist.prototype.mean=function(){return this.args[0]},i.normaldist.prototype.median=function(){return this.args[0]},i.normaldist.prototype.stdev=function(){return i.abs([this.args[1]])},i.normaldist.prototype.var=function(){return r.Exponent([this.args[1],e])},i.normaldist.prototype.quantile=function(t){return r.Add([r.Multiply([i.invNorm(t),this.stdev()]),this.mean()])},i.normaldist.prototype.sample=function(t){return i.normalSample([t[0],this.args[0],this.args[1]])},i.tdist.prototype.pdf=function(t){return i.tpdf([t[0],this.args[0]])},i.tdist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.tcdf([n,r,this.args[0]])},i.tdist.prototype.mean=function(){return s},i.tdist.prototype.median=function(){return s},i.tdist.prototype.quantile=function(t){return i.invT([t[0],this.args[0]])},i.tdist.prototype.sample=function(t){return i.tSample([t[0],this.args[0]])},i.tdist.prototype.stdev=function(){return i.sqrt([this.var()])},i.tdist.prototype.var=function(){var t=this.args[0];return r.Piecewise([r.Comparator[">="]([t,e]),r.Divide([t,r.Subtract([t,e])]),r.Constant(NaN)])},i.poissondist.prototype.pdf=function(t){return i.poissonpdf([t[0],this.args[0]])},i.poissondist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.poissoncdf([n,r,this.args[0]])},i.poissondist.prototype.mean=function(){return this.args[0]},i.poissondist.prototype.median=function(){return i.invPoisson([t,this.args[0]])},i.poissondist.prototype.stdev=function(){return i.sqrt([this.args[0]])},i.poissondist.prototype.var=function(){return this.args[0]},i.poissondist.prototype.quantile=function(t){return i.invPoisson([t[0],this.args[0]])},i.poissondist.prototype.sample=function(t){return i.poissonSample([t[0],this.args[0]])},i.binomialdist.prototype.pdf=function(t){return i.binompdf([t[0],this.args[0],this.args[1]])},i.binomialdist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.binomcdf([n,r,this.args[0],this.args[1]])},i.binomialdist.prototype.mean=function(){return r.Multiply([this.args[0],this.args[1]])},i.binomialdist.prototype.median=function(){return i.invBinom([t,this.args[0],this.args[1]])},i.binomialdist.prototype.stdev=function(){return i.sqrt([this.var()])},i.binomialdist.prototype.var=function(){var t=this.args[0],n=this.args[1];return r.Multiply([t,r.Multiply([n,r.Subtract([o,n])])])},i.binomialdist.prototype.quantile=function(t){return i.invBinom([t[0],this.args[0],this.args[1]])},i.binomialdist.prototype.sample=function(t){return i.binomSample([t[0],this.args[0],this.args[1]])},i.uniformdist.prototype.pdf=function(t){return i.uniformpdf([t[0],this.args[0],this.args[1]])},i.uniformdist.prototype.cdf=function(t){var n,r=1===t.length?(n=a,t[0]):(n=t[0],t[1]);return i.uniformcdf([n,r,this.args[0],this.args[1]])},i.uniformdist.prototype.mean=function(){return r.Divide([r.Add([this.args[0],this.args[1]]),e])},i.uniformdist.prototype.median=function(){return r.Divide([r.Add([this.args[0],this.args[1]]),e])},i.uniformdist.prototype.stdev=function(){return i.sqrt([this.var()])},i.uniformdist.prototype.var=function(){return r.Divide([r.Exponent([r.Subtract([this.args[1],this.args[0]]),e]),r.Constant(n(12,1))])},i.uniformdist.prototype.quantile=function(t){return i.invUniform([t[0],this.args[0],this.args[1]])},i.uniformdist.prototype.sample=function(t){return i.uniformSample([t[0],this.args[0],this.args[1]])},r.List.prototype.sample=function(t){return r.ListAccess([this,r.Add([i.floor([r.Multiply([i.uniformSample([t[0],s,o]),r.Constant(n(this.length,1))])]),o])])}});\ndefine(\'core/math/features/getExpressionType\',[\'require\',\'parsenodes\',\'core/types/graphmode\',\'core/math/expression-types\',\'core/math/types\'],function(require){"use strict";var e=require("parsenodes"),o=require("core/types/graphmode"),r=require("core/math/expression-types").ExpressionType,n=require("core/math/types");e.Base.prototype.getExpressionType=function(e,t){return e===o.X||e===o.Y?r.X_OR_Y:e===o.XYPOINT||e===o.XYPOINT_MOVABLE?t===n.Point?r.SINGLE_POINT:r.POINT_LIST:e===o.PARAMETRIC||e===o.PARAMETRIC_CURVE_3D?r.PARAMETRIC:e===o.POLAR?r.POLAR:e===o.IMPLICIT?r.IMPLICIT:r.X_OR_Y},e.Polygon.prototype.getExpressionType=function(e,t){return r.POLYGON},e.Histogram.prototype.getExpressionType=function(e,t){return r.HISTOGRAM},e.Object3D.prototype.getExpressionType=function(e,t){return r.CUBE},e.DotPlot.prototype.getExpressionType=function(e,t){return r.DOTPLOT},e.BoxPlot.prototype.getExpressionType=function(e,t){return r.BOXPLOT}});\ndefine(\'core/math/features/findLinearSubset\',[\'require\',\'parsenodes\',\'core/math/maybe-rational\'],function(require){"use strict";var d=require("parsenodes"),e=require("core/math/maybe-rational").maybeRational,f=d.Constant(e(0,1)),p=d.Constant(e(-1,0));d.Expression.prototype.findLinearSubset=function(e){for(var t=[],n=0;n<e.length;n++)t.push(!this.dependsOn(e[n]));return t},d.FreeVariable.prototype.findLinearSubset=function(e){for(var t=[],n=0;n<e.length;n++)t.push(!0);return t},d.Add.prototype.findLinearSubset=function(e){for(var t=[],n=this.args[0].findLinearSubset(e),r=this.args[1].findLinearSubset(e),i=0;i<e.length;i++)t.push(n[i]&&r[i]);return t},d.Subtract.prototype.findLinearSubset=d.Add.prototype.findLinearSubset,d.Negative.prototype.findLinearSubset=function(e){return this.args[0].findLinearSubset(e)},d.Multiply.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e).slice(),n=this.args[1].findLinearSubset(e).slice(),r=0,i=0,s=0;s<e.length;s++)t[s]=t[s]&&!this.args[1].dependsOn(e[s]),t[s]&&(r+=1),n[s]=n[s]&&!this.args[0].dependsOn(e[s]),n[s]&&(i+=1);return i<=r?t:n},d.Divide.prototype.findLinearSubset=function(e){for(var t=this.args[0].findLinearSubset(e),n=[],r=0;r<e.length;r++)n.push(t[r]&&!this.args[1].dependsOn(e[r]));return n},d.List.prototype.findLinearSubset=function(e){var t=[];for(i=0;i<e.length;i++)t.push(!0);for(var n=0;n<this.args.length;n++)for(var r=this.args[n].findLinearSubset(e),i=0;i<e.length;i++)t[i]=t[i]&&r[i];return t},d.Broadcast.prototype.findLinearSubset=function(e){for(var t=this._replacedSymbols,n=this._expression,r=this._lists,i={},s=0;s<r.length;s++){for(var a=r[s].findLinearSubset(e),o=f,u=0;u<e.length;u++)a[u]?r[s].dependsOn(e[u])&&(o=d.Add([o,d.FreeVariable(e[u])])):o=d.Add([o,d.Exponent([d.FreeVariable(e[u]),p])]);i[t[s]]=o}return n.substitute(i).findLinearSubset(e)},d.Piecewise.prototype.findLinearSubset=function(e){for(var t=this.args[0],n=this.args[1].findLinearSubset(e),r=this.args[2].findLinearSubset(e),i=[],s=0;s<e.length;s++)i.push(!t.dependsOn(e[s])&&n[s]&&r[s]);return i}});\ndefine(\'core/math/features/deriveRegressionRestrictions\',[\'require\',\'parsenodes\',\'core/math/types\',\'core/math/domaintypes\'],function(require){"use strict";var g=require("parsenodes"),c=require("core/math/types"),s=require("core/math/domaintypes");function e(e){for(var t,n=this.args[0],r=this.getDependencies(),i={},s=0;s<r.length;s++)if(e.listStatistics.hasOwnProperty(r[s])){if(void 0!==t)return{};t=r[s]}if(void 0===t)return{};if(1!==n.polynomialOrder(t))return{};var o=n.getPolynomialCoefficients(t),a=o[1],c=o[1].getDependencies();if(1!==c.length)return{};var p=c[0];if(1!==a.polynomialOrder(p))return{};var u=e.listStatistics[t],l=(u.max-u.min)/Math.min(u.length-1,31),f=Math.PI/l;return!isFinite(f)||f<=0?{}:(i[p]=g.Piecewise([g.And([g.Comparator["<="]([g.Constant(0),a]),g.Comparator["<"]([a,g.Constant(f)])]),g.Constant(1),g.Constant(NaN)]).boundDomain(p),i)}g.Base.prototype.deriveRegressionRestrictions=function(){return this},g.Broadcast.prototype.deriveRegressionRestrictions=function(){for(var e=this._replacedSymbols,t=this._expression,n=this._lists,r={},i=0;i<e.length;i++)0===n[i].getDependencies().length&&n[i].valueType===c.ListOfNumber&&(r[e[i]]=function(e){for(var t=1/0,n=-1/0,r=e.length,i=0;i<e.length;i++)t=Math.min(t,e[i]),n=Math.max(n,e[i]);return{min:t,max:n,length:r}}(n[i].asValue()));var s,o=t._deriveRegressionRestrictions({listStatistics:r});for(s in o)if("known"!==o[s].type)return this;var a=t;for(s in o)a=function(e,t,n){if("known"!==n.type)return e;var r=g.And([g.Comparator["<="]([g.Constant(n.bounds[0]),g.FreeVariable(t)]),g.Comparator["<="]([g.FreeVariable(t),g.Constant(n.bounds[1])])]);return g.Multiply([e,g.Piecewise([r,g.Constant(1),g.Constant(NaN)])])}(a,s,o[s]);return g.Broadcast(e,[a].concat(n))},g.Base.prototype._deriveRegressionRestrictions=function(e){return{}},g.Expression.prototype._deriveRegressionRestrictions=function(e){for(var t={},n=0;n<this.args.length;n++){var r=this.args[n]._deriveRegressionRestrictions(e);for(var i in r)t[i]=t[i]?s.intersectDomains(t[i],r[i]):r[i]}return t},g.BuiltInFunction.sin.prototype._deriveRegressionRestrictions=e,g.BuiltInFunction.cos.prototype._deriveRegressionRestrictions=e,g.Exponent.prototype._deriveRegressionRestrictions=function(e){for(var t=this.args[0],n=this.args[1],r=t.getDependencies(),i=n.getDependencies(),s={},o=!1,a=0;a<i.length;a++)if(e.listStatistics.hasOwnProperty(i[a])){o=!0;break}if(!o)return{};if(1!==r.length)return{};var c=r[0];return e.listStatistics.hasOwnProperty(c)||1!==t.polynomialOrder(c)?{}:(s[c]=g.Piecewise([g.Comparator[">="]([t,g.Constant(0)]),g.Constant(1),g.Constant(NaN)]).boundDomain(c),s)},g.Piecewise.prototype._deriveRegressionRestrictions=function(e){for(var t={},n=this.getDependencies(),r=0;r<n.length;r++)t[n[r]]=s.unknownDomain();return t}});\ndefine(\'core/math/features/reparameterizeRegression\',[\'require\',\'parsenodes\',\'core/math/types\'],function(require){"use strict";var x=require("parsenodes"),n=require("core/math/types");function b(e,t){for(var r,i=e.getDependencies(),n=0;n<i.length;n++)if(t.hasOwnProperty(i[n])){if(void 0!==r)return;r=i[n]}return r}function D(e,t){if(1===e.polynomialOrder(t)){var r=e.getPolynomialCoefficients(t),i=r[1],n=r[0],s=i.getDependencies();if(1===s.length){var a=s[0];if(1===i.polynomialOrder(a)){var o=n.getDependencies().filter(function(e){return e!==a});if(1===o.length){var p=o[0];if(1===n.polynomialOrder(p))return[n,i]}}}}}function F(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(void 0!==r)for(var i=r.getDependencies(),n=0;n<i.length;n++){var s=i[n];-1===e.indexOf(s)&&e.push(s)}}return e}function u(e,t,r){for(var i=0;i<e.length;i++)if(i!==r)for(var n=e[i],s=0;s<t.length;s++)for(var a=t[s].model.replacedDependencies,o=0;o<a.length;o++)if(n.dependsOn(a[o]))return 1}function d(e){var t,r;for(s=0;s<this.args.length;s++){var i=this.args[s]._reparameterizeRegression(e);if(i){if(void 0!==r)return;t=i,r=s}}if(void 0!==r&&!u(this.args,t,r)){for(var n=[],s=0;s<t.length;s++){var a=t[s];n.push({model:a.model,expression:this.copyWithArgs([].concat(this.args.slice(0,r),a.expression,this.args.slice(r+1)))})}return n}}function g(e,t){var r=e.model;if("exp"!==r.type)return e;if(r.shiftScale)return e;var i=e.expression,n="Negative"===i.type;if(n&&(i=i.args[0]),"BuiltInFunction[\'exp\']"!==i.type)return e;var s=i.args[0],a=b(s,t.listStatistics);if(void 0===a)return e;var o=D(s,a);if(!o)return e;var p=o[0],l=o[1],c=[s.tmpVar(),s.tmpVar()],u=t.listStatistics[a].max-t.listStatistics[a].min,d=.5*(t.listStatistics[a].max+t.listStatistics[a].min),g=x.BuiltInFunction.exp([x.Add([x.Multiply([x.FreeVariable(c[0]),x.Divide([x.Subtract([x.DummyIndex(a),x.Constant(d)]),x.Constant(u)])]),x.FreeVariable(c[1])])]);return n&&(g=x.Negative([g])),{model:{type:"exp",shiftScale:{mulNode:l,addNode:p,newParameterSymbols:c,stats:{range:u,midrange:d}},base:r.base,intercept:r.intercept,replacedDependencies:F(l,p,r.base&&r.base.node,r.intercept&&r.intercept.node)},expression:g}}function f(e,t,r){var i=e._symbol,n=e.args[0],s=b(n,r.listStatistics);if(void 0!==s){var a=D(n,s);if(a){var o=a[0],p=a[1],l=t.getDependencies();if(1===l.length){var c=l[0];if(!n.dependsOn(c)&&1===t.polynomialOrder(c)){var u,d,g,f,m,h,y,v=[e.tmpVar(),e.tmpVar(),e.tmpVar()];return[{model:{type:"trig",amplitudeNode:t,frequencyNode:p,phaseNode:o,newParameterSymbols:v,replacedDependencies:F(t,p,o)},expression:(d=s,g=v,f="cos"===(u=i)?g[0]:g[1],m="cos"===u?g[1]:g[0],h=g[2],y=x.Multiply([x.FreeVariable(h),x.DummyIndex(d)]),("sin"===u?x.Add:x.Subtract)([x.Multiply([x.FreeVariable(f),x.BuiltInFunction.cos([y])]),x.Multiply([x.FreeVariable(m),x.BuiltInFunction.sin([y])])]))}]}}}}}x.Base.prototype.reparameterizeRegression=function(){},x.Broadcast.prototype.reparameterizeRegression=function(){for(var e=this._replacedSymbols,t=this._lists,r={},i=0;i<e.length;i++)0===t[i].getDependencies().length&&t[i].valueType===n.ListOfNumber&&(r[e[i]]=function(e){for(var t=1/0,r=-1/0,i=e.length,n=0;n<e.length;n++)t=Math.min(t,e[n]),r=Math.max(r,e[n]);return{min:t,max:r,length:i}}(t[i].asValue()));return this._reparameterizeRegression({listStatistics:r})},x.Base.prototype._reparameterizeRegression=function(e){},x.Expression.prototype._reparameterizeRegression=d,x.Exponent.prototype._reparameterizeRegression=function(e){var t=this.args[0],r=this.args[1],i=r.getDependencies(),n=t.getDependencies();if(function(e,t){for(var r=e.getDependencies(),i=0;i<r.length;i++)if(t[r[i]])return 1}(r,e.listStatistics)){if(0===n.length){if(t.asValue()<0)return;return[{model:{type:"exp",replacedDependencies:[]},expression:x.BuiltInFunction.exp([x.Multiply([x.BuiltInFunction.ln([t]),r])])}]}if(1===n.length&&!e.listStatistics.hasOwnProperty(n[0])&&-1===i.indexOf(n[0])&&1===t.polynomialOrder(n[0])){var s=this.tmpVar();return[g({model:{type:"exp",base:{node:t,newParameterSymbols:[s]},replacedDependencies:t.getDependencies()},expression:x.BuiltInFunction.exp([x.Multiply([x.FreeVariable(s),r])])},e)]}}},x.BuiltInFunction.exp.prototype._reparameterizeRegression=function(e){if(void 0!==b(this.args[0],e.listStatistics))return[g({model:{type:"exp",replacedDependencies:[]},expression:this},e)]},x.Multiply.prototype._reparameterizeRegression=function(e){var t,r,i;if("BuiltInFunction[\'sin\']"===this.args[0].type||"BuiltInFunction[\'cos\']"===this.args[0].type)return f(this.args[0],this.args[1],e);if("BuiltInFunction[\'sin\']"===this.args[1].type||"BuiltInFunction[\'cos\']"===this.args[1].type)return f(this.args[1],this.args[0],e);for(i=0;i<this.args.length;i++){var n=this.args[i]._reparameterizeRegression(e);if(n){if(void 0!==r)return;t=n,r=i}}if(void 0!==r&&!u(this.args,t,r)){var s=1===r?0:1,a=this.args[s];if(1!==t.length)return d.call(this,e);var o=t[0],p=o.model;if("exp"!==p.type||"BuiltInFunction[\'exp\']"!==o.expression.type||o.model.shiftScale)return d.call(this,e);var l=a.getDependencies();if(1!==l.length||1!==a.polynomialOrder(l[0])||e.listStatistics.hasOwnProperty(l[0]))return d.call(this,e);var c=this.tmpVar();return[{model:{type:"exp",replacedDependencies:[]},expression:this},g({model:{type:"exp",base:p.base,intercept:{node:a,newParameterSymbols:[c],sign:1},replacedDependencies:F(p.base&&p.base.node,a)},expression:x.BuiltInFunction.exp([x.Add([o.expression.args[0],x.FreeVariable(c)])])},e),g({model:{type:"exp",base:p.base,intercept:{node:a,newParameterSymbols:[c],sign:-1},replacedDependencies:F(p.base&&p.base.node,a)},expression:x.Negative([x.BuiltInFunction.exp([x.Add([o.expression.args[0],x.FreeVariable(c)])])])},e)]}}});\ndefine(\'parser\',[\'require\',\'core/math/baseparser\',\'core/math/features/getConcreteTree\',\'core/math/features/getValueType\',\'core/math/features/typeCheck\',\'core/math/features/repr\',\'core/math/features/scalarEvalExpression\',\'core/math/features/constantcollapsedcopy\',\'core/math/features/polynomialorder\',\'core/math/features/polynomialcoefficients\',\'core/math/features/extractconditions\',\'core/math/features/piecewiseDependsOn\',\'core/math/features/bounddomain\',\'core/math/features/derivative\',\'core/math/features/substitute\',\'core/math/features/isImplicit\',\'core/math/features/solve\',\'core/math/features/analyze\',\'core/math/features/analyzeFourFunction\',\'core/math/features/analyzeScientific\',\'core/math/features/analyzeSingleExpressionScientific\',\'core/math/features/getgraphmode\',\'core/math/features/getgraphinfo\',\'core/math/features/getMoveStrategy\',\'core/math/features/getDefaultDragMode\',\'core/math/features/tableinfo\',\'core/math/features/tableerror\',\'core/math/features/graph\',\'core/math/features/elementAt\',\'core/math/features/printLatex\',\'core/math/features/statistics\',\'core/math/features/getExpressionType\',\'core/math/features/findLinearSubset\',\'core/math/features/deriveRegressionRestrictions\',\'core/math/features/reparameterizeRegression\'],function(require){"use strict";var e=require("core/math/baseparser");return require("core/math/features/getConcreteTree"),require("core/math/features/getValueType"),require("core/math/features/typeCheck"),require("core/math/features/repr"),require("core/math/features/scalarEvalExpression"),require("core/math/features/constantcollapsedcopy"),require("core/math/features/polynomialorder"),require("core/math/features/polynomialcoefficients"),require("core/math/features/extractconditions"),require("core/math/features/piecewiseDependsOn"),require("core/math/features/bounddomain"),require("core/math/features/derivative"),require("core/math/features/substitute"),require("core/math/features/isImplicit"),require("core/math/features/solve"),require("core/math/features/analyze"),require("core/math/features/analyzeFourFunction"),require("core/math/features/analyzeScientific"),require("core/math/features/analyzeSingleExpressionScientific"),require("core/math/features/getgraphmode"),require("core/math/features/getgraphinfo"),require("core/math/features/getMoveStrategy"),require("core/math/features/getDefaultDragMode"),require("core/math/features/tableinfo"),require("core/math/features/tableerror"),require("core/math/features/graph"),require("core/math/features/elementAt"),require("core/math/features/printLatex"),require("core/math/features/statistics"),require("core/math/features/getExpressionType"),require("core/math/features/findLinearSubset"),require("core/math/features/deriveRegressionRestrictions"),require("core/math/features/reparameterizeRegression"),e});\ndefine(\'core/math/finddependencyorder\',[\'require\',\'core/math/builtinframe\',\'underscore\'],function(require){"use strict";var k=require("core/math/builtinframe"),x=require("underscore");return function(o,u,r){var n,e,i,t=[],v={},l={},a={},c={},g=0,d=[],w=[];if(!r)for(n in r=[],u)u.hasOwnProperty(n)&&r.push(n);for(n in u)if(u.hasOwnProperty(n)){for(i=u[n].exportPenalty||0;t.length<i+1;)t.push([]);t[i].push(n)}for(i=0;i<t.length;i++){for(var h={},p=0;p<t[i].length;p++){n=t[i][p];for(var s=u[n].getLegalExports(o),f=0;f<s.length;f++)e=s[f],k[e]||v[e]||(h[e]=h[e]||[],h[e].push(n),1<h[e].length&&(l[e]=!0))}for(e in h)v[e]=h[e]}for(p=0;p<r.length;p++)c.hasOwnProperty(r[p])||!function r(n){c[n]=c[n]||{};var e=c[n];var i;e.id=n;e.index=g;e.lowlink=g;d.push(e);e.instack=!0;g++;var t=u[n].getDependencies();for(var o=0;o<t.length;o++){var l=t[o];if(v.hasOwnProperty(l))for(var a=v[l],h=0;h<a.length;h++){var p=a[h];c.hasOwnProperty(p)?(i=c[p]).instack&&(e.lowlink=Math.min(e.lowlink,i.index)):(r(p),i=c[p],e.lowlink=Math.min(e.lowlink,i.lowlink))}}if(e.lowlink===e.index)if((i=d.pop()).instack=!1,i===e)f=e,w.push(f.id);else{for(var s=[i];(i=d.pop()).instack=!1,s.push(i),i!==e;);y(s)}var f}(r[p]);function y(r){for(var n,e=[],i=r.length-1;0<=i;i--){n=r[i];var t=u[n.id].getLegalExports(o);Array.prototype.push.apply(e,t),e.push(t[0]),w.push(n.id)}for((e=x.unique(e)).sort(),i=0;i<e.length;i++)a[e[i]]=e}return{resolved:w,multiplyDefined:l,cyclicallyDefined:a}}});\ndefine(\'core/math/findIntersections\',[\'require\',\'core/types/graphmode\',\'./plotter\',\'parsenodes\',\'core/math/distance\'],function(require){"use strict";var N=require("core/types/graphmode"),X=require("./plotter").default,i=require("parsenodes"),c=require("core/math/distance");function k(n){for(var t=[],e=0;e<n;e++)t[e]={x:[],y:[],intersects:[]};return t}function A(n,t){t instanceof i.SolvedEquation?t=t._expression:t instanceof i.OptimizedRegression&&(t=t.model);var e=[],r=[];return t instanceof i.DoubleInequality?i.List.eachArgs(n,t._expressions,function(n){e.push(n[0].getCompiledFunction()),r.push(n[0].isConstant&&n[1].isNaN()),e.push(n[1].getCompiledFunction()),r.push(n[1].isConstant&&n[1].isNaN())}):i.List.wrap(t).eachElement(n,function(n){e.push(n.getCompiledFunction()),r.push(n.isConstant&&n.isNaN())}),{functions:e,skipIntersecting:r}}function Y(n,t,e){for(var r=X.sampleXY(n,t),i=r.poi.zeros,o=r.poi.extrema,s=[],p=0,u=0,p=0;p<i.x.length;p++){for(;u<o.x.length&&o.x[u]<i.x[p];u++)c.approx(o.y[u],0)&&s.push(o.x[u]);s.push(i.x[p])}for(;u<o.x.length;u++)c.approx(o.y[u],0)&&s.push(o.x[u]);return{x:s,y:s.map(e)}}return{findIntersections:function(n,t,e){var r=n[e],i=r.getGraphInfo(),o=r.getGraphMode(),s=A(r.policy,r.concreteTree),p=k(s.functions.length),u=function(n,t){var e,r,i=[];for(var o in n){n.hasOwnProperty(o)&&String(o)!==String(t)&&n[o].shouldIntersect()&&(r=A((e=n[o]).policy,e.concreteTree),i.push({id:o,graphMode:e.getGraphMode(),functions:r.functions,skipIntersecting:r.skipIntersecting}))}return i}(n,e);if(!u)return p;for(var c,a,f,h,g=0,l=0;l<u.length;l++)for(var y=u[l],d=0;d<s.functions.length;d++)if(!s.skipIntersecting[d])for(var x=s.functions[d].fn,v=X.computeDomain(t,i,x),m=0;m<y.functions.length;m++)if(!u[l].skipIntersecting[m]){var I=function(t,e,n,r){return n===N.X&&r===N.X||n===N.Y&&r===N.Y?function(n){return e(n)-t(n)}:(n===N.X&&r===N.Y||n===N.Y&&r===N.X)&&function(n){return n-e(t(n))}}(x,y.functions[m].fn,o,y.graphMode);if(I){var C=Y(I,v,x);if(100<(g+=C.x.length))return k(s.functions.length);!function(n,t){n.intersects=Array(n.x.length);for(var e=0;e<n.x.length;e++)n.intersects[e]=t}(C,y.id),f=C,h=void 0,o===N.X&&(h=f.y,f.y=f.x,f.x=h),c=p[d],a=C,Array.prototype.push.apply(c.x,a.x),Array.prototype.push.apply(c.y,a.y),Array.prototype.push.apply(c.intersects,a.intersects)}}return p},findIndicatorZeros:Y}});\ndefine(\'core/math/policyFourFunction\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicySingleExpressionFourFunction=e.PolicyFourFunction=void 0;var n=(i.prototype.assignmentForbidden=function(e){return"ans"!==e.slice(0,3)},i.prototype.isValidSlider=function(e){return!1},i.prototype.sliderVariables=function(){return[]},i.prototype.graphingEnabled=function(){return!1},i.prototype.ansEnabled=function(){return!this.singleExpression},i.prototype.disabledFeatures=function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]},i);function i(e){this.singleExpression=e.singleExpression}e.PolicyFourFunction=new n({singleExpression:!1}),e.PolicySingleExpressionFourFunction=new n({singleExpression:!0})});\ndefine(\'core/math/policyScientific\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicySingleExpressionScientific=e.PolicyScientific=void 0;var i=(n.prototype.assignmentForbidden=function(e){return this.singleExpression?"ans"!==e.slice(0,3):"tmp"===e.slice(0,3)},n.prototype.isValidSlider=function(e){return!1},n.prototype.sliderVariables=function(){return[]},n.prototype.graphingEnabled=function(){return!1},n.prototype.ansEnabled=function(){return!this.singleExpression},n.prototype.disabledFeatures=function(){return this.singleExpression?["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]:["Sum","Product","Integral","Derivative","Piecewise"]},n);function n(e){this.singleExpression=e.singleExpression}e.PolicyScientific=new i({singleExpression:!1}),e.PolicySingleExpressionScientific=new i({singleExpression:!0})});\ndefine(\'core/math/policyGraphing\',["require","exports","./builtinframe","core/types/graphmode"],function(require,t,r,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PolicyGraphing3D=t.PolicyGraphing=void 0;var e=(i.prototype.dimensions=function(){return 2},i.prototype.assignmentForbidden=function(t){return"x"===t||"y"===t||"theta"===t||"tmp"===t.slice(0,3)||r.hasOwnProperty(t)},i.prototype.isValidSlider=function(t){return"x"===t||"y"===t||"ans"!==t.slice(0,3)&&!this.assignmentForbidden(t)},i.prototype.sliderVariables=function(t){var r=this;return-1!==t.indexOf("theta")&&(t=t.filter(function(t){return"r"!==t})),t.filter(function(t){return!r.assignmentForbidden(t)&&"ans"!==t.slice(0,3)})},i.prototype.graphingEnabled=function(){return!0},i.prototype.ansEnabled=function(){return!1},i.prototype.validRegressionParameter=function(t){return"x"!==t&&"y"!==t},i.prototype.validLHS=function(t){return"theta"!==t},i.prototype.unplottablePolarFunction=function(t,r){return"theta"===t&&-1!==r.indexOf("r")},i.prototype.validDoubleInequalitySymbol=function(t){return"x"===t||"y"===t},i.prototype.validDoubleInequalityVariables=function(t){return!(2<t.length)&&t.every(this.validDoubleInequalitySymbol)},i.prototype.validExpressionVariables=function(t){return 1===t.length&&"x"===t[0]},i.prototype.validSolvedVariable=function(t){return"x"===t||"y"===t||"r"===t},i.prototype.validImplicitVariables=function(t){switch(t.length){case 0:return!0;case 1:return"x"===t[0]||"y"===t[0]||"r"===t[0];case 2:return"x"===t[0]&&"y"===t[1]||"y"===t[0]&&"x"===t[1]||"r"===t[0]&&"theta"===t[1]||"theta"===t[0]&&"r"===t[1];default:return!1}},i.prototype.graphableListVariables=function(t,r){return"x"===t||"y"===t||"r"===t||"x"===r||"y"===r},i.prototype.validParametricVariable=function(t){return"t"===t},i.prototype.validParametricVariables=function(t){return 1===t.length&&this.validParametricVariable(t[0])},i.prototype.validInequalityVariables=function(t){switch(t.length){case 1:return"x"===t[0]||"y"===t[0]||"r"===t[0];case 2:return this.validImplicitVariables(t);default:return!1}},i.prototype.validFirstColumnVariable=function(t){return"y"!==t&&"r"!==t&&"theta"!==t&&!t.match(/y_(\\d+)/)},i.prototype.complicatedPolarImplicit=function(t,r){return"theta"===t||"r"===t&&1!==r},i.prototype.constantGraphMode=function(t){return"x"===t?n.X:"r"===t?n.POLAR:n.Y},i.prototype.graphMode=function(t,r){var e=r[0];return"y"===e||"x"===t?n.X:"r"===t&&"theta"===e?n.POLAR:n.Y},i.prototype.tableableAsConstant=function(t){return"x"!==t&&"r"!==t&&"theta"!==t},i.prototype.implicitIndependent=function(t){return"x"},i.prototype.implicitDependency=function(t){return 1!==t.length?"y":"y"===t[0]?"x":"theta"===t[0]?"r":"y"},i.prototype.graphableAsConstant=function(t){return"y"===t||"x"===t||"r"===t},i.prototype.disabledFeatures=function(){return[]},i);function i(){}var o=(a.prototype.dimensions=function(){return 3},a.prototype.assignmentForbidden=function(t){return"x"===t||"y"===t||"z"===t||"tmp"===t.slice(0,3)||r.hasOwnProperty(t)},a.prototype.isValidSlider=function(t){return"x"===t||"y"===t||"z"===t||"ans"!==t.slice(0,3)&&!this.assignmentForbidden(t)},a.prototype.sliderVariables=function(t){var r=this;return t.filter(function(t){return!r.assignmentForbidden(t)&&"ans"!==t.slice(0,3)})},a.prototype.graphingEnabled=function(){return!0},a.prototype.ansEnabled=function(){return!1},a.prototype.validRegressionParameter=function(t){return!1},a.prototype.validLHS=function(t){return!0},a.prototype.unplottablePolarFunction=function(t,r){return!1},a.prototype.validDoubleInequalitySymbol=function(t){return!1},a.prototype.validDoubleInequalityVariables=function(t){return!1},a.prototype.validExpressionVariables=function(t){var r=t.join("");return"x"===r||"y"===r||"xy"===r||"yx"===r},a.prototype.validSolvedVariable=function(t){return"x"===t||"y"===t||"z"===t},a.prototype.validImplicitVariables=function(t){return!1},a.prototype.graphableListVariables=function(t,r){return"x"===t||"y"===t||"x"===r||"y"===r},a.prototype.validParametricVariable=function(t){return"t"===t},a.prototype.validParametricVariables=function(t){return 1===t.length&&this.validParametricVariable(t[0])},a.prototype.validInequalityVariables=function(t){return!1},a.prototype.validFirstColumnVariable=function(t){return!1},a.prototype.complicatedPolarImplicit=function(t,r){return!1},a.prototype.constantGraphMode=function(t){return n.Z_3D},a.prototype.graphMode=function(t,r){return"z"===t&&this.validExpressionVariables(r)?n.Z_3D:n.NONE},a.prototype.tableableAsConstant=function(t){return"x"!==t&&"r"!==t},a.prototype.implicitIndependent=function(t){return"x"},a.prototype.implicitDependency=function(t){if(2!==t.length)return"z";var r=t[0]<t[1]?t[0]+t[1]:t[1]+t[0];return"xy"===r?"z":"xz"===r?"y":"yz"===r?"x":"z"},a.prototype.graphableAsConstant=function(t){return"z"===t},a.prototype.disabledFeatures=function(){return[]},a);function a(){}t.PolicyGraphing=new e,t.PolicyGraphing3D=new o});\ndefine(\'core/math/frameFourFunction\',[\'require\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var i=require("core/math/parsenode/builtinfunction");return{getFrame:function(n){var t={};return n.additionalFunctions&&-1!==n.additionalFunctions.indexOf("sqrt")&&(t.sqrt=i.sqrt),t}}});\ndefine(\'core/math/frameScientific\',[\'require\',\'core/math/builtinconstants\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var e=require("core/math/builtinconstants"),i=require("core/math/parsenode/builtinfunction"),r=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];function n(r,n){for(var t=0;t<r.length;t++){var e=r[t];if(!n.hasOwnProperty(e))throw new Error("Programming Error: key \'"+e+"\' does not exist in table. Must be one of:\\n"+Object.keys(n).join("\\n"))}}return n(r,e),n(o,i),{getFrame:function(n){var t={};return r.forEach(function(r){t[r]=e[r]}),o.forEach(function(r){n.replaceRoundWithReciprocal&&"round"===r||(t[r]=i[r])}),n.trigAngleMultiplier&&(t.trigAngleMultiplier=n.trigAngleMultiplier),t}}});\ndefine(\'core/math/frameSingleExpressionScientific\',[\'require\',\'core/math/builtinconstants\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var t=require("core/math/builtinconstants"),i=require("core/math/parsenode/builtinfunction"),e=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];function r(r,n){for(var t=0;t<r.length;t++){var i=r[t];if(!n.hasOwnProperty(i))throw new Error("Programming Error: key \'"+i+"\' does not exist in table. Must be one of:\\n"+Object.keys(n).join("\\n"))}}return r(e,t),r(o,i),{getFrame:function(r){var n={};return e.forEach(function(r){n[r]=t[r]}),o.forEach(function(r){n[r]=i[r]}),r.trigAngleMultiplier&&(n.trigAngleMultiplier=r.trigAngleMultiplier),n}}});\ndefine(\'core/math/frameGraphing\',[\'require\',\'core/math/builtinconstants\',\'core/math/parsenode/builtinfunction\'],function(require){"use strict";var e=require("core/math/builtinconstants"),r=require("core/math/parsenode/builtinfunction"),o=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov","distance","midpoint"],a=["erf","ttest","tscore","ittest","normaldist","tdist","poissondist","binomialdist","pdf","cdf","random","histogram","dotplot","boxplot"],c=["distance","midpoint"],s=["det","inv","transpose","rref","trace"];function t(t,i){for(var n=0;n<t.length;n++){var e=t[n];if(!i.hasOwnProperty(e))throw new Error("Programming Error: key \'"+e+"\' does not exist in table. Must be one of:\\n"+Object.keys(i).join("\\n"))}}return t(o,r),t(a,r),{getFrame:function(t){var i,n={};for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(i in r)r.hasOwnProperty(i)&&(!0!==t.restrictedFunctions||-1===o.indexOf(i)||!0===t.forceEnableGeometryFunctions&&-1!==c.indexOf(i))&&(!1===t.distributions&&-1!==a.indexOf(i)||-1===s.indexOf(i)&&(n[i]=r[i]));return t.trigAngleMultiplier&&(n.trigAngleMultiplier=t.trigAngleMultiplier),t.globalRandomSeed&&(n.globalRandomSeed=t.globalRandomSeed),t.initialEvaluation&&(n.initialEvaluation=t.initialEvaluation),n}}});\ndefine(\'core/math/interpolatedlabel\',["require","exports","parsenodes","core/lib/label","./policy","core/math/types"],function(require,e,p,r,f,c){"use strict";function h(e){if(e.length<2)return"text";var t=e.split("`").length-1;return t<2?"text":2==t&&"`"===e[0]&&"`"===e[e.length-1]?"latex":"mixed"}function t(e){if(0===e.length)return[""];for(var t=[],r=e.split(/(`)/),n=!1,a="",u=0;u<r.length;u++){var i=r[u];i.length&&("`"===i?(a+="`",(n=!n)||(t.push(a),a="")):(a+=i,n||(t.push(a),a="")))}return a.length&&t.push(a),t}function n(e){for(var t,r,n="\\\\$({"+["[a-zA-Z][0-9]*","[a-zA-Z]_[a-zA-Z0-9]+","[a-zA-Z]_\\\\{[a-zA-Z0-9]+\\\\}"].join("})|\\\\$({")+"})",a=new RegExp(n,"g"),u=[],i=0;r=a.exec(e);){i<(t=r.index)&&u.push(e.substr(i,t-i));var s=r[0],l=s.replace(/[{}\\$]/g,"").replace(/^([a-zA-Z])([0-9]+)$/,"$1_$2");u.push({symbol:l,str:s}),i=r.index+s.length}return i<e.length&&u.push(e.substr(i)),{raw:e,parts:u}}function g(e,t){return t?"{"+r.truncatedLatexLabel(e,{bigCutoff:1e7,digits:8})+"}":r.truncatedPlainmathLabel(e,{bigCutoff:1e7,digits:8})}Object.defineProperty(e,"__esModule",{value:!0}),e.interpolate=e.parse=e.chunkLabel=e.classifyLabelText=void 0,e.classifyLabelText=h,e.chunkLabel=t,e.parse=function(e){return t(e).map(n)},e.interpolate=function(e,t,r){return e.map(function(e){return function(e,t,r){for(var n=[],a="latex"===h(e.raw),u=0,i=e.parts;u<i.length;u++){var s=i[u];if("string"==typeof s)n.push(s);else{var l,o=p.Identifier(s.symbol).tryGetConcreteTree(f.defaultPolicy,t);if(o.valueType===c.Number){if("number"==typeof(l=o.asValue())){n.push(g(l,a));continue}}else if(o.valueType===c.ListOfNumber&&o.args[r]){if("number"==typeof(l=o.args[r].asValue())){n.push(g(l,a));continue}}a?n.push("{?}"):n.push("?")}}return n.join("")}(e,t,r)}).join("")}});\ndefine(\'core/math/getCLSymbolMap\',["require","exports","underscore","core/lib/label"],function(require,e,g,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCLSymbolMap=void 0,e.getCLSymbolMap=function(){var e={},t={},r={},a=[];for(var s in this.statements){if(this.statements.hasOwnProperty(s))switch((d=this.statements[s]).type){case"Error":break;case"Regression":r[s]=[],a.push(s);break;default:var i=d.getLegalExports(this.policy);if(i){for(var n=0,o=i;n<o.length;n++){var p=o[n];0<d.exportPenalty?t[p]=s:e[p]=s}r[s]=g.difference(d.getDependencies(),d.getDummyDependencies(),i)}}}for(var l=0,c=a;l<c.length;l++){var s=c[l],d=this.statements[s],u=y.latexToIdentifier(d.userData.residualVariable);u&&(t[u]=s);for(var f,h=d.getDependencies().slice(),v={},p=void 0;p=h.pop();){v[p]||(v[p]=!0,(f=e[p]||t[p])?(h.push.apply(h,r[f]),r[s].push(p)):t[p]=s)}}return{exportMap:e,weakExportMap:t,dependencyMap:r}}});\ndefine(\'core/types/line-width\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.THICK=e.DEFAULT=e.THIN=void 0,e.THIN=1,e.DEFAULT=2.5,e.THICK=5});\ndefine(\'core/types/point-opacity\',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT=void 0,e.DEFAULT=.9});\ndefine(\'core/math/context\',["require","exports","parser","parsenodes","./finddependencyorder","./errormsg","./workerconfig","./findIntersections","core/vendor/d3-color","./policyFourFunction","./policyScientific","./policyGraphing","./frameFourFunction","./frameScientific","./frameSingleExpressionScientific","./frameGraphing","tslib","underscore","./plotter","core/types/graphmode","./interpolatedlabel","./expression-types","./getCLSymbolMap","./distribution-spec","./maybe-rational","core/lib/number-to-latex","core/lib/label","./functions","core/types/line-width","./evaluationstate","core/types/point-opacity","core/math/types"],function(require,e,W,t,P,z,i,a,s,r,n,o,l,p,d,c,B,h,u,O,q,E,f,U,m,j,X,v,y,T,g,Y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var J=t.Constant,_=t.Seed,R=t.FunctionCall,H=t.Image,K=t.Simulation,Q=t.Slider,Z=t.Table,$=t.TableColumn,F=t.FreeVariable,x=a.findIntersections,b={fourFunction:r.PolicyFourFunction,scientific:n.PolicyScientific,singleExpressionScientific:n.PolicySingleExpressionScientific,singleExpressionFourFunction:r.PolicySingleExpressionFourFunction,graphing:o.PolicyGraphing,graphing_3d:o.PolicyGraphing3D},D={fourFunction:l,singleExpressionFourFunction:l,scientific:p,singleExpressionScientific:d,graphing:c,graphing_3d:c};function ee(e,t){for(var i="id"+e,a=0,s=t||[];a<s.length;a++){var r=s[a];i+="::"+r[0]+r[1]}return i}var S=J(m.maybeRational(0,1)),M=J(m.maybeRational(1,1)),N=J(NaN);function te(e,t){return e?"0"===e?S:"1"===e?M:W.parse(e,t):N}function ie(e,t){if(e)return W.parse(e,t)}function w(e){return"ans"!==e.slice(0,3)}function I(e,t){var i=e.multiplyDefined,a=e.cyclicallyDefined;for(var s in i)i.hasOwnProperty(s)&&(t[s]=z.multiplyDefined(s));for(var s in a)a.hasOwnProperty(s)&&(t[s]=z.cycle(a[s].filter(w)))}function A(e,t,i){for(var a=0,s=i;a<s.length;a++){var r=s[a];e[r]||(e[r]=[]),e[r].push(t)}}function C(e,t,i){if(i.extraDepNodes)for(var a=0,s=i.extraDepNodes;a<s.length;a++){var r=s[a];r&&A(e,t,r.getDependencies())}if(i.clickableRules)for(var n=0,o=i.clickableRules;n<o.length;n++){var l=o[n];l.assignment&&A(e,t,l.assignment.getDependencies()),l.expression&&A(e,t,l.expression.getDependencies())}}var ae={lineWidth:{parseNode:"lineWidth",valueOutputProp:"computedLineWidth",validOutputProp:"line_width_valid",default:function(){return y.DEFAULT},shouldEvaluate:void 0,seed:"lw"},lineOpacity:{parseNode:"lineOpacity",valueOutputProp:"computedLineOpacity",validOutputProp:"line_opacity_valid",default:void 0,shouldEvaluate:void 0,seed:"lo"},pointOpacity:{parseNode:"pointOpacity",valueOutputProp:"computedPointOpacity",validOutputProp:"point_opacity_valid",default:function(e,t){var i=e.rawTree,a=e.concreteTree;return i.getGraphMode(t,a)===O.XYPOINT_MOVABLE?1:g.DEFAULT},shouldEvaluate:void 0,seed:"po"},fillOpacity:{parseNode:"fillOpacity",valueOutputProp:"computedFillOpacity",validOutputProp:"fill_opacity_valid",default:void 0,shouldEvaluate:function(e){return e===E.ExpressionType.POLYGON||e===E.ExpressionType.PARAMETRIC},seed:"fo"}};function L(e,t,i,a){var s=ae[a],r=e.evaluationState,n=e.rawTree.metaData,o=s.default&&s.default(e,t),l=function(e,t,i,a){var s={},r=!0,n=NaN;if(i)for(var o=i.tryGetConcreteTree(e,t),n=+o.asValue(),l=0,p=o.getDependencies();l<p.length;l++){s[p[l]]=!0}return isFinite(n)||(r=!1,n=NaN),i||(r=!0,void 0!==a&&(n=a)),{value:n,valid:r,missingVarsMap:s}}(t,i,n[s.parseNode],o);n[s.valueOutputProp]=l.value,r[s.validOutputProp]=l.valid,T.addSliderPrompts(r,t,l.missingVarsMap)}function k(e){return s.rgb(e[0],e[1],e[2]).formatHex()}function G(e,t,i,a,s){var r;if(e){for(var n,o=e.tryGetConcreteTree(a,s),l=o.asValue(),p={},d=0,c=o.getDependencies();d<c.length;d++){p[c[d]]=!0}T.addSliderPrompts(i,a,p),(r=!(!l||o.valueType!==Y.RGBColor))&&(n=o&&o.valueType===Y.RGBColor?k(l):l.map(k),t.colorLatexValue=n,i.color_latex_value=n)}else r=!0;i.color_latex_valid=r}var V=(se.prototype.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markAsDirtyRoot(e);this.currentStatus={},this.analysis={},this.parent_frame=D[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,forceEnableGeometryFunctions:this.forceEnableGeometryFunctions,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,distributions:this.distributions,additionalFunctions:this.additionalFunctions,trigAngleMultiplier:J(this.use_degrees?Math.PI/180:m.maybeRational(1,1)),initialEvaluation:J(this.initialEvaluation?1:0),globalRandomSeed:_(this.globalRandomSeedString||"")}),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},se.prototype.processChangeSet=function(e){var t={intersections:{},graphs:{}};e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={});var i=!!e.isCompleteState&&!e.isUndoRedoState;i!==this.initialEvaluation&&(this.initialEvaluation=i,this.invalidate()),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("globalRandomSeed")&&this.setGlobalRandomSeed(e.globalRandomSeed),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("forceEnableGeometryFunctions")&&this.setForceEnableGeometryFunctions(e.forceEnableGeometryFunctions),e.hasOwnProperty("distributions")&&this.setDistributions(e.distributions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("replaceRoundWithReciprocal")&&this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),e.hasOwnProperty("pointsOfInterest")&&this.setWorkerConfigProperty("pointsOfInterest",e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setWorkerConfigProperty("plotSingleVariableImplicitEquations",e.plotSingleVariableImplicitEquations),e.hasOwnProperty("plotImplicits")&&this.setWorkerConfigProperty("plotImplicits",e.plotImplicits),e.hasOwnProperty("plotInequalities")&&this.setWorkerConfigProperty("plotInequalities",e.plotInequalities),e.hasOwnProperty("sliders")&&this.setWorkerConfigProperty("sliders",e.sliders),e.hasOwnProperty("intersectId")&&(this.intersectId=e.intersectId),this.processStatements(e,t),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId,t);var a=this._publishAllStatuses();return this._computeAllLabels(),this._graphAllChanged(t),this.unpublishedIds={},{syncId:e.syncId,isCompleteState:e.isCompleteState,intersectionChanges:t.intersections,statusChanges:a,graphChanges:t.graphs}},se.prototype.processStatements=function(e,t){if(e.statements)for(var i in e.statements){var a=e.statements[i];if(null===a){var s=void 0;if(!e.isCompleteState&&this.statements.hasOwnProperty(i)&&(s=this.statements[i].getAllIds()),this.removeStatement(i,t),!e.isCompleteState&&s)for(var r=0,n=s;r<n.length;r++){var o=n[r];t.graphs[o]=void 0}}else this.addStatement(a,t)}},se.prototype.setViewState=function(e){if(!h.isEqual(e,this.viewState))for(var t in this.viewState=e,this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)},se.prototype.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.asValue():e.trigAngleMultiplier=1,e}},se.prototype.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},se.prototype.setGlobalRandomSeed=function(e){this.globalRandomSeedString=e,this.parent_frame.globalRandomSeed=_(e),this.dirtyExportedSymbolRoots.globalRandomSeed=!0},se.prototype.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=b[e],this.invalidate()},se.prototype.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},se.prototype.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},se.prototype.setForceEnableGeometryFunctions=function(e){this.forceEnableGeometryFunctions=e,this.invalidate()},se.prototype.setDistributions=function(e){this.distributions=e,this.invalidate()},se.prototype.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},se.prototype.setReplaceRoundWithReciprocal=function(e){this.replaceRoundWithReciprocal=e,this.invalidate()},se.prototype.setWorkerConfigProperty=function(e,t){t!==i[e]&&(i[e]=t,this.invalidate())},se.prototype._publishAllStatuses=function(){var e,t={},i=this.currentStatus;for(var a in this.currentStatus={},this.unpublishedIds)this.analysis.hasOwnProperty(a)&&(e=this.analysis[a].evaluationState,JSON.stringify(e)!==JSON.stringify(i[a])&&(t[a]=e),this.currentStatus[a]=e);return t},se.prototype._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var i=t.tryGetConcreteTree(this.policy,this.frame),a=1;i.valueType===Y.ListOfPoint&&(a=i.args.length);for(var s=[],r=0;r<a;r++)s.push(q.interpolate(this.currentLabel[e],this.frame,r));h.isEqual(s,t.computedLabels)||(t.computedLabels=s,this.unpublishedIds[e]=!0)}}},se.prototype._graphAllChanged=function(e){var t=this.getViewState(),i=!1;if(u.default.validateViewState(t)){for(var a in this.unpublishedIds)if(this.analysis.hasOwnProperty(a)){var s=this.analysis[a],r=s.evaluationState.expression_type,n=r===E.ExpressionType.SINGLE_POINT||r===E.ExpressionType.POINT_LIST;if(s.rawTree.isTable)for(var o=s.graph(t),l=0,p=s.rawTree.getAllIds();l<p.length;l++){var d=p[l];o[d]?this._notifyGraphComputed(d,o[d],e):this._notifyGraphRemoved(d,e)}else s.evaluationState.is_graphable&&(s.rawTree.userData.shouldGraph||s.rawTree.userData.showLabel&&n)?(this._notifyGraphComputed(a,s.graph(t),e),this.intersectId===a&&(i=!0)):this._notifyGraphRemoved(a,e)}h.keys(this.unpublishedIds).length&&void 0!==this.intersectId&&(this.unpublishedIds.hasOwnProperty(this.intersectId)||(i=!0)),i&&this._updateIntersections(this.intersectId,e)}},se.prototype._notifyGraphRemoved=function(e,t){t.graphs[e]=void 0},se.prototype._notifyGraphComputed=function(e,t,i){v.dehydrateGraphData(t),i.graphs[e]=t},se.prototype._updateIntersections=function(e,t){var i;this.viewState&&(this.analysis[e]&&this.analysis[e].shouldIntersect()?(i=x(this.analysis,this.viewState,e),t.intersections[e]=i):t.intersections[e]=[])},se.prototype.getDisabledFeatures=function(){var e=this.policy.disabledFeatures(),t=!1===this.functionDefinition?e.concat("FunctionDefinition"):e,i=this.additionalFunctions||[];return t=t.filter(function(e){return!("Exponent"===e&&-1!==i.indexOf("exponent")||"PercentOf"===e&&-1!==i.indexOf("percent"))})},se.prototype.areFractionsDisallowed=function(){var e=this.evaluationMode;return!("fourFunction"!==e&&"singleExpressionFourFunction"!==e||this.additionalFunctions&&-1!==this.additionalFunctions.indexOf("fraction"))},se.prototype.addStatement=function(e,t){var i=this;if(e){var a=e.id;this.markExportsDirty(a),this.markAsDirtyRoot(a);var s,r,n,o,l,p,d,c,h={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures(),disallowFrac:this.areFractionsDisallowed(),seedPrefix:ee(a)},u={extraDepNodes:[]};switch(e.type){case"table":var f=[];this.statements.hasOwnProperty(a)&&(f=this.statements[a].getAllIds()),e.shouldGraph=!0;for(var m=e.columns,v=[],y=0,g=0,_=m;g<_.length;g++)var x=_[g],y=Math.max(x.values.length,y);for(var b=0;b<m.length;b++){for(var D,S=void 0,P=void 0,x=m[b],O=W.parse(x.latex,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["tr",0],["tc",b]])})),S=[],E=-1,T=0;T<m[b].values.length;T++)x.values[T].replace(/\\\\space/g,"").match(/\\S/)?(S.push(W.parse(x.values[T],B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["tr",T+1],["tc",b]])}))),E=T):S.push(J(NaN));S=S.slice(0,E+1),(P=$(O,y,S)).id=x.id,P.header&&(P.header.userData=x,P.header.metaData={extraDepNodes:[]},x.colorLatex&&(D=W.parse(x.colorLatex,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["tr",0],["tc",b],["cl",b]])})),P.header.metaData.colorLatex=D,P.header.metaData.extraDepNodes.push(D))),v.push(P)}this.statements[a]=Z(v);var R=this.statements[a].getAllIds();f.forEach(function(e){-1===R.indexOf(e)&&i._notifyGraphRemoved(e,t)});break;case"image":var F="-\\\\trigAngleMultiplier*("+e.angle+")",M=W.parse(e.center,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ic",a]])})),N=W.parse(F,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ia",a]])})),w=W.parse(e.width,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["iw",a]])})),I=W.parse(e.height,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ih",a]])})),A=W.parse(e.opacity,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["io",a]])}));this.statements[a]=H({center:M,radianAngle:N,width:w,height:I,opacity:A});break;case"simulation":var C=W.parse(e.fps||"60",B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["fps",a]])}));this.statements[a]=K(C);break;default:for(var L in this.statements[a]=W.parse(e.latex,h),ae){var k,G=L;e[G]&&(k=ie(e[G],B.__assign(B.__assign({},h),{seedPrefix:ee(a,[[ae[G].seed,a]])})),u[G]=k,u.extraDepNodes.push(k))}e.colorLatex&&(k=ie(e.colorLatex,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ac",a]])})),u.colorLatex=k,u.extraDepNodes.push(k)),e.polarDomain&&e.polarDomain.min&&(u.polarDomainMin=te(e.polarDomain.min,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lm",a]])})),u.extraDepNodes.push(u.polarDomainMin)),e.polarDomain&&e.polarDomain.max&&(u.polarDomainMax=te(e.polarDomain.max,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lM",a]])})),u.extraDepNodes.push(u.polarDomainMax)),e.parametricDomain&&e.parametricDomain.min&&(u.parametricDomainMin=te(e.parametricDomain.min,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lm",a]])})),u.extraDepNodes.push(u.parametricDomainMin)),e.parametricDomain&&e.parametricDomain.max&&(u.parametricDomainMax=te(e.parametricDomain.max,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lM",a]])})),u.extraDepNodes.push(u.parametricDomainMax)),e.vizProps&&(e.vizProps.axisOffset&&(u.vizAxisOffset=te(e.vizProps.axisOffset,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["vo",a]])})),u.extraDepNodes.push(u.vizAxisOffset)),e.vizProps.breadth&&(u.vizBreadth=te(e.vizProps.breadth,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["vb",a]])})),u.extraDepNodes.push(u.vizBreadth))),e.cdf&&e.cdf.show&&(s=U.parseToplevelFunction(e.latex))&&"distribution"===s.type&&(u.distributionSpec=s,u.cdfMin=ie(e.cdf.min,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lm",a]])})),u.extraDepNodes.push(u.cdfMin),u.cdfMax=ie(e.cdf.max,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lM",a]])})),u.extraDepNodes.push(u.cdfMax)),this.statements[a].shouldPromoteToSlider(this.policy)&&(n=!(!(r=e.slider)||!r.isPlayingOnce),o=ie(r&&r.softMin,h),l=ie(r&&r.softMax,h),p=ie(r&&r.min,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lm",a]])})),d=ie(r&&r.max,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lM",a]])})),c=ie(r&&r.step,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ls",a]])})),this.statements[a]=Q(this.statements[a],{sliderMin:p,sliderMax:d,sliderStep:c,sliderIsPlayingOnce:n,sliderSoftMin:o,sliderSoftMax:l}))}var V=e.clickableInfo;V&&V.enabled&&(u.clickableRules=(V.rules||[]).map(function(e){return{ruleId:e.id,assignment:ie(e.assignment,h),expression:ie(e.expression,h)}})),this.statements[a].userData=e,this.statements[a].metaData=u;var z,j=e.label;j?(z=this.currentLabel[a])&&z.raw===j||(this.currentLabel[a]=q.parse(j)):delete this.currentLabel[a]}},se.prototype.removeStatement=function(e,t){var i,a=this.statements[e];a&&(this.markExportsDirty(e),a.isTable?(i=this,a.getAllIds().forEach(function(e){i._notifyGraphRemoved(e,t)})):this._notifyGraphRemoved(e,t),delete this.currentLabel[e],delete this.statements[e],delete this.analysis[e])},se.prototype.markExportsDirty=function(e){if(this.statements[e]){this.statements[e].isRegression&&(this.markedRegressionDirty=!0);for(var t=0,i=this.statements[e].getLegalExports(this.policy);t<i.length;t++){var a=i[t];this.dirtyExportedSymbolRoots[a]=!0}}},se.prototype.markAsDirtyRoot=function(e){this.dirtyStatementRoots[e]=!0},se.prototype.getFrame=function(){return this.updateAnalysis(),this.frame},se.prototype.getAnalysis=function(){return this.updateAnalysis(),this.analysis},se.prototype.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},se.prototype._updateRegressions=function(e){var t=this.frame,i=this.lastFrame,a=this.regressionFrame,s=[];for(var r in e)e.hasOwnProperty(r)&&e[r].isRegression&&s.push(r);var n=this;s.sort(function(e,t){var i=n.statements[e].userData&&n.statements[e].userData.residualVariable,a=n.statements[t].userData&&n.statements[t].userData.residualVariable;return i&&!a?-1:a&&!i?1:0});var o=P(this.policy,e,s);I(o,a);for(var l={},p=0,d=o.resolved;p<d.length;p++){var c,r=d[p];this.statements[r].isRegression?(this.analysis[r]=e[r].analyze(this.policy,a,t,i,l),this.analysis[r].exportTo(this.policy,t),delete e[r]):(c=e[r].tryGetConcreteTree(this.policy,a),e[r].exportTo(this.policy,c,a),l[r]={rawTree:e[r],concreteTree:c})}},se.prototype.buildSymbolToExpressionDirtyMap=function(){var e={};for(var t in this.statements)if(this.statements.hasOwnProperty(t)){var i=this.statements[t],a=i.metaData;if(A(e,t,i.getDependencies()),A(e,t,i.getLegalExports(this.policy)),i.isRegression&&i.userData&&i.userData.residualVariable&&A(e,t,[X.latexToIdentifier(i.userData.residualVariable)]),C(e,t,a),i.isTable&&i.columns)for(var s=0;s<i.columns.length;s++){var r=i.columns[s];r.header&&r.header.metaData&&C(e,t,r.header.metaData)}}return e},se.prototype.getDirtyIdsAndSymbols=function(e){var t={},i={},a=this.markedRegressionDirty,s=[],r=[];for(var n in this.dirtyStatementRoots)this.dirtyStatementRoots[n]&&(i[n]=!0,s.push(n));for(var o in this.dirtyExportedSymbolRoots)this.dirtyExportedSymbolRoots[o]&&(t[o]=!0,r.push(o));for(;s.length||r.length;){for(;s.length;){var n=s.pop(),l=this.statements[n];if(l){l.isRegression&&(a=!0);for(var p=0,d=l.getLegalExports(this.policy);p<d.length;p++)t[o=d[p]]||(t[o]=!0,r.push(o))}}for(;r.length;){var c=e[o=r.pop()];if(c)for(var h=0,u=c;h<u.length;h++)i[n=u[h]]||(i[n]=!0,s.push(n))}}return{ids:i,symbols:t,hasDirtyRegression:a}},se.prototype.updateAnalysis=function(){var e=this.buildSymbolToExpressionDirtyMap(),t=this.getDirtyIdsAndSymbols(e),i={};if(t.hasDirtyRegression){for(var a in this.statements)this.statements[a]&&(i[a]=this.statements[a]);this.frame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)}else{var s=t.ids;for(var a in s)this.statements[a]&&(i[a]=this.statements[a]);var r=t.symbols;for(var n in r)r[n]&&(delete this.frame[n],delete this.regressionFrame[n])}for(var a in i)i[a]&&(this.unpublishedIds[a]=!0);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={};var o=this.analysis,l=this.frame;"graphing"===this.evaluationMode&&this._updateRegressions(i);var p=P(this.policy,i);I(p,l);for(var d,c,h,u=p.resolved,f=0,m=u;f<m.length;f++)switch(a=m[f],this.evaluationMode){case"fourFunction":case"singleExpressionFourFunction":o[a]=this.statements[a].analyzeFourFunction(this.policy,l,o),o[a].exportTo(this.policy,l);break;case"scientific":o[a]=this.statements[a].analyzeScientific(this.policy,l,o),o[a].exportTo(this.policy,l);break;case"singleExpressionScientific":o[a]=this.statements[a].analyzeSingleExpressionScientific(this.policy,l,o),o[a].exportTo(this.policy,l);break;case"graphing":case"graphing_3d":if(l.r){var v=Object.create(l);if(v.r=F("r"),o[a]=this.statements[a].analyze(this.policy,v,o),o[a].getGraphMode()===O.POLAR){o[a].exportTo(this.policy,l);continue}}o[a]=this.statements[a].analyze(this.policy,l,o),o[a].exportTo(this.policy,l)}if("graphing"===this.evaluationMode||"graphing_3d"===this.evaluationMode)for(var y=0,g=u;y<g.length;y++){var a=g[y],_=o[a],x=_.evaluationState.expression_type;for(var b in ae){var D=b,S=ae[D];S.shouldEvaluate&&!S.shouldEvaluate(x)||L(_,this.policy,l,D)}!function(e,t,i){var a,s;if(e.rawTree.isTable&&e.evaluationState.column_data&&e.rawTree.columns)for(var r=0;r<e.evaluationState.column_data.length;r++)a=e.evaluationState.column_data[r],G((s=e.rawTree.columns[r].header.metaData).colorLatex,s,a,t,i);else a=e.evaluationState,G((s=e.rawTree.metaData).colorLatex,s,a,t,i)}(_,this.policy,l),function(e){var t=e.evaluationState.expression_type,i=e.rawTree.userData;if(i.clickableInfo&&i.clickableInfo.enabled){if(e.rawTree.isImage)return 1;if(e.rawTree.isSimulation)return 1;if(e.getGraphMode()!==O.XYPOINT_MOVABLE)return E.isClickableExpressionType(t)}}(_)&&function(e,C,L){var k=e.evaluationState,t=e.rawTree,G={},V={};k.clickableinfo_data={},t.metaData.clickableRules.forEach(function(e){var t,i,a,s,r,n,o,l,p=e.assignment,d=e.expression,c={};if(k.clickableinfo_data[e.ruleId]=c,p){"Identifier"===p.type?"Slider"===(o=(n=L[(r=p)._symbol])&&n.type)||"Assignment"===o?(t=r._symbol,(l=V[t])?(a=z.clickableObjectAlreadyAssigned(t).getError(),!0!==l&&(delete l.identifier,delete l.latex,l.error=z.clickableObjectAlreadyAssigned(t).getError(),V[t]=!0)):V[t]=c):a=z.clickableObjectAssignmentNotDefined(r._symbol).getError():a=z.clickableObjectAssignmentNotIdentifier().getError();for(var h=0,u=p.tryGetConcreteTree(C,L).getDependencies();h<u.length;h++){var f=u[h];G[f]=!0}}if(d){var m=d.tryGetConcreteTree(C,L);if(m.valueType===Y.Number){var v=+m.asValue();isNaN(v)||(i=j.default(v))}else if(m.valueType===Y.ListOfNumber){for(var y=[],g=!0,_=0,x=m.args;_<x.length;_++){if((M=x[_]).valueType!==Y.Number){g=!1;break}var b=+M.asValue();y.push(j.default(b)),isNaN(b)&&(g=!1)}g&&(i="\\\\left["+y.join(",")+"\\\\right]")}else if(m.valueType===Y.Point){for(var D=[],S=!0,P=0,O=m.args;P<O.length;P++){if((M=O[P]).valueType!==Y.Number){S=!1;break}if(b=+M.asValue(),isNaN(b)){S=!1;break}D.push(j.default(b))}S&&(i="\\\\left("+D.join(",")+"\\\\right)")}else if(m.valueType===Y.ListOfPoint){for(var g=!0,E=[],T=0,R=m.args;T<R.length;T++){var F=R[T];if(F.valueType!==Y.Point){g=!1;break}for(var M,D=[],S=!0,N=0,w=F.args;N<w.length;N++){if((M=w[N]).valueType!==Y.Number){S=!1;break}if(b=+M.asValue(),isNaN(b)){S=!1;break}D.push(j.default(b))}if(!S){g=!1;break}E.push("\\\\left("+D.join(",")+"\\\\right)")}g&&(i="\\\\left["+E.join(",")+"\\\\right]")}else m.valueType===Y.EmptyList&&(i="\\\\left[\\\\right]");i||(s=z.clickableObjectInvalidExpression().getError());for(var I=0,A=m.getDependencies();I<A.length;I++)f=A[I],G[f]=!0}a?c.error=a:s?c.error=s:t&&i&&(c.identifier=t,c.latex=X.identifierToLatex(t)+"="+i)}),T.addSliderPrompts(k,C,G)}(_,this.policy,l),x===E.ExpressionType.PARAMETRIC||x===E.ExpressionType.POLAR?function(e,t,i){var a=e.evaluationState,s=e.rawTree,r=a.expression_type===E.ExpressionType.POLAR?s.metaData.polarDomainMin:s.metaData.parametricDomainMin,n=a.expression_type===E.ExpressionType.POLAR?s.metaData.polarDomainMax:s.metaData.parametricDomainMax,o={},l=NaN,p=NaN,d=!1;if(r){d=!0;var c=r.tryGetConcreteTree(t,i);c.isConstant&&(l=+c.asValue());for(var h=0,u=c.getDependencies();h<u.length;h++)o[u[h]]=!0}else l=0;if(n){d=!0;var f=n.tryGetConcreteTree(t,i);f.isConstant&&(p=+f.asValue());for(var m=0,v=f.getDependencies();m<v.length;m++)o[v[m]]=!0}else a.expression_type===E.ExpressionType.PARAMETRIC?p=1:a.expression_type===E.ExpressionType.POLAR&&(p=12*Math.PI/i.trigAngleMultiplier.asValue());var y=!0,g=!0;isFinite(l)||(y=!1,l=NaN),isFinite(p)||(g=!1,p=NaN),y?g?p<l&&(g=y=!1,a.error=z.domainMaxLessThanMin().getError()):a.error=z.domainMaxInvalid().getError():a.error=z.domainMinInvalid().getError(),s.metaData.evaluatedDomainMin=l,s.metaData.evaluatedDomainMax=p,a.expression_type===E.ExpressionType.POLAR&&(s.metaData.isExplicitDomain=d),a.domain_min_number=l,a.domain_max_number=p,a.domain_min_valid=y,a.domain_max_valid=g,a.expression_type===E.ExpressionType.PARAMETRIC&&(delete o.t,T.addSliderPrompts(a,t,o))}(_,this.policy,l):x===E.ExpressionType.BOXPLOT?function(e,t,i){var a=e.evaluationState,s=e.rawTree,r=s.metaData.vizAxisOffset,n=s.metaData.vizBreadth,o={},l=NaN,p=NaN;if(r){var d=r.tryGetConcreteTree(t,i);d.isConstant&&(l=+d.asValue());for(var c=0,h=d.getDependencies();c<h.length;c++)o[h[c]]=!0}else l=1;if(n){var u=n.tryGetConcreteTree(t,i);u.isConstant&&(p=+u.asValue());for(var f=0,m=u.getDependencies();f<m.length;f++)o[m[f]]=!0}else p=1;var v=!0,y=!0;isFinite(l)||(v=!1,l=NaN),isFinite(p)||(y=!1,p=NaN),v?y||(a.error=z.boxplotBreadthInvalid().getError()):a.error=z.boxplotOffsetInvalid().getError(),s.metaData.evaluatedAxisOffset=l,s.metaData.evaluatedBreadth=p,a.viz_values={axisOffset:l,breadth:p},a.viz_valids={axisOffset:v,breadth:y},T.addSliderPrompts(a,t,o)}(_,this.policy,l):(h=c=void 0,c=(d=_).rawTree.userData,h=d.rawTree.metaData,c.cdf&&c.cdf.show&&h.distributionSpec&&function(e,t,i){var a=e.evaluationState,s=e.rawTree,r=s.metaData.cdfMin,n=s.metaData.cdfMax,o={},l=NaN,p=NaN,d="Assignment"===s.type?s._expression:s,c=d&&d.metaData&&d.metaData.distributionSpec;if(r){var h=r.tryGetConcreteTree(t,i);h.isConstant&&(l=+h.asValue());for(var u=0,f=h.getDependencies();u<f.length;u++)o[f[u]]=!0}else l=-1/0;if(n){var m=n.tryGetConcreteTree(t,i);m.isConstant&&(p=+m.asValue());for(var v=0,y=m.getDependencies();v<y.length;v++)o[y[v]]=!0}else p=1/0;var g,_=!0,x=!0;isNaN(l)&&(_=!1,l=NaN),isNaN(p)&&(x=!1,p=NaN),_?x?p<l&&(x=_=!1,a.error=z.cdfMaxLessThanMin().getError()):a.error=z.cdfMaxInvalid().getError():a.error=z.cdfMinInvalid().getError(),_&&x&&(g=R("cdf",[d,J(l),J(p)]),a.cdf_evaluation=+g.tryGetConcreteTree(t,i).asValue());var b,D=-1/0,S=1/0;c&&(c.discrete&&(D=0),"binomialdist"===c.symbol&&d.args&&d.args[0]&&(b=+d.args[0].asValue(),isFinite(b)&&(S=b))),s.metaData.evaluatedCDFMin=l,s.metaData.evaluatedCDFMax=p,a.cdf_min_valid=_,a.cdf_max_valid=x,a.cdf_min_default=D,a.cdf_max_default=S,a.is_single_identifier=!1,T.addSliderPrompts(a,t,o)}(_,this.policy,l))}for(var n in(e.globalRandomSeed||[]).forEach(function(e){o[e].evaluationState.depends_on_random_seed=!0}),this.lastFrame=Object.create(this.parent_frame),l)l.hasOwnProperty(n)&&(this.lastFrame[n]=l[n])},se);function se(){this.getCLSymbolMap=f.getCLSymbolMap,this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unpublishedIds={},this.intersectId=void 0,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={},this.markedRegressionDirty=!1,this.use_degrees=!1,this.initialEvaluation=!1,this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setForceEnableGeometryFunctions(!1),this.setFunctionDefinition(!0),this.setReplaceRoundWithReciprocal(!1),this.setDistributions(!0),this.invalidate()}e.Context=V});\ndefine(\'worker/workercore\',[\'require\',\'core/math/context\'],function(require){"use strict";var e=require("core/math/context").Context;return function(t){var r=new e;return{processChangeSet:function(e){var n=r.processChangeSet(e);t("processChangeSet",n)}}}});\ndefine(\'console\',[\'require\'],function(require){function n(){}var e={};return["log","info","warn","error","assert","dir","clear","profile","profileEnd","time","timeEnd","group","groupCollapsed","groupEnd","trace"].forEach(function(o){"undefined"!=typeof window&&window.console&&window.console[o]?e[o]=function(){Function.prototype.apply.call(window.console[o],window.console,arguments)}:e[o]=n}),e});\ndefine(\'worker/worker\',[\'require\',\'worker/workercore\',\'console\'],function(require){"use strict";var s=require("worker/workercore"),n={};require("console").log=function(e){self.postMessage({log:JSON.stringify(e)})};var t=self;(t.window=t).onmessage=function(e){var a,o=e.data&&e.data.connectionId;o&&("destroy"===e.data.originalMessage.type?delete n[o]:((a=n[o])||(a=s(function(e,a){t.postMessage({connectionId:o,originalMessage:{type:e,payload:a}})}),n[o]=a),a.processChangeSet(e.data.originalMessage)))},t.loadMessageQueue&&(t.loadMessageQueue.forEach(function(e){t.onmessage(e)}),delete t.loadMessageQueue)});\n!function(){"use strict";"undefined"==typeof window&&("undefined"==typeof requirejs&&(importScripts("../vendor/require.js"),importScripts("config.js")),self.loadMessageQueue=[],self.onmessage=function(e){self.loadMessageQueue.push(e)},requirejs(["worker/worker"]))}();\ndefine("toplevel/worker", function(){});\n\n';});

define('worker_src',['require','text!worker_src_underlying'],function(require){"use strict";return require("text!worker_src_underlying")});
define('worker/create_worker_url',['require','worker_src'],function(require){"use strict";var i=require("worker_src");return function(){if(!i.length)return"/assets/generated/combined/toplevel/worker.js";var r;try{r=new Blob([i],{type:"application/javascript"})}catch(e){try{var t=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);t.append(i),r=t.getBlob("application/javascript")}catch(e){return null}}return(window.URL||window.webkitURL).createObjectURL(r)}});
define('core/math/finddependencyorder',['require','core/math/builtinframe','underscore'],function(require){"use strict";var k=require("core/math/builtinframe"),x=require("underscore");return function(o,u,r){var n,e,i,t=[],v={},l={},a={},c={},g=0,d=[],w=[];if(!r)for(n in r=[],u)u.hasOwnProperty(n)&&r.push(n);for(n in u)if(u.hasOwnProperty(n)){for(i=u[n].exportPenalty||0;t.length<i+1;)t.push([]);t[i].push(n)}for(i=0;i<t.length;i++){for(var h={},p=0;p<t[i].length;p++){n=t[i][p];for(var s=u[n].getLegalExports(o),f=0;f<s.length;f++)e=s[f],k[e]||v[e]||(h[e]=h[e]||[],h[e].push(n),1<h[e].length&&(l[e]=!0))}for(e in h)v[e]=h[e]}for(p=0;p<r.length;p++)c.hasOwnProperty(r[p])||!function r(n){c[n]=c[n]||{};var e=c[n];var i;e.id=n;e.index=g;e.lowlink=g;d.push(e);e.instack=!0;g++;var t=u[n].getDependencies();for(var o=0;o<t.length;o++){var l=t[o];if(v.hasOwnProperty(l))for(var a=v[l],h=0;h<a.length;h++){var p=a[h];c.hasOwnProperty(p)?(i=c[p]).instack&&(e.lowlink=Math.min(e.lowlink,i.index)):(r(p),i=c[p],e.lowlink=Math.min(e.lowlink,i.lowlink))}}if(e.lowlink===e.index)if((i=d.pop()).instack=!1,i===e)f=e,w.push(f.id);else{for(var s=[i];(i=d.pop()).instack=!1,s.push(i),i!==e;);y(s)}var f}(r[p]);function y(r){for(var n,e=[],i=r.length-1;0<=i;i--){n=r[i];var t=u[n.id].getLegalExports(o);Array.prototype.push.apply(e,t),e.push(t[0]),w.push(n.id)}for((e=x.unique(e)).sort(),i=0;i<e.length;i++)a[e[i]]=e}return{resolved:w,multiplyDefined:l,cyclicallyDefined:a}}});
define('core/math/findIntersections',['require','core/types/graphmode','./plotter','parsenodes','core/math/distance'],function(require){"use strict";var N=require("core/types/graphmode"),X=require("./plotter").default,i=require("parsenodes"),c=require("core/math/distance");function k(n){for(var t=[],e=0;e<n;e++)t[e]={x:[],y:[],intersects:[]};return t}function A(n,t){t instanceof i.SolvedEquation?t=t._expression:t instanceof i.OptimizedRegression&&(t=t.model);var e=[],r=[];return t instanceof i.DoubleInequality?i.List.eachArgs(n,t._expressions,function(n){e.push(n[0].getCompiledFunction()),r.push(n[0].isConstant&&n[1].isNaN()),e.push(n[1].getCompiledFunction()),r.push(n[1].isConstant&&n[1].isNaN())}):i.List.wrap(t).eachElement(n,function(n){e.push(n.getCompiledFunction()),r.push(n.isConstant&&n.isNaN())}),{functions:e,skipIntersecting:r}}function Y(n,t,e){for(var r=X.sampleXY(n,t),i=r.poi.zeros,o=r.poi.extrema,s=[],p=0,u=0,p=0;p<i.x.length;p++){for(;u<o.x.length&&o.x[u]<i.x[p];u++)c.approx(o.y[u],0)&&s.push(o.x[u]);s.push(i.x[p])}for(;u<o.x.length;u++)c.approx(o.y[u],0)&&s.push(o.x[u]);return{x:s,y:s.map(e)}}return{findIntersections:function(n,t,e){var r=n[e],i=r.getGraphInfo(),o=r.getGraphMode(),s=A(r.policy,r.concreteTree),p=k(s.functions.length),u=function(n,t){var e,r,i=[];for(var o in n){n.hasOwnProperty(o)&&String(o)!==String(t)&&n[o].shouldIntersect()&&(r=A((e=n[o]).policy,e.concreteTree),i.push({id:o,graphMode:e.getGraphMode(),functions:r.functions,skipIntersecting:r.skipIntersecting}))}return i}(n,e);if(!u)return p;for(var c,a,f,h,g=0,l=0;l<u.length;l++)for(var y=u[l],d=0;d<s.functions.length;d++)if(!s.skipIntersecting[d])for(var x=s.functions[d].fn,v=X.computeDomain(t,i,x),m=0;m<y.functions.length;m++)if(!u[l].skipIntersecting[m]){var I=function(t,e,n,r){return n===N.X&&r===N.X||n===N.Y&&r===N.Y?function(n){return e(n)-t(n)}:(n===N.X&&r===N.Y||n===N.Y&&r===N.X)&&function(n){return n-e(t(n))}}(x,y.functions[m].fn,o,y.graphMode);if(I){var C=Y(I,v,x);if(100<(g+=C.x.length))return k(s.functions.length);!function(n,t){n.intersects=Array(n.x.length);for(var e=0;e<n.x.length;e++)n.intersects[e]=t}(C,y.id),f=C,h=void 0,o===N.X&&(h=f.y,f.y=f.x,f.x=h),c=p[d],a=C,Array.prototype.push.apply(c.x,a.x),Array.prototype.push.apply(c.y,a.y),Array.prototype.push.apply(c.intersects,a.intersects)}}return p},findIndicatorZeros:Y}});
define('core/math/policyFourFunction',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicySingleExpressionFourFunction=e.PolicyFourFunction=void 0;var n=(i.prototype.assignmentForbidden=function(e){return"ans"!==e.slice(0,3)},i.prototype.isValidSlider=function(e){return!1},i.prototype.sliderVariables=function(){return[]},i.prototype.graphingEnabled=function(){return!1},i.prototype.ansEnabled=function(){return!this.singleExpression},i.prototype.disabledFeatures=function(){return["Sum","Product","Integral","List","Derivative","Piecewise","Exponent","PercentOf"]},i);function i(e){this.singleExpression=e.singleExpression}e.PolicyFourFunction=new n({singleExpression:!1}),e.PolicySingleExpressionFourFunction=new n({singleExpression:!0})});
define('core/math/policyScientific',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.PolicySingleExpressionScientific=e.PolicyScientific=void 0;var i=(n.prototype.assignmentForbidden=function(e){return this.singleExpression?"ans"!==e.slice(0,3):"tmp"===e.slice(0,3)},n.prototype.isValidSlider=function(e){return!1},n.prototype.sliderVariables=function(){return[]},n.prototype.graphingEnabled=function(){return!1},n.prototype.ansEnabled=function(){return!this.singleExpression},n.prototype.disabledFeatures=function(){return this.singleExpression?["Sum","Product","Integral","Derivative","Piecewise","PercentOf"]:["Sum","Product","Integral","Derivative","Piecewise"]},n);function n(e){this.singleExpression=e.singleExpression}e.PolicyScientific=new i({singleExpression:!1}),e.PolicySingleExpressionScientific=new i({singleExpression:!0})});
define('core/math/frameFourFunction',['require','core/math/parsenode/builtinfunction'],function(require){"use strict";var i=require("core/math/parsenode/builtinfunction");return{getFrame:function(n){var t={};return n.additionalFunctions&&-1!==n.additionalFunctions.indexOf("sqrt")&&(t.sqrt=i.sqrt),t}}});
define('core/math/frameScientific',['require','core/math/builtinconstants','core/math/parsenode/builtinfunction'],function(require){"use strict";var e=require("core/math/builtinconstants"),i=require("core/math/parsenode/builtinfunction"),r=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","mean","round","stdev","stdevp","nCr","nPr","exp","factorial"];function n(r,n){for(var t=0;t<r.length;t++){var e=r[t];if(!n.hasOwnProperty(e))throw new Error("Programming Error: key '"+e+"' does not exist in table. Must be one of:\n"+Object.keys(n).join("\n"))}}return n(r,e),n(o,i),{getFrame:function(n){var t={};return r.forEach(function(r){t[r]=e[r]}),o.forEach(function(r){n.replaceRoundWithReciprocal&&"round"===r||(t[r]=i[r])}),n.trigAngleMultiplier&&(t.trigAngleMultiplier=n.trigAngleMultiplier),t}}});
define('core/math/frameSingleExpressionScientific',['require','core/math/builtinconstants','core/math/parsenode/builtinfunction'],function(require){"use strict";var t=require("core/math/builtinconstants"),i=require("core/math/parsenode/builtinfunction"),e=["pi","e","trigAngleMultiplier"],o=["sqrt","nthroot","abs","ln","sin","cos","tan","log","arcsin","arccos","arctan","exp","factorial"];function r(r,n){for(var t=0;t<r.length;t++){var i=r[t];if(!n.hasOwnProperty(i))throw new Error("Programming Error: key '"+i+"' does not exist in table. Must be one of:\n"+Object.keys(n).join("\n"))}}return r(e,t),r(o,i),{getFrame:function(r){var n={};return e.forEach(function(r){n[r]=t[r]}),o.forEach(function(r){n[r]=i[r]}),r.trigAngleMultiplier&&(n.trigAngleMultiplier=r.trigAngleMultiplier),n}}});
define('core/math/frameGraphing',['require','core/math/builtinconstants','core/math/parsenode/builtinfunction'],function(require){"use strict";var e=require("core/math/builtinconstants"),r=require("core/math/parsenode/builtinfunction"),o=["csc","sec","cot","arccsc","arcsec","arccot","csch","sech","coth","arccsch","arcsech","arccoth","mad","cov","distance","midpoint"],a=["erf","ttest","tscore","ittest","normaldist","tdist","poissondist","binomialdist","pdf","cdf","random","histogram","dotplot","boxplot"],c=["distance","midpoint"],s=["det","inv","transpose","rref","trace"];function t(t,i){for(var n=0;n<t.length;n++){var e=t[n];if(!i.hasOwnProperty(e))throw new Error("Programming Error: key '"+e+"' does not exist in table. Must be one of:\n"+Object.keys(i).join("\n"))}}return t(o,r),t(a,r),{getFrame:function(t){var i,n={};for(i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(i in r)r.hasOwnProperty(i)&&(!0!==t.restrictedFunctions||-1===o.indexOf(i)||!0===t.forceEnableGeometryFunctions&&-1!==c.indexOf(i))&&(!1===t.distributions&&-1!==a.indexOf(i)||-1===s.indexOf(i)&&(n[i]=r[i]));return t.trigAngleMultiplier&&(n.trigAngleMultiplier=t.trigAngleMultiplier),t.globalRandomSeed&&(n.globalRandomSeed=t.globalRandomSeed),t.initialEvaluation&&(n.initialEvaluation=t.initialEvaluation),n}}});
define('core/math/getCLSymbolMap',["require","exports","underscore","core/lib/label"],function(require,e,g,y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCLSymbolMap=void 0,e.getCLSymbolMap=function(){var e={},t={},r={},a=[];for(var s in this.statements){if(this.statements.hasOwnProperty(s))switch((d=this.statements[s]).type){case"Error":break;case"Regression":r[s]=[],a.push(s);break;default:var i=d.getLegalExports(this.policy);if(i){for(var n=0,o=i;n<o.length;n++){var p=o[n];0<d.exportPenalty?t[p]=s:e[p]=s}r[s]=g.difference(d.getDependencies(),d.getDummyDependencies(),i)}}}for(var l=0,c=a;l<c.length;l++){var s=c[l],d=this.statements[s],u=y.latexToIdentifier(d.userData.residualVariable);u&&(t[u]=s);for(var f,h=d.getDependencies().slice(),v={},p=void 0;p=h.pop();){v[p]||(v[p]=!0,(f=e[p]||t[p])?(h.push.apply(h,r[f]),r[s].push(p)):t[p]=s)}}return{exportMap:e,weakExportMap:t,dependencyMap:r}}});
define('core/math/context',["require","exports","parser","parsenodes","./finddependencyorder","./errormsg","./workerconfig","./findIntersections","core/vendor/d3-color","./policyFourFunction","./policyScientific","./policyGraphing","./frameFourFunction","./frameScientific","./frameSingleExpressionScientific","./frameGraphing","tslib","underscore","./plotter","core/types/graphmode","./interpolatedlabel","./expression-types","./getCLSymbolMap","./distribution-spec","./maybe-rational","core/lib/number-to-latex","core/lib/label","./functions","core/types/line-width","./evaluationstate","core/types/point-opacity","core/math/types"],function(require,e,W,t,P,z,i,a,s,r,n,o,l,p,d,c,B,h,u,O,q,E,f,U,m,j,X,v,y,T,g,Y){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Context=void 0;var J=t.Constant,_=t.Seed,R=t.FunctionCall,H=t.Image,K=t.Simulation,Q=t.Slider,Z=t.Table,$=t.TableColumn,F=t.FreeVariable,x=a.findIntersections,b={fourFunction:r.PolicyFourFunction,scientific:n.PolicyScientific,singleExpressionScientific:n.PolicySingleExpressionScientific,singleExpressionFourFunction:r.PolicySingleExpressionFourFunction,graphing:o.PolicyGraphing,graphing_3d:o.PolicyGraphing3D},D={fourFunction:l,singleExpressionFourFunction:l,scientific:p,singleExpressionScientific:d,graphing:c,graphing_3d:c};function ee(e,t){for(var i="id"+e,a=0,s=t||[];a<s.length;a++){var r=s[a];i+="::"+r[0]+r[1]}return i}var S=J(m.maybeRational(0,1)),M=J(m.maybeRational(1,1)),N=J(NaN);function te(e,t){return e?"0"===e?S:"1"===e?M:W.parse(e,t):N}function ie(e,t){if(e)return W.parse(e,t)}function w(e){return"ans"!==e.slice(0,3)}function I(e,t){var i=e.multiplyDefined,a=e.cyclicallyDefined;for(var s in i)i.hasOwnProperty(s)&&(t[s]=z.multiplyDefined(s));for(var s in a)a.hasOwnProperty(s)&&(t[s]=z.cycle(a[s].filter(w)))}function A(e,t,i){for(var a=0,s=i;a<s.length;a++){var r=s[a];e[r]||(e[r]=[]),e[r].push(t)}}function C(e,t,i){if(i.extraDepNodes)for(var a=0,s=i.extraDepNodes;a<s.length;a++){var r=s[a];r&&A(e,t,r.getDependencies())}if(i.clickableRules)for(var n=0,o=i.clickableRules;n<o.length;n++){var l=o[n];l.assignment&&A(e,t,l.assignment.getDependencies()),l.expression&&A(e,t,l.expression.getDependencies())}}var ae={lineWidth:{parseNode:"lineWidth",valueOutputProp:"computedLineWidth",validOutputProp:"line_width_valid",default:function(){return y.DEFAULT},shouldEvaluate:void 0,seed:"lw"},lineOpacity:{parseNode:"lineOpacity",valueOutputProp:"computedLineOpacity",validOutputProp:"line_opacity_valid",default:void 0,shouldEvaluate:void 0,seed:"lo"},pointOpacity:{parseNode:"pointOpacity",valueOutputProp:"computedPointOpacity",validOutputProp:"point_opacity_valid",default:function(e,t){var i=e.rawTree,a=e.concreteTree;return i.getGraphMode(t,a)===O.XYPOINT_MOVABLE?1:g.DEFAULT},shouldEvaluate:void 0,seed:"po"},fillOpacity:{parseNode:"fillOpacity",valueOutputProp:"computedFillOpacity",validOutputProp:"fill_opacity_valid",default:void 0,shouldEvaluate:function(e){return e===E.ExpressionType.POLYGON||e===E.ExpressionType.PARAMETRIC},seed:"fo"}};function L(e,t,i,a){var s=ae[a],r=e.evaluationState,n=e.rawTree.metaData,o=s.default&&s.default(e,t),l=function(e,t,i,a){var s={},r=!0,n=NaN;if(i)for(var o=i.tryGetConcreteTree(e,t),n=+o.asValue(),l=0,p=o.getDependencies();l<p.length;l++){s[p[l]]=!0}return isFinite(n)||(r=!1,n=NaN),i||(r=!0,void 0!==a&&(n=a)),{value:n,valid:r,missingVarsMap:s}}(t,i,n[s.parseNode],o);n[s.valueOutputProp]=l.value,r[s.validOutputProp]=l.valid,T.addSliderPrompts(r,t,l.missingVarsMap)}function k(e){return s.rgb(e[0],e[1],e[2]).formatHex()}function G(e,t,i,a,s){var r;if(e){for(var n,o=e.tryGetConcreteTree(a,s),l=o.asValue(),p={},d=0,c=o.getDependencies();d<c.length;d++){p[c[d]]=!0}T.addSliderPrompts(i,a,p),(r=!(!l||o.valueType!==Y.RGBColor))&&(n=o&&o.valueType===Y.RGBColor?k(l):l.map(k),t.colorLatexValue=n,i.color_latex_value=n)}else r=!0;i.color_latex_valid=r}var V=(se.prototype.invalidate=function(){for(var e in this.statements)this.statements.hasOwnProperty(e)&&this.markAsDirtyRoot(e);this.currentStatus={},this.analysis={},this.parent_frame=D[this.evaluationMode].getFrame({restrictedFunctions:this.restrictedFunctions,forceEnableGeometryFunctions:this.forceEnableGeometryFunctions,replaceRoundWithReciprocal:this.replaceRoundWithReciprocal,distributions:this.distributions,additionalFunctions:this.additionalFunctions,trigAngleMultiplier:J(this.use_degrees?Math.PI/180:m.maybeRational(1,1)),initialEvaluation:J(this.initialEvaluation?1:0),globalRandomSeed:_(this.globalRandomSeedString||"")}),this.frame=Object.create(this.parent_frame),this.lastFrame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)},se.prototype.processChangeSet=function(e){var t={intersections:{},graphs:{}};e.isCompleteState&&(this.invalidate(),this.statements={},this.currentLabel={});var i=!!e.isCompleteState&&!e.isUndoRedoState;i!==this.initialEvaluation&&(this.initialEvaluation=i,this.invalidate()),e.viewState&&this.setViewState(e.viewState),e.hasOwnProperty("degreeMode")&&this.setDegreeMode(e.degreeMode),e.hasOwnProperty("globalRandomSeed")&&this.setGlobalRandomSeed(e.globalRandomSeed),e.hasOwnProperty("evaluationMode")&&this.setEvaluationMode(e.evaluationMode),e.hasOwnProperty("additionalFunctions")&&this.setAdditionalFunctions(e.additionalFunctions),e.hasOwnProperty("restrictedFunctions")&&this.setRestrictedFunctions(e.restrictedFunctions),e.hasOwnProperty("forceEnableGeometryFunctions")&&this.setForceEnableGeometryFunctions(e.forceEnableGeometryFunctions),e.hasOwnProperty("distributions")&&this.setDistributions(e.distributions),e.hasOwnProperty("functionDefinition")&&this.setFunctionDefinition(e.functionDefinition),e.hasOwnProperty("replaceRoundWithReciprocal")&&this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),e.hasOwnProperty("pointsOfInterest")&&this.setWorkerConfigProperty("pointsOfInterest",e.pointsOfInterest),e.hasOwnProperty("plotSingleVariableImplicitEquations")&&this.setWorkerConfigProperty("plotSingleVariableImplicitEquations",e.plotSingleVariableImplicitEquations),e.hasOwnProperty("plotImplicits")&&this.setWorkerConfigProperty("plotImplicits",e.plotImplicits),e.hasOwnProperty("plotInequalities")&&this.setWorkerConfigProperty("plotInequalities",e.plotInequalities),e.hasOwnProperty("sliders")&&this.setWorkerConfigProperty("sliders",e.sliders),e.hasOwnProperty("intersectId")&&(this.intersectId=e.intersectId),this.processStatements(e,t),this.updateAnalysis(),e.hasOwnProperty("intersectId")&&this._updateIntersections(e.intersectId,t);var a=this._publishAllStatuses();return this._computeAllLabels(),this._graphAllChanged(t),this.unpublishedIds={},{syncId:e.syncId,isCompleteState:e.isCompleteState,intersectionChanges:t.intersections,statusChanges:a,graphChanges:t.graphs}},se.prototype.processStatements=function(e,t){if(e.statements)for(var i in e.statements){var a=e.statements[i];if(null===a){var s=void 0;if(!e.isCompleteState&&this.statements.hasOwnProperty(i)&&(s=this.statements[i].getAllIds()),this.removeStatement(i,t),!e.isCompleteState&&s)for(var r=0,n=s;r<n.length;r++){var o=n[r];t.graphs[o]=void 0}}else this.addStatement(a,t)}},se.prototype.setViewState=function(e){if(!h.isEqual(e,this.viewState))for(var t in this.viewState=e,this.statements)this.statements.hasOwnProperty(t)&&(this.unpublishedIds[t]=!0)},se.prototype.getViewState=function(){if(this.viewState){var e=Object.create(this.viewState);return this.parent_frame&&this.parent_frame.trigAngleMultiplier?e.trigAngleMultiplier=this.parent_frame.trigAngleMultiplier.asValue():e.trigAngleMultiplier=1,e}},se.prototype.setDegreeMode=function(e){this.use_degrees=e,this.invalidate()},se.prototype.setGlobalRandomSeed=function(e){this.globalRandomSeedString=e,this.parent_frame.globalRandomSeed=_(e),this.dirtyExportedSymbolRoots.globalRandomSeed=!0},se.prototype.setEvaluationMode=function(e){this.evaluationMode=e,this.policy=b[e],this.invalidate()},se.prototype.setAdditionalFunctions=function(e){this.additionalFunctions=e,this.invalidate()},se.prototype.setRestrictedFunctions=function(e){this.restrictedFunctions=e,this.invalidate()},se.prototype.setForceEnableGeometryFunctions=function(e){this.forceEnableGeometryFunctions=e,this.invalidate()},se.prototype.setDistributions=function(e){this.distributions=e,this.invalidate()},se.prototype.setFunctionDefinition=function(e){this.functionDefinition=e,this.invalidate()},se.prototype.setReplaceRoundWithReciprocal=function(e){this.replaceRoundWithReciprocal=e,this.invalidate()},se.prototype.setWorkerConfigProperty=function(e,t){t!==i[e]&&(i[e]=t,this.invalidate())},se.prototype._publishAllStatuses=function(){var e,t={},i=this.currentStatus;for(var a in this.currentStatus={},this.unpublishedIds)this.analysis.hasOwnProperty(a)&&(e=this.analysis[a].evaluationState,JSON.stringify(e)!==JSON.stringify(i[a])&&(t[a]=e),this.currentStatus[a]=e);return t},se.prototype._computeAllLabels=function(){for(var e in this.currentLabel){var t=this.statements[e];if(t){var i=t.tryGetConcreteTree(this.policy,this.frame),a=1;i.valueType===Y.ListOfPoint&&(a=i.args.length);for(var s=[],r=0;r<a;r++)s.push(q.interpolate(this.currentLabel[e],this.frame,r));h.isEqual(s,t.computedLabels)||(t.computedLabels=s,this.unpublishedIds[e]=!0)}}},se.prototype._graphAllChanged=function(e){var t=this.getViewState(),i=!1;if(u.default.validateViewState(t)){for(var a in this.unpublishedIds)if(this.analysis.hasOwnProperty(a)){var s=this.analysis[a],r=s.evaluationState.expression_type,n=r===E.ExpressionType.SINGLE_POINT||r===E.ExpressionType.POINT_LIST;if(s.rawTree.isTable)for(var o=s.graph(t),l=0,p=s.rawTree.getAllIds();l<p.length;l++){var d=p[l];o[d]?this._notifyGraphComputed(d,o[d],e):this._notifyGraphRemoved(d,e)}else s.evaluationState.is_graphable&&(s.rawTree.userData.shouldGraph||s.rawTree.userData.showLabel&&n)?(this._notifyGraphComputed(a,s.graph(t),e),this.intersectId===a&&(i=!0)):this._notifyGraphRemoved(a,e)}h.keys(this.unpublishedIds).length&&void 0!==this.intersectId&&(this.unpublishedIds.hasOwnProperty(this.intersectId)||(i=!0)),i&&this._updateIntersections(this.intersectId,e)}},se.prototype._notifyGraphRemoved=function(e,t){t.graphs[e]=void 0},se.prototype._notifyGraphComputed=function(e,t,i){v.dehydrateGraphData(t),i.graphs[e]=t},se.prototype._updateIntersections=function(e,t){var i;this.viewState&&(this.analysis[e]&&this.analysis[e].shouldIntersect()?(i=x(this.analysis,this.viewState,e),t.intersections[e]=i):t.intersections[e]=[])},se.prototype.getDisabledFeatures=function(){var e=this.policy.disabledFeatures(),t=!1===this.functionDefinition?e.concat("FunctionDefinition"):e,i=this.additionalFunctions||[];return t=t.filter(function(e){return!("Exponent"===e&&-1!==i.indexOf("exponent")||"PercentOf"===e&&-1!==i.indexOf("percent"))})},se.prototype.areFractionsDisallowed=function(){var e=this.evaluationMode;return!("fourFunction"!==e&&"singleExpressionFourFunction"!==e||this.additionalFunctions&&-1!==this.additionalFunctions.indexOf("fraction"))},se.prototype.addStatement=function(e,t){var i=this;if(e){var a=e.id;this.markExportsDirty(a),this.markAsDirtyRoot(a);var s,r,n,o,l,p,d,c,h={index:this.policy.ansEnabled()?e.index:void 0,disabledFeatures:this.getDisabledFeatures(),disallowFrac:this.areFractionsDisallowed(),seedPrefix:ee(a)},u={extraDepNodes:[]};switch(e.type){case"table":var f=[];this.statements.hasOwnProperty(a)&&(f=this.statements[a].getAllIds()),e.shouldGraph=!0;for(var m=e.columns,v=[],y=0,g=0,_=m;g<_.length;g++)var x=_[g],y=Math.max(x.values.length,y);for(var b=0;b<m.length;b++){for(var D,S=void 0,P=void 0,x=m[b],O=W.parse(x.latex,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["tr",0],["tc",b]])})),S=[],E=-1,T=0;T<m[b].values.length;T++)x.values[T].replace(/\\space/g,"").match(/\S/)?(S.push(W.parse(x.values[T],B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["tr",T+1],["tc",b]])}))),E=T):S.push(J(NaN));S=S.slice(0,E+1),(P=$(O,y,S)).id=x.id,P.header&&(P.header.userData=x,P.header.metaData={extraDepNodes:[]},x.colorLatex&&(D=W.parse(x.colorLatex,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["tr",0],["tc",b],["cl",b]])})),P.header.metaData.colorLatex=D,P.header.metaData.extraDepNodes.push(D))),v.push(P)}this.statements[a]=Z(v);var R=this.statements[a].getAllIds();f.forEach(function(e){-1===R.indexOf(e)&&i._notifyGraphRemoved(e,t)});break;case"image":var F="-\\trigAngleMultiplier*("+e.angle+")",M=W.parse(e.center,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ic",a]])})),N=W.parse(F,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ia",a]])})),w=W.parse(e.width,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["iw",a]])})),I=W.parse(e.height,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ih",a]])})),A=W.parse(e.opacity,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["io",a]])}));this.statements[a]=H({center:M,radianAngle:N,width:w,height:I,opacity:A});break;case"simulation":var C=W.parse(e.fps||"60",B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["fps",a]])}));this.statements[a]=K(C);break;default:for(var L in this.statements[a]=W.parse(e.latex,h),ae){var k,G=L;e[G]&&(k=ie(e[G],B.__assign(B.__assign({},h),{seedPrefix:ee(a,[[ae[G].seed,a]])})),u[G]=k,u.extraDepNodes.push(k))}e.colorLatex&&(k=ie(e.colorLatex,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ac",a]])})),u.colorLatex=k,u.extraDepNodes.push(k)),e.polarDomain&&e.polarDomain.min&&(u.polarDomainMin=te(e.polarDomain.min,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lm",a]])})),u.extraDepNodes.push(u.polarDomainMin)),e.polarDomain&&e.polarDomain.max&&(u.polarDomainMax=te(e.polarDomain.max,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lM",a]])})),u.extraDepNodes.push(u.polarDomainMax)),e.parametricDomain&&e.parametricDomain.min&&(u.parametricDomainMin=te(e.parametricDomain.min,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lm",a]])})),u.extraDepNodes.push(u.parametricDomainMin)),e.parametricDomain&&e.parametricDomain.max&&(u.parametricDomainMax=te(e.parametricDomain.max,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lM",a]])})),u.extraDepNodes.push(u.parametricDomainMax)),e.vizProps&&(e.vizProps.axisOffset&&(u.vizAxisOffset=te(e.vizProps.axisOffset,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["vo",a]])})),u.extraDepNodes.push(u.vizAxisOffset)),e.vizProps.breadth&&(u.vizBreadth=te(e.vizProps.breadth,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["vb",a]])})),u.extraDepNodes.push(u.vizBreadth))),e.cdf&&e.cdf.show&&(s=U.parseToplevelFunction(e.latex))&&"distribution"===s.type&&(u.distributionSpec=s,u.cdfMin=ie(e.cdf.min,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lm",a]])})),u.extraDepNodes.push(u.cdfMin),u.cdfMax=ie(e.cdf.max,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lM",a]])})),u.extraDepNodes.push(u.cdfMax)),this.statements[a].shouldPromoteToSlider(this.policy)&&(n=!(!(r=e.slider)||!r.isPlayingOnce),o=ie(r&&r.softMin,h),l=ie(r&&r.softMax,h),p=ie(r&&r.min,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lm",a]])})),d=ie(r&&r.max,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["lM",a]])})),c=ie(r&&r.step,B.__assign(B.__assign({},h),{seedPrefix:ee(a,[["ls",a]])})),this.statements[a]=Q(this.statements[a],{sliderMin:p,sliderMax:d,sliderStep:c,sliderIsPlayingOnce:n,sliderSoftMin:o,sliderSoftMax:l}))}var V=e.clickableInfo;V&&V.enabled&&(u.clickableRules=(V.rules||[]).map(function(e){return{ruleId:e.id,assignment:ie(e.assignment,h),expression:ie(e.expression,h)}})),this.statements[a].userData=e,this.statements[a].metaData=u;var z,j=e.label;j?(z=this.currentLabel[a])&&z.raw===j||(this.currentLabel[a]=q.parse(j)):delete this.currentLabel[a]}},se.prototype.removeStatement=function(e,t){var i,a=this.statements[e];a&&(this.markExportsDirty(e),a.isTable?(i=this,a.getAllIds().forEach(function(e){i._notifyGraphRemoved(e,t)})):this._notifyGraphRemoved(e,t),delete this.currentLabel[e],delete this.statements[e],delete this.analysis[e])},se.prototype.markExportsDirty=function(e){if(this.statements[e]){this.statements[e].isRegression&&(this.markedRegressionDirty=!0);for(var t=0,i=this.statements[e].getLegalExports(this.policy);t<i.length;t++){var a=i[t];this.dirtyExportedSymbolRoots[a]=!0}}},se.prototype.markAsDirtyRoot=function(e){this.dirtyStatementRoots[e]=!0},se.prototype.getFrame=function(){return this.updateAnalysis(),this.frame},se.prototype.getAnalysis=function(){return this.updateAnalysis(),this.analysis},se.prototype.getEvaluationState=function(e){if(this.updateAnalysis(),this.analysis[e])return this.analysis[e].evaluationState},se.prototype._updateRegressions=function(e){var t=this.frame,i=this.lastFrame,a=this.regressionFrame,s=[];for(var r in e)e.hasOwnProperty(r)&&e[r].isRegression&&s.push(r);var n=this;s.sort(function(e,t){var i=n.statements[e].userData&&n.statements[e].userData.residualVariable,a=n.statements[t].userData&&n.statements[t].userData.residualVariable;return i&&!a?-1:a&&!i?1:0});var o=P(this.policy,e,s);I(o,a);for(var l={},p=0,d=o.resolved;p<d.length;p++){var c,r=d[p];this.statements[r].isRegression?(this.analysis[r]=e[r].analyze(this.policy,a,t,i,l),this.analysis[r].exportTo(this.policy,t),delete e[r]):(c=e[r].tryGetConcreteTree(this.policy,a),e[r].exportTo(this.policy,c,a),l[r]={rawTree:e[r],concreteTree:c})}},se.prototype.buildSymbolToExpressionDirtyMap=function(){var e={};for(var t in this.statements)if(this.statements.hasOwnProperty(t)){var i=this.statements[t],a=i.metaData;if(A(e,t,i.getDependencies()),A(e,t,i.getLegalExports(this.policy)),i.isRegression&&i.userData&&i.userData.residualVariable&&A(e,t,[X.latexToIdentifier(i.userData.residualVariable)]),C(e,t,a),i.isTable&&i.columns)for(var s=0;s<i.columns.length;s++){var r=i.columns[s];r.header&&r.header.metaData&&C(e,t,r.header.metaData)}}return e},se.prototype.getDirtyIdsAndSymbols=function(e){var t={},i={},a=this.markedRegressionDirty,s=[],r=[];for(var n in this.dirtyStatementRoots)this.dirtyStatementRoots[n]&&(i[n]=!0,s.push(n));for(var o in this.dirtyExportedSymbolRoots)this.dirtyExportedSymbolRoots[o]&&(t[o]=!0,r.push(o));for(;s.length||r.length;){for(;s.length;){var n=s.pop(),l=this.statements[n];if(l){l.isRegression&&(a=!0);for(var p=0,d=l.getLegalExports(this.policy);p<d.length;p++)t[o=d[p]]||(t[o]=!0,r.push(o))}}for(;r.length;){var c=e[o=r.pop()];if(c)for(var h=0,u=c;h<u.length;h++)i[n=u[h]]||(i[n]=!0,s.push(n))}}return{ids:i,symbols:t,hasDirtyRegression:a}},se.prototype.updateAnalysis=function(){var e=this.buildSymbolToExpressionDirtyMap(),t=this.getDirtyIdsAndSymbols(e),i={};if(t.hasDirtyRegression){for(var a in this.statements)this.statements[a]&&(i[a]=this.statements[a]);this.frame=Object.create(this.parent_frame),this.regressionFrame=Object.create(this.parent_frame)}else{var s=t.ids;for(var a in s)this.statements[a]&&(i[a]=this.statements[a]);var r=t.symbols;for(var n in r)r[n]&&(delete this.frame[n],delete this.regressionFrame[n])}for(var a in i)i[a]&&(this.unpublishedIds[a]=!0);this.markedRegressionDirty=!1,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={};var o=this.analysis,l=this.frame;"graphing"===this.evaluationMode&&this._updateRegressions(i);var p=P(this.policy,i);I(p,l);for(var d,c,h,u=p.resolved,f=0,m=u;f<m.length;f++)switch(a=m[f],this.evaluationMode){case"fourFunction":case"singleExpressionFourFunction":o[a]=this.statements[a].analyzeFourFunction(this.policy,l,o),o[a].exportTo(this.policy,l);break;case"scientific":o[a]=this.statements[a].analyzeScientific(this.policy,l,o),o[a].exportTo(this.policy,l);break;case"singleExpressionScientific":o[a]=this.statements[a].analyzeSingleExpressionScientific(this.policy,l,o),o[a].exportTo(this.policy,l);break;case"graphing":case"graphing_3d":if(l.r){var v=Object.create(l);if(v.r=F("r"),o[a]=this.statements[a].analyze(this.policy,v,o),o[a].getGraphMode()===O.POLAR){o[a].exportTo(this.policy,l);continue}}o[a]=this.statements[a].analyze(this.policy,l,o),o[a].exportTo(this.policy,l)}if("graphing"===this.evaluationMode||"graphing_3d"===this.evaluationMode)for(var y=0,g=u;y<g.length;y++){var a=g[y],_=o[a],x=_.evaluationState.expression_type;for(var b in ae){var D=b,S=ae[D];S.shouldEvaluate&&!S.shouldEvaluate(x)||L(_,this.policy,l,D)}!function(e,t,i){var a,s;if(e.rawTree.isTable&&e.evaluationState.column_data&&e.rawTree.columns)for(var r=0;r<e.evaluationState.column_data.length;r++)a=e.evaluationState.column_data[r],G((s=e.rawTree.columns[r].header.metaData).colorLatex,s,a,t,i);else a=e.evaluationState,G((s=e.rawTree.metaData).colorLatex,s,a,t,i)}(_,this.policy,l),function(e){var t=e.evaluationState.expression_type,i=e.rawTree.userData;if(i.clickableInfo&&i.clickableInfo.enabled){if(e.rawTree.isImage)return 1;if(e.rawTree.isSimulation)return 1;if(e.getGraphMode()!==O.XYPOINT_MOVABLE)return E.isClickableExpressionType(t)}}(_)&&function(e,C,L){var k=e.evaluationState,t=e.rawTree,G={},V={};k.clickableinfo_data={},t.metaData.clickableRules.forEach(function(e){var t,i,a,s,r,n,o,l,p=e.assignment,d=e.expression,c={};if(k.clickableinfo_data[e.ruleId]=c,p){"Identifier"===p.type?"Slider"===(o=(n=L[(r=p)._symbol])&&n.type)||"Assignment"===o?(t=r._symbol,(l=V[t])?(a=z.clickableObjectAlreadyAssigned(t).getError(),!0!==l&&(delete l.identifier,delete l.latex,l.error=z.clickableObjectAlreadyAssigned(t).getError(),V[t]=!0)):V[t]=c):a=z.clickableObjectAssignmentNotDefined(r._symbol).getError():a=z.clickableObjectAssignmentNotIdentifier().getError();for(var h=0,u=p.tryGetConcreteTree(C,L).getDependencies();h<u.length;h++){var f=u[h];G[f]=!0}}if(d){var m=d.tryGetConcreteTree(C,L);if(m.valueType===Y.Number){var v=+m.asValue();isNaN(v)||(i=j.default(v))}else if(m.valueType===Y.ListOfNumber){for(var y=[],g=!0,_=0,x=m.args;_<x.length;_++){if((M=x[_]).valueType!==Y.Number){g=!1;break}var b=+M.asValue();y.push(j.default(b)),isNaN(b)&&(g=!1)}g&&(i="\\left["+y.join(",")+"\\right]")}else if(m.valueType===Y.Point){for(var D=[],S=!0,P=0,O=m.args;P<O.length;P++){if((M=O[P]).valueType!==Y.Number){S=!1;break}if(b=+M.asValue(),isNaN(b)){S=!1;break}D.push(j.default(b))}S&&(i="\\left("+D.join(",")+"\\right)")}else if(m.valueType===Y.ListOfPoint){for(var g=!0,E=[],T=0,R=m.args;T<R.length;T++){var F=R[T];if(F.valueType!==Y.Point){g=!1;break}for(var M,D=[],S=!0,N=0,w=F.args;N<w.length;N++){if((M=w[N]).valueType!==Y.Number){S=!1;break}if(b=+M.asValue(),isNaN(b)){S=!1;break}D.push(j.default(b))}if(!S){g=!1;break}E.push("\\left("+D.join(",")+"\\right)")}g&&(i="\\left["+E.join(",")+"\\right]")}else m.valueType===Y.EmptyList&&(i="\\left[\\right]");i||(s=z.clickableObjectInvalidExpression().getError());for(var I=0,A=m.getDependencies();I<A.length;I++)f=A[I],G[f]=!0}a?c.error=a:s?c.error=s:t&&i&&(c.identifier=t,c.latex=X.identifierToLatex(t)+"="+i)}),T.addSliderPrompts(k,C,G)}(_,this.policy,l),x===E.ExpressionType.PARAMETRIC||x===E.ExpressionType.POLAR?function(e,t,i){var a=e.evaluationState,s=e.rawTree,r=a.expression_type===E.ExpressionType.POLAR?s.metaData.polarDomainMin:s.metaData.parametricDomainMin,n=a.expression_type===E.ExpressionType.POLAR?s.metaData.polarDomainMax:s.metaData.parametricDomainMax,o={},l=NaN,p=NaN,d=!1;if(r){d=!0;var c=r.tryGetConcreteTree(t,i);c.isConstant&&(l=+c.asValue());for(var h=0,u=c.getDependencies();h<u.length;h++)o[u[h]]=!0}else l=0;if(n){d=!0;var f=n.tryGetConcreteTree(t,i);f.isConstant&&(p=+f.asValue());for(var m=0,v=f.getDependencies();m<v.length;m++)o[v[m]]=!0}else a.expression_type===E.ExpressionType.PARAMETRIC?p=1:a.expression_type===E.ExpressionType.POLAR&&(p=12*Math.PI/i.trigAngleMultiplier.asValue());var y=!0,g=!0;isFinite(l)||(y=!1,l=NaN),isFinite(p)||(g=!1,p=NaN),y?g?p<l&&(g=y=!1,a.error=z.domainMaxLessThanMin().getError()):a.error=z.domainMaxInvalid().getError():a.error=z.domainMinInvalid().getError(),s.metaData.evaluatedDomainMin=l,s.metaData.evaluatedDomainMax=p,a.expression_type===E.ExpressionType.POLAR&&(s.metaData.isExplicitDomain=d),a.domain_min_number=l,a.domain_max_number=p,a.domain_min_valid=y,a.domain_max_valid=g,a.expression_type===E.ExpressionType.PARAMETRIC&&(delete o.t,T.addSliderPrompts(a,t,o))}(_,this.policy,l):x===E.ExpressionType.BOXPLOT?function(e,t,i){var a=e.evaluationState,s=e.rawTree,r=s.metaData.vizAxisOffset,n=s.metaData.vizBreadth,o={},l=NaN,p=NaN;if(r){var d=r.tryGetConcreteTree(t,i);d.isConstant&&(l=+d.asValue());for(var c=0,h=d.getDependencies();c<h.length;c++)o[h[c]]=!0}else l=1;if(n){var u=n.tryGetConcreteTree(t,i);u.isConstant&&(p=+u.asValue());for(var f=0,m=u.getDependencies();f<m.length;f++)o[m[f]]=!0}else p=1;var v=!0,y=!0;isFinite(l)||(v=!1,l=NaN),isFinite(p)||(y=!1,p=NaN),v?y||(a.error=z.boxplotBreadthInvalid().getError()):a.error=z.boxplotOffsetInvalid().getError(),s.metaData.evaluatedAxisOffset=l,s.metaData.evaluatedBreadth=p,a.viz_values={axisOffset:l,breadth:p},a.viz_valids={axisOffset:v,breadth:y},T.addSliderPrompts(a,t,o)}(_,this.policy,l):(h=c=void 0,c=(d=_).rawTree.userData,h=d.rawTree.metaData,c.cdf&&c.cdf.show&&h.distributionSpec&&function(e,t,i){var a=e.evaluationState,s=e.rawTree,r=s.metaData.cdfMin,n=s.metaData.cdfMax,o={},l=NaN,p=NaN,d="Assignment"===s.type?s._expression:s,c=d&&d.metaData&&d.metaData.distributionSpec;if(r){var h=r.tryGetConcreteTree(t,i);h.isConstant&&(l=+h.asValue());for(var u=0,f=h.getDependencies();u<f.length;u++)o[f[u]]=!0}else l=-1/0;if(n){var m=n.tryGetConcreteTree(t,i);m.isConstant&&(p=+m.asValue());for(var v=0,y=m.getDependencies();v<y.length;v++)o[y[v]]=!0}else p=1/0;var g,_=!0,x=!0;isNaN(l)&&(_=!1,l=NaN),isNaN(p)&&(x=!1,p=NaN),_?x?p<l&&(x=_=!1,a.error=z.cdfMaxLessThanMin().getError()):a.error=z.cdfMaxInvalid().getError():a.error=z.cdfMinInvalid().getError(),_&&x&&(g=R("cdf",[d,J(l),J(p)]),a.cdf_evaluation=+g.tryGetConcreteTree(t,i).asValue());var b,D=-1/0,S=1/0;c&&(c.discrete&&(D=0),"binomialdist"===c.symbol&&d.args&&d.args[0]&&(b=+d.args[0].asValue(),isFinite(b)&&(S=b))),s.metaData.evaluatedCDFMin=l,s.metaData.evaluatedCDFMax=p,a.cdf_min_valid=_,a.cdf_max_valid=x,a.cdf_min_default=D,a.cdf_max_default=S,a.is_single_identifier=!1,T.addSliderPrompts(a,t,o)}(_,this.policy,l))}for(var n in(e.globalRandomSeed||[]).forEach(function(e){o[e].evaluationState.depends_on_random_seed=!0}),this.lastFrame=Object.create(this.parent_frame),l)l.hasOwnProperty(n)&&(this.lastFrame[n]=l[n])},se);function se(){this.getCLSymbolMap=f.getCLSymbolMap,this.statements={},this.analysis={},this.currentStatus={},this.currentLabel={},this.unpublishedIds={},this.intersectId=void 0,this.dirtyExportedSymbolRoots={},this.dirtyStatementRoots={},this.markedRegressionDirty=!1,this.use_degrees=!1,this.initialEvaluation=!1,this.setEvaluationMode("graphing"),this.setRestrictedFunctions(!1),this.setForceEnableGeometryFunctions(!1),this.setFunctionDefinition(!0),this.setReplaceRoundWithReciprocal(!1),this.setDistributions(!0),this.invalidate()}e.Context=V});
define('worker/workercore',['require','core/math/context'],function(require){"use strict";var e=require("core/math/context").Context;return function(t){var r=new e;return{processChangeSet:function(e){var n=r.processChangeSet(e);t("processChangeSet",n)}}}});
define('worker/fakeworker',['require','worker/workercore'],function(require){"use strict";var r=require("worker/workercore");return function(t){var e={},n=r(function(e,n){t({type:e,payload:n})});return e.postMessage=function(e){setTimeout(function(){n.processChangeSet(e)},0)},e}});
define('worker/workerpool',['require','console','./create_worker_url','pjs','underscore_model','./fakeworker','underscore','lib/urlparser'],function(require){"use strict";var n=require("console"),o=require("./create_worker_url"),r=require("pjs"),e=require("underscore_model").UnderscoreModel,t=require("./fakeworker"),s=require("underscore"),i=require("lib/urlparser"),a="";try{void 0===(a=i.getParameter(window.location.search,"workerThrottle"))&&(a=i.getParameter(window.top.location.search,"workerThrottle"))}catch(r){}var c=parseInt(a,10),u=0;function k(e){return c?function(r){u=Math.max(Date.now(),u)+c,setTimeout(e,u-Date.now(),r)}:e}return r(e,function(r,e){r.init=function(r){e.init.call(this),this.workers=[],this.maxWorkers=r,this.workerURL=o()},r.allowedToSpawnWorker=function(){return this.workerURL&&this.workers.length<this.maxWorkers},r.killWorker=function(r){-1!==s.indexOf(this.workers,r)&&(r.terminate(),this.workers=s.without(this.workers,r),s.shuffle(s.values(r.__connections)).forEach(function(r){r&&r.onWorkerKilled&&r.onWorkerKilled()}))},r.spawnWorker=function(){try{var o=new Worker(this.workerURL);return o.__connections={},o.__isFake=!1,o.onerror=function(r){n.log(r)},o.addEventListener("message",k(function(r){var e,n=r.data;n&&n.log||n&&n.connectionId&&((e=o.__connections[n.connectionId])&&e.onResponse(n.originalMessage))})),this.workers.push(o),o}catch(r){return null}},r.spawnFakeWorker=function(){var n=t(k(function(r){var e=s.values(n.__connections)[0];e&&e.onResponse(r)}));return n.__isFake=!0,n.__connections={},n},r.findLeastUsedWorker=function(){return s.sortBy(this.workers,function(r){return s.size(r.__connections)})[0]},r.allocateWorker=function(){var r=null;return this.allowedToSpawnWorker()&&(r=this.spawnWorker()),r=(r=r||this.findLeastUsedWorker())||this.spawnFakeWorker()}})});
define('main/evaluator',["require","exports","worker/workerpoolconnection","worker/workerpool","core/lib/deepCopy","core/math/functions","underscore"],function(require,t,o,e,n,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Evaluator=void 0;var i=(a.prototype.createWorkerPoolConnection=function(){var e=this;this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){}),this.workerPoolConnection=o(this.workerPool),this.markJobFinished(),this.workerPoolConnection.onResponse=function(t){e.shouldIgnoreWorkerMessage(t)?"processChangeSet"===t.type&&(e.markJobFinished(),e._processChangeSet()):e.listeners[t.type].call(e,t.payload)},this.workerPoolConnection.onWorkerKilled=function(){var t=e.hasJobInWorker();e.createWorkerPoolConnection(),t?(e.changeSet=n.default(e.cumulativeChangeSet),e.__state.changed=!0,e.__state.droppedMessage=!0):(e.changeSet=n.default(e.cumulativeChangeSet),e.__state.changed=!1),e.processChangeSet()}},a.prototype.destroy=function(){this.workerPoolConnection&&(this.workerPoolConnection.onResponse=function(){},this.workerPoolConnection.onWorkerKilled=function(){},this.workerPoolConnection.destroy())},a.prototype.shouldIgnoreWorkerMessage=function(t){return!(!this.__suspendUntilSyncId||t&&t.payload&&t.payload.syncId>=this.__suspendUntilSyncId)},a.prototype.suspend=function(){var e=this;this.changeSet&&this.changeSet.syncId||(this.syncId++,this.applyToChangeSets(function(t){t.syncId=e.syncId})),this.__suspendUntilSyncId=this.changeSet.syncId},a.prototype.markJobFinished=function(){this.__state.droppedMessage=!1,this.__jobStartTime=-1,this.__suspendUntilSyncId=void 0},a.prototype.startJobTimer=function(){this.__jobStartTime=(new Date).getTime()},a.prototype.hasJobInWorker=function(){return-1!==this.__jobStartTime},a.prototype.getJobElapsedTime=function(){return this.hasJobInWorker()?(new Date).getTime()-this.__jobStartTime:NaN},a.prototype.tick=function(){this._processChangeSet()},a.prototype.processChangeSet=function(){this.__processChangeSetRequested=!0},a.prototype._processChangeSet=function(){var t,e;this._syncEvaluatorConfig(),this.__processChangeSetRequested&&(t=4e3<=this.getJobElapsedTime(),this.__state.droppedMessage&&t?this.workerPoolConnection.killWorker():this.__state.changed&&this.changeSet&&(this.changeSet.syncId||(this.syncId++,this.changeSet.syncId=this.syncId),this.hasJobInWorker()?this.changeSet.isCompleteState&&t&&this.workerPoolConnection.killWorker():(e=this.changeSet,this.changeSet=null,this.__state.changed=!1,this.startJobTimer(),this.workerPoolConnection.sendMessage(e),this.__processChangeSetRequested=!1)))},a.prototype.notifyWhenSynced=function(t){var e=this;this._syncEvaluatorConfig(),this.hasJobInWorker()||this.changeSet?(this.syncId++,this.syncRequests.push({id:this.syncId,callback:t}),this.applyToChangeSets(function(t){t.syncId=e.syncId})):setTimeout(t,0)},a.prototype.applyToChangeSets=function(t){this.__state.changed=!0,this.changeSet||(this.changeSet={}),this.cumulativeChangeSet||(this.cumulativeChangeSet={}),t(this.changeSet),t(this.cumulativeChangeSet),this.processChangeSet()},a.prototype.clearStatementsAndStartCompleteState=function(){this.hasJobInWorker()&&this.suspend(),this.applyToChangeSets(function(t){t.isCompleteState=!0,delete t.statements})},a.prototype.markUndoRedoState=function(){this.applyToChangeSets(function(t){t.isUndoRedoState=!0})},a.prototype.addStatement=function(e){this.applyToChangeSets(function(t){t.statements||(t.statements={}),t.statements[e.id]=n.default(e)})},a.prototype.removeStatement=function(e){this.applyToChangeSets(function(t){t.statements||(t.statements={}),t.statements[e]=null})},a.prototype._syncEvaluatorConfig=function(){if(this.readEvaluatorConfig){var t=this.readEvaluatorConfig();for(var e in t)this._applyIfChanged(t,e)}},a.prototype._applyIfChanged=function(t,e){var o=this.cumulativeChangeSet&&this.cumulativeChangeSet[e],n=t[e];s.isEqual(o,n)||this.applyToChangeSets(function(t){t[e]=n})},a);function a(t){this.listeners={processChangeSet:function(t){var e={},o={};for(var n in t.graphChanges){var s=t.graphChanges[n];void 0===s?o[n]=!0:(r.rehydrateGraphData(s),e[n]=s)}var i={};for(var n in t.intersectionChanges)o[n]||(i[n]=t.intersectionChanges[n]);this.onEvaluatorResults({evaluationStates:t.statusChanges,graphData:{addedGraphs:e,removedGraphs:o,intersections:i},renderSlowly:!!t.isCompleteState});for(var a=t.syncId;this.syncRequests.length&&void 0!==a&&this.syncRequests[0].id<=a;){this.syncRequests.shift().callback()}this.markJobFinished(),this._processChangeSet()}},this.__state={},this.changeSet=null,this.cumulativeChangeSet={},this.syncId=1,this.syncRequests=[],t=t||e(),this.workerPool=t,this.createWorkerPoolConnection()}t.Evaluator=i});
define('graphing/canvaslayer',['require','jquery','pjs','browser'],function(require){"use strict";var i=require("jquery"),t=require("pjs"),r=require("browser");return t(function(t){t.init=function(t){this.grapher=t,this.$=i("<div class='dcg-graph-outer' role='img'></div>").attr("aria-roledescription",this.s("graphing-calculator-narration-graphpaper-label")),this.canvas_node=i("<canvas class='dcg-graph-inner'></canvas>").css("position","relative").css("display","block"),this.devicePixelRatio=window.devicePixelRatio||1,this.ctx=this.canvas_node[0].getContext("2d"),this.resize(0,0),r.IS_IOS&&r.IS_IN_IFRAME&&(this.$.css("-webkit-transform","translate3d(0,-.25px,0)"),this.$.append('<div style="width:1px; height:.5px; pointer-events:none; opacity: 0;" aria-hidden="true">text</div>')),this.$.append(this.canvas_node)},t.resize=function(t,i,a){a=a||this.devicePixelRatio,t===this.width&&i===this.height||(this.width=t,this.height=i,this.canvas_node.css("width",t+"px").css("height",i+"px").attr("width",t*a).attr("height",i*a),this.ctx=this.canvas_node[0].getContext("2d"),this.ctx.scale(a,a))},t.s=function(t,i){return this.grapher.controller.s(t,i)},t.getAriaLabel=function(t){var i="";if(0===t)return this.s("graphing-calculator-narration-empty-graphpaper");i=1===t?this.s("graphing-calculator-narration-graphpaper-one-graph"):this.s("graphing-calculator-narration-graphpaper-multiple-graphs",{count:t});var a=this.grapher.getAudioTrace();return a&&!a.getAudioTraceActive()&&void 0!==a.agNavigator.getFirstTraceableSketch({selectAssociatedExpression:!1})&&(r.IS_APPLE?i+=" "+this.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-mac"):i+=" "+this.s("graphing-calculator-narration-audio-instructions-enter-audio-trace-windows")),i},t.updateAria=function(t,i){this.$.attr("aria-hidden",!t||!this.grapher.settings.config.graphpaper).attr("tabindex",t&&this.grapher.settings.config.graphpaper&&this.grapher.settings.config.enableTabindex&&0<i?0:-1).attr("aria-label",this.getAriaLabel(i))},t.redraw=function(){}})});

define('loadcss!poi', function(){});
define('graphing/constants',["require","exports"],function(require,A){"use strict";Object.defineProperty(A,"__esModule",{value:!0}),A.LINE_WIDTH=A.OFFSCREEN_RENDER_MARGIN=A.POI_ALPHA=A.POLAR_ALPHA=A.HIGHLIGHTED_POINT_ALPHA=A.POINT_ALPHA=A.FILL_ALPHA=A.MAX_DOTTED_SEGMENTS=A.ZOOM_FACTOR=A.DOUBLETAP_ZOOM=A.ANIMATE_ZOOM_DURATION=void 0,A.ANIMATE_ZOOM_DURATION=500,A.DOUBLETAP_ZOOM=2,A.ZOOM_FACTOR=1.0625,A.MAX_DOTTED_SEGMENTS=1e3,A.FILL_ALPHA=.4,A.POINT_ALPHA=.9,A.HIGHLIGHTED_POINT_ALPHA=.6,A.POLAR_ALPHA=.2,A.POI_ALPHA=.01,A.OFFSCREEN_RENDER_MARGIN=20,A.LINE_WIDTH=2.5});
define('graphing/dasheddrawer',['require','./constants','core/math/distance'],function(require){"use strict";var h=require("./constants"),a=require("core/math/distance");function t(t,s,i){return this.pattern=i,this.replen=this.pattern[0]+this.pattern[1],s/this.replen>h.MAX_DOTTED_SEGMENTS&&(this.pattern[0]=s*this.pattern[0]/this.replen/h.MAX_DOTTED_SEGMENTS,this.pattern[1]=s*this.pattern[1]/this.replen/h.MAX_DOTTED_SEGMENTS),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null,this.ctx=t,this}return t.getTotalSegmentLength=function(t){if(t.length<4)return 0;for(var s,i,h=0,e=0,n=t[0],p=t[1];isNaN(n)||isNaN(p);){if((e+=2)>=t.length)return 0;n=t[e],p=t[e+1]}for(e+=2;e<t.length;e+=2)s=t[e],i=t[e+1],isNaN(s)||isNaN(i)||(h+=a.hypot(s-n,i-p),n=s,p=i);return h},t.prototype.start=function(t,s){this.ctx.desmos_batching||this.ctx.beginPath(),this.px=t,this.py=s},t.prototype.next=function(t,s){var i=this.pattern[this.pstate],h=Math.sqrt(Math.pow(t-this.px,2)+Math.pow(s-this.py,2));if(1e-5<h){for(;h+this.dstaccum>=i;){var e=t-this.px,n=s-this.py,p=i-this.dstaccum;e*=p/h,n*=p/h,0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(this.px+e,this.py+n)),this.dstaccum=0,this.px+=e,this.py+=n,this.pstate=1-this.pstate,i=this.pattern[this.pstate],h-=p}0===this.pstate&&(this.ctx.moveTo(this.px,this.py),this.ctx.lineTo(t,s))}this.px=t,this.py=s,this.dstaccum+=h},t.prototype.close=function(){this.ctx.desmos_batching||this.ctx.stroke(),this.pstate=0,this.dstaccum=0,this.px=null,this.py=null},t.prototype.drawSegment=function(t){for(var s,i,h=0,e=t[0],n=t[1];isNaN(e)||isNaN(n);){if((h+=2)>=t.length)return;e=t[h],n=t[h+1]}for(this.start(e,n),h+=2;h<t.length;h+=2)s=t[h],i=t[h+1],isNaN(s)||isNaN(i)||this.next(s,i);this.close()},t});
define('graphing/svg-classes',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.restore=e.save=void 0,e.save=function(e,s){e._dcgSaveClassName&&e._dcgSaveClassName(s)},e.restore=function(e){e._dcgRestoreClassName&&e._dcgRestoreClassName()}});
define('graphing/draw-image-to-ctx',["require","exports","graphing-calc/models/list","./svg-classes"],function(require,e,k,M){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.drawImageToCtx=void 0,e.drawImageToCtx=function(e,a,s){var t=e.formula;if(t&&t.dimensions.x)for(var i=t.dimensions,r=0;r<i.x.length;r++){var l,o,d,n,g,c,m,h,b,p,v,y,u,x,j,I=i.x[r],O=i.y[r],f=i.width[r],w=i.height[r],F=i.radianAngle[r];isFinite(I)&&isFinite(O)&&isFinite(f)&&isFinite(w)&&isFinite(F)&&(M.save(a,"dcg-svg-image"),a.save(),M.restore(a),a.globalAlpha=i.opacity[r],l=s.mapy(w)-s.mapy(0),o=s.mapx(f)-s.mapx(0),d=0===F?1:Math.abs(o/f*(w/l)),h=((n=s.mapx(I))-o/2)*(m=f<0?-1:1),b=((g=s.mapy(O))+l*d/2)*(c=w<0?-1:1),p=Math.abs(o),v=Math.abs(l),0!==F&&(a.translate(n,g),a.scale(1,1/d),a.rotate(F),a.translate(-n,-g)),a.scale(m,c),u=y=!1,(x=e.controller.getGrapher())&&"2d"===x.type&&(y=x.clickableObjectsLayer.shouldDrawHovered(e.id),u=x.clickableObjectsLayer.shouldDrawPressed(e.id)),j=e.imageObj,u?e.depressedImageObj?j=e.depressedImageObj:b+=1:y&&(e.hoveredImageObj?j=e.hoveredImageObj:a.globalAlpha*=.8),a.drawImage(j,h,b,p,v*d),k.isItemSelected(e)&&(a.beginPath(),a.rect(h,b,p,v*d),a.restore(),a.save(),a.strokeStyle="#6993C7",a.lineWidth=2,a.stroke()),a.restore())}}});
define('graphing/svg-groups',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.restore=e.setTitle=e.save=void 0,e.save=function(e,t){e._dcgStartNamedGroup&&e._dcgStartNamedGroup(t)},e.setTitle=function(e,t){e._dcgSetTitle&&e._dcgSetTitle(t)},e.restore=function(e){e._dcgEndNamedGroup&&e._dcgEndNamedGroup()}});
define('graphing/graphslayer',['require','pjs','./clipping','./dasheddrawer','./constants','./viewport','core/types/graphmode','underscore','expressions/colors','core/types/styles','core/types/styles','core/types/line-opacity','core/types/point-opacity','./draw-image-to-ctx','./svg-groups','./svg-classes'],function(require){"use strict";function T(e){return new t(-3,e.width+3,-3,e.height+3)}function h(e){return Math.round(e-.5)+.5}var e=require("pjs"),m=require("./clipping"),d=require("./dasheddrawer"),A=require("./constants"),t=require("./viewport").Viewport,S=require("core/types/graphmode"),i=require("underscore"),o=require("expressions/colors"),y=require("core/types/styles").PointStyle,v=require("core/types/styles").LineStyle,L=require("core/types/line-opacity"),w=require("core/types/point-opacity"),p=require("./draw-image-to-ctx").drawImageToCtx,c=require("./svg-groups"),u=require("./svg-classes"),O={},x=e(function(e){e.init=function(e,t){if(x.getExpressionAriaLabel=t,e.config.plaidMode)for(var i in o)o.hasOwnProperty(i)&&"string"==typeof o[i]&&(O[o[i]]=document.createElement("img"),O[o[i]].setAttribute("src","/assets/img/april-fools/"+i.toLowerCase()+".png"))},e.redrawToCtx=function(o,r,n,l,e,a,s,g){if(c.save(o,"expressions"),void 0===e)throw new Error("Programming Error: missing drawOrder argument to redrawToCtx");e.forEach(function(e){var t=n[e],i=l[e];void 0!==t&&t.visible&&(c.save(o,"sketch"),r.settings.takingScreenshot&&c.setTitle(o,x.getExpressionAriaLabel(e)),x.drawSketchToCtx(n[e],o,r,a,s,g),c.restore(o)),i&&i.shouldGraph&&i.foreground&&p(i,o,r)}),c.restore(o)}});return x.eachSegment=function(e,t){for(var i=0;i<e.branches.length;i++)for(var o=e.branches[i],r=0;r<o.segments.length;r++){t(o,o.segments[r])}},x.drawSketchToCtx=function(f,T,m,y,u,e){if(e=e||{},f.branches&&f.branches.length){var t,i=T.lineWidth,o=T.globalAlpha,r=m.settings.globalCurveColor?m.settings.globalCurveColor:f.color,n=O[r];n&&n.complete&&0<n.naturalWidth?(t=T.createPattern(n,"repeat"),T.fillStyle=t):T.fillStyle=r,T.strokeStyle=r,T.lineJoin="round",T.lineCap="round";var P=!!m.settings.takingScreenshot,b=!!e.showMovablePoints,l=1;u.shouldDrawHovered(f.id)&&(l=1.2),u.shouldDrawPressed(f.id)&&(l=1.4);for(var a=0;a<f.branches.length;a++){var s=f.branches[a];if(s.graphMode!==S.XYPOINT&&s.graphMode!==S.XYPOINT_MOVABLE){s.graphMode!==S.POLAR&&(T.desmos_batching=!0,T.beginPath());for(var g=0;g<s.segments.length;g++){var h,d,p=s.segments[g],c=S.Y;s.flip&&(c=S.X),s.graphMode&&(c=s.graphMode),c!==S.POLYGONFILL||m.settings.disableFill?c!==S.IMPLICIT&&(d="<="==(h=s.operator)||"<"==h||"\\leq"==h||"\\le"==h,m.settings.disableFill||"<"!=h&&">"!=h&&"<="!=h&&">="!=h&&"\\leq"!=h&&"\\le"!=h&&"\\geq"!=h&&"\\ge"!=h||x.fillGraphStrokeToCtx(T,m,p,d,c)):x.fillPolygonToCtx(T,m,p,s.fillOpacity*l)}T.globalAlpha=this._clampedOpacity(s.fillOpacity*l,A.FILL_ALPHA),s.graphMode!==S.POLAR&&(T.fill(),T.desmos_batching=!1),T.globalAlpha=1}}x.eachSegment(f,function(e,t){var i,o,r,n,l,a,s,g,h;e.graphMode!==S.XYPOINT&&e.graphMode!==S.XYPOINT_MOVABLE&&(i=S.Y,e.flip&&(i=S.X),e.graphMode&&(i=e.graphMode),o=void 0!==e.lineWidth,r=e.lineWidth,n=A.LINE_WIDTH,T.strokeStyle=e.color,T.fillStyle=e.color,o&&(r<=0||!isFinite(r))||(T.lineWidth=o?r:n,l=m.settings.graphLineWidth/n,T.lineWidth*=l,T.globalAlpha*=m.settings.curveOpacity,T.globalAlpha=this._clampedOpacity(1===m.settings.curveOpacity?1:e.lineOpacity,L.DEFAULT),s="default","<"===(a=e.operator)||">"===a||"!="===a?s=v.DASHED:"<="===a||">="===a?s=v.SOLID:f.style===v.DASHED||e.style===v.DASHED?s=v.DASHED:f.style!==v.DOTTED&&e.style!==v.DOTTED||(s=v.DOTTED,o&&(T.lineWidth*=2)),g=u.shouldDrawPressed(f.id),h=u.shouldDrawHovered(f.id),(g||h)&&(T.save(),T.lineWidth+=4.5,T.globalAlpha*=g?.5:.3,x.drawGraphStrokeToCtx(T,m,t,s,i,a),T.restore()),x.drawGraphStrokeToCtx(T,m,t,s,i,a)))}.bind(this)),T.lineWidth=i,T.globalAlpha=o,x.eachSegment(f,function(e,t){if(e.graphMode===S.XYPOINT&&e.showPoint||e.graphMode===S.XYPOINT_MOVABLE&&P){var i,o=[];if(e.interactiveLabel&&f.labels)for(var r=0,n=f.labels.length;r<n;r++){var l=f.labels[r],a=y.isOpenPOI(l),s=y.getHoveredPOI()===l;o.push(a||s),!a&&s&&(i=r)}var g=e.graphMode===S.XYPOINT_MOVABLE&&P&&!b&&1===e.pointOpacity,h=1;"medium"===e.pointSize?h=1.5:"large"===e.pointSize&&(h=2.25);var d,p=u.shouldDrawPressed(f.id),c=u.shouldDrawHovered(f.id),v=1;p?v=.5:c&&(v=.3),Array.isArray(e.color)&&(d=e.color),1!==v&&(x.drawPointsToCtx(T,m,t,e.style,o,i,1.5*h,v,d,e.pointOpacity),T.restore()),x.drawPointsToCtx(T,m,t,e.style,o,i,h,1,d,g?w.DEFAULT:e.pointOpacity)}}.bind(this))}},x.drawGraphStrokeToCtx=function(e,t,i,o,r,n){var l,a=m.getClippingGraphType(r,"="!==n,t.settings),s=m.mapSegmentToCanvas(i,t.viewport,t.screen,a),g=m.clipStrokeEdges(s,T(t.screen));if(0!==g.length){if(e.save(),u.save(e,"dcg-svg-curve"),o==v.DASHED)new d(e,d.getTotalSegmentLength(g),[11,7]).drawSegment(g);else if(o==v.DOTTED)(t.settings.config.projectorMode?new d(e,d.getTotalSegmentLength(g),[.1,16]):new d(e,d.getTotalSegmentLength(g),[.1,8])).drawSegment(g);else if(o!==v.SOLID&&"default"!==o||1!==e.lineWidth){for(e.desmos_batching||e.beginPath(),e.moveTo(g[0],g[1]),l=0;l<g.length;l+=2)e.lineTo(g[l],g[l+1]);e.desmos_batching||e.stroke()}else{if(e.desmos_batching||e.beginPath(),4<g.length||g[0]!==g[2]&&g[1]!==g[3])for(e.moveTo(g[0],g[1]),l=0;l<g.length;l+=2)e.lineTo(g[l],g[l+1]);else for(e.moveTo(h(g[0]),h(g[1])),l=0;l<g.length;l+=2)e.lineTo(h(g[l]),h(g[l+1]));e.desmos_batching||e.stroke()}u.restore(e),e.restore()}},x.mapPointToScreen=function(e,t,i){var o=e.mapx(t)-.5;if(o<-20||o>e.screen.width+20)return null;var r=e.mapy(i)-.5;return r<-20||r>e.screen.height+20?null:{x:o,y:r}},x.drawPointToCtx=function(e,t,i,o,r,n,l,a,s,g){var h,d=e.lineWidth,p=e.fillStyle,c=e.strokeStyle,v=x.mapPointToScreen(t,i,o);if(!v)return!1;u.save(e,"dcg-svg-point"),e.globalAlpha=void 0!==r?r:A.POINT_ALPHA,s&&(e.globalAlpha*=s),e.desmos_batching||e.beginPath();var f=t.settings.pointLineWidth;return l&&(f=t.settings.config.projectorMode?17:11,e.lineWidth=f),a&&(f*=a,e.lineWidth=f),g&&(e.fillStyle=g,e.strokeStyle=g),n===y.CROSS?(h=.4*f,e.moveTo(v.x-h,v.y-h),e.lineTo(v.x+h,v.y+h),e.moveTo(v.x+h,v.y-h),e.lineTo(v.x-h,v.y+h),e.lineWidth=.3*f):n===y.OPEN?(h=.42*f,e.moveTo(v.x+h,v.y),e.arc(v.x,v.y,h,0,2*Math.PI,!0),e.closePath(),e.fillStyle="white",e.lineWidth=.25*f,e.fill()):(e.moveTo(v.x-.1,v.y-.1),e.lineTo(v.x-.1,v.y+.1),e.lineTo(v.x+.1,v.y+.1),e.lineTo(v.x+.1,v.y-.1)),e.desmos_batching||e.stroke(),e.globalAlpha=1,e.lineWidth=d,e.fillStyle=p,e.strokeStyle=c,u.restore(e),!0},x.drawPointsToCtx=function(e,t,i,o,r,n,l,a,s,g){var h=e.lineWidth;e.lineWidth=t.settings.pointLineWidth;for(var d=this._clampedOpacity(g,A.POINT_ALPHA),p=0;p<i.length;p++)x.drawPointToCtx(e,t,i[p][0],i[p][1],n===p?A.HIGHLIGHTED_POINT_ALPHA:d,o,r[p],l,a,s&&s[p]);e.lineWidth=h},x.fillGraphStrokeToCtx=function(e,t,i,o,r){e.globalAlpha=r===S.POLAR?A.POLAR_ALPHA:A.FILL_ALPHA;var n,l,a,s=null,g=null;r===S.POLAR?(g=m.ALL,l=o?0:t.viewport.polarDiameter(),a=t.settings.degreeMode?180:2*Math.PI,s=m.computePolarFill(i,l,a)):r===S.Y?(g=m.Y,n=o?t.viewport.ymin:t.viewport.ymax,s=m.computeCartesianFill(i,n)):r===S.X&&(g=m.X,n=o?t.viewport.xmin:t.viewport.xmax,s=m.computeCartesianFill(i,n));for(var h=T(t.screen),d=0;d<s.length;d++){var p=m.getClippingGraphType(r,!0,t.settings),c=m.mapSegmentToCanvas(s[d],t.viewport,t.screen,p),v=m.clipFillEdges(c,h,g);if(6<=v.length){u.save(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(v[0],v[1]);for(var f=2;f<v.length;f+=2)e.lineTo(v[f],v[f+1]);e.lineTo(v[0],v[1]),e.desmos_batching||e.fill(),u.restore(e)}}e.globalAlpha=1},x._clampedOpacity=function(e,t){return e<0?0:1<e?1:i.isFinite(e)?e:t},x.fillPolygonToCtx=function(e,t,i,o){var r=T(t.screen);e.globalAlpha=this._clampedOpacity(o,A.FILL_ALPHA);var n=m.mapSegmentToCanvas(i,t.viewport,t.screen,m.Y_EQUALS),l=m.clipFillEdges(n,r,m.ALL);if(6<=l.length){u.save(e,"dcg-svg-region"),e.desmos_batching||e.beginPath(),e.moveTo(l[0],l[1]);for(var a=2;a<l.length;a+=2)e.lineTo(l[a],l[a+1]);e.desmos_batching||e.fill(),u.restore(e)}e.globalAlpha=1},x});
define('graphing/poidotslayer',['require','loadcss!poi','pjs','./graphslayer','./constants'],function(require){"use strict";require("loadcss!poi");var t=require("pjs"),l=require("./graphslayer"),A=require("./constants"),g=t(function(t){t.init=function(){this.savedPOI=[]},t.redrawToCtx=function(t,i,e,n,o){var r=[];for(var s in e){var h,a=e[s];a.visible&&(a.showHighlight&&g.drawSketchHighlight(a,t,i,n,o),h=a.getPOI(),(a.showPOI||h.length&&h[0].isAttachedToPlottedPoint())&&r.push.apply(r,g.drawPOIs(h,t,"#AAAAAA",i)))}this.savedPOI=r},t.getDrawnPOI=function(){return this.savedPOI}});return g.drawSketchHighlight=function(t,i,e,n,o){e.settings.setProperty("highlight",!0),l.drawSketchToCtx(t,i,e,n,o),e.settings.setProperty("highlight",!1)},g.drawPOIs=function(t,i,e,n){i.lineWidth=n.settings.pointLineWidth,i.strokeStyle=e||"#AAAAAA",i.fillStyle=e||"#AAAAAA",i.lineJoin="round",i.lineCap="round";var o=i.globalAlpha;i.globalAlpha=A.POI_ALPHA;var r,s,h=[],a=t.length;if(a&&t[0].isAttachedToPlottedPoint())for(r=0;r<a;r++)s=t[r],l.mapPointToScreen(n,s.x,s.y)&&h.push(s);else for(r=0;r<a;r++)s=t[r],l.drawPointToCtx(i,n,s.x,s.y)&&h.push(s);return i.globalAlpha=o,h},g});
define('graphing/stepnumber',['require','pjs','./svg-classes'],function(require){"use strict";var t=require("pjs"),n=require("./svg-classes"),e=document.createElement("canvas").getContext("2d"),r=t(function(t){t.init=function(t,s){this._label=t,this._fontSize=s,this._layout=this._computeLayout(t,s)},t._computeLayout=function(t,s){var i={};return t.superscript?(i.mantissa_height=s,r.setCtxFontSize(e,i.mantissa_height),i.mantissa_width=e.measureText(t.mantissa).width,i.superscript_height=Math.round(.8*s),r.setCtxFontSize(e,i.superscript_height),i.superscript_width=e.measureText(t.superscript).width,i.mantissa_x=0,i.mantissa_y=s/5,i.superscript_x=i.mantissa_width/2+i.superscript_width/2,i.superscript_y=-s/4,i.top=i.superscript_y-i.superscript_height/2,i.bottom=i.mantissa_y+i.mantissa_height/2,i.left=i.mantissa_x-i.mantissa_width/2,i.right=i.superscript_x+i.superscript_width/2):(i.mantissa_height=s,r.setCtxFontSize(e,s),i.mantissa_width=e.measureText(t.string).width,i.mantissa_x=0,i.mantissa_y=0,i.top=i.mantissa_y-i.mantissa_height/2,i.bottom=i.mantissa_y+i.mantissa_height/2,i.left=i.mantissa_x-i.mantissa_width/2,i.right=i.mantissa_x+i.mantissa_width/2),i},t.getRect=function(){return this.getRectWhenCenteredAt({x:0,y:0})},t.getRectWhenCenteredAt=function(t){return{left:this._layout.left+t.x,right:this._layout.right+t.x,top:this._layout.top+t.y,bottom:this._layout.bottom+t.y}},t.getWidth=function(){return this._layout.right-this._layout.left},t.getHeight=function(){return this._layout.bottom-this._layout.top},t.clampBoundsWithinRect=function(t,s){var i={};return t.x+this._layout.left<s.left?i.x=s.left-this._layout.left:t.x+this._layout.right>s.right?i.x=s.right-this._layout.right:i.x=t.x,t.y+this._layout.top<s.top?i.y=s.top-this._layout.top:t.y+this._layout.bottom>s.bottom?i.y=s.bottom-this._layout.bottom:i.y=t.y,i},t.getValue=function(){return this._label.value},t.getMinusWidth=function(){return this.getValue()<0?(r.setCtxFontSize(e,this._fontSize),e.measureText("-1").width-e.measureText("1").width):0},t.getString=function(){return this._label.superscript?this._label.mantissa+"^"+this._label.superscript:this._label.string},t.drawCenteredAt=function(t,s,i){var e=s.x,a=r.computeBaselineFromCenter(s.y,this._fontSize);i&&n.save(t,i),t.save(),i&&n.restore(t),r.setCtxFontSize(t,this._fontSize),this._label.superscript?(t.strokeText(this._label.mantissa,this._layout.mantissa_x+e,this._layout.mantissa_y+a),t.strokeText(this._label.superscript,this._layout.superscript_x+e,this._layout.superscript_y+a),t.fillText(this._label.mantissa,this._layout.mantissa_x+e,this._layout.mantissa_y+a),t.fillText(this._label.superscript,this._layout.superscript_x+e,this._layout.superscript_y+a)):(t.strokeText(this._label.string,this._layout.mantissa_x+e,this._layout.mantissa_y+a),t.fillText(this._label.string,this._layout.mantissa_x+e,this._layout.mantissa_y+a)),t.restore()}});return r.computeBaselineFromCenter=function(t,s){return t+.272*s},r.setCtxFontSize=function(t,s){t.font=s+"px Arial",t.textAlign="center"},r});
define('graphing/computestepsizes',['require','./stepnumber','core/lib/label'],function(require){"use strict";function l(t,e,i,r){var o=Math.ceil(t/i),n=Math.floor(e/i),a=1/i;if(!(n<o||1e4<n-o))for(var s=o;s<=n;s++)r(s/a)}var A=require("./stepnumber"),P=require("core/lib/label"),f={};function w(t){return t?{base:10,major:[t,2*t,5*t],minor:[4,4,5]}:f.RATIONAL_STEPS}return f.RATIONAL_STEPS={base:10,major:[1,2,5],minor:[5,4,5]},f.PI_STEPS={base:10,major:[Math.PI,2*Math.PI,5*Math.PI],minor:[4,4,5]},f.PI_FRAC_STEPS={base:2,major:[Math.PI/3],minor:[3]},f.bestStep=function(t,e){for(var i,r,o,n,a=1/0,s=0;s<e.major.length;s++)i=e.major[s],o=Math.ceil(Math.log(t/i)/Math.log(e.base)),(n=i*Math.pow(e.base,o))<a&&(r=(a=n)/e.minor[s]);return{major:a,minor:r}},f.countStepsInRange=function(t,e,i){return 1+(e-t)/i},f.calculateSpaceBetweenRects=function(t,e){var i=t.right<e.left?e.left-t.right:e.right<t.left?t.left-e.right:0,r=t.bottom<e.top?e.top-t.bottom:e.bottom<t.top?t.top-e.bottom:0;return Math.max(r,i)},f.estimateMajors=function(t){var e=t.screen.width,i=t.screen.height,r=t.viewport.xmax-t.viewport.xmin,o=t.viewport.ymax-t.viewport.ymin,n=t.settings.pixelsPerLabel;return{majorStepX:n/e*r,majorStepY:n/i*o}},f.cartesian=function(t){var e,i,r,o,n,a,s,m,S={},p=Math.abs(t.settings.xAxisStep),x=Math.abs(t.settings.yAxisStep),u=t.viewport.xmax-t.viewport.xmin,j=t.viewport.ymax-t.viewport.ymin,v=0<=P.value(p,u).string.indexOf(""),h=0<=P.value(x,j).string.indexOf(""),b=f.countStepsInRange(t.viewport.xmin,t.viewport.xmax,p),g=f.countStepsInRange(t.viewport.ymin,t.viewport.ymax,x),c=f.estimateMajors(t),M=t.settings.labelSize;return p&&p!==Math.PI&&3<=b&&b<100&&(i=0,t.settings.xAxisNumbers&&l(t.viewport.xmin,t.viewport.xmax,p,function(t){var e=A(P.value(t,u),M);i=Math.max(e.getWidth(),i)}),e=i+10,t.settings.xAxisNumbers||(e=1===t.settings.xAxisMinorSubdivisions?8:20),b*e<=t.screen.width&&(S.majorStepX=p,S.minorStepX=3===p||5===p?1:p/4)),x&&x!==Math.PI&&3<=g&&g<100&&(r=0,t.settings.yAxisNumbers&&l(t.viewport.ymin,t.viewport.ymax,x,function(t){var e=A(P.value(t,j),M);r=Math.max(e.getHeight(),r)}),e=r+10,t.settings.yAxisNumbers||(e=1===t.settings.yAxisMinorSubdivisions?8:20),g*e<=t.screen.height&&(S.majorStepY=x,S.minorStepY=3===x||5===x?1:x/4)),S.majorStepX||(o=v?1<=c.majorStepX?f.PI_STEPS:f.PI_FRAC_STEPS:w(p),n=f.bestStep(c.majorStepX,o),S.majorStepX=n.major,S.minorStepX=n.minor),S.majorStepY||(a=h?1<=c.majorStepY?f.PI_STEPS:f.PI_FRAC_STEPS:w(x),s=f.bestStep(c.majorStepY,a),S.majorStepY=s.major,S.minorStepY=s.minor),p===x&&(1<=(m=t.screen.width/u/(t.screen.height/j))&&m<=2?(S.majorStepX=S.majorStepY,S.minorStepX=S.minorStepY):m<=1&&.5<=m&&(S.majorStepY=S.majorStepX,S.minorStepY=S.minorStepX)),0<t.settings.xAxisMinorSubdivisions&&(S.minorStepX=S.majorStepX/t.settings.xAxisMinorSubdivisions),0<t.settings.yAxisMinorSubdivisions&&(S.minorStepY=S.majorStepY/t.settings.yAxisMinorSubdivisions),S},f.polar=function(t){var e=f.estimateMajors(t),i=f.bestStep(e.majorStepX,f.RATIONAL_STEPS),r=f.bestStep(e.majorStepY,f.RATIONAL_STEPS),o=i.major>r.major?i:r;return{majorStepR:o.major,minorStepR:o.minor}},f});
define('graphing/gridlayer',['require','pjs','./stepnumber','core/lib/label','./computestepsizes','core/graphing-calc/json/graph-settings','./svg-classes','./svg-groups'],function(require){"use strict";var t=require("pjs"),V=require("./stepnumber"),F=require("core/lib/label"),n=require("./computestepsizes"),f=require("core/graphing-calc/json/graph-settings").AxisArrowModes,G=require("./svg-classes"),y=require("./svg-groups"),e=t(function(t){t.redrawToCtx=function(t,e,s){var i;y.save(t,"graphpaper");var a,r=e.settings.showGrid,o=e.settings.polarMode&&r?(i=n.polar(e),y.save(t,"grid"),this.drawPolarGrid(t,e,i),y.restore(t),y.save(t,"axis"),this.drawAxes(t,e,s),this.drawPolarStepNumbers(t,e,i)):(i=n.cartesian(e),r&&(y.save(t,"grid"),this.drawCartesianGrid(t,e,i),y.restore(t)),a=!r,y.save(t,"axis"),this.drawAxes(t,e,s),this.drawCartesianStepNumbers(t,e,i,a));this.drawLabels(t,e,o),y.restore(t),y.restore(t)},t.addTextShadow=function(t,e){t.strokeStyle=e.settings.getBackgroundColor(),t.lineWidth=3,t.miterLimit=2},t.drawPolarGrid=function(i,a,t){i.save();var e=a.settings.minorAxisOpacity,s=1-(1-a.settings.majorAxisOpacity)/(1-e),r=Math.round(a.mapx(0))-.5,o=Math.round(a.mapy(0))-.5,n=a.screen.height/(a.viewport.ymax-a.viewport.ymin),h=a.screen.width/(a.viewport.xmax-a.viewport.xmin),l=n/h,g=h/n,x=o/l,c=a.viewport.smallestR(),m=a.viewport.largestR(),p=t.minorStepR*Math.max(1,Math.floor(c/t.minorStepR)),d=t.majorStepR*Math.max(1,Math.floor(c/t.majorStepR));i.lineWidth=1,i.strokeStyle="rgba(0, 0 , 0, "+e+")",N(p,m,t.minorStepR,function(t){G.save(i,"dcg-svg-minor-gridline"),i.beginPath(),G.restore(i),i.scale(1,l);var e=a.mapx(t)-r;i.moveTo(r+e,x),i.arc(r,x,e,0,2*Math.PI),i.scale(1,g),i.stroke()}),N(0,359,0<c?5:15,function(t){var e,s;(0===t||180===t)&&a.settings.showXAxis||(90===t||270===t)&&a.settings.showYAxis||(G.save(i,"dcg-svg-minor-gridline"),i.beginPath(),G.restore(i),i.moveTo(r,o),e=a.mapx(m*Math.cos(t*Math.PI/180)),s=a.mapy(m*Math.sin(t*Math.PI/180)),i.lineTo(Math.round(e)-.5,Math.round(s)-.5),i.stroke())}),i.lineWidth=1,i.strokeStyle="rgba(0, 0 , 0, "+s+")",N(d,m,t.majorStepR,function(t){G.save(i,"dcg-svg-major-gridline"),i.beginPath(),G.restore(i),i.scale(1,l);var e=a.mapx(t)-r;i.moveTo(r+e,x),i.arc(r,x,e,0,2*Math.PI),i.scale(1,g),i.stroke()}),i.restore()},t.drawCartesianGrid=function(s,i,t){s.save();var e=i.viewport.xmin,a=i.viewport.ymin,r=i.viewport.xmax,o=i.viewport.ymax,n=i.screen.width,h=i.screen.height,l=h,g=0;i.settings.restrictGridToFirstQuadrant&&(a=e=0,l=i.mapy(0),g=i.mapx(0));var x=i.settings.minorAxisOpacity,c=i.settings.majorAxisOpacity;s.lineWidth=1,s.strokeStyle="rgba(0, 0 , 0, "+x+")",G.save(s,"dcg-svg-minor-gridline"),N(e,r,t.minorStepX,function(t){var e;0===t&&i.settings.showYAxis||(e=Math.round(i.mapx(t)))!==n&&(s.beginPath(),s.moveTo(e-.5,0),s.lineTo(e-.5,l),s.stroke())}),N(a,o,t.minorStepY,function(t){var e;0===t&&i.settings.showXAxis||(e=Math.round(i.mapy(t)))!==h&&(s.beginPath(),s.moveTo(g,e-.5),s.lineTo(n,e-.5),s.stroke())}),G.restore(s);var m=1-(1-c)/(1-x);s.strokeStyle="rgba(0, 0 , 0, "+m+")",G.save(s,"dcg-svg-major-gridline"),N(e,r,t.majorStepX,function(t){var e;0===t&&i.settings.showYAxis||(e=Math.round(i.mapx(t)))!==n&&(s.beginPath(),s.moveTo(e-.5,0),s.lineTo(e-.5,l),s.stroke())}),N(a,o,t.majorStepY,function(t){var e;0===t&&i.settings.showXAxis||(e=Math.round(i.mapy(t)))!==h&&(s.beginPath(),s.moveTo(g,e-.5),s.lineTo(n,e-.5),s.stroke())}),G.restore(s),s.restore()},t.drawAxes=function(r,t,e){var s=t.settings.axisLineOffset,i=t.settings.axisOpacity.toString(),a="rgba(127,205,230,"+i+")",o="rgba(0,0,0,"+i+")",n=t.settings.xAxisArrowMode,h=t.settings.yAxisArrowMode,l=t.settings.showXAxis,g=t.settings.showYAxis,x=Math.round(t.mapx(0))-s,c=Math.round(t.mapy(0))-s,m=t.screen.height,p=t.screen.width;function d(t,e,s){r.save();var i=Math.PI/12,a=8*Math.max(r.lineWidth,1.5);r.lineJoin="round",r.fillStyle=o,r.strokeStyle=o,r.beginPath(),r.moveTo(t,e),r.lineTo(t+Math.cos(s-i)*a,e+Math.sin(s-i)*a),r.lineTo(t+Math.cos(s+i)*a,e+Math.sin(s+i)*a),r.lineTo(t,e),r.lineTo(t+Math.cos(s-i)*a,e+Math.sin(s-i)*a),r.stroke(),r.fill(),r.restore()}var v=m,u=0;t.settings.restrictGridToFirstQuadrant&&(v=c,u=x,n===f.BOTH&&(n=f.POSITIVE),h===f.BOTH&&(h=f.POSITIVE)),g&&(y.save(r,"yaxis"),t.settings.takingScreenshot&&y.setTitle(r,t.settings.yAxisLabel||"Y axis"),G.save(r,"dcg-svg-axis-line"),r.lineWidth=+t.settings.axisLineWidth,r.strokeStyle="y"===e?a:o,h===f.BOTH?(r.beginPath(),r.moveTo(x,2*t.settings.axisLineWidth),r.lineTo(x,m-2*t.settings.axisLineWidth),r.stroke(),d(x,m-t.settings.axisLineWidth,3*Math.PI/2),d(x,t.settings.axisLineWidth,Math.PI/2)):h===f.POSITIVE?(r.beginPath(),r.moveTo(x,2*t.settings.axisLineWidth),r.lineTo(x,v),r.stroke(),d(x,t.settings.axisLineWidth,Math.PI/2)):(r.beginPath(),r.moveTo(x,0),r.lineTo(x,v),r.stroke()),G.restore(r),y.restore(r)),l&&(y.save(r,"xaxis"),t.settings.takingScreenshot&&y.setTitle(r,t.settings.xAxisLabel||"X axis"),G.save(r,"dcg-svg-axis-line"),r.lineWidth=+t.settings.axisLineWidth,r.strokeStyle="x"===e?a:o,n===f.BOTH?(r.beginPath(),r.moveTo(2*t.settings.axisLineWidth,c),r.lineTo(p-2*t.settings.axisLineWidth,c),r.stroke(),d(t.settings.axisLineWidth,c,0),d(p-t.settings.axisLineWidth,c,Math.PI)):n===f.POSITIVE?(r.beginPath(),r.lineTo(u,c),r.lineTo(p-2*t.settings.axisLineWidth,c),r.stroke(),d(p-t.settings.axisLineWidth,c,Math.PI)):(r.beginPath(),r.lineTo(u,c),r.lineTo(p,c),r.stroke()),G.restore(r),y.restore(r))},t.drawPolarStepNumbers=function(g,x,t){g.save();var e=x.settings.showGrid,o=x.settings.xAxisNumbers&&x.settings.showXAxis,n=x.settings.yAxisNumbers&&x.settings.showYAxis,s=e&&x.settings.polarNumbers,h=x.viewport.largestR(),i=x.viewport.smallestR(),c=x.viewport.xmin,m=x.viewport.xmax,p=x.viewport.ymin,d=x.viewport.ymax,v=x.screen.width,u=x.screen.height,l={left:3,right:v-3,top:3,bottom:u-3},f=x.settings.labelHangingColor,a=x.settings.getTextColor(),y=x.settings.labelSize,b=y;function w(t,e,s){var i=Math.sqrt(t*t-e*e);p<=i&&i<=d&&s.push({x:x.mapx(e),y:x.mapy(i)}),p<=-i&&-i<=d&&s.push({x:x.mapx(e),y:x.mapy(-i)})}function M(t,e,s){var i=Math.sqrt(t*t-e*e);c<=i&&i<=m&&s.push({x:x.mapx(i),y:x.mapy(e)}),c<=-i&&-i<=m&&s.push({x:x.mapx(-i),y:x.mapy(e)})}this.addTextShadow(g,x),g.fillStyle=a;var r,T,S,A,L,P,k,_,W=x.mapx(0),O=x.mapy(0),R=p<=0&&0<=d&&o,C=c<=0&&0<=m&&n,I="";R||C||!e||(k=(r=Math.abs(W))<=(T=Math.abs(W-v))?(L="left",r):(L="right",T),_=(S=Math.abs(O))<=(A=Math.abs(O-u))?(P="top",S):(P="bottom",A),o&&n?I=k<=_?L:P:n?I=L:o&&(I=P));var j,B,E,X={left:0,right:v,top:O-1,bottom:O+1},Y={left:W-1,right:W+1,top:0,bottom:u};return N(0,h,t.majorStepR,function(t){var e=[],s=[],i=[],a=V(F.value(t,h),y),r=a.getRect();switch(0<t?(C&&p<=t&&t<=d&&s.push({x:W-r.right-5,y:x.mapy(t)}),C&&p<=-t&&-t<=d&&s.push({x:W-r.right-5,y:x.mapy(-t)}),R&&c<=t&&t<=m&&e.push({x:x.mapx(t),y:O-r.top+3}),R&&c<=-t&&-t<=m&&e.push({x:x.mapx(-t),y:O-r.top+3})):C&&!o&&p<=t&&t<=d?s.push({x:W-r.right-5,y:x.mapy(t)}):R&&!n&&c<=t&&t<=m&&e.push({x:x.mapx(t),y:O-r.top+3}),I){case"top":M(t,d,i);break;case"bottom":M(t,p,i);break;case"left":w(t,c,i);break;case"right":w(t,m,i)}e.forEach(function(t){t=a.clampBoundsWithinRect(t,l),a.drawCenteredAt(g,t,"dcg-svg-axis-value"),H(X,a.getRectWhenCenteredAt(t))}),s.forEach(function(t){t=a.clampBoundsWithinRect(t,l),a.drawCenteredAt(g,t,"dcg-svg-axis-value"),H(Y,a.getRectWhenCenteredAt(t))}),i.forEach(function(t){t=a.clampBoundsWithinRect(t,l),a.drawCenteredAt(g,t,"dcg-svg-axis-value")})}),s&&(j=Math.ceil(i/t.majorStepR),B=Math.floor(h/t.majorStepR),E=Math.ceil((j+B)/2)*t.majorStepR,N(0,359,0<i?15:30,function(t){var e,s,i,a,r=x.settings.degreeMode?t.toString()+"":F.value(t*Math.PI/180,2*Math.PI).string,o=g.measureText(r).width/2,n=E/1.05,h=n*Math.cos(t*Math.PI/180),l=n*Math.sin(t*Math.PI/180);h<c||m<h||l<p||d<l||(e=x.mapx(h),s=x.mapy(l),0===t||180===t?s-=b:90!==t&&270!==t||(e+=3+o),i=z(e,3+o,v-3-o),a=z(s,3+b,u-3-b),a=V.computeBaselineFromCenter(a,y),G.save(g,"dcg-svg-polar-axis-value"),g.save(),G.restore(g),g.fillStyle=f,V.setCtxFontSize(g,y),g.strokeText(r,i,a),g.fillText(r,i,a),g.restore())})),g.restore(),{x:X,y:Y}},t.drawLabels=function(t,e,s){var i,a,r,o,n,h,l,g,x=e.viewport.xmin,c=e.viewport.xmax,m=e.viewport.ymin,p=e.viewport.ymax,d=e.screen.width,v=e.screen.height,u=(c-x)/d,f=(p-m)/v,y=e.settings.getTextColor(),b=e.mapx(0),w=e.mapy(0),M=e.settings.labelSize,T=e.settings.showXAxis&&e.settings.xAxisLabel,S=e.settings.showYAxis&&e.settings.yAxisLabel,A=s.x,L=s.y;T&&A?(G.save(t,"dcg-svg-axis-label"),t.save(),G.restore(t),t.fillStyle=y,t.__xLabelOffset&&e.settings.isViewportTransient&&P(t.__xLabelOffset.xscale,u)&&P(t.__xLabelOffset.yscale,f)&&(a={x:t.__xLabelOffset.x+b,y:t.__xLabelOffset.y+w}),this._setAxisLabelFont(t,T,M,e),a||(i=d-t.measureText(T).width-15,a=A.bottom+M<v?{x:i,y:A.bottom+M}:{x:i,y:A.top-M/2},t.__xLabelOffset={x:a.x-b,y:a.y-w,xscale:u,yscale:f}),t.strokeText(T,a.x,a.y),t.fillText(T,a.x,a.y),t.restore()):t.__xLabelPosition=null,S&&L?(G.save(t,"dcg-svg-axis-label"),t.save(),G.restore(t),t.fillStyle=y,t.__yLabelOffset&&e.settings.isViewportTransient&&P(t.__yLabelOffset.xscale,u)&&P(t.__yLabelOffset.yscale,f)&&(g={x:t.__yLabelOffset.x+b,y:t.__yLabelOffset.y+w}),this._setAxisLabelFont(t,S,M,e),g||(n=M,h=(o=t.measureText(S).width)+5,this._isShortMathyLabel(S)||(r=o,o=n,n=r,h=.5*o),l=15+n,g=0<L.left-o?{x:L.left-h,y:l}:{x:L.right+o,y:l},t.__yLabelOffset={x:g.x-b,y:g.y-w,xscale:u,yscale:f}),t.translate(g.x,g.y),this._isShortMathyLabel(S)||t.rotate(-Math.PI/2),t.strokeText(S,0,0),t.fillText(S,0,0),t.restore()):t.__yLabelPosition=null},t._isShortMathyLabel=function(t){return t.trim().match(/^([a-zA-Z]?)\(?([a-zA-Z]?)\)?$/)},t._setAxisLabelFont=function(t,e,s,i){this.addTextShadow(t,i),this._isShortMathyLabel(e)?t.font="italic "+Math.round(1.4*s.toString())+"px Times":t.font=Math.round(1.2*s.toString())+"px Arial"},t.drawCartesianStepNumbers=function(a,r,t,e){a.save();var s=r.settings.showXAxis,i=r.settings.showYAxis,o=s&&r.settings.xAxisNumbers,n=i&&r.settings.yAxisNumbers,h=r.viewport.xmin,l=r.viewport.xmax,g=r.viewport.ymin,x=r.viewport.ymax,c=r.screen.width,m=r.screen.height,p={left:3,top:3,right:c-3,bottom:m-3};r.settings.restrictGridToFirstQuadrant&&(g=h=0);var d=r.settings.labelHangingColor,v=r.settings.getTextColor(),u=r.mapx(0),f=r.mapy(0),y=r.settings.labelSize;this.addTextShadow(a,r);var b,w={left:0,right:c,top:f-1,bottom:f+1},M={left:u-1,right:u+1,top:0,bottom:m},T=!1;s&&i&&(o||n)&&(T=!0,a.fillStyle=v,(b=V(F.value(0,1),y)).drawCenteredAt(a,{x:u-b.getRect().right-5,y:f-b.getRect().top+5},"dcg-svg-axis-value"));var S,A,L,P,k,_=[],W=[];return o&&N(h,l,t.majorStepX,function(t){var e=V(F.value(t,l-h),y);"0"===e.getString()&&T||_.push(e)}),n&&N(g,x,t.majorStepY,function(t){var e=V(F.value(t,x-g),y);"0"===e.getString()&&T||W.push(e)}),e&&(a.save(),G.save(a,"dcg-svg-tickmark"),S=r.settings.axisLineOffset,A="rgba(0,0,0,"+r.settings.axisOpacity.toString()+")",a.lineWidth=r.settings.axisLineWidth,a.strokeStyle=A,L=Math.round(r.mapy(0))-S,P=Math.round(r.mapx(0))-S,k=Math.round(2*a.lineWidth)-S,a.beginPath(),_.forEach(function(t){var e=Math.round(r.mapx(t.getValue()))-S;a.moveTo(e,L-k),a.lineTo(e,L+k)}),W.forEach(function(t){var e=Math.round(r.mapy(t.getValue()))-S;a.moveTo(P-k,e),a.lineTo(P+k,e)}),a.stroke(),G.restore(a),a.restore()),_.forEach(function(t){var e={x:r.mapx(t.getValue())-.5*t.getMinusWidth(),y:f-t.getRect().top+5},s=t.clampBoundsWithinRect(e,p);a.fillStyle=e.y===s.y?v:d;var i="dcg-svg-axis-value";e.x!==s.x&&(i+=" dcg-svg-offcenter-axis-value"),t.drawCenteredAt(a,s,i),H(w,t.getRectWhenCenteredAt(s)),G.restore(a)}),W.forEach(function(t){var e={x:u-5-t.getRect().right,y:r.mapy(t.getValue())},s=t.clampBoundsWithinRect(e,p);a.fillStyle=e.x===s.x?v:d;var i="dcg-svg-axis-value";e.y!==s.y&&(i+=" dcg-svg-offcenter-axis-value"),t.drawCenteredAt(a,s,i),H(M,t.getRectWhenCenteredAt(s)),G.restore(a)}),a.restore(),{x:w,y:M}}}),N=function(t,e,s,i){var a=Math.ceil(t/s),r=Math.floor(e/s);if(isFinite(r-a)&&!(1e4<r-a))for(var o=a;o<=r;o++)i(o*s)},z=function(t,e,s){return t<e?e:s<t?s:t},H=function(t,e){e.left<t.left&&(t.left=e.left),e.right>t.right&&(t.right=e.right),e.top<t.top&&(t.top=e.top),e.bottom>t.bottom&&(t.bottom=e.bottom)},P=function(t,e){var s=Math.abs(t),i=Math.abs(e);return Math.abs(s-i)<=1e-4*(s<i?i:s)};return e});
define('graphing/imagelayer',['require','pjs','underscore','./draw-image-to-ctx','./svg-groups'],function(require){"use strict";var r=require("pjs"),s=require("underscore"),u=require("./draw-image-to-ctx").drawImageToCtx,d=require("./svg-groups");return r(function(r){r.redrawToCtx=function(r,e,o,n){d.save(r,"background-images"),(void 0===n||n.length<s.size(o))&&(n=s.keys(o));for(var t=0;t<n.length;t++){var a=o[n[t]];a&&a.shouldGraph&&!a.foreground&&u(a,r,e)}d.restore(r)}})});
define('core/math/recttransformation',["require","exports"],function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RT=void 0;var s=(n.prototype.toJSON=function(){return{tx:this.tx,ty:this.ty,sx:this.sx,sy:this.sy}},n.prototype.compose=function(t){return new n(this.sx*t.tx+this.tx,this.sy*t.ty+this.ty,this.sx*t.sx,this.sy*t.sy)},n.prototype.translate=function(t,s){var i=void 0===s?t.x:s.x-t.x,o=void 0===s?t.y:s.y-t.y;return new n(this.tx+i,this.ty+o,this.sx,this.sy)},n.prototype.scale=function(t,s){return n.scale(t,s).compose(this)},n.prototype.scaleAtPoint=function(t,s,i){return void 0===i&&(i=s),n.scaleAtPoint(t,s,i).compose(this)},n.prototype.inverse=function(){return new n(-this.tx/this.sx,-this.ty/this.sy,1/this.sx,1/this.sy)},n.prototype.div=function(t){return new n((this.tx*t.sx-this.sx*t.tx)/t.sx,(this.ty*t.sy-this.sy*t.ty)/t.sy,this.sx/t.sx,this.sy/t.sy)},n.prototype.conjugate=function(t){return new n(this.tx*t.sx+t.tx*(1-this.sx),this.ty*t.sy+t.ty*(1-this.sy),this.sx,this.sy)},n.prototype.pow=function(t){return new n(this.tx*i(this.sx,t),this.ty*i(this.sy,t),Math.pow(this.sx,t),Math.pow(this.sy,t))},n.prototype.mapX=function(t){return this.sx*t+this.tx},n.prototype.mapY=function(t){return this.sy*t+this.ty},n.prototype.mapPoint=function(t){return{x:this.mapX(t.x),y:this.mapY(t.y)}},n.prototype.mapRect=function(t){return{left:this.mapX(t.left),right:this.mapX(t.right),bottom:this.mapY(t.bottom),top:this.mapY(t.top)}},n.scale=function(t,s){return void 0===s&&(s=t),new n(0,0,t,s)},n.translate=function(t,s){return(new n).translate(t,s)},n.scaleAtPoint=function(t,s,i){return void 0===i&&(i=s),void 0===i&&(i=s),new n(t.x*(1-s),t.y*(1-i),s,i)},n.fromRects=function(t,s){var i=(s.right-s.left)/(t.right-t.left),o=(s.top-s.bottom)/(t.top-t.bottom);return new n(s.left-i*t.left,s.bottom-o*t.bottom,i,o)},n.fromJSON=function(t){return new n(t.tx,t.ty,t.sx,t.sy)},n);function n(t,s,i,o){void 0===t&&(t=0),void 0===s&&(s=0),void 0===i&&(i=1),void 0===o&&(o=i),this.tx=t,this.ty=s,this.sx=i,this.sy=o}function i(t,s){var i=t-1;return 1+i*i*i==1?s*(1+i*(s-1)*(.5+1/6*i*(s-2))):(Math.pow(t,s)-1)/i}t.RT=s});
define('graphing/projection',["require","exports","core/math/recttransformation"],function(require,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Projection=void 0;var e=(o.prototype.mapx=function(t){return this.mathToPixels.mapX(t)},o.prototype.mapy=function(t){return this.mathToPixels.mapY(t)},o.prototype.map_pt=function(t){return this.mathToPixels.mapPoint(t)},o.prototype.reverse_mapx=function(t){return this.pixelsToMath.mapX(t)},o.prototype.reverse_mapy=function(t){return this.pixelsToMath.mapY(t)},o.prototype.reverse_map_pt=function(t){return this.pixelsToMath.mapPoint(t)},o.prototype.coordsAreOnscreen=function(t,e,o){return-(o=void 0===o?0:o)<t&&-o<e&&t<this.screen.width+o&&e<this.screen.height+o},o.prototype.closestPointOnScreen=function(t){var e=this.pixelCoordinates;return{x:Math.min(Math.max(t.x,e.left),e.right),y:Math.min(Math.max(t.y,e.top),e.bottom)}},o);function o(t,e,o){var i,r;this.screen=t,this.viewport=e,this.settings=o,this.mathCoordinates={left:(i=e).xmin,right:i.xmax,bottom:i.ymin,top:i.ymax},this.pixelCoordinates={left:0,right:(r=t).width,top:0,bottom:r.height},this.mathToPixels=n.RT.fromRects(this.mathCoordinates,this.pixelCoordinates),this.pixelsToMath=n.RT.fromRects(this.pixelCoordinates,this.mathCoordinates)}t.Projection=e});
!function(e){"function"==typeof define&&define.amd?define('vendor/jquery.mousewheel',["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(u){var r,d,e=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],t="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],f=Array.prototype.slice;if(u.event.fixHooks)for(var n=e.length;n;)u.event.fixHooks[e[--n]]=u.event.mouseHooks;var i=u.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var e=t.length;e;)this.addEventListener(t[--e],o,!1);else this.onmousewheel=o;u.data(this,"mousewheel-line-height",i.getLineHeight(this)),u.data(this,"mousewheel-page-height",i.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=t.length;e;)this.removeEventListener(t[--e],o,!1);else this.onmousewheel=null},getLineHeight:function(e){return parseInt(u(e)["offsetParent"in u.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(e){return u(e).height()},settings:{adjustOldDeltas:!0}};function o(e){var t,n,i,o=e||window.event,l=f.call(arguments,1),s=0,a=0,h=0;if((e=u.event.fix(o)).type="mousewheel","detail"in o&&(h=-1*o.detail),"wheelDelta"in o&&(h=o.wheelDelta),"wheelDeltaY"in o&&(h=o.wheelDeltaY),"wheelDeltaX"in o&&(a=-1*o.wheelDeltaX),"axis"in o&&o.axis===o.HORIZONTAL_AXIS&&(a=-1*h,h=0),s=0===h?a:h,"deltaY"in o&&(s=h=-1*o.deltaY),"deltaX"in o&&(a=o.deltaX,0===h&&(s=-1*a)),0!==h||0!==a)return 1===o.deltaMode?(s*=n=u.data(this,"mousewheel-line-height"),h*=n,a*=n):2===o.deltaMode&&(s*=i=u.data(this,"mousewheel-page-height"),h*=i,a*=i),t=Math.max(Math.abs(h),Math.abs(a)),(!d||t<d)&&m(o,d=t)&&(d/=40),m(o,t)&&(s/=40,a/=40,h/=40),s=Math[1<=s?"floor":"ceil"](s/d),a=Math[1<=a?"floor":"ceil"](a/d),h=Math[1<=h?"floor":"ceil"](h/d),e.deltaX=a,e.deltaY=h,e.deltaFactor=d,e.deltaMode=0,l.unshift(e,s,a,h),r&&clearTimeout(r),r=setTimeout(c,200),(u.event.dispatch||u.event.handle).apply(this,l)}function c(){d=null}function m(e,t){return i.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120==0}u.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})});
define('graphing/viewportcontroller',['require','jquery','pjs','lib/aria','lib/i18n','core/math/recttransformation','./viewport','core/math/distance','./constants','lib/animation-frame','./projection','keys','jquery.handleevent','vendor/jquery.mousewheel'],function(require){"use strict";var a=require("jquery"),t=require("pjs"),n=require("lib/aria"),o=require("lib/i18n"),m=require("core/math/recttransformation").RT,s=require("./viewport").Viewport,h=require("core/math/distance"),x=require("./constants"),w=require("lib/animation-frame"),c=require("./projection").Projection,v=require("keys");return require("jquery.handleevent"),require("vendor/jquery.mousewheel"),t(function(t){var i=0;function l(t,e){var i=e.x-t.x,o=e.y-t.y,r=.5*(t.x+e.x),n=.5*(t.y+e.y),a=.5*h.hypot(i,o);return{center:f(r,n),radius:a}}function g(t,e){return l(e,{x:2*t.x-e.x,y:2*t.y-e.y})}function d(t,e){for(var i=[],o=0;o<t.length;o++)i.push(f(t[o].x-e.left,t[o].y-e.top));return i}function f(t,e){return{x:t,y:e}}function r(t){return f(.5*(t.left+t.right),.5*(t.bottom+t.top))}t.init=function(t,e){this.grapher=t,this.$=this.grapher.$,this.__id=i++,this.controller=e,this.isScalingEnabled=!1,this.mousePt=f(0,0),this.lastScrollZoom=Date.now(),this.preventScrollZoom=!1,this.addMouseWheelEventHandler(),this.addTouchEventHandler()},t.remove=function(){a(window).off(".viewportcontroller-"+this.__id)},t.s=function(t,e){return o.s(t,e,this.grapher.settings.language)},t.getViewport=function(){return this.grapher.getProjection().viewport},t.getProjection=function(){return this.grapher.getProjection()},t.updateMouse=function(t){var e=this.$[0].getBoundingClientRect();this.mousePt=f(t.clientX-e.left,t.clientY-e.top)},t.updateScaleAxis=function(){this.isMouseInViewport()&&(this.isMouseNearYAxis()?this.grapher.scaleAxis="y":this.isMouseNearXAxis()?this.grapher.scaleAxis="x":this.grapher.scaleAxis="both"),this.updateCursor(),this.grapher.redrawAllLayers()},t.updateCursor=function(){this.$.toggleClass("dcg-scale-horizontal","x"===this.grapher.scaleAxis),this.$.toggleClass("dcg-scale-vertical","y"===this.grapher.scaleAxis),this.$.toggleClass("dcg-scale-both","both"===this.grapher.scaleAxis)},t.isMouseNearOrigin=function(){var t=this.getProjection().mathToPixels.mapPoint(f(0,0));return Math.abs(this.mousePt.x-t.x)<50&&Math.abs(this.mousePt.y-t.y)<50},t.isMouseNearXAxis=function(){var t=this.getProjection(),e=t.pixelCoordinates,i=t.mathToPixels.mapY(0),i=Math.min(Math.max(e.top,i),e.bottom);return Math.abs(this.mousePt.y-i)<40&&t.settings.showXAxis},t.isMouseNearYAxis=function(){var t=this.getProjection(),e=t.pixelCoordinates,i=t.mathToPixels.mapX(0),i=Math.min(Math.max(e.left,i),e.right);return Math.abs(this.mousePt.x-i)<40&&t.settings.showYAxis},t.isMouseInViewport=function(){var t=this.getProjection(),e=t.mathCoordinates,i=t.pixelsToMath.mapPoint(this.mousePt);return i.x>=e.left&&i.x<=e.right&&i.y>=e.bottom&&i.y<=e.top},t.getDefaultViewport=function(){return this.controller.getDefaultStateViewport()||this.grapher.getDefaultViewport()},t._setViewportWithoutCancellingAnimation=function(t){var e;t.isValid()&&(t.equals(this.getViewport())||(e=this.getProjection(),this.grapher._setProjection(new c(e.screen,t,e.settings))))},t.setViewport=function(t){this.cancelAnimation(),this._setViewportWithoutCancellingAnimation(t)},t.setScreen=function(t){var e=this.getProjection(),i=e.settings.squareAxes,o=new c(t,this.getViewportForScreen(e.viewport,t,i),e.settings);this.grapher._setProjection(o)},t.getTransformedViewport=function(t){var e=this.getProjection(),i=e.pixelsToMath.div(t).mapRect(e.pixelCoordinates);return new s(i.left,i.right,i.bottom,i.top)},t.transformViewport=function(t){this.setViewport(this.getTransformedViewport(t))},t.animateTransformation=function(o){var r=this;this.cancelAnimation();var n,a=this.getTransformedViewport(o),s=0;this.__animationTimeout=w.requestAnimationFrame(function t(e){var i=(e-(n=n||e))/x.ANIMATE_ZOOM_DURATION;(s+=i)<1?(r.__animationTimeout=w.requestAnimationFrame(t),r._setViewportWithoutCancellingAnimation(r.getTransformedViewport(o.pow(i)))):r.setViewport(a),r.grapher.debounceUserRequestedViewportChange()})},t.cancelAnimation=function(){w.cancelAnimationFrame(this.__animationTimeout)},t.addMouseWheelEventHandler=function(){var o,r,g=this,u=!1;a(window).on("scroll.viewportcontroller-"+this.__id,function(t){u=!0}),a(window).on("mousewheel.viewportcontroller-"+this.__id,function(t){o=t.originalEvent.clientX,r=t.originalEvent.clientY}),a(window).on("mousemove.viewportcontroller-"+this.__id,function(t){var e,i;u&&((e=t.originalEvent.clientX-o)*e+(i=t.originalEvent.clientY-r)*i<100||(u=!1))});var p=0;this.$.mousewheel(function(t,e){var i,o,r,n,a,s,h,c,l=Date.now();g.preventScrollZoom&&50<l-g.lastScrollZoom&&(g.preventScrollZoom=!1),g.lastScrollZoom=l,g.preventScrollZoom||((i=this.getProjection()).settings.config.lockViewport||(o=i.mathToPixels,u||(t.preventDefault(),g.updateMouse(t),r=o.mapPoint(f(0,0)),n=g.isMouseNearOrigin()&&0<e?r:g.mousePt,0<p||(p+=1,w.requestAnimationFrame(function(){p--}),a=0<(e=0<e?1:-1)?x.ZOOM_FACTOR:1/x.ZOOM_FACTOR,h="x"!==(s=g.grapher.scaleAxis)&&"both"!==s&&s?1:a,c="y"!==s&&"both"!==s&&s?1:a,this.transformViewport(m.scaleAtPoint(n,h,c)),this.grapher.debounceUserRequestedViewportChange()))))}.bind(this))},t.handleDoubleClick=function(t){var e,i,o=this.getProjection();o.settings.config.lockViewport||o.settings.config.disable_dblclick_zooming||t.wasHandled()||(t.preventDefault(),e=this.$[0].getBoundingClientRect(),i=f(t.clientX-e.left,t.clientY-e.top),this.animateTransformation(m.scaleAtPoint(i,x.DOUBLETAP_ZOOM)))},t.applyPanTouchChanges=function(t,e){var i;this.getProjection().settings.config.lockViewport||this.isScalingEnabled||(i=f(e[0].x-t[0].x,e[0].y-t[0].y),this.transformViewport(m.translate(i)),this.grapher.debounceUserRequestedViewportChange())},t.chooseDragScaleCenter=function(){var t=this.getProjection(),e=t.pixelCoordinates,i=t.mathToPixels.mapX(0),o=t.mathToPixels.mapY(0);return f(i=Math.min(Math.max(e.left,i),e.right),o=Math.min(Math.max(e.top,o),e.bottom))},t.applyScaleTouchChanges=function(t,e){if(!this.getProjection().settings.config.lockViewport){var i=this.grapher.scaleAxis;if(2===t.length&&2===e.length)r=l(t[0],t[1]),n=l(e[0],e[1]);else{if(1!==e.length)return;var o=this.chooseDragScaleCenter(),r=g(o,t[0]),n=g(o,e[0])}var a=n.radius/r.radius,s="y"===i?1:a,h="x"===i?1:a,c=m.scaleAtPoint(r.center,s,h).translate(r.center,n.center);this.transformViewport(c),this.grapher.debounceUserRequestedViewportChange()}},t.addTouchEventHandler=function(){var h=this,c=[],l=!1,g=!0,u=!0;a(window).on("mousemove.viewportcontroller-"+this.__id,function(t){var e=h.grapher.getProjection();l||e.settings.config.lockViewport||(h.updateMouse(t),h.isScalingEnabled&&h.updateScaleAxis())});function p(t){return h.grapher.scaleAxis||(h.grapher.scaleAxis=function(t){if(!(t.length<2)){var e=h.grapher.getProjection(),i=e.pixelCoordinates,o=e.mathToPixels.mapX(0),r=e.mathToPixels.mapY(0),o=Math.min(Math.max(i.left,o),i.right),r=Math.min(Math.max(i.top,r),i.bottom),n=t[1].x-t[0].x,a=t[1].y-t[0].y;return Math.abs(t[0].x-o)<40&&Math.abs(t[1].x-o)<40&&Math.abs(a)>3*Math.abs(n)&&e.settings.showYAxis?"y":Math.abs(t[0].y-r)<40&&Math.abs(t[1].y-r)<40&&Math.abs(n)>3*Math.abs(a)&&e.settings.showXAxis?"x":"both"}}(t)),h.grapher.scaleAxis}function m(){h.grapher.scaleAxis&&(h.grapher.scaleAxis=void 0,h.grapher.redrawAllLayers(),h.updateCursor())}function i(){h.isScalingEnabled=!1,h.preventScrollZoom=!0,m()}var r=function(t){if(l&&!h.getProjection().settings.config.lockViewport&&h.grapher&&h.grapher.clickableObjectsLayer&&!h.grapher.clickableObjectsLayer.isAnObjectPressed()){var e=d(t.touches,h.$.offset());if(2===c.length&&2===e.length)p(e),h.applyScaleTouchChanges(c,e);else if(1===c.length&&h.isScalingEnabled){h.updateMouse(t);var i,o,r=h.grapher.scaleAxis,n=h.getProjection().mathToPixels.mapPoint(f(0,0)),a=g?1:-1,s=u?1:-1;if("x"!==r&&"both"!==r||(i=h.mousePt.x>n.x+5*a),"y"!==r&&"both"!==r||(o=h.mousePt.y>n.y+5*s),"x"===r&&g!==i)return;if("y"===r&&u!==o)return;if("both"===r&&g!==i&&u!==o)return;h.applyScaleTouchChanges(c,e)}else m();1===c.length&&h.applyPanTouchChanges(c,e),h.controller.dispatch({type:"grapher/drag-move"}),c=e}},n=function(t){l&&(h.cancelAnimation(),c=d(t.touches,h.$.offset()),0===t.touches.length&&(l=!1,h.grapher.isDragging=!1,a(document).off(".graphdrag"),h.grapher.debounceUserRequestedViewportChange(),h.controller.dispatch({type:"grapher/drag-end"})),0!==t.touches.length&&(1!==t.touches.length||h.isScalingEnabled)||m())};this.$.on("dcg-tapstart",function(t){var e,i,o=h.getProjection();o.settings.config.lockViewport||t.wasHandled()||l||t.touches.length===t.changedTouches.length&&(l=!0,h.grapher.isDragging=!0,h.updateMouse(t),e=o.mathToPixels.mapPoint(f(0,0)),"x"!==(i=h.grapher.scaleAxis)&&"both"!==i||(g=h.mousePt.x>e.x),"y"!==i&&"both"!==i||(u=h.mousePt.y>e.y),h.controller.dispatch({type:"grapher/drag-start"}),a(document).on("dcg-tapmove.graphdrag",r),a(document).on("dcg-tapstart.graphdrag dcg-tapend.graphdrag dcg-tapcancel.graphdrag",n))}),this.$.on("dblclick",this.handleDoubleClick.bind(this)),a(window).on("keydown.viewportcontroller-"+this.__id,function(t){var e;this.getProjection().settings.config.lockViewport||(v.lookup(t)!==v.SHIFT||(e=t).altKey||e.ctrlKey||e.metaKey?i():(this.isScalingEnabled=!0,this.grapher.scaleAxis||this.updateScaleAxis()))}.bind(this)),a(window).on("keyup.viewportcontroller-"+this.__id+" blur.viewportcontroller-"+this.__id,i)},t.zoom=function(t){var e,i,o=this.getProjection().pixelCoordinates;"in"===t?(this.animateTransformation(m.scaleAtPoint(r(o),2)),n.alert(this.s("graphing-calculator-narration-viewport-zoom-in"))):"out"===t?(this.animateTransformation(m.scaleAtPoint(r(o),.5)),n.alert(this.s("graphing-calculator-narration-viewport-zoom-out"))):"default"===t?(e=this.getDefaultViewport(),this.animateTransformation(this.getCustomZoomTransformation(e)),n.alert(this.s("graphing-calculator-narration-viewport-zoom-default"))):"square"===t&&(i=this.getSquareViewport(),this.animateTransformation(this.getCustomZoomTransformation(i)),n.alert(this.s("graphing-calculator-narration-viewport-zoom-square")))},t.zoomCustom=function(t){this.animateTransformation(this.getCustomZoomTransformation(t)),n.alert(this.s("graphing-calculator-narration-viewport-updated"))},t.getCustomZoomTransformation=function(t){function e(){return{x:0,y:0}}var i=this.getProjection().viewport,o=this.getProjection().pixelCoordinates,r=this.getProjection().mathCoordinates,n=(i.xmax-i.xmin)/(t.xmax-t.xmin),a=(i.ymax-i.ymin)/(t.ymax-t.ymin),s=m.fromRects(r,o),h=new m.translate(s.mapPoint(e()),e()),c=new m.scale(n,a),l=m.fromRects({left:t.xmin,right:t.xmax,bottom:t.ymin,top:t.ymax},o);return new m.translate(e(),l.mapPoint(e())).compose(c.compose(h))},t.isZoomRestored=function(){var t=this.getProjection(),e=t.viewport,i=this.getDefaultViewport();return t.settings.squareAxes&&Math.abs((e.xmin-i.xmin)/e.xmin)<.05&&Math.abs((e.xmax-i.xmax)/e.xmax)<.05&&Math.abs((e.ymin-i.ymin)/e.ymin)<.05&&Math.abs((e.ymax-i.ymax)/e.ymax)<.05},t.getViewportForScreen=function(t,e,i){return i?"y"==this.getProjection().settings.lastChangedAxis?t.squareXAxis(e):t.squareYAxis(e):t},t.getSquareViewport=function(){var t=this.getProjection();return this.getViewportForScreen(t.viewport,t.screen,!0)},t.enforceSquareAxes=function(){var t=this.getProjection();t.settings.squareAxes&&(t.viewport.isSquare(t.screen)||this.setViewport(this.getViewportForScreen(t.viewport,t.screen,!0)))}})});
define('geometry/math/hypot',["require","exports"],function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Math.hypot&&Math.hypot(1/0,NaN)===1/0;function e(t){return t===1/0||t===-1/0}t.default=r?Math.hypot:function(t,r){if(e(t)||e(r))return 1/0;if(isNaN(t)||isNaN(r))return NaN;if(0===t&&0===r)return 0;if(Math.abs(t)>Math.abs(r)){var a=r/t;return Math.abs(t)*Math.sqrt(a*a+1)}a=t/r;return Math.abs(r)*Math.sqrt(a*a+1)}});
define('lib/priority-queue',["require","exports"],function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(i.prototype.size=function(){return this._data.length},i.prototype.queue=function(t){var a=this._data.length;for(this._data.push(t);0<a;){var i=a-1>>>1;if(!(this.comparator(this._data[a],this._data[i])<0))break;var e=this._data[i];this._data[i]=this._data[a],this._data[a]=e,a=i}},i.prototype.dequeue=function(){var t=this._data[0],a=this._data.pop();if(0<this._data.length&&void 0!==a){this._data[0]=a;for(var i=0,e=this._data.length-1;;){var r=1+(i<<1),h=1+r,s=i;if(r<=e&&this.comparator(this._data[r],this._data[s])<0&&(s=r),h<=e&&this.comparator(this._data[h],this._data[s])<0&&(s=h),s===i)break;var o=this._data[s];this._data[s]=this._data[i],this._data[i]=o,i=s}}return t},i.prototype.peek=function(){return this._data[0]},i.prototype.clear=function(){this._data.length=0},i);function i(t){this.comparator=t,this._data=[]}t.default=a});
define('geometry/math/polygon-area-support',["require","exports","lib/priority-queue","bugsnag"],function(require,e,o,l){"use strict";function u(e,n){var t=e.pt2.y-e.pt1.y,i=e.pt1.x-e.pt2.x,r=n.pt2.y-n.pt1.y,s=n.pt1.x-n.pt2.x,a=t*e.pt1.x+i*e.pt1.y,o=r*n.pt1.x+s*n.pt1.y,u=t*s-r*i;if(0!=u)return(t*o-r*a)/u}function s(e,n,t){if(t.scanlineX<n.scanlineX&&l.notify("PolygonArea: rightEdge should not be left of leftEdge!",{metaData:{scanlineY:e,leftEdge:n,rightEdge:t}}),!(t.xSlope>=n.xSlope)){if(n.scanlineX===t.scanlineX)return e;var i=n.pt2.y>n.pt1.y?n.pt2:n.pt1,r=t.pt2.y>t.pt1.y?t.pt2:t.pt1,s=i.y;if(r.y<i.y){if(p(s=r.y,n)<r.x)return}else if(i.y<r.y){var a=p(s,t);if(i.x<a)return}else if(i.x<r.x)return;var o=u(n,t);if(void 0!==o)return Math.max(Math.min(o,s),e)}}function x(e,n,t,i){if(t&&i){if(t.id<i.id){if(t.skipIntersectionWith[i.id])return}else if(i.skipIntersectionWith[t.id])return;var r=s(e,t,i);void 0!==r&&(t.id<i.id?t.skipIntersectionWith[i.id]=!0:i.skipIntersectionWith[t.id]=!0,n.queue({type:"x",y:r,edge1:t,edge2:i}))}}function p(e,n){var t=n.pt1.x,i=n.pt2.x,r=n.pt1.y,s=n.pt2.y;if(r===e)return t;if(s===e)return i;var a=(e-r)/(s-r),o=(1-a)*t+a*i;if(t<i){if(o<=t)return t;if(i<=o)return i}else{if(o<=i)return i;if(t<=o)return t}return o}Object.defineProperty(e,"__esModule",{value:!0}),e.processEvent=e.setupEventQueueAndActiveEdges=e.measureUpwardNonZeroLength=e.measureUpwardEvenOddLength=e.measureDownwardNonZeroLength=e.measureDownwardEvenOddLength=e.computeScanlineX=e.checkForEdgeIntersection=e._stableYIntersectEdges=e._unstableYIntersectEdges=void 0,e._unstableYIntersectEdges=u,e._stableYIntersectEdges=s,e.checkForEdgeIntersection=x,e.computeScanlineX=p,e.measureDownwardEvenOddLength=function(e){for(var n=0,t=0,i=!1,r=0,s=e;r<s.length;r++){var a=s[r].scanlineX;i?(i=!1,n+=a-t):(i=!0,t=a)}return n},e.measureDownwardNonZeroLength=function(e){for(var n=0,t=0,i=!1,r=0,s=0,a=e;s<a.length;s++){var o=a[s],u=o.scanlineX;o.isClockwise?r+=1:--r,0===r||i?0===r&&i&&(i=!1,n+=u-t):(i=!0,t=u)}return n},e.measureUpwardEvenOddLength=function(e,n){for(var t=0,i=0,r=!1,s=-1/0,a=0,o=n;a<o.length;a++){var u=o[a],d=p(e,u);d<s?(d-s<-1e-4&&l.notify("PolygonArea: scanlineX reversed!",{metaData:{scanlineY:e,edge:u,minScanlineX:s,scanlineX:d}}),d=s):s=d,u.scanlineX=d,r?(r=!1,t+=d-i):(r=!0,i=d)}return t},e.measureUpwardNonZeroLength=function(e,n){for(var t=0,i=0,r=!1,s=0,a=-1/0,o=0,u=n;o<u.length;o++){var d=u[o],c=p(e,d);c<a?(c-a<-1e-4&&l.notify("PolygonArea: scanlineX reversed!",{metaData:{scanlineY:e,edge:d,minScanlineX:a,scanlineX:c}}),c=a):a=c,d.scanlineX=c,d.isClockwise?s+=1:--s,0===s||r?0===s&&r&&(r=!1,t+=c-i):(r=!0,i=c)}return t},e.setupEventQueueAndActiveEdges=function(e){for(var n=1,t=new o.default(function(e,n){return e.y-n.y}),i=e.length-1;1<=i;i--){var r=e[i],s=e[i-1],a={id:n++,pt1:r,pt2:s,scanlineX:0,xSlope:1/0,isClockwise:s.y>r.y,skipIntersectionWith:{}};s.y>r.y?(t.queue({type:"+",y:r.y,edge:a}),t.queue({type:"-",y:s.y,edge:a}),a.xSlope=(s.x-r.x)/(s.y-r.y),a.scanlineX=r.x):r.y>s.y&&(t.queue({type:"+",y:s.y,edge:a}),t.queue({type:"-",y:r.y,edge:a}),a.xSlope=(r.x-s.x)/(r.y-s.y),a.scanlineX=s.x)}return{activeEdges:[],events:t}},e.processEvent=function(e,n,t){var i,r,s,a,o,u,d,c,l,p,y,f,g,v;"x"===e.type?(c=n,l=t,p=(d=e).edge1,y=d.edge2,f=d.y,g=l.indexOf(p),v=g+1,-1===g||l[v]!==y?p.id<y.id?delete p.skipIntersectionWith[y.id]:delete y.skipIntersectionWith[p.id]:(l[g]=y,l[v]=p,x(f,c,l[g-1],y),x(f,c,p,l[v+1]))):"+"===e.type?function(e,n,t){for(var i=e.edge,r=e.y,s=i.xSlope,a=i.scanlineX,o=0;o<t.length;o++){var u=t[o];if(a<u.scanlineX)break;if(a===u.scanlineX&&s<=u.xSlope)break}t.splice(o,0,i),x(r,n,t[o-1],i),x(r,n,i,t[o+1])}(e,n,t):"-"===e.type&&(r=n,s=t,a=(i=e).edge,o=i.y,u=s.indexOf(a),s.splice(u,1),x(o,r,s[u-1],s[u]))}});
define('geometry/math/polygon',["require","exports","./hypot","bugsnag","./polygon-area-support"],function(require,e,r,d,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.calculatePaintedNonZeroArea=e.calculatePaintedEvenOddArea=e.calculateSimpleArea=e.calculatePerimeter=e.pointIsWithinNonZeroFill=e.pointIsWithinEvenOddFill=void 0,e.pointIsWithinEvenOddFill=function(e,n){if(!e)return!1;for(var t=n.x,r=n.y,a=!1,i=e.length-1;3<=i;i-=2){var l=e[i-3],u=e[i-2],o=e[i-1],c=e[i];r<u!=r<c&&t<(o-l)*(r-u)/(c-u)+l&&(a=!a)}return a},e.pointIsWithinNonZeroFill=function(e,n){if(!e)return!1;for(var t=n.x,r=n.y,a=0,i=e.length-1;3<=i;i-=2){var l=e[i-3],u=e[i-2],o=e[i-1],c=e[i];r<u!=r<c&&t<(o-l)*(r-u)/(c-u)+l&&(c<u?a+=1:u<c&&--a)}return 0!==a},e.calculatePerimeter=function(e){for(var n=0,t=0;t<e.length-1;t++)n+=r.default(e[t].x-e[t+1].x,e[t].y-e[t+1].y);return n},e.calculateSimpleArea=function(e){for(var n=0,t=0;t<e.length-1;t++)n+=e[t].x*e[t+1].y-e[t].y*e[t+1].x;return Math.abs(n)/2},e.calculatePaintedEvenOddArea=function(e){if(e.length<4)return 0;if(e[0].x!==e[e.length-1].x||e[0].y!==e[e.length-1].y)return 0;var n=s.setupEventQueueAndActiveEdges(e),t=n.events,r=n.activeEdges,a=t.peek();if(!a)return 0;for(var i,l=0,u=a.y,o=0;i=t.dequeue();){var c=i.y;c<u&&d.notify("PolygonArea: scanlineY jumped up vertically",{metaData:{points:e,scanlineY:c,lastScanlineY:u}}),o+=.5*(c-u)*(s.measureUpwardEvenOddLength(c,r)+l),s.processEvent(i,t,r),u=c,l=s.measureDownwardEvenOddLength(r)}return o},e.calculatePaintedNonZeroArea=function(e){if(e.length<4)return 0;if(e[0].x!==e[e.length-1].x||e[0].y!==e[e.length-1].y)return 0;var n=s.setupEventQueueAndActiveEdges(e),t=n.events,r=n.activeEdges,a=t.peek();if(!a)return 0;for(var i,l=0,u=a.y,o=0;i=t.dequeue();){var c=i.y;c<u&&d.notify("PolygonArea: scanlineY jumped up vertically",{metaData:{points:e,scanlineY:c,lastScanlineY:u}}),o+=.5*(c-u)*(s.measureUpwardNonZeroLength(c,r)+l),s.processEvent(i,t,r),u=c,l=s.measureDownwardNonZeroLength(r)}return o}});
define('graphing/poicontroller',['require','jquery','core/math/distance','lib/rounding','core/types/graphmode','lib/conditional_blur','keys','lib/aria','core/lib/label','expressions/colors','graphing-calc/models/image','graphing-calc/models/expression','../geometry/math/polygon'],function(require){"use strict";var c=require("jquery"),D=require("core/math/distance"),f=require("lib/rounding"),B=require("core/types/graphmode"),s=require("lib/conditional_blur").default,p=require("keys"),r=require("lib/aria"),n=require("core/lib/label"),o=require("expressions/colors").getColorName,C=require("graphing-calc/models/image"),O=require("graphing-calc/models/expression"),l=require("../geometry/math/polygon"),i=0;function G(e,t){this.manager=e,this.controller=e.controller,this.graphSettings=t,this.$=this.manager.$,this.__id=i++,this.graphSettings.config.graphpaper&&!this.graphSettings.config.disableMouseInteractions&&(this.addTouchEventHandlers(),this.addHoverEventHandler(),this.addKeydownEventHandler(),this.addManualUnhoverListener())}return G.prototype.getExpressionModel=function(e){return this.controller.getItemModel(e)},G.prototype.remove=function(){this.removeAllGlobalMouseListeners(),this.removeManualUnhoverListener()},G.prototype.addGlobalMouseListener=function(e,t){for(var i=e.split(" "),a=0;a<i.length;a++)c(document).on(i[a]+".dcg-poiController-"+this.__id,t)},G.prototype.removeAllGlobalMouseListeners=function(){c(document).off(".dcg-poiController-"+this.__id)},G.prototype.getToleranceByDevice=function(e){return"touch"===e?20:10},G.prototype.addHoverEventHandler=function(){this.$.on("dcg-tapmove",function(e){var t,i,a,r,n,o,s,l;"touch"!==e.device&&(t=c(document.elementFromPoint(e.clientX,e.clientY)).closest(".dcg-grapher").length,i=this.manager.poiLabelsLayer,a=this.getMouseRelativeToGrapher(e),r=this.getToleranceByDevice(e.device),t&&(n=this.getFeatureUnderPoint(a,r)),n&&"movable-point"===n.type&&(o=n.poi.getMovablePoint().id),n&&n.isClickable&&(this.manager.movablePointsLayer.isMovingPoint()||this.manager.traceLayer.isTracing()||(s=n.model)),this.manager.clickableObjectsLayer.setHoveredId(s&&s.id),n&&"poi"===n.type&&(n.poi.isAttachedToPlottedPoint()&&!n.poi.hasInteractiveLabel()||(l=n.poi)),l!==i.getHoveredPOI()&&(this.controller.isTraceEnabled()?i.setHoveredPOI(l):i.setHoveredPOI(void 0),this.manager.redrawAllLayers()),this.manager.movablePointsLayer.setHoveredPointId(o))}.bind(this))},G.prototype.addManualUnhoverListener=function(){var e=function(){var e=this.manager;e.poiLabelsLayer.setHoveredPOI(void 0),e.clickableObjectsLayer.setHoveredId(void 0),e.redrawAllLayers()}.bind(this);c(window).on("blur.dcg-poiController-"+this.__id,e),this.$.on("mouseleave",e)},G.prototype.removeManualUnhoverListener=function(){c(window).off(".dcg-poiController-"+this.__id)},G.prototype.addTouchEventHandlers=function(){this.$.on("dblclick",function(e){var t=this.getMouseRelativeToGrapher(e),i=this.getToleranceByDevice(e.device);this.getFeatureUnderPoint(t,i)&&(e.preventDefault(),e.handle())}.bind(this)),this.$.on("touchstart",function(e){var t,i,a;this.graphSettings.config.lockViewport?(t=this.getMouseRelativeToGrapher(e.originalEvent),i=this.getToleranceByDevice(e.device),(a=this.getFeatureUnderPoint(t,i))&&("image"===a.type&&!a.model.selected||"sketch-branch"===a.type&&this.graphSettings.config.onlyTraceSelected&&!a.sketch.selected||e.preventDefault())):c(e.target).is(":not(input, textarea)")&&e.preventDefault()}.bind(this)),this.$.on("dcg-tapstart",function(e){var a=this.getMouseRelativeToGrapher(e),r=this.getToleranceByDevice(e.device),t=this.getFeatureUnderPoint(a,r);if(t&&t.isClickable?this.manager.clickableObjectsLayer.setPressedId(t.model.id):this.manager.clickableObjectsLayer.setPressedId(void 0),t&&"editable-label"===t.type)e.handle();else{if(s(),t&&"movable-point"===t.type)return this.controller.dispatch({type:"start-moving-point",pointInfo:t.poi.getMovablePoint()}),this.startMovingPoint(t.poi),e.handle(),void e.handle("do-not-clear-poi-labels");if(this._togglePOIUnderPoint(a,r))return e.handle(),void e.handle("do-not-clear-poi-labels");if(t&&"sketch-branch"===t.type&&!t.isClickable){if(!this.graphSettings.config.onlyTraceSelected){var i=!this.controller.isTraceEnabled(),n=!this.controller.isListEnabled();if(i&&n)return;if(this.controller.dispatch({type:"set-selected-id",id:t.sketch.id}),i)return;return this.startTracingBranch(t.branchInfo,a),e.handle(),void e.handle("do-not-clear-poi-labels")}if(t.sketch.selected)return this.startTracingBranch(t.branchInfo,a),e.handle(),void e.handle("do-not-clear-poi-labels")}t&&"image"===t.type||this.controller.dispatch({type:"set-none-selected"});var o=this;this.addGlobalMouseListener("dcg-tapmove",function(e){this.manager.clickableObjectsLayer.isAnObjectPressed()?a=this.getMouseRelativeToGrapher(e):o.removeAllGlobalMouseListeners()}.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",function(e){o.removeAllGlobalMouseListeners();var t=this.manager.clickableObjectsLayer.getPressedId();this.manager.clickableObjectsLayer.setPressedId(void 0);var i=this.getFeatureUnderPoint(a,r);i&&i.isClickable?i.model.id===t&&this.controller.dispatch({type:"clickable-item-clicked",id:i.model.id}):(i&&"sketch-branch"===i.type&&!i.sketch.selected||i&&"image"===i.type)&&this.controller.dispatch({type:"set-selected-id",id:i.model.id})}.bind(this))}}.bind(this))},G.prototype.addKeydownEventHandler=function(){this.$.on("keydown",function(e){var t,i,a=this.manager.movablePointsLayer.getFocusedPoint();a&&(t=p.lookup(e),i=p.lookupChar(e),"Up"===t||"Down"===t||"Left"===t||"Right"===t?(e.stopPropagation(),e.preventDefault(),this.movePointFromKeyboard(a,e)):"X"!==i&&"Y"!==i&&"L"!==i&&"C"!==i||this.speakPoint(a,i))}.bind(this))},G.prototype.getMouseRelativeToGrapher=function(e){var t=this.$[0].getBoundingClientRect(),i=e.touches?e.touches[0]:e;return{x:i.clientX-t.left,y:i.clientY-t.top}},G.prototype._getClosestPoint=function(e,t,i){for(var a=i,r=null,n=this.manager.getProjection(),o=0;o<e.length;o++){var s=e[o],l=n.map_pt(s),c=D.hypot(l.x-t.x,l.y-t.y);c<a&&(a=c,r=s)}return r},G.prototype.getFeatureUnderPoint=function(e,t){var i=this.manager.poiLabelsLayer,a=this.manager.getProjection(),r=a.reverse_map_pt(e);if(!this.manager.scaleAxis){var n=i.getEditableLabelUnderPoint(e);if(n)return{type:"editable-label",model:n};for(var o,s=this.manager.__sketchOrder,l={},c=1,h=s.length-1;0<=h;h--){var d=s[h],p=this.controller.getItemModel(d),g=c;if(l[d]=g,p)if("expression"===p.type){var v=this.manager.getGraphSketch(d);if(!v||!v.visible)continue;var u=v.branches;if(!u||!u.length)continue;if(v.showHighlight&&(g=-1/0,l[d]=g),!o||o.stackingContext>=g)for(var m=O.isClickableObject(p),b=0;b<u.length;b++){var f,y=G.calculateDistanceFromBranch(u[b],r,a,m);y<t&&(f=!1,(!o||g<o.stackingContext||g===o.stackingContext&&y<o.distance)&&(f=!0),f&&(o={type:"sketch-branch",model:p,sketch:v,distance:y,stackingContext:g,branchInfo:{id:v.id,branch:b,sketch:v}}))}}else if("image"===p.type){var P=this.manager.getGraphImage(d);if(!P||!this.isImageUnderMouse(P,r,t))continue;P.foreground?(g=c+=1,l[d]=g,c+=1):(g=1/0,l[d]=g),(!o||o.stackingContext>g)&&(o={type:"image",model:P,distance:0,stackingContext:g})}}var L=[],k=[],M=[],I=o?o.stackingContext:1/0;this.manager.poiDotsLayer.getDrawnPOI().forEach(function(e){e.isBareLabel()||(e.isMovable()?L.push(e):e.isAttachedToPlottedPoint()?l[e.sketch.id]<=I&&k.push(e):M.push(e))});var x=this._getClosestPoint(L,e,t);if(x)return{type:"movable-point",poi:x};var T=this._getClosestPoint(M,e,t);if(T)return{type:"poi",poi:T};var _=this._getClosestPoint(k,e,t);if(_){var w=this.controller.getItemModel(_.sketch.id);if(w&&"expression"===w.type)if(O.isClickableObject(w))return{type:"poi",poi:_,isClickable:!0,model:w};return{type:"poi",poi:_}}return o?"sketch-branch"===o.type?{type:"sketch-branch",branchInfo:o.branchInfo,sketch:o.sketch,model:o.model,isClickable:O.isClickableObject(o.model)}:{type:"image",model:o.model,isClickable:C.isClickableObject(o.model)}:void 0}},G.prototype._togglePOIUnderPoint=function(e,t){if(this.controller.isTraceEnabled()){var i=this.getFeatureUnderPoint(e,t);if(!i)return!1;if(i.isClickable)return!1;var a=i.poi;return a?!a.isBareLabel()&&(this.manager.poiLabelsLayer.isOpenPOI(a)?(this.manager.poiLabelsLayer.closePOI(a),this.manager.poiLabelsLayer.setHoveredPOI(void 0)):(this.manager.poiLabelsLayer.openPOI(a),this.speakPoint(a)),this.manager.redrawAllLayers(),!0):!1}},G.prototype.isImageUnderMouse=function(e,t,i){if(!e)return!1;var a=e.formula;if(!a)return!1;var r=a.dimensions;if(!r.x||!r.y||!r.width||!r.height||e.hidden||this.controller.isItemSecret(e.id))return!1;for(var n=0;n<r.x.length;n++){var o=r.x[n],s=r.y[n],l=r.radianAngle[n],c=o+Math.cos(l)*(t.x-o)-Math.sin(l)*(t.y-s),h=s+Math.sin(l)*(t.x-o)+Math.cos(l)*(t.y-s),d=.5*Math.abs(r.width[n]),p=.5*Math.abs(r.height[n]);if(o-d<c&&c<o+d&&s-p<h&&h<s+p)return!0}return!1},G.calculateDistanceFromBranch=function(e,t,i,a){if(e&&e.graphMode===B.POLYGONFILL&&a){for(var r=e.segments,n=0;n<r.length;n++)if(l.pointIsWithinNonZeroFill(r[n],t))return 0;return 1/0}var o=G.getBranchesDistanceInfo(e,t,i,a);return o?o.minDistance:1/0},G.getBranchesDistanceInfo=function(e,t,i,a){var r=i.screen.width/(i.viewport.xmax-i.viewport.xmin),n=i.screen.height/(i.viewport.ymax-i.viewport.ymin),o=t.x,s=t.y,l=!1,c=!1;switch(e.graphMode){case B.PARAMETRIC:case B.IMPLICIT:if(!a)return null;break;case B.POLAR:if(!a)return null;c=!0;break;case B.Y:break;case B.X:l=!0;var h=o,o=s,s=h,h=r,r=n,n=h;break;default:return null}for(var d,p,g=1/0,v=1/0,u=0;u<e.segments.length;u++)for(var m=e.segments[u],b=0;b<m.length-3;b+=2){var f,y,P,L,k=m[b],M=m[b+1],I=m[b+2],x=m[b+3];c&&(y=k,k=(f=M)*Math.cos(y),M=f*Math.sin(y),L=I,I=(P=x)*Math.cos(L),x=P*Math.sin(L));var T=D.closestPointOnSegment(0,0,(k-o)*r,(M-s)*n,(I-o)*r,(x-s)*n),_=D.hypot(T[0],T[1]);T[0]<0?_<g&&(g=_,d=T):_<v&&(v=_,p=T)}var w=g<v?d:p;if(!w)return null;var C=w[0]/r+o,O=w[1]/n+s;return{closestPoint:{x:l?O:C,y:l?C:O},minDistance:Math.min(g,v),secondDistance:Math.max(g,v)}},G.getBranchesTracePoint=function(e,t,i){if(e&&e.compiled&&e.compiled.fn){var a=e.compiled.fn,r=i.screen.width/(i.viewport.xmax-i.viewport.xmin),n=i.screen.height/(i.viewport.ymax-i.viewport.ymin),o=this.getBranchesDistanceInfo(e,t,i,!1);if(!o)return null;var s=o.minDistance/o.secondDistance;s*=s;var l=e.graphMode===B.Y?"x":"y",c=o.closestPoint[l]*(1-s)+t[l]*s,h=1/(2*r),d=1/(2*n),p=a(c-h),g=a(c),v=a(c+h),u=h*Math.min(1,d/Math.abs(p-g)),m=h*Math.min(1,d/Math.abs(v-g));isFinite(u)||(u=h),isFinite(m)||(m=h),c=f.shortestDecimalBetween(c-u,c+m);var b=G.fillHole(a,c,r,n,t.x,t.y);return{x:e.graphMode===B.Y?c:b,y:e.graphMode===B.Y?b:c}}},G.prototype.startMovingPoint=function(r){var n=!1;this.manager.movablePointsLayer.setPressedPointId(r.isMovable()?r.getMovablePoint().id:void 0);var i=null,o=function(){var e,t;i&&(n=!0,e=this.manager.getProjection(),t=this.getMouseRelativeToGrapher(i),i=null,this.controller.dispatch({type:"on-move-point",pointInfo:r.getMovablePoint(),screenPt:t,projection:e}))}.bind(this);this.manager.registerMovablePointListener(o),this.addGlobalMouseListener("dcg-tapmove",function(e){i=e}),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",function(e){var t,i,a;o(),this.manager.deregisterMovablePointListener(),this.removeAllGlobalMouseListeners(),this.manager.movablePointsLayer.setPressedPointId(void 0),this.controller.dispatch({type:"stop-moving-point",pointInfo:r.getMovablePoint()}),n||(t=this.manager.getProjection(),i=this.getToleranceByDevice(e.device),a=t.map_pt(r),this._togglePOIUnderPoint(a,i))}.bind(this))},G.prototype.startTracingBranch=function(e,t){this.manager.markLabelsDirty(),this.last_screen_pt=t;var i=this.manager.getProjection(),a=i.reverse_map_pt(t),r=e.sketch.branches[e.branch],n=G.getBranchesTracePoint(r,a,i);n&&this.speakPoint(n),this.manager.traceLayer.setTraceInfo({pt:n,branchInfo:e}),this.manager.redrawAllLayers(),this.addGlobalMouseListener("dcg-tapmove",this.handleTraceUpdate.bind(this)),this.addGlobalMouseListener("dcg-tapend dcg-tapcancel",this.stopTracingBranch.bind(this))},G.prototype.stopTracingBranch=function(e){this.manager.markLabelsDirty();var t=this.manager.poiLabelsLayer.getHoveredPOI();t&&!this.manager.poiLabelsLayer.isOpenPOI(t)&&(this.manager.poiLabelsLayer.openPOI(t),this.speakPoint(t),this.manager.redrawAllLayers()),this.last_screen_pt=null,this.manager.traceLayer.setTraceInfo(void 0),this.manager.redrawAllLayers(),this.removeAllGlobalMouseListeners()},G.prototype.handleTraceUpdate=function(e){if(this.manager.traceLayer.traceInfo){var t,i=this.manager.getProjection();if(e)t=this.getMouseRelativeToGrapher(e),this.last_screen_pt=t,this.manager.markLabelsDirty();else{if(!this.last_screen_pt)return;t=this.last_screen_pt}var a=i.reverse_map_pt(t),r=1/0,n=-1,o=this.manager.traceLayer.traceInfo,s=this.manager.graphSketches[o.branchInfo.sketch.id];if(s){o.branchInfo.sketch=s;for(var l=o.branchInfo.sketch.branches,c=0;c<l.length;c++){var h=G.calculateDistanceFromBranch(l[c],a,i,!1);h<r&&(n=c,r=h)}var d=l[n],p=d?G.getBranchesTracePoint(d,a,i):null;p&&this.speakPoint(p),this.manager.traceLayer.traceInfo.branchInfo.branch=n,this.manager.traceLayer.traceInfo.pt=p,this.manager.redrawAllLayers()}}},G.prototype.speakPoint=function(e){var t=this.manager.getAudioTrace();t&&e&&t.queueCoordinates(e,void 0,!0)},G.fillHole=function(e,t,i,a,r,n){var o=e(t);if(isFinite(o))return o;var s=t-1e-11,l=t+1e-11,c=e(s),h=e(l);if(isNaN(c)&&isNaN(h))return NaN;if(isNaN(c))return h;if(isNaN(h))return c;var d=(r-s)*i,p=(r-l)*i,g=(n-c)*a,v=(n-h)*a;return D.hypot(d,g)<D.hypot(p,v)?c:h},G.prototype.hasNonlinearMoveStrategy=function(e){if(!e||!e.sketch)return!1;var t=this.getExpressionModel(e.sketch.id);if(!t||!t.formula)return!1;var i=t.formula.move_strategy;return!(!i||!i[0])&&"updateSliderNonlinear"===i[0].type},G.prototype.movePointFromKeyboard=function(e,t){var i,a,r,n,o,s,l,c,h,d;e&&t&&"movable-point"===e.type&&(a=(i=this.manager.getProjection()).map_pt({x:e.x,y:e.y}),n=r=0,o=t.shiftKey?10:2,s=t.shiftKey?"big":"","Up"===(c=p.lookup(t))?(l="y",n-=o,s+="up"):"Down"===c?(l="y",n+=o,s+="down"):"Left"===c?(l="x",r-=o,s+="down"):"Right"===c&&(l="x",r+=o,s+="up"),0===r&&0===n||(h={x:a.x+r,y:a.y+n},"x"===l||this.hasNonlinearMoveStrategy(e)?d=[s,""]:"y"===l&&(d=["",s]),this.controller.dispatch({type:"on-move-point",pointInfo:e,screenPt:h,projection:i,keyboardDirection:d})))},G.prototype.speakPoint=function(e,t){if(e&&this.manager.getAudioTrace()){var i=this.manager.getProjection();if(i){var a=i.viewport;switch(t){case"X":r.alert("X: "+n.value(e.x,a.xmax-a.xmin).ariaString);break;case"Y":r.alert("Y: "+n.value(e.y,a.ymax-a.ymin).ariaString);break;case"L":r.alert(e.ariaLabel||this.controller.s("graphing-calculator-narration-poi-graph-point"));break;case"C":r.alert(o(this.controller,e.sketch.color))}}}},G});
define('vendor/canvas2svg',[],function(){"use strict";var p,x,u,d,o;function g(t,e){for(var r=Object.keys(e),i=0;i<r.length;i++)t=t.replace(new RegExp("\\{"+r[i]+"\\}","gi"),e[r[i]]);return t}function h(t){var e,r,i;if(!t)throw new Error("cannot create a random attribute name for an undefined object");e="ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",r="";do{for(r="",i=0;i<12;i++)r+=e[Math.floor(Math.random()*e.length)]}while(t[r]);return r}o=function(t,e){var r,i,s,n={};for(t=t.split(","),e=e||10,r=0;r<t.length;r+=2)i="&"+t[r+1]+";",s=parseInt(t[r],e),n[i]="&#"+s+";";return n["\\xa0"]="&#160;",n}("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),p={strokeStyle:{svgAttr:"stroke",canvas:"#000000",svg:"none",apply:"stroke"},fillStyle:{svgAttr:"fill",canvas:"#000000",svg:null,apply:"fill"},lineCap:{svgAttr:"stroke-linecap",canvas:"butt",svg:"butt",apply:"stroke"},lineJoin:{svgAttr:"stroke-linejoin",canvas:"miter",svg:"miter",apply:"stroke"},miterLimit:{svgAttr:"stroke-miterlimit",canvas:10,svg:4,apply:"stroke"},lineWidth:{svgAttr:"stroke-width",canvas:1,svg:1,apply:"stroke"},globalAlpha:{svgAttr:"opacity",canvas:1,svg:1,apply:"fill stroke"},font:{canvas:"10px sans-serif"},shadowColor:{canvas:"#000000"},shadowOffsetX:{canvas:0},shadowOffsetY:{canvas:0},shadowBlur:{canvas:0},textAlign:{canvas:"start"},textBaseline:{canvas:"alphabetic"},lineDash:{svgAttr:"stroke-dasharray",canvas:[],svg:null,apply:"stroke"}},(u=function(t,e){this.__root=t,this.__ctx=e}).prototype.addColorStop=function(t,e){var r,i=this.__ctx.__createElement("stop");i.setAttribute("offset",t),-1!==e.indexOf("rgba")?(r=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(e),i.setAttribute("stop-color",g("rgb({r},{g},{b})",{r:r[1],g:r[2],b:r[3]})),i.setAttribute("stop-opacity",r[4])):i.setAttribute("stop-color",e),this.__root.appendChild(i)},d=function(t,e){this.__root=t,this.__ctx=e},(x=function(t){var e,r={width:500,height:500,enableMirroring:!1};if(1<arguments.length?((e=r).width=t,e.height=arguments[1]):e=t||r,!(this instanceof x))return new x(e);this._randomPostfix="-"+"xxxxxxxx".replace(/x/g,function(t){return(16*Math.random()|0).toString(16)}),this._svgClassNames=[],this.width=e.width||r.width,this.height=e.height||r.height,this.enableMirroring=void 0!==e.enableMirroring?e.enableMirroring:r.enableMirroring,(this.canvas=this).__document=e.document||document,e.ctx?this.__ctx=e.ctx:(this.__canvas=this.__document.createElement("canvas"),this.__ctx=this.__canvas.getContext("2d")),this.__setDefaultStyles(),this.__stack=[this.__getStyleState()],this.__groupStack=[],this.__root=this.__document.createElementNS("http://www.w3.org/2000/svg","svg"),this.__root.setAttribute("version",1.1),this.__root.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.__root.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),this.__root.setAttribute("width",this.width),this.__root.setAttribute("height",this.height),this.__ids={},this.__defs=this.__document.createElementNS("http://www.w3.org/2000/svg","defs"),this.__root.appendChild(this.__defs),this.__currentElement=this.__document.createElementNS("http://www.w3.org/2000/svg","g"),this.__root.appendChild(this.__currentElement)}).prototype.__createElement=function(t,e,r){void 0===e&&(e={});var i,s,n=this.__document.createElementNS("http://www.w3.org/2000/svg",t),a=Object.keys(e);for(r&&(n.setAttribute("fill","none"),n.setAttribute("stroke","none")),i=0;i<a.length;i++)s=a[i],n.setAttribute(s,e[s]);var o=this._svgClassNames&&this._svgClassNames[this._svgClassNames.length-1];return o&&n.setAttribute("class",o),n},x.prototype.__setDefaultStyles=function(){for(var t,e=Object.keys(p),r=0;r<e.length;r++)this[t=e[r]]=p[t].canvas},x.prototype.__applyStyleState=function(t){for(var e,r=Object.keys(t),i=0;i<r.length;i++)this[e=r[i]]=t[e]},x.prototype.__getStyleState=function(){for(var t,e={},r=Object.keys(p),i=0;i<r.length;i++)e[t=r[i]]=this[t];return e},x.prototype.__applyStyleToCurrentElement=function(e){var t=this.__currentElement,r=this.__currentElementsToStyle;r&&(t.setAttribute(e,""),t=r.element,r.children.forEach(function(t){t.setAttribute(e,"")}));for(var i,s,n,a,o=Object.keys(p),h=0;h<o.length;h++)if(i=p[o[h]],s=this[o[h]],i.apply)if(s instanceof d){if(s.__ctx)for(;s.__ctx.__defs.childNodes.length;)n=s.__ctx.__defs.childNodes[0].getAttribute("id"),this.__ids[n]=n,this.__defs.appendChild(s.__ctx.__defs.childNodes[0]);t.setAttribute(i.apply,g("url(#{id})",{id:s.__root.getAttribute("id")}))}else if(s instanceof u)t.setAttribute(i.apply,g("url(#{id})",{id:s.__root.getAttribute("id")}));else if(-1!==i.apply.indexOf(e)&&i.svg!==s)if("stroke"!==i.svgAttr&&"fill"!==i.svgAttr||-1===s.indexOf("rgba")){var l=i.svgAttr;if("globalAlpha"===o[h]&&(l=e+"-"+i.svgAttr,t.getAttribute(l)))continue;t.setAttribute(l,s)}else{a=/rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?\.?\d*)\s*\)/gi.exec(s),t.setAttribute(i.svgAttr,g("rgb({r},{g},{b})",{r:a[1],g:a[2],b:a[3]}));var c=a[4],_=this.globalAlpha;null!=_&&(c*=_),t.setAttribute(i.svgAttr+"-opacity",c)}},x.prototype.__closestGroupOrSvg=function(t){return"g"===(t=t||this.__currentElement).nodeName||"svg"===t.nodeName?t:this.__closestGroupOrSvg(t.parentNode)},x.prototype.getSerializedSvg=function(t){var e,r,i,s,n,a=(new XMLSerializer).serializeToString(this.__root);if(/xmlns="http:\/\/www\.w3\.org\/2000\/svg".+xmlns="http:\/\/www\.w3\.org\/2000\/svg/gi.test(a)&&(a=a.replace('xmlns="http://www.w3.org/2000/svg','xmlns:xlink="http://www.w3.org/1999/xlink')),t)for(e=Object.keys(o),r=0;r<e.length;r++)i=e[r],s=o[i],(n=new RegExp(i,"gi")).test(a)&&(a=a.replace(n,s));return a},x.prototype.getSvg=function(){return this.__root},x.prototype._dcgStartNamedGroup=function(t){var e=this.__createElement("g");e.setAttribute("id",t+this._randomPostfix);var r=this.__closestGroupOrSvg();this.__groupStack.push(r),r.appendChild(e),this.__currentElement=e},x.prototype._dcgEndNamedGroup=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElement||(this.__currentElement=this.__root.childNodes[1])},x.prototype._dcgSaveClassName=function(t){this._svgClassNames.push(t),this.__currentElement&&"path"===this.__currentElement.tagName&&!this.__currentDefaultPath&&(this.__currentElement.getAttribute("class")||this.__currentElement.setAttribute("class",t))},x.prototype._dcgRestoreClassName=function(){this._svgClassNames.pop()},x.prototype.save=function(){var t=this.__createElement("g"),e=this.__closestGroupOrSvg();this.__groupStack.push(e),e.appendChild(t),this.__currentElement=t,this.__stack.push(this.__getStyleState())},x.prototype.restore=function(){this.__currentElement=this.__groupStack.pop(),this.__currentElementsToStyle=null,this.__currentElement||(this.__currentElement=this.__root.childNodes[1]);var t=this.__stack.pop();this.__applyStyleState(t)},x.prototype.__addTransform=function(t){var e,r=this.__closestGroupOrSvg();0<r.childNodes.length&&("path"===this.__currentElement.nodeName&&(this.__currentElementsToStyle||(this.__currentElementsToStyle={element:r,children:[]}),this.__currentElementsToStyle.children.push(this.__currentElement),this.__applyCurrentDefaultPath()),e=this.__createElement("g"),r.appendChild(e),this.__currentElement=e);var i=this.__currentElement.getAttribute("transform");i?i+=" ":i="",i+=t,this.__currentElement.setAttribute("transform",i)},x.prototype.scale=function(t,e){void 0===e&&(e=t),this.__addTransform(g("scale({x},{y})",{x:t,y:e}))},x.prototype.rotate=function(t){var e=180*t/Math.PI;this.__addTransform(g("rotate({angle},{cx},{cy})",{angle:e,cx:0,cy:0}))},x.prototype.translate=function(t,e){this.__addTransform(g("translate({x},{y})",{x:t,y:e}))},x.prototype.transform=function(t,e,r,i,s,n){this.__addTransform(g("matrix({a},{b},{c},{d},{e},{f})",{a:t,b:e,c:r,d:i,e:s,f:n}))},x.prototype.beginPath=function(){var t;this.__currentDefaultPath="",this.__currentPosition={},t=this.__createElement("path",{},!0),this.__closestGroupOrSvg().appendChild(t),this.__currentElement=t},x.prototype.__applyCurrentDefaultPath=function(){var t=this.__currentElement;"path"===t.nodeName?t.setAttribute("d",this.__currentDefaultPath):console.error("Attempted to apply path command to node",t.nodeName)},x.prototype.__addPathCommand=function(t){this.__currentDefaultPath+=" ",this.__currentDefaultPath+=t},x.prototype.moveTo=function(t,e){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.__currentPosition={x:t,y:e},this.__addPathCommand(g("M {x} {y}",{x:t,y:e}))},x.prototype.closePath=function(){this.__currentDefaultPath&&this.__addPathCommand("Z")},x.prototype.lineTo=function(t,e){this.__currentPosition={x:t,y:e},-1<this.__currentDefaultPath.indexOf("M")?this.__addPathCommand(g("L {x} {y}",{x:t,y:e})):this.__addPathCommand(g("M {x} {y}",{x:t,y:e}))},x.prototype.bezierCurveTo=function(t,e,r,i,s,n){this.__currentPosition={x:s,y:n},this.__addPathCommand(g("C {cp1x} {cp1y} {cp2x} {cp2y} {x} {y}",{cp1x:t,cp1y:e,cp2x:r,cp2y:i,x:s,y:n}))},x.prototype.quadraticCurveTo=function(t,e,r,i){this.__currentPosition={x:r,y:i},this.__addPathCommand(g("Q {cpx} {cpy} {x} {y}",{cpx:t,cpy:e,x:r,y:i}))};function w(t){var e=Math.sqrt(t[0]*t[0]+t[1]*t[1]);return[t[0]/e,t[1]/e]}return x.prototype.arcTo=function(t,e,r,i,s){var n,a,o,h,l,c,_,p,u,d,g,m,f,y=this.__currentPosition&&this.__currentPosition.x,v=this.__currentPosition&&this.__currentPosition.y;if(void 0!==y&&void 0!==v){if(s<0)throw new Error("IndexSizeError: The radius provided ("+s+") is negative.");y===t&&v===e||t===r&&e===i||0===s?this.lineTo(t,e):(n=w([y-t,v-e]),a=w([r-t,i-e]),n[0]*a[1]!=n[1]*a[0]?(o=n[0]*a[0]+n[1]*a[1],h=Math.acos(Math.abs(o)),l=w([n[0]+a[0],n[1]+a[1]]),_=t+(c=s/Math.sin(h/2))*l[0],p=e+c*l[1],u=[-n[1],n[0]],d=[a[1],-a[0]],m=(g=function(t){var e=t[0];return 0<=t[1]?Math.acos(e):-Math.acos(e)})(u),f=g(d),this.lineTo(_+u[0]*s,p+u[1]*s),this.arc(_,p,s,m,f)):this.lineTo(t,e))}},x.prototype.stroke=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","fill stroke markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("stroke")},x.prototype.fill=function(){"path"===this.__currentElement.nodeName&&this.__currentElement.setAttribute("paint-order","stroke fill markers"),this.__applyCurrentDefaultPath(),this.__applyStyleToCurrentElement("fill")},x.prototype.rect=function(t,e,r,i){"path"!==this.__currentElement.nodeName&&this.beginPath(),this.moveTo(t,e),this.lineTo(t+r,e),this.lineTo(t+r,e+i),this.lineTo(t,e+i),this.lineTo(t,e),this.closePath()},x.prototype.fillRect=function(t,e,r,i){var s=this.__createElement("rect",{x:t,y:e,width:r,height:i},!0);this.__closestGroupOrSvg().appendChild(s),this.__currentElement=s,this.__applyStyleToCurrentElement("fill")},x.prototype.strokeRect=function(t,e,r,i){var s=this.__createElement("rect",{x:t,y:e,width:r,height:i},!0);this.__closestGroupOrSvg().appendChild(s),this.__currentElement=s,this.__applyStyleToCurrentElement("stroke")},x.prototype.__clearCanvas=function(){for(var t=this.__closestGroupOrSvg().getAttribute("transform"),e=this.__root.childNodes[1],r=e.childNodes,i=r.length-1;0<=i;i--)r[i]&&e.removeChild(r[i]);this.__currentElement=e,this.__groupStack=[],t&&this.__addTransform(t)},x.prototype.clearRect=function(t,e,r,i){var s,n;0!==t||0!==e||r!==this.width||i!==this.height?(s=this.__closestGroupOrSvg(),n=this.__createElement("rect",{x:t,y:e,width:r,height:i,fill:"#FFFFFF"},!0),s.appendChild(n)):this.__clearCanvas()},x.prototype.createLinearGradient=function(t,e,r,i){var s=this.__createElement("linearGradient",{id:h(this.__ids),x1:t+"px",x2:r+"px",y1:e+"px",y2:i+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(s),new u(s,this)},x.prototype.createRadialGradient=function(t,e,r,i,s,n){var a=this.__createElement("radialGradient",{id:h(this.__ids),cx:i+"px",cy:s+"px",r:n+"px",fx:t+"px",fy:e+"px",gradientUnits:"userSpaceOnUse"},!1);return this.__defs.appendChild(a),new u(a,this)},x.prototype.__parseFont=function(){var t=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-,\'\"\sa-z0-9]+?)\s*$/i.exec(this.font),e={style:t[1]||"normal",size:t[4]||"10px",family:t[6]||"sans-serif",weight:t[3]||"normal",decoration:t[2]||"normal",href:null};return"underline"===this.__fontUnderline&&(e.decoration="underline"),this.__fontHref&&(e.href=this.__fontHref),e},x.prototype.__wrapTextLink=function(t,e){if(t.href){var r=this.__createElement("a");return r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",t.href),r.appendChild(e),r}return e},x.prototype.__applyText=function(t,e,r,i){var s,n,a=this.__parseFont(),o=this.__closestGroupOrSvg(),h=this.__createElement("text",{"font-family":a.family,"font-size":a.size,"font-style":a.style,"font-weight":a.weight,"text-decoration":a.decoration,x:e,y:r,"text-anchor":(s=this.textAlign,(n={left:"start",right:"end",center:"middle",start:"start",end:"end"})[s]||n.start)},!0);h.appendChild(this.__document.createTextNode(t)),this.__currentElement=h,this.__applyStyleToCurrentElement(i),o.appendChild(this.__wrapTextLink(a,h))},x.prototype.fillText=function(t,e,r){this.__applyText(t,e,r,"fill")},x.prototype.strokeText=function(t,e,r){this.__applyText(t,e,r,"stroke")},x.prototype.measureText=function(t){return this.__ctx.font=this.font,this.__ctx.measureText(t)},x.prototype.arc=function(t,e,r,i,s,n){var a,o,h,l,c,_,p;i!==s&&((i%=2*Math.PI)===(s%=2*Math.PI)&&(s=(s+2*Math.PI-.001*(n?-1:1))%(2*Math.PI)),a=t+r*Math.cos(s),o=e+r*Math.sin(s),h=t+r*Math.cos(i),l=e+r*Math.sin(i),c=n?0:1,(p=s-i)<(_=0)&&(p+=2*Math.PI),_=n?p>Math.PI?0:1:p>Math.PI?1:0,this.lineTo(h,l),this.__addPathCommand(g("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:r,xAxisRotation:0,largeArcFlag:_,sweepFlag:c,endX:a,endY:o})),this.__currentPosition={x:a,y:o})},x.prototype.clip=function(){var t=this.__closestGroupOrSvg(),e=this.__createElement("clipPath"),r=h(this.__ids),i=this.__createElement("g");this.__applyCurrentDefaultPath(),t.removeChild(this.__currentElement),e.setAttribute("id",r),e.appendChild(this.__currentElement),this.__defs.appendChild(e),t.setAttribute("clip-path",g("url(#{id})",{id:r})),t.appendChild(i),this.__currentElement=i},x.prototype.drawImage=function(){var t,e,r,i,s,n,a,o,h,l,c,_,p=Array.prototype.slice.call(arguments),u=p[0],d=0,g=0;if(3===p.length)t=p[1],e=p[2],r=s=u.width,i=n=u.height;else if(5===p.length)t=p[1],e=p[2],r=p[3],i=p[4],s=u.width,n=u.height;else{if(9!==p.length)throw new Error("Invalid number of arguments passed to drawImage: "+arguments.length);d=p[1],g=p[2],s=p[3],n=p[4],t=p[5],e=p[6],r=p[7],i=p[8]}a=this.__closestGroupOrSvg(),this.__currentElement;var m,f,y,v="translate("+t+", "+e+")";if(u instanceof x){if((o=u.getSvg().cloneNode(!0)).childNodes&&1<o.childNodes.length){for(h=o.childNodes[0];h.childNodes.length;)_=h.childNodes[0].getAttribute("id"),this.__ids[_]=_,this.__defs.appendChild(h.childNodes[0]);(y=o.childNodes[1])&&(f=(m=y.getAttribute("transform"))?m+" "+v:v,y.setAttribute("transform",f),a.appendChild(y))}}else"CANVAS"!==u.nodeName&&"IMG"!==u.nodeName||((l=this.__createElement("image")).setAttribute("width",r),l.setAttribute("height",i),l.setAttribute("opacity",this.globalAlpha),l.setAttribute("preserveAspectRatio","none"),(d||g||s!==u.width||n!==u.height)&&((c=this.__document.createElement("canvas")).width=r,c.height=i,c.getContext("2d").drawImage(u,d,g,s,n,0,0,r,i),u=c),l.setAttribute("transform",v),l.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===u.nodeName?u.toDataURL():u.getAttribute("src")),a.appendChild(l))},x.prototype.createPattern=function(t,e){var r,i=this.__document.createElementNS("http://www.w3.org/2000/svg","pattern"),s=h(this.__ids);return i.setAttribute("id",s),i.setAttribute("width",t.width),i.setAttribute("height",t.height),"CANVAS"===t.nodeName||"IMG"===t.nodeName?((r=this.__document.createElementNS("http://www.w3.org/2000/svg","image")).setAttribute("width",t.width),r.setAttribute("height",t.height),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href","CANVAS"===t.nodeName?t.toDataURL():t.getAttribute("src")),i.appendChild(r),this.__defs.appendChild(i)):t instanceof x&&(i.appendChild(t.__root.childNodes[1]),this.__defs.appendChild(i)),new d(i,this)},x.prototype.setLineDash=function(t){t&&0<t.length?this.lineDash=t.join(","):this.lineDash=null},x.prototype.ellipse=function(t,e,r,i,s,n,a,o){var h,l,c,_,p,u,d;n!==a&&((n%=2*Math.PI)===(a%=2*Math.PI)&&(a=(a+2*Math.PI-.001*(o?-1:1))%(2*Math.PI)),h=t+Math.cos(-s)*r*Math.cos(a)+Math.sin(-s)*i*Math.sin(a),l=e-Math.sin(-s)*r*Math.cos(a)+Math.cos(-s)*i*Math.sin(a),c=t+Math.cos(-s)*r*Math.cos(n)+Math.sin(-s)*i*Math.sin(n),_=e-Math.sin(-s)*r*Math.cos(n)+Math.cos(-s)*i*Math.sin(n),p=o?0:1,(d=a-n)<(u=0)&&(d+=2*Math.PI),u=o?d>Math.PI?0:1:d>Math.PI?1:0,this.lineTo(c,_),this.__addPathCommand(g("A {rx} {ry} {xAxisRotation} {largeArcFlag} {sweepFlag} {endX} {endY}",{rx:r,ry:i,xAxisRotation:s*(180/Math.PI),largeArcFlag:u,sweepFlag:p,endX:h,endY:l})),this.__currentPosition={x:h,y:l})},x.prototype._dcgSetTitle=function(t){var e,r=this.__currentElement,i=!1,s=r.getElementsByTagName("title");0<s.length?e=s[0]:(e=this.__document.createElementNS("http://www.w3.org/2000/svg","title"),i=!0),e.textContent=t,i&&r.appendChild(e)},x.prototype.drawFocusRing=function(){},x.prototype.createImageData=function(){},x.prototype.getImageData=function(){},x.prototype.putImageData=function(){},x.prototype.globalCompositeOperation=function(){},x.prototype.setTransform=function(){},x});
define('graphing/screen',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Screen=void 0;function i(e,i){this.width=e,this.height=i}e.Screen=i});
define('graphing/poi',["require","exports","core/math/poi-type","core/types/graphmode","core/types/point-opacity"],function(require,t,e,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.POI=void 0;var a=1,r=(s.prototype.getLabel=function(){var t=this.sketch&&this.sketch.branches[this.branch];return this.type===e.LABEL&&t&&"labels"in t&&t.labels&&t.labels[this.pointIdxOnBranch]||""},s.prototype.getGraphMode=function(){return this.sketch.branches[this.branch].graphMode},s.prototype.getCompiledFunction=function(){var t=this.sketch.branches[this.branch];if("compiled"in t&&t.compiled)return t.compiled.fn},s.prototype.isAttachedToPlottedPoint=function(){return this.type===e.DEFINITION||this.type===e.LABEL},s.prototype.isMovable=function(){return this.getGraphMode()===i.XYPOINT_MOVABLE},s.prototype.isPersistent=function(){return this.type===e.LABEL},s.prototype.getLabelSize=function(){var t=this.sketch&&this.sketch.branches[this.branch];if(this.type===e.LABEL&&t&&"labelSize"in t)return t.labelSize},s.prototype.getPointOpacity=function(){var t=this.sketch&&this.sketch.branches[this.branch];return t&&"pointOpacity"in t&&void 0!==t.pointOpacity?t.pointOpacity:this.isMovable()?1:n.DEFAULT},s.prototype.getVerticalLabel=function(){var t=this.sketch&&this.sketch.branches[this.branch];return!!(this.type===e.LABEL&&t&&"verticalLabel"in t)&&!!t.verticalLabel},s.prototype.getTextOutline=function(){if(this.hasEditableLabel())return!1;var t=this.sketch&&this.sketch.branches[this.branch];return!(this.type===e.LABEL&&t&&"suppressTextOutline"in t&&t.suppressTextOutline)},s.prototype.hasInteractiveLabel=function(){var t=this.sketch&&this.sketch.branches[this.branch];return!!(t&&"interactiveLabel"in t)&&!!t.interactiveLabel},s.prototype.hasEditableLabel=function(){var t=this.sketch&&this.sketch.branches[this.branch];return!!(t&&"editableLabel"in t)&&!!t.editableLabel},s.prototype.isBareLabel=function(){return this.bareLabel},s.prototype.getMovablePoint=function(){return this.sketch.getMovablePointByIndex(this.pointIdxOnBranch)},s);function s(t,e,i,n,r,s,h){this.x=t,this.y=e,this.type=i,this.sketch=n,this.branch=r,this.pointIdxOnBranch=s,this.bareLabel=void 0!==h&&h,this.id=a++}t.POI=r});
define('graphing/graphsketch',["require","exports","core/math/poi-type","core/types/graphmode","./poi","core/math/poi-type","lib/mathspeak"],function(require,e,r,n,c,a,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphSketch=void 0;var t=(i.prototype.getPOI=function(){if(this.__cachedPOI)return this.__cachedPOI;this.__cachedPOI=[],this.__cachedPOIIds={};for(var e=0;e<this.branches.length;e++){var t,i,s=this.branches[e],h=s.poi;s.graphMode===n.X||s.graphMode===n.Y?(h.zeros&&this._pushPOI(h.zeros,e,r.ZERO),h.intercept&&this._pushPOI(h.intercept,e,r.INTERCEPT),h.extrema&&this._pushPOI(h.extrema,e,r.EXTREMUM),h.intersections&&this._pushPOI(h.intersections,e,r.INTERSECTION)):s.graphMode!==n.XYPOINT&&s.graphMode!==n.XYPOINT_MOVABLE||(s.graphMode,t=s.graphMode===n.XYPOINT&&!0===s.interactiveLabel,!0===s.showLabel||t?(i=s.nakedLabel,h.defined&&this._pushPOI(h.defined,e,r.LABEL,i)):h.defined&&this._pushPOI(h.defined,e,r.DEFINITION))}return this.__cachedPOI},i.prototype.getBranchPOI=function(t){return this.getPOI().filter(function(e){return e.branch===t})},i.prototype.getMovablePoints=function(){if(this.__cachedMovablePoints)return this.__cachedMovablePoints;this.__cachedMovablePoints=[];var e=this.branches[0];if(e&&1===e.segments.length&&e.graphMode===n.XYPOINT_MOVABLE)for(var t=e.segments[0],i=0;i<t.length;i++){var s=void 0;e.tableId&&(s={tableId:e.tableId,columnId:this.id,rowIndex:e.movablePointInfo[i].index,dragX:e.movablePointInfo[i].dragX,dragY:e.movablePointInfo[i].dragY});var h=e.scaleFactors?e.scaleFactors[0][i]:void 0,a=s?s.rowIndex:i,o=1===e.segments.length&&e.labels&&e.labels[i]?e.labels[i]:void 0,c=e.hasOwnProperty("pointOpacity")?e.pointOpacity:1;this.__cachedMovablePoints.push({type:"movable-point",id:"movable:["+this.id+","+a+"]",sketch:this,color:this.color,pointOpacity:c,tableInfo:s,scaleFactor:h,x:t[i][0],y:t[i][1],label:o,ariaLabel:o&&d.getMathspeakFromText(o)})}return this.__cachedMovablePoints},i.prototype.getMovablePointByIndex=function(e){return this.getMovablePoints()[e]},i.prototype.getStaticLabeledPoints=function(){var s=this;if(this.__cachedStaticLabeledPoints)return this.__cachedStaticLabeledPoints;var h=this.branches[0];return this.__cachedStaticLabeledPoints=[],this.getPOI().forEach(function(e){var t,i;e.type!==a.DEFINITION&&e.type!==a.LABEL||h.graphMode===n.XYPOINT&&(t=h.showLabel,i=h.labels&&h.labels[0],(t||i)&&s.__cachedStaticLabeledPoints.push({type:"static-labeled-point",id:"static["+s.id+","+e.id+"]",x:e.x,y:e.y,sketch:e.sketch,label:i,ariaLabel:i?d.getMathspeakFromText(i):void 0}))}),this.__cachedStaticLabeledPoints},i.prototype._pushPOI=function(e,t,i,s){void 0===s&&(s=!1);for(var h=0,a=e.x.length;h<a;h++){var o=new c.POI(e.x[h],e.y[h],i,this,t,h,s);e.intersects&&(o.intersects=e.intersects[h]),this.__cachedPOI.push(o),this.__cachedPOIIds[o.id]=o}},i.prototype.updateIntersections=function(e){for(var t=this,i=0,s=this.branches.length;i<s;i++)this.branches[i].poi.intersections=e[i];var h=this.__cachedPOI;for(this.__cachedPOI=[],h.forEach(function(e){e.type!==r.INTERSECTION?t.__cachedPOI.push(e):delete t.__cachedPOIIds[e.id]}),i=0;i<this.branches.length;i++){var a=this.branches[i],o=a.graphMode,c=a.poi;o!==n.X&&o!==n.Y||c.intersections&&this._pushPOI(c.intersections,i,r.INTERSECTION)}},i.prototype.getPOIById=function(e){return this.__cachedPOIIds[e]},i.prototype.updateFrom=function(e){if(e){this.visible=!0,this.showPOI=e.showPOI,this.showHighlight=e.showHighlight,this.selected=e.selected;var t=this.branches[0].graphMode;if(t===n.XYPOINT||t===n.XYPOINT_MOVABLE){for(var i=!0,s=0;s<this.__cachedPOI.length;s++){var h=e.__cachedPOI[s],a=this.__cachedPOI[s];if(!h||h.type!==a.type){i=!1;break}}if(i)for(s=0;s<this.__cachedPOI.length;s++)h=e.__cachedPOI[s],a=this.__cachedPOI[s],delete this.__cachedPOIIds[a.id],(this.__cachedPOIIds[h.id]=a).id=h.id}}},i);function i(e,t){var i=this;this.color="#000000",this.style="normal",this.visible=!0,this.showPOI=!1,this.showHighlight=!1,this.selected=!1,this.labels=[],this.id=e,this.branches=void 0!==t?t:[],this.getPOI().forEach(function(e){e.type===r.LABEL&&i.labels.push(e)})}e.GraphSketch=t});
define('graphing/canvas-braille',["require","exports","tslib","./projection","./screen","core/graphing-calc/json/graph-settings","abraham"],function(require,e,Ae,Re,Pe,Ie,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createBrailleImage=void 0;var g=10240;function Ee(e,t){for(var i=t.x,r=t.y,a=t.width,n=t.height,l=e.getImageData(i,r,a,n).data,o=3;o<l.length;o+=4)if(0!==l[o])return!1;return!0}function Ne(e,t,i,r,a){return Ee(t,qe(e,i,r,a))}function o(e,t,i,r,a){for(var n,l,o,h,s,c,f,d=3+2*e.dotSpacing,u=0;u<a.length;u++)n=e,l=t,o=i+d*u,h=r,s=a[u],f=c=void 0,c=1+n.dotSpacing,1&(f=s.charCodeAt(0)-g)&&l.fillRect(o,h,1,1),2&f&&l.fillRect(o,h+c,1,1),4&f&&l.fillRect(o,h+2*c,1,1),8&f&&l.fillRect(o+c,h,1,1),16&f&&l.fillRect(o+c,h+c,1,1),32&f&&l.fillRect(o+c,h+2*c,1,1)}function Ce(e,t){var i=e.dotSpacing;return(2+i)*t.length+(1+i)*(t.length-1)}function _e(e){return 3+2*e.dotSpacing}function qe(e,t,i,r){var a=e.cellPadding;return{x:t-a,y:i-a,width:Ce(e,r)+2*a,height:_e(e)+2*a}}function Oe(e,t){if(!e)return t;var i=Math.min(e.x,t.x),r=Math.min(e.y,t.y);return{x:i,y:r,width:Math.max(e.x+e.width,t.x+t.width)-i,height:Math.max(e.y+e.height,t.y+t.height)-r}}function n(e,t,i){return Math.min(Math.max(e,t),i)}function Le(e,t,i,r,a){return{x:n(i,0,t.canvas.width-Ce(e,a)),y:n(r,0,t.canvas.height-_e(e))}}function ke(e,t,i,r,a){var n=t.fillStyle;t.fillStyle="white";var l=qe(e,i,r,a);t.fillRect(l.x,l.y,l.width,l.height),t.fillStyle="black",o(e,t,i,r,a),t.fillStyle=n}function Be(e,t,i,r){var a=e.cellPadding;return{x:Math.round(t-(Ce(e,r)+a)),y:i}}function Te(e,t){var i="nemeth"===t?r.latexToNemeth(e):r.latexToUeb(e);return i.isError?"":i.value.replace(/\u283C(?!$)/g,"")}function y(e,t){return 0<=t?e*Math.pow(10,t):e/Math.pow(10,-t)}function l(e,t,i,r){var a=i[0],n=i[1],l=Math.ceil(Math.log(n-a)/Math.LN10)-1,o=l,h=5;e:for(var s=l;l-s<4;s--)for(var c=0,f=[5,2,1];c<f.length;c++){var d=f[c],u=y(d,s),g=Math.floor(a/u)+1,x=Math.ceil(n/u)-1,v=Math.abs(r(u)-r(0)),w=Te(String(y(g*d,s)),t),m=Te(String(y(x*d,s)),t);if(v<Ce(e,w)+Ce(e," ")||v<Ce(e,m)+Ce(e," "))break e;if(15<=x-g)break e;o=s,h=d}return{int:h,exp:o}}function h(e,t,i){return l(e,t,[i.viewport.xmin,i.viewport.xmax],function(e){return i.mapx(e)})}function s(e,t){for(var i=e.int,r=e.exp,a=t[0],n=t[1],l=Math.ceil(a/y(i,r)),o=Math.floor(n/y(i,r)),h=[],s=l;s<=o;s++)h.push(y(s*i,r));return h}function je(e,t,i){return{x:s(h(e,t,i),[i.viewport.xmin,i.viewport.xmax]),y:s((r=e,a=t,(n=i).viewport.isSquare(n.screen)?h(r,a,n):l(r,a,[n.viewport.ymin,n.viewport.ymax],function(e){return n.mapy(e)})),[i.viewport.ymin,i.viewport.ymax])};var r,a,n}function Ue(e){switch(e){case"vpmax8":case"vpmax11":return"rgb(145, 145, 145)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:throw new Error("Unexpected embosser model: "+e)}}function We(e){switch(e){case"vpmax8":case"vpmax11":return"rgb(219, 219, 219)";case"etc8":case"etc11":return"rgb(0, 0, 0)";default:throw new Error("Unexpected embosser model: "+e)}}function Fe(e,t,i,r,a,n){void 0===n&&(n=1);var l=e.fillStyle;e.fillStyle=t,e.fillRect(i-1,r,n,a-r),e.fillStyle=l}function De(e,t,i,r,a,n){void 0===n&&(n=1);var l=e.fillStyle;e.fillStyle=t,e.fillRect(r,i-1,a-r,n),e.fillStyle=l}e.createBrailleImage=function(e,t,i,r,a){var n,l,o;if(void 0!==i.margins&&void 0!==t){var h=function(e){{if("etc8"===e||"etc11"===e)return{dotSpacing:0,cellPadding:1,graphLineWidth:1.75,embossPatternInequalities:!0};if("vpmax8"===e||"vpmax11"===e)return{dotSpacing:1,cellPadding:2,graphLineWidth:1,embossPatternInequalities:!1};throw new Error("Unexpected embosser model "+e)}}(r),s=i.margins,c=Ae.__assign({},t.settings),f=c.showGrid&&function(e){{if("etc8"===e||"etc11"===e)return!1;if("vpmax8"===e||"vpmax11"===e)return!0;throw new Error("Unexpected embosser model "+e)}}(r),d=!!c.showXAxis,u=!!c.showYAxis,g=!!c.xAxisNumbers,x=c.xAxisArrowMode,v=!!c.yAxisNumbers,w=c.yAxisArrowMode,m=h.graphLineWidth,y={showGrid:!1,xAxisNumbers:!1,xAxisArrowMode:Ie.AxisArrowModes.NONE,yAxisNumbers:!1,yAxisArrowMode:Ie.AxisArrowModes.NONE,showXAxis:!1,showYAxis:!1,graphLineWidth:m,pointLineWidth:2.5,curveOpacity:1,globalCurveColor:"#000",disableFill:!0};for(var p in y)t.settings[p]=y[p];var b=e.width-s.right-s.left,M=e.height-s.top-s.bottom,S=new Pe.Screen(b,M),A=t.getProjection().viewport;t.settings.squareAxes&&(A=A.squareCrop(S));var R=new Re.Projection(S,A,t.settings),P=e.getContext("2d"),I=document.createElement("canvas");I.width=b,I.height=M;var E=I.getContext("2d"),N=document.createElement("canvas");N.width=b,N.height=M;var C=N.getContext("2d"),_=document.createElement("canvas");_.width=b,_.height=M;var q=_.getContext("2d"),O=document.createElement("canvas");O.width=b,O.height=M;var L=O.getContext("2d"),k=document.createElement("canvas");k.width=b,k.height=M;var B,T,j,U,W,F=k.getContext("2d");if(null!==P&&null!==L&&null!==E&&null!==q&&null!==F&&null!==C){t.settings.disableFill=!0,t.screenshotToCanvas(O,{width:b,height:M,targetPixelRatio:1,transparentBackground:!0}),t.settings.disableFill=!1,t.screenshotToCanvas(I,{width:b,height:M,targetPixelRatio:1,transparentBackground:!0}),P.fillStyle="white",P.fillRect(0,0,e.width,e.height);var D,G,H,X=Math.round(R.mapx(0)),Y=Math.round(R.mapy(0)),$=""!==c.xAxisLabel?c.xAxisLabel.replace(/ /g,"\\ "):"x",z=""!==c.yAxisLabel?c.yAxisLabel.replace(/ /g,"\\ "):"y";d&&R.coordsAreOnscreen(b-6,Y-8,0)&&ke(G=Ae.__assign(Ae.__assign({},h),{cellPadding:h.cellPadding+1}),F,be=(n=Le(G,E,be=(D=Be(G,be=b-2,Me=Y-(ae=2+2*_e(G)),ne=Te($,a))).x,Me=D.y,ne)).x,Me=n.y,ne),u&&R.coordsAreOnscreen(X+4,1,0)&&ke(G=Ae.__assign(Ae.__assign({},h),{cellPadding:h.cellPadding+1}),F,be=(H=Le(G,E,be=X+4,Me=1,ne=Te(z,a))).x,Me=H.y,ne);var J,K=je(h,a,R),Q=K.x,V=K.y;if(d){for(var Z,ee,te=void 0,ie=0,re=Q;ie<re.length;ie++){0===(fe=re[ie])&&u||(we=Math.round(R.mapx(fe)))<2||we>R.screen.width-2||g&&(Z=Ce(h,Te("-1",a))-Ce(h,Te("1",a)),Ne(h,L,be=(ee=Le(h,F,be=we-(fe<0?1+Z:1),Me=Y+4,ne=Te(""+fe,a))).x,Me=ee.y,ne)&&(ke(h,F,be,Me,ne),te=Oe(te,qe(h,be,Me,ne))))}h.embossPatternInequalities&&te&&(te=Oe(te,{x:0,y:Y,width:b,height:0}),q.fillStyle="white",q.fillRect(te.x,te.y,te.width,te.height))}if(u){for(var ae,ne,le,te=void 0,oe=0,he=V;oe<he.length;oe++){0===(ge=he[oe])&&d||(pe=Math.round(R.mapy(ge)))<2||pe>R.screen.height-2||(ae=-Math.ceil(_e(h)/2),v&&Ne(h,L,be=(l=Le(h,F,be=(le=Be(h,be=X-4,Me=pe+ae,ne=Te(""+ge,a))).x,Me=le.y,ne)).x,Me=l.y,ne)&&(ke(h,F,be,Me,ne),te=Oe(te,qe(h,be,Me,ne))))}h.embossPatternInequalities&&te&&(te=Oe(te,{x:X,y:0,width:0,height:M}),q.fillStyle="white",q.fillRect(te.x,te.y,te.width,te.height))}d&&u&&(be=(J=Be(h,be=X-2,Me=Y+2,ne=Te(g||v?"0":"o",a))).x,Me=J.y,R.coordsAreOnscreen(be,Me,0)&&Ne(h,L,be=(o=Le(h,F,be,Me,ne)).x,Me=o.y,ne)&&ke(h,F,be,Me,ne));for(var se=0,ce=Q;se<ce.length;se++){var fe=ce[se];(we=Math.round(R.mapx(fe)))<2||we>R.screen.width-2||u&&0===fe||f&&Fe(q,"white",we-1,0,M,3)}for(var de=0,ue=V;de<ue.length;de++){var ge=ue[de];(pe=Math.round(R.mapy(ge)))<2||pe>R.screen.height-2||d&&0===ge||f&&De(q,"white",pe-1,0,b,3)}d&&De(q,"white",Y-3,0,b,7),u&&Fe(q,"white",X-3,0,M,7);for(var xe=0,ve=Q;xe<ve.length;xe++){var we,fe=ve[xe];(we=Math.round(R.mapx(fe)))<2||we>R.screen.width-2||u&&0===fe||(f?Fe(q,We(r),we,0,M):d&&Fe(q,We(r),we,Y-3,Y+2))}for(var me=0,ye=V;me<ye.length;me++){var pe,ge=ye[me];(pe=Math.round(R.mapy(ge)))<2||pe>R.screen.height-2||d&&0===ge||(f?De(q,We(r),pe,0,b):u&&De(q,We(r),pe,X-3,X+2))}if(d&&De(q,Ue(r),Y,0,b),u&&Fe(q,Ue(r),X,0,M),w!==Ie.AxisArrowModes.NONE&&(function(e,t,i,r){var a=e.fillStyle;e.fillStyle=t;for(var n=-2;n<=2;n++)e.fillRect(i-1+n,r+Math.abs(n),1,1);e.fillStyle=a}(q,Ue(r),X,0),w===Ie.AxisArrowModes.BOTH&&function(e,t,i,r){var a=e.fillStyle;e.fillStyle=t;for(var n=-2;n<=2;n++)e.fillRect(i-1+n,r-Math.abs(n),1,1);e.fillStyle=a}(q,Ue(r),X,M-1)),x!==Ie.AxisArrowModes.NONE&&(function(e,t,i,r){var a=e.fillStyle;e.fillStyle=t;for(var n=-2;n<=2;n++)e.fillRect(i-Math.abs(n),r-1+n,1,1);e.fillStyle=a}(q,Ue(r),b-1,Y),x===Ie.AxisArrowModes.BOTH&&function(e,t,i,r){var a=e.fillStyle;e.fillStyle=t;for(var n=-2;n<=2;n++)e.fillRect(i+Math.abs(n),r-1+n,1,1);e.fillStyle=a}(q,Ue(r),0,Y)),h.embossPatternInequalities)for(var be=0;be<b;be+=6)for(var Me=0;Me<M;Me+=6){var Se={x:be,y:Me,width:3,height:3};(function(e,t){for(var i=t.x,r=t.y,a=t.width,n=t.height,l=e.getImageData(i,r,a,n).data,o=3;o<l.length;o+=4)if(0===l[o])return;return 1})(E,Se)&&Ee(q,Se)&&Ee(L,Se)&&Ee(F,Se)&&(T="black",j=be,U=Me,W=void 0,W=(B=C).fillStyle,B.fillStyle=T,B.fillRect(j+1,U,1,1),B.fillRect(j,U+1,1,1),B.fillRect(j+1,U+1,1,1),B.fillRect(j+2,U+1,1,1),B.fillRect(j+1,U+2,1,1),B.fillStyle=W)}h.embossPatternInequalities||P.drawImage(I,s.left,s.top),P.drawImage(_,s.left,s.top),P.drawImage(O,s.left,s.top),P.drawImage(k,s.left,s.top),h.embossPatternInequalities&&P.drawImage(N,s.left,s.top)}for(var p in y)t.settings[p]=c[p]}}});
define('graphing/braille-size-options',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.brailleSizes=void 0,e.brailleSizes={},e.brailleSizes.vpmax8={width:170,height:220,margins:{left:5,top:15,right:5,bottom:50},name:function(e){return e.s("graphing-calculator-label-braille-size-vpmax8")}},e.brailleSizes.vpmax11={width:230,height:220,margins:{left:15,top:15,right:5,bottom:5},name:function(e){return e.s("graphing-calculator-label-braille-size-vpmax11")}},e.brailleSizes.etc8={width:96,height:96,margins:{left:5,top:15,right:0,bottom:0},name:function(e){return e.s("graphing-calculator-label-braille-size-etc8")}},e.brailleSizes.etc11={width:132,height:134,margins:{left:10,top:15,right:5,bottom:5},name:function(e){return e.s("graphing-calculator-label-braille-size-etc11")}}});
define('graphing/movablepointslayer',["require","exports","tslib","dcgview","browser","core/lib/label","core/graphing-calc/json/expression","core/types/graphmode","lib/aria","./constants","jquery","underscore"],function(require,e,t,r,o,i,s,c,n,u,a,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCoordsString=void 0;var p,l=r.Components.For,h=(p=r.Class,t.__extends(v,p),v.prototype.init=function(){this.grapher=this.props.grapher(),this.renderedPointsIdOrder=[],this.renderedPoints={}},v.prototype.template=function(){var t=this;return r.createElement(l,{each:function(){return t.renderedPointsIdOrder}},r.createElement("div",{class:r.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:function(){return t.requestRedrawNextFrame()},onFocusout:function(){return t.requestRedrawNextFrame()},didMount:this.didMountRoot.bind(this)},function(e){return r.createElement("div",{class:t.const({"dcg-tabbable-point":!0,"dcg-movable-point":"movable"===t.renderedPoints[e].type}),style:function(){return{transform:t.getTransform(e)}},role:r.const("button"),"aria-roledescription":function(){return"movable"===t.renderedPoints[e].type?"movable point":"point"},"dcg-mp-id":t.const(e),tabindex:function(){return t.getTabIndex(e)},"aria-label":function(){return t.getAriaLabel(e)},"aria-hidden":t.bindFn(t.getAriaHidden)})}))},v.prototype.redraw=function(r,o,i){var e,n=this,t=this.grapher.graphSketches,a=this.renderedPoints;function s(e){var t=n.processPOI(r,o,e,a[e.id],i,d);t&&(n.renderedPoints[e.id]=t,n.renderedPointsIdOrder.push(e.id))}this.renderedPoints={},this.renderedPointsIdOrder=[];var d=this.getFocusedPointId();for(e in t){var p=t[e];p.visible&&(p.getMovablePoints().forEach(s),p.getStaticLabeledPoints().forEach(s))}var c=this.renderedPoints[this.hoveredPointId],l=this.renderedPoints[this.pressedPointId],h=c&&c.poi,u=l&&l.poi;h||this.setHoveredPointId(void 0),u||this.setPressedPointId(void 0);var v,g,m=u||h;m?(v="movable-point"===m.type&&m.tableInfo&&m.tableInfo.dragX,g="movable-point"===m.type&&m.tableInfo&&m.tableInfo.dragY,v&&g||!v&&!g?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point"):v?this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ew"):this.grapher.setLayerClass("movablePoints","dcg-mouse-over-movable-point-ns")):this.grapher.setLayerClass("movablePoints",void 0),this.update(),this.speakAriaAlert()},v.prototype._clampedOpacity=function(e){return e<0?0:1<e||!d.isFinite(e)?1:e},v.prototype.drawForScreenshot=function(r,o,i,n){var a=this,e=this.grapher.graphSketches;for(var t in e){var s,d,p=e[t];p.visible&&((s=p.branches[0]).graphMode===c.XYPOINT_MOVABLE&&(d=s.pointOpacity),p.getMovablePoints().forEach(function(e){var t={screenX:o.mapx(e.x),screenY:o.mapy(e.y),color:e.color,pointOpacity:d,animationPercent:0};a.drawMovablePointOnCtx(r,t,i,n)}))}},v.prototype.processPOI=function(e,t,r,o,i,n){var a=r.id,s=r.x,d=r.y,p=t.mapx(s),c=t.mapy(d),l=n===a,h=t.coordsAreOnscreen(p,c,u.OFFSCREEN_RENDER_MARGIN);if(h||l)return(o=o||("movable-point"===r.type?{type:"movable",id:a,pointOnScreen:h,poi:r,projection:t,screenX:screenX,screenY:screenY,color:r.color,pointOpacity:r.pointOpacity,pointIsHovered:!1,pointIsPressed:!1,lastHoverActionTime:0,animationPercent:0}:{type:"static",id:a,pointOnScreen:h,poi:r,projection:t,screenX:screenX,screenY:screenY})).pointOnScreen=h,o.poi=r,o.projection=t,o.screenX=p,o.screenY=c,"movable"===o.type&&(o.color=o.poi.color,o.pointOpacity=o.poi.pointOpacity,this.updateMovablePointAnimation(o),this.drawMovablePointOnCtx(e,o,i)),o},v.prototype.drawMovablePointOnCtx=function(e,t,r,o){var i=o||(this.grapher.settings.config.projectorMode?13.5:10.5),n=Array.isArray(t.color)?t.color[0]:t.color,a=t.screenX,s=t.screenY,d=t.animationPercent||0;r.push({left:a-i,right:a+i,top:s-i,bottom:s+i}),e.save();var p=e.globalAlpha,c=this._clampedOpacity(t.pointOpacity);e.fillStyle=n,e.globalAlpha=.35*c,e.beginPath(),e.moveTo(a+i,s),e.arc(a,s,i,0,2*Math.PI,!0),e.closePath(),e.fill(),e.globalAlpha=c,i*=.3+.7*d,e.beginPath(),e.moveTo(a+i,s),e.arc(a,s,i,0,2*Math.PI,!0),e.closePath(),e.fill(),e.globalAlpha=p,e.restore()},v.prototype.updateMovablePointAnimation=function(e){var t=Date.now(),r=e.id,o=this.hoveredPointId===r,i=this.pressedPointId===r;e.pointIsPressed=i,o!==e.pointIsHovered&&(e.pointIsHovered=o,e.lastHoverActionTime=t);var n=e.animationPercent||0,a=.004*(t-e.lastHoverActionTime);i?n=1:o?1<=(n+=a)?n=1:this.requestRedrawNextFrame():(n-=a)<=0?n=0:this.requestRedrawNextFrame(),e.animationPercent=n},v.prototype.getTransform=function(e){var t=this.renderedPoints[e];if(t)return o.translateRule(t.screenX,t.screenY)},v.prototype.getTabIndex=function(e){var t=this.renderedPoints[e];if(!t)return-1;var r=t.poi,o=this.grapher.controller.getItemEditableLabelMode(r.sketch.id),i="movable"===t.type||void 0===o||o===s.EditableLabelMode.None,n=this.grapher.settings,a=n.config.graphpaper&&n.config.enableTabindex;return i&&a?0:-1},v.prototype.getAriaHidden=function(){return!this.grapher.settings.config.graphpaper},v.prototype.getAriaLabel=function(e){var t=this.getAriaAlert({id:e,includeUsageInstructions:!1});return t&&t.completeMessage},v.prototype.speakAriaAlert=function(){var e=this.getFocusedPointId();if(e){var t=this.renderedPoints[e];if(!t||"static"===t.type)return}var r=this.getAriaAlert({id:e,lastAriaAlert:this.lastAriaAlert,includeUsageInstructions:!0});(this.lastAriaAlert=r)&&r.completeMessage&&n.alert(r.completeMessage)},v.prototype.getAriaAlert=function(e){var t=e.id,r=e.lastAriaAlert,o=e.includeUsageInstructions;if(t){var i=this.renderedPoints[t];if(i){r&&r.id!==t&&(r=void 0);var n=i.poi,a=i.pointOnScreen,s=i.projection;if(n&&s){var d=s.viewport;if(d){var p=r&&r.label,c=n.ariaLabel,l=p!==c,h=r&&r.coordX,u=r&&r.coordY,v=n.x,g=n.y,m=v!==h||g!==u,f=x(v,g,d)+".",b=this.grapher.controller,P=c||b.s("graphing-calculator-narration-movable-point-prefix"),y="movable-point"===n.type&&o?b.s("graphing-calculator-narration-movable-point-suffix-usage-instructions"):"",I=a?"":b.s("graphing-calculator-narration-movable-point-off-screen-prompt"),A=r?l?P+I:m?f+I:"":P+". "+f+y+I;return{id:t,coordX:v,coordY:g,label:c,completeMessage:A}}}}}},v.prototype.setHoveredPointId=function(e){e!==this.hoveredPointId&&(this.hoveredPointId=e,this.requestRedrawNextFrame())},v.prototype.isMovingPoint=function(){return!!this.pressedPointId},v.prototype.setPressedPointId=function(e){e!==this.pressedPointId&&(this.pressedPointId=e,this.requestRedrawNextFrame())},v.prototype.getFocusedPointId=function(){if(document.activeElement&&a.contains(this.rootNode,document.activeElement))return a(document.activeElement).attr("dcg-mp-id")},v.prototype.getFocusedPoint=function(){var e=this.getFocusedPointId();if(e){var t=this.renderedPoints[e];if(t)return t.poi}},v.prototype.didMountRoot=function(e){this.rootNode=e},v.prototype.requestRedrawNextFrame=function(){this.grapher.redrawAllLayers()},v);function v(){return null!==p&&p.apply(this,arguments)||this}function x(e,t,r){return"X: "+i.value(e,r.xmax-r.xmin).ariaString+". Y: "+i.value(t,r.ymax-r.ymin).ariaString}e.default=h,e.getCoordsString=x});
define('graphing/integral-image',["require","exports"],function(require,t){"use strict";function e(t,a,e){return Math.max(a,Math.min(e,t))}Object.defineProperty(t,"__esModule",{value:!0});var a=(i.prototype.getSumForValidRect=function(t){var a=t.left-1,e=t.right-1,i=t.top-1,o=t.bottom-1,r=this.imageData.width,h=this.imageData.data,f=h[a+i*r],g=h[e+i*r],m=h[a+o*r],n=h[e+o*r];return 0<=a&&0<=i?n-g-m+f:0<=a?n-m:0<=i?n-g:n},i.prototype.getSum=function(t){var a={left:e(Math.floor(t.left),0,this.imageData.width),right:e(Math.ceil(t.right),0,this.imageData.width),top:e(Math.floor(t.top),0,this.imageData.height),bottom:e(Math.ceil(t.bottom),0,this.imageData.height)};return a.right<=a.left||a.bottom<=a.top?0:this.getSumForValidRect(a)},i);function i(t){var a=t.data,e=t.width,i=t.height;this.imageData=t;for(var o=1;o<e;o++)a[o]+=a[o-1];for(var r=1;r<i;r++)a[r*e]+=a[r*e-e];for(var h=e*i-e-i+1,f=e-1,g=0;g<h;g++){var o=1+g%f,m=(r=1+Math.floor(g/f))*e,n=o-1+m,u=o+m-e,l=o-1+m-e;a[m+o]+=a[n]+a[u]-a[l]}}t.default=a});
define('graphing/automatic-label-placer',["require","exports","graphing/integral-image","underscore"],function(require,t,h,q){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateCandidatesForPolygon=t.generateCandidatesForAngle=t.generateCandidatesForSegment=t.generateCandidatesForPoint=t.buildStaticEnvGetter=t.computePositions=t.getIntegralImage=void 0;var f=.5,c=document.createElement("canvas"),u=[];function n(t,e){if(!(0<e.width*e.height))return new h.default({width:0,height:0,data:[]});c.width=0,c.width=Math.round(e.width*f),c.height=Math.round(e.height*f);var r=c.getContext("2d");r.save(),r.scale(c.width/t.canvas.width,c.height/t.canvas.height),r.drawImage(t.canvas,0,0),r.restore();var o=r.getImageData(0,0,c.width,c.height),n=o.data;n.length,u.length;for(var i=u=new Array(n.length/4),a=0;a<i.length;a++)i[a]=n[4*a+3];return new h.default({width:o.width,height:o.height,data:i})}function l(t,e){return Math.max(0,Math.min(t.right,e.right)-Math.max(t.left,e.left))*Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top))}function E(t,e){if(!(e.length<=1))for(var r,o,n,i,a,h,c=t(),u=0,p=e;u<p.length;u++){var s=p[u];s.staticScore+=(i=s,a=c.viewport,h=void 0,h=l(i,a),10*(i.width*i.height-h)),s.staticScore+=function(e,t){var r=0;return t.forEach(function(t){r+=l(e,t)}),r}(s,c.domObstructions),s.staticScore+=(r=s,o=c.integralImage,n=void 0,n=o.getSum({left:r.left*f,right:r.right*f,top:r.top*f,bottom:r.bottom*f}),n/=200,n/=f*f)}}t.getIntegralImage=n,t.computePositions=function(t){for(var e=0;e<t.length;e++){var r=function(t,e){var r=1/0,o=-1,n=e[t];if(1===n.length)return n[0];for(var i=0;i<n.length;i++){var a=e[t][i].staticScore,h=function(t,e,r){for(var o=0,n=r[t][e],i=0;i<r.length;i++)if(i!==t){for(var a=0,h=r[i],c=h.length-1;0<=c;c--){var u=h[c],p=Math.max(0,Math.min(n.right,u.right)-Math.max(n.left,u.left)),s=Math.max(0,Math.min(n.bottom,u.bottom)-Math.max(n.top,u.top));a+=p*s}o+=a/h.length}return o}(t,i,e),c=a+h;(-1===o||c<r)&&(r=c,o=i)}return n[o]}(e,t);t[e]=[r]}return t.map(function(t){return t[0]})},t.buildStaticEnvGetter=function(t,e,r){var o;return function(){return o=o||{domObstructions:r,viewport:{left:0,right:e.width,top:0,bottom:e.height},integralImage:n(t,e)}}},t.generateCandidatesForPoint=function(t,i){var e=i.nakedLabel?0:i.pt_radius,r=Math.round(e/Math.sqrt(2)),o=[],a=i.pt_x,h=i.pt_y,c=i.width,u=i.height,n=400;o.push({left:a-c/2,top:h-u/2,staticScore:-1/0,orientation:"center"}),o.push({left:a+e+3,top:h-u/2,staticScore:n,orientation:"right"}),o.push({left:a-(e+c)-3,top:h-u/2,staticScore:n,orientation:"left"}),o.push({left:a-c/2,top:h-(u+e),staticScore:n,orientation:"above"}),o.push({left:a-(c+r),top:h-(u+r),staticScore:n,orientation:"tl"}),o.push({left:a+r,top:h-(u+r),staticScore:n,orientation:"tr"}),o.push({left:a-c/2,top:h+e,staticScore:n,orientation:"below"}),o.push({left:a-(c+r),top:h+r,staticScore:n,orientation:"bl"}),o.push({left:a+r,top:h+r,staticScore:n,orientation:"br"});var p=o.map(function(t){var e=Math.round(t.left),r=Math.round(t.left+c),o=Math.round(t.top),n=Math.round(t.top+u);return{pt_x:Math.round(a),pt_y:Math.round(h),left:e,right:r,top:o,bottom:n,width:r-e,height:n-o,staticScore:i.priorOrientation===t.orientation?t.staticScore-20:t.staticScore,orientation:t.orientation}});return E(t,p=i.enforceOrientation&&"default"!==i.enforceOrientation?q.filter(p,function(t){return t.orientation===i.enforceOrientation}):i.nakedLabel?q.filter(p,function(t){return"center"===t.orientation}):i.keepOrientation&&i.priorOrientation?q.filter(p,function(t){return t.orientation===i.priorOrientation}):q.filter(p,function(t){return"center"!==t.orientation})),p},t.generateCandidatesForSegment=function(t,i){for(var e=[],a=i.width,h=i.height,r=a/2,o=h/2,n=i.pt_x1,c=i.pt_y1,u=i.pt_x2,p=i.pt_y2,s=(p-c)/(u-n),f=Math.atan2(p-c,u-n)+Math.PI/2,l=5*Math.cos(f),d=5*Math.sin(f),g=Math.min(c,p)-Math.abs(d)-h,M=Math.max(c,p)+Math.abs(d),v=[0,20,20,40,40],m=[],S=0,x=[.5,.4,.6,.2,.8];S<x.length;S++){var b=x[S];m.push({x:n*(1-b)+u*b,y:c*(1-b)+p*b})}for(var y=0;y<m.length;y++){var w,_,O,I,C,P,F=m[y];2<=s||s<=-2?(C=P=F.y-o,w=Math.abs((u-n)/(p-c)*o)+Math.abs(l),_=F.x+w,O=F.x-w-a):P=s<=.05&&-.05<=s?(_=O=F.x-r,I=Math.abs(s*r)+Math.abs(d),C=F.y-I-h,F.y+I):(O=0<l?(_=F.x+l,F.x-l-a):(_=F.x+l-a,F.x-l),0<d?(C=F.y+d,F.y-d-h):(C=F.y+d-h,F.y-d)),C<g?C=g:M<C&&(C=M),P<g?P=g:M<P&&(P=M);var k=0<(u-n)*(C-c)-(p-c)*(_-n);e.push({pt_x:F.x,pt_y:F.y,left:_,top:C,staticScore:v[y],orientation:y.toString()+(k?"-a":"-b")}),e.push({pt_x:F.x,pt_y:F.y,left:O,top:P,staticScore:v[y],orientation:y.toString()+(k?"-b":"-a")})}var A=e.map(function(t){var e=Math.round(t.left),r=Math.round(t.left+a),o=Math.round(t.top),n=Math.round(t.top+h);return{pt_x:Math.round(t.pt_x),pt_y:Math.round(t.pt_y),left:e,right:r,top:o,bottom:n,width:r-e,height:n-o,staticScore:i.priorOrientation===t.orientation?t.staticScore-20:t.staticScore,orientation:t.orientation}});return i.keepOrientation&&i.priorOrientation&&(A=q.filter(A,function(t){return t.orientation===i.priorOrientation})),E(t,A),A},t.generateCandidatesForAngle=function(t,i){var e=[],r=i.pt_x,o=i.pt_y,a=i.width,h=i.height,n=i.startAngle,c=i.endAngle;c<n&&(c+=2*Math.PI);var u=(n+c)/2,p=i.isRightAngle?i.radius*Math.sqrt(2):i.radius+4,s=p+Math.sqrt(i.width*i.width/4+i.height*i.height/4),f=[],l=s*Math.sin(u);p+.5*h<l&&(l=p+.5*h),l<-p-.5*h&&(l=-p-.5*h),f.push({x:r+s*Math.cos(u)-a/2,y:o+l-h/2});for(var d=0;d<f.length;d++){var g=f[d];e.push({pt_x:g.x,pt_y:g.y,left:g.x,top:g.y,staticScore:0,orientation:d.toString()+"-a"})}var M=e.map(function(t){var e=Math.round(t.left),r=Math.round(t.left+a),o=Math.round(t.top),n=Math.round(t.top+h);return{pt_x:Math.round(t.pt_x),pt_y:Math.round(t.pt_y),left:e,right:r,top:o,bottom:n,width:r-e,height:n-o,staticScore:i.priorOrientation===t.orientation?t.staticScore-20:t.staticScore,orientation:t.orientation}});return i.keepOrientation&&i.priorOrientation&&(M=q.filter(M,function(t){return t.orientation===i.priorOrientation})),E(t,M),M},t.generateCandidatesForPolygon=function(t,i){for(var e=[],a=i.width,h=i.height,r=Math.round(10/Math.sqrt(2)),o=0,n=0,c=0,u=0;u<i.path.length-2;u+=2)c+=1,o+=i.path[u],n+=i.path[u+1];var p=o/c,s=n/c;e.push({left:p-a/2,top:s-h/2,staticScore:0,orientation:"center"}),e.push({left:10+p+3,top:s-h/2,staticScore:50,orientation:"right"}),e.push({left:p-(10+a)-3,top:s-h/2,staticScore:50,orientation:"left"}),e.push({left:p-a/2,top:s-(h+10),staticScore:50,orientation:"top"}),e.push({left:p-(a+r),top:s-(h+r),staticScore:50,orientation:"tl"}),e.push({left:p+r,top:s-(h+r),staticScore:50,orientation:"tr"}),e.push({left:p-a/2,top:10+s,staticScore:50,orientation:"bottom"}),e.push({left:p-(a+r),top:s+r,staticScore:50,orientation:"bl"}),e.push({left:p+r,top:s+r,staticScore:50,orientation:"br"});var f=e.map(function(t){var e=Math.round(t.left),r=Math.round(t.left+a),o=Math.round(t.top),n=Math.round(t.top+h);return{pt_x:Math.round(p),pt_y:Math.round(s),left:e,right:r,top:o,bottom:n,width:r-e,height:n-o,staticScore:i.priorOrientation===t.orientation?t.staticScore-20:t.staticScore,orientation:t.orientation}});return i.keepOrientation&&i.priorOrientation&&(f=q.filter(f,function(t){return t.orientation===i.priorOrientation})),E(t,f),f}});
define('graphing/canvas-labels',["require","exports","tslib","core/lib/deepCopy","graphing/svg-classes"],function(require,t,N,p,l){"use strict";function c(t,e,r){r.verticalLabel?(t.translate(e.left-.5,e.bottom-.5),t.rotate(-Math.PI/2)):t.translate(e.left-.5,e.top-.5)}function h(t,e,r){t.save(),t.font=e.font,r?(t.strokeStyle="#FFF",t.lineWidth=3,t.miterLimit=2,t.strokeText(e.text,0,e.y)):(t.fillStyle=e.color,t.fillText(e.text,0,e.y)),t.restore()}function u(t,e,r){t.save(),r?(t.strokeStyle="#FFF",t.lineWidth=3):t.fillStyle=e.color,t.beginPath();for(var a=0,o=e.instructions;a<o.length;a++){var n=o[a];switch(n.type){case"moveTo":t.moveTo(n.x,n.y);break;case"lineTo":t.lineTo(n.x,n.y);break;case"ellipse":t.ellipse(n.centerX,n.centerY,n.radiusX,n.radiusY,n.rotation,n.startAngle,n.endAngle,n.anticlockwise)}}t.closePath(),r?t.stroke():t.fill(),t.restore()}function A(t,e){var r=Math.sqrt(t[0]*t[0]+t[1]*t[1]),a=Math.sqrt(e[0]*e[0]+e[1]*e[1]),o=t[0]*e[0]+t[1]*e[1],n=Math.acos(o/(r*a));return t[0]*e[1]-t[1]*e[0]<0&&(n*=-1),n}Object.defineProperty(t,"__esModule",{value:!0}),t.drawCommandsToCtx=t.computeDrawingCommandsForDOMLabel=void 0;var O={};function v(t,e){var r=t+"-"+e,a=O[r];if(a)return a;a=[],O[r]=a;var o=e.split(" ");if(4!==o.length)return a;var n=parseFloat(o[0]),i=parseFloat(o[2]),s=parseFloat(o[1]),l=parseFloat(o[3]),c=i-n,h=l-s;function p(t){return(t-n)/c}function u(t){return(t-s)/h}var v=new RegExp("(M[0-9-.]+ [0-9-.]+)|(L[0-9-.]+ [0-9-.]+)|(A[0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+ [0-9-.]+)","g"),f=t.match(v);if(!f||!f.length)return a;for(var d=NaN,g=NaN,y=0,b=f;y<b.length;y++){var m=b[y],T=m.substr(1).split(" ").map(parseFloat);switch(m[0]){case"M":d=p(T[0]),g=u(T[1]),a.push({type:"moveTo",x:d,y:g});break;case"L":d=p(T[0]),g=u(T[1]),a.push({type:"lineTo",x:d,y:g});break;case"A":var w=T[0]/c,x=T[1]/h,k=T[2],F=T[3],L=T[4],C=p(T[5]),M=u(T[6]),S=function(t,e,r,a,o,n,i,s,l){var c=Math.cos(o),h=Math.sin(o),p=(t-s)/2,u=(e-l)/2,v=c*p+h*u,f=-h*p+c*u,d=r*r,g=a*a,y=v*v,b=f*f,m=Math.sqrt((d*g-d*b-g*y)/(d*b+g*y));n===i&&(m*=-1);var T=m*r*f/a,w=-m*a*v/r,x=[1,0],k=[(-v-T)/r,(-f-w)/a];return{centerX:c*T-h*w+(t+s)/2,centerY:h*T+c*w+(e+l)/2,radiusX:r,radiusY:a,startAngle:A(x,[(v-T)/r,(f-w)/a]),endAngle:A(x,k),rotation:o,anticlockwise:0===i}}(d,g,w,x,k,F,L,C,M),d=C,g=M;a.push(N.__assign({type:"ellipse"},S))}}return a}function f(t,e,r){var a=window.getComputedStyle(t);"0px"!==a.borderTopWidth&&(i=function(t,e,r){var a=t.getBoundingClientRect();if(0<a.width&&0<a.height){var o=r.verticalLabel?a.height:a.width,n=parseFloat(e.borderTopWidth||"1px"),i=e.borderTopColor||"#000",s=[{type:"moveTo",x:0,y:0},{type:"lineTo",x:o,y:0},{type:"lineTo",x:o,y:n},{type:"lineTo",x:0,y:n}];return{type:"path",rect:{left:a.left-r.canvasLeft,right:a.right-r.canvasLeft,top:a.top-r.canvasTop,bottom:a.bottom-r.canvasTop},instructions:s,color:i}}}(t,a,e))&&r.push(i);for(var o=t.childNodes,n=0;n<o.length;n++){var i,s=o[n];3===s.nodeType?(i=function(t,e){var r=document.createRange();r.selectNode(t);var a=r.getBoundingClientRect();if(0<a.width&&0<a.height){var o=window.getComputedStyle(t.parentElement),n=t.nodeValue||"";if(n){var i=-.228*parseFloat(o.fontSize);return{type:"text",rect:{left:a.left-e.canvasLeft,right:a.right-e.canvasLeft,top:a.top-e.canvasTop,bottom:a.bottom-e.canvasTop},text:n,color:o.color||"#000",font:o.fontStyle+" "+o.fontSize+" "+o.fontFamily,y:(e.verticalLabel?a.width:a.height)+i,hasOutline:e.hasOutline}}}}(s,e))&&r.push(i):"svg"===s.nodeName?(i=function(t,e){var r=t.childNodes[0];if(r&&"path"===r.nodeName){var a=t.getBoundingClientRect();if(0<a.width&&0<a.height){for(var o,n=v(r.getAttribute("d")||"",t.getAttribute("viewBox")||""),i=window.getComputedStyle(t),s=e.verticalLabel?(o=a.height,a.width):(o=a.width,a.height),l=0,c=n=p.default(n);l<c.length;l++){var h=c[l];switch(h.type){case"moveTo":case"lineTo":h.x*=o,h.y*=s;break;case"ellipse":h.centerX*=o,h.centerY*=s,h.radiusX*=o,h.radiusY*=s;break;default:return h}}return{type:"path",rect:{left:a.left-e.canvasLeft,right:a.right-e.canvasLeft,top:a.top-e.canvasTop,bottom:a.bottom-e.canvasTop},color:i.color||"#000",instructions:n}}}}(s,e))&&r.push(i):1===s.nodeType&&f(s,e,r)}}t.computeDrawingCommandsForDOMLabel=function(t,e){var r=[];return f(t,e,r),r},t.drawCommandsToCtx=function(t,e,r){l.save(e,"dcg-svg-label"),e.save(),l.restore(e);for(var a=0,o=t;a<o.length;a++){var n=o[a];switch(e.save(),c(e,n.rect,r),n.type){case"path":u(e,n,!0);break;case"text":n.hasOutline&&h(e,n,!0);break;default:return n}e.restore()}for(var i=0,s=t;i<s.length;i++){n=s[i];switch(e.save(),c(e,n.rect,r),n.type){case"path":u(e,n,!1);break;case"text":h(e,n,!1);break;default:return n}e.restore()}e.restore()}});
define('graphing/poilabelslayer',["require","exports","tslib","dcgview","jquery","core/lib/label","core/types/graphmode","core/types/label-sizes","core/math/poi-type","./constants","./poi","./automatic-label-placer","core/lib/color-helpers","core/math/interpolatedlabel","../dcgview-helpers/static-mathquill-view","../dcgview-helpers/mathquill-view","core/graphing-calc/json/expression","graphing-calc/models/expression","graphing-calc/models/abstract-item","graphing/canvas-labels","graphing/movablepointslayer","./svg-groups","main/mathquill-operators"],function(require,e,t,o,a,A,z,R,H,N,n,h,B,j,i,l,c,q,s,d,p,u,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var b=o.Components.Input,g=o.Components,f=g.For,L=g.Switch,v=g.IfElse;function y(e,t,r){var o=e.s("graphing-calculator-label-poi-unknown"),n=t.getProjection();if(!n)return o;var i=n.viewport;return i&&r&&(o=p.getCoordsString(r.x,r.y,i)),o}var m,I=(m=o.Class,t.__extends(x,m),x.prototype.init=function(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.cachedLabelDict={},this.cachedLabelOrder=[],this.hoveredPOI=void 0,this.openedPOI2Sketch={},this.takingScreenshot=!1},x.prototype.template=function(){var r=this;return o.createElement(f,{each:function(){return r.cachedLabelOrder}},o.createElement("div",{class:o.const("dcg-graph-outer"),style:this.const({"z-index":0}),didMount:this.didMountRoot.bind(this)},function(t){return o.createElement("div",{class:function(){return r.getLabelClasses(t)},style:function(){return r.getLabelStyles(t)}},o.createElement("div",{class:o.const("dcg-pt"),style:function(){return r.getDotStyles(t)}}),o.createElement("div",{class:o.const("dcg-label"),didMount:function(e){return r.linkLabelNode(t,e)}},r.renderLabelContent(t)))}))},x.prototype.renderLabelContent=function(t){var r=this;return o.createElement(L,{key:function(){return r.getLabelContent(t).type}},function(e){return"text"===e?o.createElement("span",null,function(){return r.getLabelContent(t).text}):"latex"===e?o.createElement(i.default,{latex:function(){return r.getLabelContent(t).text},config:r.bindFn(r.getMQConfig)}):"mixed"===e?o.createElement(f,{each:function(){return j.chunkLabel(r.getLabelContent(t).text)},key:function(e,t){return""+e+t}},o.createElement("span",null,function(e){return v(function(){return"latex"===j.classifyLabelText(e)},{true:function(){return o.createElement(i.default,{latex:function(){return e.substr(1,e.length-2)},config:r.bindFn(r.getMQConfig)})},false:function(){return o.createElement("span",null,function(){return e})}})})):e===c.EditableLabelMode.Math?o.createElement("div",{class:function(){return{"dcg-editable-label-border":!0,"dcg-do-not-blur":!0,"dcg-focus":r.shouldEditableLabelBeFocused(t),"dcg-empty-label":0===r.getEditableLabelText(t).trim().length}},style:function(){return{"border-color":B.shadeColor(r.getEditableLabelTextColor(t),.3)}}},o.createElement(l.default,{latex:function(){return r.getEditableLabelText(t)},placeholder:function(){return""},isFocused:function(){return r.shouldEditableLabelBeFocused(t)},capExpressionSize:function(){return!!r.controller.getGraphSettings().config.capExpressionSize},selectOnFocus:o.const(!1),config:r.bindFn(r.getMQConfig),getAriaLabel:function(){return r.controller.s("graphing-calculator-narration-editable-point-label-at-coordinates",{coordinates:y(r.controller,r.grapher,r.cachedLabelDict[t])})},getAriaPostLabel:r.const(""),onUserChangedLatex:function(e){return r.onLabelInput(e,t)},onExpressionSizeExceeded:function(){return r.controller.dispatch({type:"expression-size-exceeded"})},onFocusedChanged:function(e){return r.onEditableLabelFocusChange(e,t)},hasError:r.const(!1),noFadeout:r.const(!0),needsSystemKeypad:function(){return!r.controller.isKeypadEnabled()}})):o.createElement("div",{class:function(){return{"dcg-resizing-text-input-container":!0,"dcg-editable-label-border":!0,"dcg-focus":r.shouldEditableLabelBeFocused(t),"dcg-empty-label":0===r.getEditableLabelText(t).trim().length}},style:function(){return{"border-color":B.shadeColor(r.getEditableLabelTextColor(t),.3)}},onScroll:function(e){e.target&&(e.target.scrollLeft=0)}},o.createElement(b,{"aria-label":function(){return r.controller.s("graphing-calculator-narration-editable-point-label-at-coordinates",{coordinates:y(r.controller,r.grapher,r.cachedLabelDict[t])})},onInput:function(e){return r.onLabelInput(e,t)},value:function(){return r.getEditableLabelText(t)},onFocus:function(){return r.onEditableLabelFocusChange(!0,t)},onBlur:function(){return r.onEditableLabelFocusChange(!1,t)}}),o.createElement("span",{class:o.const("dcg-text-input-content")},function(){return r.getEditableLabelText(t)||" "}))})},x.prototype.getSketchIdFromLabelId=function(e){var t=this.cachedLabelDict[e];if(t)return t.sketchId},x.prototype.getEditableLabelTextColor=function(e){var t=this.getSketchIdFromLabelId(e);if(!t)return"#000";var r=this.controller.getItemModel(t);return r&&"expression"===r.type?s.getDisplayColor(r):"#000"},x.prototype.onEditableLabelFocusChange=function(e,t){var r=this.getSketchIdFromLabelId(t);r&&(e?this.controller.dispatch({type:"set-focus-location",location:{type:"editable-label",id:r}}):this.controller.dispatch({type:"blur-focus-location",location:{type:"editable-label",id:r}}),this.update())},x.prototype.shouldEditableLabelBeFocused=function(e){var t=this.getSketchIdFromLabelId(e),r=this.controller.getFocusLocation();return!(!r||"editable-label"!==r.type||!t||r.id!==t)},x.prototype.onLabelInput=function(e,t){var r,o=this.getSketchIdFromLabelId(t);o&&this.grapher.poiController.getExpressionModel(o)&&(r=e,this.controller.getItemEditableLabelMode(o)===c.EditableLabelMode.Math&&0<r.length&&(r="`"+r+"`"),this.controller.dispatch({type:"set-item-label",id:o,label:r}))},x.prototype.getEditableLabelText=function(e){var t=this.getSketchIdFromLabelId(e);if(t){var r=this.grapher.poiController.getExpressionModel(t);return r?this.controller.getItemEditableLabelMode(t)===c.EditableLabelMode.Math?r.label.substr(1,r.label.length-2):r.label:""}},x.prototype.linkLabelNode=function(e,t){var r=this.cachedLabelDict[e];r&&(r.labelDOM=t)},x.prototype.getLabelClasses=function(e){var t=this.cachedLabelDict[e];return t?t.classes:{}},x.prototype.getLabelStyles=function(e){var t=this.cachedLabelDict[e];return t?t.styles:{}},x.prototype.getDotStyles=function(e){var t=this.cachedLabelDict[e];return t?t.dotStyles:{}},x.prototype.getLabelContent=function(e){var t=this.cachedLabelDict[e];if(t){var r=this.getSketchIdFromLabelId(e);if(!r)return{is_hole:!1,type:"text",text:""};var o=this.controller.getItemEditableLabelMode(r);return t.classes["dcg-editable-label"]&&void 0!==o&&o!==c.EditableLabelMode.None?{is_hole:!1,type:o,text:""}:t.content}return{is_hole:!1,type:"text",text:""}},x.prototype.didMountRoot=function(e){this.node=e},x.prototype.computeHoveredLabel=function(e,t){var r;this.hoveredPOI?this.isOpenPOI(this.hoveredPOI)?this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-opened-poi"):(r=this.computeLabel(this.hoveredPOI,e,t,"hovered"),this.grapher.setLayerClass("hoveredPOI","dcg-mouse-over-closed-poi")):this.grapher.setLayerClass("hoveredPOI",void 0);var o=this.getHoveredInteractiveLabel();return o&&!o.bareLabel?this.grapher.setLayerClass("interactiveLabel","dcg-mouse-over-opened-poi"):this.grapher.setLayerClass("interactiveLabel",void 0),r},x.prototype.computeTraceLabel=function(e,t){if(this.traceInfo){var r=this.traceInfo.pt;if(r){var o=new n.POI(r.x,r.y,H.TRACE,this.traceInfo.branchInfo.sketch,this.traceInfo.branchInfo.branch,0);return this.computeLabel(o,e,t,"trace")}}},x.prototype.computeLabel=function(e,t,r,o){var n=e.id+"";"trace"===o&&(n="*trace*");var i=t.mapx(e.x),a=t.mapy(e.y),l=i,c=a;if(t.coordsAreOnscreen(i,a,N.OFFSCREEN_RENDER_MARGIN)){if(this.isHiddenInteractiveLabel(e))return;var s=!1,d=void 0,h=e.sketch,p=h&&h.branches[0];p&&(s=!!("nakedLabel"in p&&p.nakedLabel),d="labelOrientation"in p?p.labelOrientation:void 0);var u=h.id,b=this.controller.getItemModel(u);if(e.hasEditableLabel()&&b&&"expression"===b.type&&!q.isSinglePoint(b))return;var g=function(e,t){var r,o,n,i,a,l=t.xmax-t.xmin,c=t.ymax-t.ymin,s=e.getGraphMode();e.type===H.TRACE?(o=(r=s===z.X)?e.y:e.x,n=e.getCompiledFunction(),a=A.point(o,l,c,n),r&&(i=a[0],a[0]=a[1],a[1]=i)):a=[A.value(e.x,l),A.value(e.y,c)];var d=!isFinite(a[1].value),h=e.getLabel();if(h)return"latex"===j.classifyLabelText(h)?{is_hole:d,type:"latex",text:h.substr(1,h.length-2)}:"text"===j.classifyLabelText(h)?{is_hole:d,type:"text",text:h}:{is_hole:d,type:"mixed",text:h};var p=a[0].superscript?a[0].mantissa+"^{"+a[0].superscript+"}":a[0].string,u=a[1].superscript?a[1].mantissa+"^{"+a[1].superscript+"}":a[1].string;return"undefined"===p&&(p="\\mathrm{undefined}"),"undefined"===u&&(u="\\mathrm{undefined}"),{is_hole:d,type:"latex",text:"\\left("+p+",\\space "+u+"\\right)"}}(e,t.viewport),f=e.getLabelSize(),L=!!e.getVerticalLabel(),v=!!e.getTextOutline(),y=e.isPersistent(),m=e.isAttachedToPlottedPoint(),I=e.hasInteractiveLabel(),x=e.hasEditableLabel()&&!this.takingScreenshot,O=h.color,E=!y,C=!!m;I&&(E=C=!0),"trace"===o&&(E=!(C=!1));var S,k=r[n],P=k&&k.labelDOM,M=k&&k.width,D=k&&k.height,F=k&&k.orientation,w={"dcg-poi-label":!0,"dcg-tracept":"trace"===o,"dcg-opened":"opened"===o,"dcg-hole":g.is_hole,"dcg-size-small":f===R.LabelSize.SMALL,"dcg-size-medium":f===R.LabelSize.MEDIUM,"dcg-size-large":f===R.LabelSize.LARGE,"dcg-vertical-label":!!L,"dcg-show-border":E,"dcg-hide-dot":C,"dcg-editable-label":x,"dcg-has-outline":v},T={left:i+"px",top:a+"px"};y&&O&&(S=I&&!this.isOpenInteractiveLabel(e)?.5:.3,T.color=B.shadeColor(O,S)),T.opacity=""+e.getPointOpacity();var _={};return"trace"===o&&(_["background-color"]=O,_["border-color"]=O),{id:n,sketchId:u,x:e.x,y:e.y,screenX:i,screenY:a,top:c,left:l,width:M,height:D,labelDOM:P,forcedOrientation:d,isNakedLabel:s,isVertical:L,orientation:F,classes:w,styles:T,dotStyles:_,content:g,hasOutline:v||e.hasEditableLabel()}}},x.prototype.computeAllLabels=function(e,t){var r,o,n={},i=this.grapher.graphSketches;for(r in i){var a=i[r];if(a.visible){var l=a.labels;if(l.length)for(var c=0;c<l.length;c++)(o=this.computeLabel(l[c],e,t,"opened"))&&(Array.isArray(a.color)&&(o.styles.color=a.color[c]),n[o.id]=o)}}var s,d,h={};for(r in this.openedPOI2Sketch){var p=(s=r,(d=i[this.openedPOI2Sketch[r]])&&d.visible?d.getPOIById(s):null);p&&(h[r]=p.sketch.id,(o=this.computeLabel(p,e,t,"opened"))&&(n[o.id]=o))}return this.openedPOI2Sketch=h,n},x.prototype.markLabelsDirty=function(){this.labelsDirty=!0},x.prototype.getEditableLabelUnderPoint=function(e){for(var t=0,r=this.cachedLabelOrder.length;t<r;t++){var o=this.cachedLabelOrder[t],n=this.cachedLabelDict[o];if(n&&n.width&&n.height){var i=n.screenX,a=n.screenY,l=n.left,c=n.top,s=n.width,d=n.height;if(0<s&&0<d&&e.x>i+l&&e.x<i+l+s&&e.y>a+c&&e.y<a+c+d){var h=this.getSketchIdFromLabelId(o);if(void 0===h)continue;var p=this.controller.getItemModel(h);if(!p||"expression"!==p.type)continue;if(!q.hasEditableLabel(p))continue;return p}}}},x.prototype.positionLabels=function(e,t,l,r,o){var c=!this.labelsDirty;this.labelsDirty=!1;var s=this.grapher.settings.config.projectorMode?14:10,d=[];t.forEach(function(e){var t,r,o,n,i,a=l[e];a&&a.labelDOM&&(t=a.screenX,r=a.screenY,n=(o=a.labelDOM.getBoundingClientRect()).width,i=o.height,0<n&&0<i&&d.push({renderedLabel:a,pt_x:t,pt_y:r,pt_radius:s,nakedLabel:a.isNakedLabel,width:n,height:i,keepOrientation:c,priorOrientation:a.orientation,enforceOrientation:a.forcedOrientation}))});var n=h.buildStaticEnvGetter(e,r,o),i=d.map(function(e){return h.generateCandidatesForPoint(n,e)});h.computePositions(i).forEach(function(e,t){var r=d[t].renderedLabel;r.orientation=e.orientation;var o=e.left-e.pt_x,n=e.top-e.pt_y;r.left=o,r.top=n,r.width=e.width,r.height=e.height;var i=r.labelDOM;i&&(i.style.left=o+"px",i.style.top=n+"px",a(i).data("orientation",e.orientation))})},x.prototype.copyToCtx=function(e){u.save(e,"labels");var t=this.node.getBoundingClientRect();for(var r in this.cachedLabelDict){var o,n,i,a=this.cachedLabelDict[r];a&&(o=a.labelDOM)&&(n={canvasLeft:t.left,canvasTop:t.top,verticalLabel:a.isVertical,hasOutline:!!a.hasOutline},i=d.computeDrawingCommandsForDOMLabel(o,n),d.drawCommandsToCtx(i,e,n))}u.restore(e)},x.prototype.drawForScreenshot=function(e,t,r,o,n){this.takingScreenshot=!0,this.redraw(e,t,o,n),this.takingScreenshot=!1,this.copyToCtx(r)},x.prototype.redraw=function(e,t,r,o){var n=this.computeAllLabels(e,this.cachedLabelDict),i=this.computeHoveredLabel(e,this.cachedLabelDict);i&&(n[i.id]=i);var a=this.computeTraceLabel(e,this.cachedLabelDict);a&&(n[a.id]=a),this.cachedLabelDict=n,this.cachedLabelOrder=Object.keys(n),this.update(),this.positionLabels(t,this.cachedLabelOrder,this.cachedLabelDict,r,o)},x.prototype.clearOpenedPOI=function(){this.openedPOI2Sketch={}},x.prototype.closePOI=function(e){delete this.openedPOI2Sketch[e.id]},x.prototype.openPOI=function(e){this.openedPOI2Sketch[e.id]=e.sketch.id},x.prototype.isOpenPOI=function(e){return this.openedPOI2Sketch.hasOwnProperty(e.id)},x.prototype.isOpenInteractiveLabel=function(e){return!!this.isOpenPOI(e)&&e.hasInteractiveLabel()},x.prototype.isHiddenInteractiveLabel=function(e){return!!e&&!!e.hasInteractiveLabel()&&!this.isOpenPOI(e)&&this.getHoveredPOI()!==e},x.prototype.setHoveredPOI=function(e){this.hoveredPOI=e},x.prototype.getHoveredPOI=function(){return this.hoveredPOI},x.prototype.getHoveredInteractiveLabel=function(){var e=this.getHoveredPOI();return e&&e.hasInteractiveLabel()?e:void 0},x.prototype.setTraceInfo=function(e){this.traceInfo=e},x.prototype.isTracing=function(){return!!this.traceInfo},x.prototype.getTraceInfo=function(){return this.traceInfo},x.prototype.getMQConfig=function(){return{autoOperatorNames:r.getAutoOperators({colorMethods:this.controller.canUseAdvancedStyling()})}},x);function x(){var e=null!==m&&m.apply(this,arguments)||this;return e.labelsDirty=!1,e}e.default=I});
define('graphing/clickableobject-layer',["require","exports","tslib","dcgview","jquery","graphing-calc/models/expression","graphing-calc/models/image"],function(require,e,t,r,i,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,d=r.Components.For,a=(s=r.Class,t.__extends(c,s),c.prototype.init=function(){this.grapher=this.props.grapher(),this.controller=this.grapher.controller,this.renderedTabTargetOrder=[],this.renderedTabTargets={}},c.prototype.template=function(){var t=this;return r.createElement(d,{each:function(){return t.renderedTabTargetOrder}},r.createElement("div",{class:r.const("dcg-graph-outer"),style:this.const({"z-index":0}),onFocusin:this.bindFn(this.handleFocusChange),onFocusout:this.bindFn(this.handleFocusChange),didMount:function(e){return t.rootNode=e}},function(e){return r.createElement("div",{class:r.const("dcg-tabbable-clickableobject"),role:r.const("button"),"aria-roledescription":r.const("clickable object"),"dcg-clickableobject-id":t.const(e),tabindex:function(){return t.getTabIndex()},"aria-hidden":t.bindFn(t.getAriaHidden),"aria-label":function(){return t.getAriaLabel(e)},onTap:function(){t.controller.dispatch({type:"clickable-item-clicked",id:e})}})}))},c.prototype.redraw=function(){var e;this.renderedTabTargets={},this.renderedTabTargetOrder=[];var t,r=this.grapher.graphSketches;for(e in r)r[e].visible&&(i=this.controller.getItemModel(e))&&"expression"===i.type&&n.isClickableObject(i)&&(this.renderedTabTargetOrder.push(e),t=""!==i.clickableInfo.description?i.clickableInfo.description:this.grapher.getAudioTrace().getExpressionAriaLabel(e),this.renderedTabTargets[e]={id:e,description:t});var i,s=this.grapher.graphImages;for(e in s)s[e].hidden||this.controller.isItemSecret(e)||(i=this.controller.getItemModel(e))&&"image"===i.type&&o.isClickableObject(i)&&(this.renderedTabTargetOrder.push(e),this.renderedTabTargets[e]={id:e,description:i.clickableInfo.description});this.renderedTabTargets[this.hoveredId]||this.setHoveredId(void 0),this.renderedTabTargets[this.pressedId]||this.setPressedId(void 0),this.hoveredId||this.pressedId?this.grapher.setLayerClass("clickableObjects","dcg-mouse-over-clickable-object"):this.grapher.setLayerClass("clickableObjects",void 0),this.update()},c.prototype.getTabIndex=function(){var e=this.grapher.settings;return e.config.graphpaper&&e.config.enableTabindex?0:-1},c.prototype.getAriaHidden=function(){return!this.grapher.settings.config.graphpaper},c.prototype.getAriaLabel=function(e){var t=this.renderedTabTargets[e];return t?t.description:""},c.prototype.shouldDrawHovered=function(e){return e===this.focusedId||!(this.isAnObjectPressed()&&!this.isObjectPressed(e))&&this.isObjectHovered(e)},c.prototype.isObjectHovered=function(e){return void 0!==e&&this.hoveredId===e},c.prototype.setHoveredId=function(e){e!==this.hoveredId&&(this.hoveredId=e,this.requestRedrawNextFrame())},c.prototype.shouldDrawPressed=function(e){return this.isObjectPressed(e)},c.prototype.isObjectPressed=function(e){return void 0!==e&&this.pressedId===e},c.prototype.setPressedId=function(e){e!==this.pressedId&&(this.pressedId=e,this.requestRedrawNextFrame())},c.prototype.getPressedId=function(){return this.pressedId},c.prototype.isAnObjectPressed=function(){return!!this.pressedId},c.prototype.handleFocusChange=function(){var e=void 0;document.activeElement&&i.contains(this.rootNode,document.activeElement)&&(e=i(document.activeElement).attr("dcg-clickableobject-id")),this.focusedId!==e&&(this.focusedId=e,this.requestRedrawNextFrame())},c.prototype.requestRedrawNextFrame=function(){this.grapher.redrawAllLayers()},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.default=a});
define('graphing/grapher',["require","exports","main/graph_settings","./canvaslayer","./poidotslayer","./gridlayer","./graphslayer","./imagelayer","./viewportcontroller","./poicontroller","vendor/canvas2svg","dcgview","jquery","underscore","./viewport","./screen","./graphsketch","./projection","underscore_model","./audiograph","./canvas-braille","./braille-size-options","core/lib/deepCopy","lib/animation-frame","core/lib/default-spec","core/graphing-calc/json/graph-settings","graphing/tonegenerator","./movablepointslayer","./poilabelslayer","./clickableobject-layer","./svg-classes","./svg-groups"],function(require,e,h,l,d,g,u,w,y,v,f,_,b,m,a,L,o,S,k,R,n,c,x,i,p,P,r,C,j,I,O,A){"use strict";function V(){return new a.Viewport(-10,10,-10,10)}Object.defineProperty(e,"__esModule",{value:!0}),e.Grapher=void 0;var t=(s.prototype.remove=function(){this.$.remove(),this.poiController.remove(),this.viewportController.remove(),this.audioGraph.remove()},s.prototype.tick=function(e){this.__isRedrawingSlowly?this._redrawSlowly():this.__redrawRequested&&this._redrawAllLayers(),this.__movablePointListener&&this.__movablePointListener()},s.prototype.registerMovablePointListener=function(e){this.__movablePointListener=e},s.prototype.deregisterMovablePointListener=function(){this.__movablePointListener=void 0},s.prototype.setSketchOrder=function(e){m.isEqual(this.__sketchOrder,e)||(this.__sketchOrder=e,this.redrawAllLayers())},s.prototype.clear=function(){this.graphSketches={},this.graphImages={}},s.prototype.getGraphSketch=function(e){return this.graphSketches[e]},s.prototype.getGraphImage=function(e){return this.graphImages[e]},s.prototype.addGraphSketch=function(e){this.graphSketches[e.id]=e},s.prototype.removeGraphSketch=function(e){delete this.graphSketches[e]},s.prototype.addGraphImage=function(e){var t=this;e.imageObj.width&&e.imageObj.height?(this.graphImages[e.id]=e,this.redrawAllLayers()):b(e.imageObj).on("load.calc_load",function(){return t.addGraphImage(e)})},s.prototype.removeGraphImage=function(e){var t=this.graphImages[e];t&&b(t.imageObj).off("load.calc_load"),delete this.graphImages[e],this.redrawAllLayers()},s.prototype.getProjection=function(){return this.__projection},s.prototype._setProjection=function(e){this.__projection=e,this.redrawAllLayers()},s.prototype.getAudioTrace=function(){return this.audioGraph},s.prototype.getDefaultViewport=function(){var e=this.getProjection();return V().squareYAxis(e.screen)},s.prototype._updateScreenSize=function(e,t){var r,i;e<=0||t<=0||(r=this.getProjection().screen).width===e&&r.height===t||(this.$.width(e),i=new L.Screen(e,t),this.viewportController.setScreen(i))},s.prototype._setIsVisible=function(e){e!==this.isVisible&&((this.isVisible=e)?this.redrawAllLayers():this.canvasLayer.resize(0,0))},s.prototype.update=function(){var e=this.controller.computeMajorLayout().grapher;0<e.width&&0<e.height?(this._setIsVisible(!0),this._updateScreenSize(e.width,e.height),this.$.css({position:"absolute",left:e.left+"px",top:e.top+"px",width:e.width+"px",height:e.height+"px"})):this._setIsVisible(!1)},s.prototype.hide=function(e){var t=this.getGraphSketch(e);t&&(t.visible=!1)},s.prototype.select=function(e){var t;!this.selectedId||(t=this.getGraphSketch(this.selectedId))&&(t.selected=!1,t.showPOI=!1,t.showHighlight=!1);var r=this.getGraphSketch(e);r&&(r.selected=!0,r.showPOI=this.controller.isTraceEnabled(),r.showHighlight=!0),this.selectedId=e},s.prototype.updateSketch=function(e,t){var r=this.getGraphSketch(e);if(!t.length)return this.hide(e);var i=new o.GraphSketch(e,t);i.color=t[0].color,t[0].style&&(i.style=t[0].style),r&&i.updateFrom(r);var s=String(e)===String(this.selectedId);i.selected=s,i.showPOI=s&&this.controller.isTraceEnabled(),i.showHighlight=s,this.addGraphSketch(i)},s.prototype.updateIntersections=function(e,t){var r=this.getGraphSketch(e);r&&r.updateIntersections(t)},s.prototype.redrawAllLayers=function(){this.cancelRedrawSlowly(),this.__redrawRequested=!0},s.prototype._clear=function(){var e=this.getProjection(),t=e.screen;this.canvasLayer.resize(e.screen.width,e.screen.height),this.canvasLayer.ctx.clearRect(0,0,t.width,t.height)},s.prototype._redrawAllLayers=function(){this.isVisible&&(this.__redrawRequested=!1,this._clear(),this.audioGraph.recomputePoints(),this._recomputeClickableObjects(),this._redrawImageLayer(),this._redrawGridLayer(),this._redrawGraphsLayer(),this._redrawPointsAndLabels(),this._updateCanvasLayerAria(),this.events.triggerEvent("redraw",void 0))},s.prototype.cancelRedrawSlowly=function(){this.__isRedrawingSlowly&&(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.redrawAllLayers())},s.prototype.redrawSlowly=function(){this.__isRedrawingSlowly||(this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!0,this.audioGraph.recomputePoints())},s.prototype._redrawSlowly=function(){var e,t,r,i,s,a=this.__redrawSlowlyIndex;0===a&&(this._clear(),this._redrawGridLayer()),a>=this.__sketchOrder.length?this.cancelRedrawSlowly():((e={})[r=this.__sketchOrder[a]]=this.graphSketches[r],i=e,(t={})[r]=this.graphImages[r],((s=t)[r]||i[r])&&this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),i,s,[r],this.poiLabelsLayer,this.clickableObjectsLayer),this.__redrawSlowlyIndex+=1)},s.prototype._redrawGridLayer=function(){this.gridLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.scaleAxis)},s.prototype._recomputeClickableObjects=function(){this.clickableObjectsLayer.redraw()},s.prototype._redrawGraphsLayer=function(){this.graphsLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer)},s.prototype._updateCanvasLayerAria=function(){var e=0;for(var t in this.graphSketches)r.canPlaySketch(this.graphSketches[t])&&(e+=1);this.canvasLayer.updateAria(this.isVisible,e)},s.prototype._redrawPointsAndLabels=function(){var e=this.getProjection(),r=[];this.movablePointsLayer.redraw(this.canvasLayer.ctx,e,r),this.showPOIDots&&this.poiDotsLayer.redrawToCtx(this.canvasLayer.ctx,e,this.graphSketches,this.poiLabelsLayer,this.clickableObjectsLayer);var i=this.$[0].getBoundingClientRect();m.each([this.controller.find$(".dcg-overgraph-pillbox-elements")[0],this.controller.find$(".dcg-graphpaper-branding")[0]],function(e){var t;e&&(t=e.getBoundingClientRect(),r.push({left:t.left-i.left,top:t.top-i.top,right:t.right-i.left,bottom:t.bottom-i.top}))});var t=this.canvasLayer.ctx.canvas.getBoundingClientRect();this.poiLabelsLayer.redraw(e,this.canvasLayer.ctx,{width:t.width,height:t.height},r)},s.prototype._redrawImageLayer=function(){this.imageLayer.redrawToCtx(this.canvasLayer.ctx,this.getProjection(),this.graphImages,this.__sketchOrder)},s.prototype._parseScreenshotOpts=function(e){var t,r,i,s,a,o=this.getProjection(),n=e?(t=e.width||e.height||o.screen.width,r=e.height||e.width||o.screen.height,i=e.targetPixelRatio||1,s=(t<256||r<256)&&!e.preserveAxisNumbers,a=h.fromObject(e.settings||this.settings),!!e.transparentBackground):(t=o.screen.width,r=o.screen.height,s=!(i=1),a=h.fromObject(this.settings),!1);return s&&(a.setProperty("xAxisNumbers",!1),a.setProperty("yAxisNumbers",!1),a.setProperty("polarNumbers",!1)),{width:t,height:r,targetPixelRatio:i,settings:a,transparentBackground:n}},s.prototype._syncScreenshotReturnCanvas=function(e){var t,r,i,s,a,o=document.createElement("canvas");return e&&e.braille?(r=(t=e.braille).embosserModel,i=t.brailleMode,s=c.brailleSizes[r],o.width=s.width,o.height=s.height,n.createBrailleImage(o,this,s,r,i)):(a=this._parseScreenshotOpts(e),o.width=a.width*a.targetPixelRatio,o.height=a.height*a.targetPixelRatio,this.screenshotToCanvas(o,e)),o},s.prototype.screenshot=function(e){return this._syncScreenshotReturnCanvas(e).toDataURL("image/png")},s.prototype.asyncScreenshot=function(e,t){var r=this,i=!1;!e.transparentBackground&&e.showLabels&&(i=(e=x.default(e)).transparentBackground=!0);var s=this._syncScreenshotReturnCanvas(e),a=s.getContext("2d"),o=s,n=a;e&&"svg"===e.format&&(i=!1,e.transparentBackground&&((e=x.default(e)).transparentBackground=!1),n=new f(s.width,s.height),o={getContext:function(){return n},width:s.width,height:s.height},this.screenshotToCanvas(o,e));var h,c,p,l,d,g,u,w=this.makeScreenshotProjection(e),y=[];e.showMovablePoints&&this.movablePointsLayer.drawForScreenshot(n,w,y),e.showLabels&&(h=w.screen.width,c=w.screen.height,p=w.settings.labelSize||15,d=(l=b('<div class="dcg-calculator-api-container">\n          <div class="dcg-container">\n            <div class="dcg-grapher" style="font-size:'+p*(h<200||c<200?.9:1)+'px"></div>\n          </div>\n        </div>').css({width:w.screen.width,height:w.screen.height,position:"absolute",left:"0px",top:"0px"}).appendTo("body")).find(".dcg-grapher"),g=_.mountToNode(j.default,d[0],{grapher:function(){return r}}),u={width:w.screen.width,height:w.screen.height},g.drawForScreenshot(w,a,n,u,y),l.remove()),i&&(n.globalCompositeOperation="destination-over",n.fillStyle="#FFF",n.fillRect(0,0,o.width,o.height)),e&&"svg"===e.format?t(n.getSerializedSvg()):t(o.toDataURL("image/png"))},s.prototype.makeScreenshotProjection=function(e){var t=this._parseScreenshotOpts(e),r=t.width,i=t.height,s=t.settings,a=new L.Screen(r,i),o=this.getProjection().viewport;return this.getSetting("squareAxes")&&(o=o.squareCrop(a)),new S.Projection(a,o,s)},s.prototype.screenshotToCanvas=function(e,t){var r=this._parseScreenshotOpts(t),i=r.targetPixelRatio,s=r.transparentBackground,a=e.getContext("2d");a.scale(i,i);var o=this.makeScreenshotProjection(t);o.settings.takingScreenshot=!0,A.save(a,"background"),O.save(a,"dcg-svg-background"),s?a.clearRect(0,0,o.screen.width,o.screen.height):(a.fillStyle="white",a.fillRect(0,0,o.screen.width,o.screen.height)),O.restore(a),A.restore(a),this.imageLayer.redrawToCtx(a,o,this.graphImages,this.__sketchOrder),this.gridLayer.redrawToCtx(a,o),this.graphsLayer.redrawToCtx(a,o,this.graphSketches,this.graphImages,this.__sketchOrder,this.poiLabelsLayer,this.clickableObjectsLayer,t)},s.prototype.getImageData=function(e,t,r,i){return this.canvasLayer.ctx.getImageData(e,t,r,i)},s.prototype.getSetting=function(e,t){var r=this.settings.getProperty(e);return void 0!==r?r:t},s.prototype.getState=function(e){var t=this,r={viewport:this.getCurrentViewport()};return this.settings.stateProperties.forEach(function(e){"randomSeed"!==e&&(r[e]=t.getSetting(e))}),e.stripDefaults&&(r=p.stripDefaults(P.DefaultGraphSettings,r)),r},s.prototype.getUndoRedoState=function(){var t=this,r={};return this.settings.stateProperties.forEach(function(e){r[e]=t.getSetting(e)}),r.viewport=this.getUserRequestedViewport(),r},s.prototype.notifyAfterRedraw=function(e){var t,r=this;this.__isRedrawingSlowly?i.requestAnimationFrame(this.notifyAfterRedraw.bind(this,e)):this.__redrawRequested?(this.notifyAfterRedraw_i?this.notifyAfterRedraw_i++:this.notifyAfterRedraw_i=1,t="redraw.notifyAfterRedraw"+this.notifyAfterRedraw_i,this.events.observeEvent(t,function(){r.events.unobserveEvent(t),e()})):e()},s.prototype.getCurrentViewport=function(){return this.viewportController.getViewport().toObject()},s.prototype.getUserRequestedViewport=function(){return this._lastUserRequestedViewport},s.prototype.setUserRequestedViewport=function(e){this._lastUserRequestedViewportUpdateToken||(this._lastUserRequestedViewportUpdateToken=0),this._lastUserRequestedViewportUpdateToken+=1,this._lastUserRequestedViewport=x.default(e)},s.prototype.debounceUserRequestedViewportChange=function(){var i=this;this.__debouncedViewportCommit||(this.__debouncedViewportCommit=m.debounce(function(e,t){if(!i.isDragging&&i._lastUserRequestedViewportUpdateToken===t){if(i._lastUserRequestedViewport){var r=a.Viewport.fromObject(i._lastUserRequestedViewport);if(i.computeConcreteViewport(r).equals(e))return}i.controller.dispatch({type:"commit-user-requested-viewport",viewport:e})}},1e3));var e=this.getCurrentViewport();this.__debouncedViewportCommit(e,this._lastUserRequestedViewportUpdateToken)},s.prototype.setGrapherState=function(e,t){for(var r in e=p.populateDefaults(P.DefaultGraphSettings,e),t&&t.doNotClear||this.clear(),P.DefaultGraphSettings)P.DefaultGraphSettings.hasOwnProperty(r)&&this.settings.setProperty(r,e[r]);var i,s;"viewport"in e&&(i=a.Viewport.fromObject(e.viewport),this.setUserRequestedViewport(i),s=this.computeConcreteViewport(i),this.viewportController.setViewport(s)),this.redrawAllLayers()},s.prototype.computeConcreteViewport=function(e){var t=this.getProjection().screen;return this.getSetting("squareAxes")&&!e.isSquare(t)?e.squareYAxis(t):e},s.prototype.setLayerClass=function(e,t){var r=this._layerClasses[e];r!==(this._layerClasses[e]=t)&&(r&&this.$.removeClass(r),t&&this.$.addClass(t))},s);function s(e,t,r,i){var s=this;this.type="2d",this._layerClasses={},this.$=e,this.evaluator=i,this.controller=r,this.settings=t;var a=new L.Screen(1024,768),o=V().squareYAxis(a);this.setUserRequestedViewport(o),this.__projection=new S.Projection(a,o,t),this.markLabelsDirty=m.debounce(function(){s.evaluator.notifyWhenSynced(function(){s.__isRedrawingSlowly?s.notifyAfterRedraw(function(){s.poiLabelsLayer.markLabelsDirty(),s.redrawAllLayers()}):(s.poiLabelsLayer.markLabelsDirty(),s.redrawAllLayers())})},300),this.poiController=new v(this,t),this.viewportController=y(this,this.controller),this.showPOIDots=!0,this.$.css("overflow","hidden"),this.graphSketches={},this.graphImages={},this.audioGraph=new R.default(r,this),this.canvasLayer=l(this),this.$.append(this.canvasLayer.$),this.imageLayer=w(),this.gridLayer=g(),this.poiDotsLayer=d(),this.graphsLayer=u(this.settings,function(e){return s.audioGraph.getExpressionAriaLabel(e)});var n=b("<div></div>");this.$.append(n);var h=this;this.clickableObjectsLayer=_.mountToNode(I.default,n[0],{grapher:function(){return h}});var c=b("<div></div>");this.$.append(c);h=this;this.movablePointsLayer=_.mountToNode(C.default,c[0],{grapher:function(){return h}});var p=b("<div></div>");this.$.append(p),this.poiLabelsLayer=_.mountToNode(j.default,p[0],{grapher:function(){return h}}),this.traceLayer=this.poiLabelsLayer,this.scaleAxis=void 0,this.__sketchOrder=[],this.selectedId=void 0,this.__redrawRequested=!1,this.__redrawSlowlyIndex=0,this.__isRedrawingSlowly=!1,this.events=new k.UnderscoreModel}e.Grapher=t});
define('api/util',["require","exports","lib/console"],function(require,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.validateLanguage=void 0,e.validateLanguage=function(e){return"es-ES"===e?(a.warn("{language: 'es-ES'} has been deprecated. Proceeding with {language: 'es'}"),"es"):e}});

define('loadcss!tour', function(){});

define('loadcss!calculator_embed', function(){});

define('loadcss!buttons', function(){});

define('loadcss!dcg-normalize', function(){});

define('loadcss!projector_mode', function(){});

define('loadcss!desmos-icons', function(){});

define('loadcss!popovers', function(){});
define('main/calc_embed',["require","exports","main/graph_settings","tours/tour_manager","tslib","jquery","main/controller","dcgview","main/instancehotkeys","lib/console","underscore","lib/defocus-mobile","graphing-calc/views/main","underscore_model","graphing/viewport","main/evaluator","graphing/grapher","core/lib/color-helpers","api/util","lib/parse-query-params","loadcss!tour","loadcss!calculator_embed","loadcss!buttons","loadcss!dcg-normalize","loadcss!projector_mode","loadcss!desmos-icons","loadcss!popovers"],function(require,e,u,w,c,f,m,b,y,d,v,o,x,C,t,k,S,h,g,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,O=0,a=(n.prototype.setOption=function(e,t){this.controller.getGraphSettings().config.setProperty(e,t)},n.prototype.setOptions=function(e){var t,o=this.controller.getGraphSettings().config,s=c.__assign({},e);function r(e){var t=e.notes,o=e.folders,s=e.images;return!1===t||!1===o||!1===s}e.hasOwnProperty("backgroundColor")&&(h.isValidHexColor(e.backgroundColor)||(d.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete s.backgroundColor)),e.hasOwnProperty("textColor")&&(h.isValidHexColor(e.textColor)||(d.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete s.textColor)),e.hasOwnProperty("menus")&&(d.warn("Deprecated option: menus. Setting settingsMenu and expressionsTopbar instead."),e.hasOwnProperty("settingsMenu")||(s.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(s.expressionsTopbar=!!e.menus)),e.hasOwnProperty("solutions")&&(d.warn("Deprecated option: solutions. Setting pointsOfInterest instead."),e.hasOwnProperty("pointsOfInterest")||(s.pointsOfInterest=!!e.solutions)),e.hasOwnProperty("singleVariableSolutions")&&d.warn("Deprecated option: singleVariableSolutions has been removed."),!1===e.graphpaper&&(e.expressionsCollapsed&&(s.expressionsCollapsed=!1,d.warn("Cannot set graphpaper: false with expressionsCollapsed: true. Proceeding with expressionsCollapsed: false.")),o.expressionsCollapsed&&(s.expressionsCollapsed=!1,d.warn("Disabling the graphpaper with the expressions list collapsed is not supported.Setting expressionsCollapsed: false.")),e.zoomButtons&&(s.zoomButtons=!1,d.warn("Cannot set graphpaper: false with zoomButtons: true. Proceeding with zoomButtons: false.")),e.showResetButtonOnGraphpaper&&(s.showResetButtonOnGraphpaper=!1,d.warn("Cannot set graphpaper: false with showResetButtonOnGraphpaper: true. Proceeding with showResetButtonOnGraphpaper: false.")),o.zoomButtons&&(s.zoomButtons=!1,d.warn("Disabling the graphpaper with the zoomButtons visible is not supported. Setting zoomButtons: false.")),o.showResetButtonOnGraphpaper&&(s.showResetButtonOnGraphpaper=!1,d.warn("Disabling the graphpaper with the reset button visible is not supported. Setting showResetButtonOnGraphpaper: false."))),!1===o.graphpaper&&(e.expressionsCollapsed||e.zoomButtons||e.showResetButtonOnGraphpaper)&&(s.graphpaper=!0,d.warn("Must have visible graphpaper to proceed. Setting graphpaper: true.")),e.lockViewport&&e.zoomButtons&&(s.zoomButtons=!1,d.warn("Cannot set zoomButtons: true and lockViewport: true. Proceeding with zoomButtons: false.")),o.lockViewport&&e.zoomButtons&&(s.lockViewport=!1,d.warn("Cannot set zoomButtons: true while the viewport is locked. Setting lockViewport: false.")),o.zoomButtons&&e.lockViewport&&(s.zoomButtons=!1,d.warn("Cannot lock the viewport without hiding the zoom buttons. Setting zoomButtons: false."));var a=r(e),n=r(c.__assign(c.__assign({},o),e)),i=o.pasteGraphLink,l=e.pasteGraphLink;for(t in a?(l||i)&&(s.pasteGraphLink=!1,d.warn("Cannot disable creating note, folder, or image expressions without disabling graph link pasting. Setting pasteGraphLink: false.")):l&&n&&(s.notes=!0,s.folders=!0,s.images=!0,d.warn("Cannot enable graph link pasting while the creation of notes, folders, or images is disable. Setting notes: true, folders: true, images: true.")),e.language&&(s.language=g.validateLanguage(e.language)),s)if(s.hasOwnProperty(t))switch(t){case"expressionsCollapsed":this.setOption("expressionsCollapsed",!!s.expressionsCollapsed),s.expressionsCollapsed?this.controller.dispatch({type:"hide-expressions-list"}):this.controller.dispatch({type:"show-expressions-list"});break;case"qwertyKeyboard":this.setOption("qwertyKeyboard",!!s.qwertyKeyboard),this.controller.isLetterKeypadOpen()&&this.controller.dispatch({type:"keypad/abc"});break;case"degreeMode":this.setOption("degreeMode",!!s.degreeMode),this.controller.getGraphSettings().setGraphSettings({degreeMode:!!s.degreeMode});break;case"keypad":case"graphpaper":case"expressions":case"settingsMenu":case"zoomButtons":case"showResetButtonOnGraphpaper":case"expressionsTopbar":case"pointsOfInterest":case"trace":case"border":case"lockViewport":case"administerSecretFolders":case"advancedStyling":case"clickableObjects":case"images":case"imageUploadCallback":case"folders":case"notes":case"sliders":case"links":case"restrictedFunctions":case"forceEnableGeometryFunctions":case"distributions":case"pasteGraphLink":case"pasteTableData":case"clearIntoDegreeMode":case"autosize":case"plotSingleVariableImplicitEquations":case"plotImplicits":case"plotInequalities":case"colors":case"branding":case"disableScrollFix":case"invertedColors":case"fontSize":case"projectorMode":case"language":case"redrawSlowly":case"onlyTraceSelected":case"disableMouseInteractions":case"nativeOnscreenKeypad":case"functionDefinition":case"plaidMode":case"pasteGraphLinkCallback":case"editOnWeb":case"crossOriginSaveTest":case"backgroundColor":case"textColor":case"enableTabindex":case"audioTraceReverseExpressions":case"showHamburger":case"decimalToFraction":case"capExpressionSize":case"transparentBackground":case"pauseWhenOffscreen":case"brailleMode":case"sixKeyInput":case"brailleControls":case"zoomFit":var p=s[t];void 0!==p&&this.setOption(t,p);break;default:return t}},n.prototype.setViewport=function(e){this.grapher.viewportController.setViewport(new t.Viewport(e[0],e[1],e[2],e[3]))},n.prototype.resize=function(e){e&&this.controller.dispatch({type:"ui/container-resized",size:e})},n.prototype.interceptTouch=function(){var e=f(this.rootElt),t=e.find(".dcg-expression-top-bar");t.add(e.find(".dcg-keypad")),t.length&&(t.on("touchstart",function(e){f(e.target).is("input, textarea")||e.preventDefault()}),t.on("touchend",function(e){0<f(e.target).closest(".dcg-do-not-blur").length||o.default()}))},n.prototype.destroy=function(){f(window).off(".calculator-"+this.__id);var e=f(this.rootElt);e.off(".calculator-"+this.__id),this.unsubFunc(),this.graphSettings.unobserveAll(),this.evaluator&&this.evaluator.destroy(),this.grapher&&this.grapher.remove(),b.unmountFromNode(this.rootElt),e.remove()},n.prototype.tick=function(e,t){t||(this.controller.shouldDispatchTickNextFrame()&&this.controller.dispatch({type:"tick",time:e}),this.controller.updateRenderShellsAfterDispatch()),this.evaluator.tick(),this.grapher&&this.grapher.tick(e)},n.prototype.getState=function(e){return this.controller.getState(e)},n.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e||{}})},n.prototype.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})},n);function n(e,t,o,s){var i=this;e=e||document.createElement("div");var r=document.createElement("div");r.className="dcg-wrapper",r.style.width="100%",r.style.height="100%",e.appendChild(r),this.__id=O++;var a=new u;for(var n in this.graphSettings=a,o)a.config.setProperty(n,o[n]);var l=new m.default(a);this.controller=l,s&&l.dispatch({type:"ui/container-resized",size:s}),this.rootElt=r,this.view=b.mountToNode(x.default,this.rootElt,{controller:b.const(l)});var p=new k.Evaluator(t);this.controller.setEvaluator(p),this.controller.setRootElt(this.rootElt);var c=l.find$(".dcg-grapher"),d=new S.Grapher(c,a,this.controller,p);this.controller.setGrapher(d),a.registerCallbacks(d,p),this.controller.initStateStack(),a.config.redrawSlowly||(d.redrawSlowly=d.redrawAllLayers),p.readEvaluatorConfig=function(){return{evaluationMode:"graphing",globalRandomSeed:a.randomSeed,degreeMode:a.degreeMode,viewState:l.getViewState(),intersectId:l.getIntersectId(),restrictedFunctions:a.config.restrictedFunctions,forceEnableGeometryFunctions:a.config.forceEnableGeometryFunctions,distributions:a.config.distributions,pointsOfInterest:a.config.pointsOfInterest,plotSingleVariableImplicitEquations:a.config.plotSingleVariableImplicitEquations,plotImplicits:a.config.plotImplicits,plotInequalities:a.config.plotInequalities,sliders:a.config.sliders}},p.onEvaluatorResults=function(e){i.controller.dispatch({type:"on-evaluator-changes",changes:e.evaluationStates}),i.controller.dispatch({type:"process-graph-data",graphData:e.graphData}),e.renderSlowly?d.redrawSlowly():d.redrawAllLayers()},this.unsubFunc=this.controller.subToChanges(function(){var e;i.controller.doesDOMHaveSize()&&(i.view.update(),d.update()),function(){var e=l.computeMajorLayout(),t={left:e.grapher.left,right:e.grapher.left+e.grapher.width,width:e.grapher.width,top:e.grapher.top,bottom:e.grapher.top+e.grapher.height,height:e.grapher.height},o=d.getCurrentViewport(),s={top:o.ymax,bottom:o.ymin,left:o.xmin,right:o.xmax,width:o.xmax-o.xmin,height:o.ymax-o.ymin};v.isEqual(s,h.mathCoordinates)||h.setProperty("mathCoordinates",s);0<t.height&&0<t.width&&!v.isEqual(t,h.pixelCoordinates)&&h.setProperty("pixelCoordinates",t)}(),e=d.getProjection(),a.setProperty("zoomedDefault",d.viewportController.isZoomRestored()),a.setProperty("squareAxes",e.viewport.isSquare(e.screen))});var h=new C.UnderscoreModel;h.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=h,f(this.rootElt).on("keydown.calculator-"+this.__id,function(e){i.grapher&&i.grapher.audioGraph.handleKeydown(e),i.instanceHotkeys.handleKeydown(e)}),f(window).on("dcg-tapstart.calculator-"+this.__id,function(e){var t,o=f(e.target),s=!!o.closest(i.rootElt).length,r=e.wasHandled("create-expression-with-keyboard"),a=!!o.closest(".dcg-api-shared-keypad-root").length,n=!!o.hasClass("dcg-shell");s||a||n||r||l.dispatch({type:"set-none-selected"}),e.wasHandled("do-not-clear-poi-labels")||(d.traceLayer.clearOpenedPOI(),d.redrawAllLayers()),l.isInEditListMode()&&(t=0===o.closest(".dcg-exppanel").length&&0===o.closest(".dcg-options-menu").length&&0===o.closest(".dcg-expression-top-bar").length&&0===o.closest(".dcg-keypad").length,s&&!t||l.dispatch({type:"set-edit-list-mode",isEditListMode:!1,focusExpressionList:!1}))}),this.grapher=d,this.evaluator=p,this.tourManager=w({evaluator:p}),this.controller.dispatch({type:"set-blank"});var g={};["degreeMode"].forEach(function(e){void 0!==o[e]&&(g[e]=o[e])}),a.setGraphSettings(g),a.config.expressionsCollapsed&&this.setOptions({expressionsCollapsed:!0}),a.config.capExpressionSize&&this.setOptions({capExpressionSize:!0}),a.config.hasOwnProperty("pointsOfInterest")&&this.setOptions({pointsOfInterest:a.config.pointsOfInterest}),a.config.hasOwnProperty("backgroundColor")&&this.setOptions({backgroundColor:a.config.backgroundColor}),a.config.hasOwnProperty("textColor")&&this.setOptions({textColor:a.config.textColor}),a.config.observe("language",function(){var e=i.controller.getState();i.controller.dispatch({type:"set-state",state:e}),i.tourManager&&(i.tourManager.closingMsg=function(e,t){return"<b>"+e+"</b><br>"+i.controller.s("graphing-tours-label-self-destruct",{seconds:t})})}),this.instanceHotkeys=new y.default(l)}function i(){var t=f('<div style="z-index:99999; position: absolute; left: 0; top: 0;background:#FFF">waiting...</div>').appendTo("body"),e=window,o=[];e.Calc.controller.onEvaluatorChangesSpy=function(){o.push(Date.now())},setInterval(function(){for(var e=Date.now();1e3<e-o[0];)o.shift();t.text(o.length+" fps")},100)}e.default=a,s.getQueryParams().simulationFPS&&(r=setInterval(function(){window.Calc&&(clearInterval(r),setTimeout(i,1e3))},1))});
define('lib/dom-change-detector',["require","exports","tslib","lib/animation-frame","jquery"],function(require,e,i,t,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.checkAllWatchingDetectors=e.testFixture=void 0;var h=1,n={},r=!1;function d(){r=!0,t.requestAnimationFrame(a)}function a(){for(var t in e.testFixture.rafSPY&&e.testFixture.rafSPY(),r=!1,n)n[t].detectAndEnqueueEvent(),r=!0;if(r)for(var t in d(),n)n[t].dispatchQueuedEvent()}e.testFixture={},e.checkAllWatchingDetectors=a;var o=(c.prototype.stopWatching=function(){delete n[this.id]},c.prototype.startWatching=function(){this.checkForChanges(),n[this.id]=this,r||d()},c.prototype.resetAppliedScalingAndGetBoundingClientRect=function(){var t=this.elt.getBoundingClientRect(),e={x:t.width/this.elt.offsetWidth,y:t.height/this.elt.offsetHeight};if(e.x===this.appliedScale.x&&e.y===this.appliedScale.y)return t;var i=s(this.elt).children(".dcg-wrapper")[0];return i&&(this.appliedScale=e,s(i).css({transform:"scale("+1/this.appliedScale.x+","+1/this.appliedScale.y+")",width:100*this.appliedScale.x+"%",height:100*this.appliedScale.y+"%","transform-origin":"0 0"})),t},c.prototype.detectAndEnqueueEvent=function(){var t,e;this.destroyed||(e=!0,document.body&&document.body.contains(this.elt)?(e=(t=this.resetAppliedScalingAndGetBoundingClientRect()).top>window.innerHeight||t.bottom<0||t.left>window.innerWidth||t.right<0,this.lastSize?t.width===this.lastSize.width&&t.height===this.lastSize.height||(this.lastSize.width=t.width,this.lastSize.height=t.height,this.queuedEvent={type:"resized",target:this.elt,size:i.__assign({},this.lastSize),isOffscreen:e}):(this.lastSize={width:t.width,height:t.height},this.queuedEvent={type:"added",target:this.elt,size:i.__assign({},this.lastSize),isOffscreen:e})):this.lastSize&&(this.lastSize=void 0,this.queuedEvent={type:"removed",target:this.elt,isOffscreen:!0}),e!==this.lastOffscreen&&(this.lastOffscreen=e,this.queuedEvent||(this.queuedEvent={type:"offscreen-noop",target:this.elt,isOffscreen:e})))},c.prototype.dispatchQueuedEvent=function(){var t=this.queuedEvent;t&&(this.queuedEvent=void 0,this.cb(t))},c.prototype.checkForChanges=function(){this.detectAndEnqueueEvent(),this.dispatchQueuedEvent()},c.prototype.destroy=function(){for(var t in this.stopWatching(),this)this.hasOwnProperty(t)&&delete this[t];this.destroyed=!0},c);function c(t,e){this.elt=t,this.cb=e,this.destroyed=!1,this.lastOffscreen=!1,this.id=h.toString(),this.appliedScale={x:1,y:1},h++}e.default=o});
define('graphing/compute-async-screenshot-bounds',["require","exports","lib/console"],function(require,t,O){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeBoundsFromScreenshotOpts=void 0,t.computeBoundsFromScreenshotOpts=function(t){var o=t.mode,e=t.width,i=t.height,r=t.currentBounds,h=t.graphpaperAspectRatio,p=t.mathAspectRatio,f=t.mathBounds,m=e/i,l=r.left+r.width/2,b=r.bottom+r.height/2;if(void 0===f.left!=(void 0===f.right)||void 0===f.bottom!=(void 0===f.top))return O.warn('asyncScreenshot: cannot specify "left" bound without "right" or "bottom" bound without "top". Got: '+f),r;var g,n,d,s,u,c,a,v,w,y=void 0!==f.left&&void 0!==f.right,x=void 0!==f.bottom&&void 0!==f.top,B=y&&x;switch(o){case"stretch":return B?f:y?{left:f.left,right:f.right,bottom:r.bottom,top:r.top}:x?{left:r.left,right:r.right,bottom:f.bottom,top:f.top}:r;case"contain":return B?(d=f.right-f.left,s=f.top-f.bottom,u={x:f.left+d/2,y:f.bottom+s/2},d/s<m?(g=(n=s/i)*p,{left:u.x-g*e/2,right:u.x+g*e/2,bottom:f.bottom,top:f.top}):(n=(g=d/e)/p,{left:f.left,right:f.right,bottom:u.y-n*i/2,top:u.y+n*i/2})):y?(c=f.right-f.left,a=f.left+c/2,c/r.height<m?{left:a-(g=(n=r.height/i)*p)*e/2,right:a+g*e/2,bottom:r.bottom,top:r.top}:(n=(g=c/e)/p,{left:f.left,right:f.right,bottom:b-n*i/2,top:b+n*i/2})):x?(v=f.top-f.bottom,w=f.bottom+v/2,r.width/v<m?{left:l-(g=(n=v/i)*p)*e/2,right:l+g*e/2,bottom:f.bottom,top:f.top}:(n=(g=r.width/e)/p,{left:r.left,right:r.right,bottom:w-n*i/2,top:w+n*i/2})):h<m?{left:l-(g=(n=r.height/i)*p)*e/2,right:l+g*e/2,bottom:r.bottom,top:r.top}:(n=(g=r.width/e)/p,{left:r.left,right:r.right,bottom:b-n*i/2,top:b+n*i/2});case"preserveX":return B?(d=f.right-f.left,s=f.top-f.bottom,u={x:f.left+d/2,y:f.bottom+s/2},n=(g=d/e)/p,{left:f.left,right:f.right,bottom:u.y-n*i/2,top:u.y+n*i/2}):x?(v=f.top-f.bottom,w=f.bottom+v/2,r.width,n=(g=r.width/e)/p,{left:r.left,right:r.right,bottom:w-n*i/2,top:w+n*i/2}):y?(n=(g=(c=f.right-f.left)/e)/p,{left:f.left,right:f.right,bottom:b-n*i/2,top:b+n*i/2}):(n=(g=(c=r.right-r.left)/e)/p,{left:r.left,right:r.right,bottom:b-n*i/2,top:b+n*i/2});case"preserveY":return B?(d=f.right-f.left,s=f.top-f.bottom,g=(n=s/i)*p,{left:(u={x:f.left+d/2,y:f.bottom+s/2}).x-g*e/2,right:u.x+g*e/2,bottom:f.bottom,top:f.top}):y?(c=f.right-f.left,a=f.left+c/2,r.height,{left:a-(g=(n=r.height/i)*p)*e/2,right:a+g*e/2,bottom:r.bottom,top:r.top}):x?{left:l-(g=(n=(v=f.top-f.bottom)/i)*p)*e/2,right:l+g*e/2,bottom:f.bottom,top:f.top}:{left:l-(g=(n=(v=r.top-r.bottom)/i)*p)*e/2,right:l+g*e/2,bottom:r.bottom,top:r.top};default:return r}}});
define('dcgview-helpers/mathquill-proxy',["require","exports","dcgview-helpers/mathquill-view"],function(require,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MathQuillProxy=void 0;var o=(i.prototype.simulateUserChangedLatex=function(){e.default.simulateUserChangedLatex(this.mq)},i.prototype.simulateKeypress=function(t){e.default.simulateKeypress(this.mq,t)},i.prototype.latex=function(t){return void 0===t?this.mq.latex():(this.mq.latex(t),void this.simulateUserChangedLatex())},i.prototype.reflow=function(){this.mq.reflow()},i.prototype.el=function(){return this.mq.el()},i.prototype.getAriaLabel=function(){return this.mq.getAriaLabel()},i.prototype.setAriaLabel=function(t){return this.mq.setAriaLabel(t)},i.prototype.html=function(){return this.mq.html()},i.prototype.mathspeak=function(){return this.mq.mathspeak()},i.prototype.select=function(){this.mq.select()},i.prototype.moveToRightEnd=function(){this.mq.moveToRightEnd()},i.prototype.cmd=function(t){this.mq.cmd(t),this.simulateUserChangedLatex()},i.prototype.write=function(t){this.mq.write(t),this.simulateUserChangedLatex()},i.prototype.keystroke=function(t){this.simulateKeypress(t)},i.prototype.typedText=function(t){this.mq.typedText(t),this.simulateUserChangedLatex()},i.prototype.clearSelection=function(){this.mq.clearSelection()},i.prototype.getAriaPostLabel=function(){return this.mq.getAriaPostLabel()},i.prototype.setAriaPostLabel=function(t,e){this.mq.setAriaPostLabel(t,e)},i.prototype.blur=function(){this.mq.blur()},i.prototype.focus=function(){this.mq.focus()},i.prototype.revert=function(){this.mq.revert()},i.prototype.ignoreNextMousedown=function(t){this.mq.ignoreNextMousedown(t)},i.prototype.clickAt=function(t,e,o){this.mq.clickAt(t,e,o)},i);function i(t){this.mq=t,this.id=t.id,this.data=t.data}t.MathQuillProxy=o});
define('main/raf-loop',['require','lib/animation-frame','lib/parse-query-params'],function(require){"use strict";var n=require("lib/animation-frame");var i=(0,require("lib/parse-query-params").getQueryParams)().timeoutLoop;return void 0!==i?(i=parseFloat(i),isNaN(i)&&(i=1e3/60),function(t){setTimeout(function e(){setTimeout(e,i),t(Date.now())},i)}):function(i){n.requestAnimationFrame(function e(t){n.requestAnimationFrame(e),i(t)})}});
define('main/shared-clock-bus',["require","exports","main/raf-loop","underscore_model"],function(require,e,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.unsubscribe=e.subscribe=void 0;var i=new r.UnderscoreModel;n(function(e){i.triggerEvent("tick",e)});var t=0;e.subscribe=function(r){return t+=1,i.observeEvent("tick."+t,function(e,n){r(n)}),t},e.unsubscribe=function(e){i.unobserveEvent("tick."+e)}});
define('main/shared-worker-pool',["require","exports","worker/workerpool","lib/urlparser"],function(require,e,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=o.getParameter(location.search,"nworkers"),a=4;t&&(a=parseInt(t,10)),e.default=new r(a)});
define('graphing-calc/json/config-options',["require","exports","tslib","core/lib/color-helpers","lib/console","main/font_sizes","expressions/colors","expressions/image_file_to_data_url","core/lib/deepCopy","api/util"],function(require,e,o,a,n,s,i,t,r,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var p={keypad:!(e.validateConfigOptions=e.isConfigOption=e.publicConfigOptions=void 0),graphpaper:!0,expressions:!0,settingsMenu:!0,zoomButtons:!0,showResetButtonOnGraphpaper:!1,expressionsTopbar:!0,capExpressionSize:!1,pointsOfInterest:!0,trace:!0,border:!0,lockViewport:!1,expressionsCollapsed:!1,administerSecretFolders:!1,advancedStyling:!1,clickableObjects:!1,images:!0,imageUploadCallback:t.imageFileToDataURL,folders:!0,notes:!0,sliders:!0,links:!0,qwertyKeyboard:!0,restrictedFunctions:!1,forceEnableGeometryFunctions:!1,pasteGraphLink:!1,pasteTableData:!0,degreeMode:!1,clearIntoDegreeMode:!1,autosize:!0,plotSingleVariableImplicitEquations:!0,plotImplicits:!0,plotInequalities:!0,colors:{RED:i.RED,BLUE:i.BLUE,GREEN:i.GREEN,ORANGE:i.ORANGE,PURPLE:i.PURPLE,BLACK:i.BLACK},invertedColors:!1,functionDefinition:!0,projectorMode:!1,decimalToFraction:!0,fontSize:s.MEDIUM,language:"en",backgroundColor:"#fff",textColor:"#000",distributions:!0,brailleMode:"none",sixKeyInput:!1,brailleControls:!0,zoomFit:!0};e.publicConfigOptions=Object.keys(p);var d={showHamburger:!1,disableScrollFix:!1,branding:!0,redrawSlowly:!1,onlyTraceSelected:!1,disableMouseInteractions:!1,nativeOnscreenKeypad:!1,plaidMode:!1,pasteGraphLinkCallback:void 0,editOnWeb:!1,crossOriginSaveTest:!1,enableTabindex:!0,audioTraceReverseExpressions:!1,transparentBackground:!1,pauseWhenOffscreen:!1},u={solutions:!0,menus:!0,singleVariableSolutions:!0},c=o.__assign(o.__assign({},p),d);e.isConfigOption=function(e){return!!p.hasOwnProperty(e)||(!!d.hasOwnProperty(e)||!!u.hasOwnProperty(e))},e.validateConfigOptions=function(e){var o=r.default(c);for(var s in e)o.hasOwnProperty(s)&&(o[s]=e[s]);return a.isValidHexColor(o.backgroundColor)||(o.backgroundColor=c.backgroundColor,n.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)")),a.isValidHexColor(o.textColor)||(o.textColor=c.textColor,n.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)")),void 0===e.zoomButtons&&(o.graphpaper&&!o.lockViewport||(o.zoomButtons=!1)),void 0===e.images&&(o.graphpaper||(o.images=!1)),e.hasOwnProperty("menus")&&(n.warn("As of API version 0.4, the 'menus' option is deprecated and has been split into 'settingsMenu' (boolean) and 'expressionsTopbar' (boolean)."),e.hasOwnProperty("settingsMenu")||(o.settingsMenu=!!e.menus),e.hasOwnProperty("expressionsTopbar")||(o.expressionsTopbar=!!e.menus)),e.hasOwnProperty("solutions")&&(n.warn("As of API v1.0, the 'solutions' option is deprecated and has been replaced with 'pointsOfInterest' (boolean)."),e.hasOwnProperty("pointsOfInterest")||(o.pointsOfInterest=!!e.solutions)),e.hasOwnProperty("singleVariableSolutions")&&n.warn("As of API v1.0, the 'singleVariableSolutions' has been removed. The calculator no longer displays solutions to single variable equations."),o.graphpaper||(o.expressionsCollapsed&&(o.expressionsCollapsed=!1,n.warn("Desmos API initialized with bad options. graphpaper: false and expressionsCollapsed: true are incompatible. Proceeding with expressionsCollapsed: false.")),o.zoomButtons&&(o.zoomButtons=!1,n.warn("Desmos API initialized with bad options. graphpaper: false and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),o.showResetButtonOnGraphpaper&&(o.showResetButtonOnGraphpaper=!1,n.warn("Desmos API initialized with bad options. graphpaper: false and showResetButtonOnGraphpaper: true are incompatible. Proceeding with showResetButtonOnGraphpaper: false."))),o.lockViewport&&o.zoomButtons&&(o.zoomButtons=!1,n.warn("Desmos API initialized with bad options. lockViewport: true and zoomButtons: true are incompatible. Proceeding with zoomButtons: false.")),!1!==o.notes&&!1!==o.folders&&!1!==o.images||!0!==o.pasteGraphLink||(o.pasteGraphLink=!1,n.warn("Desmos API initialized with bad options. pasteGraphLink: true is incompatible with disabling the creation of note, folder, or image expressions. Proceeding with pasteGraphLink: false.")),o.language&&(o.language=l.validateLanguage(o.language)),o}});
define('api/graphing',["require","exports","tslib","lib/i18n","main/calc_embed","core/lib/deepCopy","underscore_model","core/math/recttransformation","lib/dom-change-detector","graphing/compute-async-screenshot-bounds","graphing-calc/api/sanitize-expression","dcgview-helpers/mathquill-view","dcgview-helpers/mathquill-proxy","lib/console","underscore","main/shared-clock-bus","main/shared-worker-pool","core/graphing-calc/json/graph-settings","graphing-calc/json/config-options","core/lib/random-seed","../lib/underscore-shim"],function(require,e,l,t,a,h,r,o,p,d,n,c,u,i,s,g,f,y,m,b,v){"use strict";function x(e,t){var o={},r={};for(var n in e)m.isConfigOption(n)?o[n]=e[n]:y.isGraphSetting(n)?r[n]=e[n]:t||i.warn("Unrecognized setting: "+n+". Ignoring.");return{configOptions:o,settingsOptions:r}}function _(e,t){var o={};return t.hasOwnProperty("x")&&(o.x=e.mapX(t.x)),t.hasOwnProperty("y")&&(o.y=e.mapY(t.y)),o}var w;Object.defineProperty(e,"__esModule",{value:!0});var S=[],C=!1;var O,B=(O=v.UnderscoreModelShim,l.__extends(A,O),A.prototype.destroy=function(){function e(e){i.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}for(var t in this._calc.destroy(),this.controller.onEventsEmitted=function(){},g.unsubscribe(this._sharedClockBusToken),this.domChangeDetector.destroy(),this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){},this._destroyed=!0},A.prototype._syncGraphpaperBounds=function(){var e=this;this.controller.runAfterDispatch(function(){e.setProperty("graphpaperBounds",{mathCoordinates:e._calc.graphpaperBounds.mathCoordinates,pixelCoordinates:e._calc.graphpaperBounds.pixelCoordinates})})},A.prototype._initGraphSettings=function(){var t=this,o=new r.UnderscoreModel;this.settings=this.graphSettings=o,y.publicGraphSettings.forEach(function(e){t._calc.grapher.settings.observeAndSync(e,function(){t.controller.runAfterDispatch(function(){o.setProperty(e,t._calc.grapher.settings[e])})})}),m.publicConfigOptions.forEach(function(e){t._calc.grapher.settings.config.observeAndSync(e,function(){t.controller.runAfterDispatch(function(){o.setProperty(e,t._calc.grapher.settings.config[e])})})})},A.prototype.updateSettings=function(e){var t=x(e,!1),o=t.configOptions,r=t.settingsOptions;s.isEmpty(o)||this._calc.setOptions(o),s.isEmpty(r)||this._calc.grapher.settings.setGraphSettings(r),this.notifyControllerOfAPICall()},A.prototype.setGraphSettings=function(e){i.warn("As of API v0.8 the 'setGraphSettings' method is deprecated and has been renamed 'updateSettings.'"),this.updateSettings(e),this.setGraphSettings=this.updateSettings,this.notifyControllerOfAPICall()},A.prototype.fetchLanguage=function(e){return t.fetchLanguage(e)},A.prototype.setDefaultState=function(e){this._calc.grapher.settings.setProperty("defaultState",e),this.notifyControllerOfAPICall()},A.prototype.mathToPixels=function(e){return _(o.RT.fromRects(this.graphpaperBounds.mathCoordinates,this.graphpaperBounds.pixelCoordinates),e)},A.prototype.pixelsToMath=function(e){return _(o.RT.fromRects(this.graphpaperBounds.pixelCoordinates,this.graphpaperBounds.mathCoordinates),e)},A.prototype.notifyControllerOfAPICall=function(){this.controller.dispatch({type:"render"})},A.prototype.setExpression=function(e){var t=this.controller.getItemModel(e.id),o=t&&t.type,r=n.validateItem(e,o,this.controller);if(r)if(o)this.controller.dispatch({type:"set-expression-properties-from-api",id:r.id,properties:r});else{if("image"===r.type)return;this.controller.dispatch({type:"add-item-to-end-from-api",state:r})}},A.prototype.setExpressions=function(e){e.forEach(this.setExpression.bind(this))},A.prototype.removeExpression=function(e){var t=e.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:t})},A.prototype.removeExpressions=function(e){e.forEach(this.removeExpression.bind(this))},A.prototype.removeSelected=function(){var e=this.controller.getSelectedItem();if(e){var t=e.id;return this.controller.dispatch({type:"remove-item-by-id",id:t}),t}},A.prototype.setMathBounds=function(e){e&&e.left<e.right&&e.bottom<e.top?this._calc.setViewport([e.left,e.right,e.bottom,e.top]):i.warn("Invalid bounds argument. Expected a bounds object with bounds.bottom < bounds.top, and bounds.left < bounds.right. Got "+JSON.stringify(e)),this.notifyControllerOfAPICall()},A.prototype.setViewport=function(e){4==e.length&&e[1]>e[0]&&e[3]>e[2]?this._calc.setViewport(e):i.warn("Invalid viewport.  Expected [xmin, xmax, ymin, ymax].  Got "+e),this.notifyControllerOfAPICall()},A.prototype.resize=function(){this.domChangeDetector.checkForChanges()},A.prototype.getState=function(e){return this.controller.getState(e)},A.prototype.getExpressions=function(){return this.getState({stripDefaults:!1}).expressions.list.map(n.sanitizeItem)},A.prototype.setBlank=function(e){this.controller.dispatch({type:"set-blank",opts:e||{}})},A.prototype.setState=function(e,t){this.controller.dispatch({type:"set-state",state:e,opts:t||{}})},A.prototype.undo=function(){this.controller.dispatch({type:"undo"})},A.prototype.redo=function(){this.controller.dispatch({type:"redo"})},A.prototype.clearHistory=function(){this.controller.dispatch({type:"clear-undoredo-history"})},A.prototype.newRandomSeed=function(){this.updateSettings({randomSeed:b.default()})},A.prototype.screenshot=function(e){return e=e||{},e=this._validateBrailleScreenshotOptions(e),this._calc.grapher.screenshot(e)},A.prototype._getMathAspectRatio=function(){var e=this.graphpaperBounds.mathCoordinates,t=this._calc.grapher.getProjection().pixelCoordinates,o=t.right-t.left,r=t.bottom-t.top;return e.width/o/(e.height/r)},A.prototype.isProjectionUniform=function(){return!!this._calc.grapher.getProjection().settings.squareAxes},A.prototype._validateBrailleScreenshotOptions=function(e){var t=(e=h.default(e)).braille;if(t){var o=t.embosserModel;if(!o)return i.warn("Screenshot braille options requires an embosser model to be specified. "),i.warn("Continuing with non-braille screenshot."),delete e.braille,e;if("etc"===o&&(t.embosserModel="etc11"),"vpmax"===o&&(t.embosserModel="vpmax11"),"etc8"!==t.embosserModel&&"etc11"!==t.embosserModel&&"vpmax8"!==t.embosserModel&&"vpmax11"!==t.embosserModel)return i.warn('Unknown screenshot braille embosser model. Valid models are "etc" and "vpmax".'),i.warn("Continuing with non-braille screenshot."),delete e.braille,e;"nemeth"!==t.brailleMode&&"ueb"!==t.brailleMode&&(i.warn("Screenshot options braille.brailleMode must be nemeth or ueb. Proceeding with nemeth."),t.brailleMode="nemeth"),e.width&&(i.warn("Screenshot width option is ignored when exporting Braille."),delete e.width),e.height&&(i.warn("Screenshot height option is ignored when exporting Braille."),delete e.height),e.targetPixelRatio&&(i.warn("Screenshot targetPixelRatio option is ignored when exporting Braille."),delete e.targetPixelRatio),e.preserveAxisNumbers&&(i.warn("Screenshot preserveAxisNumbers option is ignored when exporting Braille."),delete e.preserveAxisNumbers)}return e},A.prototype._validateAsyncScreenshotOpts=function(e){var t=(e=h.default(e)).mode||"contain",o=e.width||e.height||this.graphpaperBounds.pixelCoordinates.width,r=e.height||e.width||this.graphpaperBounds.pixelCoordinates.height,n=e.targetPixelRatio||1,i=e.preserveAxisNumbers;e.hasOwnProperty("format")||(e.svg?(e.format="svg",delete e.svg):e.format="png");var s=e.mathBounds||{},a=this._getMathAspectRatio(),p=this.graphpaperBounds.pixelCoordinates.width/this.graphpaperBounds.pixelCoordinates.height,c=d.computeBoundsFromScreenshotOpts({mode:t,width:o,height:r,currentBounds:this.graphpaperBounds.mathCoordinates,graphpaperAspectRatio:p,mathAspectRatio:a,mathBounds:s});return{opts:l.__assign(l.__assign({},e),{width:o,height:r,targetPixelRatio:n,preserveAxisNumbers:i}),mathBounds:c}},A.prototype.asyncScreenshot=function(e,t){if(arguments.length){if(1===arguments.length){if("function"!=typeof e)return void i.warn("asyncScreenshot expects a callback");t=e,e={}}e=e||{},e=this._validateBrailleScreenshotOptions(e);var o=this._validateAsyncScreenshotOpts(e),r=o.opts,n=o.mathBounds;S.push({api:this,options:r,mathBounds:n,state:this.getState(),callback:t}),function t(){if(!C){for(var e,o,r,n,i,s,a,p,c,l,h;(e=S.shift())&&e.api._destroyed;);e&&(C=!0,r=(o=e).options,n=o.mathBounds,i=o.state,s=o.callback,(a=w=w||new B).setState(i),a.setMathBounds(n),["majorAxisOpacity","minorAxisOpacity","axisLineOffset","axisLineWidth","labelSize","graphLineWidth","pointLineWidth"].forEach(function(e){"axisLineWidth"===e?a._calc.grapher.settings.setProperty(e,o.api._calc.grapher.settings[e]):a._calc.grapher.settings[e]=o.api._calc.grapher.settings[e]}),p=a._calc.evaluator,c=function(){a._calc.grapher.asyncScreenshot(r,function(e){C=!1,t(),s(e)})},l=o.api._calc.controller,h=g.subscribe(function(){l.areAnyImagesLoading()||(g.unsubscribe(h),p.notifyWhenSynced(c))}))}}()}else i.warn("asyncScreenshot expects a callback")},A.prototype.setOptions=function(e){var t=this._calc.setOptions(e);return this.notifyControllerOfAPICall(),t},A.prototype.focusFirstExpression=function(){var e=this.controller.getItemModelByIndex(0);e&&this.controller.dispatch({type:"move-focus-to-item",id:e.id,where:"end"})},A.prototype.HelperExpression=function(e){var t=e&&e.latex||"",o=new r.UnderscoreModel;return o.latex=t,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:t,proxy:o}}),o},A);function A(e,t,o){var n=O.call(this)||this;if(n._destroyed=!1,n.isOffscreen=!1,!(n instanceof A))return new A(e,t,o);var r=x(t||{},!0),i=m.validateConfigOptions(r.configOptions),s=r.settingsOptions;return n._calc=new a.default(e,f.default,i),n._calc.interceptTouch(),n.controller=n._calc.controller,n.controller.onEventsEmitted=function(e){var t=n.controller.getSelectedItem();n.setProperty("isAnyExpressionSelected",!!t),n.setProperty("selectedExpressionId",t?t.id:void 0),n.setProperty("expressionAnalysis",n.controller.getExpressionAnalysis());var o=c.default.getFocusedMathquill();for(var r in n.setProperty("focusedMathQuill",o?new u.MathQuillProxy(o):void 0),e)e.hasOwnProperty(r)&&e[r]&&n.triggerEvent(r,void 0)},n._calc.graphpaperBounds.observeAndSync("mathCoordinates",n._syncGraphpaperBounds.bind(n)),n._calc.graphpaperBounds.observeAndSync("pixelCoordinates",n._syncGraphpaperBounds.bind(n)),n.colors=n.controller.getColors(),n._initGraphSettings(),n.updateSettings(s),n._sharedClockBusToken=g.subscribe(function(e){var t=n._calc.grapher.settings.config.pauseWhenOffscreen&&n.isOffscreen;n._calc.tick(e,t)}),n.domChangeDetector=new p.default(e,function(e){switch(n.isOffscreen=e.isOffscreen,e.type){case"offscreen-noop":break;case"added":n._calc.resize(e.size);break;case"removed":break;case"resized":n._calc.resize(e.size)}}),i.autosize?n.domChangeDetector.startWatching():n.domChangeDetector.checkForChanges(),"function"==typeof o&&o(n),n}e.default=B});
define('main/calc_headless',["require","exports","main/graph_settings","main/evaluator","underscore_model","main/controller"],function(require,t,s,l,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeadlessCalc=void 0;var e=(o.prototype.setBlank=function(t){this.controller.dispatch({type:"set-blank",opts:t})},o.prototype.tick=function(){this.evaluator.tick()},o.prototype.destroy=function(){this.evaluator.destroy()},o);function o(t,e){var o=this,i=new s;for(var n in e)i.config.setProperty(n,e[n]);this.controller=new d.default(i);var r=new l.Evaluator(t);this.controller.setEvaluator(r),r.readEvaluatorConfig=function(){return{evaluationMode:"graphing",globalRandomSeed:i.randomSeed,degreeMode:i.degreeMode,restrictedFunctions:i.config.restrictedFunctions,distributions:i.config.distributions,pointsOfInterest:i.config.pointsOfInterest,plotSingleVariableImplicitEquations:i.config.plotSingleVariableImplicitEquations,plotImplicits:i.config.plotImplicits,plotInequalities:i.config.plotInequalities,sliders:i.config.sliders}},r.onEvaluatorResults=function(t){o.controller.dispatch({type:"on-evaluator-changes",changes:t.evaluationStates})};var a=new c.UnderscoreModel;a.setProperties({pixelCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0},mathCoordinates:{top:0,bottom:0,left:0,right:0,width:0,height:0}}),this.graphpaperBounds=a,this.evaluator=r,this.setBlank()}t.HeadlessCalc=e});
define('api/headless',["require","exports","main/calc_headless","graphing-calc/json/config-options","main/shared-clock-bus","main/shared-worker-pool","graphing-calc/api/sanitize-expression","underscore_model","lib/console"],function(require,t,e,o,s,i,r,n,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=(c.prototype.destroy=function(){function t(t){p.warn("You've destroyed this API instance. You can no longer call ."+t+"()")}for(var e in this._calc.destroy(),s.unsubscribe(this._sharedClockBusToken),this)"function"==typeof this[e]?this[e]=t.bind(this,e):this.hasOwnProperty(e)&&delete this[e];this.destroy=function(){}},c.prototype.setExpression=function(t){var e=this.controller.getItemModel(t.id),o=e&&e.type,s=r.validateItem(t,o,this.controller);if(s)if(o)this.controller.dispatch({type:"set-expression-properties-from-api",id:s.id,properties:s});else{if("image"===s.type)return;this.controller.dispatch({type:"add-item-to-end-from-api",state:s})}},c.prototype.setExpressions=function(t){t.forEach(this.setExpression.bind(this))},c.prototype.removeExpression=function(t){var e=t.id.toString();this.controller.dispatch({type:"remove-item-by-id",id:e})},c.prototype.removeExpressions=function(t){t.forEach(this.removeExpression.bind(this))},c.prototype.getState=function(t){return this.controller.getState(t)},c.prototype.getExpressions=function(){return this.getState({stripDefaults:!1}).expressions.list.map(r.sanitizeItem)},c.prototype.setBlank=function(t){this.controller.dispatch({type:"set-blank",opts:t||{}})},c.prototype.setState=function(t,e){this.controller.dispatch({type:"set-state",state:t,opts:e||{}})},c.prototype.HelperExpression=function(t){var e=t&&t.latex||"",o=new n.UnderscoreModel;return o.latex=e,this.controller.dispatch({type:"add-helper-expression",state:{type:"helper-expression",id:this.controller.generateId(),latex:e,proxy:o}}),o},c.prototype.resize=function(){},c);function c(){var t=this;if(!(this instanceof c))return new c;this._calc=new e.HeadlessCalc(i.default,o.validateConfigOptions({})),this.controller=this._calc.controller,this._sharedClockBusToken=s.subscribe(function(){t._calc.tick()})}t.default=a});
define('api/abstract',["require","exports","lib/console","underscore_model","ipad.scrollfix","lib/dom-change-detector"],function(require,e,o,t,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=(s.prototype.setupDomChangeDetector=function(e){var t=this;this.autoSize=e,n.limitScrollOnElement(this.rootElt),this.domChangeDetector=new i.default(this.rootElt,function(e){switch(e.type){case"added":t.view=t.onCreateView(),t.onResizeView(e.size);break;case"removed":t.onDestroyView(),t.view=void 0;break;case"resized":t.onResizeView(e.size)}}),!1!==this.autoSize?this.domChangeDetector.startWatching():this.domChangeDetector.checkForChanges()},s.prototype.detach=function(){o.warn(".detach() is deprecated. It should no longer be necessary")},s.prototype.destroy=function(){function e(e){o.warn("You've destroyed this API instance. You can no longer call ."+e+"()")}for(var t in this.view&&this.onDestroyView(),this.domChangeDetector.destroy(),this)"function"==typeof this[t]?this[t]=e.bind(this,t):this.hasOwnProperty(t)&&delete this[t];this.destroy=function(){}},s.prototype.resize=function(){this.domChangeDetector.checkForChanges()},s.prototype.updateView=function(){this.view&&document.body&&document.body.contains(this.rootElt)&&this.view.update()},s.prototype.triggerEvent=function(e,t){this.eventModel.triggerEvent(e,t)},s.prototype.observeEvent=function(e,t){this.eventModel.observeEvent(e,t)},s.prototype.unobserveEvent=function(e){this.eventModel.unobserveEvent(e)},s);function s(e){if(this.rootElt=e,this.eventModel=new t.UnderscoreModel,!e)throw new Error("must pass an HTMLElement to the API")}e.default=r});
define('immutable-store',['require','underscore','core/lib/deepCopy'],function(require){"use strict";var e=require("underscore"),h=require("core/lib/deepCopy").default;function o(t){return e.clone(t)}function t(t){this.setState(t)}return t.prototype.setState=function(t){this.state=t},t.prototype.getState=function(){return this.state},t.prototype.set=function(t,e){if(1!==arguments.length){if("string"==typeof t)return this.state=o(this.state),void(this.state[t]=e);var s=t.length-2,i=t[1+s];this.state=n=o(this.state);for(var a=0;a<=s;a++)var r=t[a],n=n[r]=o(n[r]);n[i]=e}else this.state=t},t.prototype.deepMutate=function(t,e){if(1===arguments.length)return e=t,this.state=h(this.state),void e(this.state);if("string"==typeof t)return this.state=o(this.state),this.state[t]=h(this.state[t]),void e(this.state[t]);for(var s=t.length-2,i=t[1+s],a=this.state=o(this.state),r=0;r<=s;r++)var n=t[r],a=a[n]=o(a[n]);e(a=a[i]=h(a[i]))},t.prototype.shallowMutate=function(t,e){if(1===arguments.length)return e=t,this.state=o(this.state),void e(this.state);if("string"==typeof t)return this.state=o(this.state),this.state[t]=o(this.state[t]),void e(this.state[t]);for(var s=t.length-1,i=this.state=o(this.state),a=0;a<=s;a++)var r=t[a],i=i[r]=o(i[r]);e(i)},t.areShallowEqual=function(t,e){},t.areDeepEqual=function(t,e){},{default:t}});
define('basic/model',["require","exports","immutable-store","main/shared-clock-bus","core/lib/label","main/evaluator","core/lib/label","underscore"],function(require,t,a,u,e,o,f,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=(i.prototype.isSingleExpression=function(){return"singleExpressionScientific"===this.evaluationMode||"singleExpressionFourFunction"===this.evaluationMode},i.prototype.destroy=function(){u.unsubscribe(this._sharedClockBusToken)},i.prototype.generateObjectId=function(){return(this._nextObjectId++).toString()},i.prototype.updateNextObjectId=function(){for(var t=this.store.getState().order,e=/^[0-9]+$/,o=this._nextObjectId=0,s=t;o<s.length;o++){var i,n=s[o];!e.test(n)||(i=parseInt(n,10))>=this._nextObjectId&&(this._nextObjectId=i+1)}},i.prototype.clearShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!1},i.prototype.markShouldDebounceUndoRedo=function(){this._shouldDebounceUndoRedo=!0},i.prototype.getShouldDebounceUndoRedo=function(){return this._shouldDebounceUndoRedo},i.prototype.clearCachedBrailleValues=function(){for(var t=0,e=this.getExpressionOrder();t<e.length;t++){var o=e[t];this.store.set(["expressions",o,"braille"],"")}},i.prototype.getState=function(){return this.store.getState()},i.prototype.getPersistedState=function(){var t=this.getState(),o=t.expressions,e=t.order,s=t.settings;return{expressions:{list:e.map(function(t){var e=o[t];return{id:e.id,latex:e.latex,displayAsFraction:e.displayAsFraction}})},settings:s}},i.prototype.setState=function(t){this.store.set(t),this._updateIndexes(),this.updateNextObjectId()},i.prototype.setStateFromAPI=function(t){var e=[],o={};t.expressions.list.forEach(function(t){e.push(t.id),o[t.id]={id:t.id,latex:t.latex,braille:"",type:"latex",displayAsFraction:!!t.displayAsFraction}}),this.setState({expressions:o,order:e,settings:t.settings,ui:{focus:void 0}})},i.prototype.canClear=function(){if(1<this.getNumberOfExpressions())return!0;var t=this.getExpressionOrder()[0];return""!==this.getExpressionLatex(t)},i.prototype.clear=function(){this.setState({expressions:{1:{id:"1",type:"latex",latex:"",braille:"",displayAsFraction:!1}},ui:{focus:void 0},order:["1"],settings:this.getState().settings})},i.prototype.getExpressionOrder=function(){return this.store.getState().order},i.prototype.getNumberOfExpressions=function(){return this.getExpressionOrder().length},i.prototype.getExpressionById=function(t){return this.getState().expressions[t]},i.prototype.getExpressionIndex=function(t){return this._indexes[t]},i.prototype._getExpressionByIndex=function(t){var e=this.getExpressionOrder()[t];return this.getExpressionById(e)},i.prototype._updateIndexes=function(){this._indexes={};for(var t=0,e=0,o=this.getExpressionOrder();e<o.length;e++){var s=o[e];this._indexes[s]=t,t+=1}this._evaluate()},i.prototype._usesAnsById=function(t){return-1!==this.getExpressionById(t).latex.indexOf("\\operatorname{ans}")},i.prototype._getPreviousExpById=function(t){var e=this.getExpressionIndex(t);return this._getExpressionByIndex(e-1)},i.prototype.createBlankAfterId=function(t){var e,o;this.isSingleExpression()||this.getExpressionById(t).latex&&(e=this.getExpressionIndex(t),o=this.generateObjectId(),this.store.shallowMutate("order",function(t){t.splice(e+1,0,o)}),this.store.shallowMutate("expressions",function(t){t[o]={id:o,latex:"",braille:"",type:"latex",displayAsFraction:!1}}),this._updateIndexes(),this.setFocusedById(o,!0))},i.prototype.conditionallyCopyPrevious=function(t){var e=this._getPreviousExpById(t),o=this.getExpressionById(t);null!=e&&""===o.latex&&this._usesAnsById(e.id)&&this.setLatexById(t,e.latex)},i.prototype.backspaceAtFrontOfId=function(e){var o;""===this.getExpressionById(e).latex&&1!==this.getNumberOfExpressions()&&(o=this.getExpressionIndex(e),this.store.shallowMutate("order",function(t){t.splice(o,1)}),this.store.shallowMutate("expressions",function(t){delete t[e]}),this._updateIndexes(),this._setFocusedByIndex(Math.max(o-1,0),!0))},i.prototype.setLatexById=function(t,e){this.store.set(["expressions",t,"latex"],e),this.store.set(["expressions",t,"braille"],""),""===e&&this.setFractionEvaluation(t,!1),this._evaluate()},i.prototype.setLatexAndBrailleById=function(t,e,o){this.store.set(["expressions",t,"latex"],e),this.store.set(["expressions",t,"braille"],o),""===e&&this.setFractionEvaluation(t,!1),this._evaluate()},i.prototype.setFractionEvaluation=function(t,e){this.store.set(["expressions",t,"displayAsFraction"],e)},i.prototype.setLatexOfFocusedExpression=function(t){var e=this.getFocusedExpressionId();e&&this.setLatexById(e,t)},i.prototype.isExpressionFocused=function(t){return this.getFocusedExpressionId()===t},i.prototype.getExpressionLatex=function(t){return this.getExpressionById(t).latex},i.prototype.getExpressionError=function(t){var e=this._evaluations[t];return e?e.error:""},i.prototype.getExpressionValue=function(t){var e=this._evaluations[t];if(e)return e.value},i.prototype.getExpressionAns=function(t){var e=this._evaluations[t];if(e)return e.ans},i.prototype.getExpressionAnsId=function(t){var e=this._evaluations[t];if(e)return e.ansId},i.prototype.shouldShowEvaluationForExpression=function(t){var e=this._evaluations[t];return!!e&&e.showEvaluation},i.prototype.isRationalizableConstant=function(t){var e=this._evaluations[t];return!!e&&e.isRationalizableConstant},i.prototype.canDisplayEvaluationAsFraction=function(t){var e=this.getExpressionValue(t);return!!e&&f.canDisplayAsFraction(e)},i.prototype._setFocusedByIndex=function(t,e){var o,s=this._getExpressionByIndex(t),i=this.store.getState().ui.focus,n=e?{type:"latex-expression",id:s.id}:void 0;r.isEqual(i,n)||(i&&(o=i.id,this.store.deepMutate("expressions",function(t){var e=t[o];e&&(e.braille="")})),!e&&this.getFocusedExpressionId()!==s.id||this.store.shallowMutate("ui",function(t){t.focus=n}))},i.prototype.setFocusedById=function(t,e){var o=this.getExpressionIndex(t);this._setFocusedByIndex(o,e)},i.prototype.focusPrevById=function(t){var e=this.getExpressionIndex(t)-1;0<=e&&this._setFocusedByIndex(e,!0)},i.prototype.focusNextById=function(t){var e=this.getExpressionIndex(t)+1;e<this.getNumberOfExpressions()?this._setFocusedByIndex(e,!0):this.createAtEnd()},i.prototype.getFocusedExpression=function(){var t=this.getFocusedExpressionId();return t?this.getExpressionById(t):void 0},i.prototype.getFocusedExpressionId=function(){var t=this.getState().ui.focus;return t&&t.id},i.prototype.clearFocusedExpression=function(){var t=this.getFocusedExpression();t&&this.setLatexById(t.id,"")},i.prototype.shouldShowClear=function(){if(1===this.getNumberOfExpressions())return!1;var t=this.getFocusedExpression();return!!t&&!!t.latex},i.prototype.getLastExpression=function(){return this._getExpressionByIndex(this.getNumberOfExpressions()-1)},i.prototype.isLastExpressionEmpty=function(){return!!this.getLastExpression().latex},i.prototype.createAtEnd=function(){this.createBlankAfterId(this.getLastExpression().id)},i.prototype.focusLastExpression=function(){this._setFocusedByIndex(this.getNumberOfExpressions()-1,!0)},i.prototype.focusFirstExpression=function(){this._setFocusedByIndex(0,!0)},i.prototype.getDegreeMode=function(){return this.getState().settings.degreeMode},i.prototype.setDegreeMode=function(t){this.store.set(["settings","degreeMode"],!!t),this._evaluate()},i.prototype._cleanupLatex=function(t){return"="===(t=e.trimLatex(t)).substr(t.length-1)&&(t=t.substr(0,t.length-1)),t},i.prototype._evaluate=function(){var e=this;this._evaluator.clearStatementsAndStartCompleteState(),this.getExpressionOrder().forEach(function(t){return e._evaluator.addStatement({id:t,index:e.getExpressionIndex(t),latex:e._cleanupLatex(e.getExpressionLatex(t)),shouldGraph:!1,type:"statement"})})},i.prototype._setupEvaluator=function(){var x=this;this._evaluator=new o.Evaluator(this.workerPool),this._evaluator.readEvaluatorConfig=function(){return{degreeMode:x.getDegreeMode(),evaluationMode:x.evaluationMode,additionalFunctions:x.additionalFunctions,functionDefinition:x.functionDefinition,replaceRoundWithReciprocal:x.replaceRoundWithReciprocal}},this._evaluator.onEvaluatorResults=function(t){var e=t.evaluationStates;for(var o in x._evaluations={},e){var s,i,n,r,a=e[o];x.getExpressionById(o)&&(void 0===(s=a.constant_value)&&a.zero_values&&a.zero_values.length&&(s=a.zero_values[0].val),i=a.hasOwnProperty("constant_value")&&f.canDisplayAsFraction(a.constant_value),n=!a.is_evaluable&&i,r=!!a.is_evaluable||n||Array.isArray(s),x._evaluations[o]={error:a.error,ans:void 0,ansId:void 0,value:s,showEvaluation:r,isRationalizableConstant:n})}for(var u=void 0,p=void 0,d=0,l=x.getExpressionOrder();d<l.length;d++){var c,o=l[d],h=x._evaluations[o];u&&h&&("number"==typeof(c=u.value)?(h.ans=c,h.ansId=p):Array.isArray(c)&&(h.ans="[...]")),u=h,p=o}"function"==typeof x.onEvaluationUpdate&&x.onEvaluationUpdate()}},i.prototype.reloadState=function(){this.setState(this.getState())},i.prototype.getFunctionDefinition=function(){return!!this.functionDefinition},i.prototype.enableFunctionDefinition=function(){this.functionDefinition=!0,this.reloadState()},i.prototype.disableFunctionDefinition=function(){this.functionDefinition=!1,this.reloadState()},i.prototype.getReplaceRoundWithReciprocal=function(){return!!this.replaceRoundWithReciprocal},i.prototype.enableReplaceRoundWithReciprocal=function(){this.replaceRoundWithReciprocal=!0,this.reloadState()},i.prototype.disableReplaceRoundWithReciprocal=function(){this.replaceRoundWithReciprocal=!1,this.reloadState()},i);function i(t){var e=this,o=t.evaluationMode,s=t.additionalFunctions,i=t.functionDefinition,n=t.replaceRoundWithReciprocal,r=t.workerPool;this._evaluations={},this._nextObjectId=0,this.store=new a.default({expressions:{1:{id:"1",latex:"",braille:"",type:"latex",displayAsFraction:!1}},order:["1"],settings:{degreeMode:!1},ui:{focus:void 0}}),this.evaluationMode=o,this.additionalFunctions=s,this.functionDefinition=i,this.replaceRoundWithReciprocal=n,this.workerPool=r,this._setupEvaluator(),this.clear(),this._sharedClockBusToken=u.subscribe(function(){e._evaluator.tick()})}t.default=s});
define('basic/controller',["require","exports","tslib","flux","underscore","./model","lib/state-stack","keypad/mq-commands","lib/i18n","dcgview-helpers/mathquill-view","lib/console","bugsnag","core/lib/color-helpers"],function(require,e,a,s,i,n,r,o,c,l,p,u,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d=(h.prototype.runAfterDispatch=function(e){this._queuedCallbacks.push(e)},h.prototype.enqueueEvent=function(e){var t=this;this.runAfterDispatch(function(){t.onEventEmitted&&t.onEventEmitted(e)})},h.prototype.getFunctionDefinition=function(){return this.options.functionDefinition},h.prototype.getSettingsMenu=function(){return this.settingsMenu},h.prototype.getBrailleMode=function(){return this.brailleMode},h.prototype.renderAsBraille=function(){return"none"!==this.brailleMode},h.prototype.setBrailleMode=function(e){this.brailleMode=e},h.prototype.getSixKeyInput=function(){return this.sixKeyInput},h.prototype.setSixKeyInput=function(e){this.sixKeyInput=e},h.prototype.getBrailleControls=function(){return this.brailleControls},h.prototype.setBrailleControls=function(e){this.brailleControls=e},h.prototype.getBrailleExpressionDownload=function(){return this.brailleExpressionDownload},h.prototype.setBrailleExpressionDownload=function(e){this.brailleExpressionDownload=e},h.prototype.getRestrictedEditing=function(){return this.options.restrictedEditing},h.prototype.getKeyboardMode=function(){return this.keyboardMode},h.prototype.getFontSize=function(){return this.fontSize},h.prototype.getInvertedColors=function(){return this.invertedColors},h.prototype.hasBackgroundColor=function(){return"#ffffff"!==this.getBackgroundColor()},h.prototype.getBackgroundColor=function(){var e=t.normalizeColor(this.backgroundColor||"#fff");return this.getInvertedColors()&&"#ffffff"!==e?t.invertColor(e):e},h.prototype.getTextColor=function(){var e=t.normalizeColor(this.textColor||"#000");return this.getInvertedColors()&&"#000000"!==e?t.invertColor(e):e},h.prototype.getAdditionalFunctions=function(){return this.options.additionalFunctions},h.prototype.getTypingSlashWritesDivisionSymbol=function(){return this.options.typingSlashWritesDivisionSymbol},h.prototype.setTypingAsteriskWritesTimesSymbol=function(e){this.typingAsteriskWritesTimesSymbol=e},h.prototype.getTypingAsteriskWritesTimesSymbol=function(){return this.typingAsteriskWritesTimesSymbol},h.prototype.setProjectorMode=function(e){this.projectorMode=e},h.prototype.isProjectorMode=function(){return this.projectorMode},h.prototype.getReplaceCommaWith10Exp=function(){return this.replaceCommaWith10Exp},h.prototype.setReplaceCommaWith10Exp=function(e){this.replaceCommaWith10Exp=e},h.prototype.getReplaceRoundWithReciprocal=function(){return this.model.getReplaceRoundWithReciprocal()},h.prototype.setReplaceRoundWithReciprocal=function(e){e?this.model.enableReplaceRoundWithReciprocal():this.model.disableReplaceRoundWithReciprocal()},h.prototype.setCapExpressionSize=function(e){this.capExpressionSize=e},h.prototype.getCapExpressionSize=function(){return this.capExpressionSize},h.prototype.setDecimalToFraction=function(e){this.decimalToFraction=e},h.prototype.setLanguage=function(e){"en"!==e&&-1===Desmos.supportedLanguages.indexOf(e)?p.warn("Translation for '"+e+"' isn't currently available. Using '"+this.language+"' instead."):this.language=e},h.prototype.getLanguage=function(){return this.language},h.prototype.getDecimalToFraction=function(){return this.decimalToFraction},h.prototype.isScientificCalc=function(){var e=this.options.evaluationMode;return"scientific"===e||"singleExpressionScientific"===e},h.prototype.isFourFunctionCalc=function(){return"fourFunction"===this.options.evaluationMode||"singleExpressionFourFunction"===this.options.evaluationMode},h.prototype.getAllowLinks=function(){return this.options.links},h.prototype.canUndo=function(){return this.stateStack.canUndo()},h.prototype.canRedo=function(){return this.stateStack.canRedo()},h.prototype.undo=function(e){var t,o;this.canUndo()&&(this.stateStack.undo(),o=this.stateStack.getState(),e.restoreFocus||(t={focus:void 0},o=a.__assign(a.__assign({},o),{ui:t})),this.model.setState(o),this.enqueueEvent("change"))},h.prototype.redo=function(e){var t,o;this.canRedo()&&(this.stateStack.redo(),o=this.stateStack.getState(),e.restoreFocus||(t={focus:void 0},o=a.__assign(a.__assign({},o),{ui:t})),this.model.setState(o),this.enqueueEvent("change"))},h.prototype.clearHistory=function(){this.stateStack.clear()},h.prototype.canBackspace=function(){var e=this.model.getFocusedExpression();return e&&(0<e.latex.length||1<this.model.getNumberOfExpressions())},h.prototype.focusLastExpression=function(){this.model.focusLastExpression()},h.prototype.shouldRender=function(){return 0<this.containerSize.width&&0<this.containerSize.height},h.prototype.canClear=function(){return this.model.canClear()},h.prototype.shouldShowClear=function(){return this.model.shouldShowClear()},h.prototype.enableSettingsMenu=function(){this.settingsMenu=!0},h.prototype.disableSettingsMenu=function(){this.closeSettingsMenu(),this.settingsMenu=!1},h.prototype.closeSettingsMenu=function(){this.settingsMenuOpen=!1},h.prototype.toggleSettingsMenu=function(){this.settingsMenuOpen=!this.settingsMenuOpen},h.prototype.isSettingsMenuOpen=function(){return this.settingsMenuOpen},h.prototype.isLastExpressionEmpty=function(){return this.model.isLastExpressionEmpty()},h.prototype.createAtEnd=function(){this.model.createAtEnd()},h.prototype.clearFocusedExpression=function(){this.model.clearFocusedExpression()},h.prototype.setLatexById=function(e,t){this.model.setLatexById(e,t)},h.prototype.setLatexAndBrailleById=function(e,t,o){this.model.setLatexAndBrailleById(e,t,o)},h.prototype.setLatexOfFocusedExpression=function(e){this.model.setLatexOfFocusedExpression(e)},h.prototype.toggleFractionEvaluationById=function(e){this.model.setFractionEvaluation(e,!this.model.getExpressionById(e).displayAsFraction)},h.prototype.conditionallyCopyPrevious=function(e){this.model.conditionallyCopyPrevious(e)},h.prototype.createBlankAfterId=function(e){this.model.createBlankAfterId(e)},h.prototype.backspaceAtFrontOfId=function(e){this.model.backspaceAtFrontOfId(e)},h.prototype.areStatesDifferentEnoughForUndoRedo=function(e,t){var o={focus:void 0};return i.isEqual(a.__assign(a.__assign({},e),{ui:o}),a.__assign(a.__assign({},t),{ui:o}))},h.prototype.commitUndoRedoDebounced=function(){var e,t=this.model.getState(),o=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(t,o)||((e=(new Date).getTime())-this._lastDebouncedTime<1e3?this.stateStack.replaceState(t):this.stateStack.addState(t),this._lastDebouncedTime=e,this.enqueueEvent("change"))},h.prototype.commitUndoRedoSynchronously=function(){var e=this.model.getState(),t=this.stateStack.getState();this.areStatesDifferentEnoughForUndoRedo(e,t)||(this._lastDebouncedTime=0,this.stateStack.addState(e),this.enqueueEvent("change"))},h.prototype.updateKeyboardMode=function(e){this.keyboardMode=e},h.prototype.getFocusedMathquill=function(){if(this.model.getFocusedExpressionId())return l.default.getFocusedMathquill()},h.prototype.ensureMathquillIsFocusedAndReturnFocusedMathquill=function(){var e=this.getFocusedMathquill();return e||(this.isLastExpressionEmpty()&&!this.model.isSingleExpression()?this.createAtEnd():this.focusLastExpression(),this.onEventEmitted&&this.onEventEmitted("render"),this.getFocusedMathquill())},h.prototype.typeIntoFocusedMathquill=function(e){e=e.replace(/\r|\n/g,"");var t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&l.default.canAcceptText(t,this.getCapExpressionSize(),e)&&(t.typedText(e),this.setLatexOfFocusedExpression(t.latex()),this.model.markShouldDebounceUndoRedo())},h.prototype.pressKeyInFocusedMathquill=function(e,t){var o;"none"!==this.getBrailleMode()||(o=this.ensureMathquillIsFocusedAndReturnFocusedMathquill())&&("Up"===e||"Down"===e||"Left"===e||"Right"===e?l.default.applyArrowKeyAndReturnIfWasAtBounds(o,e,t)&&this.moveFocusInDirection(e):"Enter"===e?(t&&(t.preventDefault(),t.stopPropagation()),this.handleEnter()):"Backspace"===e&&this.attemptToMoveFocusWithBackspace()||(o.keystroke(e,t),this.setLatexOfFocusedExpression(o.latex())))},h.prototype.moveFocusInDirection=function(e){var t=this.model.getFocusedExpressionId();t&&("Up"===e?this.model.focusPrevById(t):"Down"===e&&this.model.focusNextById(t))},h.prototype.handleEnter=function(){var e;this.model.isSingleExpression()||(e=this.model.getFocusedExpressionId())&&(this.conditionallyCopyPrevious(e),this.createBlankAfterId(e))},h.prototype.attemptToMoveFocusWithBackspace=function(){var e=this.model.getFocusedExpression();if(!e)return!1;var t=e.latex,o=e.id;return""===t&&(this.backspaceAtFrontOfId(o),!0)},h.prototype.executeCommandInFocusedMathquill=function(e){var t=this.ensureMathquillIsFocusedAndReturnFocusedMathquill();t&&(o.execute(t,e),this.setLatexOfFocusedExpression(t.latex()))},h.prototype.syncPublicSettings=function(){this.settingsProxy.setProperty("language",this.language),this.settingsProxy.setProperty("fontSize",this.fontSize),this.settingsProxy.setProperty("degreeMode",this.model.getDegreeMode()),this.settingsProxy.setProperty("invertedColors",this.invertedColors),this.settingsProxy.setProperty("backgroundColor",this.backgroundColor),this.settingsProxy.setProperty("textColor",this.textColor),this.settingsProxy.setProperty("brailleMode",this.brailleMode),this.settingsProxy.setProperty("sixKeyInput",this.sixKeyInput),this.settingsProxy.setProperty("brailleControls",this.brailleControls),this.settingsProxy.setProperty("brailleExpressionDownload",this.brailleExpressionDownload),this.settingsProxy.setProperty("projectorMode",this.projectorMode),this.settingsProxy.setProperty("capExpressionSize",this.capExpressionSize),this.settingsProxy.setProperty("decimalToFraction",this.decimalToFraction),this.settingsProxy.setProperty("qwertyKeyboard",this.options.qwertyKeyboard),this.settingsProxy.setProperty("links",this.options.links),this.settingsProxy.setProperty("settingsMenu",this.settingsMenu),this.settingsProxy.setProperty("functionDefinition",this.model.getFunctionDefinition()),this.settingsProxy.setProperty("replaceCommaWith10Exp",this.replaceCommaWith10Exp),this.settingsProxy.setProperty("replaceRoundWithReciprocal",this.model.getReplaceRoundWithReciprocal()),this.settingsProxy.setProperty("typingAsteriskWritesTimesSymbol",this.typingAsteriskWritesTimesSymbol)},h.prototype.hookUpDispatcher=function(){var r=this;this.dispatcher.register(function(e){r.enqueueEvent("render");var t=!1,o=r.getRestrictedEditing();switch(e.type){case"update-options":r.options=a.__assign(a.__assign({},r.options),e.options);break;case"keypad/shift":var s=void 0;switch(r.keyboardMode){case"qwerty":s="capitalQwerty";break;case"capitalQwerty":s="qwerty";break;case"letters":s="capitalLetters";break;case"capitalLetters":s="letters";break;default:s="qwerty"}r.updateKeyboardMode(s);break;case"undo":o||(r.undo({restoreFocus:"keyboard-shortcut"===e.source}),t=!0);break;case"redo":o||(r.redo({restoreFocus:"keyboard-shortcut"===e.source}),t=!0);break;case"clear-history":r.clearHistory();break;case"set-state-from-api":e.opts.allowUndo||r.clearHistory(),r.model.setStateFromAPI(e.state);break;case"main":r.updateKeyboardMode("main");break;case"ABC":r.options.qwertyKeyboard?r.updateKeyboardMode("qwerty"):r.updateKeyboardMode("letters");break;case"functions":r.updateKeyboardMode("functions");break;case"degrees":r.model.setDegreeMode(!r.model.getDegreeMode());break;case"update-degree-mode":r.model.setDegreeMode(!!e.mode);break;case"update-font-size":var i=e.size;if("number"!=typeof i&&(i=parseInt(i,10)),isNaN(i))return;r.fontSize=i;break;case"update-inverted-colors":r.invertedColors=!!e.mode;break;case"update-background-color":r.backgroundColor=e.color;break;case"update-text-color":r.textColor=e.color;break;case"update-projector-mode":r.setProjectorMode(!!e.mode);break;case"update-cap-expression-size":r.setCapExpressionSize(!!e.mode);break;case"update-decimal-to-fraction":r.setDecimalToFraction(!!e.mode);break;case"update-language":r.setLanguage(e.language);break;case"set-blank":e.opts.allowUndo||r.clearHistory(),r.model.clear(),r.focusLastExpression();break;case"clear":r.model.clearFocusedExpression();break;case"set-braille-mode":var n=e.mode;"nemeth"!==n&&"ueb"!==n&&"none"!==n?p.warn("Valid Braille modes are 'nemeth', 'none', and 'ueb'. You passed '"+n+"'."):(r.model.clearCachedBrailleValues(),r.setBrailleMode(e.mode));break;case"set-six-key-input":r.setSixKeyInput(!!e.mode);break;case"set-braille-controls":r.setBrailleControls(!!e.value);break;case"set-braille-expression-download":r.setBrailleExpressionDownload(!!e.mode);break;case"set-replace-comma-with-10-exp":r.setReplaceCommaWith10Exp(!!e.replace);break;case"set-replace-round-with-reciprocal":r.setReplaceRoundWithReciprocal(!!e.replace);break;case"set-typing-asterisk-writes-times-symbol":r.setTypingAsteriskWritesTimesSymbol(!!e.mode);break;case"update-latex":r.model.markShouldDebounceUndoRedo(),r.setLatexById(e.id,e.latex);break;case"update-latex-from-braille":r.model.markShouldDebounceUndoRedo(),r.setLatexAndBrailleById(e.id,e.latex,e.braille);break;case"focusin":r.model.setFocusedById(e.id,!0);break;case"focusout":r.model.setFocusedById(e.id,!1);break;case"focus-first-expression":r.model.focusFirstExpression();break;case"focus-prev-expression":r.moveFocusInDirection("Up");break;case"focus-next-expression":r.moveFocusInDirection("Down");break;case"focus-last-expression":r.model.focusLastExpression();break;case"insert-blank-expression":r.handleEnter();break;case"backspace-from-braille":r.attemptToMoveFocusWithBackspace();break;case"keypad/type-text":r.typeIntoFocusedMathquill(e.text);break;case"keypad/press-key":r.pressKeyInFocusedMathquill(e.key,e.evt);break;case"keypad/custom-command":r.executeCommandInFocusedMathquill(e.command);break;case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;case"enable-settings-menu":r.enableSettingsMenu();break;case"disable-settings-menu":r.disableSettingsMenu();break;case"toggle-settings-menu":r.toggleSettingsMenu();break;case"close-settings-menu":r.closeSettingsMenu();break;case"render":break;case"ui/container-resized":r.containerSize=e.size;break;case"toggle-fraction-evaluation":r.toggleFractionEvaluationById(e.id);break;default:return e}r.runAfterDispatch(function(){return r.syncPublicSettings()}),t||(r.model.getShouldDebounceUndoRedo()?(r.commitUndoRedoDebounced(),r.model.clearShouldDebounceUndoRedo()):r.commitUndoRedoSynchronously())})},h);function h(e,t){var o=this;this.keyboardMode="main",this.fontSize=16,this.invertedColors=!1,this.backgroundColor="",this.textColor="",this.projectorMode=!1,this.capExpressionSize=!1,this.decimalToFraction=!0,this.settingsMenu=!0,this.settingsMenuOpen=!1,this.language="en",this.brailleMode="none",this.sixKeyInput=!1,this.brailleControls=!0,this.brailleExpressionDownload=!0,this.replaceCommaWith10Exp=!1,this.typingAsteriskWritesTimesSymbol=!1,this.stateStack=new r.default,this.dispatcher=new s.Dispatcher,this.s=c.createDictionaryLookupFunction(function(){return o.language}),this.dispatch=function(e){var t;for(u.leaveBreadcrumb("dispatch",e),o.dispatcher.dispatch(e);t=o._queuedCallbacks.shift();)t()},this._queuedCallbacks=[],this.stateStack=new r.default,this.dispatcher=new s.Dispatcher,this.options=e,this.model=new n.default({evaluationMode:this.options.evaluationMode,additionalFunctions:this.options.additionalFunctions,functionDefinition:this.options.functionDefinition,replaceRoundWithReciprocal:this.options.replaceRoundWithReciprocal,workerPool:t.workerPool}),this.model=this.model,this.model.setDegreeMode(e.degreeMode),this.setLanguage(e.language),this.setBrailleMode(e.brailleMode),this.setSixKeyInput(e.sixKeyInput),this.setBrailleControls(e.brailleControls),this.setBrailleExpressionDownload(e.brailleExpressionDownload),this.setReplaceCommaWith10Exp(e.replaceCommaWith10Exp),this.setReplaceRoundWithReciprocal(e.replaceRoundWithReciprocal),this.setTypingAsteriskWritesTimesSymbol(e.typingAsteriskWritesTimesSymbol),this.setProjectorMode(e.projectorMode),this.setCapExpressionSize(e.capExpressionSize),this.setDecimalToFraction(e.decimalToFraction),this.invertedColors=e.invertedColors,this.backgroundColor=e.backgroundColor,this.textColor=e.textColor,this.settingsMenu=e.settingsMenu,this.model.onEvaluationUpdate=function(){return o.dispatch({type:"render"})},this.settingsProxy=t.settingsProxy,this.syncPublicSettings(),this.hookUpDispatcher(),this.containerSize={width:0,height:0}}e.default=d});
define('basic/dcgview-basic',["require","exports","tslib","dcgview"],function(require,t,i,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DCGViewBasic=void 0;var s,o=(s=e.Class,i.__extends(r,s),r.prototype.init=function(){this.controller=this.props.controller(),this.model=this.controller.model,this.dispatch=this.controller.dispatch,this.s=this.controller.s},r);function r(){return null!==s&&s.apply(this,arguments)||this}t.DCGViewBasic=o});

define('loadcss!keypad/control-bar', function(){});
define('keypad/control-bar',["require","exports","tslib","dcgview","./dcgview-keypad","loadcss!./control-bar"],function(require,e,t,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,a=(o=n.default,t.__extends(c,o),c.prototype.template=function(){var e=this;return r.createElement("div",{class:r.const("dcg-keypad-control-bar dcg-do-not-blur"),role:r.const("group"),"aria-label":function(){return e.controller.s("shared-calculator-narration-keypad-controlbar")}},r.createElement("div",{class:r.const("dcg-keypad-control-bar-contents")},this.children))},c);function c(){return null!==o&&o.apply(this,arguments)||this}e.default=a});

define('loadcss!keypad/control-btn', function(){});
define('keypad/control-btn',["require","exports","tslib","dcgview","loadcss!./control-btn"],function(require,t,e,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,o=(s=i.Class,e.__extends(n,s),n.prototype.template=function(){var t=this;return i.createElement("div",{class:function(){return{"dcg-keypad-control-btn":!0,"dcg-disabled":t.isDisabled(),"dcg-selected":!t.isDisabled()&&t.isSelected(),"dcg-selectable-btn":!t.isDisabled()&&t.isSelectable(),"dcg-narrow-control-btn":t.props.narrowButton&&t.props.narrowButton()}},didMount:this.bindFn(this.didMount),role:i.const("button"),"aria-disabled":function(){return t.isDisabled()||void 0},"aria-label":function(){return t.getAriaLabel()},"dcg-command":this.props.command,onTap:this.bindFn(this.handleTap),"aria-pressed":function(){return t.hasPopup()||t.isDisabled()||!t.isSelectable()?void 0:t.isSelected()},"aria-expanded":function(){return t.hasPopup()&&!t.isDisabled()?t.isSelected():void 0},tabindex:this.bindFn(this.getTabIndex)},this.children)},n.prototype.getTabIndex=function(){return this.isDisabled()?void 0:this.props.ignoreInTabOrder&&this.props.ignoreInTabOrder()?-1:0},n.prototype.handleTap=function(t){this.isDisabled()||this.props.onTap(t)},n.prototype.getAriaLabel=function(){return this.props.ariaLabel?this.props.ariaLabel():this.props.command()},n.prototype.hasPopup=function(){return!!this.props.ariaPopup&&this.props.ariaPopup()},n.prototype.isDisabled=function(){return!!this.props.disabled&&this.props.disabled()},n.prototype.isSelected=function(){return!!this.props.selected&&this.props.selected()},n.prototype.isSelectable=function(){return!!this.props.selectable&&this.props.selectable()},n.prototype.didMount=function(t){this.props.didMount&&this.props.didMount(t)},n);function n(){return null!==s&&s.apply(this,arguments)||this}t.default=o});

define('loadcss!dcgview-helpers/download-button', function(){});
define('dcgview-helpers/download-button',["require","exports","tslib","dcgview","browser","loadcss!./download-button"],function(require,t,o,e,n){"use strict";function i(){return!n.IS_IE&&!function(){if(n.IS_SAFARI){var t=navigator.userAgent.match(/Version\/(\d+)/);if(t&&t[1])return parseFloat(t[1])<11}}()&&void 0!==document.createElement("a").download}Object.defineProperty(t,"__esModule",{value:!0}),t.canDownload=void 0,t.canDownload=function(){return i()||void 0!==navigator.msSaveBlob};var d,a=(d=e.Class,o.__extends(r,d),r.prototype.init=function(){this.supportsDirectDownload=i()},r.prototype.template=function(){var n=this;return e.createElement("a",{role:e.const("button"),tabindex:function(){return n.props.enabled()?0:-1},"aria-disabled":function(){return!n.props.enabled()},class:function(){return{"dcg-download-button":!0,"dcg-disabled":!n.props.enabled(),"dcg-braille-equations":n.props.isBraille,"dcg-svg-button":n.props.isSvg}},didMount:this.bindFn(this.didMountDownload),didUnmount:this.bindFn(this.didUnmountDownload),didUpdate:this.bindFn(this.didUpdate),download:function(){return n.supportsDirectDownload?n.props.filename():void 0},onTap:function(t){var o;n.supportsDirectDownload||!navigator.msSaveOrOpenBlob||(o=n.props.data())&&(navigator.msSaveOrOpenBlob(o,n.props.filename()),t.preventDefault())}},e.createElement("i",{class:e.const("dcg-icon-download")}),e.createElement("span",null,function(){return n.props.text()}))},r.prototype.didMountDownload=function(t){this.downloadLink=t,this.didUpdate()},r.prototype.didUnmountDownload=function(){this.revokeBlobURL()},r.prototype.didUpdate=function(){this.updateDownloadURL(),this.cachedObjectURL&&(this.downloadLink.href=this.cachedObjectURL)},r.prototype.updateDownloadURL=function(){var t;this.revokeBlobURL(),!this.supportsDirectDownload||(t=this.props.data())&&(this.cachedObjectURL=URL.createObjectURL(t))},r.prototype.revokeBlobURL=function(){this.cachedObjectURL&&URL.revokeObjectURL(this.cachedObjectURL)},r);function r(){return null!==d&&d.apply(this,arguments)||this}t.default=a});
define('lib/export-braille-equations',["require","exports","abraham","graphing-calc/models/expression","expressions/regression_view","core/lib/number-to-latex"],function(require,e,a,R,q,w){"use strict";function B(e,r,t){if(void 0===t&&(t=!1),t&&(e=e.replace(/ /g,"\\ ")),"none"===r)return e;var s="nemeth"===r?a.latexToNemeth(e):a.latexToUeb(e);return s.isError?"":a.UnicodeBraille.toBrailleAscii(s.value)}function _(e){var r="--------------------";return r+"\n"+e+"\n"+r}function I(e,r){var t=""+e;return"nemeth"===r?B(t,r,!1)+"_4":"ueb"===r?B(t+".",r,!1):""}Object.defineProperty(e,"__esModule",{value:!0}),e.getBrailleEquationsBasic=e.getBrailleEquationsGraphing=void 0,e.getBrailleEquationsGraphing=function(e,r){if("none"===r)return"";var t=[];t.push(B("Expression List",r,!0)),t.push(""),t.push("");for(var s="",a=e.getItemCount(),n=0;n<a;n++){var o=e.getItemModelByIndex(n);if(o&&!o.secret){""!==s&&"folder"!==o.type&&s!==o.folderId&&(t.push(_(B("End Folder",r,!0))),s="");var i="";switch(o.type){case"expression":if(!o.hidden){var u=I(o.displayIndex,r),i=o.latex,l=[],p=o.formula;if(p&&!R.isEmpty(o))if(e.shouldShowEvaluationForItem(o.id)){var d=p.zero_values&&p.zero_values.length?p.zero_values[0].val:p.constant_value;Array.isArray(d)?i+="\\ "+d.length+"\\ element\\ list":i+="="+d}else if(R.shouldShowCDFFooter(o))l.push(B("Min="+R.getCDFMin(o),r,!1)),l.push(B("Max="+R.getCDFMax(o),r,!1)),R.isCDFMaxValid(o)&&R.isCDFMinValid(o)&&l.push(B("CDF="+R.getCDFEvaluation(o),r,!1));else if(R.isTTest(o)){var h=R.getTTestResults(o);h&&(l.push(B("<"+w.numberToStatsConfidenceLatex(h.lessThan,5),r,!1)),l.push(B(">"+w.numberToStatsConfidenceLatex(h.greaterThan,5),r,!1)),l.push(B("\\ne"+w.numberToStatsConfidenceLatex(h.notEqual,5),r,!1)))}else if(p.is_regression&&p.regression){var c=p.regression,g=c.statistics,v=c.parameters;for(var f in g.hasOwnProperty("Rsquared")&&l.push(B("R^2="+q.getRoundedStat(c,"Rsquared"),r,!1)),g.hasOwnProperty("rsquared")&&l.push(B("r^2="+q.getRoundedStat(c,"rsquared"),r,!1)),g.hasOwnProperty("r")&&l.push(B("r="+q.getRoundedStat(c,"r"),r,!1)),g.hasOwnProperty("RMSE")&&l.push(B("\\operatorname{RMSE}="+q.getRoundedStat(c,"RMSE"),r,!1)),v)l.push(B(f+"="+q.getRoundedParam(c,f),r,!1))}t.push(u+"  "+B(i,r,!1)),t.push.apply(t,l)}break;case"text":t.push(B(o.text,r,!0));break;case"folder":o.collapsed?i="Collapsed Folder "+o.title:(i="Start Folder "+o.title,s=o.id),t.push(_(B(i,r,!0)));break;case"image":t.push(B("Image",r,!1));break;case"simulation":t.push(B("Simulation",r,!1));break;case"table":t.push(_(B("Start Table",r,!0)));for(var x=0,m=o.rowModels;x<m.length;x++){for(var E=[],b=0,y=m[x].cells;b<y.length;b++){var S,F,T=y[b],C="";"header"===T.type?C=T.latex||"":"cell"===T.type&&(S=T.column.index,F=T.row.index-1,C=T.column.disabled?T.column.computedValues[F]||"":o.columns[S].values[F]||""),E.push(B(C,r))}var M=E.join("\t");/^\t/.test(M)||t.push(M)}t.push(_(B("End Table",r,!0)));break;default:return o}}}return""!==s&&t.push(_(B("End Folder",r,!0))),t.join("\n")},e.getBrailleEquationsBasic=function(e,r){if("none"===r)return"";var t=[];t.push(B("Expression List",r,!0)),t.push(""),t.push("");for(var s=0,a=e.getExpressionOrder();s<a.length;s++){var n=a[s],o=I(e.getExpressionIndex(n)+1,r),i=e.getExpressionLatex(n),u=e.getExpressionValue(n);void 0!==u&&(i+="="+u),t.push(o+"  "+B(i,r,!1))}return t.join("\n")}});

define('loadcss!basic/settings-menu', function(){});
define('basic/settings-menu',["require","exports","tslib","browser","keys","dcgview","./dcgview-basic","jquery","dcgview-helpers/download-button","lib/export-braille-equations","loadcss!./settings-menu"],function(require,e,t,n,c,o,r,l,i,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SettingsMenu=void 0;var a,u=o.Components.If,d=(a=r.DCGViewBasic,t.__extends(p,a),p.prototype.template=function(){var t=this;return o.createElement("div",{class:function(){return{"dcg-settings-dropdown":!0,"dcg-popover":!0,"dcg-has-background-color":t.controller.hasBackgroundColor(),"dcg-point-left":t.controller.containerSize.height<=420}},role:o.const("complementary"),"aria-label":o.const("Settings Menu"),didMount:this.bindFn(this.didMountSettingsDropdown),didUnmount:this.bindFn(this.didUnmountSettingsDropdown)},o.createElement("div",{class:o.const("dcg-popover-interior"),style:function(){return{background:t.controller.getBackgroundColor()}}},o.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-modern-btn":!0,"dcg-action-projectormode":!0,"dcg-active":t.controller.isProjectorMode()}},role:o.const("button"),onTap:this.bindFn(this.onToggleProjectorMode),tabindex:o.const(0),"aria-label":function(){return t.controller.s("basic-calculator-narration-projector-mode")},"aria-pressed":function(){return t.controller.isProjectorMode()}},function(){return t.controller.s("basic-calculator-button-projector-mode")}),o.createElement(u,{predicate:function(){return t.controller.getBrailleControls()}},function(){return o.createElement("div",{class:function(){return{"dcg-settings-menu-option":!0,"dcg-braille-container":!0}}},o.createElement("div",{class:o.const("dcg-group-title")},function(){return t.controller.s("basic-calculator-narration-braille-mode")}),o.createElement("div",{role:o.const("group"),"aria-label":function(){return t.controller.s("basic-calculator-label-braille-mode")},class:o.const("dcg-braille-options-buttons")},o.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":t.isLatex()}},role:o.const("button"),onTap:function(){return t.setBrailleMode("none")},tabindex:o.const(0),"aria-label":function(){return t.controller.s("basic-calculator-narration-braille-off")},"aria-pressed":function(){return t.isLatex()}},function(){return t.controller.s("basic-calculator-button-braille-off")}),o.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":t.isNemeth()}},role:o.const("button"),onTap:function(){return t.setBrailleMode("nemeth")},tabindex:o.const(0),"aria-label":function(){return t.controller.s("basic-calculator-narration-nemeth")},"aria-pressed":function(){return t.isNemeth()}},function(){return t.controller.s("basic-calculator-button-nemeth")}),o.createElement("span",{class:function(){return{"dcg-braille-option":!0,"dcg-selected":t.isUEB()}},role:o.const("button"),onTap:function(){return t.setBrailleMode("ueb")},tabindex:o.const(0),"aria-label":function(){return t.controller.s("basic-calculator-narration-ueb")},"aria-pressed":function(){return t.isUEB()}},function(){return t.controller.s("basic-calculator-button-ueb")})),o.createElement(u,{predicate:function(){return t.controller.renderAsBraille()}},function(){return o.createElement("div",null,o.createElement("div",{role:o.const("checkbox"),tabindex:o.const(0),onTap:function(){return t.onToggleSixKeyInput()},"aria-checked":function(){return t.controller.getSixKeyInput()},"aria-label":function(){return t.controller.s("basic-calculator-narration-six-key-input")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-six-key-checkbox":!0,"dcg-checked":t.controller.getSixKeyInput(),"dcg-checkbox-container":!0}},handleEvent:o.const(!0)},o.createElement("span",{class:o.const("dcg-checkbox-box")},o.createElement("i",{class:o.const("dcg-icon-check")})),o.createElement("span",{class:o.const("dcg-checkbox-label")},function(){return t.controller.s("basic-calculator-label-six-key-input")})),o.createElement("a",{href:o.const("https://www.desmos.com/accessibility#braille"),class:o.const("dcg-six-key-info"),target:o.const("_blank")},o.createElement("i",{class:o.const("dcg-icon-question-sign")})),o.createElement(u,{predicate:function(){return!n.IS_MOBILE&&i.canDownload()&&t.controller.getBrailleExpressionDownload()}},function(){return o.createElement(i.default,{data:function(){var e=s.getBrailleEquationsBasic(t.model,t.controller.getBrailleMode());return new Blob([e],{type:"text/plain"})},enabled:t.const(!0),filename:t.const("desmos-equations.brl"),text:function(){return t.controller.s("basic-calculator-link-download-braille-equations")},isBraille:t.const(!0)})}))}))}),o.createElement("div",{role:o.const("checkbox"),tabindex:o.const(0),onTap:this.bindFn(this.onToggleInvertedColors),"aria-checked":function(){return t.controller.getInvertedColors()},"aria-label":function(){return t.controller.s("basic-calculator-narration-reverse-contrast")},class:function(){return{"dcg-settings-menu-option":!0,"dcg-do-not-blur":!0,"dcg-checked":t.controller.getInvertedColors(),"dcg-checkbox-container":!0,"dcg-reverse-contrast":!0}},handleEvent:o.const(!0)},o.createElement("span",{class:o.const("dcg-checkbox-box")},o.createElement("i",{class:o.const("dcg-icon-check")})),o.createElement("span",{class:o.const("dcg-checkbox-label")},function(){return t.controller.s("basic-calculator-label-reverse-contrast")})),o.createElement(u,{predicate:function(){return!!t.getVersionNumber()}},function(){return o.createElement("div",{class:o.const("dcg-version-number")},o.const("Version: "),function(){return t.getVersionNumber()})})))},p.prototype.getVersionNumber=function(){var e=window;if(e&&e.AppBridge)return e.AppBridge.versionNumber},p.prototype.didUnmountSettingsDropdown=function(){l(document).off(".dcg-settings-view")},p.prototype.didMountSettingsDropdown=function(e){var r=this;this.settingsGroupNode=e,l(document).on("dcg-tapstart.dcg-settings-view",function(e){0===l(e.target).closest(".dcg-basic-settings-container").length&&r.controller.dispatch({type:"close-settings-menu"})}),l(document).on("keydown.dcg-settings-view",function(e){var t,n,o;"Esc"===c.lookup(e)&&(r.controller.dispatch({type:"close-settings-menu"}),r.controller.dispatch({type:"focus-last-expression"})),"Tab"!==c.lookup(e)||e.altKey||e.metaKey||e.ctrlKey||(t=document.activeElement,n=l(r.props.settingsButtonNode()),o=l(r.settingsGroupNode).find(".dcg-settings-menu-option:last"),e.shiftKey||t!==o[0]?e.shiftKey&&t===n[0]&&(o.focus(),e.preventDefault(),e.stopPropagation()):(n.focus(),e.preventDefault(),e.stopPropagation()))})},p.prototype.setBrailleMode=function(e){this.controller.dispatch({type:"set-braille-mode",mode:e})},p.prototype.isNemeth=function(){return"nemeth"===this.controller.getBrailleMode()},p.prototype.isUEB=function(){return"ueb"===this.controller.getBrailleMode()},p.prototype.isLatex=function(){return"none"===this.controller.getBrailleMode()},p.prototype.onToggleSixKeyInput=function(){var e=!this.controller.getSixKeyInput();this.controller.dispatch({type:"set-six-key-input",mode:e})},p.prototype.onToggleInvertedColors=function(){var e=!this.controller.getInvertedColors();this.controller.dispatch({type:"update-inverted-colors",mode:e})},p.prototype.onToggleProjectorMode=function(){this.controller.dispatch({type:"update-projector-mode",mode:!this.controller.isProjectorMode()})},p);function p(){return null!==a&&a.apply(this,arguments)||this}e.SettingsMenu=d});

define('loadcss!basic/keypad/settings-control-button', function(){});
define('basic/keypad/settings-control-button',["require","exports","tslib","dcgview","keypad/control-btn","basic/dcgview-basic","basic/settings-menu","loadcss!./settings-control-button"],function(require,t,e,n,o,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,c=n.Components.If,l=(r=s.DCGViewBasic,e.__extends(u,r),u.prototype.template=function(){var e=this,t=this.props.controller();return n.createElement("div",{class:n.const("dcg-basic-settings-container")},n.createElement(o.default,{didMount:function(t){return e.settingsButtonNode=t},command:this.const("settings"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-settings")},onTap:this.bindFn(this.onToggleSettingsMenu),selected:function(){return e.controller.isSettingsMenuOpen()},ariaPopup:this.const(!0)},n.createElement("i",{class:n.const("dcg-icon-wrench")})),n.createElement(c,{predicate:function(){return e.controller.isSettingsMenuOpen()}},function(){return n.createElement(i.SettingsMenu,{controller:e.props.controller,settingsButtonNode:function(){return e.settingsButtonNode}})}))},u.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},u);function u(){return null!==r&&r.apply(this,arguments)||this}t.default=l});
define('basic/keypad/fourfunction-control-bar',["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","./settings-control-button","basic/dcgview-basic"],function(require,e,t,n,r,c,a,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,i=n.Components,u=i.If,s=i.IfElse,d=(l=o.DCGViewBasic,t.__extends(p,l),p.prototype.template=function(){var e=this,t=this.props.controller();return n.createElement(r.default,{controller:this.props.controller},n.createElement(u,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return n.createElement(c.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-undo")}))}),n.createElement(u,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return n.createElement(c.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-redo")}))}),s(function(){return t.shouldShowClear()},{true:function(){return n.createElement(c.default,{command:e.const("clear"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-clear")},onTap:function(){return t.dispatch({type:"clear"})}},function(){return t.s("basic-calculator-button-controlbar-clear")})},false:function(){return n.createElement(c.default,{command:e.const("clearall"),disabled:function(){return!t.canClear()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-clear-all")},onTap:function(){return t.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},function(){return t.s("basic-calculator-button-controlbar-clear-all")})}}),n.createElement(u,{predicate:function(){return e.controller.getRestrictedEditing()}},function(){return n.createElement("div",{class:n.const("dcg-spacer-2")})}),n.createElement(u,{predicate:function(){return"none"===t.getBrailleMode()}},function(){return n.createElement(c.default,{command:e.const("backspace"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-backspace")},disabled:function(){return!t.canBackspace()},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},n.createElement("i",{class:n.const("dcg-icon-delete")}))}),n.createElement(u,{predicate:function(){return e.props.controller().getSettingsMenu()}},function(){return n.createElement(a.default,{controller:e.props.controller})}))},p.prototype.onToggleSettingsMenu=function(){this.controller.dispatch({type:"toggle-settings-menu"})},p);function p(){return null!==l&&l.apply(this,arguments)||this}e.default=d});
define('basic/keypad/single-expression-fourfunction-control-bar',["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic"],function(require,e,t,n,r,c,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o,i=n.Components.If,l=(o=a.DCGViewBasic,t.__extends(u,o),u.prototype.template=function(){var e=this,t=this.props.controller();return n.createElement(r.default,{controller:this.props.controller},n.createElement(i,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return n.createElement(c.default,{command:e.const("undo"),disabled:function(){return!t.canUndo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-undo")},onTap:function(e){return t.dispatch({type:"undo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-undo")}))}),n.createElement(i,{predicate:function(){return!e.controller.getRestrictedEditing()}},function(){return n.createElement(c.default,{command:e.const("redo"),disabled:function(){return!t.canRedo()},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-redo")},onTap:function(e){return t.dispatch({type:"redo",source:"keyboard"===e.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-redo")}))}),n.createElement(c.default,{command:this.const("clear"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-clear")},onTap:function(){return t.dispatch({type:"clear"})}},function(){return t.s("basic-calculator-button-controlbar-clear")}),n.createElement(i,{predicate:function(){return e.controller.getRestrictedEditing()}},function(){return n.createElement("div",{class:n.const("dcg-spacer-2")})}),n.createElement(i,{predicate:function(){return"none"===t.getBrailleMode()}},function(){return n.createElement(c.default,{command:e.const("backspace"),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-backspace")},disabled:function(){return!t.canBackspace()},onTap:function(){return t.dispatch({type:"keypad/press-key",key:"Backspace"})}},n.createElement("i",{class:n.const("dcg-icon-delete")}))}))},u);function u(){return null!==o&&o.apply(this,arguments)||this}e.default=l});

define('loadcss!keypad/control-toggle', function(){});
define('keypad/control-toggle',["require","exports","tslib","lib/aria","core/lib/color-helpers","dcgview","./dcgview-keypad","loadcss!./control-toggle"],function(require,t,e,o,r,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,s=(n=a.default,e.__extends(i,n),i.prototype.template=function(){var t=this;return l.createElement("div",{class:function(){return{"dcg-keypad-control-toggle":!0,"dcg-toggled":t.props.toggled()}},role:l.const("button"),tabindex:l.const("0"),"aria-label":this.bindFn(this.getAriaLabel),onTap:this.bindFn(this.handleTap)},l.createElement("div",{class:l.const("dcg-ctrl-toggle-option")},this.props.defaultOption),l.createElement("div",{class:l.const("dcg-ctrl-toggle-option")},this.props.toggledOption),l.createElement("div",{class:l.const("dcg-ctrl-toggle-cover"),style:function(){return{background:r.shadeColor(t.controller.getBackgroundColor(),-.1)}}}))},i.prototype.getAriaLabel=function(){var t={toggled:this.props.toggledAriaLabel(),default:this.props.defaultAriaLabel()};return this.props.toggled()?this.controller.s("shared-calculator-narration-control-toggle-switch-to-default",t):this.controller.s("shared-calculator-narration-control-toggle-switch-to-toggled",t)},i.prototype.handleTap=function(){this.props.toggled()?o.alert(this.props.defaultAriaLabel()):o.alert(this.props.toggledAriaLabel()),this.props.onTap(this.props.command())},i);function i(){return null!==n&&n.apply(this,arguments)||this}t.default=s});
define('basic/keypad/scientific-control-bar',["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle","./settings-control-button"],function(require,t,n,e,r,o,a,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,u=e.Components,s=u.If,d=u.IfElse,b=(i=a.DCGViewBasic,n.__extends(f,i),f.prototype.template=function(){var t=this,n=this.props.controller();return e.createElement(r.default,{controller:this.props.controller},e.createElement(o.default,{command:this.const("main"),selected:function(){return"main"===n.getKeyboardMode()},disabled:function(){return t.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return n.dispatch({type:"main"})},ariaLabel:function(){return n.s("basic-calculator-narration-controlbar-main")}},function(){return n.s("basic-calculator-button-controlbar-main")}),e.createElement(o.default,{command:this.const("ABC"),selected:function(){return-1!==["qwerty","capitalQwerty","letters"].indexOf(n.getKeyboardMode())},disabled:function(){return t.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:function(){return n.s("basic-calculator-narration-controlbar-abc")},onTap:function(){return n.dispatch({type:"ABC"})}},function(){return n.s("basic-calculator-button-controlbar-abc")}),e.createElement(o.default,{command:this.const("functions"),selected:function(){return-1!==["functions","restrictedFunctions"].indexOf(n.getKeyboardMode())},ariaLabel:function(){return n.s("basic-calculator-narration-controlbar-functions")},disabled:function(){return t.controller.renderAsBraille()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return n.dispatch({type:"functions"})}},function(){return n.s("basic-calculator-button-controlbar-func")}),e.createElement(c.default,{command:this.const("degrees"),toggled:function(){return t.model.getDegreeMode()},defaultOption:function(){return n.s("basic-calculator-label-controlbar-rad")},toggledOption:function(){return n.s("basic-calculator-label-controlbar-deg")},defaultAriaLabel:function(){return n.s("basic-calculator-narration-controlbar-radians")},toggledAriaLabel:function(){return n.s("basic-calculator-narration-controlbar-degrees")},onTap:function(){return n.dispatch({type:"degrees"})},controller:this.props.controller}),e.createElement(s,{predicate:function(){return!t.controller.getRestrictedEditing()}},function(){return e.createElement(o.default,{command:t.const("undo"),disabled:function(){return!n.canUndo()},ariaLabel:function(){return n.s("basic-calculator-narration-controlbar-undo")},onTap:function(t){return n.dispatch({type:"undo",source:"keyboard"===t.device?"button-keyboard":"button-tap"})}},e.createElement("i",{class:e.const("dcg-icon-undo")}))}),e.createElement(s,{predicate:function(){return!t.controller.getRestrictedEditing()}},function(){return e.createElement(o.default,{command:t.const("redo"),disabled:function(){return!n.canRedo()},ariaLabel:function(){return n.s("basic-calculator-narration-controlbar-redo")},onTap:function(t){return n.dispatch({type:"redo",source:"keyboard"===t.device?"button-keyboard":"button-tap"})}},e.createElement("i",{class:e.const("dcg-icon-redo")}))}),d(function(){return n.shouldShowClear()},{true:function(){return e.createElement(o.default,{command:t.const("clear"),ariaLabel:function(){return n.s("basic-calculator-narration-controlbar-clear")},onTap:function(){return n.dispatch({type:"clear"})}},function(){return n.s("basic-calculator-button-controlbar-clear")})},false:function(){return e.createElement(o.default,{command:t.const("clearall"),disabled:function(){return!n.canClear()},ariaLabel:function(){return n.s("basic-calculator-narration-controlbar-clear-all")},onTap:function(){return n.dispatch({type:"set-blank",opts:{allowUndo:!0}})}},function(){return n.s("basic-calculator-button-controlbar-clear-all")})}}),e.createElement(s,{predicate:function(){return t.props.controller().getSettingsMenu()}},function(){return e.createElement(l.default,{controller:t.props.controller})}))},f);function f(){return null!==i&&i.apply(this,arguments)||this}t.default=b});
define('basic/keypad/single-expression-scientific-control-bar',["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","basic/dcgview-basic","keypad/control-toggle"],function(require,t,e,n,r,a,c,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,i=n.Components.If,s=(l=c.DCGViewBasic,e.__extends(u,l),u.prototype.template=function(){var t=this,e=this.props.controller();return n.createElement(r.default,{controller:this.props.controller},n.createElement(o.default,{command:this.const("degrees"),toggled:function(){return t.model.getDegreeMode()},defaultOption:function(){return e.s("basic-calculator-label-controlbar-rad")},toggledOption:function(){return e.s("basic-calculator-label-controlbar-deg")},defaultAriaLabel:function(){return e.s("basic-calculator-narration-controlbar-radians")},toggledAriaLabel:function(){return e.s("basic-calculator-narration-controlbar-degrees")},onTap:function(){return e.dispatch({type:"degrees"})},controller:this.props.controller}),n.createElement("div",{class:n.const("dcg-spacer")}),n.createElement(i,{predicate:function(){return!t.controller.getRestrictedEditing()}},function(){return n.createElement(a.default,{command:t.const("undo"),disabled:function(){return!e.canUndo()},ariaLabel:function(){return e.s("basic-calculator-narration-controlbar-undo")},onTap:function(t){return e.dispatch({type:"undo",source:"keyboard"===t.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-undo")}))}),n.createElement(i,{predicate:function(){return!t.controller.getRestrictedEditing()}},function(){return n.createElement(a.default,{command:t.const("redo"),disabled:function(){return!e.canRedo()},ariaLabel:function(){return e.s("basic-calculator-narration-controlbar-redo")},onTap:function(t){return e.dispatch({type:"redo",source:"keyboard"===t.device?"button-keyboard":"button-tap"})}},n.createElement("i",{class:n.const("dcg-icon-redo")}))}),n.createElement("div",{class:n.const("dcg-spacer")}),n.createElement(a.default,{narrowButton:this.const(!0),command:this.const("clear"),ariaLabel:function(){return e.s("basic-calculator-narration-controlbar-clear")},onTap:function(){return e.dispatch({type:"clear"})}},function(){return e.s("basic-calculator-button-controlbar-clear")}),n.createElement(a.default,{narrowButton:this.const(!0),command:this.const("backspace"),ariaLabel:function(){return e.s("basic-calculator-narration-controlbar-backspace")},onTap:function(){return e.dispatch({type:"keypad/press-key",key:"Backspace"})}},n.createElement("i",{class:n.const("dcg-icon-delete")})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}t.default=s});
define('basic/keypad/fourfunction-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(require,e,t,i,l,n,s,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,r=(a=l.DCGViewBasic,t.__extends(o,a),o.prototype.template=function(){var e=this;return i.createElement("div",{role:i.const("group"),"aria-label":function(){return e.s("basic-calculator-narration-keypad")}},i.createElement(s.default,{controller:this.props.controller},i.createElement(h.default,null,n.view(this,"(",{colspan:this.parenColspan()}),n.view(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(0),this.makeAdditionalFunctionKey(1),n.view(this,"/")),i.createElement(h.default,null,n.view(this,"7",{style:"highlight"}),n.view(this,"8",{style:"highlight"}),n.view(this,"9",{style:"highlight"}),n.view(this,"*")),i.createElement(h.default,null,n.view(this,"4",{style:"highlight"}),n.view(this,"5",{style:"highlight"}),n.view(this,"6",{style:"highlight"}),n.view(this,"-")),i.createElement(h.default,null,n.view(this,"1",{style:"highlight"}),n.view(this,"2",{style:"highlight"}),n.view(this,"3",{style:"highlight"}),n.view(this,"+")),i.createElement(h.default,null,n.view(this,"0",{style:"highlight"}),n.view(this,".",{style:"highlight"}),n.view(this,"ans"),n.view(this,"enter",{style:"blue"}))))},o.prototype.parenColspan=function(){return 1<this.controller.getAdditionalFunctions().length?.5:1},o.prototype.makeAdditionalFunctionKey=function(e){var t=this.controller.getAdditionalFunctions()[e];return"exponent"===t?n.view(this,"a^b"):"percent"===t?n.view(this,"%"):"sqrt"===t?n.view(this,"sqrt"):"fraction"===t?n.view(this,"a/b"):void 0},o);function o(){return null!==a&&a.apply(this,arguments)||this}e.default=r});
define('basic/keypad/single-expression-fourfunction-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(require,t,e,i,l,n,s,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,a=(o=l.DCGViewBasic,e.__extends(r,o),r.prototype.template=function(){var t=this;return i.createElement("div",{role:i.const("group"),"aria-label":function(){return t.s("basic-calculator-narration-keypad")}},i.createElement(s.default,{controller:this.props.controller},i.createElement(h.default,null,n.view(this,"(",{colspan:this.parenColspan()}),n.view(this,")",{colspan:this.parenColspan()}),this.makeAdditionalFunctionKey(1)),i.createElement(h.default,null,n.view(this,"7",{style:"highlight"}),n.view(this,"8",{style:"highlight"}),n.view(this,"9",{style:"highlight"}),n.view(this,"/")),i.createElement(h.default,null,n.view(this,"4",{style:"highlight"}),n.view(this,"5",{style:"highlight"}),n.view(this,"6",{style:"highlight"}),n.view(this,"*")),i.createElement(h.default,null,n.view(this,"1",{style:"highlight"}),n.view(this,"2",{style:"highlight"}),n.view(this,"3",{style:"highlight"}),n.view(this,"-")),i.createElement(h.default,null,n.view(this,"0",{style:"highlight"}),n.view(this,".",{style:"highlight",colspan:this.dotColspan()}),this.makeAdditionalFunctionKey(0),n.view(this,"+"))))},r.prototype.parenColspan=function(){return 2===this.controller.getAdditionalFunctions().length?1.5:2},r.prototype.dotColspan=function(){return this.controller.getAdditionalFunctions().length?1:2},r.prototype.makeAdditionalFunctionKey=function(t){var e=this.controller.getAdditionalFunctions()[t];return"exponent"===e?n.view(this,"a^b"):"percent"===e?n.view(this,"%"):"sqrt"===e?n.view(this,"sqrt"):void 0},r);function r(){return null!==o&&o.apply(this,arguments)||this}t.default=a});
define('basic/keypad/single-expression-scientific-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,l,h,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c,n=(c=s.DCGViewBasic,i.__extends(r,c),r.prototype.template=function(){return t.createElement(h.default,{controller:this.props.controller},t.createElement(a.default,null,l.view(this,"("),l.view(this,")"),l.view(this,"x^2"),l.view(this,"sqrt"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"x^3"),l.view(this,"x^y"),l.view(this,"ythroot")),t.createElement(a.default,null,l.view(this,"7",{style:"highlight"}),l.view(this,"8",{style:"highlight"}),l.view(this,"9",{style:"highlight"}),l.view(this,"/"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"pi"),l.view(this,"e^x"),l.view(this,"!")),t.createElement(a.default,null,l.view(this,"4",{style:"highlight"}),l.view(this,"5",{style:"highlight"}),l.view(this,"6",{style:"highlight"}),l.view(this,"*"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"log"),l.view(this,"ln"),l.view(this,"|x|")),t.createElement(a.default,null,l.view(this,"1",{style:"highlight"}),l.view(this,"2",{style:"highlight"}),l.view(this,"3",{style:"highlight"}),l.view(this,"-"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"sin"),l.view(this,"cos"),l.view(this,"tan")),t.createElement(a.default,null,l.view(this,"0",{style:"highlight"}),l.view(this,".",{style:"highlight"}),l.view(this,"x/y"),l.view(this,"+"),t.createElement("div",{class:t.const("dcg-partition-placeholder")}),l.view(this,"arcsin"),l.view(this,"arccos"),l.view(this,"arctan")))},r);function r(){return null!==c&&c.apply(this,arguments)||this}e.default=n});
define('basic/keypad/sci-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(require,e,t,i,l,s,h,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c,n=i.Components.IfElse,r=(c=l.DCGViewBasic,t.__extends(o,c),o.prototype.template=function(){var e=this;return i.createElement(h.default,{controller:this.props.controller},i.createElement(a.default,null,s.view(this,"a^2"),s.view(this,"a^b"),s.view(this,"|a|"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"7",{style:"highlight"}),s.view(this,"8",{style:"highlight"}),s.view(this,"9",{style:"highlight"}),s.view(this,"/"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"%"),s.view(this,"a/b")),i.createElement(a.default,null,s.view(this,"sqrt"),s.view(this,"nthroot"),s.view(this,"pi"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"4",{style:"highlight"}),s.view(this,"5",{style:"highlight"}),s.view(this,"6",{style:"highlight"}),s.view(this,"*"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"left",{style:"highlight"}),s.view(this,"right",{style:"highlight"})),i.createElement(a.default,null,s.view(this,"sin"),s.view(this,"cos"),s.view(this,"tan"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"1",{style:"highlight"}),s.view(this,"2",{style:"highlight"}),s.view(this,"3",{style:"highlight"}),s.view(this,"-"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.spacer(.5),s.view(this,"backspace",{style:"highlight",colspan:1.5})),i.createElement(a.default,null,s.view(this,"("),s.view(this,")"),n(function(){return e.controller.getReplaceCommaWith10Exp()},{true:function(){return s.view(e,"10^n")},false:function(){return s.view(e,",")}}),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"0",{style:"highlight"}),s.view(this,".",{style:"highlight"}),s.view(this,"ans"),s.view(this,"+"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"enter",{style:"blue",colspan:2})))},o);function o(){return null!==c&&c.apply(this,arguments)||this}e.default=r});
define('basic/keypad/sci-qwerty-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,h,l,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w,a=(w=s.DCGViewBasic,i.__extends(c,w),c.prototype.template=function(){return t.createElement(l.default,{controller:this.props.controller},t.createElement(v.default,null,h.view(this,"q"),h.view(this,"w"),h.view(this,"e"),h.view(this,"r"),h.view(this,"t"),h.view(this,"y"),h.view(this,"u"),h.view(this,"i"),h.view(this,"o"),h.view(this,"p")),t.createElement(v.default,null,t.createElement("div",{class:t.const("dcg-half-width-placeholder")}),h.view(this,"a"),h.view(this,"s"),h.view(this,"d"),h.view(this,"f"),h.view(this,"g"),h.view(this,"h"),h.view(this,"j"),h.view(this,"k"),h.view(this,"l"),t.createElement("div",{class:t.const("dcg-half-width-placeholder")})),t.createElement(v.default,null,h.view(this,"=",{style:"highlight"}),h.view(this,"z"),h.view(this,"x"),h.view(this,"c"),h.view(this,"v"),h.view(this,"b"),h.view(this,"n"),h.view(this,"m"),h.view(this,","),h.view(this,"backspace",{style:"highlight"})),t.createElement(v.default,null,h.view(this,"shift",{style:"highlight",colspan:1.5}),h.view(this,"("),h.view(this,")"),h.view(this,"["),h.view(this,"]"),h.view(this,"!"),h.view(this,"'"),h.view(this,"pi"),h.view(this,"enter",{style:"blue",colspan:1.5})))},c);function c(){return null!==w&&w.apply(this,arguments)||this}e.default=a});
define('basic/keypad/sci-letters-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,h,v,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,a=(l=s.DCGViewBasic,i.__extends(n,l),n.prototype.template=function(){return t.createElement(v.default,{controller:this.props.controller},t.createElement(w.default,null,h.view(this,"a"),h.view(this,"b"),h.view(this,"c"),h.view(this,"d"),h.view(this,"e"),h.view(this,"f"),h.view(this,"g"),h.view(this,"h"),h.view(this,"i"),h.view(this,"j")),t.createElement(w.default,null,h.view(this,"k"),h.view(this,"l"),h.view(this,"m"),h.view(this,"n"),h.view(this,"o"),h.view(this,"p"),h.view(this,"q"),h.view(this,"r"),h.view(this,"s"),h.view(this,"t")),t.createElement(w.default,null,h.view(this,"=",{style:"highlight"}),h.view(this,","),h.view(this,"u"),h.view(this,"v"),h.view(this,"w"),h.view(this,"x"),h.view(this,"y"),h.view(this,"z"),h.view(this,"pi"),h.view(this,"backspace",{style:"highlight"})),t.createElement(w.default,null,h.view(this,"shift",{style:"highlight",colspan:2}),h.view(this,"("),h.view(this,")"),h.view(this,"["),h.view(this,"]"),h.view(this,"!"),h.view(this,"'"),h.view(this,"enter",{style:"blue",colspan:2})))},n);function n(){return null!==l&&l.apply(this,arguments)||this}e.default=a});
define('basic/keypad/sci-capital-qwerty-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,h,l,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var w,a=(w=s.DCGViewBasic,i.__extends(c,w),c.prototype.template=function(){return t.createElement(l.default,{controller:this.props.controller},t.createElement(v.default,null,h.view(this,"Q"),h.view(this,"W"),h.view(this,"E"),h.view(this,"R"),h.view(this,"T"),h.view(this,"Y"),h.view(this,"U"),h.view(this,"I"),h.view(this,"O"),h.view(this,"P")),t.createElement(v.default,null,t.createElement("div",{class:t.const("dcg-half-width-placeholder")}),h.view(this,"A"),h.view(this,"S"),h.view(this,"D"),h.view(this,"F"),h.view(this,"G"),h.view(this,"H"),h.view(this,"J"),h.view(this,"K"),h.view(this,"L"),t.createElement("div",{class:t.const("dcg-half-width-placeholder")})),t.createElement(v.default,null,h.view(this,"=",{style:"highlight"}),h.view(this,"Z"),h.view(this,"X"),h.view(this,"C"),h.view(this,"V"),h.view(this,"B"),h.view(this,"N"),h.view(this,"M"),h.view(this,","),h.view(this,"backspace",{style:"highlight"})),t.createElement(v.default,null,h.view(this,"shift",{style:"highlight",colspan:1.5}),h.view(this,"("),h.view(this,")"),h.view(this,"["),h.view(this,"]"),h.view(this,"!"),h.view(this,"'"),h.view(this,"pi"),h.view(this,"enter",{style:"blue",colspan:1.5})))},c);function c(){return null!==w&&w.apply(this,arguments)||this}e.default=a});
define('basic/keypad/sci-capital-letters-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,h,v,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,a=(l=s.DCGViewBasic,i.__extends(n,l),n.prototype.template=function(){return t.createElement(v.default,{controller:this.props.controller},t.createElement(w.default,null,h.view(this,"A"),h.view(this,"B"),h.view(this,"C"),h.view(this,"D"),h.view(this,"E"),h.view(this,"F"),h.view(this,"G"),h.view(this,"H"),h.view(this,"I"),h.view(this,"J")),t.createElement(w.default,null,h.view(this,"K"),h.view(this,"L"),h.view(this,"M"),h.view(this,"N"),h.view(this,"O"),h.view(this,"P"),h.view(this,"Q"),h.view(this,"R"),h.view(this,"S"),h.view(this,"T")),t.createElement(w.default,null,h.view(this,"=",{style:"highlight"}),h.view(this,","),h.view(this,"U"),h.view(this,"V"),h.view(this,"W"),h.view(this,"X"),h.view(this,"Y"),h.view(this,"Z"),h.view(this,"pi"),h.view(this,"backspace",{style:"highlight"})),t.createElement(w.default,null,h.view(this,"shift",{style:"highlight",colspan:2}),h.view(this,"("),h.view(this,")"),h.view(this,"["),h.view(this,"]"),h.view(this,"!"),h.view(this,"'"),h.view(this,"enter",{style:"blue",colspan:2})))},n);function n(){return null!==l&&l.apply(this,arguments)||this}e.default=a});
define('basic/keypad/sci-functions-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","keypad/keys","keypad/keypad","keypad/row"],function(require,e,t,i,s,n,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,r=i.Components.IfElse,o=(a=s.DCGViewBasic,t.__extends(v,a),v.prototype.template=function(){var e=this;return i.createElement("div",{class:i.const("dcg-sci-func-keypad")},i.createElement(l.default,{controller:this.props.controller},i.createElement(c.default,null,n.view(this,"sin"),n.view(this,"cos"),n.view(this,"tan"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),n.view(this,"a^b"),n.view(this,"sqrt"),n.view(this,"nthroot")),i.createElement(c.default,null,n.view(this,"arcsin"),n.view(this,"arccos"),n.view(this,"arctan"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),n.view(this,"e^x"),n.view(this,"abs"),r(function(){return e.controller.getReplaceRoundWithReciprocal()},{true:function(){return n.view(e,"a^{-1}")},false:function(){return n.view(e,"round")}})),i.createElement(c.default,null,n.view(this,"mean"),n.view(this,"stdev"),n.view(this,"stdevp"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),n.view(this,"ln"),n.view(this,"log"),n.view(this,"backspace",{style:"highlight"})),i.createElement(c.default,null,n.view(this,"nPr"),n.view(this,"nCr"),n.view(this,"!"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),n.view(this,"e"),n.view(this,"pi"),n.view(this,"enter",{style:"blue"}))))},v);function v(){return null!==a&&a.apply(this,arguments)||this}e.default=o});
define('basic/keypad/scientific-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","./sci-keypad","./sci-qwerty-keypad","./sci-letters-keypad","./sci-capital-qwerty-keypad","./sci-capital-letters-keypad","./sci-functions-keypad"],function(require,e,t,r,n,o,l,c,a,i,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,p=r.Components.SwitchUnion,d=(s=n.DCGViewBasic,t.__extends(f,s),f.prototype.template=function(){var e=this;return r.createElement("div",{role:r.const("group"),"aria-label":function(){return e.s("basic-calculator-narration-keypad")}},p(function(){return e.controller.getKeyboardMode()},{qwerty:function(){return r.createElement(l.default,{controller:e.props.controller})},letters:function(){return r.createElement(c.default,{controller:e.props.controller})},capitalQwerty:function(){return r.createElement(a.default,{controller:e.props.controller})},capitalLetters:function(){return r.createElement(i.default,{controller:e.props.controller})},functions:function(){return r.createElement(u.default,{controller:e.props.controller})},main:function(){return r.createElement(o.default,{controller:e.props.controller})}}))},f);function f(){return null!==s&&s.apply(this,arguments)||this}e.default=d});

define('loadcss!basic/keypad/braille-example-row', function(){});
define('basic/keypad/braille-example-row',["require","exports","tslib","dcgview","dcgview-helpers/static-mathquill-view","abraham","loadcss!./braille-example-row"],function(require,e,t,r,l,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BrailleExampleRow=void 0;var a,i=r.Components.For,o=(a=r.Class,t.__extends(c,a),c.prototype.template=function(){var e=this;return r.createElement("tr",null,r.createElement(i,{each:function(){return e.getBrailleAscii(e.props.latex())},key:function(e){return e.key}},r.createElement("td",null,function(e){return r.createElement("span",{class:r.const("dcg-key-press")},function(){return e.char})})),r.createElement("td",{class:r.const("dcg-braille-font")},function(){return e.getBrailleUnicode(e.props.latex())}),r.createElement("td",null,r.createElement(l.default,{config:this.const({}),latex:function(){return e.props.latex()}})))},c.prototype.getBrailleAscii=function(e){for(var t=n.UnicodeBraille.toExpandedBrailleAscii(this.getBrailleUnicode(e)),r=[],l=0;l<t.length;l++)r.push({char:t[l],key:l+")"+t[l]});return r},c.prototype.getBrailleUnicode=function(e){var t;return"nemeth"===this.props.brailleMode()?t=n.latexToNemeth(e):"ueb"===this.props.brailleMode()&&(t=n.latexToUeb(e)),t&&t.value?t.value:""},c);function c(){return null!==a&&a.apply(this,arguments)||this}e.BrailleExampleRow=o});

define('loadcss!basic/keypad/braille-keypad', function(){});
define('basic/keypad/braille-keypad',["require","exports","tslib","dcgview","basic/dcgview-basic","./braille-example-row","loadcss!./braille-keypad"],function(require,e,t,l,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a,c=(a=r.DCGViewBasic,t.__extends(o,a),o.prototype.template=function(){var e=this;return l.createElement("div",{class:function(){return{"dcg-braille-io-keypad-container":!0,"dcg-has-background-color":e.controller.hasBackgroundColor()}}},l.createElement("div",{class:l.const("dcg-braille-io-keypad")},l.createElement("div",{class:l.const("dcg-braille-description")},l.createElement("div",{class:l.const("dcg-braille-title")},function(){return e.controller.s("basic-calculator-text-braille-mode-is-on",{mode:e.brailleType()})}),l.createElement("div",{class:l.const("dcg-braille-info-text")},function(){return e.controller.s("basic-calculator-text-how-to-type-braille")}),l.createElement("div",{class:l.const("dcg-blue-btn"),role:l.const("button"),tabindex:l.const(0),onTap:function(){return e.controller.dispatch({type:"set-braille-mode",mode:"none"})}},function(){return e.controller.s("basic-calculator-button-turn-braille-mode-off",{mode:e.brailleType()})})),l.createElement("div",{class:l.const("dcg-braille-examples-table-container")},l.createElement("table",{class:l.const("dcg-braille-examples-table")},l.createElement("tr",null,l.createElement("th",null,function(){return e.controller.s("basic-calculator-heading-braille-table-type-this")}),l.createElement("th",null,function(){return e.brailleType()}),l.createElement("th",null,function(){return e.controller.s("basic-calculator-heading-braille-table-typeset")})),l.createElement(n.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("2+2")}),l.createElement(n.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("\\frac{1}{2}")}),l.createElement(n.BrailleExampleRow,{brailleMode:function(){return e.controller.getBrailleMode()},latex:this.const("\\sqrt{4}")})),l.createElement("div",{class:l.const("dcg-more-examples-link")},l.createElement("a",{href:function(){return"https://www.desmos.com/braille-examples?"+e.controller.getBrailleMode()},target:l.const("_blank")},function(){return e.controller.s("basic-calculator-link-view-braille-examples")})))))},o.prototype.brailleType=function(){return"nemeth"===this.controller.getBrailleMode()?"Nemeth":"ueb"===this.controller.getBrailleMode()?"UEB":""},o);function o(){return null!==a&&a.apply(this,arguments)||this}e.default=c});

define('loadcss!basic/expression-view', function(){});
define('basic/expression-view',["require","exports","tslib","keys","core/lib/label","dcgview","lib/i18n","jquery","dcgview-helpers/static-mathquill-view","dcgview-helpers/mathquill-view","./dcgview-basic","abraham","expressions/braille-input","../lib/tooltip","../lib/abraham-helpers","main/mathquill-operators","loadcss!Abraham","loadcss!./expression-view"],function(require,t,e,n,s,i,o,l,r,a,c,u,d,p,h,g){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var f,y=i.Components,E=y.If,v=y.Input,b=y.Textarea,m=(f=c.DCGViewBasic,e.__extends(F,f),F.prototype.getAriaLabel=function(){var t=this.getIndex()+1+"";return this.s("shared-calculator-narration-expression-index",{index:t})},F.prototype.didUpdate=function(){this.renderAnsValue()},F.prototype.didMountMQ=function(t){this.$mq=l(t)},F.prototype.getExp=function(){return this.model.getExpressionById(this.props.id())},F.prototype.getAns=function(){return this.model.getExpressionAns(this.props.id())},F.prototype.getAnsId=function(){return this.model.getExpressionAnsId(this.props.id())},F.prototype.getLatex=function(){return this.getExp().latex},F.prototype.getValue=function(){return this.model.getExpressionValue(this.props.id())},F.prototype.getBraille=function(){var t=this.getExp().braille;if(""!==t)return t;var e=h.latexToBraille(this.getLatex(),this.controller.getBrailleMode());return e.isError?"":u.UnicodeBraille.toExpandedBrailleAscii(e.value)},F.prototype.getIndex=function(){return this.model.getExpressionIndex(this.props.id())},F.prototype.getShowEvaluation=function(){return this.model.shouldShowEvaluationForExpression(this.props.id())},F.prototype.isFractionEvaluation=function(){return this.getExp().displayAsFraction},F.prototype.canDisplayEvaluationAsFraction=function(){return this.controller.getDecimalToFraction()&&this.model.canDisplayEvaluationAsFraction(this.props.id())},F.prototype.shouldDisplayEvaluationAsFraction=function(){return this.canDisplayEvaluationAsFraction()&&this.getExp().displayAsFraction},F.prototype.toggleFractionEvaluation=function(){this.dispatch({type:"toggle-fraction-evaluation",id:this.props.id()})},F.prototype.getFractionDisplayAriaLabel=function(){return this.shouldDisplayEvaluationAsFraction()?this.controller.s("basic-calculator-narration-convert-to-decimal"):this.controller.s("basic-calculator-narration-convert-to-fraction")},F.prototype.getError=function(){var t=this.model.getExpressionError(this.props.id());return t&&0<this.getLatex().length?o.unpack(t,this.controller.getLanguage()):""},F.prototype.showError=function(){return!!this.getError()},F.prototype.getFractionMessage=function(){return this.shouldDisplayEvaluationAsFraction()?this.s("basic-calculator-label-convert-to-decimal"):this.s("basic-calculator-label-convert-to-fraction")},F.prototype.getIsFocused=function(){return!this.controller.isSettingsMenuOpen()&&this.model.isExpressionFocused(this.props.id())},F.prototype.onFocusedChanged=function(t){this.getExp()&&(t?this.dispatch({type:"focusin",id:this.props.id()}):this.dispatch({type:"focusout",id:this.props.id()}))},F.prototype.onMQReflow=function(){this.renderedAnsData=void 0,this.renderAnsValue()},F.prototype.renderAnsValue=function(){var o,t,e,r,a=this;this.$mq&&(o=this.getAns(),r=!1,(t=this.getAnsId())&&(e=this.model.getExpressionById(t),r=e&&e.displayAsFraction),this.renderedAnsData&&this.renderedAnsData.value==o&&this.renderedAnsData.displayAsFraction===r||(this.renderedAnsData={value:o,displayAsFraction:r},this.$mq.find(".dcg-mq-ans").each(function(t,e){var n,i=l(e);"number"==typeof o?n=s.truncatedHTMLLabel(o,{digits:a.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:r}):"string"==typeof o&&(n=o),n?i.removeClass("dcg-invalid").html(n):i.addClass("dcg-invalid").html('<i class="dcg-icon-error"></i>')})))},F.prototype.getEvaluationLatex=function(){var t=this.getValue();if(void 0===t&&(t=NaN),this.model.isRationalizableConstant(this.props.id())&&!this.shouldDisplayEvaluationAsFraction())return"";if(Array.isArray(t))return"\\mathrm{"+t.length+"\\ element\\ list}";var e=s.truncatedLatexLabel(t,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()});return"undefined"===e?"=\\mathrm{undefined}":"="+e},F.prototype.getEvaluationBraille=function(){var t=this.getEvaluationLatex(),e=h.latexToBraille(t,this.controller.getBrailleMode());return e.isError?"":u.UnicodeBraille.toExpandedBrailleAscii(e.value)},F.prototype.didMountBrailleInput=function(t){this.brailleInputNode=t},F.prototype.didUnmountBrailleInput=function(){this.brailleInputNode=void 0},F.prototype.handleBrailleFocus=function(t){var e=t.target;e&&setTimeout(function(){e.setSelectionRange(0,0)})},F.prototype.handleBrailleKeydown=function(t){t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||(n.lookup(t)===n.UP?(this.forceModelFocus(),this.dispatch({type:"focus-prev-expression"}),t.preventDefault()):n.lookup(t)===n.DOWN?(this.forceModelFocus(),this.dispatch({type:"focus-next-expression"}),t.preventDefault()):n.lookup(t)===n.ENTER?(this.forceModelFocus(),this.dispatch({type:"insert-blank-expression"}),t.preventDefault()):n.lookup(t)===n.BACKSPACE&&document.activeElement===this.brailleInputNode&&""===this.getBraille()&&(this.dispatch({type:"backspace-from-braille"}),t.preventDefault()))},F.prototype.forceModelFocus=function(){document.activeElement!==this.brailleInputNode&&this.onFocusedChanged(!0)},F.prototype.focusBrailleInput=function(){this.brailleInputNode&&document.activeElement!==this.brailleInputNode&&this.brailleInputNode.focus()},F.prototype.getPostLabel=function(){if(this.showError())return this.getError();if(this.getShowEvaluation()){var t=this.getValue();return void 0===t&&(t=NaN),Array.isArray(t)?t.length+" element list":"equals "+s.truncatedAriaLabel(t,{digits:this.getEvaluationDigits(),bigCutoff:1e9,displayAsFraction:this.shouldDisplayEvaluationAsFraction()})}return""},F.prototype.onBrailleInput=function(t){this.controller.isSettingsMenuOpen()&&this.controller.dispatch({type:"close-settings-menu"});var e=h.brailleToLatex(u.UnicodeBraille.coerceToSixDotCells(t),this.controller.getBrailleMode());this.dispatch({type:"update-latex-from-braille",latex:e.isError?"":e.value,braille:t,id:this.props.id()})},F.prototype.getIndexSubscript=function(){return"_{"+(this.getIndex()+1)+"}"},F.prototype.getEvaluationDigits=function(){return this.controller.isScientificCalc()?10:7},F.prototype.onMountContainer=function(t){this.containerNode=t},F.prototype.onTapContainer=function(t){t.target!==this.containerNode||this.getShowEvaluation()||this.showError()||this.forceModelFocus()},F.prototype.template=function(){var n=this;return i.createElement("div",{class:function(){return{"dcg-basic-expression":!0,"dcg-focused":n.getIsFocused(),"dcg-braille-io":n.controller.renderAsBraille()}},onTap:this.bindFn(this.onTapContainer),onMount:this.bindFn(this.onMountContainer)},i.createElement(E,{predicate:function(){return n.controller.renderAsBraille()}},function(){return i.createElement("div",{class:i.const("dcg-braille-input")},i.createElement(d.default,{ariaLabel:function(){var t=h.latexToBraille("eq"+n.getIndexSubscript(),n.controller.getBrailleMode());return t.isError?"":u.UnicodeBraille.toExpandedBrailleAscii(t.value)},didMount:n.bindFn(n.didMountBrailleInput),didUnmount:n.bindFn(n.didUnmountBrailleInput),onFocusedChanged:n.bindFn(n.onFocusedChanged),shouldFocus:n.bindFn(n.getIsFocused),onKeydown:n.bindFn(n.handleBrailleKeydown),onInput:n.bindFn(n.onBrailleInput),sixKeyInput:function(){return n.controller.getSixKeyInput()},value:function(){return n.getBraille()},isStatic:n.const(!1)}))}),i.createElement(E,{predicate:function(){return n.controller.renderAsBraille()}},function(){return i.createElement("div",{class:i.const("dcg-braille-evaluation-container")},i.createElement(E,{predicate:function(){return n.getShowEvaluation()}},function(){return i.createElement("div",{class:i.const("dcg-braille-evaluation")},i.createElement(v,{readonly:n.const("true"),class:n.const("dcg-braille-evaluation-inner"),value:function(){return n.getEvaluationBraille()},onFocus:n.bindFn(n.handleBrailleFocus),onKeydown:n.bindFn(n.handleBrailleKeydown),onInput:function(){}}))}),i.createElement(E,{predicate:function(){return n.showError()}},function(){return i.createElement("div",{class:i.const("dcg-braille-error")},i.createElement("div",{class:i.const("dcg-basic-expression-error")},i.createElement("i",{class:i.const("dcg-icon-error")})),i.createElement(b,{readonly:n.const("true"),class:n.const("dcg-braille-error-inner"),value:function(){return n.getError()},onFocus:n.bindFn(n.handleBrailleFocus),onKeydown:n.bindFn(n.handleBrailleKeydown),onInput:function(){}}))}))}),i.createElement(E,{predicate:function(){return n.controller.renderAsBraille()}},function(){return i.createElement("div",{class:i.const("dcg-exp-mathquill-container"),didMount:n.bindFn(n.didMountMQ),onTap:n.bindFn(n.forceModelFocus)},i.createElement(r.default,{latex:function(){return n.getLatex()},config:n.const({}),onReflow:n.bindFn(n.onMQReflow)}))}),i.createElement(E,{predicate:function(){return!n.controller.renderAsBraille()}},function(){return i.createElement("div",{class:i.const("dcg-exp-mathquill-container"),didMount:n.bindFn(n.didMountMQ)},i.createElement(a.default,{latex:function(){return n.getLatex()},onReflow:n.bindFn(n.onMQReflow),isFocused:n.bindFn(n.getIsFocused),capExpressionSize:function(){return n.controller.getCapExpressionSize()},config:n.bindFn(n.getMQConfig),getAriaLabel:function(){return n.getAriaLabel()},getAriaPostLabel:function(){return n.getPostLabel()},hasError:function(){return!1},onUserPressedKey:function(t,e){n.controller.isSettingsMenuOpen()&&n.controller.dispatch({type:"close-settings-menu"}),n.dispatch({type:"keypad/press-key",key:t,evt:e})},onUserTypedText:function(t){return n.dispatch({type:"keypad/type-text",text:t})},onUserChangedLatex:function(t){n.dispatch({type:"update-latex",id:n.props.id(),latex:t})},onFocusedChanged:n.bindFn(n.onFocusedChanged),disableSpace:function(){return n.controller.getRestrictedEditing()}}))}),i.createElement("div",{class:i.const("dcg-exp-output-container")},i.createElement(E,{predicate:function(){return n.showError()&&!n.controller.renderAsBraille()}},function(){return i.createElement(p.Tooltip,{tooltip:n.bindFn(n.getError),gravity:n.const("w"),targetClickBehavior:n.const("stick")},i.createElement("div",{class:i.const("dcg-basic-expression-error")},i.createElement("i",{class:i.const("dcg-icon-error")})))}),i.createElement(E,{predicate:function(){return n.getShowEvaluation()}},function(){return i.createElement("div",{class:function(){return{"dcg-basic-expression-value":!0,"dcg-basic-evaluation-gray":Array.isArray(n.getValue())}}},i.createElement(r.default,{config:n.const({}),latex:function(){return n.getEvaluationLatex()}}),i.createElement(E,{predicate:n.bindFn(n.canDisplayEvaluationAsFraction)},function(){return i.createElement(p.Tooltip,{tooltip:n.bindFn(n.getFractionMessage),gravity:n.const("sw"),offset:n.const({left:-5})},i.createElement("span",{role:i.const("button"),tabindex:i.const("0"),"aria-label":n.bindFn(n.getFractionDisplayAriaLabel),class:function(){return{"dcg-basic-fraction-toggle":!0,"dcg-selected":n.isFractionEvaluation()}},onTap:n.bindFn(n.toggleFractionEvaluation)},i.createElement("i",{class:i.const("dcg-icon-fraction")})))}))})))},F.prototype.getMQConfig=function(){var t=this.controller,e=t.getAdditionalFunctions(),n=t.isFourFunctionCalc()&&(!e||-1===e.indexOf("fraction"));return{typingAsteriskWritesTimesSymbol:t.getTypingAsteriskWritesTimesSymbol(),typingSlashWritesDivisionSymbol:t.getTypingSlashWritesDivisionSymbol(),disableCopyPaste:t.getRestrictedEditing(),autoCommands:g.getAutoCommands({disallowFrac:n})}},F);function F(){return null!==f&&f.apply(this,arguments)||this}t.default=m});

define('loadcss!basic/basic-list-view', function(){});
define('basic/basic-list-view',["require","exports","tslib","scroll_helpers","dcgview","./dcgview-basic","./expression-view","jquery","lib/conditional_blur","loadcss!./basic-list-view"],function(require,e,t,n,i,r,o,s,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var d,l=i.Components,a=l.For,u=l.If,h=(d=r.DCGViewBasic,t.__extends(p,d),p.prototype.template=function(){var t=this;return i.createElement("div",{class:i.const("dcg-basic-list-container"),role:i.const("complementary"),"aria-label":function(){return t.controller.s("basic-calculator-narration-expression-list")},didMount:this.bindFn(this.didMountContainer)},i.createElement("div",{class:i.const("dcg-basic-list-placeholder"),didMount:this.bindFn(this.didMountPlaceholder)},i.createElement(u,{predicate:this.bindFn(this.showAnswerHint)},function(){return i.createElement("div",{class:i.const("dcg-answer-hint")},function(){return t.controller.s("basic-calculator-label-answer-hint")})})),i.createElement(a,{each:function(){return t.model.getExpressionOrder()}},i.createElement("div",{class:function(){return{"dcg-basic-list":!0,"dcg-projector-mode":t.controller.isProjectorMode()}}},function(e){return i.createElement(o.default,{controller:t.props.controller,id:t.const(e)})})))},p.prototype.didMountPlaceholder=function(e){s(e).on("dcg-tap",c.default)},p.prototype.showAnswerHint=function(){if(this.didHideAnswerHint)return!1;var e=this.model.getExpressionOrder()[0];return!(!this.model.shouldShowEvaluationForExpression(e)&&!this.didShowAnswerHint||(this.didShowAnswerHint=!0,(1<this.model.getNumberOfExpressions()||""===this.model.getExpressionLatex(e))&&(this.didHideAnswerHint=!0)))},p.prototype.didUpdate=function(){var e;!this.$container||0<(e=this.$container.find(".dcg-focused")).length&&n.scrollVisible(e,this.$container,50)},p.prototype.didMountContainer=function(e){this.$container=s(e)},p);function p(){var e=null!==d&&d.apply(this,arguments)||this;return e.didShowAnswerHint=!1,e.didHideAnswerHint=!1,e}e.default=h});

define('loadcss!basic/main', function(){});
define('basic/main',["require","exports","tslib","browser","keys","dcgview","./dcgview-basic","jquery","./keypad/fourfunction-control-bar","./keypad/single-expression-fourfunction-control-bar","./keypad/scientific-control-bar","./keypad/single-expression-scientific-control-bar","./keypad/fourfunction-keypad","./keypad/single-expression-fourfunction-keypad","./keypad/single-expression-scientific-keypad","./keypad/scientific-keypad","./keypad/braille-keypad","./basic-list-view","lib/aria","touchtracking","loadcss!desmos-icons","loadcss!./main","loadcss!dcg-normalize"],function(require,e,r,o,n,t,l,c,i,a,s,u,d,p,f,m,y,h,g,E){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var b,k=t.Components,v=k.If,C=k.IfElse,x=(b=l.DCGViewBasic,r.__extends(S,b),S.prototype.template=function(){var e=this;return t.createElement(v,{predicate:function(){return e.controller.shouldRender()}},function(){return t.createElement("div",{class:t.const("dcg-calculator-api-container"),style:t.const("width: 100%; height: 100%; position: relative;")},t.createElement("div",{class:function(){return{"dcg-calc-basic-main-wrapper":!0,"dcg-narrow":e.controller.containerSize.width<570,"dcg-short":e.controller.containerSize.height<=540,"dcg-scientific-calculator":e.controller.isScientificCalc(),"dcg-four-function-calculator":e.controller.isFourFunctionCalc(),"dcg-container":!0}},onKeydown:e.bindFn(e.handleRootKeydown),didMount:e.bindFn(e.didMountRoot),"x-ms-format-detection":t.const("none")},t.createElement("div",{role:t.const("application"),"aria-label":function(){return e.controller.isScientificCalc()?e.controller.s("basic-calculator-narration-calc-description-scientific"):e.controller.isFourFunctionCalc()?e.controller.s("basic-calculator-narration-calc-description-fourfunction"):""},class:function(){return{"dcg-calc-basic-main":!0,"dcg-inverted-colors":e.controller.getInvertedColors(),"dcg-projector-mode":e.controller.isProjectorMode(),"dcg-ipad":o.IS_IPAD,"dcg-has-background-color":e.controller.hasBackgroundColor(),"dcg-no-hyperlinks":!e.controller.getAllowLinks()}},style:function(){return{"font-size":e.controller.getFontSize()+"px",background:e.controller.getBackgroundColor(),color:e.controller.getTextColor(),filter:e.controller.getInvertedColors()?"invert(100%)":"none"}}},t.createElement(h.default,{controller:e.props.controller}),t.createElement(v,{predicate:function(){return e.controller.isScientificCalc()&&e.model.isSingleExpression()}},function(){return t.createElement("div",null,t.createElement(u.default,{controller:e.props.controller}),t.createElement("div",{class:t.const("dcg-basic-keypad-container")},C(function(){return e.controller.renderAsBraille()},{true:function(){return t.createElement(y.default,{controller:e.props.controller})},false:function(){return t.createElement(f.default,{controller:e.props.controller})}})))}),t.createElement(v,{predicate:function(){return e.controller.isScientificCalc()&&!e.model.isSingleExpression()}},function(){return t.createElement("div",null,t.createElement(s.default,{controller:e.props.controller}),t.createElement("div",{class:t.const("dcg-basic-keypad-container")},C(function(){return e.controller.renderAsBraille()},{true:function(){return t.createElement(y.default,{controller:e.props.controller})},false:function(){return t.createElement(m.default,{controller:e.props.controller})}})))}),t.createElement(v,{predicate:function(){return e.controller.isFourFunctionCalc()&&e.model.isSingleExpression()}},function(){return t.createElement("div",null,t.createElement(a.default,{controller:e.props.controller}),t.createElement("div",{class:t.const("dcg-basic-keypad-container")},C(function(){return e.controller.renderAsBraille()},{true:function(){return t.createElement(y.default,{controller:e.props.controller})},false:function(){return t.createElement(p.default,{controller:e.props.controller})}})))}),t.createElement(v,{predicate:function(){return e.controller.isFourFunctionCalc()&&!e.model.isSingleExpression()}},function(){return t.createElement("div",null,t.createElement(i.default,{controller:e.props.controller}),t.createElement("div",{class:t.const("dcg-basic-keypad-container")},C(function(){return e.controller.renderAsBraille()},{true:function(){return t.createElement(y.default,{controller:e.props.controller})},false:function(){return t.createElement(d.default,{controller:e.props.controller})}})))}))))})},S.prototype.didMountRoot=function(e){E.monitor(e)},S.prototype.handleRootKeydown=function(e){if(n.isUndo(e))return this.dispatch({type:"undo",source:"keyboard-shortcut"}),!1;if(n.isRedo(e))return this.dispatch({type:"redo",source:"keyboard-shortcut"}),!1;if(!e.metaKey&&!e.shiftKey)if(e.ctrlKey||e.altKey||n.lookup(e)!==n.BACKSPACE){if(e.ctrlKey===o.IS_APPLE&&e.altKey===!o.IS_APPLE){var r=n.lookupChar(e);if("N"===r){if(!this.controller.getBrailleControls())return;return this.dispatch({type:"set-braille-mode",mode:"nemeth"}),g.alert(this.controller.s("basic-calculator-narration-hotkey-nemeth")),!1}if("U"===r){if(!this.controller.getBrailleControls())return;return this.dispatch({type:"set-braille-mode",mode:"ueb"}),g.alert(this.controller.s("basic-calculator-narration-hotkey-ueb")),!1}if("Q"===r||"X"===r){if(!this.controller.getBrailleControls())return;return this.dispatch({type:"set-braille-mode",mode:"none"}),g.alert(this.controller.s("basic-calculator-narration-hotkey-braille-off")),!1}if("6"===r){if(!this.controller.getBrailleControls())return;var t=!this.controller.getSixKeyInput();return this.dispatch({type:"set-six-key-input",mode:t}),g.alert(t?this.controller.s("basic-calculator-narration-hotkey-six-key-input-on"):this.controller.s("basic-calculator-narration-hotkey-six-key-input-off")),!1}}}else if(!document.activeElement||E.elIsFocusable(c(document.activeElement)))return!1;return!0},S);function S(){return null!==b&&b.apply(this,arguments)||this}e.default=x});
define('api/basic',["require","exports","tslib","dcgview","./abstract","main/shared-worker-pool","basic/controller","basic/main","core/lib/color-helpers","underscore_model","./util","core/lib/deepCopy","lib/console"],function(require,e,i,t,o,a,n,r,m,s,k,l,x){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BasicCalculator=void 0;var c,d=(c=o.default,i.__extends(p,c),p.prototype.init=function(e){var t=this;(e=l.default(e)).backgroundColor&&!m.isValidHexColor(e.backgroundColor)&&(x.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)"),delete e.backgroundColor),e.textColor&&!m.isValidHexColor(e.textColor)&&(x.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)"),delete e.textColor);var o=i.__assign({language:"en",qwertyKeyboard:!0,links:!0,degreeMode:!1,settingsMenu:!0,invertedColors:!1,backgroundColor:"#fff",textColor:"#000",brailleMode:"none",sixKeyInput:!1,brailleControls:!0,brailleExpressionDownload:!0,projectorMode:!1,capExpressionSize:!1,functionDefinition:!0,autosize:!0,evaluationMode:"scientific",restrictedEditing:!1,additionalFunctions:["sqrt"],typingSlashWritesDivisionSymbol:!1,typingAsteriskWritesTimesSymbol:!1,decimalToFraction:!0,replaceCommaWith10Exp:!1,replaceRoundWithReciprocal:!1},e);this.settings=new s.UnderscoreModel;var r={workerPool:a.default,settingsProxy:this.settings};this.controller=new n.default(o,r),this.controller.onEventEmitted=function(e){"render"===e&&t.updateView(),t.triggerEvent(e,void 0)},this.setupDomChangeDetector(o.autosize)},p.prototype.onCreateView=function(){return t.mountToNode(r.default,this.rootElt,{controller:t.const(this.controller)})},p.prototype.setState=function(e,t){t=t||{},this.controller.dispatch({type:"set-state-from-api",state:e,opts:{allowUndo:!!t.allowUndo}})},p.prototype.getState=function(){return l.default(this.controller.model.getPersistedState())},p.prototype.undo=function(){this.controller.dispatch({type:"undo",source:"api"})},p.prototype.redo=function(){this.controller.dispatch({type:"redo",source:"api"})},p.prototype.clearHistory=function(){this.controller.dispatch({type:"clear-history"})},p.prototype.setBlank=function(e){e=e||{},this.controller.dispatch({type:"set-blank",opts:{allowUndo:!!e.allowUndo}})},p.prototype.updateSettings=function(e){if(null!=e)for(var t in e)switch(t){case"fontSize":var o=e[t];if(void 0===o)continue;this.controller.dispatch({type:"update-font-size",size:o});break;case"invertedColors":var r=e[t];if(void 0===r)continue;this.controller.dispatch({type:"update-inverted-colors",mode:r});break;case"backgroundColor":var i=e[t];if(void 0===i||!m.isValidHexColor(i)){x.warn("Invalid backgroundColor. Background color must be a 3- or 6-character hex color (e.g. #cde or #ffaaaa)");continue}this.controller.dispatch({type:"update-background-color",color:i});break;case"textColor":var a=e[t];if(void 0===a||!m.isValidHexColor(a)){x.warn("Invalid textColor. Text color must be a 3- or 6-character hex color (e.g. #000 or #001111)");continue}this.controller.dispatch({type:"update-text-color",color:a});break;case"degreeMode":var n=e[t];if(void 0===n)continue;this.controller.dispatch({type:"update-degree-mode",mode:n});break;case"brailleMode":var s=e[t];this.controller.dispatch({type:"set-braille-mode",mode:s});break;case"sixKeyInput":var l=e[t];if(void 0===l)continue;this.controller.dispatch({type:"set-six-key-input",mode:l});break;case"brailleControls":var c=e[t];if(void 0===c)continue;this.controller.dispatch({type:"set-braille-controls",value:c});break;case"brailleExpressionDownload":var d=e[t];if(void 0===d)continue;this.controller.dispatch({type:"set-braille-expression-download",mode:d});break;case"projectorMode":var p=e[t];if(void 0===p)continue;this.controller.dispatch({type:"update-projector-mode",mode:p});break;case"capExpressionSize":var u=e[t];if(void 0===u)continue;this.controller.dispatch({type:"update-cap-expression-size",mode:u});break;case"language":var h=e[t];if(void 0===h)continue;this.controller.dispatch({type:"update-language",language:k.validateLanguage(h)});break;case"settingsMenu":e.settingsMenu?this.controller.dispatch({type:"enable-settings-menu"}):this.controller.dispatch({type:"disable-settings-menu"});break;case"qwertyKeyboard":this.controller.dispatch({type:"update-options",options:{qwertyKeyboard:!!e.qwertyKeyboard}});var y=this.controller.getKeyboardMode();"qwerty"!==y&&"letters"!==y||this.controller.dispatch({type:"ABC"});break;case"functionDefinition":e.functionDefinition?this.controller.model.enableFunctionDefinition():this.controller.model.disableFunctionDefinition();break;case"links":this.controller.dispatch({type:"update-options",options:{links:!!e.links}});break;case"decimalToFraction":var f=e[t];if(void 0===f)continue;this.controller.dispatch({type:"update-decimal-to-fraction",mode:f});break;case"replaceCommaWith10Exp":var b=e[t];if(void 0===b)continue;this.controller.dispatch({type:"set-replace-comma-with-10-exp",replace:b});break;case"replaceRoundWithReciprocal":var v=e[t];if(void 0===v)continue;this.controller.dispatch({type:"set-replace-round-with-reciprocal",replace:v});break;case"restrictedEditing":this.controller.dispatch({type:"update-options",options:{restrictedEditing:!!e.restrictedEditing}});break;case"typingAsteriskWritesTimesSymbol":var g=e[t];if(void 0===g)continue;this.controller.dispatch({type:"set-typing-asterisk-writes-times-symbol",mode:g})}},p.prototype.focusFirstExpression=function(){this.controller.dispatch({type:"focus-first-expression"})},p.prototype.onResizeView=function(e){this.controller.dispatch({type:"ui/container-resized",size:e})},p.prototype.onDestroyView=function(){t.unmountFromNode(this.rootElt)},p.prototype.destroy=function(){this.controller.model.destroy(),c.prototype.destroy.call(this)},p);function p(e){return c.call(this,e)||this}e.BasicCalculator=d});
define('api/fourfunction',["require","exports","tslib","./basic","core/lib/deepCopy","lib/console","./util"],function(require,n,t,i,o,a,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var e,r=(e=i.BasicCalculator,t.__extends(l,e),l);function l(n,t){var i=e.call(this,n)||this;return i instanceof l?(i.init(function(n){(n=o.default(n)).hasOwnProperty("typingSlashWritesDivisionSymbol")||(n.typingSlashWritesDivisionSymbol=!0);n.hasOwnProperty("typingAsteriskWritesTimesSymbol")||(n.typingAsteriskWritesTimesSymbol=!0);n.exponentButtonForSquareRoot&&(a.warn("As of API version 1.0, the 'exponentButtonForSquareRoot' option is deprecated.Use 'additionalFunctions: \"exponent\"' instead."),n.additionalFunctions=["exponent"]);if(n.additionalFunctions){var t=n.additionalFunctions;"string"==typeof t&&(t=[t]),2<t.length&&(a.warn("additionalFunctions can only take up to 2 new functions. Using the first two."),t=t.slice(0,2));for(var i=!0,e=0;e<t.length;e++)-1===["sqrt","exponent","percent","fraction"].indexOf(t[e])&&(a.warn("Unrecognized value: '"+t[e]+"' for 'additionalFunction'. Valid values are 'sqrt', 'percent', 'exponent', or 'fraction'. Using default (\"sqrt\")"),i=!1);n.additionalFunctions=i?t:["sqrt"]}n.additionalFunctions&&n.additionalFunctions.length||(n.additionalFunctions=["sqrt"]);n.singleExpression?n.evaluationMode="singleExpressionFourFunction":n.evaluationMode="fourFunction";delete n.singleExpression,n.hasOwnProperty("decimalToFraction")||(n.decimalToFraction=!1);n.language&&(n.language=s.validateLanguage(n.language));return n}(t||{})),i):new l(n,t)}n.default=r});
define('api/scientific',["require","exports","tslib","./basic","core/lib/deepCopy","./util"],function(require,e,i,n,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l,s=(l=n.BasicCalculator,i.__extends(u,l),u);function u(e,i){var n=l.call(this,e)||this;return n instanceof u?(n.init(function(e){(e=t.default(e)).singleExpression?e.evaluationMode="singleExpressionScientific":e.evaluationMode="scientific";delete e.singleExpression,e.language&&(e.language=a.validateLanguage(e.language));return e}(i||{})),n):new u(e,i)}e.default=s});
define('pillow-keypad/controller',["require","exports","flux","keypad/mq-commands","lib/i18n","dcgview-helpers/mathquill-view"],function(require,e,t,a,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n.prototype.getBackgroundColor=function(){return"does-not-matter"},n.prototype.runAfterDispatch=function(e){this._queuedCallbacks.push(e)},n.prototype.enqueueEvent=function(e){var t=this;this.runAfterDispatch(function(){t.onEventEmitted&&t.onEventEmitted(e)})},n.prototype.getKeyboardMode=function(){return this.keyboardMode},n.prototype.updateKeyboardMode=function(e){this.keyboardMode=e},n.prototype.typeIntoFocusedMathquill=function(e){e=e.replace(/\r|\n/g,"");var t=this.activeMQ;t&&(t.typedText(e),r.default.simulateUserChangedLatex(t))},n.prototype.pressKeyInFocusedMathquill=function(e,t){var a=this.activeMQ;if(a)return"Enter"===e?(t&&(t.preventDefault(),t.stopPropagation()),void this.enqueueEvent("enter")):void a.keystroke(e,t)},n.prototype.executeCommandInFocusedMathquill=function(e){var t=this.activeMQ;t&&a.execute(t,e)},n.prototype.hookUpDispatcher=function(){var t=this;this.dispatcher.register(function(e){switch(t.enqueueEvent("render"),e.type){case"hide-keypad":t.enqueueEvent("hide-keypad");break;case"set-active-mq":t.activeMQ=e.mq;break;case"keypad/shift":t.updateKeyboardMode("capitalQwerty"===t.keyboardMode?"qwerty":"capitalQwerty");break;case"main":t.updateKeyboardMode("main");break;case"ABC":t.updateKeyboardMode("qwerty");break;case"functions":t.updateKeyboardMode("functions");break;case"keypad/type-text":t.typeIntoFocusedMathquill(e.text);break;case"keypad/press-key":t.pressKeyInFocusedMathquill(e.key,e.evt);break;case"keypad/custom-command":t.executeCommandInFocusedMathquill(e.command);break;case"keypad/123":case"keypad/abc":case"keypad/audio-trace":break;default:return e}})},n);function n(){var a=this;this.keyboardMode="main",this.dispatcher=new t.Dispatcher,this.s=o.createDictionaryLookupFunction(function(){return"en"}),this.dispatch=function(e){var t;for(a.dispatcher.dispatch(e);t=a._queuedCallbacks.shift();)t()},this._queuedCallbacks=[],this.dispatcher=new t.Dispatcher,this.hookUpDispatcher()}e.default=i});
define('pillow-keypad/dcgview-pillow-keypad',["require","exports","tslib","dcgview"],function(require,t,e,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DCGViewPillowKeypad=void 0;var s,o=(s=i.Class,e.__extends(l,s),l.prototype.init=function(){this.controller=this.props.controller(),this.dispatch=this.controller.dispatch,this.s=this.controller.s},l);function l(){return null!==s&&s.apply(this,arguments)||this}t.DCGViewPillowKeypad=o});
define('pillow-keypad/main-keypad',["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],function(require,e,t,i,l,h,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var c,r=(c=a.DCGViewPillowKeypad,t.__extends(n,c),n.prototype.template=function(){return i.createElement(h.default,{controller:this.props.controller},i.createElement(s.default,null,l.view(this,"a^2"),l.view(this,"a^b"),l.view(this,"|a|"),l.view(this,"a/b"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),l.view(this,"7",{style:"highlight"}),l.view(this,"8",{style:"highlight"}),l.view(this,"9",{style:"highlight"}),l.view(this,"/"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),l.view(this,"x"),l.view(this,"y")),i.createElement(s.default,null,l.view(this,"("),l.view(this,")"),l.view(this,"<"),l.view(this,">"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),l.view(this,"4",{style:"highlight"}),l.view(this,"5",{style:"highlight"}),l.view(this,"6",{style:"highlight"}),l.view(this,"*"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),l.view(this,"left",{style:"highlight"}),l.view(this,"right",{style:"highlight"})),i.createElement(s.default,null,l.view(this,"sqrt"),l.view(this,","),l.view(this,"<="),l.view(this,">="),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),l.view(this,"1",{style:"highlight"}),l.view(this,"2",{style:"highlight"}),l.view(this,"3",{style:"highlight"}),l.view(this,"-"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),l.spacer(.5),l.view(this,"backspace",{style:"highlight",colspan:1.5})),i.createElement(s.default,null,l.view(this,"nthroot"),l.view(this,"pi"),l.view(this,"%"),l.view(this,"a_b"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),l.view(this,"0",{style:"highlight"}),l.view(this,".",{style:"highlight"}),l.view(this,"="),l.view(this,"+"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),l.view(this,"enter",{colspan:2,style:"blue"})))},n);function n(){return null!==c&&c.apply(this,arguments)||this}e.default=r});
define('pillow-keypad/qwerty-keypad',["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],function(require,e,i,t,s,h,l,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var v,a=(v=w.DCGViewPillowKeypad,i.__extends(n,v),n.prototype.template=function(){return t.createElement(h.default,{controller:this.props.controller},t.createElement(l.default,null,s.view(this,"q"),s.view(this,"w"),s.view(this,"e"),s.view(this,"r"),s.view(this,"t"),s.view(this,"y"),s.view(this,"u"),s.view(this,"i"),s.view(this,"o"),s.view(this,"p")),t.createElement(l.default,null,t.createElement("div",{class:t.const("dcg-half-width-placeholder")}),s.view(this,"a"),s.view(this,"s"),s.view(this,"d"),s.view(this,"f"),s.view(this,"g"),s.view(this,"h"),s.view(this,"j"),s.view(this,"k"),s.view(this,"l"),t.createElement("div",{class:t.const("dcg-half-width-placeholder")})),t.createElement(l.default,null,s.view(this,"shift",{style:"highlight"}),s.view(this,"z"),s.view(this,"x"),s.view(this,"c"),s.view(this,"v"),s.view(this,"b"),s.view(this,"n"),s.view(this,"m"),s.view(this,","),s.view(this,"backspace",{style:"highlight"})),t.createElement(l.default,null,s.view(this,"="),s.view(this,"{"),s.view(this,"}"),s.view(this,"["),s.view(this,"]"),s.view(this,"!"),s.view(this,"'"),s.view(this,"pi"),s.view(this,"enter",{style:"blue"})))},n);function n(){return null!==v&&v.apply(this,arguments)||this}e.default=a});
define('pillow-keypad/capital-qwerty-keypad',["require","exports","tslib","dcgview","./dcgview-pillow-keypad","keypad/keys","keypad/keypad","keypad/row"],function(require,e,i,t,s,h,l,w){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var v,a=(v=s.DCGViewPillowKeypad,i.__extends(n,v),n.prototype.template=function(){return t.createElement(l.default,{controller:this.props.controller},t.createElement(w.default,null,h.view(this,"Q"),h.view(this,"W"),h.view(this,"E"),h.view(this,"R"),h.view(this,"T"),h.view(this,"Y"),h.view(this,"U"),h.view(this,"I"),h.view(this,"O"),h.view(this,"P")),t.createElement(w.default,null,t.createElement("div",{class:t.const("dcg-half-width-placeholder")}),h.view(this,"A"),h.view(this,"S"),h.view(this,"D"),h.view(this,"F"),h.view(this,"G"),h.view(this,"H"),h.view(this,"J"),h.view(this,"K"),h.view(this,"L"),t.createElement("div",{class:t.const("dcg-half-width-placeholder")})),t.createElement(w.default,null,h.view(this,"shift",{style:"highlight"}),h.view(this,"Z"),h.view(this,"X"),h.view(this,"C"),h.view(this,"V"),h.view(this,"B"),h.view(this,"N"),h.view(this,"M"),h.view(this,","),h.view(this,"backspace",{style:"highlight"})),t.createElement(w.default,null,h.view(this,"="),h.view(this,"("),h.view(this,")"),h.view(this,"["),h.view(this,"]"),h.view(this,"!"),h.view(this,"'"),h.view(this,"pi"),h.view(this,"enter",{style:"blue"})))},n);function n(){return null!==v&&v.apply(this,arguments)||this}e.default=a});
define('pillow-keypad/functions-keypad',["require","exports","tslib","dcgview","keypad/keys","keypad/keypad","keypad/row","./dcgview-pillow-keypad"],function(require,e,t,i,s,l,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,c=(r=n.DCGViewPillowKeypad,t.__extends(h,r),h.prototype.template=function(){return i.createElement(l.default,{controller:this.props.controller},i.createElement(a.default,null,s.view(this,"sin"),s.view(this,"cos"),s.view(this,"tan"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"ln"),s.view(this,"log"),s.view(this,"backspace",{style:"highlight"})),i.createElement(a.default,null,s.view(this,"arcsin"),s.view(this,"arccos"),s.view(this,"arctan"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"e^x"),s.view(this,"abs"),s.view(this,"round")),i.createElement(a.default,null,s.view(this,"mean"),s.view(this,"stdev"),s.view(this,"stdevp"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"a^b"),s.view(this,"sqrt"),s.view(this,"nthroot")),i.createElement(a.default,null,s.view(this,"nPr"),s.view(this,"nCr"),s.view(this,"!"),i.createElement("div",{class:i.const("dcg-partition-placeholder")}),s.view(this,"e"),s.view(this,"%"),s.view(this,"enter",{style:"blue"})))},h);function h(){return null!==r&&r.apply(this,arguments)||this}e.default=c});
define('pillow-keypad/control-bar',["require","exports","tslib","dcgview","keypad/control-bar","keypad/control-btn","./dcgview-pillow-keypad"],function(require,t,e,n,r,c,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a,i=(a=o.DCGViewPillowKeypad,e.__extends(s,a),s.prototype.template=function(){var t=this.props.controller();return n.createElement(r.default,{controller:this.props.controller},n.createElement(c.default,{command:this.const("main"),selected:function(){return"main"===t.getKeyboardMode()},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return t.dispatch({type:"main"})}},function(){return t.s("basic-calculator-button-controlbar-main")}),n.createElement(c.default,{command:this.const("ABC"),selected:function(){return-1!==["qwerty","capitalQwerty"].indexOf(t.getKeyboardMode())},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-abc")},onTap:function(){return t.dispatch({type:"ABC"})}},function(){return t.s("basic-calculator-button-controlbar-abc")}),n.createElement(c.default,{command:this.const("functions"),selected:function(){return-1!==["functions","restrictedFunctions"].indexOf(t.getKeyboardMode())},ariaLabel:function(){return t.s("basic-calculator-narration-controlbar-functions")},ignoreInTabOrder:this.const(!0),selectable:this.const(!0),onTap:function(){return t.dispatch({type:"functions"})}},function(){return t.s("shared-calculator-button-controlbar-functions")}),n.createElement("div",{class:n.const("dcg-hide-keypad-button"),"dcg-command":n.const("hide-keypad"),onTap:function(){return t.dispatch({type:"hide-keypad"})}},n.createElement("i",{class:n.const("dcg-icon-hide")})))},s);function s(){return null!==a&&a.apply(this,arguments)||this}t.default=i});

define('loadcss!pillow-keypad/main', function(){});
define('pillow-keypad/main',["require","exports","tslib","dcgview","./dcgview-pillow-keypad","./main-keypad","./qwerty-keypad","./capital-qwerty-keypad","./functions-keypad","./control-bar","touchtracking","loadcss!./main"],function(require,e,t,r,o,n,l,a,c,i,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,u=r.Components.Switch,p=(s=o.DCGViewPillowKeypad,t.__extends(y,s),y.prototype.template=function(){var t=this;return r.createElement("div",{class:r.const("dcg-calculator-api-container"),style:r.const("width: 100%; height: 100%; position: relative;")},r.createElement("div",{class:r.const("dcg-do-not-blur dcg-container dcg-api-shared-keypad-root"),didMount:this.bindFn(this.didMountRoot)},r.createElement(i.default,{controller:this.props.controller}),r.createElement("div",{role:r.const("group"),"aria-label":function(){return t.s("shared-calculator-narration-keypad")}},r.createElement(u,{key:function(){return t.controller.getKeyboardMode()}},function(e){switch(e){case"qwerty":return r.createElement(l.default,{controller:t.props.controller});case"capitalQwerty":return r.createElement(a.default,{controller:t.props.controller});case"functions":return r.createElement(c.default,{controller:t.props.controller});default:return r.createElement(n.default,{controller:t.props.controller})}}))))},y.prototype.didMountRoot=function(e){d.monitor(e)},y);function y(){return null!==s&&s.apply(this,arguments)||this}e.default=p});
define('api/pillow-keypad',["require","exports","tslib","dcgview","./abstract","pillow-keypad/controller","pillow-keypad/main"],function(require,t,e,o,n,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l,s=(l=n.default,e.__extends(c,l),c.prototype.init=function(){var e=this;this.controller=new i.default,this.controller.onEventEmitted=function(t){"render"===t&&e.updateView(),e.triggerEvent(t,void 0)},this.setupDomChangeDetector(!0)},c.prototype.setActiveMathquill=function(t){this.controller.dispatch({type:"set-active-mq",mq:t})},c.prototype.onCreateView=function(){return o.mountToNode(r.default,this.rootElt,{controller:o.const(this.controller)})},c.prototype.onResizeView=function(t){},c.prototype.onDestroyView=function(){o.unmountFromNode(this.rootElt)},c.prototype.destroy=function(){l.prototype.destroy.call(this)},c);function c(t){var e=l.call(this,t)||this;return e instanceof c?(e.init(),e):new c(t)}t.default=s});
define('core/cl-calculator',["require","exports","core/graphing-calc/migrate-state","core/graphing-calc/json/expression","core/graphing-calc/json/table","core/graphing-calc/json/simulation"],function(require,e,c,l,u,d){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CLCalculator=void 0,e.CLCalculator=function(e){var a=c.migrateToLatest(e),s={},t=a.graph.degreeMode,r=a.randomSeed;function o(e){switch(e.type){case void 0:case"expression":var a=l.computeParsableState(l.inflateDefaults(e));s[a.id]=a;break;case"table":var t=u.computeParsableState(u.inflateDefaults(e));s[t.id]=t;break;case"simulation":var r=d.computeParsableState(d.inflateDefaults(e));s[r.id]=r;break;case"folder":case"text":case"image":break;default:return e}}for(var n=0,i=a.expressions.list;n<i.length;n++){o(i[n])}return{setExpression:function(e){o(e)},getChangeSet:function(){return{statements:s,isCompleteState:!0,degreeMode:t,globalRandomSeed:r}}}}});
define('core/math/tree-queries/count-numbers',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countNumbers=void 0,e.countNumbers=function e(a,s){switch(a.type){case"Mul":case"Div":case"Prime":case"Call":case"ImplicitCall":case"Dot":case"Pipes":case"Sqrt":case"Nthroot":case"Frac":case"Derivative":case"Integral":case"EmptyIntegral":case"Sum":case"Product":case"Piecewise":case"Paren":case"Juxt":case"Superscript":case"Bang":case"Index":case"Equals":case"Inequality":case"Tilde":case"Pos":case"Neg":case"Add":case"Sub":case"List":case"Seq":case"Colon":case"Ellipsis":case"PercentOf":for(var c=0,r=0,t=a.args;r<t.length;r++)c+=e(t[r],s);return c;case"Decimal":return void 0===s||parseFloat(a.val)===s?1:0;case"MixedNumber":return void 0===s?3:(c=0,parseFloat(a.whole)===s&&(c+=1),parseFloat(a.num)===s&&(c+=1),parseFloat(a.den)===s&&(c+=1),c);case"Letter":case"EmptyPiecewise":case"Cmd":case"EmptyRangeEnd":return 0;case"Subscript":return e(a.args[0],s);case"InequalityChain":c=0,c+=e(a.first,s);for(var i=0,n=a.chain;i<n.length;i++)c+=e(n[i].args[0],s);return c;default:throw"Unexpected surface node "+a.type+"."}}});
define('core/graphing-calc/diffs/longest-subsequence',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.findLongestSubsequence=void 0,e.findLongestSubsequence=function(e){for(var r=e.length,n=new Array(r),i=new Array(r+1),o=0,t=0;t<r;t++){var u=void 0;if(e[i[o]]<e[t])u=o+1;else{for(var a=1,f=o-1;a<=f;){var s=Math.ceil((a+f)/2);e[i[s]]<e[t]?a=s+1:f=s-1}u=a}n[t]=i[u-1],i[u]=t,o<u&&(o=u)}for(var v=new Array(o),c=i[o],t=o-1;0<=t;t--)v[t]=e[c],c=n[c];return v}});
define('core/graphing-calc/diffs/calculate-diff',["require","exports","underscore","./longest-subsequence"],function(require,r,d,S){"use strict";var v,e;function R(r,e,n){var i,t={};for(var u in r){r.hasOwnProperty(u)&&(e.hasOwnProperty(u)?(i=function(r,e,n,i){if(d.isArray(r)&&d.isArray(e)){if(n===v.EXPRESSIONS&&"list"===i||n===v.TABLE_EXPRESSION&&"columns"===i)return function(e,r){for(var n={},i={},t=0;t<e.length;t++){if(void 0!==i[e[t].id])return{s:r};i[e[t].id]=t}for(var u={},t=0;t<r.length;t++){if(void 0!==u[r[t].id])return{s:r};u[r[t].id]=t}for(var s=function(r,e,n){for(var i={},t=e.filter(function(r){return void 0!==n[r.id]}).map(function(r){return n[r.id]}),u=S.findLongestSubsequence(t),s=0,f=u;s<f.length;s++){var a=f[s];i[r[a].id]=!0}return i}(e,r,i),f=0,a=0;a<e.length;a++){var o,E,l,O,c=e[a];s[c.id]?(o=u[c.id],E=r[o],l={},f!==o&&(l.a=r.slice(f,o).map(function(r){return p(e,i,r)})),d.isEqual(c,E)||(O="table"===c.type&&"table"===E.type,l.e=R(c,E,O?v.TABLE_EXPRESSION:v.OTHER)),d.isEmpty(l)||(n[a]=l),f=o+1):n[a]={d:1}}f<r.length&&(n[e.length]={a:r.slice(f,r.length).map(function(r){return p(e,i,r)})});if(d.isEmpty(n))return;return{l:n}}(r,e);if(!d.isEqual(r,e))return{s:e}}else if(d.isObject(r)&&d.isObject(e)){var t=R(r,e,function(r,e){return r===v.ROOT&&"expressions"===e?v.EXPRESSIONS:v.OTHER}(n,i));if(!d.isEmpty(t))return{e:t}}else if(!d.isEqual(r,e))return{s:e};return}(r[u],e[u],n,u))&&(t[u]=i):t[u]={d:1})}for(var u in e)e.hasOwnProperty(u)&&!r.hasOwnProperty(u)&&(t[u]={s:e[u]});return t}function p(r,e,n){if(e[n.id]){var i=r[e[n.id]],t={f:e[n.id]};return d.isEqual(i,n)||(t.e=R(i,n,v.OTHER)),{m:t}}return{s:n}}Object.defineProperty(r,"__esModule",{value:!0}),r.calculateDiff=void 0,(e=v=v||{})[e.ROOT=0]="ROOT",e[e.EXPRESSIONS=1]="EXPRESSIONS",e[e.TABLE_EXPRESSION=2]="TABLE_EXPRESSION",e[e.OTHER=3]="OTHER",r.calculateDiff=function(r,e){return R(r,e,v.ROOT)}});
define('core/graphing-calc/diffs/apply-diff',["require","exports","underscore","../../lib/deepCopy"],function(require,e,s,n){"use strict";function u(e,r){for(var n=0,t=s.keys(r);n<t.length;n++){var p=t[n],a=r[p];a.hasOwnProperty("s")?e[p]=a.s:a.hasOwnProperty("d")?delete e[p]:a.hasOwnProperty("l")?e[p]=function(e,r){for(var n=[],t=0;t<e.length;t++){var p=r[t];p&&p.a&&n.push.apply(n,o(e,p.a)),p&&p.e?n.push(u(e[t],p.e)):p&&p.d||n.push(e[t])}var a=r[e.length];a&&a.a&&n.push.apply(n,o(e,a.a));return n}(e[p],a.l):a.hasOwnProperty("e")&&(e[p]=u(e[p],a.e))}return e}function o(e,r){for(var n=[],t=0,p=r;t<p.length;t++){var a,s=p[t];s.hasOwnProperty("s")?n.push(s.s):s.hasOwnProperty("m")&&(a=e[s.m.f],s.m.e?n.push(u(a,s.m.e)):n.push(a))}return n}Object.defineProperty(e,"__esModule",{value:!0}),e.applyDiff=void 0,e.applyDiff=function(e,r){return u(n.default(e),r)}});
define('core/graphing-calc/translation/common',["require","exports"],function(require,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mutateString=t.deserializeTranslationKey=t.serializeTranslationKey=void 0,t.serializeTranslationKey=function(t){return"expression"===t.location||"object"===t.location?t.location+":"+t.id+":"+t.path:t.location+":"+t.path},t.deserializeTranslationKey=function(t){function e(){return new Error("Invalid key: "+t)}var i=t.split(":"),n=i[0];if(!n)throw e();if("expression"!=n&&"settings"!=n&&"object"!=n)throw e();if("settings"==n){if(2!=i.length)throw e();return{location:n,path:i[1]}}if(3!=i.length)throw e();return{location:n,id:i[1],path:i[2]}},t.mutateString=function(t,e,i){if(t)for(var n=e.split("."),r=t,o=0;o<n.length;o++){var a=n[o];if(!r[a])break;o==n.length-1&&"string"==typeof r[a]?r[a]=i:r=r[a]}}});
define('core/graphing-calc/translation/translator',["require","exports","tslib","../../lib/deepCopy","./common"],function(require,e,s,d,v){"use strict";function x(r,o){return function(e,i,a,t){var l;e&&(l=v.serializeTranslationKey(s.__assign(s.__assign({},o),{path:i})),r[l]={value:e,type:a,context:t})}}Object.defineProperty(e,"__esModule",{value:!0}),e.applyLocalizationMap=e.extractLocalizationMap=void 0,e.extractLocalizationMap=function(e){var i,a,t,l,r,o,s={};if("graph"==e.type){for(var n=0,c=e.graphState.expressions.list;n<c.length;n++){var p=function(e){var i,a,t,l,r={},o=x(r,{location:"expression",id:e.id});switch(e.type){case"expression":o(e.label,"label","string","expression-list-expression-label"),o(null===(i=e.clickableInfo)||void 0===i?void 0:i.description,"clickableInfo.description","string","expression-list-expression-clickable-description");break;case"image":o(e.image_url,"image_url","image","expression-list-image-url"),o(null===(a=e.clickableInfo)||void 0===a?void 0:a.description,"clickableInfo.description","string","expression-list-image-clickable-description"),o(null===(t=e.clickableInfo)||void 0===t?void 0:t.hoveredImage,"clickableInfo.hoveredImage","image","expression-list-image-clickable-hovered"),o(null===(l=e.clickableInfo)||void 0===l?void 0:l.depressedImage,"clickableInfo.depressedImage","image","expression-list-image-clickable-depressed");break;case"text":o(e.text,"text","string","expression-list-note-text");break;case"folder":o(e.title,"title","string","expression-list-folder-title")}return r}(c[n]);for(var g in p)s[g]=p[g]}var d=(l=e.graphState,(o=x(r={},{location:"settings"}))(l.graph.xAxisLabel,"xAxisLabel","string","settings-xaxis-label"),o(l.graph.yAxisLabel,"yAxisLabel","string","settings-yaxis-label"),r);for(var g in d)s[g]=d[g]}else{var v=e.geometryState.objects;for(var b in v){var u=(i=v[b],t=a=void 0,(t=x(a={},{location:"object",id:i.id}))(i.label,"label","string","geometry-object-label"),"image"===i.type&&t(i.url,"url","image","geometry-object-image-url"),a);for(var g in u)s[g]=u[g]}}return s},e.applyLocalizationMap=function(e,i,a){var t,l,r=d.default(e);if("graph"===a){for(var o,s={},n=0,c=null!==(l=null===(t=r.expressions)||void 0===t?void 0:t.list)&&void 0!==l?l:[];n<c.length;n++){var p=c[n];s[p.id]=p}for(var g in i){"expression"==(o=v.deserializeTranslationKey(g)).location?v.mutateString(s[o.id],o.path,i[g].value):v.mutateString(r.graph,o.path,i[g].value)}}else if(r.objects)for(var g in i){"object"==(o=v.deserializeTranslationKey(g)).location&&v.mutateString(r.objects[o.id],o.path,i[g].value)}return r}});
define('core/mathtools',["require","exports","parser","core/math/builtinframe","parsenodes","core/math/context","core/cl-calculator","core/math/parser/latex-parser","core/math/parser/expression-parser","core/math/tree-queries/count-numbers","core/lib/color-helpers","core/math/policyGraphing","core/math/policyScientific","core/math/policyFourFunction","core/lib/label","core/graphing-calc/diffs/calculate-diff","core/graphing-calc/diffs/apply-diff","core/graphing-calc/migrate-state","core/math/types","core/graphing-calc/translation/translator"],function(require,e,t,r,a,c,i,o,n,l,p,u,s,f,m,b,y,g,d,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.applyLocalizationMap=e.extractLocalizationMap=e.migrateToLatest=e.applyDiff=e.calculateDiff=e.CLCalculator=e.colorHelpers=e.policies=e.parseNodes=e.types=e.builtInFrame=e.context=e.treeQueries=e.expressionParser=e.parser=e.Label=void 0,Object.defineProperty(e,"CLCalculator",{enumerable:!0,get:function(){return i.CLCalculator}}),e.colorHelpers=p,e.Label=m,Object.defineProperty(e,"calculateDiff",{enumerable:!0,get:function(){return b.calculateDiff}}),Object.defineProperty(e,"applyDiff",{enumerable:!0,get:function(){return y.applyDiff}}),Object.defineProperty(e,"migrateToLatest",{enumerable:!0,get:function(){return g.migrateToLatest}}),Object.defineProperty(e,"extractLocalizationMap",{enumerable:!0,get:function(){return h.extractLocalizationMap}}),Object.defineProperty(e,"applyLocalizationMap",{enumerable:!0,get:function(){return h.applyLocalizationMap}}),e.parser={parse:function(e,r){return null==e&&(e=""),t.parse(e,r)}},e.expressionParser={parse:function(e){if(null!=e)return n.parse(o.parse(e))}},e.treeQueries={countNumbers:l.countNumbers},e.context=c.Context,e.builtInFrame=r,e.types=d,e.parseNodes=a,e.policies={graphing:u.PolicyGraphing,scientific:s.PolicyScientific,fourFunction:f.PolicyFourFunction}});
define('api/calculator',["require","exports","mathquill","tslib","graphing/clipping","core/constants","expressions/colors","graphing-calc/api/sanitize-expression","core/graphing-calc/json/graph-settings","main/font_sizes","expressions/image_file_to_data_url","./graphing","./headless","./fourfunction","./scientific","./pillow-keypad","core/mathtools"],function(require,e,a,l,o,i,t,n,r,s,u,c,d,p,g,f,C){"use strict";var h;function m(a){var e=h.enabledFeatures;return!e||e[a]}function S(a){e.DesmosAPI[a]=function(){throw new Error("The Desmos "+a+" is not enabled for this API key.")}}for(var P in Object.defineProperty(e,"__esModule",{value:!0}),e.Calculator=e.HeadlessGraphingCalculator=e.PillowKeypad=e.FourFunctionCalculator=e.ScientificCalculator=e.GraphingCalculator=e.DesmosAPI=void 0,"undefined"!=typeof Desmos?h=Desmos:(h={},window.Desmos=h),e.GraphingCalculator=c.default,e.HeadlessGraphingCalculator=d.default,e.FourFunctionCalculator=p.default,e.ScientificCalculator=g.default,e.PillowKeypad=f.default,e.DesmosAPI={version:i.CURRENT_API_VERSION,Colors:{RED:t.RED,BLUE:t.BLUE,GREEN:t.GREEN,ORANGE:t.ORANGE,PURPLE:t.PURPLE,BLACK:t.BLACK},imageFileToDataURL:u.imageFileToDataURL,supportedLanguages:h.localeData?Object.keys(h.localeData):h.locales?Object.keys(h.locales):[],Styles:l.__assign(l.__assign({},n.SanitizedLineStyle),n.SanitizedPointStyle),ColumnModes:n.SanitizedColumnMode,DragModes:n.SanitizedDragMode,AxisArrowModes:r.AxisArrowModes,FontSizes:s,LabelSizes:n.SanitizedLabelSize,LabelOrientations:n.SanitizedLabelOrientation,GraphingCalculator:c.default,Calculator:c.default,FourFunctionCalculator:p.default,ScientificCalculator:g.default,Private:{Mathtools:C,Graphtools:{getClippingGraphType:o.getClippingGraphType,mapSegmentToCanvas:o.mapSegmentToCanvas}},MathQuill:a,PillowKeypad:f.default,HeadlessGraphingCalculator:d.default},m("GraphingCalculator")||(S("GraphingCalculator"),S("Calculator")),m("FourFunctionCalculator")||S("FourFunctionCalculator"),m("ScientificCalculator")||S("ScientificCalculator"),e.DesmosAPI)e.DesmosAPI.hasOwnProperty(P)&&(h[P]=e.DesmosAPI[P]);e.Calculator=c.default});
define('main/external-login-popup',["require","exports","./backend"],function(require,e,t){"use strict";function i(e){var o=window.open(e.url,"login_window","width=650,height=530,resizable,scrollbars");o?function e(o,n){o.closed?n.askServerIfLoggedIn():setTimeout(function(){e(o,n)},1e3)}(o,e.userController):alert(e.blockedMessage)}Object.defineProperty(e,"__esModule",{value:!0}),e.listenForLoginRequests=void 0,e.listenForLoginRequests=function(n,l){(window.userController=n).observeEvent("googleLogin",function(e,o){i({url:t.getGoogleLoginURL(o),userController:n,blockedMessage:l("account-shell-text-login-window-blocked-google")})}),n.observeEvent("appleLogin",function(e,o){i({url:t.getAppleLoginURL(o),userController:n,blockedMessage:l("account-shell-text-login-window-blocked-apple")})})}});
define('analytics/looker',["require","exports","tslib","underscore","jquery","lib/console"],function(require,e,t,o,a,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.logPageLoad=e.logJSON=e.logNumber=e.log=e.getPageLoadId=void 0;var g,r={eventType:"eventType",pageLoadId:window.pageLoadId||"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var o=16*Math.random()|0;return("x"==e?o:3&o|8).toString(16)}),source:"browser",app:"knox",userAgent:navigator.userAgent},i=[];function s(e){var o=t.__assign(t.__assign(t.__assign({},r),{url:document.location.href}),e);"www.desmos.com"===document.location.hostname?(i.push(o),d()):n.log("ignoring looker log: ",o)}function x(e,o){s({eventType:e,payloadJSON:JSON.stringify(o)})}e.getPageLoadId=function(){return r.pageLoadId},e.log=s,e.logNumber=function(e,o){s({eventType:e,payloadNumber:o})},e.logJSON=x;var l=!0;var u=!(e.logPageLoad=function(e){var o=document.location.href,a=navigator.userLanguage||navigator.language,n=document.referrer,r=t.__assign({browserLang:a,referrer:n},e);g!==o&&(g=o,l?(x("page-load",r),l=!1):(delete r.referrer,x("page-spa-load",r)))}),d=o.throttle(function(){var e;u||0==i.length||(e=i.splice(0,50),u=!0,a.ajax({url:"https://g2sm0kahkl.execute-api.us-east-1.amazonaws.com/prod",type:"POST",contentType:"application/json",data:JSON.stringify({events:e})}).always(function(){u=!1,d()}))},1e3,{leading:!1})});

define('loadcss!tipsycss', function(){});
define('jquery.tipsy',['require','loadcss!tipsycss','jquery','keys'],function(require){require("loadcss!tipsycss");var g=require("jquery"),s=require("keys"),l=null,o=!1,w=0,n={};g(document).on("dcg-tap",".tipsy-sticky",function(t){var i,e,s;o?o=!1:(i=t.currentTarget,(e=g(i)).attr("tooltip")||(e=e.find("[tooltip]").filter(':not([tooltip=""])')),1===e.length&&"none"!==e.css("display")&&(e.parents().filter(function(){return"none"===g(this).css("display")}).length||(s=g.extend({},g.fn.tipsy.defaults),e.attr("tipsy-dir")?s.gravity=e.attr("tipsy-dir"):s.gravity="nw",s.fade=!1,(l=new a(e[0],s)).isOpenSticky=!0,l.renderVisible(),l.opener=i)))}),g(document).on("dcg-tapstart keydown",function(t){var i;if("keydown"!==t.type||s.lookup(t)!==s.ESCAPE)l&&(l.clearTooltip(),i=l.opener,"dcg-tapstart"===t.type&&g(t.target).closest(i).length&&g(document).one("dcg-tapend",function(t){g(t.target).closest(i).length&&(o=!0)}),l=null);else for(var e in n)n[e].clearTooltip()});var e=0;function a(t,i){this.id=e++,this.$element=g(t),this.options=i,this.fixTitle()}a.prototype={_show:function(){var t,i,e=this.getTitle();if(e&&!T()){var s=this.tip(),o=s.find(".tipsy-arrow");this.uuid=w,w++,g(document).on("scroll.tipsy"+this.uuid,this.clearTooltip.bind(this)),s.find(".tipsy-inner")[this.options.html?"html":"text"](e),s[0].className="tipsy",s.detach().css({top:0,left:0,visibility:"hidden",display:"block"}).prependTo(document.body);var n,r=this.$element[0],l=this.$tip[0],a=r.getBoundingClientRect(),d=l.getBoundingClientRect(),p=d.width,f=d.height,h=(t=this.options.gravity,i=this.$element[0],"function"==typeof t?t.call(i):t);switch(h.charAt(0)){case"n":n={top:a.top+a.height+this.options.offset,left:a.left+a.width/2-p/2};break;case"s":n={top:a.top-f-this.options.offset,left:a.left+a.width/2-p/2};break;case"e":n={top:a.top+a.height/2-f/2,left:a.left-p-this.options.offset};break;case"w":n={top:a.top+a.height/2-f/2,left:a.left+a.width+this.options.offset}}2==h.length&&("w"==h.charAt(1)?n.left=a.left+a.width/2-15:n.left=a.left+a.width/2-p+15);var c=0;n.left<0?(c=n.left,n.left=0):n.left+p>window.innerWidth&&(c=n.left+p-window.innerWidth,n.left=window.innerWidth-p),"n"!==h&&"s"!==h||(c-=5);var u=a.width/r.offsetWidth,y=a.height/r.offsetHeight;n.top/=y,n.left/=u,c/=u,o.css("marginLeft",c),s.css(n).addClass("tipsy-"+h),o[0].className="tipsy-arrow tipsy-arrow-"+h.charAt(0),this.options.fade?s.stop().css({opacity:0,display:"block",visibility:"visible"}).animate({opacity:1},"fast"):s.css({visibility:"visible",opacity:1}),this.options.sticky&&s.addClass("tipsy-temporary-sticky");var v=this,m=function(){v.validate(),v.validateTimeout=setTimeout(m,100)};m()}},_hide:function(){clearTimeout(this.validateTimeout),g(document).off("scroll.tipsy"+this.uuid),this.options.fade?this.tip().stop().fadeOut("fast",function(){g(this).detach()}):this.tip().detach()},clearTooltip:function(){delete this.buttonHoverTime,this.tooltipIsHovered=!1,this.isOpenSticky=!1,this.renderVisible()},renderVisible:function(){var t=!!this.renderedVisible,i=!!this.tooltipIsHovered||!!this.isOpenSticky;this.buttonHoverTime&&(t||500<=Date.now()-this.buttonHoverTime)&&(i=!0),i!==t&&((this.renderedVisible=i)?(n[this.id]=this)._show():(delete n[this.id],this._hide()))},fixTitle:function(){var t=this.$element;!t.attr("title")&&"string"==typeof t.attr("original-title")||t.attr("original-title",t.attr("title")||"").removeAttr("title")},getTitle:function(){var t,i=this.$element,e=this.options;return this.fixTitle(),"string"==typeof(e=this.options).title?t=i.attr("title"==e.title?"original-title":e.title):"function"==typeof e.title&&(t=e.title.call(i[0])),(t=t&&(""+t).replace(/(^\s*|\s*$)/,""))||""},tip:function(){return this.$tip||(this.$tip=g('<div class="tipsy"><div class="tipsy-arrow"></div><div class="tipsy-inner"></div></div>'),this.$tip.on("tipsyshow",function(){clearTimeout(this.tooltipOutTimeout),this.tooltipIsHovered=!0,this.renderVisible()}.bind(this)),this.$tip.on("tipsyhide",function(){clearTimeout(this.tooltipOutTimeout),this.tooltipOutTimeout=setTimeout(function(){this.tooltipIsHovered=!1,this.renderVisible()}.bind(this),100)}.bind(this))),this.$tip},validate:function(){var t=!1;if(!!this.getTitle())try{for(var i=this.$element[0];i;){if(i===document){t=!0;break}i=i.parentNode}}catch(t){}t||this.clearTooltip()}},g.fn.tipsy=function(e){if(!0===e)return this.data("tipsy");if("string"==typeof e){var t=this.data("tipsy");return t&&t[e](),this}function s(t){var i=g.data(t,"tipsy");return i||(i=new a(t,g.fn.tipsy.elementOptions(t,e)),g.data(t,"tipsy",i)),i}function i(t){var i;"tipsyshow"===t.type&&t.target!==this||l!==this&&(i=s(this),clearTimeout(i.buttonTimeout),i.buttonHoverTime=Date.now(),i.buttonTimeout=setTimeout(function(){i.renderVisible()},500))}function o(t){var i;"tipsyhide"===t.type&&t.target!==this||(i=s(this),"dcg-tapstart"===t.type&&i.options.sticky||(clearTimeout(i.buttonTimeout),i.buttonTimeout=setTimeout(function(){delete i.buttonHoverTime,i.renderVisible()},100)))}var n="tipsyshow",r="tipsyhide dcg-tapstart dcg-tapend dcg-tapcancel";return(e=g.extend({},g.fn.tipsy.defaults,e)).delegate?this.on(n,e.delegate,i).on(r,e.delegate,o):this.on(n,i).on(r,o),this},g.fn.tipsy.defaults={fade:!0,gravity:"n",html:!1,offset:0,title:"tooltip"},g.fn.tipsy.elementOptions=function(t,i){i=g.extend({},i);var e=g(t).attr("tipsy-gravity");e&&(i.gravity=e);var s=parseInt(g(t).attr("tipsy-offset"),10);return isNaN(s)||(i.offset=s),i},g.fn.tipsy.autoNS=function(){return g(this).offset().top>g(document).scrollTop()+g(window).height()/2?"s":"n"},g.fn.tipsy.autoWE=function(){return g(this).offset().left>g(document).scrollLeft()+g(window).width()/2?"e":"w"},g.fn.tipsy.autoBounds=function(o,n){return function(){var t={ns:n[0],ew:1<n.length&&n[1]},i=g(document).scrollTop()+o,e=g(document).scrollLeft()+o,s=g(this);return s.offset().top<i&&(t.ns="n"),s.offset().left<e&&(t.ew="w"),g(window).width()+g(document).scrollLeft()-s.offset().left<o&&(t.ew="e"),g(window).height()+g(document).scrollTop()-s.offset().top<o&&(t.ns="s"),t.ns+(t.ew?t.ew:"")}},g(document).tipsy({delegate:".tipsy-sticky",gravity:"nw",fade:!1,sticky:!0});var t=0;function T(){return 0!==t}return{isDisabled:T,removeDisableLock:function(){t--},addDisableLock:function(){t++}}});
define('shared-header/hamburger',["require","exports","tslib","browser","dcgview","jquery","jquery.tipsy"],function(require,e,t,o,r,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Hamburger=void 0;var p,c=(p=r.Class,t.__extends(i,p),i.prototype.template=function(){var t=this;return r.createElement("span",{role:r.const("button"),tabindex:r.const(0),"aria-label":function(){return t.openGraphText()},class:r.const("dcg-header-btn dcg-action-opendrawer dcg-tooltip"),tooltip:function(){return t.openGraphText()},onTap:function(e){return t.props.controller().dispatch({type:"open-mygraphs",device:e.device})},didMount:function(e){return t.hookupTooltip(e)}},r.createElement("i",{class:r.const("dcg-icon-hamburger")}))},i.prototype.hookupTooltip=function(e){this.props.tooltip()&&n(e).tipsy()},i.prototype.openGraphText=function(){var e=this.props.controller().getOpenText();return o.IS_APPLE?this.props.controller().s("account-shell-label-open-graph-mac",{open_graph:e}):this.props.controller().s("account-shell-label-open-graph-pc",{open_graph:e})},i);function i(){return null!==p&&p.apply(this,arguments)||this}e.Hamburger=c});
define('shared-header/accounts',["require","exports","tslib","dcgview","jquery"],function(require,n,e,c,o){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.Accounts=void 0;var t,r=c.Components.If,s=(t=c.Class,e.__extends(a,t),a.prototype.template=function(){var t=this,n=this.props.controller().userController;return c.createElement("span",null,c.createElement(r,{predicate:function(){return n.isLoggedIn()&&!t.props.disableAccounts()}},function(){return c.createElement("span",null,c.createElement(r,{predicate:function(){return n.isLoggingOut()}},function(){return c.createElement("span",{class:c.const("logout-progress-notice")},c.createElement("span",{class:c.const("dcg-spinner-dark")}))}),c.createElement(r,{predicate:function(){return!n.isLoggingOut()&&!t.props.disableAccounts()}},function(){return c.createElement("span",{class:c.const("dcg-account-link"),"dcg-menu-button":c.const("account"),role:c.const("button"),tabindex:c.const(0),"aria-haspopup":c.const("true"),"aria-expanded":c.const("false"),"aria-label":c.const("Account Information"),onTap:function(n){var e;t.props.controller().dispatch({type:"toggle-menu",payload:"account"}),"keyboard"==n.device&&(e="account"===t.props.controller().getOpenMenu(),o(e?".dcg-action-accountsettings":".dcg-account-link").focus())}},c.createElement("span",{class:c.const("email")},c.createElement("div",{class:c.const("header-account-name dcg-variable-name")},function(){return n.getFirstName()}),c.createElement("i",{class:c.const("dcg-icon-caret-down")})))}))}),c.createElement(r,{predicate:function(){return!n.isLoggedIn()&&!t.props.disableAccounts()}},function(){return c.createElement("span",{class:c.const("dcg-login")},c.createElement("a",{role:c.const("link"),tabindex:c.const(0),class:c.const("dcg-sign-in dcg-action-login"),onTap:function(n){t.props.controller().dispatch({type:"show-modal",modal:"login",device:n.device})}},function(){return t.props.controller().s("account-shell-button-log-in")}),function(){return t.props.controller().s("account-shell-text-or")},c.createElement("a",{role:c.const("link"),tabindex:c.const(0),class:c.const("dcg-create-account dcg-btn dcg-btn-green dcg-action-createaccount"),onTap:function(n){t.props.controller().dispatch({type:"show-modal",modal:"signup",device:n.device})}},function(){return t.props.controller().s("account-shell-button-sign-up")}))}))},a);function a(){return null!==t&&t.apply(this,arguments)||this}n.Accounts=s});
define('shared-header/header-toast',["require","exports","tslib","dcgview","main/toast-view"],function(require,t,e,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderToast=void 0;var o,i=(o=r.Class,e.__extends(n,o),n.prototype.template=function(){var t=this;return r.createElement(s.ToastView,{message:this.bindFn(this.getMessage),s:this.bindFn(this.s),onClose:function(){return t.graphsController().dismissSaveError()},showUndo:this.const(!1),showLearnMore:this.const(!1),toastStyle:this.bindFn(this.getStyle),noAria:this.const(!1),showClose:this.bindFn(this.showClose)})},n.prototype.s=function(t,e){return this.props.controller().s(t,e)},n.prototype.graphsController=function(){return this.props.controller().graphsController},n.prototype.getStyle=function(){return this.graphsController().didSaveFail()?"error":void 0},n.prototype.showClose=function(){return this.graphsController().didSaveFail()},n.prototype.getMessage=function(){return this.graphsController().isSaving()?this.props.controller().s("shared-calculator-label-saving"):this.graphsController().didSaveSucceed()?this.props.controller().s("shared-calculator-label-saved"):this.graphsController().didSaveFail()?this.props.controller().raw(this.graphsController().getSaveFailureMessage()):""},n);function n(){return null!==o&&o.apply(this,arguments)||this}t.HeaderToast=i});
define('calculator-shell/header-icon',["require","exports","tslib","dcgview","jquery"],function(require,t,e,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderIcon=void 0;var r,i=(r=o.Class,e.__extends(p,r),p.prototype.init=function(){this.controller=this.props.controller()},p.prototype.template=function(){var e=this;return this.controller=this.props.controller(),o.createElement("span",{role:o.const("button"),tabindex:o.const(0),"aria-haspopup":o.const("true"),"aria-label":function(){return e.props.label()},"aria-expanded":function(){return e.isMenuOpen()},class:function(){var t={"dcg-header-btn":!0};return t["dcg-action-"+e.props.name()]=!0,t["dcg-tooltip"]=!0,t["dcg-active"]=e.isMenuOpen(),t},"dcg-menu-button":this.props.name,tooltip:this.props.tooltip,onTap:this.props.onTap.bind(this),didMount:function(t){return e.hookUpTooltip(t)}},o.createElement("i",{class:this.props.icon}))},p.prototype.hookUpTooltip=function(t){n(t).tipsy()},p.prototype.isMenuOpen=function(){return this.controller.getOpenMenu()===this.props.label().toLowerCase()},p);function p(){return null!==r&&r.apply(this,arguments)||this}t.HeaderIcon=i});
define('calculator-shell/save-button',["require","exports","tslib","dcgview","browser","jquery"],function(require,e,t,n,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SaveButton=void 0;var r,a=n.Components.Switch,l=(r=n.Class,t.__extends(c,r),c.prototype.init=function(){this.controller=this.props.controller(),this.graphsController=this.controller.graphsController},c.prototype.template=function(){var t=this;return n.createElement("span",{class:n.const("dcg-if-user save-btn-container")},n.createElement("span",{class:n.const("dcg-action-save save-button"),onTap:function(e){return t.controller.dispatch({type:"save-graph",device:e.device})}},n.createElement(a,{key:function(){return!t.graphsController.isSaving()}},function(e){return e?n.createElement("span",{role:n.const("button"),tooltip:function(){return t.graphsController.hasUnsavedChanges()?t.saveChangesText():t.controller.s("account-shell-label-no-unsaved-changes")},class:function(){return{"styled-save-btn":!0,"tooltip-offset":!0,"dcg-btn-green":t.graphsController.hasUnsavedChanges(),"disabled-save-btn":!t.graphsController.hasUnsavedChanges()}},didMount:function(e){return t.hookUpTooltip(e)}},function(){return t.controller.s("account-shell-button-save")}):n.createElement("span",{class:n.const("saving-notice")},n.createElement("span",{class:n.const("dcg-spinner-dark")}))})))},c.prototype.hookUpTooltip=function(e){return s(e).tipsy({offset:7})},c.prototype.saveChangesText=function(){return o.IS_APPLE?this.controller.s("account-shell-label-save-changes-mac"):this.controller.s("account-shell-label-save-changes-pc")},c);function c(){return null!==r&&r.apply(this,arguments)||this}e.SaveButton=l});
define('calculator-shell/graph-title',["require","exports","tslib","dcgview","browser","jquery","./save-button"],function(require,t,e,o,r,n,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphTitle=void 0;var i,c=o.Components.If,s=(i=o.Class,e.__extends(p,i),p.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController,this.graphsController=this.controller.graphsController},p.prototype.template=function(){var e=this;return o.createElement("span",{class:o.const("title-div")},o.createElement("span",{role:o.const("button"),tabindex:o.const(0),class:o.const("dcg-variable-title dcg-tooltip dcg-action-savedialog"),tooltip:function(){return e.tooltipText()},onTap:function(){return e.controller.dispatch({type:"edit-title"})},didMount:function(t){return e.hookUpTooltip(t)}},function(){return e.graphsController.getCurrentGraphTitle()||e.graphsController.getUntitledString()}),o.createElement(c,{predicate:function(){return e.userController.isLoggedIn()&&!e.controller.getPreviewParams()&&!e.controller.isInMaintenanceMode()}},function(){return o.createElement(l.SaveButton,{controller:e.props.controller})}))},p.prototype.hookUpTooltip=function(t){return n(t).tipsy()},p.prototype.tooltipText=function(){return r.IS_APPLE?this.controller.s("account-shell-button-duplicate-mac"):this.controller.s("account-shell-button-duplicate-pc")},p);function p(){return null!==i&&i.apply(this,arguments)||this}t.GraphTitle=s});
define('frontpage/desmos-svg-logo',["require","exports","tslib","dcgview"],function(require,c,n,e){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.DesmosSVGLogo=void 0;var s,t=(s=e.Class,n.__extends(l,s),l.prototype.template=function(){return e.createElement("span",{onMount:this.bindFn(this.addSVGLogo)})},l.prototype.addSVGLogo=function(c){c.innerHTML='\n    <svg version="1.1" class="dcg-desmos-svg-logo" id="svg-desmos" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n   viewBox="0 0 48 9.876" style="enable-background:new 0 0 48 9.876;" xml:space="preserve">\n    <g>\n      <g>\n        <g id="desmos_1_">\n          <g>\n            <path d="M40.314,3.366c-0.73-0.752-1.634-1.136-2.681-1.136c-1.051,0-1.956,0.384-2.688,1.136c-0.731,0.754-1.1,1.674-1.1,2.736\n              c0,1.041,0.368,1.948,1.092,2.7c0.728,0.745,1.637,1.127,2.701,1.127s1.969-0.382,2.691-1.127\n              c0.722-0.755,1.09-1.663,1.09-2.713C41.418,5.034,41.048,4.121,40.314,3.366z M37.633,3.553c0.662,0,1.223,0.251,1.71,0.757\n              c0.487,0.513,0.723,1.105,0.723,1.801c0,0.709-0.234,1.292-0.713,1.787c-0.475,0.494-1.043,0.734-1.736,0.734\n              c-0.689,0-1.251-0.238-1.713-0.724c-0.47-0.493-0.699-1.076-0.699-1.781c0-0.709,0.238-1.304,0.724-1.817\n              C36.409,3.8,36.968,3.553,37.633,3.553z"/>\n          </g>\n          <g>\n            <path d="M6.841,0c-0.325,0-0.604,0.243-0.65,0.565L6.188,3.16C5.616,2.655,4.952,2.358,4.205,2.276h-0.02\n              C4.137,2.269,4.087,2.269,4.041,2.263c-0.05-0.006-0.1-0.006-0.147-0.015C3.787,2.246,3.679,2.246,3.55,2.252L3.52,2.257\n              c-0.05,0-0.103,0.004-0.153,0.011c-0.058,0.003-0.125,0.01-0.194,0.019L3.131,2.296C3.085,2.301,3.039,2.308,3.002,2.315\n              c-0.063,0.008-0.12,0.027-0.185,0.037C2.229,2.503,1.69,2.796,1.225,3.24L1.206,3.249C1.165,3.294,1.128,3.33,1.081,3.378\n              L1.037,3.423C1.012,3.454,0.981,3.486,0.954,3.518C0.876,3.604,0.797,3.701,0.719,3.811C0.692,3.843,0.67,3.873,0.649,3.907\n              L0.63,3.934C0.208,4.562,0,5.289,0,6.079c0,0.07,0.001,0.129,0.001,0.198c0.01,0.129,0.017,0.24,0.032,0.352l0.022,0.148\n              c0.009,0.045,0.02,0.092,0.035,0.149l0.023,0.118C0.275,7.678,0.601,8.251,1.08,8.75c0.193,0.198,0.402,0.38,0.622,0.524\n              l0.106,0.071C1.823,9.354,1.839,9.361,1.85,9.369l0.015,0.007C1.952,9.433,2.04,9.478,2.121,9.52\n              C2.182,9.544,2.24,9.576,2.292,9.596c0.447,0.185,0.94,0.28,1.466,0.28h0.021c0.062,0,0.122,0,0.178-0.005\n              c0.028,0,0.059-0.001,0.088-0.006c0.005,0,0.018,0,0.024,0l0.083-0.008C4.171,9.852,4.194,9.852,4.206,9.85\n              c0.753-0.081,1.42-0.373,1.983-0.866v0.3l0.003,0.034c0.042,0.291,0.275,0.52,0.566,0.557h0.139h0.031\n              c0.329-0.045,0.571-0.33,0.571-0.658V0.658C7.498,0.296,7.207,0,6.841,0z M6.161,6.096c0,0.704-0.23,1.278-0.706,1.767\n              C4.98,8.352,4.423,8.592,3.74,8.592c-0.301,0-0.571-0.049-0.839-0.146C2.89,8.445,2.883,8.444,2.877,8.439L2.844,8.426\n              C2.554,8.313,2.28,8.124,2.04,7.874C1.723,7.538,1.514,7.15,1.417,6.714C1.373,6.518,1.353,6.32,1.353,6.111\n              c0-0.704,0.23-1.289,0.71-1.8c0.48-0.505,1.032-0.748,1.689-0.748c0.659,0,1.208,0.243,1.69,0.751\n              C5.928,4.822,6.161,5.403,6.161,6.096z"/>\n          </g>\n          <g>\n            <path d="M15.977,5.933c0-0.094-0.009-0.193-0.016-0.292c-0.061-0.563-0.233-1.084-0.517-1.548\n              c-0.153-0.257-0.339-0.499-0.561-0.727c-0.543-0.56-1.186-0.92-1.911-1.063l-0.06-0.007c-0.053-0.013-0.108-0.02-0.158-0.028\n              c-0.079-0.011-0.16-0.023-0.234-0.025c-0.049-0.005-0.1-0.009-0.151-0.009c-0.117-0.004-0.241-0.004-0.37,0\n              c-0.674,0.034-1.292,0.227-1.833,0.586c-0.078,0.049-0.152,0.106-0.228,0.162C9.823,3.071,9.735,3.148,9.655,3.223\n              C9.609,3.266,9.566,3.312,9.511,3.365c-0.73,0.754-1.1,1.674-1.1,2.736c0,0.498,0.086,0.972,0.257,1.409\n              c0.176,0.463,0.458,0.897,0.834,1.283c0.086,0.086,0.175,0.172,0.28,0.266c0.149,0.125,0.301,0.237,0.453,0.333\n              c0.095,0.057,0.189,0.109,0.326,0.178c0.279,0.128,0.573,0.228,0.88,0.288c0.062,0.013,0.126,0.022,0.195,0.032\n              c0.06,0.008,0.128,0.016,0.188,0.022c0.06,0.007,0.12,0.008,0.181,0.011l0.027,0.001c0.056,0.004,0.115,0.004,0.17,0.004h0.021\n              c0.058,0,0.117,0,0.177-0.004c0.04-0.001,0.082-0.003,0.126-0.005l0.056-0.007c0.903-0.082,1.684-0.458,2.311-1.112\n              c0.145-0.151,0.277-0.307,0.389-0.468c0.044-0.057,0.086-0.118,0.124-0.181l0.018-0.037c0.032-0.082,0.047-0.162,0.047-0.241\n              c0-0.375-0.304-0.672-0.675-0.672c-0.219,0-0.426,0.109-0.557,0.295c-0.091,0.141-0.198,0.278-0.319,0.4\n              C13.445,8.39,12.877,8.63,12.184,8.63c-0.688,0-1.247-0.238-1.717-0.724c-0.077-0.081-0.155-0.177-0.226-0.269l-0.026-0.042\n              c-0.057-0.08-0.107-0.165-0.163-0.273C9.942,7.118,9.866,6.89,9.824,6.654h5.585l0.051-0.009\n              c0.278-0.061,0.488-0.292,0.521-0.585V6.042C15.981,6.002,15.981,5.962,15.977,5.933z M9.861,5.434\n              c0.066-0.251,0.164-0.486,0.305-0.704l0.019-0.032c0.09-0.136,0.193-0.262,0.309-0.389c0.481-0.508,1.038-0.756,1.7-0.756\n              c0.664,0,1.225,0.251,1.711,0.757c0.226,0.238,0.401,0.499,0.526,0.782c0.047,0.111,0.085,0.224,0.116,0.343L9.861,5.434\n              L9.861,5.434z"/>\n          </g>\n          <g>\n            <path d="M32.935,4.923v4.294c0,0.364-0.297,0.661-0.664,0.661c-0.339,0-0.627-0.25-0.662-0.594V9.26V5.204V4.941\n              c0-0.408-0.134-0.743-0.41-1.034c-0.255-0.259-0.536-0.399-0.868-0.422c-0.028-0.006-0.063-0.006-0.099-0.006\n              c-0.376,0-0.689,0.142-0.957,0.427c-0.262,0.277-0.394,0.588-0.411,0.961v0.044v0.015l0.002,0.041l-0.002,0.011v4.238\n              c0,0.364-0.293,0.661-0.659,0.661c-0.345,0-0.628-0.25-0.664-0.594L27.54,9.259l0.005-4.322\n              c-0.004-0.032-0.004-0.057-0.004-0.079C27.53,4.65,27.356,4.24,27.356,4.24S27.22,4,27.128,3.905\n              c-0.272-0.285-0.589-0.427-0.964-0.427c-0.372,0-0.685,0.142-0.957,0.427c-0.278,0.291-0.413,0.632-0.413,1.031V9.3\n              c-0.044,0.331-0.326,0.576-0.661,0.576c-0.363,0-0.662-0.297-0.662-0.661V2.836c0-0.367,0.299-0.665,0.662-0.665\n              c0.272,0,0.514,0.17,0.617,0.409c0.045-0.031,0.095-0.06,0.147-0.095c0.38-0.205,0.806-0.314,1.269-0.314\n              c0.677,0,1.267,0.224,1.759,0.658c0.057,0.049,0.108,0.103,0.156,0.156c0.045,0.042,0.084,0.086,0.123,0.127\n              c0.033-0.037,0.075-0.083,0.119-0.127c0.05-0.053,0.104-0.107,0.157-0.156c0.495-0.434,1.082-0.658,1.752-0.658\n              c0.081,0,0.153,0.004,0.227,0.009c0.579,0.046,1.099,0.263,1.534,0.656c0.05,0.045,0.101,0.096,0.156,0.149\n              C32.672,3.522,32.935,4.172,32.935,4.923z"/>\n          </g>\n          <g>\n            <path d="M22.565,7.684c0,1.228-0.993,2.236-2.218,2.255h-2.685c-0.359,0-0.65-0.293-0.65-0.651c0-0.359,0.29-0.648,0.65-0.648\n              h2.652c0.519-0.004,0.946-0.431,0.946-0.956s-0.427-0.953-0.953-0.953h-1.181c-0.032,0-0.066,0-0.101,0\n              c-1.243,0-2.257-1.007-2.257-2.252c0-1.248,1.014-2.259,2.257-2.259h2.651c0.359,0,0.653,0.293,0.653,0.655\n              c0,0.355-0.294,0.65-0.653,0.65h-2.651c-0.526,0-0.953,0.427-0.953,0.954c0,0.519,0.423,0.946,0.942,0.953h0.024\n              c0.005,0,0.021,0,0.041-0.002h1.227c0.316,0,0.626,0.062,0.912,0.193C22.036,5.985,22.565,6.794,22.565,7.684z"/>\n          </g>\n        </g>\n        <g>\n          <path d="M48,7.684c0,1.229-0.996,2.238-2.219,2.258H43.1c-0.359,0-0.651-0.296-0.651-0.654c0-0.359,0.292-0.648,0.651-0.648h2.65\n            c0.519-0.004,0.944-0.431,0.944-0.956s-0.428-0.953-0.951-0.953h-1.182c-0.033,0.004-0.065,0.004-0.099,0.004\n            c-1.245,0-2.258-1.008-2.258-2.256c0-1.248,1.013-2.259,2.258-2.259h2.647c0.358,0,0.654,0.296,0.654,0.655\n            c0,0.355-0.295,0.651-0.654,0.651h-2.647c-0.527,0-0.956,0.426-0.956,0.952c0,0.519,0.424,0.946,0.943,0.953h0.025\n            c0.004,0,0.022,0,0.038-0.002h1.231c0.316,0,0.624,0.062,0.911,0.193C47.472,5.985,48,6.794,48,7.684z"/>\n        </g>\n      </g>\n    </g>\n    </svg>\n    '},l);function l(){return null!==s&&s.apply(this,arguments)||this}c.DesmosSVGLogo=t});

define('loadcss!shared-header/header-bar', function(){});

define('loadcss!calculator-shell/calculator-shell', function(){});

define('loadcss!spinner', function(){});
define('calculator-shell/view',["require","exports","tslib","dcgview","jquery","lib/i18n","shared-header/hamburger","shared-header/accounts","shared-header/header-toast","./header-icon","./graph-title","frontpage/desmos-svg-logo","loadcss!shared-header/header-bar","loadcss!./calculator-shell","loadcss!spinner"],function(require,e,t,r,n,o,l,c,a,s,i,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HeaderBar=void 0;var d,p=r.Components.If,h=(d=r.Class,t.__extends(g,d),g.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController},g.prototype.template=function(){var n=this,e=this.controller.isInMaintenanceMode(),t=this.controller.getPreviewParams();return r.createElement("div",{class:r.const("dcg-header")},r.createElement("div",{class:r.const("dcg-header-desktop")},r.createElement("div",{class:r.const("align-left-container")},r.createElement(l.Hamburger,{controller:this.props.controller,tooltip:r.const(!0)}),r.createElement(i.GraphTitle,{controller:this.props.controller})),r.createElement("div",{class:r.const("align-center-container")},r.createElement("a",{href:r.const("/"),target:r.const("_blank"),class:r.const("dcg-home-link"),"aria-label":r.const("Home")},r.createElement(u.DesmosSVGLogo,null))),r.createElement(a.HeaderToast,{controller:this.props.controller}),r.createElement(p,{predicate:function(){return n.userController.didLogoutFail()}},function(){return r.createElement("div",{class:r.const("dcg-toast-container")},r.createElement("div",{class:r.const("dcg-toast")},function(){return n.controller.s("account-shell-error-logging-out")}))}),r.createElement("div",{class:r.const("align-right-container")},r.createElement(c.Accounts,{controller:this.props.controller,disableAccounts:function(){return null!=t||e}}),r.createElement(p,{predicate:function(){return n.controller.isArtContestEnabled()}},function(){return r.createElement(s.HeaderIcon,{controller:n.props.controller,label:function(){return o.s("account-shell-label-math-art-contest")},tooltip:function(){return n.controller.s("account-shell-label-math-art-contest")},icon:r.const("dcg-icon-trophy"),name:r.const("contest"),onTap:function(e){return n.controller.dispatch({type:"show-modal",modal:"contest-submission",device:e.device})}})}),r.createElement(s.HeaderIcon,{controller:this.props.controller,label:function(){return o.s("account-shell-label-share")},tooltip:function(){return n.controller.s("account-shell-label-share-graph")},icon:r.const("dcg-icon-share"),name:function(){return"share"},onTap:function(e){if(n.controller.dispatch({type:"toggle-menu",payload:"share"}),e&&"keyboard"===e.device&&"share"!==n.controller.getOpenMenu())return n.focusElement(".dcg-action-share")}}),r.createElement(s.HeaderIcon,{controller:this.props.controller,label:function(){return o.s("account-shell-label-help")},tooltip:function(){return n.controller.s("account-shell-label-help")},icon:r.const("dcg-icon-question-sign"),name:r.const("help"),onTap:function(e){if(n.controller.dispatch({type:"toggle-menu",payload:"help"}),"keyboard"===e.device){var t="help"===n.controller.getOpenMenu()?'.dcg-feature[href="/calculator?tour=sliders"]':".dcg-action-help";return n.focusElement(t)}}}),r.createElement(s.HeaderIcon,{controller:this.props.controller,label:function(){return o.s("account-shell-label-language")},tooltip:function(){return n.controller.s("account-shell-label-language")},icon:r.const("dcg-icon-world"),name:r.const("language"),onTap:function(e){if(n.controller.dispatch({type:"toggle-menu",payload:"language"}),"keyboard"===e.device){var t="language"===n.controller.getOpenMenu()?".dcg-language-option.dcg-selected":".dcg-action-language";return n.focusElement(t)}}}))),r.createElement(p,{predicate:function(){return null!=t||e}},function(){return r.createElement("div",{class:r.const("dcg-toast-container")},r.createElement("span",{class:r.const("dcg-toast dcg-maintenance-toast")},r.createElement("span",{class:r.const("dcg-msg")},r.createElement(p,{predicate:function(){return e}},function(){return r.createElement("span",null,function(){return n.controller.s("account-shell-text-maintenance-mode")})}),r.createElement(p,{predicate:function(){return null!=t}},function(){return r.createElement("span",null,function(){return null!=t?t.message:void 0})})),r.createElement(p,{predicate:function(){return e}},function(){return r.createElement("a",{class:r.const("undo"),target:r.const("_blank"),href:r.const("http://desmos.zendesk.com/entries/25429616-What-is-Maintenance-Mode-/")},function(){return n.controller.s("account-shell-link-learn-more")})}),r.createElement(p,{predicate:function(){return null!=t}},function(){return r.createElement("a",{class:r.const("undo"),target:r.const("_blank"),href:function(){return null!=t?t.url:void 0}},function(){return n.controller.s("account-shell-link-share-thoughts")})})))}))},g.prototype.focusElement=function(e){n(e).focus()},g);function g(){return null!==d&&d.apply(this,arguments)||this}e.HeaderBar=h});
define('calculator-shell/menu',["require","exports","tslib","dcgview","jquery"],function(require,t,e,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Menu=void 0;var n,r=o.Components.If,c=(n=o.Class,e.__extends(p,n),p.prototype.init=function(){this.controller=this.props.controller()},p.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){var t={"dcg-popover":!0,"dcg-bottom":!0,"dcg-constrained-height-popover":!0};return t["dcg-"+e.props.type()+"-container"]=!0,t["dcg-product-"+e.props.controller().getProduct()]=!0,t},style:o.const("display: block"),role:o.const("complementary"),label:function(){return e.props.label()}},o.createElement("div",{class:o.const("dcg-popover-interior")},o.createElement(r,{predicate:function(){return!("function"!=typeof e.props.title||!e.props.title())}},function(){return o.createElement("div",{class:o.const("dcg-popover-title")},function(){return e.props.title()})}),this.children),o.createElement("div",{class:o.const("dcg-arrow")}))},p.prototype.didMount=function(){var r=this,c=this.props.type();this.guid="menu-"+c,i("body").on("dcg-tapstart."+this.guid,function(t){var e=i(t.target),o=!!e.closest(".dcg-popover").length,n=!!e.closest("[dcg-menu-button="+c+"]").length;o||n||r.controller.dispatch({type:"toggle-menu",payload:"none"})})},p.prototype.didUnmount=function(){i("body").off("dcg-tapstart."+this.guid)},p);function p(){return null!==n&&n.apply(this,arguments)||this}t.Menu=c});

define('loadcss!shared-components/language-picker', function(){});

define('loadcss!shared-components/btn-styles', function(){});
define('shared-components/language-picker',["require","exports","tslib","dcgview","loadcss!./language-picker","loadcss!./btn-styles"],function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguagePicker=void 0;var r,o=n.Components,i=o.For,s=o.If,a=(r=n.Class,t.__extends(u,r),u.prototype.init=function(){this.i18n=this.props.i18n()},u.prototype.template=function(){var t=this;return n.createElement("div",{class:function(){return{"dcg-language-picker":!0,"dcg-two-columns":7<t.getLanguages().length}}},n.createElement("div",{class:n.const("dcg-language-header"),role:n.const("heading"),"aria-level":n.const("2")},function(){return t.i18n.s("shared-title-language-menu")}),n.createElement(i,{each:function(){return t.getLanguages()}},n.createElement("div",{class:n.const("dcg-languages-list"),role:n.const("list")},function(e){return n.createElement("div",{class:n.const("dcg-listitem"),role:n.const("listitem")},n.createElement("div",{class:function(){return{"dcg-language-option":!0,"dcg-selected":t.isLanguageSelected(e)}},lang:t.const(t.getLangCode(e)),role:n.const("link"),tabindex:n.const("0"),"aria-current":function(){return t.isLanguageSelected(e)},onTap:function(){return t.updateLang(e)}},function(){return t.i18n.raw(t.getLanguageDisplayName(e))}))})),n.createElement(s,{predicate:function(){return t.shouldShowFooterLink()}},function(){return n.createElement("a",{class:n.const("dcg-language-footer-link dcg-shared-blue-link"),href:function(){return t.getFooterLinkURL()}},function(){return t.getFooterLinkText()})}))},u.prototype.shouldShowFooterLink=function(){return!(!this.props.footerLink||!this.props.footerLink())},u.prototype.getFooterLinkURL=function(){var e=this.props.footerLink&&this.props.footerLink();if(e)return e.url},u.prototype.getFooterLinkText=function(){var e=this.props.footerLink&&this.props.footerLink();return e?e.text:this.i18n.raw("")},u.prototype.getCurrentLang=function(){return this.props.currentLang()},u.prototype.getLanguages=function(){return Object.keys(this.props.getAllLangs())},u.prototype.getLanguageDisplayName=function(e){return this.props.getAllLangs()[e].display_name},u.prototype.updateLang=function(e){var t=this.props.getAllLangs()[e].code;return this.props.onLangChosen(t)},u.prototype.getLangCode=function(e){return this.props.getAllLangs()[e].code},u.prototype.isLanguageSelected=function(e){return this.getLangCode(e)===this.getCurrentLang()},u);function u(){return null!==r&&r.apply(this,arguments)||this}e.LanguagePicker=a});

define('loadcss!calculator-shell/language', function(){});
define('calculator-shell/language-menu',["require","exports","tslib","dcgview","./menu","shared-components/language-picker","../lib/enabled-languages","loadcss!./language"],function(require,e,n,t,r,o,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LanguageMenu=void 0;var a,u=l.buildSupportedLanguagesMap(),g=(a=t.Class,n.__extends(c,a),c.prototype.init=function(){this.controller=this.props.controller(),this.languageController=this.controller.languageController},c.prototype.template=function(){var n=this;return t.createElement(r.Menu,{type:function(){return"language"},label:function(){return n.controller.s("account-shell-narration-language-menu")},controller:this.props.controller},t.createElement("div",{class:t.const("dcg-popover-content")},t.createElement(o.LanguagePicker,{getAllLangs:function(){return u},currentLang:function(){return n.languageController.getLanguage()},onLangChosen:function(e){n.languageController.fetchAndSetLanguage(e),n.controller.dispatch({type:"toggle-menu",payload:"none"})},i18n:this.props.controller})))},c);function c(){return null!==a&&a.apply(this,arguments)||this}e.LanguageMenu=g});
define('core/math/conics',['require','numeric','core/math/distance','core/math/qr'],function(require){"use strict";var l=require("numeric"),e=require("core/math/distance"),t=require("core/math/qr");function b(r,n){return e.approx(1/t.conditionNumber(t.qr(r)),0,n)}var d={isLine:function(r,n,e,t,i,o){return b([[r,n,1],[e,t,1],[i,o,1]])},isCircle:function(r,n,e,t,i,o,a,c){return b([[r*r+n*n,r,n,1],[e*e+t*t,e,t,1],[i*i+o*o,i,o,1],[a*a+c*c,a,c,1]])},isConic:function(r,n,e,t,i,o,a,c,u,f,l,s){return b([[r*r,n*n,2*r*n,r,n,1],[e*e,t*t,2*e*t,e,t,1],[i*i,o*o,2*i*o,i,o,1],[a*a,c*c,2*a*c,a,c,1],[u*u,f*f,2*u*f,u,f,1],[l*l,s*s,2*l*s,l,s,1]])},conicQuadraticParameters:function(r,n,e,t,i,o,a,c,u,f){return{a:l.det([[n*n,2*r*n,r,n,1],[t*t,2*e*t,e,t,1],[o*o,2*i*o,i,o,1],[c*c,2*a*c,a,c,1],[f*f,2*u*f,u,f,1]]),b:l.det([[r*r,n*n,r,n,1],[e*e,t*t,e,t,1],[i*i,o*o,i,o,1],[a*a,c*c,a,c,1],[u*u,f*f,u,f,1]]),c:-l.det([[r*r,2*r*n,r,n,1],[e*e,2*e*t,e,t,1],[i*i,2*i*o,i,o,1],[a*a,2*a*c,a,c,1],[u*u,2*u*f,u,f,1]])}},classifyConic:function(r,n,e,t,i,o,a,c,u,f,l,s){if(d.isLine(r,n,i,o,l,s))return"line";if(d.isCircle(r,n,e,t,u,f,l,s))return"circle";if(!d.isConic(r,n,e,t,i,o,a,c,u,f,l,s))return"none";var h=d.conicQuadraticParameters(r,n,e,t,i,o,a,c,u,f);return b([[h.a,h.b],[h.b,h.c]],20)?"parabola":h.b*h.b>h.a*h.c?"hyperbola":"ellipse"},classifyBranchConic:function(r){var n,e;if(1===r.length&&4===r[0].length)return"line";for(var t=0;t<r.length;t++){var i=r[t],o=i.length;if(o<12)return"unknown";if("none"===(e=d.classifyConic(i[0],i[1],i[2*Math.floor(o/12)],i[2*Math.floor(o/12)+1],i[2*Math.floor(2*o/12)],i[2*Math.floor(2*o/12)+1],i[2*Math.floor(3*o/12)],i[2*Math.floor(3*o/12)+1],i[2*Math.floor(4*o/12)],i[2*Math.floor(4*o/12)+1],i[o-2],i[o-1])))return"none";if(n&&e!==n)return"none";n=e}return n}};return d});
define('predicates/common',['require','parser','core/math/conics','graphing-calc/models/expression','graphing-calc/models/list'],function(require){"use strict";var t=require("parser"),r=require("core/math/conics"),i=require("graphing-calc/models/expression"),s=require("graphing-calc/models/list");return{FOCUSED_EXP:function(n,e){return s.isItemSelected(n)&&"expression"===n.type},FOCUSED_OR_EMPTY_EXP:function(n,e){return!(!s.isItemSelected(n)||"expression"!==n.type)||"expression"===n.type&&i.isEmpty(n)},COMPLEX_EXP:function(n,e){return"expression"===n.type&&i.isGraphable(n)&&e&&e.branches[0]&&"line"!==r.classifyBranchConic(e.branches[0].segments)},TABLEABLE_EXP:function(n,e){return i.isGraphable(n)&&n.formula.is_tableable},EXP:function(n,e){return"expression"===n.type},GRAPHABLE_EXP:function(n,e){return i.isGraphable(n)},HAS_ERROR:function(n,e){return n.error&&("expression"!==n.type||!i.isEmpty(n))},DEPENDS_ON:function(r){return function(n,e){return!!n.latex&&0<=t.parse(n.latex).getDependencies().indexOf(r)}},DEFINES:function(r){return function(n,e){return!!n.latex&&0<=t.parse(n.latex).getExports().indexOf(r)}},HAS_N_DEPENDENCIES:function(r){return function(n,e){return"expression"===n.type&&n.formula&&n.formula.variables&&n.formula.variables.length>=r}},NONCONSTANT_LINE:function(n,e){return e&&"line"===r.classifyBranchConic(e.branches[0].segments)&&!isFinite(n.formula.constant_value)},RESTRICTED_LINE:function(n,e){return this.NONCONSTANT_LINE(n,e)&&this.RESTRICTED(n,e)},EXP_NOT_RESTRICTED_LINE:function(n,e){return this.EXP(n,e)&&!this.RESTRICTED_LINE(n,e)},PARABOLA:function(n,e){return e&&e.branches&&e.branches.some(function(n){return"parabola"===r.classifyBranchConic(n.segments)})},RESTRICTED:function(n,e){return!(!n||!n.latex)&&!!n.latex.match(/\\left\\{(.+)\\right\\}/)},SHIFTED_PARABOLA:function(n,e){if(!this.PARABOLA(n,e))return!1;var r=e.branches[0].compiled.fn;return 0!==r(0)||1!==r(1)},EVALUATION:function(n,e){return n.formula&&n.formula.is_evaluable&&isFinite(n.formula.constant_value)},HAS_DEPENDENT_Y:function(n,e){return"y"===n.formula.assignment},SLIDER:function(n,e){return!!n.sliderExists&&!i.isGraphable(n)},ANIMATING_SLIDER:function(n,e){return n.sliderExists&&n.slider.isPlaying},SLID_SLIDER:function(n,e){return n.sliderExists&&!i.isGraphable(n)&&1!==i.getSliderValue(n)},TABLE:function(n,e){return"table"===n.type},REGRESSION:function(n,e){return n.formula&&n.formula.regression},HAS_DATA_COLUMN:function(n,e){if(!this.TABLE(n,e))return!1;for(var r=1;r<n.columnModels.length;r++)if(n.columnModels[r].discrete)return!0;return!1},HAS_FUNCTION_COLUMN:function(n,e){if(!this.TABLE(n,e))return!1;for(var r=1;r<n.columnModels.length;r++)if(!1===n.columnModels[r].discrete)return!0;return!1}}});
define('tours/base_tour',['require','pjs','jquery','../predicates/common','graphing-calc/models/abstract-item'],function(require){"use strict";var e=require("pjs"),t=require("jquery"),n=require("../predicates/common"),l=require("graphing-calc/models/abstract-item");return e(function(e){e.init=function(e){this.Calc=e,this.controller=this.Calc.controller},e.expressionsVisible=function(){return this.controller.isListVisible()},e.s=function(e,t){return this.controller.s(e,t)},e.requireExpressionsVisible=function(){return{position:"e",content:this.s("graphing-tours-label-require-expressions-visible"),sel:t(".dcg-show-expressions-tab"),delayBeforeEnter:400,delayBeforeExit:400}},e.resourcesOpen=function(){return t("body").hasClass("resources-open")},e.requireResourcesNotOpen=function(){return{position:"e",content:this.s("graphing-tours-label-require-resources-not-open"),sel:t(".dcg-action-opendrawer"),delayBeforeEnter:400,delayBeforeExit:400}},e.editListMode=function(){return this.controller.isInEditListMode()},e.requireNotEditListMode=function(){return{position:"s",content:this.s("graphing-tours-label-require-not-edit-list-mode"),sel:t(".dcg-action-toggle-edit")}},e.expressionCount=function(){return this.controller.getItemCount()},e.getExpSketch=function(e){var t=this.Calc.grapher.graphSketches[e.id];if(!t||t.visible)return t},e.getAvailableExp=function(e){var t=this.getMatchingExpSelector(n.FOCUSED_OR_EMPTY_EXP,e);return t||".dcg-new-math-div"},e.expList=function(){return t(this.Calc.rootElt).find(".dcg-exppanel")},e.getSelectorById=function(e){return this.controller.getItemSelectorById(e)},e.getModelById=function(e){return this.controller.getItemModel(e)},e.expMatches=function(e,t){if(!e)return!1;if("function"==typeof t)return t.call(n,e,this.getExpSketch(e));for(var r=0;r<t.length;r++)if(!t[r].call(n,e,this.getExpSketch(e)))return!1;return!0},e.getMatchingExpId=function(e,t){for(var r,n={},i=this.controller.getAllItemModels(),o=0;o<i.length;o++)r=i[o],"render"===l.getDisplayState(r)&&(n[r.id]=!0);for(var s in t)delete n[s];var c=this.controller.getSelectedItem();if(c&&n[c.id]&&this.expMatches(c,e))return c.id;for(o=0;o<i.length;o++)if(n[(r=i[o]).id]&&this.expMatches(r,e))return r.id;return null},e.getMatchingExpSelector=function(e,t){var r=this.getMatchingExpId(e,t);return r?this.getSelectorById(r):r},e.getMatchingExpModel=function(e,t){var r=this.getMatchingExpId(e,t);return r?this.getModelById(r):r}})});
define('tours/sliders',['require','pjs','./base_tour','predicates/common'],function(require){"use strict";var e=require("pjs"),s=require("./base_tour"),o=require("predicates/common");return e(s,function(e,s){e.sliderHasSlid=!1,e.shouldPopup=function(){return!!this.getMatchingExpSelector(o.SLIDER)},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e,s=this.getMatchingExpSelector(o.GRAPHABLE_EXP),t=this.getMatchingExpSelector(o.SLIDER),i=this.getMatchingExpSelector(o.ANIMATING_SLIDER),r=this.getMatchingExpSelector(o.SLID_SLIDER);if(s&&i)return{final:!0,position:"s",endingMsg:this.s("graphing-tours-label-sliders-pro"),sel:i.find(".dcg-circular-icon")};if(s&&r)return r.find(".dcg-depressed").length?{doNotUpdate:!0}:{position:"s",content:"<b>"+this.s("graphing-tours-label-sliders-hands-free")+"</b><br>"+this.s("graphing-tours-label-sliders-press-play"),sel:r.find(".dcg-circular-icon")};if(s&&t){var n=t.find(".dcg-thumb .dcg-graphic");return 1===n.length?{position:"s",content:this.s("graphing-tours-label-sliders-drag-handle"),sel:n}:{position:"e",content:this.s("graphing-tours-label-sliders-change-value"),sel:t}}return(e=1<this.expressionCount()?this.getMatchingExpSelector(o.HAS_N_DEPENDENCIES(1)):this.getMatchingExpSelector(o.HAS_N_DEPENDENCIES(2)))?{position:"s",content:"<b>"+this.s("graphing-tours-label-awesome")+"</b> "+this.s("graphing-tours-label-sliders-add"),sel:e.find(".dcg-slider-btn-container:last .dcg-btn-blue")}:(e=this.getMatchingExpSelector(o.FOCUSED_OR_EMPTY_EXP))?{position:"e",content:"<b>"+this.s("graphing-tours-label-sliders-make-sliders")+"</b><br>"+this.s("graphing-tours-label-sliders-try-typing",{sample_expression:'<span class="trip-math">y=mx+b</span>'}),sel:e,delayBeforeExit:600}:{position:"e",content:this.s("graphing-tours-label-sliders-blank-expression"),sel:".dcg-action-newmath"}}})});
define('tours/scatter_plot',['require','pjs','jquery','./base_tour','predicates/common','graphing-calc/models/table'],function(require){"use strict";var t=require("pjs"),y=require("jquery"),e=require("./base_tour"),w=require("predicates/common"),m=require("graphing-calc/models/table");return t(e,function(t,e){t.shouldPopup=function(){return!!this.getMatchingExpSelector(w.TABLE)},t.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var t=this.getMatchingExpId(w.HAS_DATA_COLUMN),e=this.getSelectorById(t),s=this.getModelById(t);if(!e){var o=y(".dcg-action-newtable:visible");return 0===o.length?{position:"e",content:"<b>"+this.s("graphing-tours-label-tables-start")+"</b><br>"+this.s("graphing-tours-label-new-item"),sel:y(".dcg-add-expression-btn")}:{position:"e",content:this.s("graphing-tours-label-tables-select-table"),sel:o,delayBeforeExit:300}}for(var i,n,r,l=s,c=m.getSelectedCell(l),g=l.columnModels[0].cells.length,a=0,h=0;h<g&&h<3;h++){var p=e.find(".dcg-row:nth-of-type("+(h+2)+") .dcg-cell:nth-of-type(1)"),d=e.find(".dcg-row:nth-of-type("+(h+2)+") .dcg-cell:nth-of-type(2)");p.is(":not(.dcg-empty, .dcg-error)")&&d.is(":not(.dcg-empty, .dcg-error)")&&a++}if(3===a){var b=l.columnModels[1].points&&l.columnModels[1].lines,f=0<y(".dcg-table-column-menu").length;return b&&!f?{final:!0,position:"e",endingMsg:this.s("graphing-tours-label-tables-whiz"),sel:e}:b?{position:"e",content:this.s("graphing-tours-label-tables-close-options"),sel:e}:f?{content:this.s("graphing-tours-label-tables-dots"),position:"e",sel:".dcg-toggle-switch:eq(1)"}:{content:["<b>"+this.s("graphing-tours-label-tables-last-trick")+"</b><br>",this.s("graphing-tours-label-tables-open-options")].join(""),position:"e",sel:e.find(".dcg-row:nth-of-type(1) .dcg-cell:nth-of-type(2) .dcg-circular-icon")}}for(i=0;i<g;i++)for(n=0;n<2;n++)if((r=e.find(".dcg-row:nth-of-type("+(i+2)+") .dcg-cell:nth-of-type("+(n+1)+")")).is(".dcg-error"))return{position:"e",content:this.s("graphing-tours-label-tables-valid-number"),sel:r};if(!c)return{position:"e",content:this.s("graphing-tours-label-tables-back"),sel:e.find(".dcg-row:nth-of-type("+i+") .dcg-cell:nth-of-type(2)")};if(2===g&&1===a&&c&&1===c.row)return{position:"e",content:this.s("graphing-tours-label-tables-next-row"),sel:e.find(".dcg-row:nth-of-type("+(c.row+1)+") .dcg-cell:nth-of-type(2)")};if(3===g&&2===a&&c&&3!==c.row)return{position:"e",content:"<b>"+this.s("graphing-tours-label-awesome")+"</b><br>"+this.s("graphing-tours-label-tables-enter"),sel:e.find(".dcg-row:nth-of-type("+(c.row+1)+") .dcg-cell:nth-of-type(2)")};for(i=0;i<g;i++)for(n=0;n<2;n++)if((r=e.find(".dcg-row:nth-of-type("+(i+2)+") .dcg-cell:nth-of-type("+(n+1)+")")).is(".dcg-empty")){var u=this.s("graphing-tours-label-tables-fill-row");return 2===i&&1===n&&(u=this.s("graphing-tours-label-tables-fill-another")),0===i&&1===n&&(u="<b>"+this.s("graphing-tours-label-tables-fill-cell")+"</b><br>"+this.s("graphing-tours-label-tables-type-number")),{position:"e",content:u,sel:e.find(".dcg-row:nth-of-type("+(i+2)+") .dcg-cell:nth-of-type(2)")}}}})});
define('tours/function_table',['require','pjs','./base_tour','jquery','predicates/common','graphing-calc/models/table'],function(require){"use strict";var e=require("pjs"),t=require("./base_tour"),d=require("jquery"),p=require("predicates/common"),h=require("graphing-calc/models/table");return e(t,function(e,t){e.shouldPopup=function(){return!!this.getMatchingExpSelector(p.TABLE)},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var e=this.getMatchingExpId(p.HAS_FUNCTION_COLUMN),t=this.getSelectorById(e),s=this.getModelById(e),n=this.getMatchingExpSelector(p.FOCUSED_OR_EMPTY_EXP),i=this.getMatchingExpSelector([p.COMPLEX_EXP,p.TABLEABLE_EXP]);if(t){var o=s,a="POINTS"===o.columnModels[1].columnMode,l=0<d(".dcg-table-column-menu").length,r=3<o.columnModels.length&&!1===o.columnModels[2].discrete,c=h.getSelectedCell(o);return r?{final:!0,position:"e",endingMsg:this.s("graphing-tours-label-advanced-tables-wizard"),sel:t}:c&&0===c.row&&2===c.column?{position:"e",content:this.s("graphing-tours-label-advanced-tables-type-function",{sample_expression:'<span class="trip-math">cos\\left(x\\right)</span>'}),sel:t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(3)")}:!c||0===c.row&&2===c.column?a&&!c?{position:"e",content:this.s("graphing-tours-label-advanced-tables-continue"),sel:t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(2)")}:l?{content:this.s("graphing-tours-label-advanced-tables-dots"),position:"e",sel:".dcg-table-points"}:{content:this.s("graphing-tours-label-advanced-tables-options"),position:"e",sel:t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(2) .dcg-circular-icon")}:{position:"e",content:this.s("graphing-tours-label-advanced-tables-new-column"),sel:t.find("tr:nth-of-type(1) .dcg-cell:nth-of-type(3)")}}return i?this.editListMode()?{position:"e",content:this.s("graphing-tours-label-advanced-tables-create"),sel:".dcg-action-createtable",delayBeforeExit:400}:{position:"s",content:"<b>"+this.s("graphing-tours-label-advanced-tables-convert")+"</b><br>"+this.s("graphing-tours-label-advanced-tables-edit-list"),sel:".dcg-action-toggle-edit"}:n?{position:"e",content:["<b>"+this.s("graphing-tours-label-advanced-tables-graph")+"</b><br>",this.s("graphing-tours-label-advanced-tables-type-function",{sample_expression:'<span class="trip-math">y=sin\\left(x\\right)</span>'})].join(""),sel:n}:{position:"e",content:this.s("graphing-tours-label-advanced-tables-start"),sel:".dcg-new-math-div"}}})});
define('tours/restrictions',['require','pjs','./base_tour','predicates/common'],function(require){"use strict";var s=require("pjs"),t=require("./base_tour"),a=require("predicates/common");return s(t,function(s){s.shouldPopup=function(){return!!this.getMatchingExpSelector(a.RESTRICTED)},s.restrictedLineTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();var s=this.getMatchingExpSelector(a.RESTRICTED_LINE),t=this.getMatchingExpSelector(a.EXP_NOT_RESTRICTED_LINE);if(s)return t?(this.phaseOn++,this.update()):{position:"e",content:"<b>"+this.s("graphing-tours-label-brilliant")+"</b><br>"+this.s("graphing-tours-label-restrictions-new-expression"),sel:".dcg-new-math-div"};var e=this.getMatchingExpId(a.FOCUSED_OR_EMPTY_EXP),i=this.getSelectorById(e),r=this.getModelById(e);if(i){var n=this.expMatches(r,a.NONCONSTANT_LINE);return this.expMatches(r,a.HAS_ERROR)?{doNotUpdate:!0}:n?{position:"e",content:["<b>"+this.s("graphing-tours-label-awesome")+"</b><br>",this.s("graphing-tours-label-restrictions-domain",{sample_expression:'<span class="trip-math">\\left\\{x<0\\right\\}</span>'}),"<br><i>"+this.s("graphing-tours-label-restrictions-abc",{buttons:"{ }"})+"</i>"].join(""),sel:i}:{position:"e",content:["<b>"+this.s("graphing-tours-label-restrictions-start")+"</b><br>",this.s("graphing-tours-label-restrictions-straight-line",{sample_expression:'<span class="trip-math">y=2x</span>'})].join(""),sel:i}}return{position:"e",content:this.s("graphing-tours-label-restrictions-blank-expression"),sel:".dcg-new-math-div"}},s.restrictedParabolaTour=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.getMatchingExpSelector([a.RESTRICTED,a.PARABOLA]))return{final:!0,position:"e",endingMsg:this.s("graphing-tours-label-restrictions-star"),sel:".dcg-exppanel-container"};var s=this.getMatchingExpId([a.EXP_NOT_RESTRICTED_LINE,a.FOCUSED_EXP]),t=this.getSelectorById(s),e=this.getModelById(s);if(t){var i=this.expMatches(e,[a.PARABOLA,a.HAS_DEPENDENT_Y]),r=this.expMatches(e,a.SHIFTED_PARABOLA),n=this.expMatches(e,a.PARABOLA);return this.expMatches(e,a.HAS_ERROR)?{doNotUpdate:!0}:n?i?r?{position:"e",content:["<b>"+this.s("graphing-tours-label-nice")+"</b><br>"+this.s("graphing-tours-label-restrictions-range",{sample_expression:'<span class="trip-math">\\left\\{y<4\\right\\}</span>'})].join(""),sel:t}:{position:"e",content:["<b>"+this.s("graphing-tours-label-restrictions-move-parabola")+"</b><br>",this.s("graphing-tours-label-restrictions-change-equation",{sample_expression:'<span class="trip-math">y=x^2-2</span>'})].join(""),sel:t}:{position:"e",content:["<b>"+this.s("graphing-tours-label-restrictions-dont-forget")+"</b><br>",this.s("graphing-tours-label-restrictions-type-all",{sample_expression:'<span class="trip-math">y=x^2</span>'})].join(""),sel:t}:{position:"e",content:[this.s("graphing-tours-label-restrictions-graph-parabola",{sample_expression:'<span class="trip-math">y=x^2</span>'})+"<br><i>"+this.s("graphing-tours-label-restrictions-typing-hint",{suggestion1:"y=x^2",suggestion2:'<span class="trip-math">a^2</span>'})+"</i>"].join(""),sel:t}}return{position:"e",content:this.s("graphing-tours-label-restrictions-blank-expression"),sel:".dcg-new-math-div"}},s.phaseOn=0,s.phases=[s.restrictedLineTour,s.restrictedParabolaTour],s.update=function(){return this.phases[this.phaseOn].call(this)}})});

define('loadcss!regression-tour', function(){});
define('tours/regressions',['require','pjs','jquery','./base_tour','loadcss!regression-tour','browser','predicates/common'],function(require){"use strict";var t=require("pjs"),u=require("jquery"),s=require("./base_tour");require("loadcss!regression-tour");var b=require("browser"),v=require("predicates/common");return t(s,function(t,s){t.shouldPopup=function(){return!!this.getMatchingExpSelector(v.TABLE)},t.hasCreatedLinearRegression=!1,t.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var t=this.getMatchingExpId(v.REGRESSION)||this.getMatchingExpId(v.EXP),s=this.getSelectorById(t),e=this.getModelById(t),i=this.getMatchingExpId(v.HAS_DATA_COLUMN),r=this.getSelectorById(i),n=this.getModelById(i);if(!r||!n.columnModels[1]){var a=u(".dcg-action-newtable:visible"),o=!b.IS_IPAD&&!b.IS_MOBILE;return 0===a.length&&o?{position:"e",content:'<div class="trip-title">'+this.s("graphing-tours-label-regressions-data")+"</div>"+this.s("graphing-tours-label-regressions-docs",{sample_data_link:'<a class="trip-link" target="_blank" href="https://docs.google.com/spreadsheets/d/1h4kYwWka_1PvI5G-hPYz_QBe1FrYLo9Gb1XvxJz-QYE/edit#gid=0">'+this.s("graphing-tours-label-regressions-sample-data")+"</a>"})+' <div class="trip-hint"><br>'+this.s("graphing-tours-label-regressions-own-data",{plus_icon:'<i class="dcg-icon-plus"></i>'})+"</div>",sel:s||u(".dcg-exppanel")}:0===a.length?{position:"e",content:'<div class="trip-title">'+this.s("graphing-tours-label-regressions-data-2")+"</div>"+this.s("graphing-tours-label-new-item"),sel:u(".dcg-add-expression-btn"),delayBeforeExit:150}:{position:"e",content:this.s("graphing-tours-label-regressions-new-table"),sel:a,delayBeforeExit:250}}if(r.find(".dcg-row .dcg-cell:nth-of-type(2):not(.dcg-table-header):not(.dcg-empty)").length<5)return{position:"e",content:'<div class="trip-title">'+this.s("graphing-tours-label-regressions-fill-sample-data")+"</div><table class='dcg-regression-tour-table'><tr><td><span class='trip-math'>x_1</span></td><td><span class='trip-math'>y_1</span></td></tr><tr><td>1</td><td>0.8</td></tr><tr><td>2</td><td>2.7</td></tr><tr><td>3</td><td>3.9</td></tr><tr><td>4</td><td>4.6</td></tr><tr><td>5</td><td>5</td></tr></table>",sel:r.find(".dcg-row:nth-of-type(2) .dcg-cell:nth-of-type(2)")};if("expression"!==(this.getMatchingExpModel(v.REGRESSION)||this.getMatchingExpModel(v.FOCUSED_EXP)||this.controller.getItemModelByIndex(0)).type){var l=u(".dcg-action-newexpression:visible");return 0===l.length?{position:"e",content:'<div class="trip-title">'+this.s("graphing-tours-label-awesome")+"</div>"+this.s("graphing-tours-label-new-item"),sel:u(".dcg-add-expression-btn"),delayBeforeExit:150}:{position:"e",content:this.s("graphing-tours-label-regressions-expression-option"),sel:l,delayBeforeExit:150}}var d=e.formula,g=d?d.regression:void 0,p=g?g.statistics:void 0,h=g?g.parameters:void 0;if(p&&p.r&&(this.hasCreatedLinearRegression=!0),!this.hasCreatedLinearRegression)return{position:"e",content:this.s("graphing-tours-label-regressions-equation",{equation:"<span class='trip-math'>y_1\\sim mx_1+b</span>"})+"<div class='trip-hint'>"+this.s("graphing-tours-label-regressions-hint-1",{y_1:"<span class='trip-math'>y_1</span>",y1:"<span class='trip-math'>y1</span>"})+"</div><div class='trip-hint'>"+this.s("graphing-tours-label-regressions-hint-2",{twiddle:"<span class='trip-math'>~</span>"})+"</div>",sel:s,delayBeforeExit:150};var c=u(".dcg-residual-suggestion.dcg-visible");return c.length?{position:"e",content:"<div class='trip-title'>"+this.s("graphing-tours-label-regressions-check-model")+"</div>"+this.s("graphing-tours-label-regressions-residuals"),sel:c,delayBeforeExit:250}:p&&(.99<=p.Rsquared||.99<=p.r||h&&h.a&&h.k&&h.h)?{final:!0,position:"e",endingMsg:"<div class='trip-title'>"+this.s("graphing-tours-label-regressions-keep-exploring")+"</div>",sel:u(".dcg-exppanel")}:{position:"e",content:"<div class='trip-title'>"+this.s("graphing-tours-label-regressions-new-model")+"</div>"+this.s("graphing-tours-label-regressions-better-fit",{equation:"<span class='trip-math'>y_1~a(x_1-h)^2+b</span>"}),sel:s,delayBeforeExit:300}}})});
define('tours/list_predicates',['require','predicates/common','parser','graphing-calc/models/expression'],function(require){"use strict";function e(i){return function(e,n){if(!e.latex)return!1;var t=s.parse(e.latex);if(!t._expression)return!1;if("List"!==t._expression.type&&"Range"!==t._expression.type)return!1;if(i.dependent&&i.dependent!==u.getAssignment(e))return!1;var r=t.getConcreteTree();return!(i.minLength&&r.args.length<i.minLength)}}var t=require("predicates/common"),s=require("parser"),u=require("graphing-calc/models/expression");return{ANY_LIST:e({}),A_LIST:e({dependent:"a",minLength:3}),B_LIST:e({dependent:"b",minLength:5}),C_LIST:e({dependent:"c",minLength:10}),A_DEP:function(e,n){return t.GRAPHABLE_EXP(e,n)&&t.DEPENDS_ON("a")(e,n)},B_DEP:function(e,n){return t.GRAPHABLE_EXP(e,n)&&t.DEPENDS_ON("b")(e,n)},C_DEP:function(e,n){return t.DEPENDS_ON("c")(e,n)&&t.EVALUATION(e,n)}}});
define('tours/lists',['require','pjs','./base_tour','./list_predicates'],function(require){"use strict";var t=require("pjs"),i=require("./base_tour"),l=require("./list_predicates");return t(i,function(t,i){t.shouldPopup=function(){return!!this.getMatchingExpSelector(l.ANY_LIST)},t.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var t=this.getMatchingExpId(l.A_LIST),i=this.getMatchingExpId(l.B_LIST),s=this.getMatchingExpId(l.C_LIST),e=this.getMatchingExpId(l.A_DEP),a=this.getMatchingExpId(l.B_DEP),n=this.getMatchingExpSelector(l.C_DEP);return t?e?i?s?a?n?{final:!0,position:"e",endingMsg:this.s("graphing-tours-label-great-job"),sel:n.find(".dcg-evaluation"),scrollContainer:this.expList()}:{position:"e",content:"<b>"+this.s("graphing-tours-label-last-thing")+"</b> "+this.s("graphing-tours-label-list-computation",{equation:"<span class='trip-math'>total\\left(c\\right)</span>"})+"<div class='trip-hint'>",sel:this.getAvailableExp([t,i,e,s,a]),scrollContainer:this.expList(),delayBeforeExit:600}:{position:"e",content:"<b>"+this.s("graphing-tours-label-lists-graph-points")+"</b> "+this.s("graphing-tours-label-lists-point-equation",{equation:"<span class='trip-math'>\\left(b, sin\\left(b\\right)\\right)</span>"})+"<div class='trip-hint'>"+this.s("graphing-tours-label-lists-hint-plot-points")+"</div>",sel:this.getAvailableExp([t,i,e,s]),scrollContainer:this.expList()}:{position:"e",content:this.s("graphing-tours-label-lists-count-by",{equation:"<span class='trip-math'>c=\\left[10, 15, ..., 95\\right]</span>"}),sel:this.getAvailableExp([t,i,e]),scrollContainer:this.expList(),delayBeforeExit:600}:{position:"e",content:"<b>"+this.s("graphing-tours-label-awesome")+"</b> "+this.s("graphing-tours-label-lists-create-range",{equation:"<span class='trip-math'>b=\\left[0...8\\right]</span>"}),sel:this.getAvailableExp([t,e]),scrollContainer:this.expList(),delayBeforeExit:600}:{position:"e",content:"<b>"+this.s("graphing-tours-label-lists-put-to-work")+"</b> "+this.s("graphing-tours-label-lists-graph-equation",{equation:"<span class='trip-math'>y=x^2+a</span>"})+"<div class='trip-hint'>"+this.s("graphing-tours-label-lists-hint-superscript",{suggestion1:"y=x^2+a",suggestion2:"a<sup>2</sup>"})+"</div>",sel:this.getAvailableExp([t]),scrollContainer:this.expList()}:{position:"e",content:"<b>"+this.s("graphing-tours-label-lists-are-powerful")+"</b><br>"+this.s("graphing-tours-label-lists-begin-equation",{equation:"<span class='trip-math'>a=\\left[1,2,3\\right]</span>"})+"<div class='trip-hint'>"+this.s("graphing-tours-label-lists-hint-abc"),sel:this.getAvailableExp(),scrollContainer:this.expList(),delayBeforeExit:600}}})});
define('tours/folders',['require','pjs','./base_tour','jquery','graphing-calc/models/expression'],function(require){"use strict";function r(e,t){return"folder"==e.type}function o(e,t){return i.isGraphable(e)&&!e.folderId}var e=require("pjs"),t=require("./base_tour"),l=require("jquery"),i=require("graphing-calc/models/expression");return e(t,function(e,t){e.shouldPopup=function(){return!!this.getMatchingExpSelector(r)},e.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var e=this.getMatchingExpId(r),t=this.getSelectorById(e),i=this.getModelById(e),s=this.getMatchingExpSelector(o);if(i)return this.cachedTitle!=i.title&&(this.cachedTitle=i.title,this.lastChange=new Date),!this.cachedTitle||new Date-this.lastChange<1e3?{position:"e",content:this.s("graphing-tours-label-folders-name"),sel:t}:0===i.controller.getNumberOfItemsInFolder(i.id)?s?{position:"e",content:this.s("graphing-tours-label-folders-grab")+"<div class='trip-hint'>"+this.s("graphing-tours-label-folders-indicator")+"</div>",scrollContainer:this.expList(),sel:s}:{position:"e",content:"<b>"+this.s("graphing-tours-label-awesome")+"</b> "+this.s("graphing-tours-label-folders-new-equation",{equation:"<span class='trip-math'>x+y=3</span>"}),scrollContainer:this.expList(),sel:this.getAvailableExp(),delayBeforeExit:500}:i.collapsed?i.hidden?{final:!0,position:"e",endingMsg:this.s("graphing-tours-label-great-job"),sel:".dcg-exppanel-container",scrollContainer:this.expList()}:{position:"s",content:"<b>"+this.s("graphing-tours-label-folders-did-you-know")+"</b>"+this.s("graphing-tours-label-folders-hide"),scrollContainer:this.expList(),sel:t.find(".dcg-circular-icon")}:{position:"e",content:"<b>"+this.s("graphing-tours-label-folders-great-start")+"</b> "+this.s("graphing-tours-label-folders-collapse"),scrollContainer:this.expList(),sel:t.find(".dcg-caret-container")};var n=l(".dcg-action-newfolder:visible");return 0===n.length?{position:"e",content:"<b>"+this.s("graphing-tours-label-folders-start")+"</b><br>"+this.s("graphing-tours-label-new-item"),sel:l(".dcg-add-expression-btn")}:{position:"e",content:this.s("graphing-tours-label-folders-option"),sel:n}}})});
define('tours/derivatives_predicates',['require','predicates/common'],function(require){"use strict";function r(E,n){return 0<=E.latex.indexOf("\\frac{d}{dx}")}var t=require("predicates/common");return{DEFINE_F:function(E,n){return!!t.DEFINES("f")(E,n)&&!!t.COMPLEX_EXP(E,n)},DEFINE_G:function(E,n){return!!t.DEFINES("g")(E,n)&&(!!t.DEPENDS_ON("f")(E,n)&&(!!t.GRAPHABLE_EXP(E,n)&&r(E)))},INLINE_DERIVATIVE:function(E,n){return!!t.COMPLEX_EXP(E,n)&&(!t.DEPENDS_ON("f")(E,n)&&r(E))}}});
define('tours/derivatives',['require','pjs','./base_tour','./derivatives_predicates'],function(require){"use strict";var t=require("pjs"),i=require("./base_tour"),s=require("./derivatives_predicates");return t(i,function(t,i){t.shouldPopup=function(){return!1},t.update=function(){if(this.resourcesOpen())return this.requireResourcesNotOpen();if(!this.expressionsVisible())return this.requireExpressionsVisible();if(this.editListMode())return this.requireNotEditListMode();var t=this.getMatchingExpId(s.DEFINE_F),i=this.getMatchingExpId(s.DEFINE_G),e=this.getMatchingExpSelector(s.INLINE_DERIVATIVE);return t?i?e?{final:!0,position:"e",endingMsg:this.s("graphing-tours-label-great-job"),sel:e,scrollContainer:this.expList()}:{position:"e",content:this.s("graphing-tours-label-derivative-one-more",{equation:"<span class='trip-math'>\\frac{d}{dx}\\ln \\left(x\\right)</span>"}),sel:this.getAvailableExp([t,i]),scrollContainer:this.expList()}:{position:"e",content:this.s("graphing-tours-label-derivative-graph-derivative",{equation:"<span class='trip-math'>g\\left(x\\right)=\\frac{d}{dx}f\\left(x\\right)</span>"})+"<div class='trip-hint'>"+this.s("graphing-tours-label-derivative-hint-type-derivative")+"</div>",sel:this.getAvailableExp([t]),scrollContainer:this.expList()}:{position:"e",content:"<b>"+this.s("graphing-tours-label-derivative-start-graph")+"</b><br>"+this.s("graphing-tours-label-derivative-start-function",{equation:"<span class='trip-math'>f\\left(x\\right)=x\\sin \\left(x\\right)</span>"}),sel:this.getAvailableExp(),scrollContainer:this.expList()}}})});
define('tours/all_tours',['require','tours/sliders','tours/scatter_plot','tours/function_table','tours/restrictions','tours/regressions','tours/lists','tours/folders','tours/derivatives','underscore'],function(require){"use strict";var e=require("tours/sliders"),t=require("tours/scatter_plot"),r=require("tours/function_table"),s={sliders:{tour:e,titleKey:"graphing-tours-heading-sliders"},tables:{tour:t,titleKey:"graphing-tours-heading-tables"},restrictions:{tour:require("tours/restrictions"),titleKey:"graphing-tours-heading-restrictions"},functiontable:{tour:r,hideInHelp:!0,titleKey:"graphing-tours-heading-advanced-tables"},regressions:{tour:require("tours/regressions"),titleKey:"graphing-tours-heading-regressions"},lists:{tour:require("tours/lists"),titleKey:"graphing-tours-heading-lists",hideInHelp:!0},folders:{tour:require("tours/folders"),titleKey:"graphing-tours-heading-folders",hideInHelp:!0},derivatives:{tour:require("tours/derivatives"),titleKey:"graphing-tours-heading-derivatives",hideInHelp:!0}};return require("underscore").each(s,function(e,t){e.name=t}),s});
define('calculator-shell/tour-links',["require","exports","tours/all_tours","tslib","dcgview","underscore"],function(require,t,r,e,n,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TourLinks=void 0;var l,u=n.Components,c=u.For,s=u.If,i=(l=n.Class,e.__extends(a,l),a.prototype.init=function(){this.controller=this.props.controller(),this.tourController=this.controller.tourController},a.prototype.template=function(){var e=this;return n.createElement("a",{class:n.const("dcg-feature"),href:function(){return"/calculator?tour="+e.props.name()},target:n.const("_blank"),ignoreRealClick:function(){return!e.tourController.shouldPopupTour(e.props.name())},onTap:function(t){if(!e.tourController.shouldPopupTour(e.props.name()))return t.originalEvent.preventDefault(),e.controller.dispatch({type:"toggle-menu",payload:"none"}),e.controller.tourController.startTour(e.props.name(),"help")}},n.createElement("span",{class:function(){return"dcg-thumb dcg-"+e.props.name()}}),function(){return e.controller.s(e.props.titleKey())})},a);function a(){return null!==l&&l.apply(this,arguments)||this}var p,f=(p=n.Class,e.__extends(d,p),d.prototype.template=function(){var e=this;return n.createElement(c,{each:function(){return o.keys(r)}},n.createElement("div",{class:n.const("dcg-popover-content dcg-tours-content"),role:n.const("group"),"aria-label":n.const("Tours")},function(t){return n.createElement(s,{predicate:function(){return!r[t].hideInHelp}},function(){return n.createElement(i,{name:function(){return null!=r[t]?r[t].name:void 0},titleKey:function(){return null!=r[t]?r[t].titleKey:void 0},controller:e.props.controller})})}))},d);function d(){return null!==p&&p.apply(this,arguments)||this}t.TourLinks=f});
define('calculator-shell/resource-links',["require","exports","tslib","dcgview","../lib/enabled-languages"],function(require,e,t,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ResourceLinks=void 0;var c,r=(c=n.Class,t.__extends(s,c),s.prototype.template=function(){var e=this;return n.createElement("a",{href:function(){return e.props.href()},target:n.const("_blank"),class:n.const("dcg-resource-link")},n.createElement("i",{class:function(){return e.props.icon()},"aria-hidden":n.const("true")}),n.createElement("span",null,function(){return e.props.title()},n.const(" ")))},s);function s(){return null!==c&&c.apply(this,arguments)||this}var l,i=(l=n.Class,t.__extends(u,l),u.prototype.init=function(){this.controller=this.props.controller()},u.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-popover-content dcg-resources-content"),role:n.const("group"),"aria-label":n.const("Resources")},n.createElement(r,{href:n.const("https://learn.desmos.com"),icon:n.const("dcg-icon-rocket"),title:function(){return t.controller.s("account-shell-link-getting-started")}}),n.createElement(r,{href:n.const("https://www.youtube.com/playlist?list=PLfM6zMGnbgOGLZc-_Yj3QVK3Vz_L4Cw59"),icon:n.const("dcg-icon-film"),title:function(){return t.controller.s("account-shell-link-video-tutorials")}}),n.createElement(r,{href:function(){var e=t.controller.languageController.getLanguage();return o.ENABLED_LANGUAGES[e]?o.ENABLED_LANGUAGES[e].userGuideURL:o.ENABLED_LANGUAGES.en.userGuideURL},icon:n.const("dcg-icon-book"),title:function(){return t.controller.s("account-shell-link-user-guide")}}),n.createElement(r,{href:n.const("http://support.desmos.com/hc/en-us"),icon:n.const("dcg-icon-comments"),title:function(){return t.controller.s("account-shell-link-help-center")}}),n.createElement("div",{class:n.const("dcg-resource-link dcg-action-show-hotkeys"),role:n.const("link"),tabindex:n.const(0),onTap:function(e){return t.controller.dispatch({type:"show-modal",modal:"hotkeys",device:e.device})}},n.createElement("i",{class:n.const("dcg-icon-keyboard")}),n.createElement("span",null,function(){return t.controller.s("account-shell-link-keyboard-shortcuts")})))},u);function u(){return null!==l&&l.apply(this,arguments)||this}e.ResourceLinks=i});
define('main/calculator_backend',["require","exports","main/graph","./backend"],function(require,r,t,o){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.clearRecoveryGraphsForTests=r.removeGraph=r.getRecoveryGraphs=r.getGraphs=r.emailFeedback=r.saveGraph=void 0,r.saveGraph=function(e,r){if(!r.hasOwnProperty("myGraphs"))throw new Error("Argument Error: saveGraph options must specify myGraphs");if(!r.hasOwnProperty("isUpdate"))throw new Error("Argument Error: saveGraph options must specify isUpdate");var a={parent_hash:e.parentHash,recovery_parent_hash:e.recoveryParentHash,thumb_data:e.thumbURL,graph_hash:e.hash,my_graphs:r.myGraphs,is_update:r.isUpdate,recovery:r.recovery,title:e.title||void 0,calc_state:e.graphData,lang:r.lang};return o.post("/api/v1/calculator/save",a).then(function(r){return t.updateFromSync(e,r),e})},r.emailFeedback=function(r){return o.post("/api/v1/calculator/email_feedback",r)},r.getGraphs=function(r){return o.getJSON("/api/v1/calculator/my_graphs",r)},r.getRecoveryGraphs=function(r){return o.getJSON("/api/v1/calculator/recovery_graphs",r)},r.removeGraph=function(r){return o.post("/api/v1/calculator/my_graphs/remove",r)},r.clearRecoveryGraphsForTests=function(){return o.post("/api/v1/calculator/recovery_graphs/clear")}});
define('lib/parse-json-errors',["require","exports"],function(require,r){"use strict";function e(r){if(0===r.status)return[{message:"Connection failed. Check your internet connection?"}];try{return JSON.parse(r.responseText).errors}catch(r){return[{message:"Unexpected server error. Try again, or e-mail calculator@desmos.com."}]}}Object.defineProperty(r,"__esModule",{value:!0}),r.parseJSONErrors=r.rawParseJSONErrors=void 0,r.rawParseJSONErrors=e,r.parseJSONErrors=function(r){return e(r).map(function(r){return r.message})}});
define('calculator-shell/suggestion-form',["require","exports","main/calculator_backend","tslib","dcgview","jquery","lib/parse-json-errors"],function(require,e,r,t,n,o,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SuggestionForm=void 0;var s,a=n.Components,u=a.If,l=a.For,i=a.Input,d=a.Textarea,m=(s=n.Class,t.__extends(f,s),f.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController,this.formErrors=[],this.feedbackInProgress=!1,this.feedbackFocused=!1,this.feedbackFromName="",this.feedbackMessage="",this.didSendFeedbackEmail=!1},f.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-suggestions")},n.createElement("div",{class:n.const("template-errors")},n.createElement(u,{predicate:function(){return!!t.formErrors.length}},function(){return n.createElement(l,{each:function(){return t.formErrors}},n.createElement("span",null,function(e){return n.createElement("div",{class:n.const("errors")},n.createElement("span",null,function(){return e}))}))})),n.createElement(u,{predicate:function(){return t.didSendFeedbackEmail}},function(){return n.createElement("div",{class:n.const("dcg-feedback-email-sent")},function(){return t.controller.s("account-shell-text-feedback-sent")})}),n.createElement("form",{didMount:this.didMountSuggestionForm.bind(this),class:n.const("dcg-action-submit")},n.createElement(d,{placeholder:function(){return t.controller.s("account-shell-label-feedback-placeholder")},name:n.const("message"),onFocus:function(){return t.onFocusFeedback()},style:function(){return{height:t.feedbackFocused?"80px":"33px"}},value:function(){return t.feedbackMessage},onInput:function(e){if(t.feedbackMessage=e,!t.unmounted)return t.update()}}),n.createElement(u,{predicate:function(){return t.feedbackFocused}},function(){return n.createElement("div",{class:n.const("dcg-suggestions-expansion")},n.createElement(u,{predicate:function(){return!t.userController.isLoggedIn()}},function(){return n.createElement("div",{class:n.const("template-unlessuser")},n.createElement("div",{class:n.const("dcg-feedback-email-label")},function(){return t.controller.s("account-shell-label-feedback-email")},n.const(" "),n.createElement("i",null,n.const("("),function(){return t.controller.s("account-shell-label-optional")},n.const(")"))),n.createElement(i,{name:n.const("anonymous-email"),class:n.const("dcg-anonymous-email"),placeholder:function(){return t.controller.s("account-shell-label-email-address")},type:n.const("email"),value:function(){return t.feedbackFromName},onInput:function(e){if(t.feedbackFromName=e,!t.unmounted)return t.update()}}))}),n.createElement("span",{class:n.const("dcg-feedback-btns")},n.createElement("a",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-btn-light-gray dcg-action-closesuggestion"),onTap:function(){return t.controller.dispatch({type:"toggle-menu",payload:"none"})}},function(){return t.controller.s("account-shell-button-cancel")}),n.createElement("button",{class:n.const("dcg-btn-green"),name:n.const("submit"),type:n.const("submit")},function(){return t.controller.s("account-shell-button-send-feedback")})),n.createElement(u,{predicate:function(){return t.feedbackInProgress}},function(){return n.createElement("div",{class:n.const("template-processing")},n.createElement("span",{class:n.const("dcg-spinner")}),function(){return t.controller.s("account-shell-label-feedback-sending")})}))})))},f.prototype.didMountSuggestionForm=function(e){var t=this;return o(e).on("submit",function(e){return e.preventDefault(),t.submitForm()})},f.prototype.onFocusFeedback=function(){this.feedbackFocused=!0,this.unmounted||this.update()},f.prototype.didUnmount=function(){this.unmounted=!0},f.prototype.submitForm=function(){var t=this;this.didSendFeedbackEmail=!1,this.feedbackInProgress=!0,this.formErrors=[];var e=o.trim(o('textarea[name="message"]').val());if(e.length||(this.formErrors=[this.controller.s("account-shell-error-feedback-empty")]),this.formErrors.length)return this.feedbackInProgress=!1,void(this.unmounted||this.update());var n={message:e,state:JSON.stringify(this.controller.api.getState()),userAgent:navigator.userAgent,"anonymous-email":o('input[name="anonymous-email"]').val()};r.emailFeedback(n).done(function(){t.didSendFeedbackEmail=!0,t.feedbackMessage="",t.feedbackFromName="",t.feedbackFocused=!1,setTimeout(function(){t.didSendFeedbackEmail=!1,t.unmounted||t.update()},2e3)}).fail(function(e){t.formErrors=c.parseJSONErrors(e).map(function(e){return t.controller.raw(e)})}).always(function(){t.feedbackInProgress=!1,t.unmounted||t.update()}),this.unmounted||this.update()},f);function f(){return null!==s&&s.apply(this,arguments)||this}e.SuggestionForm=m});
define('calculator-shell/feedback-links',["require","exports","tslib","dcgview","./suggestion-form"],function(require,e,t,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FeedbackLinks=void 0;var c,r=(c=n.Class,t.__extends(s,c),s.prototype.template=function(){return n.createElement("div",{class:n.const("dcg-popover-content dcg-hide-on-mobile"),role:n.const("group"),"aria-label":n.const("Feedback")},n.createElement("div",{class:n.const("dcg-resources-content dcg-feedback-content")},n.createElement(o.SuggestionForm,{controller:this.props.controller})))},s);function s(){return null!==c&&c.apply(this,arguments)||this}e.FeedbackLinks=r});

define('loadcss!calculator-shell/help', function(){});
define('calculator-shell/help-menu',["require","exports","tslib","dcgview","./menu","./tour-links","./resource-links","./feedback-links","loadcss!./help"],function(require,e,t,r,n,o,l,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HelpMenu=void 0;var s,i=(s=r.Class,t.__extends(u,s),u.prototype.init=function(){this.controller=this.props.controller()},u.prototype.template=function(){var e=this;return r.createElement(n.Menu,{title:function(){return e.controller.s("account-shell-heading-tours")},type:function(){return"help"},label:function(){return e.controller.s("account-shell-label-help-menu")},controller:this.props.controller},r.createElement(o.TourLinks,{controller:this.props.controller}),r.createElement("div",{class:r.const("dcg-popover-title"),"aria-hidden":r.const("true")},function(){return e.controller.s("account-shell-heading-resources")}),r.createElement(l.ResourceLinks,{controller:this.props.controller}),r.createElement("div",{class:r.const("dcg-popover-title dcg-interior-title dcg-hide-on-mobile"),"aria-hidden":r.const("true")},function(){return e.controller.s("account-shell-heading-feedback")}),r.createElement(c.FeedbackLinks,{controller:this.props.controller}))},u);function u(){return null!==s&&s.apply(this,arguments)||this}e.HelpMenu=i});

define('loadcss!lib/selectable-input', function(){});
define('lib/selectable-input',["require","exports","tslib","dcgview","browser","jquery","loadcss!./selectable-input"],function(require,t,e,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SelectableInput=void 0;var c,a=n.Components,s=a.Input,i=a.Switch,l=(c=n.Class,e.__extends(u,c),u.prototype.didUnmount=function(){this.unmounted=!0},u.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-selectable-input-container")},n.createElement(s,{class:this.const("dcg-permalink select-all dcg-variable-permalink"),"aria-label":function(){return e.props.controller().s("graphing-calculator-narration-share-graph-link")},name:function(){return e.props.controller().s("graphing-calculator-text-share-graph-link")},value:this.props.link,didMount:function(t){e.inputEl=t,r.IS_MOBILE||e.inputEl.focus()},onTap:function(){return e.inputEl.select()},onInput:function(){}}),n.createElement("div",{role:n.const("button"),tabindex:n.const(0),class:n.const("dcg-copy-button"),onTap:this.bindFn(this.copyLink)},n.createElement(i,{key:function(){return e.copyStatus}},function(t){return"success"==t?n.createElement("span",{"aria-label":function(){return e.props.controller().s("graphing-calculator-narration-share-graph-link-copied")}},n.createElement("i",{class:n.const("dcg-icon-check")})):"error"==t?n.createElement("span",{"aria-label":function(){return e.props.controller().s("graphing-calculator-narration-share-graph-link-unable-to-copy")}},n.createElement("i",{class:n.const("dcg-icon-error")})):n.createElement("span",{class:n.const("dcg-copy-text")},function(){return e.props.controller().s("graphing-calculator-button-share-graph-link-copy")})})))},u.prototype.copyLink=function(){var t=this;if(this.inputEl){o(this.inputEl).focus().select(),this.copyStatus="success";try{document.execCommand("copy")}catch(t){this.copyStatus="error"}this.unmounted||(this.update(),clearTimeout(this.copyStatusTimeout),this.copyStatusTimeout=setTimeout(function(){t.copyStatus=null,t.unmounted||t.update()},2500))}},u);function u(){var t=null!==c&&c.apply(this,arguments)||this;return t.unmounted=!1,t}t.SelectableInput=l});

define('loadcss!calculator-shell/share-menu', function(){});
define('calculator-shell/share-menu',["require","exports","main/calculator_backend","tslib","dcgview","jquery","lib/selectable-input","./menu","analytics/looker","loadcss!./share-menu"],function(require,t,e,n,o,r,c,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ShareMenu=void 0;var s,i=o.Components,u=i.If,d=i.Textarea,p=(s=o.Class,n.__extends(h,s),h.prototype.init=function(){this.controller=this.props.controller(),this.graphsController=this.controller.graphsController,this.graph=null,this.shareInProgress=!0,this.didSharingFail=!1,l.logJSON("user-action::open-share-dropdown",{})},h.prototype.template=function(){var e=this;return o.createElement(a.Menu,{title:function(){return e.controller.s("account-shell-heading-share-graph")},type:o.const("share"),label:function(){return e.controller.s("account-shell-narration-share-options")},controller:this.props.controller},o.createElement("div",{class:o.const("dcg-popover-content")},o.createElement(u,{predicate:function(){return e.shareInProgress}},function(){return o.createElement("div",{class:o.const("dcg-loading")},o.createElement("span",{class:o.const("dcg-spinner")}),function(){return e.controller.s("account-shell-label-loading")})}),o.createElement(u,{predicate:function(){return e.didSharingFail}},function(){return o.createElement("div",{class:o.const("dcg-failed")},o.createElement("span",{"aria-live":o.const("assertive"),"aria-atomic":o.const(!0)},function(){return e.controller.s("account-shell-error-sharing-link")+" "}),o.createElement("span",{role:o.const("button"),tabindex:o.const(0),class:o.const("dcg-action-retry"),onTap:function(){return e.controller.dispatch({type:"toggle-menu",payload:"none"}),e.controller.dispatch({type:"toggle-menu",payload:"share"})}},function(){return e.controller.s("account-shell-button-retry-now")}),function(){return" "+e.controller.s("account-shell-text-or")+" "},o.createElement("span",{role:o.const("button"),tabindex:o.const(0),class:o.const("dcg-action-close"),onTap:function(){return e.controller.dispatch({type:"toggle-menu",payload:"share"})}},function(){return e.controller.s("account-shell-button-cancel")}),o.const("."))}),o.createElement(u,{predicate:function(){return!e.shareInProgress&&!e.didSharingFail}},function(){return o.createElement("div",{class:o.const("dcg-loaded"),didMount:e.didMountLoaded.bind(e)},function(){return e.controller.s("account-shell-label-share-link")},o.createElement(c.SelectableInput,{controller:e.props.controller,link:function(){return e.getGraphPath()}}),o.createElement(u,{predicate:function(){return!e.controller.shouldDisablePrintAndExport()}},function(){return o.createElement("div",{class:o.const("dcg-share-actions")},o.createElement("span",{class:o.const("dcg-print-link"),onTap:e.print.bind(e),tabindex:o.const(0),"aria-label":o.const("Print Graph and Equations"),role:o.const("link")},o.createElement("i",{class:o.const("dcg-icon-print")}),o.createElement("span",null,function(){return e.controller.s("account-shell-button-print")})),o.createElement("span",{class:o.const("dcg-export-image-link"),onTap:e.exportImage.bind(e),tabindex:o.const(0),"aria-label":o.const("Export Image"),role:o.const("link")},o.createElement("i",{class:o.const("dcg-icon-export")}),o.createElement("span",null,function(){return e.controller.s("account-shell-button-export-image")})),o.createElement("span",{class:function(){return{"dcg-embed-link":!0,"dcg-selected":e.embedVisible}},onTap:e.toggleEmbedVisible.bind(e),tabindex:o.const(0),"aria-label":o.const("Embed Graph"),role:o.const("link")},o.createElement("i",{class:o.const("dcg-icon-embed")}),o.createElement("span",null,function(){return e.controller.s("account-shell-button-embed")})))}),o.createElement(u,{predicate:function(){return e.embedVisible}},function(){return o.createElement("div",{class:o.const("dcg-embed-div share-div"),didMount:e.didMountTextarea.bind(e)},o.createElement(d,{rows:o.const("6"),class:o.const("select-all first-input dcg-variable-htmlembedcode"),value:function(){return e.getGraphEmbedCode()},onInput:function(){}}))}),o.createElement(u,{predicate:function(){return e.shouldShowArtContest()}},function(){return o.createElement("div",{class:o.const("dcg-art-contest-container")},o.createElement("span",{class:o.const("dcg-contest-text")},function(){return e.controller.s("account-shell-label-math-art-contest")}),o.createElement("div",{class:o.const("dcg-enter-btn"),role:o.const("button"),tabindex:o.const(0),onTap:function(t){return e.controller.state.artContestURLFromShareMenu=e.getGraphPath(),e.controller.dispatch({type:"show-modal",modal:"contest-submission",device:t.device})}},function(){return e.controller.s("account-shell-button-join-contest")}))}))})))},h.prototype.didMountTextarea=function(t){r(t).find("textarea").focus().select()},h.prototype.toggleEmbedVisible=function(){this.embedVisible=!this.embedVisible,this.unmounted||this.update()},h.prototype.twitterUrl=function(){return"http://twitter.com/home?status=Check out my @desmos graph: "+this.getGraphPath()},h.prototype.facebookUrl=function(){return"http://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(this.getGraphPath())},h.prototype.didMountLoaded=function(){this.embedVisible=!1},h.prototype.print=function(){window.print()},h.prototype.exportImage=function(t){this.controller.dispatch({type:"show-modal",modal:"export-image",device:t.device})},h.prototype.getGraphPath=function(){return null!=this.graph?this.graph.getURL():void 0},h.prototype.getGraphEmbedCode=function(){return this.graph?'<iframe src="'+this.getGraphPath()+'?embed" width="500px" height="500px" style="border: 1px solid #ccc" frameborder=0></iframe>':""},h.prototype.shouldShowArtContest=function(){return!!this.controller.isArtContestEnabled()&&this.controller.isGraphComplexEnoughForContest()&&this.controller.isLoggedIn()},h.prototype.didUnmount=function(){this.unmounted=!0},h.prototype.didMount=function(){var e=this;return this.graphsController.shareGraph().done(function(t){e.graph=t}).fail(function(){e.didSharingFail=!0}).always(function(){e.shareInProgress=!1,e.unmounted||e.update()})},h);function h(){return null!==s&&s.apply(this,arguments)||this}t.ShareMenu=p});
define('calculator-shell/account-menu',["require","exports","tslib","dcgview","./menu"],function(require,t,n,e,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountMenu=void 0;var r,c=e.Components.If,l=(r=e.Class,n.__extends(s,r),s.prototype.init=function(){this.controller=this.props.controller(),this.userController=this.controller.userController},s.prototype.template=function(){var n=this;return e.createElement(c,{predicate:function(){return n.userController.isLoggedIn()}},function(){return e.createElement(o.Menu,{type:function(){return"account"},label:function(){return n.controller.s("account-shell-label-account-information")},controller:n.props.controller},e.createElement("div",{class:e.const("user-info")},e.createElement("span",{class:e.const("account-name")},function(){return n.userController.getFullName()}),e.createElement("span",{class:e.const("account-email")},function(){return n.userController.getEmail()}),e.createElement("a",{class:e.const("dcg-action-accountsettings"),role:e.const("link"),tabindex:e.const(0),onTap:function(t){return n.controller.dispatch({type:"show-modal",modal:"account-settings",device:t.device})}},function(){return n.controller.s("account-shell-link-account-settings")})),e.createElement("a",{class:e.const("dcg-action-logout"),role:e.const("link"),tabindex:e.const(0),onTap:function(){return n.logout()}},function(){return n.controller.s("account-shell-link-sign-out")}))})},s.prototype.logout=function(){this.controller.dispatch({type:"toggle-menu",payload:"none"}),this.userController.logout()},s);function s(){return null!==r&&r.apply(this,arguments)||this}t.AccountMenu=l});
define('calculator-shell/wrapper',["require","exports","tslib","dcgview","./view","./language-menu","./help-menu","./share-menu","./account-menu"],function(require,e,r,t,n,l,o,c,u){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ViewWrapper=void 0;var a,p=t.Components.Switch,s=(a=t.Class,r.__extends(i,a),i.prototype.init=function(){this.controller=this.props.controller()},i.prototype.template=function(){var r=this;return t.createElement("div",null,t.createElement(n.HeaderBar,{controller:this.props.controller}),t.createElement(p,{key:function(){return r.controller.getOpenMenu()}},function(e){switch(e){case"language":return t.createElement(l.LanguageMenu,{controller:r.props.controller});case"help":return t.createElement(o.HelpMenu,{controller:r.props.controller});case"share":return t.createElement(c.ShareMenu,{controller:r.props.controller});case"account":return t.createElement(u.AccountMenu,{controller:r.props.controller});default:return t.createElement("span",null)}}))},i);function i(){return null!==a&&a.apply(this,arguments)||this}e.ViewWrapper=s});
define('calculator-shell/modal',["require","exports","tslib","dcgview"],function(require,e,t,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0;var n,r=(n=o.Class,t.__extends(i,n),i.prototype.template=function(){var e=this;return o.createElement("div",{class:function(){return{modal_section:!0,"dcg-hotkeys-dialog":"hotkeys"===e.props.controller().getOpenModal()}}},this.children)},i);function i(){return null!==n&&n.apply(this,arguments)||this}e.Modal=r});
define('calculator-shell/save-dialog',["require","exports","tslib","dcgview","./modal","jquery"],function(require,t,e,n,o,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SaveDialog=void 0;var r,a=n.Components,c=a.Input,i=a.Checkbox,s=a.If,u=(r=n.Class,e.__extends(p,r),p.prototype.init=function(){this.controller=this.props.controller(),this.graphsController=this.controller.graphsController,this.lastSavedTitle=this.graphsController.getCurrentGraphTitle(),this.newSaveTitle=this.lastSavedTitle,null==this.controller.state.saveDialog&&(this.controller.state.saveDialog={copyOnSave:!0})},p.prototype.template=function(){var e=this;return n.createElement(o.Modal,{controller:this.props.controller},n.createElement("div",{id:n.const("save-dialog")},n.createElement("h1",null,function(){return e.getSaveText()}),n.createElement("div",{class:n.const("dcg-clear")}),n.createElement("form",{didMount:this.didMountForm.bind(this)},n.createElement("label",{class:n.const("input-label")},n.createElement("div",{class:n.const("graph-title-title")},function(){return e.controller.s("account-shell-label-graph-title")},n.const("")),n.createElement(c,{class:n.const("title-input"),name:n.const("title"),placeholder:function(){return e.graphsController.getUntitledString()},value:function(){return e.newSaveTitle},maxlength:n.const("140"),onInput:function(t){return e.newSaveTitle=t},didMount:function(t){return l(t).focus().select()}})),n.createElement("div",null,n.createElement("button",{type:n.const("submit"),class:n.const("dcg-btn dcg-btn-green pull-right dcg-action-save")},function(){return e.controller.s("account-shell-button-save")}),n.createElement(s,{predicate:function(){return e.graphsController.wasCurrentGraphEverSaved()}},function(){return n.createElement("label",{class:n.const("dcg-new-copy pull-right")},n.createElement(i,{checked:function(){return e.controller.state.saveDialog.copyOnSave},onChange:function(t){if(e.controller.state.saveDialog.copyOnSave=t,!e.unmounted)return e.update()}}),n.createElement("span",{class:n.const("duplicate-label")},function(){return e.getDuplicateText()}))})))))},p.prototype.didUnmount=function(){this.unmounted=!0},p.prototype.didMountForm=function(t){var e=this;l(t).on("submit",function(t){t.preventDefault(),""===e.newSaveTitle&&(e.newSaveTitle="Untitled Graph"),e.controller.dispatch({type:"save-graph",payload:{title:e.newSaveTitle,saveAs:e.controller.state.saveDialog.copyOnSave},device:"mouse"})})},p.prototype.getSaveText=function(){return"graphing"===this.controller.product?this.controller.s("account-shell-heading-save-graph"):"geometry"===this.controller.product?this.controller.s("account-shell-heading-save-construction"):""},p.prototype.getDuplicateText=function(){return"graphing"===this.controller.product?this.controller.s("account-shell-heading-duplicate-graph"):"geometry"===this.controller.product?this.controller.s("account-shell-heading-duplicate-construction"):""},p);function p(){return null!==r&&r.apply(this,arguments)||this}t.SaveDialog=u});
define('lib/evt-delegator',["require","exports","jquery","underscore"],function(require,e,r,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Delegator=void 0;var n=(o.prototype.push=function(e){var n=this,r=t.uniqueId("delegator_");return this.handlers.push({token:r,handler:e}),function(){return n.handlers=t.filter(n.handlers,function(e){return e.token!=r})}},o.prototype.handleEvent=function(e){if(!e.isDefaultPrevented()&&this.handlers.length)for(var n=!1,r=function(){return n=!0},t=0,o=this.handlers.slice().reverse();t<o.length;t++)if((0,o[t].handler)(e,r),n)return},o);function o(){var n=this;this.handlers=[],r(document).on("keydown.delegator",function(e){return n.handleEvent(e)})}e.Delegator=new n});
define('lib/restrict-focus',["require","exports","keys","jquery"],function(require,e,u,s){"use strict";function o(e){return e.find(':input:enabled, [tabindex="0"], a[href]').filter(":visible:not([aria-hidden=true]):not([aria-disabled=true])")}Object.defineProperty(e,"__esModule",{value:!0}),e.createRestrictFocusHandler=e.getFocusableElements=void 0,e.getFocusableElements=o,e.createRestrictFocusHandler=function(n){return function(e){if(u.lookup(e)==u.TAB){var t=o(s(n));if(0===t.length)return;var i=t.first(),r=t.last();e.shiftKey&&i.is(":focus")?(e.preventDefault(),r.focus()):(!e.shiftKey&&r.is(":focus")||document.activeElement&&!t.is(":focus"))&&(e.preventDefault(),i.focus())}}}});

define('loadcss!shared-components/modal', function(){});

define('loadcss!shared-components/dcg-shared-icons', function(){});
define('shared-components/modal',["require","exports","tslib","dcgview","jquery","keys","lib/evt-delegator","lib/restrict-focus","loadcss!./modal","loadcss!./dcg-shared-icons","jquery.tipsy"],function(require,e,t,s,o,n,i,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Modal=void 0;var d,l=s.Components.If,c=(d=s.Class,t.__extends(a,d),a.prototype.init=function(){this.i18n=this.props.i18n(),this.isMounted=!1},a.prototype.template=function(){var t=this;return s.createElement("div",{class:s.const("dcg-shared-modal-container"),didMount:this.bindFn(this.didMount),didUnmount:this.bindFn(this.didUnmount)},s.createElement("div",{class:function(){return{"dcg-shared-modal-cover":!0,"dcg-shared-has-close-button":t.showX(),"dcg-shared-modal-fullscreen":"fullscreen"===t.props.size(),"dcg-shared-modal-wide":"wide"===t.props.size(),"dcg-shared-modal-medium":"medium"===t.props.size(),"dcg-shared-modal-narrow":"narrow"===t.props.size()}}},s.createElement("div",{class:s.const("dcg-shared-modal-background"),onTap:this.props.onClose}),s.createElement("div",{class:s.const("dcg-shared-modal-transition-container")},s.createElement("div",{class:s.const("dcg-shared-modal"),role:s.const("dialog"),"aria-label":function(){var e="";return t.props.ariaLabel?e=t.props.ariaLabel():t.props.title&&(e=t.props.title()),e}},s.createElement(l,{predicate:function(){return!!t.props.showX}},function(){return s.createElement("div",{role:s.const("link"),tabindex:s.const("0"),"aria-label":function(){return t.i18n.s("shared-button-close-dialog")},tooltip:function(){return t.i18n.s("shared-button-close-dialog")},didMount:function(e){return o(e).tipsy()},class:s.const("dcg-shared-close-cross"),onTap:t.props.onClose},s.createElement("i",{class:s.const("dcg-shared-icon-remove"),"aria-hidden":s.const("true")}))}),s.createElement("div",{class:s.const("dcg-shared-modal-contents-wrapper")},s.createElement(l,{predicate:function(){return!!t.props.title()}},function(){return s.createElement("h1",{class:function(){return{"dcg-shared-modal-title":!0,"dcg-shared-left-align-title":t.leftAlignTitle()}}},function(){return t.props.title()})}),s.createElement("div",{class:s.const("dcg-shared-modal-scrollable-content")},this.children))))))},a.prototype.showX=function(){return!!this.props.showX&&this.props.showX()},a.prototype.leftAlignTitle=function(){return!!this.props.leftAlignTitle&&this.props.leftAlignTitle()},a.prototype.didMount=function(){var s,o=this;this.isMounted||(this.isMounted=!0,s=r.createRestrictFocusHandler(".dcg-shared-modal-container:visible"),this.unsub=i.Delegator.push(function(e,t){n.lookup(e)==n.ESCAPE&&(o.onClose(),t()),s(e)}))},a.prototype.didUpdate=function(){!this.handledCloseFocus&&this.props.showX&&this.props.showX()&&this.props.focusCloseLink&&this.props.focusCloseLink()&&o(".dcg-shared-modal-container:visible").find(".dcg-shared-close-cross").focus(),this.handledCloseFocus=!0},a.prototype.onClose=function(){this.props.onClose&&this.props.onClose()},a.prototype.didUnmount=function(){this.isMounted&&(this.isMounted=!1,this.unsub())},a);function a(){return null!==d&&d.apply(this,arguments)||this}e.Modal=c});
define('shared-components/shared-cookie-notice',["require","exports","tslib","dcgview","shared/dcgviews/localize"],function(require,e,t,s,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n,c=(n=s.Class,t.__extends(i,n),i.prototype.template=function(){return s.createElement("div",{class:s.const("dcg-shared-cookie-notice")},s.createElement(o.Localize,{key:this.const("shared-message-cookie-notice"),i18n:this.props.i18n},s.createElement("b",null,s.const("Note:")),s.const(" "),s.const("Desmos uses cookies to enable persistence when you are signed"),s.const(" "),s.const("in. If you do not wish to use cookies, please use Desmos without"),s.const(" "),s.const("logging in."),s.const(" "),s.createElement("a",{class:s.const("dcg-shared-cookie-notice-learn-more dcg-shared-blue-link"),href:s.const("/privacy"),target:s.const("_blank")},s.const("Learn More."))))},i);function i(){return null!==n&&n.apply(this,arguments)||this}e.default=c});

define('loadcss!shared-components/shared-checkbox', function(){});
define('shared-components/shared-checkbox',["require","exports","tslib","dcgview","jquery","loadcss!./shared-checkbox","loadcss!./dcg-shared-icons"],function(require,e,s,r,c){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedCheckbox=void 0;var a,t=(a=r.Class,s.__extends(d,a),d.prototype.template=function(){var e=this;return r.createElement("div",{class:function(){return{"dcg-shared-component-checkbox":!0,"dcg-shared-checked":e.props.checked(),"dcg-shared-disabled":e.props.disabled&&e.props.disabled(),"dcg-shared-small":e.props.small&&e.props.small(),"dcg-shared-green":e.props.green&&e.props.green()}},onTap:this.bindFn(this.onChange)},r.createElement("span",{tabindex:r.const(0),class:r.const("dcg-shared-checkbox"),role:r.const("checkbox"),"aria-label":this.props.ariaLabel,"aria-disabled":function(){return e.props.disabled&&e.props.disabled()},"aria-checked":this.props.checked},r.createElement("i",{class:r.const("dcg-shared-icon-check"),"aria-hidden":r.const("true")})),r.createElement("span",{class:r.const("dcg-shared-checkbox-children")},this.children))},d.prototype.onChange=function(e){e.target&&c(e.target).attr("href")||this.props.disabled&&this.props.disabled()||this.props.onChange(!this.props.checked())},d);function d(){return null!==a&&a.apply(this,arguments)||this}e.SharedCheckbox=t});

define('loadcss!shared-components/shared-account-modal-errors', function(){});
define('shared-components/shared-account-modal-errors',["require","exports","tslib","dcgview","loadcss!./shared-account-modal-errors"],function(require,e,r,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedAccountModalErrors=void 0;var n,o=t.Components,s=o.If,c=o.For,l=(n=t.Class,r.__extends(a,n),a.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller},a.prototype.template=function(){var r=this;return t.createElement(s,{predicate:function(){return!!r.props.errors().length}},function(){return t.createElement(c,{each:r.props.errors},t.createElement("span",null,function(e){return t.createElement("div",{class:t.const("dcg-shared-account-modal-errors"),role:t.const("alert")},t.createElement("span",null,function(){return r.i18n.raw(e)}))}))})},a);function a(){return null!==n&&n.apply(this,arguments)||this}e.SharedAccountModalErrors=l});

define('loadcss!shared-components/shared-account-modal', function(){});

define('loadcss!shared-components/shared-signup-modal', function(){});
define('shared-components/shared-signup-modal',["require","exports","tslib","dcgview","shared-components/modal","jquery","underscore","shared/dcgviews/localize","./shared-cookie-notice","./shared-checkbox","./shared-account-modal-errors","loadcss!./shared-account-modal","loadcss!./shared-signup-modal"],function(require,e,t,n,o,r,i,s,c,a,l){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedSignupModal=void 0;var d,u=n.Components,h=u.If,p=u.Input,m=u.Switch,g=(d=n.Class,t.__extends(f,d),f.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller},f.prototype.template=function(){var t=this;return n.createElement(h,{predicate:this.bindFn(this.canChangeRole)},function(){return n.createElement("span",{class:n.const("dcg-shared-dark-gray-link"),role:n.const("link"),tabindex:n.const("0"),onTap:function(e){return t.controller.dispatch({type:"show-modal",modal:t.props.teacher()?"signup":"teacher-signup",device:e.device})}},function(){return t.props.teacher()?t.i18n.s("shared-button-i-am-not-a-teacher"):t.i18n.s("shared-button-sign-up-as-a-teacher")})})},f.prototype.canChangeRole=function(){return!this.controller.getLimitedSignupRole()},f);function f(){return null!==d&&d.apply(this,arguments)||this}var b,y=(b=n.Class,t.__extends(E,b),E.prototype.template=function(){return n.createElement("span",{class:n.const("dcg-shared-terms-notice")},n.createElement(s.Localize,{key:this.const("shared-message-privacy-notice"),i18n:this.props.i18n},n.const("I have read, understand, and accept the"),n.const(" "),n.createElement("a",{href:n.const("/terms"),target:n.const("_blank"),class:n.const("dcg-shared-blue-link")},n.const("Terms of Service")),n.const(" "),n.const("and"),n.const(" "),n.createElement("a",{href:n.const("/privacy"),target:n.const("_blank"),class:n.const("dcg-shared-blue-link")},n.const("Privacy Policy")),n.const(".")))},E);function E(){return null!==b&&b.apply(this,arguments)||this}var w,v=(w=n.Class,t.__extends(k,w),k.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.selectedView=0,this.name="",this.email="",this.password="",this.consentChecked=!1,this.isSubmittingForm=!1,this.formErrors=[],this.breakPoint=660,this.measureWindow(),this.controller.getModalStartingError()&&this.formErrors.push(this.controller.getModalStartingError())},k.prototype.template=function(){var t=this;return n.createElement(o.Modal,{title:this.bindFn(this.getModalTitle),size:this.const("narrow"),showX:this.const(!0),onClose:function(){return t.controller.dispatch({type:"close-modal"})},i18n:this.props.controller},n.createElement("div",{class:function(){return{"dcg-shared-signup-dialog":!0,"dcg-shared-account-dialog":!0,"dcg-shared-teacher-signup-dialog":t.props.teacher()}}},n.createElement("div",{class:n.const("dcg-shared-switch-account-message")},function(){return t.i18n.s("shared-prompt-already-have-account")},this.const(this.i18n.raw(" ")),n.createElement("a",{role:n.const("link"),tabindex:n.const("0"),class:n.const("dcg-shared-dark-gray-link"),onTap:function(e){return t.controller.dispatch({type:"show-modal",modal:"login",device:e.device})}},function(){return t.i18n.s("shared-button-login")}),n.const(".")),n.createElement("div",{class:n.const("dcg-shared-navigation-tabs"),role:n.const("tablist")},n.createElement("div",{role:n.const("tab"),tabindex:n.const("0"),"aria-selected":this.bindFn(this.isGoogleSelected),class:function(){return{"dcg-shared-tab-gray-underline":!0,"dcg-shared-tab-always-underline":!0,"dcg-shared-profile-view-button":!0,"dcg-selected":t.isGoogleSelected()}},onTap:function(){return t.updateView(0)}},this.bindFn(this.externalTitle)),n.createElement("div",{role:n.const("tab"),tabindex:n.const("0"),"aria-selected":this.bindFn(this.isDesmosSelected),class:function(){return{"dcg-shared-tab-gray-underline":!0,"dcg-shared-tab-always-underline":!0,"dcg-shared-password-view-button":!0,"dcg-selected":t.isDesmosSelected()}},onTap:function(){return t.updateView(1)}},this.bindFn(this.desmosTitle))),n.createElement("div",{class:n.const("dcg-shared-account-content-container")},n.createElement(m,{key:function(){return t.selectedView}},function(e){return 0===e?n.createElement("div",{class:n.const("dcg-shared-notice-checkbox-google")},n.createElement(a.SharedCheckbox,{ariaLabel:t.bindFn(t.consentText),checked:function(){return t.consentChecked},disabled:t.const(!1),onChange:function(){if(t.consentChecked=!t.consentChecked,!t.unmounted)return t.update()}},t.bindFn(t.consentText)),n.createElement(a.SharedCheckbox,{ariaLabel:function(){return t.i18n.s("shared-narration-privacy-policy-agreement")},checked:function(){return t.privacyChecked},disabled:t.const(!1),onChange:function(){if(t.privacyChecked=!t.privacyChecked,!t.unmounted)return t.update()}},n.createElement(y,{i18n:t.const(t.i18n)})),n.createElement(h,{predicate:function(){return window.googleAuthConnectionFailed}},function(){return n.createElement("div",{class:n.const("dcg-shared-google-auth-unavailable")},function(){return t.i18n.s("shared-message-google-login-not-available")})}),n.createElement(h,{predicate:function(){return!window.googleAuthConnectionFailed}},function(){return n.createElement("div",{class:function(){return{"dcg-shared-btn-gray-outline":!0,"dcg-shared-google-login":!0,"dcg-disabled":t.hasNotConsented()}},role:n.const("button"),tabindex:function(){return t.hasNotConsented()?"-1":"0"},"aria-disabled":t.bindFn(t.hasNotConsented),onTap:function(){return t.googleLogin()}},n.createElement("div",{class:n.const("dcg-shared-google-icon dcg-shared-external-login-logo")}),n.createElement("span",null,t.bindFn(t.getGoogleLoginText)))}),n.createElement(h,{predicate:function(){return t.controller.allowSignInWithApple()}},function(){return n.createElement("div",{class:function(){return{"dcg-shared-btn-gray-outline":!0,"dcg-shared-apple-login":!0,"dcg-disabled":t.hasNotConsented()}},role:n.const("button"),tabindex:function(){return t.hasNotConsented()?"-1":"0"},"aria-disabled":t.bindFn(t.hasNotConsented),onTap:function(){return t.appleLogin()}},n.createElement("div",{class:n.const("dcg-shared-apple-icon dcg-shared-external-login-logo")}),n.createElement("span",null,t.bindFn(t.getAppleLoginText)))}),n.createElement("div",{class:n.const("dcg-shared-switch-account-type")},n.createElement(g,{controller:t.props.controller,teacher:t.props.teacher}))):1===e?n.createElement("div",null,n.createElement(l.SharedAccountModalErrors,{controller:t.props.controller,errors:function(){return t.formErrors}}),n.createElement("form",{class:n.const("dcg-shared-action-submit"),onSubmit:t.bindFn(t.onSubmit),didMount:t.bindFn(t.didMountForm)},n.createElement("div",{class:n.const("dcg-shared-email-form-container")},n.createElement("label",null,n.createElement("span",{class:n.const("dcg-shared-input-title")},function(){return t.i18n.s("shared-label-email")}),n.createElement(p,{type:n.const("email"),name:n.const("email"),class:n.const("dcg-shared-input-blue-outline"),required:n.const("required"),"aria-describedby":n.const("email-description"),didMount:function(e){t.controller.wasModalOpenedWithKeyboard()&&e.focus()},value:function(){return t.email},onInput:function(e){if(t.email=e,!t.unmounted)return t.update()}})),n.createElement("label",null,n.createElement("span",{class:n.const("dcg-shared-input-title")},function(){return t.i18n.s("shared-label-name-or-nickname")}),n.createElement(p,{type:n.const("text"),name:n.const("name"),class:n.const("dcg-shared-input-blue-outline"),required:n.const("required"),"aria-describedby":n.const("name-description"),didMount:function(e){if(t.controller.wasModalOpenedWithKeyboard())return e.focus()},value:function(){return t.name},onInput:function(e){if(t.name=e,!t.unmounted)return t.update()}})),n.createElement("label",null,n.createElement("span",null,function(){return t.i18n.s("shared-label-password")}),n.createElement(p,{type:n.const("password"),class:n.const("dcg-shared-input-blue-outline"),name:n.const("password"),required:n.const("required"),value:function(){return t.password},onInput:function(e){if(t.password=e,!t.unmounted)return t.update()}})),n.createElement("div",{class:n.const("dcg-shared-notice-checkbox-email")},n.createElement(a.SharedCheckbox,{ariaLabel:t.bindFn(t.consentText),checked:function(){return t.consentChecked},disabled:t.const(!1),onChange:function(){if(t.consentChecked=!t.consentChecked,!t.unmounted)return t.update()}},t.bindFn(t.consentText))),n.createElement(a.SharedCheckbox,{ariaLabel:function(){return t.i18n.s("shared-narration-privacy-policy-agreement")},checked:function(){return t.privacyChecked},disabled:t.const(!1),onChange:function(){if(t.privacyChecked=!t.privacyChecked,!t.unmounted)return t.update()}},n.createElement(y,{i18n:t.const(t.i18n)})),n.createElement("div",{class:n.const("dcg-shared-sign-in-options")},n.createElement(h,{predicate:function(){return t.isSubmittingForm}},function(){return n.createElement("div",{class:n.const("dcg-shared-progress-indicator dcg-shared-create-account-progress")},n.createElement("div",{class:n.const("dcg-shared-spinner")}))}),n.createElement(h,{predicate:function(){return!t.isSubmittingForm}},function(){return n.createElement("div",{class:n.const("dcg-shared-submit-container")},n.createElement(g,{controller:t.props.controller,teacher:t.props.teacher}),n.createElement("button",{type:n.const("submit"),class:function(){return{"dcg-shared-btn-blue":!0,"dcg-disabled":!t.submitEnabled()}},"aria-disabled":function(){return!t.submitEnabled()},tabindex:function(){return t.submitEnabled()?"0":"-1"}},function(){return t.i18n.s("shared-button-create-account")}))}))))):n.createElement("span",null)}),n.createElement(c.default,{i18n:this.const(this.i18n)}))))},k.prototype.canSwitchRoles=function(){return!this.controller.getLimitedSignupRole()},k.prototype.getModalTitle=function(){return this.props.teacher()?this.i18n.s("shared-title-teacher-signup"):this.i18n.s("shared-title-signup")},k.prototype.didMountForm=function(e){this.$form=r(e)},k.prototype.submitEnabled=function(){if(!this.consentChecked||!this.privacyChecked)return!1;if(!this.$form)return!1;var e=this.$form.find('[name="password"]').val(),t=this.$form.find('[name="email"]').val(),n=this.$form.find('[name="name"]').val();return!!(e&&t&&n)},k.prototype.onSubmit=function(e){e.preventDefault(),this.submitEnabled()&&this.submitForm()},k.prototype.googleLogin=function(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.googleLogin({fromUI:"create",teacher:this.props.teacher()})},k.prototype.appleLogin=function(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.appleLogin({fromUI:"create",teacher:this.props.teacher()})},k.prototype.getGoogleLoginText=function(){return this.consentChecked&&this.privacyChecked?this.i18n.s("shared-prompt-sign-up-with-google"):this.i18n.s("shared-prompt-please-consent-to-sign-up-with-google")},k.prototype.getAppleLoginText=function(){return this.consentChecked&&this.privacyChecked?this.i18n.s("shared-prompt-sign-up-with-apple"):this.i18n.s("shared-prompt-please-consent-to-sign-up-with-apple")},k.prototype.submitForm=function(){var t=this;this.formErrors=[],this.isSubmittingForm=!0,this.unmounted||this.update(),this.controller.userController.createAccount({name:this.name,email:this.email,password:this.password,teacher:this.props.teacher(),lang:this.controller.getLanguage()}).done(function(){if(!t.unmounted)return t.controller.dispatch({type:"close-modal"})}).fail(function(e){t.formErrors=t.controller.parseJSONErrors(e)}).always(function(){t.isSubmittingForm=!1,t.unmounted||t.update()})},k.prototype.updateView=function(e){this.selectedView=e,this.unmounted||this.update()},k.prototype.externalTitle=function(){return this.controller.allowSignInWithApple()?this.windowWidth>this.breakPoint?this.i18n.s("shared-button-external-account-wide"):this.i18n.s("shared-button-external-account-narrow"):this.windowWidth>this.breakPoint?this.i18n.s("shared-button-google-account-wide"):this.i18n.s("shared-button-google-account-narrow")},k.prototype.desmosTitle=function(){return this.windowWidth>this.breakPoint?this.i18n.s("shared-button-email-address-wide"):this.i18n.s("shared-button-email-address-narrow")},k.prototype.measureWindow=function(){return this.windowWidth=r(window).width()},k.prototype.didMount=function(){var e=this;r(window).on("resize.create-account",i.throttle(function(){e.measureWindow(),e.update()},200))},k.prototype.didUnmount=function(){r(window).off("resize.create-account"),this.unmounted=!0},k.prototype.consentText=function(){return this.i18n.s("shared-message-consent-text")},k.prototype.isGoogleSelected=function(){return 0===this.selectedView},k.prototype.isDesmosSelected=function(){return 1===this.selectedView},k.prototype.hasNotConsented=function(){return!this.consentChecked||!this.privacyChecked},k);function k(){return null!==w&&w.apply(this,arguments)||this}e.SharedSignupModal=v});

define('loadcss!shared-components/shared-login-modal', function(){});
define('shared-components/shared-login-modal',["require","exports","tslib","dcgview","shared-components/modal","./shared-cookie-notice","shared/dcgviews/localize","./shared-account-modal-errors","loadcss!./shared-account-modal","loadcss!./shared-login-modal"],function(require,e,t,n,o,r,s,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedLoginModal=void 0;var c,i=n.Components,l=i.If,d=i.Input,u=i.IfElse,p=(c=n.Class,t.__extends(m,c),m.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.email="",this.password="",this.isSubmittingForm=!1,this.formErrors=[],this.controller.getModalStartingError()&&this.formErrors.push(this.controller.getModalStartingError())},m.prototype.template=function(){var t=this;return n.createElement(o.Modal,{title:function(){return t.i18n.s("shared-title-login")},size:this.const("narrow"),showX:this.const(!0),onClose:function(){return t.controller.dispatch({type:"close-modal"})},i18n:this.props.controller},n.createElement("div",{class:n.const("dcg-shared-login-dialog dcg-shared-account-dialog")},u(function(){return t.canChooseRole()},{true:function(){return n.createElement("div",{class:n.const("dcg-shared-switch-account-message")},n.createElement(s.Localize,{key:t.const("shared-prompt-new-to-desmos-teacher-or-student"),i18n:t.props.controller},n.const("New to Desmos? Sign up as a"),n.const(" "),n.createElement("a",{role:n.const("link"),tabindex:n.const("0"),class:n.const("dcg-shared-dark-gray-link"),onTap:function(e){return t.controller.dispatch({type:"show-modal",modal:"teacher-signup",device:e.device})}},n.const("teacher")),n.const(" "),n.const("or"),n.const(" "),n.createElement("a",{role:n.const("link"),tabindex:n.const("0"),class:n.const("dcg-shared-dark-gray-link"),onTap:function(e){return t.controller.dispatch({type:"show-modal",modal:"signup",device:e.device})}},n.const("student."))))},false:function(){return n.createElement("div",{class:n.const("dcg-shared-switch-account-message")},n.createElement(s.Localize,{key:t.const("shared-prompt-new-to-desmos-sign-up-here"),i18n:t.props.controller},n.const("New to Desmos?"),n.const(" "),n.createElement("a",{role:n.const("link"),tabindex:n.const("0"),class:n.const("dcg-shared-dark-gray-link"),onTap:function(e){return t.controller.dispatch({type:"show-modal",modal:"teacher"===t.controller.getLimitedSignupRole()?"teacher-signup":"signup",device:e.device})}},n.const("Sign up")),n.const(".")))}}),n.createElement("div",{class:n.const("dcg-shared-account-content-container")},n.createElement(l,{predicate:function(){return window.googleAuthConnectionFailed}},function(){return n.createElement("div",{class:n.const("dcg-shared-google-auth-unavailable")},function(){return t.i18n.s("shared-message-google-login-not-available")})}),n.createElement(l,{predicate:function(){return!window.googleAuthConnectionFailed}},function(){return n.createElement("div",{class:n.const("dcg-shared-btn-gray-outline dcg-shared-google-login"),role:n.const("button"),tabindex:n.const("0"),onTap:function(){return t.googleLogin()}},n.createElement("div",{class:n.const("dcg-shared-google-icon dcg-shared-external-login-logo")}),n.createElement("span",null,function(){return t.i18n.s("shared-button-login-with-google")}))}),n.createElement(l,{predicate:function(){return t.controller.allowSignInWithApple()}},function(){return n.createElement("div",{class:n.const("dcg-shared-btn-gray-outline dcg-shared-apple-login"),role:n.const("button"),tabindex:n.const("0"),onTap:function(){return t.appleLogin()}},n.createElement("div",{class:n.const("dcg-shared-apple-icon dcg-shared-external-login-logo")}),n.createElement("span",null,function(){return t.i18n.s("shared-button-login-with-apple")}))})),n.createElement("div",{class:n.const("dcg-shared-bg-line")},n.createElement("span",null,function(){return t.i18n.s("shared-message-or-login-with-desmos")})),n.createElement(a.SharedAccountModalErrors,{controller:this.props.controller,errors:function(){return t.formErrors}}),n.createElement("form",{class:n.const("dcg-shared-action-submit"),onSubmit:this.bindFn(this.onSubmit)},n.createElement("div",{class:n.const("dcg-shared-email-form-container")},n.createElement("label",null,n.createElement("span",{class:n.const("dcg-shared-input-title")},function(){return t.i18n.s("shared-label-email")}),n.createElement(d,{type:n.const("email"),name:n.const("email"),class:n.const("dcg-shared-input-blue-outline"),"aria-label":function(){return t.i18n.s("shared-label-email")},"aria-required":n.const("true"),required:n.const("required"),didMount:function(e){t.controller.wasModalOpenedWithKeyboard()&&e.focus()},value:function(){return t.email},onInput:function(e){t.email=e,t.unmounted||t.update()}})),n.createElement("div",{class:n.const("dcg-shared-password-container")},n.createElement("label",{for:n.const("password")},n.createElement("span",null,function(){return t.i18n.s("shared-label-password")}),n.createElement(d,{type:n.const("password"),class:n.const("dcg-shared-input-blue-outline"),"aria-label":function(){return t.i18n.s("shared-label-password")},"aria-required":n.const("true"),required:n.const("required"),value:function(){return t.password},name:this.const("password"),onInput:function(e){if(t.password=e,!t.unmounted)return t.update()}}),n.createElement("span",{class:n.const("dcg-shared-password-recovery-link")},n.createElement("a",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-shared-action-password"),onTap:function(e){return t.controller.dispatch({type:"show-modal",modal:"recover-password",device:e.device})}},function(){return t.i18n.s("shared-prompt-forgot-your-password")})))),n.createElement("div",{class:n.const("dcg-shared-sign-in-options")},n.createElement(l,{predicate:function(){return t.isSubmittingForm}},function(){return n.createElement("div",{class:n.const("dcg-shared-progress-indicator dcg-shared-create-account-progress")},n.createElement("div",{class:n.const("dcg-shared-spinner")}))}),n.createElement(l,{predicate:function(){return!t.isSubmittingForm}},function(){return n.createElement("div",{class:n.const("dcg-shared-submit-container")},n.createElement("button",{type:n.const("submit"),class:function(){return{"dcg-shared-btn-blue":!0,"dcg-disabled":!t.submitEnabled()}},"aria-disabled":function(){return!t.submitEnabled()},tabindex:function(){return t.submitEnabled()?"0":"-1"}},function(){return t.i18n.s("shared-button-login-capitalized")}))})),n.createElement(r.default,{i18n:this.const(this.i18n)})))))},m.prototype.canChooseRole=function(){return!this.controller.getLimitedSignupRole()},m.prototype.didUnmount=function(){this.unmounted=!0},m.prototype.onSubmit=function(e){e.preventDefault(),this.submitForm()},m.prototype.googleLogin=function(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.googleLogin({fromUI:"login"})},m.prototype.appleLogin=function(){this.controller.dispatch({type:"close-modal"}),this.controller.userController.appleLogin({fromUI:"login"})},m.prototype.submitEnabled=function(){return!(!this.email||!this.password)},m.prototype.submitForm=function(){var t=this;this.submitEnabled()&&(this.isSubmittingForm=!0,this.formErrors=[],this.controller.userController.checkPendingDeletion({email:this.email,lang:this.controller.getLanguage()}).done(function(e){t._pendingDeletion=e.pendingDeletion}).fail(function(){t._pendingDeletion=!1}).always(function(){t.unmounted||(t.unmounted||t.update(),t.controller.userController.desmosLogin({email:t.email,password:t.password,lang:t.controller.getLanguage()}).done(function(){t.unmounted||(t._pendingDeletion?t.controller.dispatch({type:"show-modal",modal:"account-reenabled",device:"mouse"}):t.controller.dispatch({type:"close-modal"}))}).fail(function(e){t.formErrors=t.controller.parseJSONErrors(e)}).always(function(){t.unmounted||(t.isSubmittingForm=!1,t.controller.dispatch({type:"render"}))}))}))},m);function m(){return null!==c&&c.apply(this,arguments)||this}e.SharedLoginModal=p});
define('shared-components/shared-recover-password-modal',["require","exports","tslib","dcgview","shared-components/modal","./shared-account-modal-errors","loadcss!./shared-account-modal"],function(require,e,t,r,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedRecoverPasswordModal=void 0;var s,i=r.Components,c=i.If,a=i.Input,l=(s=r.Class,t.__extends(d,s),d.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.email=this.controller.userController.getEmail(),this.formErrors=[],this.isSubmittingForm=!1,this.didSendRecoveryEmail=!1},d.prototype.template=function(){var t=this;return r.createElement(n.Modal,{title:function(){return t.i18n.s("shared-title-recover-password")},size:this.const("narrow"),showX:this.const(!0),onClose:function(){return t.controller.dispatch({type:"close-modal"})},i18n:this.props.controller},r.createElement("div",{class:r.const("dcg-shared-recover-password-dialog dcg-shared-account-dialog")},r.createElement(o.SharedAccountModalErrors,{controller:this.props.controller,errors:function(){return t.formErrors}}),r.createElement(c,{predicate:function(){return t.didSendRecoveryEmail}},function(){return r.createElement("div",{role:r.const("alert"),class:r.const("dcg-shared-account-paragraph")},function(){return t.i18n.s("shared-message-check-email-for-password-recovery-link")},r.const(" "),r.createElement("a",{href:r.const("#"),class:r.const("dcg-shared-blue-link"),onTap:function(e){return t.didSendRecoveryEmail=!1,t.controller.dispatch({type:"show-modal",modal:"recover-password",device:e.device})}},function(){return t.i18n.s("shared-button-try-again")}))}),r.createElement(c,{predicate:function(){return!t.didSendRecoveryEmail}},function(){return r.createElement("form",{class:r.const("dcg-shared-email-form-container"),onSubmit:t.bindFn(t.onSubmit)},r.createElement("div",{class:r.const("dcg-shared-account-paragraph")},function(){return t.i18n.s("shared-prompt-enter-email-for-password-recovery-link")}),r.createElement("label",null,r.createElement("span",{class:r.const("dcg-shared-input-title")},function(){return t.i18n.s("shared-label-email")}),r.createElement(a,{type:r.const("email"),name:r.const("email"),class:r.const("dcg-shared-input-blue-outline"),"aria-label":function(){return t.i18n.s("shared-label-email")},"aria-required":r.const("true"),required:r.const("required"),didMount:function(e){t.controller.wasModalOpenedWithKeyboard()&&e.focus()},value:function(){return t.email},onInput:function(e){t.email=e,t.unmounted||t.update()}})),r.createElement("div",{class:r.const("dcg-shared-sign-in-options")},r.createElement(c,{predicate:function(){return t.isSubmittingForm}},function(){return r.createElement("div",{class:r.const("dcg-shared-progress-indicator dcg-shared-create-account-progress")},r.createElement("div",{class:r.const("dcg-shared-spinner")}))}),r.createElement(c,{predicate:function(){return!t.isSubmittingForm}},function(){return r.createElement("button",{class:function(){return{"dcg-shared-btn-blue":!0}},type:r.const("submit")},function(){return t.i18n.s("shared-button-recover-password")})})))})))},d.prototype.didUnmount=function(){this.unmounted=!0},d.prototype.onSubmit=function(e){e.preventDefault(),this.submitForm()},d.prototype.submitForm=function(){var t=this;this.formErrors=[],this.isSubmittingForm=!0,this.controller.userController.recoverPassword({email:this.email,lang:this.controller.getLanguage()}).done(function(){t.didSendRecoveryEmail=!0}).fail(function(e){t.formErrors=t.controller.parseJSONErrors(e)}).always(function(){t.isSubmittingForm=!1,t.unmounted||t.update()})},d);function d(){return null!==s&&s.apply(this,arguments)||this}e.SharedRecoverPasswordModal=l});

define('loadcss!calculator-shell/hotkeys-dialog', function(){});
define('calculator-shell/hotkeys-dialog',["require","exports","tslib","dcgview","./modal","browser","dcgview-helpers/static-mathquill-view","jquery","loadcss!./hotkeys-dialog"],function(require,e,c,t,n,s,o,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.HotkeysDialog=void 0;var r,l=t.Components.If,d=(r=t.Class,c.__extends(m,r),m.prototype.init=function(){this.controller=this.props.controller(),null==this.controller.state.hotkeysDialog&&(this.controller.state.hotkeysDialog={shortcutOS:s.IS_APPLE?"mac":"windows"})},m.prototype.template=function(){var e=this;return t.createElement(n.Modal,{controller:this.props.controller},t.createElement("div",{id:t.const("dcg-hotkeys-dialog")},t.createElement("h1",null,function(){return e.controller.s("shared-calculator-heading-keyboard-shortcuts")}),t.createElement("div",{class:t.const("dcg-toggle-container")},t.createElement("span",{class:function(){return{"dcg-action-toggleos":!0,"dcg-windows-option":!0,"dcg-selected":"windows"===e.getShortcutOS()}},role:t.const("button"),tabindex:t.const(0),"aria-pressed":function(){return"windows"===e.getShortcutOS()},onTap:function(){return e.setShortcutOS("windows")}},function(){return e.controller.s("shared-calculator-button-windows-chrome")}),t.createElement("span",{class:function(){return{"dcg-action-toggleos":!0,"dcg-mac-option":!0,"dcg-selected":"mac"===e.getShortcutOS()}},role:t.const("button"),tabindex:t.const(0),"aria-pressed":function(){return"mac"===e.getShortcutOS()},onTap:function(){return e.setShortcutOS("mac")}},function(){return e.controller.s("shared-calculator-button-mac")})),t.createElement("div",{class:t.const("dcg-hotkey-container")},t.createElement("div",{class:t.const("dcg-hotkey-section")},t.createElement("h2",{class:t.const("dcg-hotkey-section-header")},function(){return e.controller.s("shared-calculator-heading-keyboard-shortcuts-common-actions")}),t.createElement("table",null,t.createElement("tr",null,t.createElement("th",null,function(){return e.controller.s("shared-calculator-heading-function-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-windows")},function(){return e.controller.s("shared-calculator-heading-windows-chrome-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-mac")},function(){return e.controller.s("shared-calculator-heading-mac-table-column-header")})),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-close-a-dialog")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Esc"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Esc")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-open-a-graph")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("O"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("O")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-save-a-graph")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("S"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("S")))),t.createElement("tr",{class:t.const("hotkey-table-row")},t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-print-a-graph")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("P"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("P")))),t.createElement("tr",{class:t.const("hotkey-table-row")},t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-show-or-hide-expression-list")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("E"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("E")))),t.createElement("tr",{class:t.const("hotkey-table-row")},t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-focus-expression-list")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("E"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("E")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-add-expression")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("X"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("X")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-add-note")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("O"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("O")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-collapse-expand-folder")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-add-folder")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("F"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("F")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-add-image")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("I"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("I")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-add-table")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("T"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("T")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-undo")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Z"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Z")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-redo")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Z"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Z")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-toggle-edit-list-mode")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("D"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("OPTION")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("D")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-toggle-graph-settings-menu")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("G"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("G")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-toggle-account-menu")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("A"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("A")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-toggle-help-menu")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("H"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("H")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-toggle-language-menu")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("L"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("L")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-toggle-share-menu")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("S"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("S"))))),t.createElement("h2",{class:t.const("dcg-hotkey-section-header")},function(){return e.controller.s("shared-calculator-heading-keyboard-shortcuts-expression-entry-and-navigation")}),t.createElement("table",null,t.createElement("tr",null,t.createElement("th",null,function(){return e.controller.s("shared-calculator-heading-function-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-windows")},function(){return e.controller.s("shared-calculator-heading-windows-chrome-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-mac")},t.const("Mac Shortcut"))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-previous-expression")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-next-expression")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-remove-empty-expression")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Backspace"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Delete")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-previous-character")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-next-character")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-move-to-numerator")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-move-to-denominator")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-exit-block")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-beginning-of-block")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Home"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-end-of-block")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("End"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-beginning-of-expression")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Home"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-end-of-expression")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("End"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-increase-selection-left")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-increase-selection-right")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-delete-selection")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Backspace"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Delete")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-select-all")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("A"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("A")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-parent-block")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Option")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-focused-block")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Option")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-left-adjacent-block")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Option")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-right-adjacent-block")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Option")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-selection")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Option")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-answer")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("="))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Option")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement(l,{predicate:function(){return e.controller.isDecimalToFractionEnabled()}},function(){return t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-show-answer-as-decimal-or-fraction")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("F"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("F"))))})),t.createElement("h2",{class:t.const("dcg-hotkey-section-header")},function(){return e.controller.s("shared-calculator-heading-keyboard-shortcuts-graphs-with-interactive-points")}),t.createElement("table",null,t.createElement("tr",null,t.createElement("th",null,function(){return e.controller.s("shared-calculator-heading-function-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-windows")},function(){return e.controller.s("shared-calculator-heading-windows-chrome-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-mac")},t.const("Mac Shortcut"))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-focus-first-interactive-point")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("P"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("P")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-next-interactive-point")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-previous-interactive-point")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-increase-x")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-decrease-x")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-increase-y")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-decrease-y")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-increase-x-larger")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-decrease-x-larger")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-increase-y-larger")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-decrease-y-larger")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-x")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("X"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("X")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-y")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Y"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Y")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-label")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("L"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("L")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-color")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("C"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("C"))))),t.createElement("h2",{class:t.const("dcg-hotkey-section-header")},function(){return e.controller.s("shared-calculator-heading-keyboard-shortcuts-braille")}),t.createElement("table",null,t.createElement("tr",null,t.createElement("th",null,function(){return e.controller.s("shared-calculator-heading-function-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-windows")},function(){return e.controller.s("shared-calculator-heading-windows-chrome-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-mac")},function(){return e.controller.s("shared-calculator-heading-mac-table-column-header")})),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-nemeth-mode")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("N"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("N")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-ueb-mode")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("U"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("U")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-print-mode")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Q"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Q")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-toggle-braille-typing")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("6"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("6")))))),t.createElement("div",{class:t.const("dcg-hotkey-section")},t.createElement("h2",{class:t.const("dcg-hotkey-section-header")},function(){return e.controller.s("shared-calculator-heading-keyboard-shortcuts-symbols")}),t.createElement("table",null,t.createElement("tr",null,t.createElement("th",null,function(){return e.controller.s("shared-calculator-heading-function-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-windows")},function(){return e.controller.s("shared-calculator-heading-windows-chrome-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-mac")},t.const("Mac Shortcut"))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("a^b")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("^")),function(){return"("+e.controller.s("shared-calculator-text-keyboard-shortcut-usually")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("6")),t.const(")")),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("^")),function(){return"("+e.controller.s("shared-calculator-text-keyboard-shortcut-usually")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("6")),t.const(")"))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("a_b")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("_")),function(){return"("+e.controller.s("shared-calculator-text-keyboard-shortcut-usually")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("-")),t.const(")")),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("_")),function(){return"("+e.controller.s("shared-calculator-text-keyboard-shortcut-usually")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("-")),t.const(")"))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\le")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("<")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("="))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("<")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("=")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\ge")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const(">")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("="))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const(">")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("=")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("a'")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("'"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("'")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\frac{a}{b}")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("f")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("a")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("c"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("f")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("a")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("c")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\sqrt{a}")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("s")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("q")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("s")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("q")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\sqrt[3]{a}")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("c")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("b")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("c")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("b")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\sqrt[n]{a}")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("n")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("h")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("o")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("o")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("n")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("h")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("o")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("o")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\sum_{n=a}^b")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("s")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("u")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("m"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("s")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("u")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("m")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\int_a^b")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("i")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("n")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("i")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("n")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\prod_{n=a}^b")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("p")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("o")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("d"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("p")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("r")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("o")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("d")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\pi")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("p")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("i"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("p")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("i")))),t.createElement("tr",null,t.createElement("td",null,t.createElement(o.default,{config:this.const({}),latex:this.const("\\theta")})),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("h")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("e")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("a"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("h")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("e")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("t")),t.createElement("span",{class:t.const("dcg-key-command")},t.const("a"))))),t.createElement("h2",{class:t.const("dcg-hotkey-section-header")},function(){return e.controller.s("shared-calculator-heading-keyboard-shortcuts-audio-tracing")}),t.createElement("table",null,t.createElement("tr",null,t.createElement("th",null,function(){return e.controller.s("shared-calculator-heading-function-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-windows")},function(){return e.controller.s("shared-calculator-heading-windows-chrome-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-mac")},t.const("Mac Shortcut"))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-toggle-audio-trace")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("T"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Option")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("T")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-summarize-graph")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("S"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Option")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("S")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-previous-point")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("J"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("J")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-next-point")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("L"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("L")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-previous-poi")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Page Up")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("K"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("K")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-next-poi")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Page Down")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("I"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("I")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-first-point")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Home")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("U"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("U")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-last-point")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("End")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("N"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("N")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-poi-count")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("P"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("P")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-x")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("X"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("X")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-y")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Y"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Y")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-color")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("C"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("C")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-branch")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("B"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("B")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-speak-point-type")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("T"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("T")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-move-to-origin")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("O"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("O")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-previous-curve")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-next-curve")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("COMMAND")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-hear-graph")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("H"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("H")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-hear-specific-branch")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("1")),t.const("-"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("0"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("1")),t.const("-"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("0")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-adjust-playback-speed")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("ALT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("1")),t.const("-"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("5"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Option")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("1")),t.const("-"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("5")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-increase-volume")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("V"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("V")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-decrease-volume")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("V"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("V")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-announce-slider-animations")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("A"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("A")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-toggle-slider-trace")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("S"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("S")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-trace-decrease")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("J"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("J")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-trace-decrease-larger")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Page Down"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-trace-increase")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("L"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("L")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-trace-increase-larger")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Page Up"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-trace-minimum")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Home")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("U"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("U")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-trace-maximum")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("End")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("N"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")),t.const("or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("N")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-trace-next-slider")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("K"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("K")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-trace-previous-slider")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("I"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")),t.const(","),t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")),t.const(", or"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("I"))))),t.createElement("h2",{class:t.const("dcg-hotkey-section-header")},function(){return e.controller.s("shared-calculator-heading-keyboard-shortcuts-sliders")}),t.createElement("table",null,t.createElement("tr",null,t.createElement("th",null,function(){return e.controller.s("shared-calculator-heading-function-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-windows")},function(){return e.controller.s("shared-calculator-heading-windows-chrome-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-mac")},t.const("Mac Shortcut"))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-decrease")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-decrease-larger")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Page Down"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-increase")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-increase-larger")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Page Up"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-minimum")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Home"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-slider-maximum")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("End"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Fn")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow"))))),t.createElement("h2",{class:t.const("dcg-hotkey-section-header tables-section")},function(){return e.controller.s("shared-calculator-heading-keyboard-shortcuts-tables")}),t.createElement("table",null,t.createElement("tr",null,t.createElement("th",null,function(){return e.controller.s("shared-calculator-heading-function-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-windows")},function(){return e.controller.s("shared-calculator-heading-windows-chrome-table-column-header")}),t.createElement("th",{class:t.const("dcg-os-mac")},t.const("Mac Shortcut"))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-previous-cell")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("SHIFT")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-next-cell")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Tab")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-previous-row")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-next-row")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-previous-column")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-next-column")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-first-row")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Up Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-last-row")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Down Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-first-column")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Left Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-last-column")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("Right Arrow")))),t.createElement("tr",null,t.createElement("td",null,function(){return e.controller.s("shared-calculator-text-keyboard-shortcut-table-speak-column-header")}),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-windows")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("H"))),t.createElement("td",{class:t.const("dcg-keyboard-shortcut dcg-os-mac")},t.createElement("span",{class:t.const("dcg-key-command")},t.const("CTRL")),t.const("+"),t.createElement("span",{class:t.const("dcg-key-command")},t.const("H")))))))))},m.prototype.getShortcutOS=function(){return this.controller.state.hotkeysDialog.shortcutOS},m.prototype.setShortcutOS=function(e){this.controller.state.hotkeysDialog.shortcutOS=e,this.unmounted||this.update()},m.prototype.didMount=function(){this.updateVisibleShortcuts()},m.prototype.didUnmount=function(){this.unmounted=!0},m.prototype.didUpdate=function(){this.updateVisibleShortcuts()},m.prototype.updateVisibleShortcuts=function(){var e=this.getShortcutOS(),c=a(".dcg-os-mac"),t=a(".dcg-os-windows");"mac"===e?(c.show(),t.hide()):"windows"===e&&(c.hide(),t.show())},m);function m(){return null!==r&&r.apply(this,arguments)||this}e.HotkeysDialog=d});
define('calculator-shell/unsupported-browser',["require","exports","tslib","dcgview","./modal"],function(require,e,t,o,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UnsupportedBrowserDialog=void 0;var r,l=(r=o.Class,t.__extends(c,r),c.prototype.init=function(){this.controller=this.props.controller()},c.prototype.template=function(){var e=this;return o.createElement(n.Modal,{controller:this.props.controller},o.createElement("div",{id:o.const("unsupported-browser")},o.createElement("div",{id:o.const("unsupported-browser-title"),style:o.const("color:black; font-size:150%;")},function(){return e.controller.s("account-shell-heading-unsupported-browser")}),o.createElement("div",{style:o.const("padding:20px 0px; color:#666")},function(){return e.controller.s("account-shell-text-unsupported-browser-android")},o.createElement("br",null),o.createElement("br",null),o.createElement("a",{href:o.const("https://play.google.com/store/apps/details?id=com.android.chrome")},function(){return e.controller.s("account-shell-link-download-chrome")},o.createElement("br",null),o.createElement("br",null)),o.createElement("div",{style:o.const("text-align: center; margin-top: 25px; margin-bottom:-16px")},o.createElement("a",{role:o.const("link"),tabindex:o.const("0"),class:o.const("dcg-btn dcg-action-hide dcg-do-not-blur"),onTap:function(){return e.controller.dispatch({type:"close-modal"})}},function(){return e.controller.s("account-shell-button-hide-browser-warning")})))))},c);function c(){return null!==r&&r.apply(this,arguments)||this}e.UnsupportedBrowserDialog=l});

define('loadcss!shared-components/shared-account-settings-modal', function(){});
define('shared-components/shared-delete-account',["require","exports","tslib","dcgview","shared/dcgviews/localize","./shared-account-modal-errors","loadcss!./shared-account-settings-modal","loadcss!shared-components/btn-styles"],function(require,e,t,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedDeleteAccount=void 0;var c,s=(c=n.Class,t.__extends(a,c),a.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.formErrors=[]},a.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-shared-delete-account dcg-shared-account-settings-section")},n.createElement("h1",{class:n.const("dcg-shared-left-align-title")},function(){return e.i18n.s("shared-title-delete-account")}),n.createElement("div",{class:n.const("dcg-shared-account-paragraph")},n.createElement(o.Localize,{key:this.const("shared-message-delete-account-notice"),i18n:this.props.controller},n.const("When you delete your account,"),n.const(" "),n.createElement("b",null,n.const("we will retain your data for 30 days.")),n.const(" "),n.const("You can reactivate your account at any time during those 30 days by logging back in."),n.const(" "),n.const("If there's something about Desmos we can improve, please"),n.const(" "),n.createElement("a",{href:n.const("mailto:support@desmos.com"),class:n.const("dcg-shared-blue-link")},n.const("let us know.")))),n.createElement("div",{class:n.const("dcg-shared-account-paragraph")},function(){return e.i18n.s("shared-message-delete-account-will-send-email",{email:e.i18n.raw(e.controller.userController.getEmail())})}),n.createElement("form",{onSubmit:this.bindFn(this.onSubmit)},n.createElement(r.SharedAccountModalErrors,{controller:this.props.controller,errors:function(){return e.formErrors}}),n.createElement("div",{class:n.const("dcg-shared-modal-actions-container")},n.createElement("div",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-shared-dark-gray-link"),onTap:function(){return e.controller.logJSON("shared-delete-account",{action:"cancel-delete-account"}),e.props.hideForm()}},function(){return e.i18n.s("shared-button-cancel")}),n.createElement("button",{class:function(){return{"dcg-shared-btn-red":!0,"dcg-disabled":e.disabled}},"aria-disabled":function(){return e.disabled},tabindex:function(){return e.disabled?"-1":"0"},type:n.const("submit")},function(){return e.i18n.s("shared-button-send-delete-account-email")}))))},a.prototype.onAccountDeleted=function(){return this.props.submitForm()},a.prototype.onAccountDeletionFailed=function(){if(this.formErrors=[this.controller.getSomethingWentWrongText()],!this.unmounted)return this.update()},a.prototype.doDeleteAccount=function(){this.disabled||(this.controller.logJSON("shared-delete-account",{action:"send-delete-account-email"}),this.controller.userController.initiateAccountDeletion({lang:this.controller.getLanguage()}).done(this.bindFn(this.onAccountDeleted)).fail(this.bindFn(this.onAccountDeletionFailed)))},a.prototype.didUnmount=function(){return this.unmounted=!0},a.prototype.onSubmit=function(e){e.preventDefault(),this.doDeleteAccount()},a);function a(){return null!==c&&c.apply(this,arguments)||this}e.SharedDeleteAccount=s});
define('shared-components/shared-email-settings',["require","exports","tslib","dcgview","./shared-account-modal-errors","loadcss!./shared-account-settings-modal","loadcss!shared-components/btn-styles"],function(require,e,t,n,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedEmailSettings=void 0;var r,i=n.Components.If,a=(r=n.Class,t.__extends(o,r),o.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.formStatus=0,this.emailDisabled=null},o.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-shared-email-field-container")},n.createElement(i,{predicate:function(){return 0===e.formStatus}},function(){return n.createElement("div",{class:n.const("dcg-shared-email-field")},n.createElement("div",{class:n.const("dcg-shared-profile-info-container")},n.createElement("span",{class:n.const("dcg-shared-profile-info-title"),role:n.const("heading"),"aria-level":n.const("1")},function(){return e.i18n.s("shared-title-email-settings")}),n.createElement("div",{class:n.const("dcg-shared-profile-info-content")},function(){return e.i18n.raw(e.controller.userController.getEmail())},n.createElement("div",{class:n.const("dcg-shared-message-container")},n.createElement("div",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-shared-blue-link"),onTap:function(){return e.setFormStatus(1)}},function(){return e.i18n.s("shared-button-change-email-address")})))))}),n.createElement(i,{predicate:function(){return 1===e.formStatus}},function(){return n.createElement("div",{class:n.const("dcg-shared-change-email-container")},n.createElement("div",{class:n.const("dcg-shared-change-email-description")},function(){return e.i18n.s("shared-message-email-settings-will-send-email",{emailAddress:e.i18n.raw(e.controller.userController.getEmail())})}),n.createElement(s.SharedAccountModalErrors,{controller:e.props.controller,errors:function(){return e.formErrors}}),n.createElement("div",{class:n.const("dcg-shared-modal-actions-container")},n.createElement("span",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-shared-dark-gray-link"),onTap:function(){return e.setFormStatus(0)}},function(){return e.i18n.s("shared-button-cancel")}),n.createElement("button",{class:function(){return{"dcg-shared-btn-blue":!0,"dcg-disabled":e.emailDisabled}},"aria-disabled":function(){return e.disabled},tabindex:function(){return e.disabled?"-1":"0"},type:n.const("submit"),onTap:function(){return e.emailDisabled||e.sendChangeEmail()}},function(){return e.i18n.s("shared-button-send-email")})))}),n.createElement(i,{predicate:function(){return 3===e.formStatus}},function(){return n.createElement("div",{"aria-live":n.const("assertive"),"aria-atomic":n.const("true"),class:n.const("dcg-shared-confirmation-message-container")},n.createElement("div",{class:n.const("dcg-shared-confirmation-message")},n.createElement("i",{class:function(){return{"dcg-shared-icon-check":!0,"dcg-success-marker":!0}},"aria-hidden":n.const("true")}),function(){return e.i18n.s("shared-message-email-sent")}),n.createElement("div",null,function(){return e.i18n.s("shared-message-check-email-for-link",{emailAddress:e.i18n.raw(e.controller.userController.getEmail())})}))}))},o.prototype.didUnmount=function(){this.unmounted=!0},o.prototype.setToast=function(e){var t=this;this.toastMessage||(this.toastMessage=e,this.unmounted||this.update(),setTimeout(function(){t.toastMessage=null,t.unmounted||t.update()},5e3),2===this.formStatus&&setTimeout(function(){t.setFormStatus(0),t.unmounted||t.update()},5200))},o.prototype.setFormStatus=function(e){this.formStatus=e,this.toastMessage=null,this.formErrors=[],this.update()},o.prototype.onEmailSent=function(){var e=this;this.formStatus=3,this.emailDisabled=null,this.unmounted||this.update(),setTimeout(function(){e.formStatus=0,e.unmounted||e.update()},5e3),setTimeout(function(){e.formStatus=0,e.unmounted||e.update()},5200)},o.prototype.onEmailSendingFailed=function(){this.formErrors=[this.controller.getSomethingWentWrongText()],this.emailDisabled=null,this.unmounted||this.update()},o.prototype.sendChangeEmail=function(){this.emailDisabled=!0,this.unmounted||this.update(),this.controller.userController.initiateEmailChange({lang:this.controller.getLanguage()}).done(this.bindFn(this.onEmailSent)).fail(this.bindFn(this.onEmailSendingFailed))},o);function o(){return null!==r&&r.apply(this,arguments)||this}e.SharedEmailSettings=a});

define('loadcss!shared-components/shared-profile-info', function(){});
define('shared-components/shared-profile-info',["require","exports","tslib","dcgview","./shared-delete-account","./shared-email-settings","loadcss!./shared-profile-info"],function(require,e,t,n,o,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedProfileInfo=void 0;var i,s=n.Components,a=s.If,c=s.Input,l=s.Switch,d=(i=n.Class,t.__extends(u,i),u.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.deleteAccount=0},u.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-shared-profile-info dcg-shared-account-settings-section")},n.createElement(l,{key:function(){return t.deleteAccount}},function(e){switch(e){case 0:return n.createElement("div",null,n.createElement("div",{class:n.const("dcg-shared-email-form-container")},n.createElement("div",{class:n.const("dcg-shared-name-field")},n.createElement("div",{class:n.const("dcg-shared-profile-info-container")},n.createElement("span",{class:n.const("dcg-shared-profile-info-title"),role:n.const("heading"),"aria-level":n.const("1")},function(){return t.i18n.s("shared-label-name")}),n.createElement(c,{type:n.const("text"),name:n.const("name"),class:n.const("dcg-shared-input-blue-outline dcg-shared-profile-info-content"),didMount:t.bindFn(t.didMountName),onInput:t.bindFn(t.onNameInput),"aria-label":function(){return t.i18n.s("shared-label-name")},value:function(){return t.name},autocomplete:n.const("off")})),n.createElement("div",{class:n.const("dcg-shared-modal-actions-container")},n.createElement(a,{predicate:function(){return t.showSavedNotice}},function(){return n.createElement("span",{"aria-live":n.const("assertive"),"aria-atomic":n.const("true"),class:n.const("dcg-shared-confirmation-message")},n.createElement("i",{class:function(){return{"dcg-shared-icon-check":!0,"dcg-success-marker":!0}},"aria-hidden":n.const("true")}),function(){return t.i18n.s("shared-message-information-saved")})}),n.createElement("div",{role:n.const("button"),"aria-disabled":t.bindFn(t.nameFieldDisabled),tabindex:function(){return t.nameFieldDisabled()?"-1":"0"},class:function(){return{"dcg-shared-btn-blue":!0,"dcg-disabled":t.nameFieldDisabled()}},onTap:t.bindFn(t.onSaveName)},function(){return t.i18n.s("shared-button-save")})))),n.createElement(r.SharedEmailSettings,{controller:t.props.controller}),n.createElement("div",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-shared-dark-gray-link dcg-shared-delete-link"),onTap:function(){return t.confirmDeletion()}},function(){return t.i18n.s("shared-button-delete-account-question")}));case 1:return n.createElement(o.SharedDeleteAccount,{hideForm:function(){return t.setDeleteAccount(0)},submitForm:function(){return t.setDeleteAccount(2)},controller:t.props.controller});case 2:return n.createElement("div",{"aria-live":n.const("assertive"),"aria-atomic":n.const("true"),class:n.const("dcg-shared-confirmation-message-container")},n.createElement("div",{class:n.const("dcg-shared-confirmation-message")},n.createElement("i",{class:function(){return{"dcg-shared-icon-check":!0,"dcg-success-marker":!0}},"aria-hidden":n.const("true")}),function(){return t.i18n.s("shared-message-email-sent")}),n.createElement("div",null,function(){return t.i18n.s("shared-message-check-email-for-delete-link",{emailAddress:t.i18n.raw(t.controller.userController.getEmail())})}))}}))},u.prototype.didUnmount=function(){this.unmounted=!0},u.prototype.onSaveName=function(){this.nameFieldDisabled()||this.controller.userController.setName({name:this.name,lang:this.controller.getLanguage()}).done(this.bindFn(this.onSaved))},u.prototype.nameFieldDisabled=function(){return!this.name||this.name===this.previousName},u.prototype.onNameInput=function(e){this.name=e,this.unmounted||this.update()},u.prototype.didMountName=function(){this.name=this.controller.userController.getFullName(),this.previousName=this.name;var e=this.previousName;this.onNameInput(e)},u.prototype.onSaved=function(){var e=this;this.showSavedNotice=!0,this.previousName=this.name,this.unmounted||this.update(),setTimeout(function(){e.showSavedNotice=!1,e.unmounted||e.update()},3e3)},u.prototype.setDeleteAccount=function(e){var t=this;2===(this.deleteAccount=e)&&setTimeout(function(){t.controller.userController.logout().done(function(){return t.controller.dispatch({type:"close-modal"})})},5e3),this.unmounted||this.update()},u.prototype.confirmDeletion=function(){this.controller.logJSON("shared-profile-info",{action:"delete-account"}),this.setDeleteAccount(1),this.unmounted||this.update()},u);function u(){return null!==i&&i.apply(this,arguments)||this}e.SharedProfileInfo=d});
define('shared-components/shared-change-password',["require","exports","tslib","dcgview","./shared-account-modal-errors","loadcss!./shared-account-settings-modal","loadcss!shared-components/btn-styles"],function(require,e,t,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedChangePassword=void 0;var s,o=n.Components.If,a=(s=n.Class,t.__extends(i,s),i.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.mode=1,this.formErrors=[]},i.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-shared-change-password dcg-shared-account-settings-section")},n.createElement(o,{predicate:function(){return 1===e.mode}},function(){return n.createElement("div",{class:n.const("dcg-shared-reset-by-email")},n.createElement("div",{class:n.const("dcg-shared-account-paragraph")},function(){return e.i18n.s("shared-message-change-password-email-sent",{emailAddress:e.i18n.raw(e.controller.userController.getEmail())})}),n.createElement(r.SharedAccountModalErrors,{controller:e.props.controller,errors:function(){return e.formErrors}}),n.createElement("div",{class:n.const("dcg-shared-modal-actions-container")},n.createElement("div",{role:n.const("button"),"aria-disabled":function(){return e.emailDisabled},tabindex:function(){return e.emailDisabled?"-1":"0"},class:function(){return{"dcg-shared-btn-blue":!0,"dcg-disabled":e.emailDisabled}},onTap:function(){return e.sendResetPasswordEmail()}},function(){return e.i18n.s("shared-button-send-email")})))}),n.createElement(o,{predicate:function(){return 2===e.mode}},function(){return n.createElement("div",{"aria-live":n.const("assertive"),"aria-atomic":n.const("true"),class:n.const("dcg-shared-confirmation-message-container")},n.createElement("div",{class:n.const("dcg-shared-confirmation-message")},n.createElement("i",{class:function(){return{"dcg-shared-icon-check":!0,"dcg-success-marker":!0}},"aria-hidden":n.const("true")}),function(){return e.i18n.s("shared-message-email-sent")}),n.createElement("div",null,function(){return e.i18n.s("shared-message-check-email-for-password-link",{emailAddress:e.i18n.raw(e.controller.userController.getEmail())})}))}))},i.prototype.didUnmount=function(){this.unmounted=!0},i.prototype.onEmailSent=function(){var e=this;this.mode=2,this.unmounted||this.update(),setTimeout(function(){e.mode=0,e.unmounted||e.update()},5e3),setTimeout(function(){e.mode=1,e.unmounted||e.update()},5200)},i.prototype.onEmailSendingFailed=function(){this.formErrors=[this.controller.getSomethingWentWrongText()],this.unmounted||this.update()},i.prototype.sendResetPasswordEmail=function(){this.controller.userController.recoverPassword({email:this.controller.userController.getEmail(),lang:this.controller.getLanguage()}).done(this.bindFn(this.onEmailSent)).fail(this.bindFn(this.onEmailSendingFailed))},i);function i(){return null!==s&&s.apply(this,arguments)||this}e.SharedChangePassword=a});
define('shared-components/shared-account-settings-modal',["require","exports","tslib","dcgview","shared-components/modal","./shared-profile-info","./shared-change-password","jquery","underscore","loadcss!./shared-account-settings-modal","loadcss!shared-components/btn-styles"],function(require,t,e,n,i,o,s,r,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedAccountSettingsModal=void 0;var a,c=n.Components.Switch,l=(a=n.Class,e.__extends(u,a),u.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.settingsView=0,this.breakPoint=660,this.measureWindow()},u.prototype.template=function(){var e=this;return n.createElement(i.Modal,{title:function(){return e.i18n.s("shared-title-account-settings")},size:this.const("wide"),showX:this.const(!0),leftAlignTitle:this.const(!0),onClose:function(){return e.controller.dispatch({type:"close-modal"})},i18n:this.props.controller},n.createElement("div",{class:n.const("dcg-shared-account-settings-dialog dcg-shared-account-dialog")},n.createElement("div",{class:n.const("dcg-shared-navigation-tabs"),role:n.const("tablist")},n.createElement("div",{role:n.const("tab"),tabindex:n.const("0"),"aria-selected":this.bindFn(this.isProfileSelected),didMount:function(t){e.controller.wasModalOpenedWithKeyboard()&&e.isProfileSelected()&&t.focus()},class:function(){return{"dcg-shared-tab-gray-underline":!0,"profile-view-button":!0,"dcg-selected":e.isProfileSelected()}},onTap:function(){return e.updateSettingsView(0)}},this.bindFn(this.profileTitle)),n.createElement("div",{role:n.const("tab"),tabindex:n.const("0"),"aria-selected":this.bindFn(this.isChangePasswordSelected),didMount:function(t){e.controller.wasModalOpenedWithKeyboard()&&e.isChangePasswordSelected()&&t.focus()},class:function(){return{"dcg-shared-tab-gray-underline":!0,"dcg-selected":e.isChangePasswordSelected()}},onTap:function(){return e.updateSettingsView(1)}},this.bindFn(this.passwordTitle))),n.createElement("div",{class:n.const("dcg-shared-content-container")},n.createElement(c,{key:function(){return e.settingsView}},function(t){return 0===t?n.createElement(o.SharedProfileInfo,{controller:e.props.controller}):1===t?n.createElement(s.SharedChangePassword,{controller:e.props.controller}):n.createElement("span",null)}))))},u.prototype.updateSettingsView=function(t){this.settingsView=t,this.unmounted||this.update()},u.prototype.profileTitle=function(){return this.windowWidth>this.breakPoint?this.i18n.s("shared-title-profile-information-wide"):this.i18n.s("shared-title-profile-information-narrow")},u.prototype.passwordTitle=function(){return this.windowWidth>this.breakPoint?this.i18n.s("shared-title-change-password-wide"):this.i18n.s("shared-title-change-password-narrow")},u.prototype.measureWindow=function(){return this.windowWidth=r(window).width()},u.prototype.didMount=function(){var t=this;r(window).on("resize.account-dialog",d.throttle(function(){t.measureWindow(),t.unmounted||t.update()},200))},u.prototype.didUnmount=function(){r(window).off("resize.account-dialog"),this.unmounted=!0},u.prototype.isProfileSelected=function(){return 0===this.settingsView},u.prototype.isChangePasswordSelected=function(){return 1===this.settingsView},u);function u(){return null!==a&&a.apply(this,arguments)||this}t.SharedAccountSettingsModal=l});
define('shared-components/shared-change-email-modal',["require","exports","tslib","dcgview","shared-components/modal","./shared-account-modal-errors","loadcss!./shared-account-modal"],function(require,e,t,n,r,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedChangeEmailModal=void 0;var s,a=n.Components.Input,i=(s=n.Class,t.__extends(l,s),l.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.formErrors=[]},l.prototype.template=function(){var t=this;return n.createElement(r.Modal,{title:function(){return t.i18n.s("shared-title-change-email-address")},size:this.const("narrow"),showX:this.const(!0),onClose:function(){return t.controller.dispatch({type:"close-modal"})},i18n:this.props.controller},n.createElement("div",{class:n.const("dcg-shared-change-email dcg-shared-account-dialog")},n.createElement("div",{class:n.const("dcg-shared-account-paragraph")},function(){return t.i18n.s("shared-message-set-new-email-address")}),n.createElement("form",{onSubmit:this.bindFn(this.onSubmit),method:n.const("post"),class:n.const("dcg-shared-email-form-container")},n.createElement("label",null,n.createElement("span",{class:n.const("dcg-shared-input-title")},function(){return t.i18n.s("shared-label-new-email-address")}),n.createElement(a,{type:n.const("email"),name:n.const("newEmail"),class:n.const("dcg-shared-input-blue-outline"),"aria-label":function(){return t.i18n.s("shared-label-new-email-address")},"aria-required":n.const("true"),required:n.const("required"),didMount:function(e){t.controller.wasModalOpenedWithKeyboard()&&e.focus()},value:function(){return t.newEmail},onInput:function(e){t.newEmail=e,t.unmounted||t.update()}})),n.createElement("label",{for:n.const("password")},n.createElement("span",null,function(){return t.i18n.s("shared-label-password")}),n.createElement(a,{type:n.const("password"),class:n.const("dcg-shared-input-blue-outline"),"aria-label":function(){return t.i18n.s("shared-label-password")},"aria-required":n.const("true"),required:n.const("required"),value:function(){return t.password},name:this.const("password"),onInput:function(e){if(t.password=e,!t.unmounted)return t.update()}})),n.createElement(o.SharedAccountModalErrors,{controller:this.props.controller,errors:function(){return t.formErrors}}),n.createElement("div",{class:n.const("dcg-shared-sign-in-options")},n.createElement("button",{class:function(){return{"dcg-shared-btn-blue":!0,"dcg-disabled":!t.submitEnabled()}},"aria-disabled":function(){return!t.submitEnabled()},tabindex:function(){return t.submitEnabled()?"0":"-1"},type:n.const("submit")},function(){return t.i18n.s("shared-button-change-email-and-password")})))))},l.prototype.submitEnabled=function(){return!(!this.password||!this.newEmail)},l.prototype.didUnmount=function(){this.unmounted=!0},l.prototype.onSubmit=function(e){var t=this;e.preventDefault(),this.submitEnabled()&&this.controller.userController.setEmail({changeToken:this.getChangeToken(),password:this.password,newEmail:this.newEmail,lang:this.controller.getLanguage()}).done(function(){t.controller.dispatch({type:"close-modal"}),history.replaceState(null,null,document.location.pathname)}).fail(function(e){409===e.status?t.formErrors=["Sorry, someone has already registered with this email address."]:t.formErrors=[t.controller.getSomethingWentWrongText()],t.unmounted||t.update()})},l.prototype.getChangeToken=function(){return this.controller.userController.getEmailChangeToken()||""},l);function l(){return null!==s&&s.apply(this,arguments)||this}e.SharedChangeEmailModal=i});
define('lib/data-uri-to-blob',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){for(var t=e.split(","),n=t[0].match(/:(.*?);/),r=null!==n?n[1]:"",l=null!==t[1]?atob(t[1]):"",u=l.length,o=new Uint8Array(u);u--;)o[u]=l.charCodeAt(u);return new Blob([o],{type:r})}});
define('lib/svg-string-to-blob',["require","exports"],function(require,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(e){if(-1===e.indexOf("xmlns="))throw new Error('Programming error: <svg> elements require the "xmlns" attribute to render properly');return new Blob([e],{type:"image/xml+svg;charset=utf-8"})}});

define('loadcss!calculator-shell/export-image-size-options', function(){});
define('calculator-shell/export-image-size-options',["require","exports","tslib","dcgview","jquery","./export-image-dialog","loadcss!./export-image-size-options"],function(require,e,t,n,o,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i,c=n.Components.If,r=(i=n.Class,t.__extends(l,i),l.prototype.template=function(){var e=this;return n.createElement("div",{role:n.const("button"),tabindex:n.const("0"),"aria-pressed":function(){return e.isSelected()},class:function(){return{"dcg-option":!0,"dcg-selected":e.isSelected()}},onTap:function(){return e.selectSize()}},function(){return s.sizes[e.props.size()].name(e.props.controller())})},l.prototype.isSelected=function(){this.props.selectedSize(),this.props.size()},l.prototype.selectSize=function(){this.props.onSelectSize(this.props.size())},l);function l(){return null!==i&&i.apply(this,arguments)||this}var p,u=(p=n.Class,t.__extends(a,p),a.prototype.init=function(){this.menuOpen=!1,this.unmounted=!1},a.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-export-image-size-options")},n.createElement("div",{role:n.const("button"),tabindex:n.const("0"),"aria-haspopup":n.const("true"),"aria-expanded":function(){return t.menuOpen},class:n.const("dcg-selected-option"),didMount:function(e){t.menuElement=e,"keyboard"===t.props.controller().getModalDevice()&&setTimeout(function(){t.menuElement.focus()},0)},onTap:this.bindFn(this.toggleMenu)},function(){return t.selected().name(t.props.controller())},n.createElement("i",{class:n.const("dcg-icon-caret-down")})),n.createElement(c,{predicate:function(){return t.menuOpen}},function(){return n.createElement("div",{class:n.const("dcg-options-positioning-container")},n.createElement("div",{class:n.const("dcg-options-container"),role:n.const("group"),"aria-label":function(){return t.props.controller().s("account-shell-narration-size-options")}},n.createElement(r,{controller:t.props.controller,size:t.const("small_square"),selectedSize:t.props.selectedSize,onSelectSize:t.bindFn(t.selectSize)}),n.createElement(r,{controller:t.props.controller,size:t.const("medium_square"),selectedSize:t.props.selectedSize,onSelectSize:t.bindFn(t.selectSize)}),n.createElement(r,{controller:t.props.controller,size:t.const("large_square"),selectedSize:t.props.selectedSize,onSelectSize:t.bindFn(t.selectSize)}),n.createElement(r,{controller:t.props.controller,size:t.const("medium_rectangle"),selectedSize:t.props.selectedSize,onSelectSize:t.bindFn(t.selectSize)}),n.createElement(r,{controller:t.props.controller,size:t.const("large_rectangle"),selectedSize:t.props.selectedSize,onSelectSize:t.bindFn(t.selectSize)}),n.createElement("h3",{class:n.const("dcg-embosser-title")},function(){return t.props.controller().s("account-shell-heading-embossers")}),n.createElement(r,{controller:t.props.controller,size:t.const("vpmax8"),selectedSize:t.props.selectedSize,onSelectSize:t.bindFn(t.selectSize)}),n.createElement(r,{controller:t.props.controller,size:t.const("vpmax11"),selectedSize:t.props.selectedSize,onSelectSize:t.bindFn(t.selectSize)}),n.createElement(r,{controller:t.props.controller,size:t.const("etc8"),selectedSize:t.props.selectedSize,onSelectSize:t.bindFn(t.selectSize)}),n.createElement(r,{controller:t.props.controller,size:t.const("etc11"),selectedSize:t.props.selectedSize,onSelectSize:t.bindFn(t.selectSize)})))}))},a.prototype.closeMenu=function(){o(document).off(".export-image-size-options"),this.menuOpen=!1,this.unmounted||this.update()},a.prototype.didUnmount=function(){o(document).off(".export-image-size-options"),this.unmounted=!0},a.prototype.toggleMenu=function(){var t=this;this.menuOpen?this.closeMenu():(this.menuOpen=!0,o(document).on("dcg-tap.export-image-size-options",function(e){o(e.target).closest(".dcg-export-image-size-options").length||t.closeMenu()}),this.unmounted||this.update())},a.prototype.selectSize=function(e){this.menuOpen=!1,this.props.selectSize(e),void 0!==this.menuElement&&"keyboard"===this.props.controller().getModalDevice()&&this.menuElement.focus()},a.prototype.selected=function(){return s.sizes[this.props.selectedSize()]},a);function a(){return null!==p&&p.apply(this,arguments)||this}e.default=u});

define('loadcss!calculator-shell/export-image-dialog', function(){});
define('calculator-shell/export-image-dialog',["require","exports","api/calculator","config","tslib","dcgview","jquery","lib/data-uri-to-blob","lib/svg-string-to-blob","dcgview-helpers/download-button","./export-image-size-options","lib/export-braille-equations","graphing/braille-size-options","./modal","shared/dcgviews/localize","browser","loadcss!./export-image-dialog"],function(require,t,n,r,c,e,o,l,a,i,s,u,d,h,g,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sizes=void 0;var m=e.Components,f=m.If,b=m.IfElse;t.sizes={};var v={left:0,top:0,right:0,bottom:0};t.sizes.small_square={width:160,height:160,margins:v,name:function(t){return t.s("account-shell-label-export-size-small-square")}},t.sizes.medium_square={width:400,height:400,margins:v,name:function(t){return t.s("account-shell-label-export-size-medium-square")}},t.sizes.large_square={width:1e3,height:1e3,margins:v,name:function(t){return t.s("account-shell-label-export-size-large-square")}},t.sizes.medium_rectangle={width:600,height:400,margins:v,name:function(t){return t.s("account-shell-label-export-size-medium-rectangle")}},t.sizes.large_rectangle={width:1200,height:800,margins:v,name:function(t){return t.s("account-shell-label-export-size-large-rectangle")}},t.sizes=c.__assign(c.__assign({},t.sizes),d.brailleSizes);var w,E=(w=e.Class,c.__extends(y,w),y.prototype.init=function(){this.controller=this.props.controller(),this.thickness="thin",this.size="medium_square";var t=this.controller.api.controller.getBrailleMode();this.brailleMode="none"!==t?t:"nemeth",this.showDownloadButton=i.canDownload(),this.unmounted=!1,this.svgDropdownOpen=!1,this.markImagesDirty(),this.loaded=!1},y.prototype.template=function(){var t=this;return e.createElement(h.Modal,{controller:this.props.controller},e.createElement("div",{id:e.const("export-image-dialog")},e.createElement("h1",null,function(){return t.controller.s("account-shell-heading-export-graph")}),e.createElement("div",{class:e.const("dcg-offscreen-calculator"),didMount:this.bindFn(this.didMountOffscreenCalc),willUnmount:this.bindFn(this.willUnmountOffscreenCalc),"aria-hidden":e.const("true")}),e.createElement("div",{class:e.const("dcg-columns")},e.createElement("div",{class:e.const("dcg-left-column")},e.createElement("div",{class:function(){return{"dcg-graph-preview":!0,"dcg-preview-loading":t.pngDirty}}},e.createElement(f,{predicate:function(){return t.loaded}},function(){return e.createElement("img",{class:e.const("dcg-graph-image"),didMount:t.bindFn(t.didMountGraphPreview),src:function(){return t.previewDataURL},alt:function(){return t.controller.s("account-shell-narration-graph-preview")}})}),e.createElement(f,{predicate:function(){return t.pngDirty}},function(){return e.createElement("span",{class:e.const("dcg-loading-message")},e.createElement("span",{class:e.const("dcg-spinner")}),function(){return t.controller.s("account-shell-label-loading")})}),e.createElement(f,{predicate:function(){return!t.pngDirty&&!t.isExportingBraille()}},function(){return e.createElement("span",{class:e.const("dcg-zoom-percentage")},t.bindFn(t.getZoom))}))),e.createElement("div",{class:e.const("dcg-right-column")},e.createElement("div",{role:e.const("heading"),"aria-level":e.const("2"),class:e.const("dcg-section-title")},function(){return t.controller.s("account-shell-heading-export-size")}),e.createElement(s.default,{controller:this.props.controller,selectedSize:function(){return t.size},selectSize:this.bindFn(this.selectSize)}),e.createElement(f,{predicate:function(){return!t.isExportingBraille()}},function(){return e.createElement("div",null,e.createElement("div",{role:e.const("heading"),"aria-level":e.const("2"),class:e.const("dcg-section-title")},function(){return t.controller.s("account-shell-heading-line-thickness")}),e.createElement("div",{role:e.const("group"),"aria-label":function(){return t.controller.s("account-shell-heading-line-thickness")},class:e.const("dcg-button-group")},e.createElement("div",{role:e.const("button"),tabindex:e.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"thin"===t.thickness}},"aria-pressed":function(){return"thin"===t.thickness},onTap:function(){return t.selectThickness("thin")}},function(){return t.controller.s("account-shell-button-line-thin")}),e.createElement("div",{role:e.const("button"),tabindex:e.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"medium"===t.thickness}},"aria-pressed":function(){return"medium"===t.thickness},onTap:function(){return t.selectThickness("medium")}},function(){return t.controller.s("account-shell-button-line-medium")}),e.createElement("div",{role:e.const("button"),tabindex:e.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"thick"===t.thickness}},"aria-pressed":function(){return"thick"===t.thickness},onTap:function(){return t.selectThickness("thick")}},function(){return t.controller.s("account-shell-button-line-thick")})))}),e.createElement(f,{predicate:function(){return t.isExportingBraille()}},function(){return e.createElement("div",{class:e.const("braille-container")},e.createElement("div",{role:e.const("heading"),"aria-level":e.const("2"),class:e.const("dcg-section-title")},function(){return t.controller.s("account-shell-heading-braille-mode")}),e.createElement("div",{role:e.const("group"),"aria-label":function(){return t.controller.s("account-shell-heading-braille-mode")},class:e.const("dcg-button-group")},e.createElement("div",{role:e.const("button"),tabindex:e.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"nemeth"===t.brailleMode}},"aria-pressed":function(){return"nemeth"===t.brailleMode},onTap:function(){return t.selectBrailleMode("nemeth")}},function(){return t.controller.s("account-shell-button-braille-nemeth")}),e.createElement("div",{role:e.const("button"),tabindex:e.const("0"),class:function(){return{"dcg-button":!0,"dcg-selected":"ueb"===t.brailleMode}},"aria-pressed":function(){return"ueb"===t.brailleMode},onTap:function(){return t.selectBrailleMode("ueb")}},function(){return t.controller.s("account-shell-button-braille-ueb")})),e.createElement("div",{class:e.const("braille-instructions")},e.createElement("div",{role:e.const("heading"),"aria-level":e.const("2"),class:e.const("dcg-section-title")},function(){return t.controller.s("account-shell-heading-embossing-instructions")}),e.createElement(f,{predicate:function(){return"vpmax8"===t.size||"vpmax11"===t.size}},function(){return e.createElement("ul",null,e.createElement("li",null,function(){return t.controller.s("account-shell-text-embossing-vpmax-save")}),e.createElement("li",null,function(){return t.controller.s("account-shell-text-embossing-vpmax-print",{size:x(t.size)})}))}),e.createElement(f,{predicate:function(){return"etc8"===t.size||"etc11"===t.size}},function(){return e.createElement("ul",null,e.createElement("li",null,function(){return t.controller.s("account-shell-text-embossing-etc-save")}),e.createElement("li",null,function(){return t.controller.s("account-shell-text-embossing-etc-print",{size:x(t.size)})}))}),e.createElement("div",{class:e.const("dcg-feedback-link")},e.createElement(g.Localize,{i18n:t.const(t.controller),key:t.const("graphing-calculator-text-export-braille-email-accessibility")},e.const("Feedback? Email"),e.const(" "),e.createElement("a",{class:e.const("blue-link"),href:e.const("mailto:accessibility@desmos.com")},e.const("accessibility@desmos.com")),e.const(".")))))}),b(this.const(this.showDownloadButton),{true:function(){return e.createElement("div",null,e.createElement("div",{role:e.const("group"),"aria-label":function(){return t.controller.s("account-shell-narration-image-download")},class:function(){return{"dcg-download-button-group":!0,"dcg-download-button-group-singleton":t.isExportingBraille()}}},e.createElement(i.default,{data:function(){return t.previewBlob},enabled:function(){return!t.pngDirty},filename:t.const("desmos-graph.png"),text:function(){return t.controller.s("account-shell-button-download-png")}}),e.createElement(f,{predicate:function(){return!t.isExportingBraille()}},function(){return e.createElement("div",{role:e.const("button"),tabindex:function(){return t.svgDirty?-1:0},"aria-disabled":function(){return t.svgDirty},"aria-expanded":function(){return t.svgDropdownOpen},"aria-label":function(){return t.controller.s("account-shell-button-svg-options")},class:function(){return{"dcg-svg-dropdown":!0,"dcg-button":!0,"dcg-disabled":t.svgDirty}},onTap:t.bindFn(t.toggleSvgDropdown)},e.createElement("i",{class:e.const("dcg-icon-caret-down")}))})),e.createElement(f,{predicate:function(){return t.isExportingBraille()&&!p.IS_MOBILE}},function(){return e.createElement(i.default,{data:function(){return t.brailleBlob},enabled:function(){return!t.pngDirty},filename:t.const("desmos-equations.brl"),text:function(){return t.controller.s("account-shell-button-download-braille")},isBraille:t.const(!0)})}),e.createElement(f,{predicate:function(){return t.svgDropdownOpen}},function(){return e.createElement("div",{class:e.const("dcg-svg-popover dcg-popover dcg-top"),didMount:t.bindFn(t.didMountSvgDropdown),willUnmount:t.bindFn(t.willUnmountSvgDropdown)},e.createElement("div",{class:e.const("dcg-popover-interior")},e.createElement(i.default,{data:function(){return t.svgBlob},enabled:function(){return!t.svgDirty},filename:t.const("desmos-graph.svg"),text:function(){return t.controller.s("account-shell-button-download-svg")},isSvg:t.const(!0)}),e.createElement("div",{class:e.const("dcg-beta-tag")},function(){return t.controller.s("account-shell-label-beta")})),e.createElement("div",{class:e.const("dcg-arrow")}))}))},false:function(){return e.createElement(f,{predicate:function(){return!t.isExportingBraille()}},function(){return e.createElement("div",{class:e.const("dcg-download-not-enabled-notice")},e.createElement("div",{role:e.const("heading"),"aria-level":e.const("2"),class:e.const("dcg-title")},function(){return t.controller.s("account-shell-heading-download-instructions")}),function(){return t.controller.s("account-shell-text-download-instructions")})})}})))))},y.prototype.didMountSvgDropdown=function(i){var r=this;o(document).on("dcg-tap.svg-dropdown",function(t){var e=t.target,n=o(".dcg-svg-dropdown")[0];i&&n&&(n.contains(e)||i.contains(e)||r.closeSvgDropdown())})},y.prototype.willUnmountSvgDropdown=function(){o(document).off(".svg-dropdown")},y.prototype.didMountOffscreenCalc=function(t){var e=this;this.calculator=new n.Calculator(t,{expressions:!1,keypad:!1,branding:!1,border:!1,enableTabindex:!1}),this.calculator._calc.evaluator.notifyWhenSynced(function(){e.markImagesDirty(),e.updateIfMounted()}),this.calculator.setState(this.controller.api.getState())},y.prototype.willUnmountOffscreenCalc=function(){this.calculator&&this.calculator.destroy()},y.prototype.markImagesDirty=function(){this.pngDirty=!0,this.svgDirty=!0},y.prototype.selectSize=function(t){this.size=t,this.markImagesDirty(),this.updateIfMounted()},y.prototype.selectBrailleMode=function(t){this.brailleMode=t,this.markImagesDirty(),this.updateIfMounted()},y.prototype.getZoom=function(){return this.controller.s("account-shell-label-zoom",{value:Math.min(100,Math.round(4e4/this.getWidth()))})},y.prototype.selectThickness=function(t){this.thickness=t,this.markImagesDirty(),this.updateIfMounted()},y.prototype.didMountGraphPreview=function(t){this.previewImg=t},y.prototype.getGridOpacity=function(){switch(this.thickness){case"thick":return 1;case"medium":return.6;case"thin":return.4;default:return this.thickness}},y.prototype.getAxisWeight=function(){switch(this.thickness){case"thick":case"medium":return 2;case"thin":return 1.5;default:return this.thickness}},y.prototype.getGraphThickness=function(){switch(this.thickness){case"thick":return 5;case"medium":return 3.5;case"thin":return 2.5;default:return this.thickness}},y.prototype.getLabelSize=function(){if("small_square"===this.size)switch(this.thickness){case"thick":return 14;case"medium":return 12;case"thin":return 10;default:return this.thickness}else switch(this.thickness){case"thick":return 20;case"medium":return 17;case"thin":return 14;default:return this.thickness}},y.prototype.updateViewSettings=function(){var t;void 0!==this.calculator&&void 0!==this.calculator._calc&&void 0!==this.calculator._calc.grapher&&void 0!==this.calculator._calc.grapher.settings&&(t=this.calculator._calc.grapher.settings,this.isExportingBraille()||(t.majorAxisOpacity=this.getGridOpacity(),t.minorAxisOpacity=this.getGridOpacity()/2,t.axisLineOffset=0,t.setProperty("axisLineWidth",this.getAxisWeight()),t.labelSize=this.getLabelSize(),t.graphLineWidth=this.getGraphThickness(),t.pointLineWidth=3*this.getGraphThickness()))},y.prototype.getBackgroundSize=function(){switch(this.size){case"medium_rectangle":case"large_rectangle":return"contain";case"small_square":return t.sizes.small_square.width+"px "+t.sizes.small_square.height+"px";default:return"cover"}},y.prototype.getHeight=function(){return t.sizes[this.size].height},y.prototype.getWidth=function(){return t.sizes[this.size].width},y.prototype.didUnmount=function(){this.unmounted=!0},y.prototype.updateIfMounted=function(){this.unmounted||this.update()},y.prototype.updateGraphPreview=function(){var t,e,n,i,o,s=this;(this.pngDirty||this.svgDirty)&&void 0!==this.calculator&&void 0!==this.calculator._calc&&void 0!==this.calculator._calc.grapher&&void 0!==this.calculator._calc.grapher.settings&&(this.updateViewSettings(),t={width:this.getWidth(),height:this.getHeight(),preserveAxisNumbers:!0,showLabels:!0,targetPixelRatio:2},e={braille:{embosserModel:this.size,brailleMode:this.brailleMode}},this.pngDirty&&(n=this.isExportingBraille()?e:t,this.calculator.asyncScreenshot(n,function(t){s.previewDataURL=t,s.previewBlob=l.default(s.previewDataURL),s.pngDirty=!1,s.loaded=!0,s.updateIfMounted(),s.resizePreviewImg()})),this.svgDirty&&(i=c.__assign(c.__assign({},t),{svg:!0}),(o=r.get("worksheetSVG"))&&(i.targetPixelRatio=1),this.calculator.asyncScreenshot(i,function(t){function e(t,e){r.querySelectorAll(t).forEach(e)}var n,r;o&&(n=t,r=(new DOMParser).parseFromString(n,"text/xml"),e(".dcg-svg-region",function(t){t.setAttribute("fill","black")}),e(".dcg-svg-label *",function(t){t.setAttribute("stroke","none"),t.setAttribute("fill","black")}),e(".dcg-svg-axis-value text",function(t){"none"!==t.getAttribute("stroke")?t.parentElement&&t.parentElement.removeChild(t):(t.setAttribute("font-family","Helvetica Neue"),t.setAttribute("font-weight","bold"))}),e(".dcg-svg-offcenter-axis-value",function(t){t.parentElement&&t.parentElement.removeChild(t)}),e(".dcg-svg-curve",function(t){t.setAttribute("stroke","black"),t.setAttribute("stroke-width","5"),t.setAttribute("stroke-opacity","1")}),e(".dcg-svg-point",function(t){t.setAttribute("stroke","black"),t.setAttribute("stroke-width","10"),t.setAttribute("stroke-opacity","1")}),e(".dcg-svg-background",function(t){var e=parseFloat(t.getAttribute("width")),n=parseFloat(t.getAttribute("height")),i=r.createElementNS("http://www.w3.org/2000/svg","path");i.setAttribute("d","M"+(e-3)+",3v"+(n-6)+"H3V3H"+(e-3)+" M"+e+",0H0v"+n+"h"+e+"V0L"+e+",0z"),t.parentElement.appendChild(i)}),e(".dcg-svg-axis-line",function(t){t.setAttribute("stroke","black"),t.setAttribute("stroke-width","4"),t.setAttribute("stroke-opacity","1")}),e(".dcg-svg-minor-gridline, .dcg-svg-major-gridline",function(t){t.setAttribute("stroke","black"),t.setAttribute("stroke-width","1"),t.setAttribute("stroke-opacity","1")}),t=r.firstChild.outerHTML),s.svgBlob=a.default(t),s.svgDirty=!1,s.updateIfMounted(),s.resizePreviewImg()})))},y.prototype.updateBrailleEquations=function(){var t;this.isExportingBraille()&&(t=u.getBrailleEquationsGraphing(this.controller.api.controller,this.brailleMode),this.brailleBlob=new Blob([t],{type:"text/plain"}))},y.prototype.resizePreviewImg=function(){var t,e,n;this.previewImg&&(t=1,"etc8"!==this.size&&"etc11"!==this.size||(t=2),"vpmax8"!==this.size&&"vpmax11"!==this.size||(t=1.5),e=Math.min(this.getWidth(),400),n=this.getHeight()/this.getWidth()*e,this.previewImg.width=e*t,this.previewImg.height=n*t)},y.prototype.willUpdate=function(){this.updateGraphPreview(),this.updateBrailleEquations()},y.prototype.isExportingBraille=function(){return"vpmax8"===(t=this.size)||"vpmax11"===t||"etc8"===t||"etc11"===t;var t},y.prototype.closeSvgDropdown=function(){this.svgDropdownOpen=!1,this.updateIfMounted()},y.prototype.toggleSvgDropdown=function(){this.svgDropdownOpen=!this.svgDropdownOpen,this.updateIfMounted()},y);function y(){return null!==w&&w.apply(this,arguments)||this}function x(t){switch(t){case"etc8":return"8.5 x 11.0";case"etc11":return"11.5 x 11.0";case"vpmax8":return"8.5 x 11";case"vpmax11":return"11.5 x 11";default:return t}}t.default=E});

define('loadcss!shared-components/shared-consent-modal', function(){});
define('shared-components/shared-consent-modal',["require","exports","tslib","dcgview","shared-components/modal","./shared-account-modal-errors","loadcss!./shared-consent-modal","loadcss!./shared-account-modal","loadcss!shared-components/btn-styles"],function(require,t,n,o,e,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SharedConsentModal=void 0;var s,c=(s=o.Class,n.__extends(i,s),i.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller,this.openTime=Date.now(),this.formErrors=[],this.controller.logJSON("shared-consent-modal",{action:"show-consent-modal"})},i.prototype.template=function(){var n=this;return o.createElement(e.Modal,{title:function(){return n.i18n.s("shared-title-consent")},size:this.const("narrow"),onClose:function(){return n.controller.dispatch({type:"close-modal"})},i18n:this.props.controller},o.createElement("div",{class:o.const("dcg-shared-consent-modal-container dcg-shared-account-dialog")},o.createElement("div",{class:o.const("dcg-shared-consent-contents")},function(){return n.i18n.s("shared-message-consent-information")}),o.createElement("div",{class:o.const("dcg-shared-consent-contents")},function(){return n.i18n.s("shared-message-consent-delete-information")}),o.createElement("div",{class:o.const("dcg-shared-modal-actions-container")},o.createElement("span",{role:o.const("button"),tabindex:o.const("0"),class:o.const("dcg-shared-dark-gray-link"),didMount:function(t){n.controller.wasModalOpenedWithKeyboard()&&t.focus()},onTap:function(t){return n.openAccountSettings(t.device)}},function(){return n.i18n.s("shared-button-go-to-account-settings")}),o.createElement("div",{role:o.const("button"),tabindex:function(){return n.isConsentingToCollection()?-1:0},"aria-disabled":function(){return n.isConsentingToCollection()},class:function(){return{"dcg-shared-btn-blue":!0,"dcg-disabled":n.isConsentingToCollection()}},onTap:this.bindFn(this.consentToCollection)},function(){return n.i18n.s("shared-button-accept")}),o.createElement(r.SharedAccountModalErrors,{controller:this.props.controller,errors:function(){return n.formErrors}}))))},i.prototype.willUpdate=function(){this.formErrors=[],this.controller.userController.didPrivacyConsentFail()&&(this.formErrors=[this.controller.getSomethingWentWrongText()])},i.prototype.isConsentingToCollection=function(){return this.controller.userController.isConsentingToPrivacy()},i.prototype.didPrivacyConsentFail=function(){return this.controller.userController.didPrivacyConsentFail()},i.prototype.openAccountSettings=function(t){this.controller.logJSON("shared-consent-modal",{action:"edit-account",ts:Date.now()-this.openTime}),this.controller.dispatch({type:"show-modal",modal:"account-settings",device:t})},i.prototype.consentToCollection=function(){this.controller.logJSON("shared-consent-modal",{action:"consent",ts:Date.now()-this.openTime}),this.controller.userController.setPrivacyConsent({lang:this.controller.getLanguage()}),this.controller.dispatch({type:"close-modal"})},i);function i(){return null!==s&&s.apply(this,arguments)||this}t.SharedConsentModal=c});

define('text!data/list-of-countries.json',[],function () { return '[\n  "Afganistan",\n  "Albania",\n  "Algeria",\n  "American Samoa",\n  "Andorra",\n  "Angola",\n  "Anguilla",\n  "Antigua & Barbuda",\n  "Argentina",\n  "Armenia",\n  "Aruba",\n  "Australia",\n  "Austria",\n  "Azerbaijan",\n  "Bahamas",\n  "Bahrain",\n  "Bangladesh",\n  "Barbados",\n  "Belarus",\n  "Belgium",\n  "Belize",\n  "Benin",\n  "Bermuda",\n  "Bhutan",\n  "Bolivia",\n  "Bonaire",\n  "Bosnia & Herzegovina",\n  "Botswana",\n  "Brazil",\n  "British Indian Ocean Ter",\n  "Brunei",\n  "Bulgaria",\n  "Burkina Faso",\n  "Burundi",\n  "Cambodia",\n  "Cameroon",\n  "Canada",\n  "Canary Islands",\n  "Cape Verde",\n  "Cayman Islands",\n  "Central African Republic",\n  "Chad",\n  "Channel Islands",\n  "Chile",\n  "China",\n  "Christmas Island",\n  "Cocos Island",\n  "Colombia",\n  "Comoros",\n  "Congo",\n  "Cook Islands",\n  "Costa Rica",\n  "Cote DIvoire",\n  "Croatia",\n  "Cuba",\n  "Curaco",\n  "Cyprus",\n  "Czech Republic",\n  "Denmark",\n  "Djibouti",\n  "Dominica",\n  "Dominican Republic",\n  "East Timor",\n  "Ecuador",\n  "Egypt",\n  "El Salvador",\n  "Equatorial Guinea",\n  "Eritrea",\n  "Estonia",\n  "Ethiopia",\n  "Falkland Islands",\n  "Faroe Islands",\n  "Fiji",\n  "Finland",\n  "France",\n  "French Guiana",\n  "French Polynesia",\n  "French Southern Ter",\n  "Gabon",\n  "Gambia",\n  "Georgia",\n  "Germany",\n  "Ghana",\n  "Gibraltar",\n  "Great Britain",\n  "Greece",\n  "Greenland",\n  "Grenada",\n  "Guadeloupe",\n  "Guam",\n  "Guatemala",\n  "Guinea",\n  "Guyana",\n  "Haiti",\n  "Hawaii",\n  "Honduras",\n  "Hong Kong",\n  "Hungary",\n  "Iceland",\n  "Indonesia",\n  "India",\n  "Iran",\n  "Iraq",\n  "Ireland",\n  "Isle of Man",\n  "Israel",\n  "Italy",\n  "Jamaica",\n  "Japan",\n  "Jordan",\n  "Kazakhstan",\n  "Kenya",\n  "Kiribati",\n  "Korea North",\n  "Korea Sout",\n  "Kuwait",\n  "Kyrgyzstan",\n  "Laos",\n  "Latvia",\n  "Lebanon",\n  "Lesotho",\n  "Liberia",\n  "Libya",\n  "Liechtenstein",\n  "Lithuania",\n  "Luxembourg",\n  "Macau",\n  "Macedonia",\n  "Madagascar",\n  "Malaysia",\n  "Malawi",\n  "Maldives",\n  "Mali",\n  "Malta",\n  "Marshall Islands",\n  "Martinique",\n  "Mauritania",\n  "Mauritius",\n  "Mayotte",\n  "Mexico",\n  "Midway Islands",\n  "Moldova",\n  "Monaco",\n  "Mongolia",\n  "Montserrat",\n  "Morocco",\n  "Mozambique",\n  "Myanmar",\n  "Nambia",\n  "Nauru",\n  "Nepal",\n  "Netherland Antilles",\n  "Netherlands",\n  "Nevis",\n  "New Caledonia",\n  "New Zealand",\n  "Nicaragua",\n  "Niger",\n  "Nigeria",\n  "Niue",\n  "Norfolk Island",\n  "Norway",\n  "Oman",\n  "Pakistan",\n  "Palau Island",\n  "Palestine",\n  "Panama",\n  "Papua New Guinea",\n  "Paraguay",\n  "Peru",\n  "Phillipines",\n  "Pitcairn Island",\n  "Poland",\n  "Portugal",\n  "Puerto Rico",\n  "Qatar",\n  "Republic of Montenegro",\n  "Republic of Serbia",\n  "Reunion",\n  "Romania",\n  "Russia",\n  "Rwanda",\n  "St Barthelemy",\n  "St Eustatius",\n  "St Helena",\n  "St Kitts-Nevis",\n  "St Lucia",\n  "St Maarten",\n  "St Pierre & Miquelon",\n  "St Vincent & Grenadines",\n  "Saipan",\n  "Samoa",\n  "Samoa American",\n  "San Marino",\n  "Sao Tome & Principe",\n  "Saudi Arabia",\n  "Senegal",\n  "Seychelles",\n  "Sierra Leone",\n  "Singapore",\n  "Slovakia",\n  "Slovenia",\n  "Solomon Islands",\n  "Somalia",\n  "South Africa",\n  "Spain",\n  "Sri Lanka",\n  "Sudan",\n  "Suriname",\n  "Swaziland",\n  "Sweden",\n  "Switzerland",\n  "Syria",\n  "Tahiti",\n  "Taiwan",\n  "Tajikistan",\n  "Tanzania",\n  "Thailand",\n  "Togo",\n  "Tokelau",\n  "Tonga",\n  "Trinidad & Tobago",\n  "Tunisia",\n  "Turkey",\n  "Turkmenistan",\n  "Turks & Caicos Is",\n  "Tuvalu",\n  "Uganda",\n  "United Kingdom",\n  "Ukraine",\n  "United Arab Erimates",\n  "United States",\n  "Uraguay",\n  "Uzbekistan",\n  "Vanuatu",\n  "Vatican City State",\n  "Venezuela",\n  "Vietnam",\n  "Virgin Islands (Brit)",\n  "Virgin Islands (USA)",\n  "Wake Island",\n  "Wallis & Futana Is",\n  "Yemen",\n  "Zaire",\n  "Zambia",\n  "Zimbabwe"\n]\n';});


define('loadcss!dcgview-helpers/searchable-dropdown', function(){});
define('dcgview-helpers/searchable-dropdown',["require","exports","tslib","dcgview","keys","lib/aria","loadcss!./searchable-dropdown"],function(require,t,e,n,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s,r=n.Components,c=r.If,u=r.For,a=r.Input,l=(s=n.Class,e.__extends(p,s),p.prototype.template=function(){var o=this;return n.createElement("div",{class:n.const("dcg-search-container"),onKeydown:this.bindFn(this.onKeydown)},n.createElement(c,{predicate:this.props.renderWithInput},function(){return n.createElement("div",{role:n.const("search"),class:n.const("dcg-searchable-dropdown")},n.createElement(a,{didMount:o.bindFn(o.didMountInput),onInput:o.bindFn(o.onInputChange),value:o.bindFn(o.getFilterString),placeholder:function(){return o.props.placeholder()},manageFocus:o.const({shouldBeFocused:o.bindFn(o.shouldFilterBeFocused),onFocusedChanged:o.bindFn(o.onFilterFocusChange)})}),n.createElement(c,{predicate:function(){return o.shouldShowDeleteX()}},function(){return n.createElement("div",{class:n.const("dcg-remove-x dcg-do-not-blur")},n.createElement("span",{class:n.const("dcg-icon-remove"),onTap:o.bindFn(o.onDeleteXTapped)}))}))}),n.createElement(c,{predicate:function(){return 0<o.getFilteredOptions().length}},function(){return n.createElement("div",{class:n.const("dcg-searchable-dropdown-list-container")},n.createElement(u,{each:function(){return o.getFilteredOptions()},key:function(t){return t.id+"-"+t.label}},n.createElement("div",{class:function(){return{"dcg-searchable-dropdown-list":!0,"dcg-do-not-blur":!0,"dcg-no-input":!o.props.renderWithInput()}},role:n.const("listbox"),"aria-label":n.const("Results")},function(e){return n.createElement("div",{class:n.const("dcg-searchable-dropdown-option"),role:n.const("option"),onTap:function(t){return o.selectOption(e,"keyboard"===t.device)},manageFocus:o.const({shouldBeFocused:function(){return o.shouldOptionBeFocused(e)},onFocusedChanged:function(t){return o.onOptionFocusChange(e,t)}}),tabindex:n.const(0)},o.const(e.label))})))}),n.createElement(c,{predicate:function(){return 0===o.getFilteredOptions().length}},function(){return n.createElement("div",{class:n.const("dcg-searchable-dropdown-list dcg-no-search-results")},n.const("No results."))}))},p.prototype.didMountInput=function(){this.focusFilter()},p.prototype.shouldShowDeleteX=function(){return!!this.getFilterString()},p.prototype.onDeleteXTapped=function(){this.filter=void 0,this.focusFilter(),this.update()},p.prototype.shouldFilterBeFocused=function(){return this.focusLocation&&"filter"===this.focusLocation.type},p.prototype.onFilterFocusChange=function(t){t?this.focusFilter():(this.filter=void 0,this.focusLocation=void 0,this.update())},p.prototype.shouldOptionBeFocused=function(t){return this.focusLocation&&"option"===this.focusLocation.type&&this.focusLocation.id===t.id},p.prototype.focusFilter=function(){this.focusLocation={type:"filter"},this.update()},p.prototype.focusOption=function(t){this.focusLocation={type:"option",id:t.id},this.update()},p.prototype.getFocusedOptionIndex=function(){if(!this.focusLocation)return-1;if("option"!==this.focusLocation.type)return-1;for(var t=this.focusLocation.id,e=this.getFilteredOptions(),o=0;o<e.length;o++)if(e[o].id===t)return o;return-1},p.prototype.onOptionFocusChange=function(t,e){e?this.focusOption(t):(this.focusLocation=void 0,this.update())},p.prototype.onKeydown=function(t){switch(o.lookup(t)){case o.ENTER:var e;!this.shouldFilterBeFocused()||1===(e=this.getFilteredOptions()).length&&this.selectOption(e[0],!0);break;case o.UP:this.moveFocusInDirection(-1)&&t.preventDefault();break;case o.DOWN:this.moveFocusInDirection(1)&&t.preventDefault();break;case o.HOME:t.preventDefault(),this.focusFirstOption();break;case o.END:t.preventDefault(),this.focusLastOption();break;case o.ESCAPE:this.props.onCancel();break;case o.TAB:t.shiftKey?this.moveFocusInDirection(-1)&&t.preventDefault():this.moveFocusInDirection(1)&&t.preventDefault()}},p.prototype.moveFocusInDirection=function(t){var e=this.getFilteredOptions(),o=this.getFocusedOptionIndex()+t;if(-1==o&&this.props.renderWithInput())return this.focusFilter(),!0;var n=e[o];return!!n&&(this.focusOption(n),!0)},p.prototype.focusFirstOption=function(){var t=this.getFilteredOptions();0!==t.length&&this.focusOption(t[0])},p.prototype.focusLastOption=function(){var t=this.getFilteredOptions();0!==t.length&&this.focusOption(t[t.length-1])},p.prototype.onInputChange=function(t){this.filter=t,this.update()},p.prototype.getFilterString=function(){return this.filter||""},p.prototype.selectOption=function(t,e){this.filter=void 0,this.focusLocation=void 0,this.update(),this.props.onChange({value:t.id,fromKeyboard:e})},p.prototype.getFilteredOptions=function(){var t=this.props.options(),e=(this.filter||"").toLowerCase().trim();return e&&(t=t.filter(function(t){return-1!==t.label.toLowerCase().indexOf(e)})),t},p.prototype.onUpdate=function(){var t=this.getFilteredOptions().length;if(this.focusLocation&&"filter"===this.focusLocation.type&&t!==this.lastResultCount)switch(t){case 0:i.alert("No results");break;case 1:i.alert("1 result");break;default:i.alert(t+" results")}this.lastResultCount=t},p);function p(){var t=null!==s&&s.apply(this,arguments)||this;return t.filter=void 0,t.focusLocation=void 0,t.lastResultCount=0,t}t.default=l});
define('main/account_backend',["require","exports","jquery","./backend"],function(require,n,e,r){"use strict";function o(){return r.post("/account/logout_xhr")}function c(n){return r.getJSON("/account/user_info",n)}Object.defineProperty(n,"__esModule",{value:!0}),n.submitArtContestEntry=n.setPrivacyConsent=n.setEmail=n.initiateEmailChange=n.initiateAccountDeletion=n.recoverPassword=n.setName=n.registerUser=n.checkPendingDeletion=n.askServerIfLoggedIn=n.getUserInfo=n.fetchUser=n.logout=void 0,n.logout=o,n.fetchUser=function(n){function t(){return r.post("/account/login_xhr",n)}return o().then(t,t).then(function(){return c({lang:n.lang})})},n.getUserInfo=c,n.askServerIfLoggedIn=function(){var t=e.Deferred();return r.getJSON("/account/user_info?no401").then(function(n){n&&!1===n.loggedIn?t.reject(n):t.resolve(n)},function(n){t.reject(n)}),t.promise()},n.checkPendingDeletion=function(n){return r.post("/account/check_account_status",n)},n.registerUser=function(n){return r.post("/account/register_xhr",n).then(function(){return c({lang:n.lang})})},n.setName=function(n){return r.post("/account/change_name",n).then(function(){return c({lang:n.lang})})},n.recoverPassword=function(n){return r.post("/account/recover_xhr",n)},n.initiateAccountDeletion=function(n){return r.getJSON("/account/initiate_delete_account",n)},n.initiateEmailChange=function(n){return r.getJSON("/account/initiate_email_change",n)},n.setEmail=function(n){return r.post("/account/set_email",n).then(function(){return c({lang:n.lang})})},n.setPrivacyConsent=function(n){return r.post("/account/set_privacy_consent",n).then(function(){return c({lang:n.lang})})},n.submitArtContestEntry=function(n){return r.post("/account/submit_art_contest_entry",n)}});

define('loadcss!calculator-shell/contest-submission-dialog', function(){});
define('calculator-shell/contest-submission-dialog',["require","exports","text!data/list-of-countries.json","tslib","dcgview","analytics/looker","../dcgview-helpers/searchable-dropdown","dcgview-helpers/checkbox","lib/aria","../lib/selectable-input","./modal","main/account_backend","loadcss!spinner","loadcss!./contest-submission-dialog"],function(require,t,e,n,o,r,s,c,a,i,l,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var d,h=o.Components,m=h.If,g=h.IfElse,p=h.For,f=h.Input,b=h.SwitchUnion,v=JSON.parse(e).map(function(t){return{id:t,label:t}}),S={Austria:!0,Bulgaria:!0,Cyprus:!0,"Czech Republic":!0,France:!0,Greece:!0,Italy:!0,Lithuania:!0,Spain:!0,Croatia:!0,Germany:!0,Hungary:!0,Ireland:!0,Luxembourg:!0,Netherlands:!0,Poland:!0,Romania:!0,Slovakia:!0,Slovenia:!0},y=(d=o.Class,n.__extends(E,d),E.prototype.didUnmount=function(){this.unmounted=!0},E.prototype.init=function(){this.controller=this.props.controller(),this.selectedData={},this.userOwnsGraph=!1,this.isSubmittingEntry=!1,this.controller.state.artContestURLFromShareMenu&&(this.overwriteGraphURL=this.controller.state.artContestURLFromShareMenu,this.controller.state.artContestURLFromShareMenu=void 0),r.logJSON("art-contest::open-modal",{from:this.overwriteGraphURL?"share":"top-bar"})},E.prototype.getScreen=function(){return this.shouldShowSaveAnimation()?"saving":this.shouldShowSaveFailed()?"save-failed":this.didSubmissionFail?"submit-failed":this.isSubmittingEntry?"submitting":this.didSubmissionSucceed?"submitted":this.userOwnsGraph&&this.isLoggedIn()?"form":"ask-intention"},E.prototype.template=function(){var e=this;return o.createElement(l.Modal,{controller:this.props.controller},o.createElement("div",{class:o.const("dcg-contest-submission-dialog")},b(function(){return e.getScreen()},{saving:function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-animation"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},o.createElement("span",{class:o.const("dcg-spinner")}),function(){return e.controller.s("account-shell-label-saving-graph")}))},"save-failed":function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-animation"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},function(){return e.controller.s("account-shell-error-save-art-contest")}))},submitting:function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-animation"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},o.createElement("span",{class:o.const("dcg-spinner")}),function(){return e.controller.s("account-shell-label-submitting")}))},"submit-failed":function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-animation"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},e.bindFn(e.failSubmittingContent)))},submitted:function(){return o.createElement("div",{class:o.const("dcg-save-animation-container")},o.createElement("div",{class:o.const("dcg-save-success"),"aria-live":o.const("polite"),"aria-atomic":o.const("true")},o.createElement("i",{class:o.const("dcg-icon-check")}),function(){return e.controller.s("account-shell-label-success")},o.createElement("div",{class:o.const("dcg-save-animation-content")},e.bindFn(e.successContent))))},"ask-intention":function(){return o.createElement("div",null,o.createElement("div",{role:o.const("heading"),"aria-level":o.const("1"),class:o.const("dcg-contest-submission-title")},function(){return e.controller.s("account-shell-heading-math-art-contest")}),o.createElement("div",{class:o.const("dcg-contest-about")},function(){return e.controller.s("account-shell-text-art-contest-about")},o.const(" "),o.createElement("a",{class:o.const("blue-link"),href:function(){return e.getBlogPostURL()},target:o.const("_blank"),didMount:function(t){return t.focus()}},function(){return e.controller.s("account-shell-link-learn-more-art-contest")})),o.createElement("div",null,g(function(){return!!e.getCannotSubmitReason()},{true:function(){return o.createElement("div",{class:o.const("dcg-login-notice")},function(){return e.getCannotSubmitReason()})},false:function(){return o.createElement("div",{class:o.const("dcg-btn-blue dcg-submit-this-graph-btn"),onTap:e.bindFn(e.chooseSubmitThisGraph),tabindex:o.const(0),role:o.const("button")},function(){return e.controller.s("account-shell-button-submit-graph")})}}),o.createElement("div",{class:o.const("dcg-submit-for-others")},function(){return e.controller.s("account-shell-text-contest-submit-for-others")},o.const(" "),o.createElement("a",{class:o.const("blue-link"),href:function(){return e.getTranslatedGoogleFormURL()},target:o.const("_blank")},function(){return e.controller.s("account-shell-button-submit-for-others")}))))},form:function(){return o.createElement("div",null,o.createElement("div",{role:o.const("heading"),"aria-level":o.const("1"),class:o.const("dcg-contest-submission-title")},o.createElement("i",{class:o.const("dcg-icon-chevron-left"),onTap:e.bindFn(e.returnToOpeningScreen),role:o.const("button"),tabindex:o.const(0),"aria-label":function(){return e.controller.s("account-shell-narration-back")},didMount:function(t){return t.focus()}}),function(){return e.controller.s("account-shell-heading-submit-graph")}),o.createElement("div",{class:o.const("dcg-submission-form")},o.createElement("div",{class:o.const("dcg-section-title")},function(){return e.controller.s("account-shell-heading-country")}),o.createElement(m,{predicate:function(){return!!e.getSelectedCountry()}},function(){return o.createElement("span",{class:o.const("blue-link dcg-clear-country"),onTap:function(){return e.setSelectedCountry(void 0)},tabindex:o.const(0),role:o.const("button"),"aria-label":function(){return e.controller.s("account-shell-narration-clear-selected-country")}},function(){return e.controller.s("account-shell-button-clear")})}),g(function(){return!!e.getSelectedCountry()},{true:function(){return o.createElement("div",{class:o.const("dcg-your-country-name")},function(){return e.getSelectedCountry()})},false:function(){return o.createElement(s.default,{options:function(){return e.getListOfCountries()},onChange:function(t){return e.setSelectedCountry(t.value)},onCancel:function(){return e.setSelectedCountry(void 0)},renderWithInput:function(){return!0},placeholder:function(){return e.controller.s("account-shell-label-country-placeholder")}})}}),o.createElement(m,{predicate:function(){return e.shouldShowAgeOptions()}},function(){return o.createElement("div",null,o.createElement("div",{class:o.const("dcg-section-title")},function(){return e.controller.s("account-shell-heading-age-bracket")}),o.createElement(p,{each:e.bindFn(e.getAgeGroupKeys)},o.createElement("div",{class:o.const("dcg-segmented-container"),role:o.const("radiogroup"),"aria-label":o.const("Age Group")},function(t){return o.createElement("div",{class:function(){return{"dcg-radio-option":!0,"dcg-is-selected":e.getSelectedAgeGroup()===t}},role:o.const("radio"),tabindex:o.const(0),"aria-checked":function(){return e.getSelectedAgeGroup()===t},onTap:function(){return e.selectAgeGroup(t)}},function(){return e.getAgeGroupText(t)})})))}),o.createElement(m,{predicate:function(){return e.shouldShowConsentOptions()}},function(){return o.createElement("div",null,o.createElement("div",{class:o.const("dcg-section-title")},function(){return e.controller.s("account-shell-heading-name-email")}),o.createElement(f,{class:e.const("blue-outline"),onInput:function(t){return e.setUserName(t)},value:e.bindFn(e.getUserName),placeholder:function(){return e.controller.s("account-shell-label-full-name")},disabled:function(){return!1}}),o.createElement(f,{class:e.const("blue-outline"),onInput:function(t){return e.setUserEmail(t)},value:e.bindFn(e.getUserEmail),placeholder:function(){return e.controller.s("account-shell-label-email-address")},disabled:function(){return!1}}),o.createElement(c.Checkbox,{checked:e.bindFn(e.getConsentTicked),onChange:e.bindFn(e.toggleConsent),ariaLabel:function(){return e.controller.s("account-shell-text-art-contest-copyright-agreement")}},function(){return e.controller.s("account-shell-text-art-contest-copyright-agreement")}),o.createElement("div",{class:function(){return{"dcg-btn-blue":!0,"dcg-disabled":e.isSubmitButtonDisabled(),"dcg-submit-this-graph-btn":!0}},onTap:e.bindFn(e.submitEntry),tabindex:o.const(0)},function(){return e.controller.s("account-shell-button-submit-graph")}))}),o.createElement(m,{predicate:function(){return e.shouldShowManualFormLink()}},function(){return o.createElement("div",{class:o.const("dcg-local-regulations-notice")},function(){return e.controller.s("account-shell-text-local-regulations-notice")},o.createElement(i.SelectableInput,{controller:e.props.controller,link:function(){return e.getPopulatedFormURL()}}))})))}})))},E.prototype.getBlogPostURL=function(){var t=this.controller.languageController.getLanguage();if("zh-TW"===t)return"https://blog.desmos.com/articles/art-contest-launch-chinese-traditional/";switch((t||"").split("-")[0]){case"zh":return"https://blog.desmos.com/articles/art-contest-launch-chinese/";case"da":return"https://blog.desmos.com/articles/art-contest-launch-danish/";case"nl":return"https://blog.desmos.com/articles/art-contest-launch-dutch/";case"fr":return"https://blog.desmos.com/articles/art-contest-launch-french/";case"de":return"https://blog.desmos.com/articles/art-contest-launch-german/";case"it":return"https://blog.desmos.com/articles/art-contest-launch-italian/";case"ja":return"https://blog.desmos.com/articles/art-contest-launch-japanese/";case"ko":return"https://blog.desmos.com/articles/art-contest-launch-korean/";case"pt":return"https://blog.desmos.com/articles/art-contest-launch-portuguese/";case"ru":return"https://blog.desmos.com/articles/art-contest-launch-russian/";case"es":return"https://blog.desmos.com/articles/art-contest-launch-spanish/";case"sv":return"https://blog.desmos.com/articles/art-contest-launch-swedish/";case"th":return"https://blog.desmos.com/articles/art-contest-launch-thai/";case"no":return"https://blog.desmos.com/articles/art-contest-launch-norwegian/"}return"https://blog.desmos.com/articles/art-contest-launch/"},E.prototype.getTranslatedGoogleFormURL=function(){var t=this.controller.languageController.getLanguage();if("zh-TW"===t)return"https://docs.google.com/forms/d/e/1FAIpQLSfQrc3syhGAv8LH092gYtr-gwfY5vMRU93KgsRYlQJ-Ptd5FQ/viewform";switch((t||"").split("-")[0]){case"zh":return"https://docs.google.com/forms/d/1UPPXYjljSZ36GDk6RI_dTTwP5vfUswOxgpFXjXufkfc/viewform";case"da":return"https://docs.google.com/forms/d/18S5chWvqP2Ps686j-LyuK4eeIvyDW1AW9dwDfSN8cbI/viewform";case"nl":return"https://docs.google.com/forms/d/1K2iO84D0oSdzJ4NXm3IgMvudy89Kz2QzdTcW2QnHH8k/viewform";case"fr":return"https://docs.google.com/forms/d/1UbG10FXkCD6s3eOCNYx1L4in8oAFNqZekGQalX2PI8E/viewform";case"de":return"https://docs.google.com/forms/d/1WDHZerBQ_fJTIZKDhFQMFE55Jy_2qAMrTp8D3Mx_NBk/viewform";case"it":return"https://docs.google.com/forms/d/1lz2mxNcGZmLc5CnlsLbb9DAQ7DFBQJCzBs6ZQg3CeNI/viewform";case"ja":return"https://docs.google.com/forms/d/119ITA3RaWgA8pCGDJH40hG5_bx91duE0X9I0L-r0BkE/viewform";case"ko":return"https://docs.google.com/forms/d/14C-Lq79w2jH0t9WHqPk0YX5mNuuFrKPTfJF_LujIoVg/viewform";case"pt":return"https://docs.google.com/forms/d/1X1jilnHQOTzZOtJC-WQOATOsEK-nFLL-91DAwtkQ090/viewform";case"ru":return"https://docs.google.com/forms/d/1J0_amZaXl5zbG-KrVV-ckICDedWapGcPZRa4iEmbsaU/viewform";case"es":return"https://docs.google.com/forms/d/12qP0AaLpaOBTwF024-61BGCjLKEHIc0GL_LKf61t4Ro/viewform";case"sv":return"https://docs.google.com/forms/d/1moU9I2FAC2ct_HSR5I1XU88NDUWD_yB5sIGxOBrfz2U/viewform";case"th":return"https://docs.google.com/forms/d/1UopMmjGp-j3VktImTNkXjZunErmfPtmhl7AyoCCYyvE/viewform";case"no":return"https://docs.google.com/forms/d/1l9GMWrtSZ9fHeltjv0VTCo1ZH5AFqSN1hG3ujRJAU70/viewform"}return"https://docs.google.com/forms/d/e/1FAIpQLSfOrkkB5yz-GWUoaZixSaF6BD2GQHkO1ScCpNEJmxWqiBw2lQ/viewform"},E.prototype.failSubmittingContent=function(){return this.controller.s("account-shell-error-submitting")},E.prototype.successContent=function(){return this.controller.s("account-shell-text-art-contest-success")},E.prototype.returnToOpeningScreen=function(){this.userOwnsGraph=!1,this.selectedData={email:this.selectedData.email,name:this.selectedData.name},this.update()},E.prototype.getGraphURL=function(){if(this.overwriteGraphURL)return this.overwriteGraphURL;var t=this.controller.graphsController.currentGraph;return"https://www.desmos.com/calculator/"+(t&&t.hash||"")},E.prototype.overwriteEntry=function(){this.selectedData.overwrite=!0,this.submitEntry()},E.prototype.submitEntry=function(){var t,e=this;this.isSubmitButtonDisabled()||(this.didSubmissionFail=!1,this.isSubmittingEntry=!0,t={name:this.getUserName(),email:this.getUserEmail(),url:this.getGraphURL(),ageGroup:this.getSelectedAgeGroup(),country:this.getSelectedCountry(),overwrite:!0,lang:this.controller.getLanguage()},this.update(),r.logJSON("art-contest::submit-sending",t),u.submitArtContestEntry(t).done(function(t){t.previousSubmissionURL||(t.success?(e.didSubmissionSucceed=!0,a.alert(e.successContent()),r.logJSON("art-contest::submit-success",{})):(e.didSubmissionFail=!0,r.logJSON("art-contest::submit-failed",{}),a.alert(e.failSubmittingContent())))}).fail(function(){a.alert(e.failSubmittingContent()),e.didSubmissionFail=!0,r.logJSON("art-contest::submit-failed",{})}).always(function(){e.isSubmittingEntry=!1,e.unmounted||e.update()}))},E.prototype.shouldShowSaveAnimation=function(){return!!this.saveInProgress},E.prototype.shouldShowSaveFailed=function(){return!!this.didSaveFail},E.prototype.chooseSubmitThisGraph=function(){var e=this;if(this.overwriteGraphURL||!this.controller.graphsController.hasUnsavedChanges())return this.userOwnsGraph=!0,this.update(),void r.logJSON("art-contest::choose-form",{});this.saveInProgress=!0,r.logJSON("art-contest::save-sending",{}),this.update(),this.controller.graphsController.shareGraph().done(function(t){e.didSaveFail=!1,e.saveInProgress=!1,e.userOwnsGraph=!0,e.overwriteGraphURL="https://www.desmos.com/calculator/"+t.hash,r.logJSON("art-contest::save-success",{url:e.overwriteGraphURL})}).fail(function(){e.didSaveFail=!0,r.logJSON("art-contest::save-failed",{})}).always(function(){e.saveInProgress=!1,e.unmounted||e.update()})},E.prototype.isLoggedIn=function(){return this.controller.isLoggedIn()},E.prototype.getCannotSubmitReason=function(){return this.isLoggedIn()?this.controller.isGraphComplexEnoughForContest()?"":this.controller.s("account-shell-text-art-contest-notice-default"):this.controller.s("account-shell-text-art-contest-notice-login")},E.prototype.shouldShowSubmissionOptions=function(){return!this.userOwnsGraph||!this.isLoggedIn()},E.prototype.shouldShowManualFormLink=function(){return!!this.doesSelectedCountryDisableSubmission()},E.prototype.getPopulatedFormURL=function(){return"https://docs.google.com/forms/d/e/1FAIpQLSfOrkkB5yz-GWUoaZixSaF6BD2GQHkO1ScCpNEJmxWqiBw2lQ/viewform?usp=pp_url&entry.1008123120="+this.getSelectedCountry()+"&entry.47693622="+this.getGraphURL()},E.prototype.doesSelectedCountryDisableSubmission=function(){var t=this.getSelectedCountry();return!!t&&!!S[t]},E.prototype.shouldShowCountryOptions=function(){return!this.shouldShowSubmissionOptions()},E.prototype.shouldShowAgeOptions=function(){return!!this.shouldShowCountryOptions()&&!!this.getSelectedCountry()&&!this.doesSelectedCountryDisableSubmission()},E.prototype.getAgeGroupKeys=function(){return["13-14","15-16","17-18"]},E.prototype.getAgeGroupText=function(t){switch(t){case"13-14":return this.controller.s("account-shell-label-age-13-14");case"15-16":return this.controller.s("account-shell-label-age-15-16");case"17-18":return this.controller.s("account-shell-label-age-17-18");default:return t}},E.prototype.getSelectedAgeGroup=function(){return this.selectedData.ageGroup},E.prototype.selectAgeGroup=function(t){this.selectedData.ageGroup!==t&&(this.selectedData.ageGroup=t,this.update(),r.logJSON("art-contest::select-age",{ageGroup:t}))},E.prototype.setSelectedCountry=function(t){this.selectedData={country:t,name:this.controller.userController.name,email:this.controller.userController.email},this.update(),r.logJSON("art-contest::select-country",{country:t})},E.prototype.getSelectedCountry=function(){return this.selectedData.country},E.prototype.getUserName=function(){return this.selectedData.name||""},E.prototype.setUserName=function(t){this.selectedData.name=t,this.update()},E.prototype.getUserEmail=function(){return this.selectedData.email||""},E.prototype.setUserEmail=function(t){this.selectedData.email=t,this.update()},E.prototype.getConsentTicked=function(){return!!this.selectedData.consent},E.prototype.getOverwriteTicked=function(){return!!this.selectedData.overwrite},E.prototype.toggleConsent=function(){this.selectedData.consent=!this.selectedData.consent,this.update(),r.logJSON("art-contest::toggle-consent",{consent:this.selectedData.consent})},E.prototype.isSubmitButtonDisabled=function(){return!(!this.isSubmittingEntry&&this.selectedData.country&&this.selectedData.ageGroup&&this.selectedData.email&&this.selectedData.name&&this.selectedData.consent)},E.prototype.shouldShowConsentOptions=function(){return!(!this.selectedData.country||!this.selectedData.ageGroup)},E.prototype.getListOfCountries=function(){return v},E);function E(){return null!==d&&d.apply(this,arguments)||this}t.default=y});
define('shared-components/shared-account-reenabled-modal',["require","exports","tslib","dcgview","shared-components/modal","loadcss!./shared-account-modal"],function(require,e,t,n,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SharedAccountReenabledModal=void 0;var r,c=(r=n.Class,t.__extends(s,r),s.prototype.init=function(){this.controller=this.props.controller(),this.i18n=this.controller},s.prototype.template=function(){var t=this;return n.createElement(o.Modal,{title:function(){return t.i18n.s("shared-title-account-reactivated")},size:this.const("narrow"),showX:this.const(!0),onClose:function(){return t.controller.dispatch({type:"close-modal"})},i18n:this.props.controller},n.createElement("div",{class:n.const("dcg-shared-recover-password-dialog dcg-shared-account-dialog")},n.createElement("div",{class:n.const("dcg-shared-account-paragraph")},function(){return t.i18n.s("shared-message-account-reactivated")}),n.createElement("div",{class:n.const("dcg-shared-modal-actions-container")},n.createElement("button",{class:function(){return{"dcg-shared-btn-blue":!0}},onTap:function(){return t.controller.dispatch({type:"close-modal"})},didMount:function(e){t.controller.wasModalOpenedWithKeyboard()&&e.focus()}},function(){return t.i18n.s("shared-button-continue-to-desmos")}))))},s);function s(){return null!==r&&r.apply(this,arguments)||this}e.SharedAccountReenabledModal=c});

define('loadcss!modals', function(){});
define('calculator-shell/modals',["require","exports","tslib","dcgview","./save-dialog","shared-components/shared-signup-modal","shared-components/shared-login-modal","shared-components/shared-recover-password-modal","./hotkeys-dialog","./unsupported-browser","shared-components/shared-account-settings-modal","shared-components/shared-change-email-modal","./export-image-dialog","shared-components/shared-consent-modal","./contest-submission-dialog","shared-components/shared-account-reenabled-modal","loadcss!modals"],function(require,e,o,t,r,l,n,c,a,s,d,i,p,m,u,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Modals=void 0;var g,E=t.Components,f=E.If,v=E.Switch,M=(g=t.Class,o.__extends(y,g),y.prototype.init=function(){this.controller=this.props.controller()},y.prototype.template=function(){var o=this;return t.createElement(v,{key:function(){return o.controller.getOpenModal()}},function(e){return"save"===e?t.createElement(x,{controller:o.props.controller},t.createElement(r.SaveDialog,{controller:o.props.controller})):"export-image"===e?t.createElement(x,{controller:o.props.controller},t.createElement(p.default,{controller:o.props.controller})):"login"===e?t.createElement(n.SharedLoginModal,{controller:o.props.controller}):"signup"===e?t.createElement(l.SharedSignupModal,{controller:o.props.controller,teacher:o.const(!1)}):"recover-password"===e?t.createElement(c.SharedRecoverPasswordModal,{controller:o.props.controller}):"hotkeys"===e?t.createElement(x,{controller:o.props.controller},t.createElement(a.HotkeysDialog,{controller:o.props.controller}),t.const(";")):"unsupported-browser"===e?t.createElement(x,{controller:o.props.controller},t.createElement(s.UnsupportedBrowserDialog,{controller:o.props.controller})):"account-settings"===e?t.createElement(d.SharedAccountSettingsModal,{controller:o.props.controller}):"change-email"===e?t.createElement(i.SharedChangeEmailModal,{controller:o.props.controller}):"account-reenabled"===e?t.createElement(h.SharedAccountReenabledModal,{controller:o.props.controller}):"consent"===e?t.createElement(m.SharedConsentModal,{controller:o.props.controller}):"contest-submission"===e?t.createElement(x,{controller:o.props.controller},t.createElement(u.default,{controller:o.props.controller})):t.createElement("div",null)})},y);function y(){return null!==g&&g.apply(this,arguments)||this}e.Modals=M;var b,x=(b=t.Class,o.__extends(S,b),S.prototype.init=function(){this.controller=this.props.controller()},S.prototype.template=function(){var o=this;return t.createElement("div",{role:t.const("dialog"),class:function(){return{"dcg-modal-container":!0,"dcg-wide-modal":"hotkeys"===o.controller.getOpenModal(),"dcg-fixed-width-height":"export-image"===o.controller.getOpenModal(),"dcg-export-modal":"export-image"===o.controller.getOpenModal()}}},t.createElement("div",{class:t.const("dcg-modal-background"),onTap:function(){return o.controller.dispatch({type:"close-modal"})}}),t.createElement("div",{class:t.const("modal dcg-state-modals")},t.createElement(f,{predicate:function(){return"consent"!==o.controller.getOpenModal()}},function(){return t.createElement("span",{role:t.const("link"),tabindex:t.const(0),"aria-label":t.const("Close Dialog"),class:t.const("action-close-modal close-modal internal-close"),onTap:function(){return o.controller.dispatch({type:"close-modal"})},didMount:function(e){if("hotkeys"===o.controller.getOpenModal())return e.focus()}},t.createElement("i",{class:t.const("dcg-icon-remove")}))}),this.children),t.createElement("span",{role:t.const("link"),tabindex:t.const(0),onTap:function(){return o.controller.dispatch({type:"close-modal"})},"aria-label":t.const("Close Dialog"),class:t.const("action-close-modal close-modal external-close")},t.createElement("i",{class:t.const("dcg-icon-remove")})))},S);function S(){return null!==b&&b.apply(this,arguments)||this}});
define('vendor/fake-xml-http-request',[],function(){function r(e,t,s,n){this.type=e,this.bubbles=t,this.cancelable=s,this.target=n}r.prototype={stopPropagation:function(){},preventDefault:function(){this.defaultPrevented=!0}};var n={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choice",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"};var s={"Accept-Charset":!0,"Accept-Encoding":!0,Connection:!0,"Content-Length":!0,Cookie:!0,Cookie2:!0,"Content-Transfer-Encoding":!0,Date:!0,Expect:!0,Host:!0,"Keep-Alive":!0,Referer:!0,TE:!0,Trailer:!0,"Transfer-Encoding":!0,Upgrade:!0,"User-Agent":!0,Via:!0};function e(){this._eventListeners={};for(var e=["loadstart","progress","load","abort","loadend"],t=e.length-1;0<=t;t--)!function(s,n){n.addEventListener(s,function(e){var t=n["on"+s];t&&"function"==typeof t&&t.call(e.target,e)})}(e[t],this)}function o(){e.call(this),this.readyState=o.UNSENT,this.requestHeaders={},this.requestBody=null,this.status=0,this.statusText="",this.upload=new e}e.prototype={addEventListener:function(e,t){this._eventListeners[e]=this._eventListeners[e]||[],this._eventListeners[e].push(t)},removeEventListener:function(e,t){for(var s=this._eventListeners[e]||[],n=0,r=s.length;n<r;++n)if(s[n]==t)return s.splice(n,1)},dispatchEvent:function(e){for(var t=e.type,s=this._eventListeners[t]||[],n=0;n<s.length;n++)"function"==typeof s[n]?s[n].call(this,e):s[n].handleEvent(e);return!!e.defaultPrevented},_progress:function(e,t,s){var n=new r("progress");n.target=this,n.lengthComputable=e,n.loaded=t,n.total=s,this.dispatchEvent(n)}},o.prototype=new e;var t={UNSENT:o.UNSENT=0,OPENED:o.OPENED=1,HEADERS_RECEIVED:o.HEADERS_RECEIVED=2,LOADING:o.LOADING=3,DONE:o.DONE=4,async:!0,withCredentials:!1,open:function(e,t,s,n,r){this.method=e,this.url=t,this.async="boolean"!=typeof s||s,this.username=n,this.password=r,this.responseText=null,this.responseXML=null,this.requestHeaders={},this.sendFlag=!1,this._readyStateChange(o.OPENED)},setRequestHeader:function(e,t){if(a(this),s[e]||/^(Sec-|Proxy-)/.test(e))throw new Error('Refused to set unsafe header "'+e+'"');this.requestHeaders[e]?this.requestHeaders[e]+=","+t:this.requestHeaders[e]=t},send:function(e){var t;a(this),/^(get|head)$/i.test(this.method)||(t=!1,Object.keys(this.requestHeaders).forEach(function(e){"content-type"===e.toLowerCase()&&(t=!0)}),t||(e||"").toString().match("FormData")||(this.requestHeaders["Content-Type"]="text/plain;charset=UTF-8"),this.requestBody=e),this.errorFlag=!1,this.sendFlag=this.async,this._readyStateChange(o.OPENED),"function"==typeof this.onSend&&this.onSend(this),this.dispatchEvent(new r("loadstart",!1,!1,this)),o.onSend&&o.onSend(this)},abort:function(){this.aborted=!0,this.responseText=null,this.errorFlag=!0,this.requestHeaders={},this.readyState>o.UNSENT&&this.sendFlag&&(this._readyStateChange(o.DONE),this.sendFlag=!1),this.readyState=o.UNSENT,this.dispatchEvent(new r("abort",!1,!1,this)),"function"==typeof this.onerror&&this.onerror()},getResponseHeader:function(e){if(this.readyState<o.HEADERS_RECEIVED)return null;if(/^Set-Cookie2?$/i.test(e))return null;for(var t in e=e.toLowerCase(),this.responseHeaders)if(t.toLowerCase()==e)return this.responseHeaders[t];return null},getAllResponseHeaders:function(){if(this.readyState<o.HEADERS_RECEIVED)return"";var e="";for(var t in this.responseHeaders)this.responseHeaders.hasOwnProperty(t)&&!/^Set-Cookie2?$/i.test(t)&&(e+=t+": "+this.responseHeaders[t]+"\r\n");return e},overrideMimeType:function(e){"string"==typeof e&&(this.forceMimeType=e.toLowerCase())},_readyStateChange:function(e){this.readyState=e,"function"==typeof this.onreadystatechange&&this.onreadystatechange(new r("readystatechange")),this.dispatchEvent(new r("readystatechange")),this.readyState==o.DONE&&(this.dispatchEvent(new r("load",!1,!1,this)),this.dispatchEvent(new r("loadend",!1,!1,this)))},_setResponseHeaders:function(e){for(var t in this.responseHeaders={},e)e.hasOwnProperty(t)&&(this.responseHeaders[t]=e[t]);this.forceMimeType&&(this.responseHeaders["Content-Type"]=this.forceMimeType),this.async?this._readyStateChange(o.HEADERS_RECEIVED):this.readyState=o.HEADERS_RECEIVED},_setResponseBody:function(e){!function(e){if(e.readyState==o.DONE)throw new Error("Request done")}(this),function(e){if(e.async&&e.readyState!=o.HEADERS_RECEIVED)throw new Error("No headers received")}(this),function(e){if("string"!=typeof e){var t=new Error("Attempted to respond to fake XMLHttpRequest with "+e+", which is not a string.");throw t.name="InvalidBodyException",t}}(e);var t=this.chunkSize||10,s=0;for(this.responseText="";this.async&&this._readyStateChange(o.LOADING),this.responseText+=e.substring(s,s+t),(s+=t)<e.length;);var n,r,i=this.getResponseHeader("Content-Type");if(this.responseText&&(!i||/(text\/xml)|(application\/xml)|(\+xml)/.test(i)))try{this.responseXML=(n=this.responseText,"undefined"!=typeof DOMParser?r=(new DOMParser).parseFromString(n,"text/xml"):((r=new ActiveXObject("Microsoft.XMLDOM")).async="false",r.loadXML(n)),r)}catch(e){}this.async?this._readyStateChange(o.DONE):this.readyState=o.DONE},respond:function(e,t,s){this._setResponseHeaders(t||{}),this.status="number"==typeof e?e:200,this.statusText=n[this.status],this._setResponseBody(s||"")}};for(var i in t)o.prototype[i]=t[i];function a(e){if(e.readyState!==o.OPENED)throw new Error("INVALID_STATE_ERR");if(e.sendFlag)throw new Error("INVALID_STATE_ERR")}return o});
define('lib/app-bridge',['require','jquery','underscore_model','browser','lib/conditional_blur','vendor/fake-xml-http-request','pjs','console','main/backend'],function(require){"use strict";var d,l,o=require("jquery"),e=require("underscore_model").UnderscoreModel,t=require("browser"),n=require("lib/conditional_blur").default,i=require("vendor/fake-xml-http-request"),u=null,r=null,s=require("pjs"),a=require("console"),h=!1,c=require("main/backend"),p={},f=0;t.IS_IOS?(d=[],l=[],u={loaded:!function(e){var o=d[n=e];return d[e]=null,l.push(e),t},methods:{},queuedMethodCalls:[]},o(function(){var s=[];window.ObjC_callback=function(e){u.loaded=!0,e.split(" ").forEach(function(r){u.methods[r]=function(e,t){var n,o,i=t?(n=t,o=l.length?l.pop():d.length,d[o]=n,o):-1;s.push("desmos:"+r+"/"+i+"/"+encodeURIComponent(e)),1===s.length&&a.attr("src",s[0])}}),this.ObjC_callback=function(e,t){try{-1!==e&&(o=d[n=e],d[n]=null,l.push(n),o(t))}finally{s.shift(),0<s.length&&a.attr("src",s[0])}var n,o},u.methods.proxyXHR&&((window.XMLHttpRequest=i).onSend=function(e){var t=f+"";f+=1,p[t]=e,u.methods.proxyXHR(JSON.stringify({id:t,url:e.url,method:e.method,headers:e.requestHeaders,body:e.requestBody}))}),u.queuedMethodCalls.forEach(function(e){m[e.methodName].apply(m,e.args)})};var a=o('<iframe id="objc-bridge" style="position:absolute; left: -1000px; z-index: -1" src="desmos:loaded"/>').appendTo(document.body)})):t.IS_ANDROID?r=window.Android:h=!0;var m=new(s(e,function(e,t){e.init=function(){t.init.call(this),this.heartbeatTimeout=null,this.observeEvent("started resumed",function(e){this.gaEvent(e+":"+this.versionNumber),this.incrementHeartbeat(0)}.bind(this)),-1!==document.location.search.indexOf("simulateVersionNumber")&&(this.versionNumber="?.?.?")},e.heartbeat=function(e){clearTimeout(this.heartbeatTimeout),this.gaEvent("heartbeat-"+10*e),this.incrementHeartbeat(e)},e.incrementHeartbeat=function(e){clearTimeout(this.heartbeatTimeout),this.heartbeatTimeout=setTimeout(function(){this.heartbeat(e+1)}.bind(this),6e5)},e._started=function(e,t){this.appId=e,this.versionNumber=t,this.triggerEvent("started")},e._resumed=function(){this.triggerEvent("resumed")},e.handleAndroidBackButtonAndReturnIfShouldMoveToBackground=function(){var e=window.Calc&&window.Calc.controller;return e&&e.isKeypadOpen()?(n(),"false"):(e=window.MainController)&&e.handleAndroidBackButton()?"false":"true"},e.isInApp=function(){return window.platform&&"www"!==window.platform},e.onGoogleAuthResult=function(e){this.triggerEvent("onGoogleAuthResult",e)},e.onAppleAuthResult=function(e){this.triggerEvent("onAppleAuthResult",e)},e.onObjCXHRProxyResult=function(e){var t=e.id,n=p[t];delete p[t],n.respond(e.status,e.headers,e.body)},e.sendAnalyticsEvent=function(e,t){this.sendSerializedAnalyticsEvent(JSON.stringify({type:e,payload:t}))}}));return["hideLoadingScreen","gaEvent","openGoogleLogin","openAppleLogin","logout","saveCookies","deleteCookies","startSingleAppMode","endSingleAppMode","setWWWSubdomain","sendSerializedAnalyticsEvent","sendStoredLogsToDesmos"].forEach(function(e){m[e]=function(){h||(r?r[e]?r[e].apply(r,arguments):a.log("call to missing Android method",e,arguments):u&&(u.loaded?u.methods[e]?u.methods[e].apply(u,arguments):a.log("call to missing ObjC method",e,arguments):u.queuedMethodCalls.push({methodName:e,args:arguments})))}}),h||(window.AppBridge=m,document.addEventListener("click",function(e){var t,n=o(e.target).closest("a[href]")[0];n&&"file:"===n.protocol&&("/"!==(t=n.getAttribute("href"))[0]&&(t="/"+t),n.setAttribute("href",c.baseURL+t))},!0)),m});

define('loadcss!mygraphs/item', function(){});
define('mygraphs/item',["require","exports","tslib","dcgview","jquery","lib/tooltip","loadcss!./item"],function(require,e,t,n,r,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Item=void 0;var o,c=n.Components.If,a=(o=n.Class,t.__extends(p,o),p.prototype.template=function(){var t=this;return n.createElement("div",{class:function(){return{"saved-graph":!0,"graph-link-container":!0,"dcg-selected":t.props.isSelected()}},onTap:function(e){e.wasHandled()||t.props.onTap(e)}},n.createElement(c,{predicate:function(){return!t.props.isDeletingGraph()&&!t.props.didDeleteGraphFail()}},function(){return n.createElement("div",{role:n.const("link"),tabindex:n.const(0),class:function(){return{"graph-link":!0,"dcg-action-preview-graph":!0,"example-graph":t.props.isExample()}},didMount:t.bindFn(t.onMount)},n.createElement("span",{class:n.const("dcg-thumb"),style:t.const({"background-image":"url("+t.props.getThumbURL()+")"})}),n.createElement("div",{class:n.const("dcg-graph-details")},n.createElement("div",{class:n.const("dcg-title")},t.props.getTitle),n.createElement("div",{class:n.const("dcg-subtitle dcg-graph-date")},function(){return t.props.isExample()?t.props.s("account-shell-label-mygraphs-example"):t.props.getDisplayDate()})))}),n.createElement(c,{predicate:this.props.isDeletingGraph},function(){return n.createElement("div",{"aria-live":n.const("assertive"),"aria-atomic":n.const("true"),class:n.const("deleting"),handleEvent:n.const("true"),onTap:function(){t.props.canCancelDelete()&&t.props.cancelDeleteGraph()}},function(){return t.props.s("account-shell-text-mygraphs-deleting")},n.createElement(c,{predicate:t.props.canCancelDelete},function(){return n.createElement("div",{role:n.const("button"),tabindex:n.const(0),class:n.const("cancel-delete")},function(){return t.props.s("account-shell-button-mygraphs-cancel")})}))}),n.createElement(c,{predicate:this.props.didDeleteGraphFail},function(){return n.createElement("div",{"aria-live":n.const("assertive"),"aria-atomic":n.const("true"),class:n.const("retry-delete"),handleEvent:n.const("true")},function(){return t.props.s("account-shell-error-mygraphs-error-deleting")},n.createElement("a",{role:n.const("button"),tabindex:n.const(0),class:n.const("dcg-action-removegraph"),onTap:t.props.requestDeleteGraph},function(){return t.props.s("account-shell-button-mygraphs-try-again")}),function(){return t.props.s("account-shell-text-mygraphs-or")},n.createElement("a",{role:n.const("button"),tabindex:n.const(0),class:n.const("dcg-action-cancelremovegraph"),onTap:t.props.cancelDeleteGraph},function(){return t.props.s("account-shell-button-mygraphs-cancel")}))}),n.createElement(c,{predicate:function(){return!t.props.isExample()&&!t.props.isDeletingGraph()&&!t.props.didDeleteGraphFail()}},function(){return n.createElement("span",{class:n.const("actions"),handleEvent:n.const("true")},n.createElement("span",{role:n.const("button"),tabindex:n.const(0),"aria-label":function(){return t.props.s("account-shell-button-mygraphs-delete-title",{graphTitle:t.props.getTitle()})},class:n.const("dcg-action-removegraph"),onTap:t.props.requestDeleteGraph},n.createElement(s.Tooltip,{tooltip:function(){return t.props.s("account-shell-button-mygraphs-delete-graph")},gravity:t.const("e")},n.createElement("i",{class:n.const("dcg-icon-remove")}))))}))},p.prototype.didUpdate=function(){this.props.isSelected()&&this.$node.focus()},p.prototype.onMount=function(e){var t=this;this.$node=r(e),this.$node.on("focus",function(){t.props.isSelected()||t.props.onFocus()})},p);function p(){return null!==o&&o.apply(this,arguments)||this}e.Item=a});

define('loadcss!mygraphs/save-btn', function(){});
define('mygraphs/save-btn',["require","exports","tslib","dcgview","loadcss!./save-btn"],function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SaveBtn=void 0;var s,r=n.Components.If,a=(s=n.Class,t.__extends(c,s),c.prototype.shouldShowSaveButton=function(){return!this.props.isSaving()&&!this.props.didSaveRecentlySucceed()&&!this.props.didSaveRecentlyFail()},c.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("save-btn-container")},n.createElement(r,{predicate:function(){return e.shouldShowSaveButton()}},function(){return n.createElement("div",{class:n.const("save-button")},n.createElement("span",{role:n.const("button"),onTap:e.props.onTap,class:function(){return{"dcg-btn-green":e.props.didGraphChange(),"disabled-save-btn":!e.props.didGraphChange()}},"aria-disabled":function(){return!e.props.didGraphChange()},tabindex:function(){return e.props.didGraphChange()?0:-1}},function(){return e.props.s("account-shell-button-mygraphs-save")}))}),n.createElement(r,{predicate:this.props.isSaving},function(){return n.createElement("div",{class:n.const("save-saving")},n.createElement("span",{class:n.const("dcg-spinner-dark")}))}),n.createElement(r,{predicate:this.props.didSaveRecentlyFail},function(){return n.createElement("div",{class:n.const("save-error"),"aria-live":n.const("assertive"),"aria-atomic":n.const("true")},n.createElement("i",{class:n.const("dcg-icon-remove")}),n.const(" "),function(){return e.props.s("account-shell-text-error")})}),n.createElement(r,{predicate:this.props.didSaveRecentlySucceed},function(){return n.createElement("div",{class:n.const("save-success")},n.createElement("i",{class:n.const("dcg-icon-check")}),n.const(" "),function(){return e.props.s("account-shell-text-saved")})}))},c);function c(){return null!==s&&s.apply(this,arguments)||this}e.SaveBtn=a});
define('mygraphs/graph-in-progress',["require","exports","tslib","dcgview","./save-btn","loadcss!./item"],function(require,e,s,t,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphInProgress=void 0;var r,n=(r=t.Class,s.__extends(p,r),p.prototype.template=function(){var e=this;return t.createElement("div",{class:t.const("graph-link-container graph-in-progress")},t.createElement("div",{role:t.const("link"),"aria-label":function(){return e.props.s("account-shell-button-mygraphs-save")},class:t.const("graph-link dcg-action-preview-graph"),onTap:this.props.openSaveDialog},t.createElement("span",{class:t.const("dcg-thumb"),style:function(){return{"background-image":"url("+e.props.getThumbnail()+")"}}}),t.createElement("div",{class:t.const("dcg-graph-details")},t.createElement("div",{class:t.const("dcg-title")},this.props.getTitle),t.createElement("div",{class:t.const("dcg-subtitle dcg-save-status")},function(){return e.props.didGraphChange()?e.props.wasCurrentGraphEverSaved()?e.props.s("account-shell-label-mygraphs-last-saved",{date:e.props.getDisplayDate()}):e.props.s("account-shell-label-mygraphs-unsaved-graph"):e.props.s("account-shell-label-mygraphs-no-unsaved-changes")})),t.createElement(a.SaveBtn,{didGraphChange:this.props.didGraphChange,isSaving:this.props.isSaving,didSaveRecentlySucceed:this.props.didSaveRecentlySucceed,didSaveRecentlyFail:this.props.didSaveRecentlyFail,onTap:this.props.simpleSave,s:this.props.s})))},p.prototype.shouldUpdate=function(){return this.props.isOpen()},p);function p(){return null!==r&&r.apply(this,arguments)||this}e.GraphInProgress=n});

define('loadcss!mygraphs/user-bar', function(){});
define('mygraphs/user-bar',["require","exports","tslib","dcgview","jquery","loadcss!./user-bar"],function(require,e,t,n,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.UserBar=void 0;var o,c=n.Components,s=c.Input,a=c.If,i=(o=n.Class,t.__extends(p,o),p.prototype.willUpdate=function(){this.props.isSearching()||this.setSearchValue("")},p.prototype.setSearchValue=function(e){this.searchValue!==e&&(this.searchValue=e,this.props.updateFilter(e))},p.prototype.init=function(){this.controller=this.props.controller(),this.searchValue=""},p.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-user-bar")},n.createElement(a,{predicate:function(){return!t.props.isSearching()}},function(){return n.createElement("span",{role:n.const("button"),tabindex:n.const(0),class:n.const("dcg-action-toggle-dropdown"),"aria-expanded":t.props.isDropdownOpen,onTap:t.props.toggleDropdown,didMount:t.bindFn(t.didMountDropdown)},n.createElement("span",{class:n.const("dcg-variable-name dcg-menu-title")},function(){return t.controller.userController.getFirstName()}),n.createElement("span",{class:n.const("dcg-caret-container"),style:function(){return{transform:t.props.isDropdownOpen()?"rotate(-180deg)":"rotate(0)"}}},n.createElement("i",{class:n.const("dcg-icon-chevron-down")})))}),n.createElement(a,{predicate:function(){return!t.props.isDropdownOpen()&&!t.props.isSearching()}},function(){return n.createElement("div",{class:n.const("dcg-search-btn"),onTap:function(e){e.preventDefault(),t.props.openSearch(),r(".search-container").find("input").focus()}},n.createElement("i",{class:n.const("dcg-icon-search search-icon")}),n.createElement("span",{class:n.const("dcg-menu-title")},function(){return t.props.s("account-shell-heading-title-mygraphs-search")}))}),n.createElement(a,{predicate:function(){return!t.props.isDropdownOpen()&&t.props.isSearching()}},function(){return n.createElement("div",{role:n.const("search"),class:n.const("search-container search-open")},n.createElement("i",{class:n.const("dcg-icon-search search-icon")}),n.createElement(s,{placeholder:function(){return t.props.s("account-shell-text-mygraphs-search-by-title")},onInput:t.bindFn(t.setSearchValue),onFocus:t.props.openSearch,value:function(){return t.searchValue},didMount:t.bindFn(t.didMountSearch)}),n.createElement("span",{role:n.const("button"),tabindex:n.const(0),"aria-label":function(){return t.props.s("account-shell-heading-title-mygraphs-search")},class:n.const("dcg-icon-remove dcg-action-close-search"),onTap:function(e){e.preventDefault(),t.props.closeSearch()}}))}))},p.prototype.didMountDropdown=function(e){r(e).on("touchstart",function(e){return e.preventDefault()})},p.prototype.didMountSearch=function(e){var t=this;r(e).on("blur",function(){r(e).val()||t.props.closeSearch()})},p);function p(){return null!==o&&o.apply(this,arguments)||this}e.UserBar=i});

define('loadcss!mygraphs/load-graph-view', function(){});
define('mygraphs/load-graph-view',["require","exports","tslib","dcgview","loadcss!./load-graph-view"],function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoadGraphView=void 0;var r,a=n.Components.If,c=(r=n.Class,t.__extends(o,r),o.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-loading-container")},n.createElement(a,{predicate:function(){return!e.props.didDataLoadFail()}},function(){return n.createElement("div",{class:n.const("dcg-graph-loading")},n.createElement("div",{class:n.const("pulsing-message")},function(){return e.props.s("account-shell-text-mygraphs-loading")}),n.createElement("div",{role:n.const("link"),tabindex:n.const("0"),class:n.const("cancel-while-loading"),onTap:e.props.onCancel},function(){return e.props.s("account-shell-button-mygraphs-cancel")}))}),n.createElement(a,{predicate:function(){return e.props.didDataLoadFail()}},function(){return n.createElement("div",{class:n.const("dcg-graph-loading-error"),"aria-live":n.const("assertive"),"aria-atomic":n.const("true")},n.createElement("div",{class:n.const("dcg-graph-loading-error-title")},function(){return e.props.s("account-shell-error-mygraphs-error-loading")}),n.createElement("div",{class:n.const("dcg-graph-loading-error-subtitle")},function(){return e.props.s("account-shell-error-mygraphs-check-connection")}),n.createElement("div",{class:n.const("dcg-graph-loading-error-options")},n.createElement("span",{role:n.const("button"),tabindex:n.const("0"),class:n.const("dcg-action-try-again dcg-btn-blue dcg-btn-medium"),onTap:e.props.requestLoadGraphData},function(){return e.props.s("account-shell-button-mygraphs-try-again")}),function(){return e.props.s("account-shell-text-mygraphs-or")},n.createElement("span",{role:n.const("button"),tabindex:n.const("0"),class:n.const("dcg-action-cancel dcg-btn-light-gray dcg-btn-medium"),onTap:e.props.onCancel},function(){return e.props.s("account-shell-button-mygraphs-cancel")})))}))},o);function o(){return null!==r&&r.apply(this,arguments)||this}e.LoadGraphView=c});

define('loadcss!mygraphs/graph-preview', function(){});
define('mygraphs/graph-preview',["require","exports","tslib","dcgview","jquery","mygraphs/load-graph-view","loadcss!./graph-preview"],function(require,t,e,r,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphPreview=void 0;var p,i=r.Components.If,n=(p=r.Class,e.__extends(s,p),s.prototype.didMountGraphPreview=function(t){return this.$graphPreview=a(t),this.updateGraphPreviewTop()},s.prototype.didMountArrow=function(t){return this.$arrow=a(t),this.updateArrowTop()},s.prototype.didMountCalc=function(t){return this.previewCalc=this.props.makeAPI(t),this.updatePreviewCalc()},s.prototype.didUpdate=function(){return this.updateGraphPreviewTop(),this.updateArrowTop(),this.updatePreviewCalc()},s.prototype.updateGraphPreviewTop=function(){return this.$graphPreview.css("top",this.getTopOffset()+"px")},s.prototype.updateArrowTop=function(){this.$arrow.css("top",this.getArrowOffset()+"px")},s.prototype.updatePreviewCalc=function(){var t=this.props.getGraphData();t!==this.cachedGraphData&&(this.cachedGraphData=t,this.previewCalc.setState(t),this.previewCalc.resize())},s.prototype.getMaxTop=function(){return a(window).height()-this.$graphPreview.outerHeight()-10},s.prototype.getIdealTop=function(){var t=this.props.alignToNode();return null==t?null:a(t).offset().top+.5*a(t).outerHeight()-60},s.prototype.getTopOffset=function(){var t=this.getIdealTop();if(null==t)return 0;var e=this.getMaxTop();return Math.min(t,e)},s.prototype.getArrowOffset=function(){var t=this.getIdealTop();return null==t?60:60+t-this.getTopOffset()},s.prototype.template=function(){var t=this;return r.createElement("div",{class:r.const("graph-preview"),didMount:this.didMountGraphPreview.bind(this)},r.createElement("span",{role:r.const("button"),tabindex:r.const("0"),class:r.const("dcg-pull-right dcg-btn-light-gray dcg-action-cancel"),onTap:this.props.onCancel},function(){return t.props.s("account-shell-button-mygraphs-cancel")}),r.createElement("h4",{class:r.const("dcg-title")},this.props.getTitle),r.createElement("div",{class:r.const("preview-graph-area")},r.createElement(i,{predicate:function(){return!t.props.getGraphData()}},function(){return r.createElement(o.LoadGraphView,{didDataLoadFail:t.props.didDataLoadFail,onCancel:t.props.onCancel,requestLoadGraphData:t.props.requestLoadGraphData,s:t.props.s.bind(t.props)})}),r.createElement("div",{didMount:this.didMountCalc.bind(this),class:function(){return{"dcg-preview-calculator":!0,"dcg-visible":t.props.getGraphData()}}}),r.createElement("div",{class:function(){return{"screenshot-clickjack":!0,"dcg-action-open-graph":!0,"dcg-visible":t.props.getGraphData()}}},r.createElement("span",{role:r.const("button"),tabindex:r.const("0"),class:r.const("dcg-action-open-graph dcg-open-graph-btn dcg-btn-blue"),onTap:this.props.onOpenGraph},this.props.getOpenText))),r.createElement("div",{class:r.const("active-arrow"),didMount:this.didMountArrow.bind(this)},r.createElement("div",{class:r.const("dcg-graphic")})))},s);function s(){return null!==p&&p.apply(this,arguments)||this}t.GraphPreview=n});

define('loadcss!mygraphs/syncing-status-bar', function(){});
define('mygraphs/syncing-status-bar',["require","exports","tslib","dcgview","loadcss!./syncing-status-bar"],function(require,t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SyncingStatusBar=void 0;var s,r=n.Components.If,c=(s=n.Class,e.__extends(a,s),a.prototype.template=function(){var t=this;return n.createElement("div",{class:function(){return{"syncing-status-bar":!0,visible:t.props.isSyncingGraphs()||t.props.didSyncFail()}}},n.createElement(r,{predicate:this.props.isSyncingGraphs},function(){return n.createElement("div",{class:n.const("syncing-status-text")},n.createElement("span",{class:n.const("dcg-pulse")},function(){return t.props.s("account-shell-text-mygraphs-updating-graphs")}))}),n.createElement(r,{predicate:function(){return!t.props.isSyncingGraphs()&&!t.props.didSyncFail()}},function(){return n.createElement("div",{class:n.const("success-status-text")},n.createElement("i",{class:n.const("dcg-icon-check")}),n.const(" "),function(){return t.props.s("account-shell-text-mygraphs-synced")})}),n.createElement(r,{predicate:this.props.didSyncFail},function(){return n.createElement("div",{class:n.const("error-status-text"),onTap:t.props.requestSyncGraphs},function(){return t.props.s("account-shell-button-mygraphs-offline-try-again")})}))},a);function a(){return null!==s&&s.apply(this,arguments)||this}t.SyncingStatusBar=c});

define('loadcss!mygraphs/account-dropdown', function(){});
define('mygraphs/account-dropdown',["require","exports","tslib","dcgview","loadcss!./account-dropdown"],function(require,t,n,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountDropdown=void 0;var o,s=(o=e.Class,n.__extends(c,o),c.prototype.template=function(){var t=this;return e.createElement("div",{class:function(){return{"dcg-dropdown":!0,"dcg-is-open":t.props.isOpen()}}},e.createElement("div",{role:e.const("link"),tabindex:e.const("0"),class:e.const("dcg-dropdown-link"),onTap:this.props.onEditAccount},function(){return t.props.s("account-shell-heading-title-mygraphs-account-settings")}),e.createElement("div",{role:e.const("link"),tabindex:e.const("0"),onTap:this.props.onLogout,class:e.const("dcg-dropdown-link")},function(){return t.props.s("account-shell-button-mygraphs-sign-out")}),e.createElement("div",{class:e.const("dcg-mygraphs-legal")},e.createElement("a",{href:e.const("/terms"),target:e.const("_blank")},function(){return t.props.s("account-shell-link-terms")}),e.const("|"),e.createElement("a",{href:e.const("/privacy"),target:e.const("_blank")},function(){return t.props.s("account-shell-link-privacy")})))},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.AccountDropdown=s});

define('loadcss!mygraphs/account-reminder', function(){});
define('mygraphs/account-reminder',["require","exports","tslib","dcgview","loadcss!./account-reminder"],function(require,t,e,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountReminder=void 0;var o,r=(o=n.Class,e.__extends(c,o),c.prototype.init=function(){this.controller=this.props.controller()},c.prototype.template=function(){var t=this;return n.createElement("div",{class:n.const("dcg-account-reminder")},n.createElement("a",{role:n.const("link"),tabindex:n.const("0"),class:n.const("dcg-btn-white-outline dcg-action-createaccount"),onTap:this.props.onCreateAccount},function(){return t.controller.s("account-shell-link-mygraphs-sign-up")}),function(){return t.controller.s("account-shell-text-mygraphs-or")},n.createElement("a",{role:n.const("link"),tabindex:n.const("0"),class:n.const("dcg-action-login"),onTap:this.props.onSignIn},function(){return t.controller.s("account-shell-link-mygraphs-log-in")}),n.createElement("div",null,function(){return t.getToSaveYourText()}))},c.prototype.getToSaveYourText=function(){return"graphing"===this.controller.product?this.controller.s("account-shell-text-mygraphs-to-save-graphs"):"geometry"===this.controller.product?this.controller.s("account-shell-text-mygraphs-to-save-constructions"):""},c);function c(){return null!==o&&o.apply(this,arguments)||this}t.AccountReminder=r});
define('mygraphs/heading',["require","exports","tslib","dcgview"],function(require,e,t,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s,r=(s=n.Class,t.__extends(i,s),i.prototype.template=function(){var e=this;return n.createElement("div",{class:n.const("dcg-mygraphs-section-title-container")},n.createElement("span",{role:n.const("heading"),"aria-level":n.const("1"),class:n.const("dcg-mygraphs-section-title")},function(){return e.props.title()}))},i);function i(){return null!==s&&s.apply(this,arguments)||this}e.default=r});

define('loadcss!mygraphs/mygraphs', function(){});
define('mygraphs/mygraphs',["require","exports","tslib","dcgview","jquery","underscore","mygraphs/item","mygraphs/graph-in-progress","mygraphs/user-bar","mygraphs/graph-preview","mygraphs/syncing-status-bar","mygraphs/account-dropdown","mygraphs/account-reminder","mygraphs/load-graph-view","scroll_helpers","mygraphs/heading","keys","analytics/looker","loadcss!./mygraphs"],function(require,e,t,n,o,a,l,i,s,c,p,u,h,d,r,g,m,f){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Mygraphs=void 0;var v,y=n.Components,G=y.If,w=y.For,E=y.IfElse,C=(v=n.Class,t.__extends(S,v),S.prototype.didUpdate=function(){this.previewGraph&&r.scrollVisible(o(this.getSelectedNode()),this.$scrollableNode,60)&&this.update()},S.prototype.didMountScrollable=function(e){var t=this;this.$scrollableNode=o(e),this.$scrollableNode.on("focusin",function(e){if(null!=t.previewGraph&&!o(e.target).hasClass("graph-link"))return t.previewItem(null)}),o(window).on("keydown",function(e){if(!t.props.isOpen())return!0;switch(m.lookup(e)){case m.UP:return t.selectUp(e);case m.DOWN:return t.selectDown(e)}});var r=a.throttle(this.hidePreviewIfTooScrolled.bind(this),200);this.$scrollableNode.on("scroll",r),this.debouncedFetchSelectedGraph=a.debounce(this.fetchSelectedGraph.bind(this),200)},S.prototype.fetchSelectedGraph=function(){return this.props.graphsController().loadDataForGraph(this.previewGraph)},S.prototype.hidePreviewIfTooScrolled=function(){var e,t,r,n;null!=this.previewGraph&&(e=o(this.getSelectedNode()),t=o(this.findRootNode()).find(".active-arrow"),r=e.offset().top+.5*e.height(),n=t.offset().top,10<Math.abs(r-n)&&this.previewItem(null))},S.prototype.toggleDropdown=function(){1===this.state?this.state=0:this.state=1,this.previewItem(null)},S.prototype.openSearch=function(){this.state=2,this.previewItem(null)},S.prototype.closeSearch=function(){this.state=0,this.previewItem(null)},S.prototype.updateFilter=function(e){this.filter=e,this.update()},S.prototype.getMaxGraphs=function(){return this.maxGraphs||50},S.prototype.getCountRemaining=function(){return this.getSavedGraphs().length-this.getMaxGraphs()},S.prototype.showMoreGraphs=function(e){var t,r,n=this.getMaxGraphs();this.getCountRemaining()<2*n?this.maxGraphs=1/0:this.maxGraphs=2*n,this.update(),"keyboard"!==(null!=e?e.device:void 0)||(r=null!=(t=this.getSavedAndExampleGraphs())?t[n]:void 0)&&this.previewItem(r)},S.prototype.getSelectedNode=function(){return o(".dcg-mygraphs .graph-link-container.dcg-selected")[0]},S.prototype.selectUp=function(e){var t,r,n,o;null!=this.previewGraph&&(e.preventDefault(),(t=this.getSavedAndExampleGraphs()).length&&(r=null!=this.previewGraph?this.previewGraph.hash:void 0,n=a.indexOf(a.pluck(t,"hash"),r),(o=null!=t?t[n-1]:void 0)?o&&this.previewItem(o):null!=this.$newGraph&&this.$newGraph.focus()))},S.prototype.selectDown=function(e){var t,r,n,o;null==this.previewGraph||(t=this.getSavedAndExampleGraphs()).length&&(e.preventDefault(),r=null!=this.previewGraph?this.previewGraph.hash:void 0,n=a.indexOf(a.pluck(t,"hash"),r),(o=null!=t?t[n+1]:void 0)&&(!o.example&&n+1>=this.getMaxGraphs()&&this.showMoreGraphs(),this.previewItem(o)))},S.prototype.getFilter=function(){return 2===this.state&&null!=this.filter?this.filter:""},S.prototype.getRecoveryGraphs=function(){return this.props.graphsController().getRecoveryGraphs()},S.prototype.attemptRecovery=function(){this.logRecoveryClientEvent("ask"),this.controller.mygraphsController.recoveryAttempted=!0,this.controller.graphsController.fetchRecoveryGraphs(),this.update()},S.prototype.hasAttemptedRecovery=function(){return this.controller.mygraphsController.hasAttemptedRecovery()&&!this.isAttemptingRecovery()},S.prototype.isAttemptingRecovery=function(){return this.controller.graphsController.isLoadingRecoveryGraphs},S.prototype.shouldShowAttemptRecoveryText=function(){return!!this.graphsController.isRecoveryUIEnabledForProduct()&&!this.hasAttemptedRecovery()},S.prototype.getSavedGraphs=function(){return this.props.graphsController().getSavedGraphs()},S.prototype.getExampleGraphs=function(){return this.props.graphsController().getExampleGraphs()},S.prototype.getSavedAndExampleGraphs=function(){return this.props.graphsController().getSavedAndExampleGraphs()},S.prototype.filterGraphs=function(e){var t=this,r=this.getFilter().toLowerCase();return r?e.filter(function(e){return 0<=t.sanitizeTitle(e).toLowerCase().indexOf(r)}):e},S.prototype.sliceGraphs=function(e){return e.slice(0,this.getMaxGraphs())},S.prototype.canShowMore=function(e){return e.length>this.getMaxGraphs()},S.prototype.onFocusGraph=function(e){this.skipPreview()||this.previewItem(e)},S.prototype.onTapGraph=function(e,t){this.skipPreview()||"keyboard"===t.device?this.openGraphWithCover(e):this.previewGraph!==e&&this.previewItem(e)},S.prototype.previewItem=function(e){this.previewGraph&&(this.previewGraph=null),e&&(this.previewGraph=e,this.debouncedFetchSelectedGraph()),this.update()},S.prototype.skipPreview=function(){var e=window.platform;return o("body").width()<650||"ios"===e||"android"===e},S.prototype.onOpenPreviewGraph=function(){var e;null!=this.previewGraph&&(e=this.previewGraph,this.previewItem(null),this.props.onOpenGraph(e))},S.prototype.openGraphWithCover=function(e){var t=this;if(this.graphWithCover=e,this.previewItem(null),null!=e)return setTimeout(function(){t.props.graphsController().loadGraphImmediately(e).done(function(){t.graphWithCover&&t.props.openGraphBehindCover(e).then(function(){t.graphWithCover=null,t.update()})}).always(function(){t.update()})},250)},S.prototype.cancelLoadGraphWithCover=function(){this.graphWithCover=null,this.update()},S.prototype.didDataLoadFail=function(e){return this.props.graphsController().didDataLoadFail(e)},S.prototype.willUpdate=function(){this.props.isOpen()&&this.controller.userController.isLoggedIn()||(this.state=0)},S.prototype.didMountNewGraph=function(e){var r=this;return this.$newGraph=o(e),this.$newGraph.on("keydown",function(e){if(m.lookup(e)===m.DOWN){var t=r.getSavedAndExampleGraphs();return r.previewItem(t[0]),e.preventDefault(),e.stopPropagation()}})},S.prototype.sanitizeTitle=function(e){return e.example?this.controller.s(e.title):e.title||this.graphsController.getUntitledString()},S.prototype.template=function(){var r=this;return this.state=0,this.controller=this.props.controller(),this.graphsController=this.controller.graphsController,n.createElement("div",{class:function(){return{"dcg-mygraphs":!0,"logged-in":r.controller.userController.isLoggedIn(),"preview-mode":!!r.props.previewMode(),"maintenance-mode":!!r.props.maintenanceMode()}}},n.createElement("div",{class:n.const("dcg-resources-container")},n.createElement(G,{predicate:function(){return r.props.accountsEnabled()&&!r.controller.userController.isLoggedIn()&&!r.props.previewMode()&&!r.props.maintenanceMode()}},function(){return n.createElement(h.AccountReminder,{onCreateAccount:r.props.onCreateAccount,onSignIn:r.props.onSignIn,controller:r.props.controller})}),n.createElement(G,{predicate:function(){return r.controller.userController.isLoggedIn()}},function(){return n.createElement("div",null,n.createElement(G,{predicate:function(){return r.controller.userController.isLoggedIn()&&0===r.state}},function(){return n.createElement(p.SyncingStatusBar,{isSyncingGraphs:function(){return r.props.graphsController().isSyncing()},didSyncFail:function(){return r.props.graphsController().didSyncFail()},requestSyncGraphs:r.props.refreshGraphs,s:r.controller.s})}),n.createElement(s.UserBar,{controller:r.props.controller,isDropdownOpen:function(){return 1===r.state},toggleDropdown:r.toggleDropdown.bind(r),openSearch:r.openSearch.bind(r),closeSearch:r.closeSearch.bind(r),updateFilter:r.updateFilter.bind(r),isSearching:function(){return 2===r.state},s:r.controller.s}))}),n.createElement("div",{class:n.const("dcg-scrollable"),didMount:this.didMountScrollable.bind(this)},n.createElement("div",{class:n.const("dcg-scrollable-interior")},n.createElement(G,{predicate:this.props.maintenanceMode},function(){return n.createElement("div",{class:n.const("maintenance-mode")},function(){return r.controller.s("account-shell-text-mygraphs-maintenance-mode")})}),n.createElement(G,{predicate:this.props.previewMode},function(){return n.createElement("div",{class:n.const("maintenance-mode")},function(){var e;return null===(e=r.props.previewMode())||void 0===e?void 0:e.message},n.createElement("br",null),n.createElement("a",{role:n.const("link"),tabindex:n.const("0"),class:n.const("dcg-btn-green"),href:function(){var e;return null===(e=r.props.previewMode())||void 0===e?void 0:e.url},target:n.const("_blank")},function(){return r.controller.s("account-shell-text-mygraphs-share-thoughts")}))}),n.createElement(G,{predicate:function(){return 2!==r.state}},function(){return n.createElement("div",{role:n.const("link"),tabindex:n.const("0"),class:n.const("new-blank-graph dcg-action-newblankgraph"),onTap:function(){return r.previewItem(null),r.props.openBlankGraph()},didMount:r.didMountNewGraph.bind(r)},n.createElement("div",{class:n.const("new-blank-graph-inner")},n.createElement("span",{class:n.const("dcg-add-blank")},n.createElement("i",{class:n.const("dcg-icon-plus")})),n.createElement("span",{class:n.const("dcg-new-graph-title")},function(){return"geometry"===r.props.controller().getProduct()?r.controller.s("account-shell-text-mygraphs-new-construction"):r.controller.s("account-shell-text-mygraphs-new-blank-graph")})))}),n.createElement(G,{predicate:function(){return!r.props.maintenanceMode()&&!r.props.previewMode()&&r.controller.userController.isLoggedIn()&&2!==r.state}},function(){return n.createElement("div",null,n.createElement(g.default,{title:function(){return"geometry"===r.props.controller().getProduct()?r.controller.s("account-shell-text-mygraphs-current-construction"):r.controller.s("account-shell-text-mygraphs-current-graph")}}),n.createElement(i.GraphInProgress,{getTitle:function(){return r.getPreviewTitle()},getDisplayDate:function(){return r.controller.unpack(r.props.graphsController().getCurrentDisplayDate())},isOpen:r.props.isOpen,getThumbnail:r.props.getThumbnail,didGraphChange:r.props.didGraphChange,simpleSave:function(){return r.props.simpleSave(),r.previewItem(null)},openSaveDialog:function(){return r.props.openSaveDialog(),r.previewItem(null)},wasCurrentGraphEverSaved:function(){return r.props.graphsController().wasCurrentGraphEverSaved()},isSaving:function(){return r.props.graphsController().isSaving()},didSaveRecentlySucceed:function(){return r.props.graphsController().didSaveSucceed()},didSaveRecentlyFail:function(){return r.props.graphsController().didSaveFail()},s:r.controller.s}),n.createElement(G,{predicate:r.bindFn(r.shouldShowAttemptRecoveryText)},function(){return n.createElement("div",{class:n.const("dcg-lost-work-link")},E(function(){return r.isAttemptingRecovery()},{true:function(){return n.createElement("span",null,n.createElement("span",null,function(){return r.controller.s("account-shell-text-mygraphs-attempting-recovery")}),n.createElement("span",{class:n.const("dcg-spinner-dark")}))},false:function(){return n.createElement("span",null,n.createElement("span",null,function(){return r.controller.s("account-shell-text-mygraphs-lost-work")+" "}),n.createElement("span",{tabIndex:n.const(0),role:n.const("link"),class:n.const("dcg-attempt-recovery"),onTap:r.bindFn(r.attemptRecovery)},function(){return r.controller.s("account-shell-button-mygraphs-attempt-recovery")}))}}))}))}),n.createElement(G,{predicate:function(){return!r.props.maintenanceMode()&&!r.props.previewMode()&&r.controller.userController.isLoggedIn()&&r.hasAttemptedRecovery()&&2!==r.state}},function(){return n.createElement("div",null,E(function(){return r.getRecoveryGraphs().length},{true:function(){return n.createElement("div",{class:n.const("dcg-recovery-graphs-list")},n.createElement(g.default,{title:function(){return r.controller.s("account-shell-heading-mygraphs-recovered-work")}}),n.createElement(w,{each:function(){return r.getRecoveryGraphs()},key:function(e){return e.getCollectionKey()}},n.createElement("div",null,function(t){return n.createElement(l.Item,{onTap:function(e){return r.onTapGraph(t,e)},onFocus:function(){return r.onFocusGraph(t)},cancelDeleteGraph:function(){return r.props.graphsController().cancelDeleteGraph(t)},requestDeleteGraph:function(){return r.logRecoveryClientEvent("delete"),r.previewItem(null),r.props.graphsController().requestDeleteGraph(t)},isDeletingGraph:function(){return r.props.graphsController().isDeletingGraph(t)},canCancelDelete:function(){return r.props.graphsController().canCancelDelete(t)},didDeleteGraphFail:function(){return r.props.graphsController().didDeleteGraphFail(t)},isSelected:function(){return t===r.previewGraph},isExample:n.const(!1),getDisplayDate:function(){return r.controller.unpack(t.displayDate())},getTitle:function(){return r.sanitizeTitle(t)},getThumbURL:function(){return t.thumbURL},s:r.controller.s})})))},false:function(){return n.createElement("div",{class:n.const("dcg-no-recovery-graphs")},n.const("Couldn't find any unsaved graphs."))}}))}),n.createElement(G,{predicate:function(){return r.controller.userController.isLoggedIn()}},function(){return n.createElement(g.default,{title:function(){return"geometry"===r.props.controller().getProduct()?r.controller.s("account-shell-heading-mygraphs-saved-constructions"):r.controller.s("account-shell-heading-mygraphs-saved-graphs")}})}),n.createElement(w,{each:function(){return r.sliceGraphs(r.filterGraphs(r.getSavedGraphs()))},key:function(e){return e.getCollectionKey()}},n.createElement("div",{class:n.const("dcg-saved-graphs-list")},function(t){return n.createElement(l.Item,{onTap:function(e){return r.onTapGraph(t,e)},onFocus:function(){return r.onFocusGraph(t)},cancelDeleteGraph:function(){return r.props.graphsController().cancelDeleteGraph(t)},requestDeleteGraph:function(){return r.previewItem(null),r.props.graphsController().requestDeleteGraph(t)},isDeletingGraph:function(){return r.props.graphsController().isDeletingGraph(t)},canCancelDelete:function(){return r.props.graphsController().canCancelDelete(t)},didDeleteGraphFail:function(){return r.props.graphsController().didDeleteGraphFail(t)},isSelected:function(){return t===r.previewGraph},isExample:n.const(!1),getDisplayDate:function(){return r.controller.unpack(t.displayDate())},getTitle:function(){return r.sanitizeTitle(t)},getThumbURL:function(){return t.thumbURL},s:r.controller.s})})),n.createElement(G,{predicate:function(){return r.controller.userController.isLoggedIn()&&0===r.filterGraphs(r.getSavedGraphs()).length}},function(){return n.createElement("div",{"aria-live":n.const("assertive"),"aria-atomic":n.const("true"),class:n.const("no-matches")},function(){return 2===r.state?r.controller.s("account-shell-text-mygraphs-no-search-results"):r.controller.s("account-shell-text-mygraphs-no-saved-graphs")})}),n.createElement(G,{predicate:function(){return r.canShowMore(r.filterGraphs(r.getSavedGraphs()))}},function(){return n.createElement("div",{class:n.const("dcg-show-more-graphs"),onTap:r.showMoreGraphs.bind(r),role:n.const("button"),tabindex:n.const(0)},function(){return r.controller.s("account-shell-text-mygraphs-count-more",{count:r.getCountRemaining()})})}),n.createElement(g.default,{title:function(){return r.controller.s("account-shell-heading-mygraphs-examples")}}),n.createElement(w,{each:function(){return r.filterGraphs(r.getExampleGraphs())},key:function(e){return e.getCollectionKey()}},n.createElement("div",null,function(t){return n.createElement(l.Item,{onTap:function(e){return r.onTapGraph(t,e)},onFocus:function(){return r.onFocusGraph(t)},cancelDeleteGraph:function(){},requestDeleteGraph:function(){},isDeletingGraph:n.const(!1),didDeleteGraphFail:n.const(!1),canCancelDelete:n.const(!1),isSelected:function(){return t===r.previewGraph},isExample:n.const(!0),getDisplayDate:function(){return r.controller.unpack(t.displayDate())},getTitle:function(){return r.sanitizeTitle(t)},getThumbURL:function(){return t.thumbURL},s:r.controller.s})})),n.createElement(G,{predicate:function(){return!!r.getFilter()&&0===r.filterGraphs(r.getExampleGraphs()).length}},function(){return n.createElement("div",{"aria-live":n.const("assertive"),"aria-atomic":n.const("true"),class:n.const("no-matches")},function(){return r.controller.s("account-shell-text-mygraphs-no-examples-match-search")})}),n.createElement("div",{class:n.const("dcg-mygraphs-legal")},n.createElement("a",{href:n.const("/terms"),target:n.const("_blank")},function(){return r.controller.s("account-shell-link-terms")}),n.const("|"),n.createElement("a",{href:n.const("/privacy"),target:n.const("_blank")},function(){return r.controller.s("account-shell-link-privacy")}),n.createElement(G,{predicate:function(){return!!r.props.versionNumber()}},function(){return n.createElement("div",{class:n.const("dcg-version")},function(){return r.controller.s("account-shell-text-mygraphs-version")},n.const(" "),r.props.versionNumber)})))),n.createElement(G,{predicate:function(){return r.previewGraph}},function(){return n.createElement(c.GraphPreview,{alignToNode:function(){return r.getSelectedNode()},getTitle:function(){if(null!=r.previewGraph)return r.sanitizeTitle(r.previewGraph)},getGraphData:function(){return null!=r.previewGraph?r.previewGraph.graphData:void 0},onCancel:function(){return r.previewItem(null)},didDataLoadFail:function(){return r.didDataLoadFail(r.previewGraph)},requestLoadGraphData:r.fetchSelectedGraph.bind(r),onOpenGraph:r.onOpenPreviewGraph.bind(r),s:r.controller.s,makeAPI:r.props.makeAPI,getOpenText:function(){return r.controller.getOpenText()}})}),n.createElement(G,{predicate:function(){return r.controller.userController.isLoggedIn()}},function(){return n.createElement("div",null,n.createElement(G,{predicate:function(){return r.controller.userController.isLoggedIn()&&0===r.state}},function(){return n.createElement(p.SyncingStatusBar,{isSyncingGraphs:function(){return r.props.graphsController().isSyncing()},didSyncFail:function(){return r.props.graphsController().didSyncFail()},requestSyncGraphs:r.props.refreshGraphs,s:r.controller.s})}),n.createElement(u.AccountDropdown,{isOpen:function(){return 1===r.state},onEditAccount:r.props.onEditAccount,onLogout:r.props.onLogout,s:r.controller.s}))})),n.createElement(G,{predicate:this.props.isOpen},function(){return n.createElement("div",{role:n.const("link"),tabindex:n.const(0),class:n.const("dcg-resources-cover dcg-action-close-resources"),style:function(){return{opacity:null!=r.previewGraph?.6:0}},onTap:function(){return null!=r.previewGraph?r.previewItem(null):r.props.closeDrawer()},"aria-label":function(){return null!=r.previewGraph?r.controller.s("account-shell-button-mygraphs-close-graph-preview"):r.controller.s("account-shell-button-mygraphs-close-graph-list")}})}),n.createElement(G,{predicate:function(){return null!=r.graphWithCover}},function(){return n.createElement("div",{class:n.const("dcg-fullscreen-loading-container")},n.createElement(G,{predicate:function(){return null!=(null!=r.graphWithCover?r.graphWithCover.graphData:void 0)}},function(){return n.createElement("div",{"aria-live":n.const("assertive"),"aria-atomic":n.const("true"),class:n.const("dcg-graph-loading")},n.createElement("div",{class:n.const("pulsing-message")},function(){return r.controller.s("account-shell-text-mygraphs-opening")}),n.createElement("div",{class:n.const("slow-loading")},function(){return r.getSlowLoadingText()}))}),n.createElement(G,{predicate:function(){return null==(null!=r.graphWithCover?r.graphWithCover.graphData:void 0)}},function(){return n.createElement(d.LoadGraphView,{didDataLoadFail:function(){return r.didDataLoadFail(r.graphWithCover)},onCancel:r.cancelLoadGraphWithCover.bind(r),requestLoadGraphData:function(){return r.openGraphWithCover(r.graphWithCover)},s:r.controller.s})}))}))},S.prototype.getPreviewTitle=function(){return this.graphsController.getCurrentGraphTitle()||this.graphsController.getUntitledString()},S.prototype.getSlowLoadingText=function(){return"graphing"===this.graphsController.product?this.controller.s("account-shell-text-mygraphs-slow-big-graphs"):"geometry"===this.graphsController.product?this.controller.s("account-shell-text-mygraphs-slow-big-constructions"):""},S.prototype.logRecoveryClientEvent=function(e){f.logJSON("recovered-graph",{product:this.controller.graphsController.product,timeSincePageload:Date.now()-this.controller.mygraphsController.pageLoadTime,payloadJSON:{action:e}})},S);function S(){return null!==v&&v.apply(this,arguments)||this}e.Mygraphs=C});
define('mygraphs/wrapper',["require","exports","lib/app-bridge","tslib","dcgview","./mygraphs"],function(require,r,e,n,o,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.MygraphsWrapper=void 0;var l,a=(l=o.Class,n.__extends(i,l),i.prototype.init=function(){this.controller=this.props.controller(),this.graphsController=this.controller.graphsController,this.mygraphsController=this.controller.mygraphsController},i.prototype.template=function(){var n=this;return o.createElement(t.Mygraphs,{isOpen:function(){return n.mygraphsController.isMygraphsOpen()},graphsController:function(){return n.graphsController},maintenanceMode:function(){return n.controller.isInMaintenanceMode()},previewMode:function(){return n.controller.getPreviewParams()},accountsEnabled:this.const(!0),controller:function(){return n.controller},closeDrawer:function(){return n.controller.dispatch({type:"close-mygraphs"})},openBlankGraph:function(){return n.mygraphsController.openBlankGraph()},onOpenGraph:function(r){return n.mygraphsController.onOpenGraph(r)},openGraphBehindCover:function(r){return n.mygraphsController.openGraphBehindCover(r)},onLogout:function(){return n.controller.userController.logout()},onEditAccount:function(){return n.controller.dispatch({type:"show-modal",modal:"account-settings",device:"mouse"})},onCreateAccount:function(){return n.controller.dispatch({type:"show-modal",modal:"signup",device:"mouse"})},onSignIn:function(){return n.controller.dispatch({type:"show-modal",modal:"login",device:"mouse"})},refreshGraphs:function(){return n.graphsController.refreshGraphs()},getThumbnail:function(){return n.mygraphsController.getThumbnail()},simpleSave:function(){return n.controller.simpleSave()},openSaveDialog:function(){return n.controller.openSaveDialog()},versionNumber:function(){return e.versionNumber},didGraphChange:function(){return n.graphsController.hasUnsavedChanges()},makeAPI:this.props.makeAPI})},i);function i(){return null!==l&&l.apply(this,arguments)||this}r.MygraphsWrapper=a});
!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define('vendor/bugsnag',[],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).bugsnag=e()}(function(){function t(e,t,n){for(var r=n,o=0,i=e.length;o<i;o++)r=t(r,e[o],o,e);return r}function n(e){return e<10?"0"+e:e}var i=!{toString:null}.propertyIsEnumerable("toString"),a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],e=function(e,o){return t(e,function(e,t,n,r){return e.concat(o(t,n,r))},[])},r=t,o=function(e,o){return t(e,function(e,t,n,r){return o(t,n,r)?e.concat(t):e},[])},s=function(e,o){return t(e,function(e,t,n,r){return!0===e||t===o},!1)},u=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c=function(){var e=new Date;return e.getUTCFullYear()+"-"+n(e.getUTCMonth()+1)+"-"+n(e.getUTCDate())+"T"+n(e.getUTCHours())+":"+n(e.getUTCMinutes())+":"+n(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"},l={intRange:function(t,n){return void 0===t&&(t=1),void 0===n&&(n=1/0),function(e){return"number"==typeof e&&parseInt(""+e,10)===e&&t<=e&&e<=n}},stringWithLength:function(e){return"string"==typeof e&&!!e.length}},f={},d=o,g=r,p=function(e){var t,n=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.push(t);if(!i)return n;for(var r=0,o=a.length;r<o;r++)Object.prototype.hasOwnProperty.call(e,a[r])&&n.push(a[r]);return n},h=u,v=s,m=l.intRange,y=l.stringWithLength;function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}f.schema={apiKey:{defaultValue:function(){return null},message:"is required",validate:y},appVersion:{defaultValue:function(){return null},message:"should be a string",validate:function(e){return null===e||y(e)}},appType:{defaultValue:function(){return null},message:"should be a string",validate:function(e){return null===e||y(e)}},autoNotify:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}},beforeSend:{defaultValue:function(){return[]},message:"should be a function or array of functions",validate:function(e){return"function"==typeof e||h(e)&&d(e,function(e){return"function"==typeof e}).length===e.length}},endpoints:{defaultValue:function(){return{notify:"https://notify.bugsnag.com",sessions:"https://sessions.bugsnag.com"}},message:"should be an object containing endpoint URLs { notify, sessions }. sessions is optional if autoCaptureSessions=false",validate:function(e,t){return e&&"object"==typeof e&&y(e.notify)&&(!1===t.autoCaptureSessions||y(e.sessions))&&0===d(p(e),function(e){return!v(["notify","sessions"],e)}).length}},autoCaptureSessions:{defaultValue:function(e,t){return void 0===t.endpoints||!!t.endpoints&&!!t.endpoints.sessions},message:"should be true|false",validate:function(e){return!0===e||!1===e}},notifyReleaseStages:{defaultValue:function(){return null},message:"should be an array of strings",validate:function(e){return null===e||h(e)&&d(e,function(e){return"string"==typeof e}).length===e.length}},releaseStage:{defaultValue:function(){return"production"},message:"should be a string",validate:function(e){return"string"==typeof e&&e.length}},maxBreadcrumbs:{defaultValue:function(){return 20},message:"should be a number 40",validate:function(e){return m(0,40)(e)}},autoBreadcrumbs:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return"boolean"==typeof e}},user:{defaultValue:function(){return null},message:"(object) user should be an object",validate:function(e){return"object"==typeof e}},metaData:{defaultValue:function(){return null},message:"should be an object",validate:function(e){return"object"==typeof e}},logger:{defaultValue:function(){},message:"should be null or an object with methods { debug, info, warn, error }",validate:function(n){return!n||n&&g(["debug","info","warn","error"],function(e,t){return e&&"function"==typeof n[t]},!0)}},filters:{defaultValue:function(){return["password"]},message:"should be an array of strings|regexes",validate:function(e){return h(e)&&e.length===d(e,function(e){return"string"==typeof e||e&&"function"==typeof e.test}).length}}},f.mergeDefaults=function(n,r){if(!n||!r)throw new Error("opts and schema objects are required");return g(p(r),function(e,t){return e[t]=void 0!==n[t]?n[t]:r[t].defaultValue(n[t],n),e},{})},f.validate=function(n,r){if(!n||!r)throw new Error("opts and schema objects are required");var e=g(p(r),function(e,t){return r[t].validate(n[t],n)?e:e.concat({key:t,message:r[t].message,value:n[t]})},[]);return{valid:!e.length,errors:e}};function w(e){return e.app&&"string"==typeof e.app.releaseStage?e.app.releaseStage:e.config.releaseStage}var S=f.schema,O=e,j={releaseStage:{defaultValue:function(){return/^localhost(:\d+)?$/.test(window.location.host)?"development":"production"},message:"should be set",validate:l.stringWithLength},logger:b({},S.logger,{defaultValue:function(){return"undefined"!=typeof console&&"function"==typeof console.debug?E():void 0}})},E=function(){var n={},r=console.log;return O(["debug","info","warn","error"],function(e){var t=console[e];n[e]="function"==typeof t?t.bind(console,"[bugsnag]"):r.bind(console,"[bugsnag]")}),n},N=c,B=function(){function e(e,t,n,r){void 0===e&&(e="[anonymous]"),void 0===t&&(t={}),void 0===n&&(n="manual"),void 0===r&&(r=N()),this.type=n,this.name=e,this.metaData=t,this.timestamp=r}return e.prototype.toJSON=function(){return{type:this.type,name:this.name,timestamp:this.timestamp,metaData:this.metaData}},e}();var R=function(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return e instanceof Error}},k=function(e,t){return e.isIgnored()||!1===t},_={};!function(e,t){"use strict";"object"==typeof _?_=t():e.StackFrame=t()}(this,function(){"use strict";function n(e){return!isNaN(parseFloat(e))&&isFinite(e)}function r(e){return e.charAt(0).toUpperCase()+e.substring(1)}function e(e){return function(){return this[e]}}var t=["isConstructor","isEval","isNative","isToplevel"],o=["columnNumber","lineNumber"],i=["fileName","functionName","source"],a=t.concat(o,i,["args"]);function s(e){if(e instanceof Object)for(var t=0;t<a.length;t++)e.hasOwnProperty(a[t])&&void 0!==e[a[t]]&&this["set"+r(a[t])](e[a[t]])}s.prototype={getArgs:function(){return this.args},setArgs:function(e){if("[object Array]"!==Object.prototype.toString.call(e))throw new TypeError("Args must be an Array");this.args=e},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(e){if(e instanceof s)this.evalOrigin=e;else{if(!(e instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new s(e)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(n(this.getLineNumber())?":"+this.getLineNumber():"")+(n(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var u=0;u<t.length;u++)s.prototype["get"+r(t[u])]=e(t[u]),s.prototype["set"+r(t[u])]=function(t){return function(e){this[t]=Boolean(e)}}(t[u]);for(var c=0;c<o.length;c++)s.prototype["get"+r(o[c])]=e(o[c]),s.prototype["set"+r(o[c])]=function(t){return function(e){if(!n(e))throw new TypeError(t+" must be a Number");this[t]=Number(e)}}(o[c]);for(var l=0;l<i.length;l++)s.prototype["get"+r(i[l])]=e(i[l]),s.prototype["set"+r(i[l])]=function(t){return function(e){this[t]=String(e)}}(i[l]);return s});var D={};!function(e,t){"use strict";"object"==typeof D?D=t(_):e.ErrorStackParser=t(e.StackFrame)}(this,function(s){"use strict";var t=/(^|@)\S+\:\d+/,n=/^\s*at .*(\S+\:\d+|\(native\))/m,r=/^(eval@)?(\[native code\])?$/;return{parse:function(e){if(void 0!==e.stacktrace||void 0!==e["opera#sourceloc"])return this.parseOpera(e);if(e.stack&&e.stack.match(n))return this.parseV8OrIE(e);if(e.stack)return this.parseFFOrSafari(e);throw new Error("Cannot parse given Error object")},extractLocation:function(e){if(-1===e.indexOf(":"))return[e];var t=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(e.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(n)},this).map(function(e){-1<e.indexOf("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var t=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),n=this.extractLocation(t.pop()),r=t.join(" ")||void 0,o=-1<["eval","<anonymous>"].indexOf(n[0])?void 0:n[0];return new s({functionName:r,fileName:o,lineNumber:n[1],columnNumber:n[2],source:e})},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(e){return!e.match(r)},this).map(function(e){if(-1<e.indexOf(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new s({functionName:e});var t=/((.*".+"[^@]*)?[^@]*)(?:@)/,n=e.match(t),r=n&&n[1]?n[1]:void 0,o=this.extractLocation(e.replace(t,""));return new s({functionName:r,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:e})},this)},parseOpera:function(e){return!e.stacktrace||-1<e.message.indexOf("\n")&&e.message.split("\n").length>e.stacktrace.split("\n").length?this.parseOpera9(e):e.stack?this.parseOpera11(e):this.parseOpera10(e)},parseOpera9:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)/i,n=e.message.split("\n"),r=[],o=2,i=n.length;o<i;o+=2){var a=t.exec(n[o]);a&&r.push(new s({fileName:a[2],lineNumber:a[1],source:n[o]}))}return r},parseOpera10:function(e){for(var t=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,n=e.stacktrace.split("\n"),r=[],o=0,i=n.length;o<i;o+=2){var a=t.exec(n[o]);a&&r.push(new s({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:n[o]}))}return r},parseOpera11:function(e){return e.stack.split("\n").filter(function(e){return!!e.match(t)&&!e.match(/^Error created at/)},this).map(function(e){var t,n=e.split("@"),r=this.extractLocation(n.pop()),o=n.shift()||"",i=o.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;o.match(/\(([^\)]*)\)/)&&(t=o.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===t||"[arguments not available]"===t?void 0:t.split(",");return new s({functionName:i,args:a,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e})},this)}}});function x(e){return!(!e||!e.stack&&!e.stacktrace&&!e["opera#sourceloc"]||"string"!=typeof(e.stack||e.stacktrace||e["opera#sourceloc"])||e.stack===e.name+": "+e.message)}var L=D,q={};function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}!function(e,t){"use strict";"object"==typeof q?q=t(_):e.StackGenerator=t(e.StackFrame)}(this,function(a){return{backtrace:function(e){var t=[],n=10;"object"==typeof e&&"number"==typeof e.maxStackSize&&(n=e.maxStackSize);for(var r=arguments.callee;r&&t.length<n&&r.arguments;){for(var o=new Array(r.arguments.length),i=0;i<o.length;++i)o[i]=r.arguments[i];/function(?:\s+([\w$]+))+\s*\(/.test(r.toString())?t.push(new a({functionName:RegExp.$1||void 0,args:o})):t.push(new a({args:o}));try{r=r.caller}catch(e){break}}return t}}});var T=r,M=o,P=function(){function e(e,t,n,r,o){void 0===n&&(n=[]),void 0===r&&(r=H()),this.__isBugsnagReport=!0,this._ignored=!1,this._handledState=r,this.app=void 0,this.apiKey=void 0,this.breadcrumbs=[],this.context=void 0,this.device=void 0,this.errorClass=$(e,"[no error class]"),this.errorMessage=$(t,"[no error message]"),this.groupingHash=void 0,this.metaData={},this.request=void 0,this.severity=this._handledState.severity,this.stacktrace=T(n,function(t,e){var n=A(e);try{return"{}"===JSON.stringify(n)?t:t.concat(n)}catch(e){return t}},[]),this.user=void 0,this.session=void 0,this.originalError=o}var t=e.prototype;return t.ignore=function(){this._ignored=!0},t.isIgnored=function(){return this._ignored},t.updateMetaData=function(e,t,n){var r,o;return e?null===(arguments.length<=1?void 0:t)?this.removeMetaData(e):null===(arguments.length<=2?void 0:n)?this.removeMetaData(e,arguments.length<=1?void 0:t,arguments.length<=2?void 0:n):("object"==typeof(arguments.length<=1?void 0:t)&&(o=arguments.length<=1?void 0:t),"string"==typeof(arguments.length<=1?void 0:t)&&((r={})[arguments.length<=1?void 0:t]=arguments.length<=2?void 0:n,o=r),o&&(this.metaData[e]||(this.metaData[e]={}),this.metaData[e]=C({},this.metaData[e],o)),this):this},t.removeMetaData=function(e,t){return"string"!=typeof e||(t?this.metaData[e]&&delete this.metaData[e][t]:delete this.metaData[e]),this},t.toJSON=function(){return{payloadVersion:"4",exceptions:[{errorClass:this.errorClass,message:this.errorMessage,stacktrace:this.stacktrace,type:"browserjs"}],severity:this.severity,unhandled:this._handledState.unhandled,severityReason:this._handledState.severityReason,app:this.app,device:this.device,breadcrumbs:this.breadcrumbs,context:this.context,user:this.user,metaData:this.metaData,groupingHash:this.groupingHash,request:this.request,session:this.session}},e}(),A=function(e){var t={file:e.fileName,method:V(e.functionName),lineNumber:e.lineNumber,columnNumber:e.columnNumber,code:void 0,inProject:void 0};return-1<t.lineNumber&&!t.file&&!t.method&&(t.file="global code"),t},V=function(e){return/^global code$/i.test(e)?"global code":e},H=function(){return{unhandled:!1,severity:"warning",severityReason:{type:"handledException"}}},$=function(e,t){return"string"==typeof e&&e?e:t};P.getStacktrace=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),x(e)?L.parse(e).slice(t):M(q.backtrace(),function(e){return-1===(e.functionName||"").indexOf("StackGenerator$$")}).slice(1+n)},P.ensureReport=function(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=0),t.__isBugsnagReport)return t;try{var r=P.getStacktrace(t,e,1+n);return new P(t.name,t.message,r,void 0,t)}catch(e){return new P(t.name,t.message,[],void 0,t)}};var U=P,F=function(e,t){var n="000000000"+e;return n.substr(n.length-t)},K="object"==typeof window?window:self,I=0;for(var X in K)Object.hasOwnProperty.call(K,X)&&I++;var J=navigator.mimeTypes?navigator.mimeTypes.length:0,z=F((J+navigator.userAgent.length).toString(36)+I.toString(36),4),G=function(){return z},W=0,Y=4,Z=36,Q=Math.pow(Z,Y);function ee(){return F((Math.random()*Q<<0).toString(Z),Y)}function te(){return"c"+(new Date).getTime().toString(Z)+F((W=W<Q?W:0,(++W-1).toString(Z)),Y)+G()+(ee()+ee())}te.fingerprint=G;var ne=te,re=c,oe=function(){function e(){this.id=ne(),this.startedAt=re(),this._handled=0,this._unhandled=0}var t=e.prototype;return t.toJSON=function(){return{id:this.id,startedAt:this.startedAt,events:{handled:this._handled,unhandled:this._unhandled}}},t.trackError=function(e){this[e._handledState.unhandled?"_unhandled":"_handled"]+=1},e}();function ie(){return(ie=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ae(e,t,n,r){var g,p,h,v,o=r&&r.filterKeys?r.filterKeys:[],i=r&&r.filterPaths?r.filterPaths:[];return JSON.stringify((g=o,p=i,h=[],v=0,function e(t,n){function r(){return n.length>be&&ye<v}if(v++,n.length>me)return Se;if(r())return Se;if(null===t||"object"!=typeof t)return t;if(function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return 1}(h,t))return"[Circular]";if(h.push(t),"function"==typeof t.toJSON)try{v--;var o=e(t.toJSON(),n);return h.pop(),o}catch(e){return we(e)}var i,a;if((i=t)instanceof Error||/^\[object (Error|(Dom)?Exception)\]$/.test(Object.prototype.toString.call(i))){v--;var s=e({name:t.name,message:t.message},n);return h.pop(),s}if(a=t,"[object Array]"===Object.prototype.toString.call(a)){for(var u=[],c=0,l=t.length;c<l;c++){if(r()){u.push(Se);break}u.push(e(t[c],n.concat("[]")))}return h.pop(),u}var f={};try{for(var d in t)if(Object.prototype.hasOwnProperty.call(t,d))if(function(e,t){for(var n=0,r=e.length;n<r;n++)if(0===t.indexOf(e[n]))return 1}(p,n.join("."))&&function(e,t){for(var n=0,r=e.length;n<r;n++){if("string"==typeof e[n]&&e[n]===t)return 1;if(e[n]&&"function"==typeof e[n].test&&e[n].test(t))return 1}}(g,d))f[d]="[Filtered]";else{if(r()){f[d]=Se;break}f[d]=e(function(e,t){try{return e[t]}catch(e){return we(e)}}(t,d),n.concat(d))}}catch(e){}return h.pop(),f}(e,[])),t,n)}var se=e,ue=s,ce=u,le=function(){function r(e){if(!(e&&e.name&&e.version&&e.url))throw new Error("`notifier` argument is required");this.notifier=e,this._configured=!1,this._opts={},this.config={},this._delivery={sendSession:function(){},sendReport:function(){}},this._logger={debug:function(){},info:function(){},warn:function(){},error:function(){}},this._plugins={},this._session=null,this.breadcrumbs=[],this.app={},this.context=void 0,this.device=void 0,this.metaData=void 0,this.request=void 0,this.user={},this.BugsnagClient=r,this.BugsnagReport=U,this.BugsnagBreadcrumb=B,this.BugsnagSession=oe;var t=this,n=this.notify;this.notify=function(){return n.apply(t,arguments)}}var e=r.prototype;return e.setOptions=function(e){this._opts=ie({},this._opts,e)},e.configure=function(e){void 0===e&&(e=f.schema);var t=f.mergeDefaults(this._opts,e),n=f.validate(t,e);if(!0==!n.valid)throw new Error(ge(n.errors));return"function"==typeof t.beforeSend&&(t.beforeSend=[t.beforeSend]),t.appVersion&&(this.app.version=t.appVersion),t.appType&&(this.app.type=t.appType),t.metaData&&(this.metaData=t.metaData),t.user&&(this.user=t.user),t.logger&&this.logger(t.logger),this.config=ie({},this.config,t),this._configured=!0,this},e.use=function(e){if(!this._configured)throw new Error("client not configured");e.configSchema&&this.configure(e.configSchema);for(var t=arguments.length,n=new Array(1<t?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var o=e.init.apply(e,[this].concat(n));return e.name&&(this._plugins["~"+e.name+"~"]=o),this},e.getPlugin=function(e){return this._plugins["~"+e+"~"]},e.delivery=function(e){return this._delivery=e,this},e.logger=function(e){return this._logger=e,this},e.sessionDelegate=function(e){return this._sessionDelegate=e,this},e.startSession=function(){return this._sessionDelegate?this._sessionDelegate.startSession(this):(this._logger.warn("No session implementation is installed"),this)},e.leaveBreadcrumb=function(e,t,n,r){if(!this._configured)throw new Error("client not configured");if(n="string"==typeof n?n:void 0,r="string"==typeof r?r:void 0,t="object"==typeof t&&null!==t?t:void 0,"string"==typeof(e=e||void 0)||t){var o=new B(e,t,n,r);return this.breadcrumbs.push(o),this.breadcrumbs.length>this.config.maxBreadcrumbs&&(this.breadcrumbs=this.breadcrumbs.slice(this.breadcrumbs.length-this.config.maxBreadcrumbs)),this}},e.notify=function(e,t,n){var r=this;if(void 0===t&&(t={}),void 0===n&&(n=function(){}),!this._configured)throw new Error("client not configured");var o=w(this),i=fe(e,t,this._logger),a=i.err,s=i.errorFramesToSkip,u=i._opts;u&&(t=u),"object"==typeof t&&null!==t||(t={});var c=U.ensureReport(a,s,2);if(c.app=ie({},{releaseStage:o},c.app,this.app),c.context=c.context||t.context||this.context||void 0,c.device=ie({},c.device,this.device,t.device),c.request=ie({},c.request,this.request,t.request),c.user=ie({},c.user,this.user,t.user),c.metaData=ie({},c.metaData,this.metaData,t.metaData),c.breadcrumbs=this.breadcrumbs.slice(0),this._session&&(this._session.trackError(c),c.session=this._session),void 0!==t.severity&&(c.severity=t.severity,c._handledState.severityReason={type:"userSpecifiedSeverity"}),ce(this.config.notifyReleaseStages)&&!ue(this.config.notifyReleaseStages,o))return this._logger.warn("Report not sent due to releaseStage/notifyReleaseStages configuration"),n(null,c);function l(e){r._logger.error("Error occurred in beforeSend callback, continuing anyway"),r._logger.error(e)}var f,d,g,p,h,v,m,y,b=c.severity,S=[].concat(t.beforeSend).concat(this.config.beforeSend);m=c,y=l,d=function(e,n){if("function"!=typeof e)return n(null,!1);try{if(2!==e.length){var t=e(m);return t&&"function"==typeof t.then?t.then(function(e){return setTimeout(function(){return n(null,k(m,e))},0)},function(e){setTimeout(function(){return y(e),n(null,!1)})}):n(null,k(m,t))}e(m,function(e,t){return e?(y(e),n(null,!1)):void n(null,k(m,t))})}catch(e){y(e),n(null,!1)}},g=function(e,t){return e&&l(e),t?(r._logger.debug("Report not sent due to beforeSend callback"),n(null,c)):(r.config.autoBreadcrumbs&&r.leaveBreadcrumb(c.errorClass,{errorClass:c.errorClass,errorMessage:c.errorMessage,severity:c.severity},"error"),b!==c.severity&&(c._handledState.severityReason={type:"userCallbackSetSeverity"}),void r._delivery.sendReport(r._logger,r.config,{apiKey:c.apiKey||r.config.apiKey,notifier:r.notifier,events:[c]},function(e){return n(e,c)}))},p=(f=S).length,h=0,(v=function(){if(p<=h)return g(null,!1);d(f[h],function(e,t){return e?g(e,!1):!0===t?g(null,!0):(h++,void v())})})()},r}(),fe=function(e,t,n){function r(e){var t=pe(e);return n.warn("Usage error. "+t),new Error("Bugsnag usage error. "+t)}var o,i,a=0;switch(typeof e){case"string":"string"==typeof t?(o=r("string/string"),i={metaData:{notifier:{notifyArgs:[e,t]}}}):(o=new Error(String(e)),a=3);break;case"number":case"boolean":o=new Error(String(e));break;case"function":o=r("function");break;case"object":null!==e&&(R(e)||e.__isBugsnagReport)?o=e:null!==e&&de(e)?((o=new Error(e.message||e.errorMessage)).name=e.name||e.errorClass,a=3):o=r(null===e?"null":"unsupported object");break;default:o=r("nothing")}return{err:o,errorFramesToSkip:a,_opts:i}},de=function(e){return!("string"!=typeof e.name&&"string"!=typeof e.errorClass||"string"!=typeof e.message&&"string"!=typeof e.errorMessage)},ge=function(e){return"Bugsnag configuration error\n"+se(e,function(e){return'"'+e.key+'" '+e.message+" \n    got "+he(e.value)}).join("\n\n")},pe=function(e){return"notify() expected error/opts parameters, got "+e},he=function(e){return"object"==typeof e?JSON.stringify(e):String(e)},ve=le,me=20,ye=25e3,be=8,Se="...";function we(e){return"[Throws: "+(e?e.message:"?")+"]"}var Oe={},je=["events.[].app","events.[].metaData","events.[].user","events.[].breadcrumbs","events.[].request","events.[].device"],Ee=["device","app","user"];Oe.report=function(e,t){var n=ae(e,null,null,{filterPaths:je,filterKeys:t});if(1e6<n.length&&(delete e.events[0].metaData,e.events[0].metaData={notifier:"WARNING!\nSerialized payload was "+n.length/1e6+"MB (limit = 1MB)\nmetaData was removed"},1e6<(n=ae(e,null,null,{filterPaths:je,filterKeys:t})).length))throw new Error("payload exceeded 1MB limit");return n},Oe.session=function(e,t){var n=ae(e,null,null,{filterPaths:Ee,filterKeys:t});if(1e6<n.length)throw new Error("payload exceeded 1MB limit");return n};var Ne=c,Be=function(a){return void 0===a&&(a=window),{sendReport:function(t,e,n,r){void 0===r&&(r=function(){});var o=Re(e,"notify","4",a),i=new a.XDomainRequest;i.onload=function(){r(null)},i.open("POST",o),setTimeout(function(){try{i.send(Oe.report(n,e.filters))}catch(e){t.error(e),r(e)}},0)},sendSession:function(t,e,n,r){void 0===r&&(r=function(){});var o=Re(e,"sessions","1",a),i=new a.XDomainRequest;i.onload=function(){r(null)},i.open("POST",o),setTimeout(function(){try{i.send(Oe.session(n,e.filters))}catch(e){t.error(e),r(e)}},0)}}},Re=function(e,t,n,r){return ke(e.endpoints[t],r.location.protocol)+"?apiKey="+encodeURIComponent(e.apiKey)+"&payloadVersion="+n+"&sentAt="+encodeURIComponent(Ne())},ke=Be._matchPageProtocol=function(e,t){return"http:"===t?e.replace(/^https:/,"http:"):e},_e=c,De={init:function(e,t){void 0===t&&(t=window),e.config.beforeSend.unshift(function(e){e.context||(e.context=t.location.pathname)})}};function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Le=c,qe={init:function(e,t){void 0===t&&(t=navigator);var n={locale:t.browserLanguage||t.systemLanguage||t.userLanguage||t.language,userAgent:t.userAgent};e.device=xe({},n,e.device),e.config.beforeSend.unshift(function(e){e.device=xe({},e.device,{time:Le()})})}};function Ce(){return(Ce=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Te={init:function(e,t){void 0===t&&(t=window),e.config.beforeSend.unshift(function(e){e.request&&e.request.url||(e.request=Ce({},e.request,{url:t.location.href}))})}};function Me(){return(Me=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Pe=u,Ae=s,Ve={init:function(e){return e.sessionDelegate(He)}},He={startSession:function(e){var t=e;t._session=new e.BugsnagSession;var n=w(t);return Pe(t.config.notifyReleaseStages)&&!Ae(t.config.notifyReleaseStages,n)?t._logger.warn("Session not sent due to releaseStage/notifyReleaseStages configuration"):t.config.endpoints.sessions?t._delivery.sendSession(t._logger,t.config,{notifier:t.notifier,device:t.device,app:Me({},{releaseStage:n},t.app),sessions:[{id:t._session.id,startedAt:t._session.startedAt,user:t.user}]}):t._logger.warn("Session not sent due to missing endpoints.sessions configuration"),t}};function $e(){return($e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ue={init:function(e){e.config.collectUserIp||e.config.beforeSend.push(function(e){e.user&&void 0===e.user.id&&delete e.user.id,e.user=$e({id:"[NOT COLLECTED]"},e.user),e.request=$e({clientIp:"[NOT COLLECTED]"},e.request)})},configSchema:{collectUserIp:{defaultValue:function(){return!0},message:"should be true|false",validate:function(e){return!0===e||!1===e}}}},Fe={},Ke=e,Ie=r,Xe=o;Fe.init=function(i){var e=/^dev(elopment)?$/.test(i.config.releaseStage),t=!1===i.config.consoleBreadcrumbsEnabled,n=(!1===i.config.autoBreadcrumbs||e)&&!0!==i.config.consoleBreadcrumbsEnabled;t||n||Ke(Je,function(r){var o=console[r];console[r]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.leaveBreadcrumb("Console output",Ie(t,function(e,t,n){var r="[Unknown value]";try{r=String(t)}catch(e){}if("[object Object]"===r)try{r=JSON.stringify(t)}catch(e){}return e["["+n+"]"]=r,e},{severity:0===r.indexOf("group")?"log":r}),"log"),o.apply(console,t)},console[r]._restore=function(){console[r]=o}})},Fe.configSchema={consoleBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"should be true|false"}};var Je=Xe(["log","debug","info","warn","error"],function(e){return"undefined"!=typeof console&&"function"==typeof console[e]}),ze={},Ge=r,We=/^.*<script.*?>/,Ye=/<\/script>.*$/,Ze=(ze={init:function(e,t,n){void 0===t&&(t=document),void 0===n&&(n=window);function s(){return t.documentElement.outerHTML}var u="",c=!1,l=n.location.href,u=s(),r=t.onreadystatechange;t.onreadystatechange=function(){"interactive"===t.readyState&&(u=s(),c=!0),"function"==typeof r&&r.apply(this,arguments)},e.config.beforeSend.unshift(function(e){var r=e.stacktrace[0];if(!r||!r.file||!r.lineNumber)return r;if(r.file.replace(/#.*$/,"")!==l.replace(/#.*$/,""))return r;c&&u||(u=s());var t=["\x3c!-- DOC START --\x3e"].concat(u.split("\n")),n=Ze(t,r.lineNumber-1),o=n.script,i=n.start,a=Ge(o,function(e,t,n){return 10<Math.abs(i+n+1-r.lineNumber)||(e[""+(i+n+1)]=t),e},{});r.code=a,e.updateMetaData("script",{content:o.join("\n")})})}}).extractScriptContent=function(e,t){for(var n=t;n<e.length&&!Ye.test(e[n]);)n++;for(var r=n;0<n&&!We.test(e[n]);)n--;var o=n,i=e.slice(o,r+1);return i[0]=i[0].replace(We,""),i[i.length-1]=i[i.length-1].replace(Ye,""),{script:i,start:o}},Qe={init:function(r,o){var e,t;void 0===o&&(o=window),"addEventListener"in o&&(e=!1===r.config.interactionBreadcrumbsEnabled,t=!1===r.config.autoBreadcrumbs&&!0!==r.config.interactionBreadcrumbsEnabled,e||t||o.addEventListener("click",function(e){var t,n;try{t=et(e.target),n=function e(t,n){var r=[t.tagName];t.id&&r.push("#"+t.id);t.className&&t.className.length&&r.push("."+t.className.split(" ").join("."));if(!n.document.querySelectorAll||!Array.prototype.indexOf)return r.join("");try{if(1===n.document.querySelectorAll(r.join("")).length)return r.join("")}catch(e){return r.join("")}{var o;1<t.parentNode.childNodes.length&&(o=Array.prototype.indexOf.call(t.parentNode.childNodes,t)+1,r.push(":nth-child("+o+")"))}if(1===n.document.querySelectorAll(r.join("")).length)return r.join("");if(t.parentNode)return e(t.parentNode,n)+" > "+r.join("");return r.join("")}(e.target,o)}catch(e){n=t="[hidden]",r._logger.error("Cross domain error when tracking click event. See docs: https://tinyurl.com/y94fq5zm")}r.leaveBreadcrumb("UI click",{targetText:t,targetSelector:n},"user")},!0))},configSchema:{interactionBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"should be true|false"}}},et=function(e){var t,n,r=e.textContent||e.innerText||"";return r||"submit"!==e.type&&"button"!==e.type||(r=e.value),r=r.replace(/^\s+|\s+$/g,""),n=140,(t=r)&&t.length<=n?t:t.slice(0,n-"(...)".length)+"(...)"};var tt,nt,rt={init:function(n,r){var e,t,o;void 0===r&&(r=window),"addEventListener"in r&&(e=!1===n.config.navigationBreadcrumbsEnabled,t=!1===n.config.autoBreadcrumbs&&!0!==n.config.navigationBreadcrumbsEnabled,e||t||(o=function(e){return function(){return n.leaveBreadcrumb(e,{},"navigation")}},r.addEventListener("pagehide",o("Page hidden"),!0),r.addEventListener("pageshow",o("Page shown"),!0),r.addEventListener("load",o("Page loaded"),!0),r.document.addEventListener("DOMContentLoaded",o("DOMContentLoaded"),!0),r.addEventListener("load",function(){return r.addEventListener("popstate",o("Navigated back"),!0)}),r.addEventListener("hashchange",function(e){var t=e.oldURL?{from:ot(e.oldURL,r),to:ot(e.newURL,r),state:at(r)}:{to:ot(r.location.href,r)};n.leaveBreadcrumb("Hash changed",t,"navigation")},!0),r.history.replaceState&&it(n,r.history,"replaceState",r),r.history.pushState&&it(n,r.history,"pushState",r),n.leaveBreadcrumb("Bugsnag loaded",{},"navigation")))},configSchema:{navigationBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"should be true|false"}}},ot=function(e,t){var n=t.document.createElement("A");return n.href=e,""+n.pathname+n.search+n.hash},it=function(u,c,l,f){var d=c[l];c[l]=function(e,t,n){var r,o,i,a,s;u.leaveBreadcrumb("History "+l,(o=e,i=t,a=n,s=ot((r=f).location.href,r),{title:i,state:o,prevState:at(r),to:a||s,from:s}),"navigation"),"function"==typeof u.refresh&&u.refresh(),u.config.autoCaptureSessions&&u.startSession(),d.apply(c,[e,t].concat(void 0!==n?n:[]))},c[l]._restore=function(){c[l]=d}},at=function(e){try{return e.history.state}catch(e){}},st={},ut="request",ct="BS~~U",lt="BS~~M",ft=s,dt=function(){return[tt.config.endpoints.notify,tt.config.endpoints.sessions]};st.init=function(e,t){void 0===t&&(t=window);var n=!1===e.config.networkBreadcrumbsEnabled,r=!1===e.config.autoBreadcrumbs&&!0!==e.config.networkBreadcrumbsEnabled;n||r||(tt=e,nt=t,gt(),vt())},st.configSchema={networkBreadcrumbsEnabled:{defaultValue:function(){},validate:function(e){return!0===e||!1===e||void 0===e},message:"should be true|false"}};var gt=function(){var n;"addEventListener"in nt.XMLHttpRequest.prototype&&(n=nt.XMLHttpRequest.prototype.open,nt.XMLHttpRequest.prototype.open=function(e,t){this[ct]=t,this[lt]=e,this["BS~~S"]&&(this.removeEventListener("load",pt),this.removeEventListener("error",ht)),this.addEventListener("load",pt),this.addEventListener("error",ht),this["BS~~S"]=!0,n.apply(this,arguments)})};function pt(){var e;ft(dt(),this[ct])||(e={status:this.status,request:this[lt]+" "+this[ct]},400<=this.status?tt.leaveBreadcrumb("XMLHttpRequest failed",e,ut):tt.leaveBreadcrumb("XMLHttpRequest succeeded",e,ut))}function ht(){ft(dt(),this[ct])||tt.leaveBreadcrumb("XMLHttpRequest error",{request:this[lt]+" "+this[ct]},ut)}var vt=function(){var a;"fetch"in nt&&(a=nt.fetch,nt.fetch=function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var o=r[0],n=r[1],i="GET";return n&&n.method&&(i=n.method),new Promise(function(t,n){a.apply(void 0,r).then(function(e){mt(e,i,o),t(e)}).catch(function(e){yt(i,o),n(e)})})})},mt=function(e,t,n){var r={status:e.status,request:t+" "+n};400<=e.status?tt.leaveBreadcrumb("fetch() failed",r,ut):tt.leaveBreadcrumb("fetch() succeeded",r,ut)},yt=function(e,t){tt.leaveBreadcrumb("fetch() error",{request:e+" "+t},ut)},bt=l.intRange,St={init:function(t){var n=0;t.config.beforeSend.push(function(e){return n>=t.config.maxEvents?e.ignore():void n++}),t.refresh=function(){n=0}},configSchema:{maxEvents:{defaultValue:function(){return 10},message:"should be a positive integer 100",validate:function(e){return bt(1,100)(e)}}}},wt={};function Ot(){return(Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var jt=e,Et=(wt={init:function(e){e.config.beforeSend.push(function(e){e.stacktrace=jt(e.stacktrace,function(e){return Ot({},e,{file:Et(e.file)})})})}})._strip=function(e){return"string"==typeof e?e.replace(/\?.*$/,"").replace(/#.*$/,""):e},Nt={init:function(c,e){void 0===e&&(e=window);var l=e.onerror;e.onerror=function(e,t,n,r,o){var i,a,s,u;0===n&&/Script error\.?/.test(e)?c._logger.warn("Ignoring cross-domain or eval script error. See docs: https://tinyurl.com/y94fq5zm"):(i={severity:"error",unhandled:!0,severityReason:{type:"unhandledException"}},o?o.name&&o.message?u=new c.BugsnagReport(o.name,o.message,Bt(c.BugsnagReport.getStacktrace(o),t,n,r),i,o):(u=new c.BugsnagReport("window.onerror",String(o),Bt(c.BugsnagReport.getStacktrace(o,1),t,n,r),i,o)).updateMetaData("window onerror",{error:o}):"object"!=typeof e||null===e||t&&"string"==typeof t||n||r||o?(u=new c.BugsnagReport("window.onerror",String(e),Bt(c.BugsnagReport.getStacktrace(o,1),t,n,r),i,e)).updateMetaData("window onerror",{event:e}):(a=e.type?"Event: "+e.type:"window.onerror",s=e.message||e.detail||"",(u=new c.BugsnagReport(a,s,c.BugsnagReport.getStacktrace(new Error,1).slice(1),i,e)).updateMetaData("window onerror",{event:e,extraParameters:t})),c.notify(u)),"function"==typeof l&&l.apply(this,arguments)}}},Bt=function(e,t,n,r){var o=e[0];return o&&(o.fileName||"string"!=typeof t||o.setFileName(t),!o.lineNumber&&Rt(n)&&o.setLineNumber(n),o.columnNumber||(Rt(r)?o.setColumnNumber(r):window.event&&Rt(window.event.errorCharacter)&&o.setColumnNumber(window.event.errorCharacter))),e},Rt=function(e){return"number"==typeof e&&"NaN"!==String.call(e)},kt={},_t=r;kt.init=function(i,e){void 0===e&&(e=window);function n(e){var t=e.reason,n=!1;try{e.detail&&e.detail.reason&&(t=e.detail.reason,n=!0)}catch(e){}var r,o={severity:"error",unhandled:!0,severityReason:{type:"unhandledPromiseRejection"}};t&&x(t)?(r=new i.BugsnagReport(t.name,t.message,L.parse(t),o,t),n&&(r.stacktrace=_t(r.stacktrace,xt(t),[]))):(r=new i.BugsnagReport(t&&t.name?t.name:"UnhandledRejection",t&&t.message?t.message:'Rejection reason was not an Error. See "Promise" tab for more detail.',[],o,t)).updateMetaData("promise","rejection reason",Dt(t)),i.notify(r)}"addEventListener"in e?e.addEventListener("unhandledrejection",n):e.onunhandledrejection=function(e,t){n({detail:{reason:e,promise:t}})},0};var Dt=function(e){if(null==e)return"undefined (or null)";if(R(e)){var t={};return t[Object.prototype.toString.call(e)]={name:e.name,message:e.message,code:e.code,stack:e.stack},t}return e},xt=function(n){return function(e,t){return t.file===n.toString()?e:(t.method&&(t.method=t.method.replace(/^\s+/,"")),e.concat(t))}},Lt={};function qt(){return(qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var Ct=e,Tt=qt({},f.schema,j);return(Lt=function(e){"string"==typeof e&&(e={apiKey:e});var t=[];e.sessionTrackingEnabled&&(t.push("deprecated option sessionTrackingEnabled is now called autoCaptureSessions"),e.autoCaptureSessions=e.sessionTrackingEnabled),!e.endpoint&&!e.sessionEndpoint||e.endpoints||(t.push("deprecated options endpoint/sessionEndpoint are now configured in the endpoints object"),e.endpoints={notify:e.endpoint,sessions:e.sessionEndpoint}),e.endpoints&&e.endpoints.notify&&!e.endpoints.sessions&&t.push("notify endpoint is set but sessions endpoint is not. No sessions will be sent.");var a,n=new ve({name:"Bugsnag JavaScript",version:"6.1.0",url:"https://github.com/bugsnag/bugsnag-js"});return n.setOptions(e),n.delivery(window.XDomainRequest?Be():(void 0===a&&(a=window),{sendReport:function(t,e,n,r){void 0===r&&(r=function(){});try{var o=e.endpoints.notify,i=new a.XMLHttpRequest;i.onreadystatechange=function(){i.readyState===a.XMLHttpRequest.DONE&&r(null)},i.open("POST",o),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Bugsnag-Api-Key",n.apiKey||e.apiKey),i.setRequestHeader("Bugsnag-Payload-Version","4"),i.setRequestHeader("Bugsnag-Sent-At",_e()),i.send(Oe.report(n,e.filters))}catch(e){t.error(e)}},sendSession:function(t,e,n,r){void 0===r&&(r=function(){});try{var o=e.endpoints.sessions,i=new a.XMLHttpRequest;i.onreadystatechange=function(){i.readyState===a.XMLHttpRequest.DONE&&r(null)},i.open("POST",o),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Bugsnag-Api-Key",e.apiKey),i.setRequestHeader("Bugsnag-Payload-Version","1"),i.setRequestHeader("Bugsnag-Sent-At",_e()),i.send(Oe.session(n,e.filters))}catch(e){t.error(e)}}})),n.configure(Tt),Ct(t,function(e){return n._logger.warn(e)}),n.use(qe),n.use(De),n.use(Te),n.use(ze),n.use(St),n.use(Ve),n.use(Ue),n.use(wt),!1!==n.config.autoNotify&&(n.use(Nt),n.use(kt)),n.use(rt),n.use(Qe),n.use(st),n.use(Fe),n._logger.debug("Loaded!"),n.config.autoCaptureSessions?n.startSession():n}).Bugsnag={Client:ve,Report:U,Session:oe,Breadcrumb:B},Lt.default=Lt});
define('main/user_controller',["require","exports","tslib","jquery","lib/urlparser","./account_backend","lib/underscore-shim"],function(require,t,i,e,n,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.computeFirstName=t.UserController=void 0;var s,g=(s=o.UnderscoreModelShim,i.__extends(a,s),a.prototype.desmosLogin=function(t){return r.fetchUser(t).done(this.completeLogin.bind(this))},a.prototype.googleLogin=function(t){this.triggerEvent("googleLogin",t)},a.prototype.appleLogin=function(t){this.triggerEvent("appleLogin",t)},a.prototype.askServerIfLoggedIn=function(){return r.askServerIfLoggedIn().then(this.completeLogin.bind(this),this.logout.bind(this))},a.prototype.driveCallback=function(){return this.askServerIfLoggedIn()},a.prototype.createAccount=function(t){var e=i.__assign({},t);return!1===e.teacher&&delete e.teacher,r.registerUser(e).done(this.completeLogin.bind(this))},a.prototype.checkPendingDeletion=function(t){return r.checkPendingDeletion(t)},a.prototype.isTeacher=function(){return!!this.teacher},a.prototype.setName=function(t){var e=this;return r.setName(t).done(function(t){e.name=t.name||"",e.triggerEvent("userUpdated",void 0),e.triggerEvent("triggerRender",void 0)})},a.prototype.recoverPassword=function(t){return r.recoverPassword(t)},a.prototype.completeLogin=function(t){this.loggedIn=!0,this.userId=t.userId||"",this.name=t.name||"",this.email=t.email||"",this.subscriptions=t.subscriptions||[],this.verificationStatus=t.verificationStatus||"",this.privacyConsent=t.privacyConsent,this.teacher=!!t.isTeacher,this.triggerEvent("loginChanged",void 0),this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)},a.prototype.logout=function(){var t=this;return this.loggingOut=!0,this.triggerEvent("logout",void 0),this.triggerEvent("triggerRender",void 0),r.logout().done(this.completeLogout.bind(this)).fail(this._onLogoutFailure.bind(this)).always(function(){t.loggingOut=!1,t.triggerEvent("triggerRender",void 0)})},a.prototype.completeLogout=function(){this.loggedIn=!1,this.logoutFailed=!1,this.userId="",this.email="",this.name="",this.subscriptions=[],this.verificationStatus="",this.privacyConsent=null,this.teacher=!1,this.triggerEvent("loginChanged",void 0),this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)},a.prototype._onLogoutFailure=function(){var t=this;this.logoutFailed=!0,this.triggerEvent("triggerRender",void 0),setTimeout(function(){t.logoutFailed=!1,t.triggerEvent("triggerRender",void 0)},2e3)},a.prototype.initiateAccountDeletion=function(t){return r.initiateAccountDeletion(t)},a.prototype.getEmailChangeToken=function(){return n.getParameter(location.search,"changeToken")},a.prototype.initiateEmailChange=function(t){return r.initiateEmailChange(t)},a.prototype.setEmail=function(t){var e=this;return r.setEmail(t).done(function(){e.email=t.newEmail||"",e.verificationStatus="VERIFYING",e.triggerEvent("userUpdated",void 0),e.triggerEvent("triggerRender",void 0)})},a.prototype.setPrivacyConsent=function(t){var e=this;return this.consentingToPrivacy=!0,this.triggerEvent("triggerRender",void 0),r.setPrivacyConsent(t).done(this.completePrivacyConsent.bind(this)).fail(this.onPrivacyConsentFailure.bind(this)).always(function(){e.consentingToPrivacy=!1,e.triggerEvent("triggerRender",void 0)})},a.prototype.completePrivacyConsent=function(t){this.privacyConsent=t.privacyConsent,this.triggerEvent("userUpdated",void 0),this.triggerEvent("triggerRender",void 0)},a.prototype.onPrivacyConsentFailure=function(){var t=this;this.privacyConsentFailed=!0,this.triggerEvent("triggerRender",void 0),setTimeout(function(){t.privacyConsentFailed=!1,t.triggerEvent("triggerRender",void 0)},2e3)},a.prototype.didPrivacyConsentFail=function(){return!!this.privacyConsentFailed},a.prototype.isConsentingToPrivacy=function(){return!!this.consentingToPrivacy},a.prototype.isLoggedIn=function(){return!!this.loggedIn},a.prototype.isLoggingOut=function(){return!!this.loggingOut},a.prototype.didLogoutFail=function(){return!!this.logoutFailed},a.prototype.getEmail=function(){return this.email},a.prototype.getFirstName=function(){return u(this.name)},a.prototype.getFullName=function(){return this.name},a.prototype.getUserId=function(){return this.userId},a.prototype.getSubscriptions=function(){return this.subscriptions},a.prototype.getVerificationStatus=function(){return this.verificationStatus},a.prototype.hasConsentedToCollection=function(){return!!this.privacyConsent},a.prototype.getUserAsJSON=function(){return this.isLoggedIn()?{email:this.email,name:this.name,verificationStatus:this.verificationStatus,subscriptions:this.subscriptions,privacyConsent:this.privacyConsent}:void 0},a);function a(){var t=s.call(this)||this;return t.loggedIn=!1,t.logoutFailed=!1,t.loggingOut=!1,t.consentingToPrivacy=!1,t.privacyConsentFailed=!1,t.userId="",t.name="",t.email="",t.teacher=!1,t.verificationStatus="",t.subscriptions=[],t.privacyConsent=null,e.ajaxSetup({statusCode:{401:function(){return t.logout()}}}),t}function u(t){if(!t)return"";if(t.match(/[\d@_&\.\']/))return t;var e=t.split(" ");return 3<=e[0].length?e[0]:t}t.UserController=g,t.computeFirstName=u});
define('main/calculator_3d_backend',['require','main/graph','./backend'],function(require){"use strict";var e=require("main/graph"),s=require("./backend");return{saveGraph:function(a,r){if(!r.hasOwnProperty("myGraphs"))throw new Error("Argument Error: saveGraph options must specify myGraphs");if(!r.hasOwnProperty("isUpdate"))throw new Error("Argument Error: saveGraph options must specify isUpdate");var t={parent_hash:a.parentHash,thumb_data:a.thumbURL,graph_hash:a.hash,my_graphs:r.myGraphs,is_update:r.isUpdate,title:a.title||void 0};return t.state=a.graphData,s.post("/api/v1/calculator_3d/save",t).then(function(r){return e.updateFromSync(a,r),a})},getGraphs:function(){return s.getJSON("/api/v1/calculator_3d/my_graphs")},removeGraph:function(r){return s.post("/api/v1/calculator_3d/my_graphs/remove",{hash:r.hash})}}});
define('main/geometry_backend',['require','main/graph','./backend'],function(require){"use strict";var o=require("main/graph"),s=require("./backend");return{saveConstruction:function(r,t){if(!t.hasOwnProperty("myConstructions"))throw new Error("Argument Error: saveConstruction options must specify myConstructions");if(!t.hasOwnProperty("isUpdate"))throw new Error("Argument Error: saveConstruction options must specify isUpdate");var n={state:r.graphData,parent_hash:r.parentHash,thumb_data:r.thumbURL,hash:r.hash,my_constructions:t.myConstructions,is_update:t.isUpdate,title:r.title||void 0};return s.post("/api/v1/geometry/save",n).then(function(t){return o.updateFromSync(r,t),r})},getConstructions:function(){return s.getJSON("/api/v1/geometry/my_constructions")},removeConstruction:function(t){return s.post("/api/v1/geometry/my_constructions/remove",{hash:t.hash})}}});
define('lib/random_hash',['require','exports','module'],function(require,t){"use strict";function n(t){this.bauArc4=new r(function(t){var n,r=t+"",o=[],e=0;for(n=0;n<r.length;n++)o[c(n)]=c((e^=19*o[c(n)])+r.charCodeAt(n));return o}(t))}n.prototype.g=function(t){for(var n=Array(t),r=0;r<t;r++)n[r]=this.bauArc4.g(1);return n};var f=256;function c(t){return t&f-1}function r(t){var n,r,u=this,o=t.length,e=0,i=u.i=u.j=u.m=0;for(u.S=[],u.c=[],o||(t=[o++]);e<f;)u.S[e]=e++;for(e=0;e<f;e++)i=c(i+(n=u.S[e])+t[e%o]),r=u.S[i],u.S[e]=r,u.S[i]=n;u.g=function(t){var n=u.S,r=c(u.i+1),o=n[r],e=c(u.j+o),i=n[e];n[r]=i,n[e]=o;for(var a=n[c(o+i)];--t;)r=c(r+1),i=n[e=c(e+(o=n[r]))],n[r]=i,n[e]=o,a=a*f+n[c(o+i)];return u.i=r,u.j=e,a},u.g(f)}function o(t){if(!t||!t.length||t.length<32)throw new Error("You must supply a seed to RandomHashFactory. It should have at least 128 bits of entropy, but was "+t);var o=new n(t);this.next=function(){for(var t,n=Array(10),r=0;r<10;)(t=o.g(1)[0]>>2)<62&&(n[r]=i[t],r++);return n.join("")},this.nextSeed=function(){for(var t=o.g(16),n=Array(16),r=0;r<16;r++)n[r]=t[r].toString(16),1===n[r].length&&(n[r]="0"+n[r]);return n.join("")}}var e,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".toLowerCase();return t.next=function(){if(!e)throw"Random Hash Factory not initialized";return e.next()},t.nextSeed=function(){if(!e)throw"Random Hash Factory not initialized";return e.nextSeed()},t.init=function(t){e=new o(t)},t});
define('main/graphs_controller',["require","exports","main/graph","main/calculator_3d_backend","main/geometry_backend","lib/random_hash","lib/animation-frame","tslib","jquery","underscore","main/calculator_backend","lib/parse-json-errors","lib/underscore-shim","bugsnag","analytics/looker"],function(require,e,p,s,h,c,o,t,n,g,d,u,r,a,v){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.GraphsController=void 0;var l,i=(l=r.UnderscoreModelShim,t.__extends(y,l),y.prototype._seedRandom=function(e){var t,r;e?(r=""+e+(t=new Date).getTime()+t.getMilliseconds(),this.randomHash.init(r)):alert(this.s("account-shell-error-something-went-wrong",{error_num:"77361"}))},y.prototype.requestDeleteGraph=function(e){var t=this._getCachedGraphInfo(e);t.canCancelDelete=!0,t.deleteTimeout=setTimeout(this._deleteGraph.bind(this,e),3e3),t.isDeletingGraph=!0,t.didDeleteGraphFail=!1,this.triggerEvent("listChanged",void 0),this.triggerEvent("triggerRender",void 0)},y.prototype._removeSavedGraphByHash=function(t){this.__savedGraphs=g.filter(this.__savedGraphs,function(e){return e.hash!==t})},y.prototype._removeRecoveryGraphByHash=function(t){this.__recoveryGraphs=g.filter(this.__recoveryGraphs,function(e){return e.hash!==t})},y.prototype._deleteGraph=function(e){var t,r=this,a=e.hash,i=this._getCachedGraphInfo(e);switch(i.canCancelDelete=!1,this.triggerEvent("listChanged",void 0),this.triggerEvent("triggerRender",void 0),this.product){case"graphing":t=d.removeGraph({hash:a,lang:this.getLanguage()});break;case"graphing3d":t=s.removeGraph(e);break;case"geometry":t=h.removeConstruction(e)}return t.done(function(){r._removeSavedGraphByHash(a),r._removeRecoveryGraphByHash(a)}).fail(function(){i.didDeleteGraphFail=!0}).always(function(){i.isDeletingGraph=!1,r.triggerEvent("listChanged",void 0),r.triggerEvent("triggerRender",void 0)})},y.prototype.cancelDeleteGraph=function(e){var t=this._getCachedGraphInfo(e);clearTimeout(t.deleteTimeout),t.isDeletingGraph=!1,t.didDeleteGraphFail=!1,t.canCancelDelete=!1,this.triggerEvent("listChanged",void 0),this.triggerEvent("triggerRender",void 0)},y.prototype.millisecondsSinceSync=function(){return this.lastSync?Date.now()-this.lastSync:1/0},y.prototype.clear=function(){this.lastSync=void 0,this.setSavedGraphsFromJSON([]),this.setRecoveryGraphsFromJSON([])},y.prototype.dismissSaveError=function(){this.recentSaveFailure=!1,this.triggerEvent("triggerRender",void 0)},y.prototype._triggerSaveSuccess=function(){var e=this;this.saving=!1,this.recentSaveSuccess=!0,this.lastSaveFailureMessage=void 0,this.triggerEvent("triggerRender",void 0),this.recentSaveTimeout=setTimeout(function(){e.recentSaveSuccess=!1,e.triggerEvent("triggerRender",void 0)},3e3)},y.prototype._triggerSaveError=function(e){var t=e.length&&e[0].message?e[0].message:this.s("account-shell-error-unexpected-error");this.saving=!1,this.recentSaveFailure=!0,this.lastSaveFailureMessage=t,this.triggerEvent("triggerRender",void 0),this.recentSaveTimeout=setTimeout(this.dismissSaveError.bind(this),6e4)},y.prototype._updateGraphData=function(e){var t=JSON.stringify(this.api.getState());e.setProperty("graphData",t),e.setProperty("parentHash",e.hash),e.setProperty("recoveryParentHash",this.recoveryParentHash);var r=this.randomHash.next();e.setProperty("hash",r),this.recoveryParentHash=r;var a=this.api.screenshot({width:200,height:200,targetPixelRatio:2});e.setProperty("thumbURL",a)},y.prototype._clearSaveTimeout=function(){this.recentSaveFailure=!1,this.recentSaveSuccess=!1,this.lastSaveFailureMessage=void 0,this.triggerEvent("triggerRender",void 0),clearTimeout(this.recentSaveTimeout)},y.prototype.save=function(e){var t=this,r=e&&e.newTitle,a=!(!e||!e.saveCopy);r&&(this.currentGraph.title=r),this._clearSaveTimeout(),this.saving=!0,this.triggerEvent("triggerRender",void 0);var i=this.currentGraph.copy();i.recovery&&(i.recovery=!1,v.logJSON("recovered-graph",{product:this.product,timeSincePageload:Date.now()-this.pageLoadTime,payloadJSON:{action:"save"}})),this._updateGraphData(i);var o,n=!a&&this.wasCurrentGraphEverSaved();switch(this.product){case"graphing":o=d.saveGraph(i,{myGraphs:!0,isUpdate:n,lang:this.getLanguage()});break;case"graphing3d":o=s.saveGraph(i,{myGraphs:!0,isUpdate:n});break;case"geometry":o=h.saveConstruction(i,{myConstructions:!0,isUpdate:n})}o.done(function(e){t.currentGraph=e.copy(),t._onCurrentGraphChanged(),t.triggerEvent("clearUnsavedChanges",void 0),t.triggerEvent("triggerRender",void 0),n&&t._removeSavedGraphByHash(e.parentHash),e.draft&&t._removeRecoveryGraphByHash(e.parentHash),t.__savedGraphs.unshift(e),t._addGraphToCache(e),t.triggerEvent("listChanged",void 0),t.triggerEvent("triggerRender",void 0),t._triggerSaveSuccess()}).fail(function(e){t._triggerSaveError(u.rawParseJSONErrors(e))})},y.prototype.shareGraph=function(){var e,t=this.currentGraph.copy();switch(this._updateGraphData(t),this.product){case"graphing":e=d.saveGraph(t,{myGraphs:!1,isUpdate:!1,lang:this.getLanguage()});break;case"graphing3d":e=s.saveGraph(t,{myGraphs:!1,isUpdate:!1});break;case"geometry":e=h.saveConstruction(t,{myConstructions:!1,isUpdate:!1})}return e},y.prototype.saveRecoveryGraph=function(){var e=this.currentGraph.copy(),t=JSON.stringify(this.api.getState());e.setProperty("graphData",t),e.setProperty("parentHash",e.hash),e.setProperty("recoveryParentHash",this.recoveryParentHash);var r=this.randomHash.next()+this.randomHash.next();e.setProperty("hash",r),this.recoveryParentHash=r;var a=this.api.screenshot({width:200,height:200,targetPixelRatio:2});return e.setProperty("thumbURL",a),d.saveGraph(e,{myGraphs:!1,isUpdate:!1,recovery:!0,lang:this.getLanguage()})},y.prototype.isCurrentGraphTitled=function(){return!!this.currentGraph.title},y.prototype.isCurrentGraphARecoveryGraph=function(){var e=this.currentGraph;if(!e||!e.hash)return!1;var t=e.hash;return g.any(this.__recoveryGraphs,function(e){return e.hash===t})},y.prototype.wasCurrentGraphEverSaved=function(){var e=this.currentGraph;if(!e||!e.hash)return!1;var t=e.hash;return g.any(this.__savedGraphs,function(e){return e.hash===t})},y.prototype.isRecoveryUIEnabledForProduct=function(){return"graphing"===this.product},y.prototype.fetchRecoveryGraphs=function(){var e,t=this,r=Date.now();switch(this.isLoadingRecoveryGraphs=!0,clearTimeout(this.fetchDurationTimeout),this.triggerEvent("triggerRender",void 0),this.product){case"graphing":e=d.getRecoveryGraphs({lang:this.getLanguage()});break;case"graphing3d":throw new Error("code error: should not fetchRecoveryGraphs for 3d");case"geometry":throw new Error("code error: should not fetchRecoveryGraphs for geometry")}e.done(function(e){t.setRecoveryGraphsFromJSON(e.recoveryGraphs||e.recoveryConstructions)}).fail(function(){t.triggerEvent("onRecoveryGraphsError",void 0)}).always(function(){var e=2e3-(Date.now()-r);t.isLoadingRecoveryGraphs=!1,0<e?t.fetchDurationTimeout=setTimeout(function(){t.triggerEvent("triggerRender",void 0)},e):t.triggerEvent("triggerRender",void 0)})},y.prototype.clearRecoveryGraphsForTests=function(){return d.clearRecoveryGraphsForTests()},y.prototype.refreshGraphs=function(){var e,t=this;switch(this.isLoadingGraphs=!0,this.syncError=!1,this.triggerEvent("triggerRender",void 0),this.product){case"graphing":e=d.getGraphs({lang:this.getLanguage()});break;case"graphing3d":e=s.getGraphs();break;case"geometry":e=h.getConstructions()}e.done(function(e){t.lastSync=Date.now(),t.setSavedGraphsFromJSON(e.myGraphs||e.myConstructions)}).fail(function(){t.syncError=!0,t.triggerEvent("onSyncError",void 0)}).always(function(){t.isLoadingGraphs=!1,t.triggerEvent("triggerRender",void 0)})},y.prototype.getRecoveryGraphs=function(){return this.__recoveryGraphs.slice(0)},y.prototype.getSavedGraphs=function(){return this.__savedGraphs.slice(0)},y.prototype.getExampleGraphs=function(){return this.__exampleGraphs.slice(0)},y.prototype.getEasterEggGraphs=function(t){return g.filter(this.__easterEggGraphs,function(e){return e.easterEgg===t})},y.prototype.getSavedAndExampleGraphs=function(){return this.__savedGraphs.concat(this.__exampleGraphs)},y.prototype.setSavedGraphsFromJSON=function(e){var a=this;e=e||[],this.__savedGraphs=e.map(function(e){var t=p.fromAjax(e),r=a._getCachedGraphInfo(t);return r?r.graph:(a._addGraphToCache(t),t)}),this._lazyLoadGraphStates(),this.triggerEvent("listChanged",void 0),this.triggerEvent("triggerRender",void 0)},y.prototype.setRecoveryGraphsFromJSON=function(e){var a=this;e=e||[],this.__recoveryGraphs=e.map(function(e){var t=p.fromAjax(e);t.draft=!0,t.recovery=!0;var r=a._getCachedGraphInfo(t);return r?r.graph:(a._addGraphToCache(t),t)}),this._lazyLoadGraphStates(),this.triggerEvent("listChanged",void 0),this.triggerEvent("triggerRender",void 0)},y.prototype.getSavedGraphsAsJSON=function(){return this.__savedGraphs.map(p.toAjax)},y.prototype._enableLoadingGraphStates=function(){var e=this;clearTimeout(this.__loadNextGraphStateTimeout);var t=function(){e._loadNextGraphState(),e.__loadNextGraphStateTimeout=setTimeout(t,50)};t()},y.prototype._disableLoadingGraphStates=function(){clearTimeout(this.__loadNextGraphStateTimeout)},y.prototype._loadNextGraphState=function(){var e,t=this;this.__currentAjaxRequest||(e=this._dequeueGraphInfo())&&(this.__currentAjaxRequest=this.loadGraphImmediately(e.graph),this.__currentAjaxRequest.always(function(){t.__currentAjaxRequest=void 0}))},y.prototype.loadGraphImmediately=function(t){var r=this,a=n.Deferred();if(t.graphData)return o.requestAnimationFrame(function(){a.resolve()}),a;var e=t.stateURL,i=this._getCachedGraphInfo(t);return i.isDataLoading=!0,n.getJSON(e).done(function(e){t.graphData=e,i.didDataLoadFail=!1,a.resolve(e)}).fail(function(e){i.didDataLoadFail=!0,a.reject(e)}).always(function(e){i.isDataLoading=!1,r.triggerEvent("listChanged",void 0),r.triggerEvent("triggerRender",void 0)})},y.prototype._getCachedGraphInfo=function(e){return e&&this.__graphInfoCache[e.getCollectionKey()]},y.prototype._addGraphToCache=function(e){this.__graphInfoCache[e.getCollectionKey()]={graph:e}},y.prototype._enqueueGraphInfo=function(e){this.__nextAjaxRequestPriority||(this.__nextAjaxRequestPriority=0),e.ajaxPriority=++this.__nextAjaxRequestPriority},y.prototype._dequeueGraphInfo=function(){var e,t=-1/0;for(var r in this.__graphInfoCache){var a=this.__graphInfoCache[r],i=a.ajaxPriority;void 0!==i&&t<i&&(t=i,e=a)}return g.isObject(e)&&void 0!==e?(delete e.ajaxPriority,e):null},y.prototype.loadDataForGraph=function(e){if(e){var t=this._getCachedGraphInfo(e);if(!t)throw new Error('graphsController does not have a reference to graph with hash "'+e.hash+'"');t.graph.graphData||(t.isDataLoading=!0,t.didDataLoadFail=!1,this._enqueueGraphInfo(t),this.triggerEvent("triggerRender",void 0))}},y.prototype._lazyLoadGraphStates=function(){for(var e=this.getSavedAndExampleGraphs(),t=Math.min(20,e.length)-1;0<=t;t--)this.loadDataForGraph(e[t])},y.prototype.didDataLoadFail=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.didDataLoadFail)},y.prototype.didDeleteGraphFail=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.didDeleteGraphFail)},y.prototype.isDeletingGraph=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.isDeletingGraph)},y.prototype.canCancelDelete=function(e){var t=this._getCachedGraphInfo(e);return!(!t||!t.canCancelDelete)},y.prototype.loadGraph=function(e){this.previousGraph=this.currentGraph?this.currentGraph.copy():p(),this.previousGraph.graphData=JSON.stringify(this.api.getState());var t=e.copy();delete t.example,this.api.setState(t.graphData,{forceExpressionsOpen:!0,forceUnsavedChanges:!!t.recovery}),this.currentGraph=t,this._onCurrentGraphChanged(),this.recoveryParentHash=this.currentGraph.hash,this.triggerEvent("clearUndoRedo",void 0),t.recovery||this.triggerEvent("clearUnsavedChanges",void 0),this.triggerEvent("triggerRender",void 0)},y.prototype.restorePreviousGraph=function(){this.loadGraph(this.previousGraph||p())},y.prototype.clearGraph=function(){this.loadGraph(p()),this.triggerEvent("onClearGraph",void 0)},y.prototype._onCurrentGraphChanged=function(){var e=this.currentGraph;e.title?document.title=e.title:"graphing"===this.product?document.title=this.s("account-shell-heading-graphingcalc-page-title"):"graphing3d"===this.product?document.title=this.s("account-shell-heading-3dcalc-page-title"):document.title=this.s("account-shell-heading-geometry-page-title"),this._replaceState(e)},y.prototype._replaceState=function(e){var t;window.history&&history.replaceState&&(t=e.getURL())&&(window.location.search&&(t+=window.location.search),t!==window.location.href&&history.replaceState(e.hash,e.title,t))},y.prototype.toast=function(e,t){this.triggerEvent("toast",{message:e,opts:t})},y.prototype.clearGraphByUserAction=function(){var e,t=this;if(this.currentGraph.hash)return this.clearGraph(),e="geometry"===this.product?this.s("account-shell-text-new-construction-created"):this.s("account-shell-text-new-graph-created"),void this.toast(e,{undoCallback:function(){t.restorePreviousGraph(),t._replaceState(t.currentGraph)}});var r=this.api.getState();this.clearGraph(),e="geometry"===this.product?this.s("account-shell-text-construction-cleared"):this.s("account-shell-text-graph-cleared"),this.toast(e,{undoCallback:function(){t.api.setState(r,{forceExpressionsOpen:!0})}})},y.prototype.getSaveFailureMessage=function(){return this.lastSaveFailureMessage||""},y.prototype.isSaving=function(){return!!this.saving},y.prototype.didSaveFail=function(){return!!this.recentSaveFailure},y.prototype.didSaveSucceed=function(){return!!this.recentSaveSuccess},y.prototype.isSyncing=function(){return!!this.isLoadingGraphs},y.prototype.didSyncFail=function(){return!!this.syncError},y.prototype.getCurrentDisplayDate=function(){return this.currentGraph.displayDate()},y.prototype.getCurrentGraphTitle=function(){return this.currentGraph.title},y.prototype.getUntitledString=function(){return"geometry"===this.product?this.s("account-shell-text-untitled"):"graphing"===this.product||"graphing3d"===this.product?this.s("account-shell-text-untitled-graph"):(a.notify("Unknown product: "+this.product),"Untitled")},y.prototype.hasUnsavedChanges=function(){return this.api.hasUnsavedChanges()},y);function y(e){var t=e.api,r=e.s,a=e.getLanguage,i=e.examplesJSON,o=e.randomSeed,n=e.product,s=l.call(this)||this;s.product=n,s.api=t,s.s=r,s.getLanguage=a,s.previousGraph=void 0,s.recoveryParentHash=void 0,s.randomHash=c,s._seedRandom(o),s.__savedGraphs=[],s.__recoveryGraphs=[];var h=i.map(p.fromAjax);return s.__exampleGraphs=g.filter(h,function(e){return!e.easterEgg}),s.__easterEggGraphs=g.filter(h,function(e){return!!e.easterEgg}),s.__graphInfoCache={},s.__exampleGraphs.forEach(function(e){s._addGraphToCache(e)}),s.__easterEggGraphs.forEach(function(e){s._addGraphToCache(e)}),s.lastSync=void 0,s.lastSaveFailureMessage="",s.recentSaveFailure=!1,s.recentSaveSuccess=!1,s.saving=!1,s.syncError=!1,s.isLoadingGraphs=!1,s.currentGraph=p(),s._enableLoadingGraphStates(),s.pageLoadTime=Date.now(),s}e.GraphsController=i});
define('main/language_controller',["require","exports","lib/i18n","lib/urlparser"],function(require,e,n,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var t=(a.prototype.raw=function(e,t){return n.raw(e,t)},a.prototype.unpack=function(e){return n.unpack(e,this._language)},a.prototype.getLanguage=function(){return this._language},a.prototype.updateUrl=function(e){var t,n,a,r,o;window.history&&history.replaceState&&(t=location.origin,n=location.pathname,a=location.search,r=location.hash,o=""+t+n+i.setParameter(a,"lang",e)+r,history.replaceState(null,"",o))},a.prototype.setHeaderController=function(e){this.headerController=e},a.prototype.fetchAndSetLanguage=function(e){var t=this;n.fetchLanguage(e).then(function(){t._language=e,t.Calc.updateSettings({language:e}),t.headerController&&t.headerController.triggerRender(),t.updateUrl(e)})},a);function a(e){var t=this;this.s=n.createDictionaryLookupFunction(function(){return t._language}),this._language=n.detectLanguage(),this.Calc=e}e.default=t});
define('main/mygraphs_controller',['require','pjs','jquery','underscore_model','lib/aria','lib/conditional_blur','analytics/looker'],function(require){"use strict";var t=require("pjs"),n=require("jquery"),e=require("underscore_model").UnderscoreModel,r=require("lib/aria"),i=require("lib/conditional_blur").default,s=require("analytics/looker").logJSON;return t(e,function(t,o){t.init=function(t,e,r){o.init.call(this),this.graphsController=t,this.api=e,this.s=r,this.recoveryAttempted=!1,this.isOpen=!1,this.pageLoadTime=Date.now()},t.isMygraphsOpen=function(){return this.isOpen},t.hasAttemptedRecovery=function(){return this.recoveryAttempted},t.openMygraphs=function(t){this.recoveryAttempted=!1,this.isOpen=!0,n("body").addClass("resources-open"),s("user-action::open-my-graphs",{product:this.graphsController.product}),r.alert(this.s("account-shell-narration-mygraphs-open-graph")),i(),t&&"keyboard"===t.device&&n(".dcg-action-newblankgraph").focus(),this.triggerEvent("onOpenMygraphs")},t.closeMygraphs=function(){this.isOpen=!1,n("body").removeClass("resources-open")},t.openBlankGraph=function(){this.closeMygraphs(),this.graphsController.clearGraphByUserAction(),this.triggerEvent("triggerRender")},t.onOpenGraph=function(t){t.example||(t.recovery?s("recovered-graph",{product:this.graphsController.product,timeSincePageload:Date.now()-this.pageLoadTime,payloadJSON:{action:"open"}}):s("user-action::open-saved",{product:this.graphsController.product,timeSincePageload:Date.now()-this.pageLoadTime}));var e=this.copyGraphWithTranslation(t);this.graphsController.loadGraph(e),this._concludeOpenGraph(e)},t.toast=function(t,e){this.triggerEvent("toast",{message:t,opts:e})},t._concludeOpenGraph=function(t){var e=t.title||this.graphsController.getUntitledString(),r=this.s("account-shell-text-mygraphs-opened-graph",{graphTitle:e});this.toast(r,{undoCallback:function(){this.graphsController.restorePreviousGraph()}.bind(this)}),this.closeMygraphs(),this.triggerEvent("triggerRender")},t.copyGraphWithTranslation=function(t){var e=t.copy();return t.example&&(e.title=this.s(t.title)),e},t.openGraphBehindCover=function(t){var e=this.copyGraphWithTranslation(t);this.graphsController.loadGraph(e);var r=n.Deferred();return"graphing"===this.graphsController.product||"graphing3d"===this.graphsController.product?(this.api._calc.evaluator.notifyWhenSynced(function(){r.resolve()}),setTimeout(function(){r.resolve()},6e3)):"geometry"===this.graphsController.product&&r.resolve(),r.then(function(){this._concludeOpenGraph(e)}.bind(this)),r.promise()},t.getThumbnail=function(){return this.api.screenshot({width:200,height:200,targetPixelRatio:2})}})});
define('tours/tour_controller',['require','pjs','tours/all_tours','lib/urlparser','jquery'],function(require){"use strict";var t=require("pjs"),u=require("tours/all_tours"),o=require("lib/urlparser"),s=require("jquery");return t(function(t,r){t.init=function(t){this.tourManager=t._calc.tourManager,this.Calc=t._calc,this.tourManager.closingMsg=function(t,r){return"<b>"+t+"</b><br>"+this.Calc.controller.s("graphing-tours-label-self-destruct",{seconds:r})}.bind(this)},t.shouldPopupTour=function(t){if(3<this.Calc.controller.getItemCount())return!0;var r=u[t].tour(this.Calc);return!!r.shouldPopup&&r.shouldPopup()},t.startTour=function(t,r){var o;t&&u[t]&&(o=u[t].tour(this.Calc),this.tourManager.currentTour&&this.tourManager.stopTour(),this.tourManager.startTour(o))},t.startTourFromUrl=function(){var t;s(".dcg-expressionitem").length<2?setTimeout(this.startTourFromUrl.bind(this),100):(t=o.getParameter(location.search,"tour"),this.startTour(t,"url"))},t.setCalc=function(t){this.Calc=t}})});
define('calculator-shell/controller',["require","exports","config","jquery","underscore","flux","browser","keys","bugsnag","../analytics/looker","../lib/parse-json-errors","../lib/parse-query-params"],function(require,e,t,n,s,r,i,a,l,o,p,h){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Controller=void 0;var u=3e5;h.getQueryParams().fastAutoSave&&(u=5e3);var c=(d.prototype.triggerRender=function(){},d.prototype.hookupControllers=function(){var e=this;this.mygraphsController.observeEvent("onOpenMygraphs",function(){if(e.isLoggedIn()&&12e4<e.graphsController.millisecondsSinceSync())return e.graphsController.refreshGraphs()}),this.mygraphsController.observeEvent("triggerRender",function(){e.triggerRender()}),this.userController.observeEvent("loginChanged",function(){e.mygraphsController.recoveryAttempted=!1,e.isLoggedIn()?e.graphsController.refreshGraphs():e.graphsController.clear(),e.mustConsentToCollection()&&e.showModal("consent")}),this.userController.observeEvent("userUpdated",function(){"consent"===e.getOpenModal()&&e.closeModal()}),this.userController.observeEvent("triggerRender",function(){e.triggerRender()}),this.graphsController.observeEvent("triggerRender",function(){e.triggerRender()})},d.prototype.hookupHotkeys=function(){var s=this;n(document).on("keydown",function(e){var t=e.ctrlKey,o=e.metaKey,r=e.altKey,n=i.IS_APPLE?!t&&o&&!r:t&&!o&&!r;if(n)switch(a.lookupChar(e)){case"S":return e.shiftKey?s.dispatch({type:"edit-title",device:"keyboard"}):s.dispatch({type:"save-graph",device:"keyboard"}),!1;case"O":return s.dispatch({type:"open-mygraphs",device:"keyboard"}),!1}})},d.prototype.disablePrintAndExport=function(){this._disablePrintAndExport=!0},d.prototype.shouldDisablePrintAndExport=function(){return!!this._disablePrintAndExport},d.prototype.getOpenMenu=function(){return this._openMenu},d.prototype.getOpenModal=function(){return this._openModal},d.prototype.hasOpenModal=function(){return"none"!==this._openModal},d.prototype.getModalDevice=function(){return this._modalDevice},d.prototype.getModalStartingError=function(){return this._modalStartingError},d.prototype.closeModal=function(){this._openModal=this.mustConsentToCollection()?"consent":"none",this._modalStartingError="",this.triggerRender()},d.prototype.closeMenu=function(){this._openMenu="none"},d.prototype.showModal=function(e,t,o){this.closeMenu(),this._modalDevice=t||"none",this._modalStartingError=o||"",this._openModal=e},d.prototype.setOpenMenu=function(e){var t=this.getOpenMenu();this._openMenu=e===t?"none":e},d.prototype.getProduct=function(){return this.product},d.prototype.saveRecoveryState=function(){var e=n.Deferred();e.reject();var t=e.promise();if(!this.userController.isLoggedIn()||!this.graphsController.hasUnsavedChanges())return t;var o=this.graphsController.api.getState();if(s.isEqual(o,this.lastRecoveryState))return t;var r=this.graphsController.saveRecoveryGraph();return this.lastRecoveryState=o,r},d.prototype.checkRecoveryState=function(){var e=this;setTimeout(function(){e.checkRecoveryState(),e.saveRecoveryState()},u)},d.prototype.isLoggedIn=function(){return this.userController.isLoggedIn()},d.prototype.hasConsentedToCollection=function(){return this.userController.hasConsentedToCollection()},d.prototype.isInMaintenanceMode=function(){return t.get("maintenance")},d.prototype.getPreviewParams=function(){return t.get("previewMode")?{url:t.get("previewFeedbackUrl"),message:t.get("previewMessage")}:null},d.prototype.isDecimalToFractionEnabled=function(){return!!t.get("decimalToFraction")},d.prototype.saveGraph=function(e,t){this.isLoggedIn()?(this.graphsController.save({newTitle:null!=t?t.title:void 0,saveCopy:!(null==t||!t.saveAs)}),this.closeModal()):this.showModal("signup",e)},d.prototype.simpleSave=function(){this.graphsController.isCurrentGraphTitled()||this.openSaveDialog(),this.graphsController.save(),this.dispatch({type:"render"})},d.prototype.openSaveDialog=function(){this.showModal("save"),this.dispatch({type:"render"})},d.prototype.launchEditTitle=function(){this.closeMenu(),null!=this.getPreviewParams()||this.isInMaintenanceMode()||(this.isLoggedIn()?this.showModal("save"):this.showModal("signup"))},d.prototype.getOpenText=function(){return"graphing"===this.product||"graphing3d"===this.product?this.s("account-shell-button-open-graph"):"geometry"===this.product?this.s("account-shell-button-open-construction"):""},d.prototype.isConsentingToCollection=function(){return this.userController.isConsentingToPrivacy()},d.prototype.privacyConsentFailed=function(){return this.userController.didPrivacyConsentFail()},d.prototype.mustConsentToCollection=function(){return this.isLoggedIn()&&!this.hasConsentedToCollection()},d.prototype.isArtContestEnabled=function(){return!1},d.prototype.isGraphComplexEnoughForContest=function(){var e=this.api.getState().expressions.list;return 1!==e.length||"expression"!==e[0].type||!!e[0].latex},d.prototype.getLimitedSignupRole=function(){return"student"},d.prototype.wasModalOpenedWithKeyboard=function(){return"keyboard"===this._modalDevice},d.prototype.allowSignInWithApple=function(){return!0},d.prototype.getSomethingWentWrongText=function(){return this.s("account-shell-error-unknown")},d.prototype.logJSON=function(e,t){o.logJSON(e,t)},d.prototype.parseJSONErrors=function(e){return p.parseJSONErrors(e)},d);function d(e){var o=this;this.userController=e.userController,this.graphsController=e.graphsController,this.tourController=e.tourController,this.languageController=e.languageController,this.mygraphsController=e.mygraphsController,this.api=e.api,this.raw=e.raw,this.s=e.s,this.getLanguage=e.getLanguage,this.unpack=e.unpack,this.product=e.product,this.SOMETHING_WENT_WRONG=this.s("account-shell-error-unknown"),this._modalStartingError="",this._openModal="none",this._modalDevice="none",this._openMenu="none",this.state={},this.countryCode=n("body").attr("data-country"),this.languageController&&this.languageController.setHeaderController(this),this.hookupControllers(),this.hookupHotkeys(),this.dispatcher=new r.Dispatcher,this.dispatch=function(e){return l.leaveBreadcrumb("dispatch::header-controller",e),o.dispatcher.dispatch(e)},this.dispatcher.register(function(e){switch(e.type){case"save-graph":o.saveGraph(e.device,e.payload);break;case"edit-title":o.launchEditTitle();break;case"close-modal":o.closeModal();break;case"toggle-menu":o.setOpenMenu(e.payload);break;case"open-mygraphs":o.mygraphsController.openMygraphs(e);break;case"close-mygraphs":o.mygraphsController.closeMygraphs();break;case"render":break;case"show-modal":var t=e.modal;o.showModal(t,e.device,e.error);break;default:return e}return o.triggerRender()}),this.lastRecoveryState={},this.checkRecoveryState()}e.Controller=c});
define('main/globalhotkeys',["require","exports","browser","keys","jquery","lib/aria"],function(require,t,h,n,p,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=0,e=(r.prototype.remove=function(){this.stopListening()},r.prototype.startListening=function(){var e=this;this.isListening||(p(document).on("keydown.dcg-global-keyboard-listener-"+this.__id,function(t){return e.handleGlobalKeydown(t)}),this.isListening=!0)},r.prototype.stopListening=function(){this.isListening&&(p(document).off("keydown.dcg-global-keyboard-listener-"+this.__id),this.isListening=!1)},r.prototype.handleGlobalKeydown=function(t){var e,o=!1;t.ctrlKey||t.altKey||t.metaKey||t.shiftKey||n.lookup(t)!==n.ESCAPE?n.isHelp(t)?(t.preventDefault(),t.stopPropagation(),o=!0,this.headerController.dispatch({type:"show-modal",modal:"hotkeys",device:"keyboard"})):t.ctrlKey&&(t.altKey||t.metaKey)&&!t.shiftKey&&("A"===n.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),o=!0,this.userController.isLoggedIn()?this.focusElement(p(document).find(".dcg-account-link"),this.controller.s("graphing-calculator-narration-unable-to-activate-account-menu")):(e=p(document).find(".dcg-sign-in"),this.triggerKeyboardTapEvent(e))):"L"===n.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),o=!0,this.focusElement(p(document).find(".dcg-action-language"),this.controller.s("graphing-calculator-narration-unable-to-activate-language-menu"))):"H"===n.lookupChar(t)?(t.preventDefault(),t.stopPropagation(),o=!0,this.focusElement(p(document).find(".dcg-action-help"),this.controller.s("graphing-calculator-narration-unable-to-activate-help-menu"))):"S"===n.lookupChar(t)&&(t.preventDefault(),t.stopPropagation(),o=!0,this.focusElement(p(document).find(".dcg-action-share"),this.controller.s("graphing-calculator-narration-unable-to-activate-share-menu")))):o=this.handleEscape(t),o||this.instanceHotkeys.handleKeydown(t)},r.prototype.handleEscape=function(t){var e,o,n,i=!1,r=p(".action-close-modal:visible, .dcg-shared-close-cross:visible"),a=!!r.length,s=!!p(".graph-preview").length,l=p(".dcg-action-close-resources:visible"),c=this.mygraphsController.isMygraphsOpen();return a?e=r:(s||c)&&(e=l),e&&(this.triggerKeyboardTapEvent(e),h.IS_MOBILE||(s||a&&c?a&&c&&p(".new-blank-graph").focus():(o=this.controller.getSelectedItem())?this.controller.dispatch({type:"move-focus-to-item",id:o.id}):(n=this.controller.getItemModelByIndex(0))&&this.controller.dispatch({type:"move-focus-to-item",id:n.id})),t.preventDefault(),t.stopPropagation(),i=!0),i},r.prototype.triggerKeyboardTapEvent=function(t){var e=p.Event("dcg-tap");e.device="keyboard",t.trigger(e)},r.prototype.focusElement=function(t,e){t.length?this.triggerKeyboardTapEvent(t):e&&o.alert(e)},r);function r(t,e,o){this.__id=i++,this.controller=t,this.headerController=e,this.userController=e.userController,this.mygraphsController=e.mygraphsController,this.instanceHotkeys=o,this.startListening()}t.default=e});

define('loadcss!main', function(){});
define('main/instantiate-top-level-components',['require','config','underscore','main/user_controller','main/graphs_controller','main/language_controller','main/mygraphs_controller','tours/tour_controller','calculator-shell/controller','main/globalhotkeys','browser','ipad.scrollfix','loadcss!main','api/calculator'],function(require){"use strict";var m=require("config"),b=require("underscore"),w=require("main/user_controller").UserController,y=require("main/graphs_controller").GraphsController,C=require("main/language_controller").default,f=require("main/mygraphs_controller"),_=require("tours/tour_controller"),E=require("calculator-shell/controller").Controller,S=require("main/globalhotkeys").default,k=require("browser"),G=require("ipad.scrollfix");require("loadcss!main");var x=require("api/calculator");return function(e){var r=m.all(),o=JSON.parse(e.exampleGraphsRaw);r.disableScrollFix||G.limitScrollOnDocument(),r.redrawSlowly=!k.IS_MOBILE,r.border=!1,r.disableScrollFix=!0,r.showHamburger=!0,e.calcOptions&&(r=b.extend(r,e.calcOptions));var a=document.getElementById("graph-container"),t=x.Calculator(a,r,e.onCalcReady),n=_(t);window.tourController=n;var l=new C(t),s=new w,c=l.s.bind(l),i=l.raw.bind(l),h=l.unpack.bind(l),d=new y({api:t,s:c,getLanguage:l.getLanguage.bind(l),examplesJSON:o,randomSeed:e.seed,product:"graphing"});d.observeEvent("driveAccessError",function(e,r){t._calc.controller.dispatch({type:"toast/show",toast:{message:'Error saving. <a href="'+r.authorizeUrl+'" target="_blank" class="dcg-action-hide">Click here</a> to re-authorize Desmos to save graphs to Google Drive.',toastStyle:"error",hideAfter:0}})});var g=f(d,t,c);d.observeEvent("onClearGraph",function(){t.focusFirstExpression()}),g.observeEvent("toast",function(e,r){var o={message:r.message};for(var a in r.opts)r.opts.hasOwnProperty(a)&&(o[a]=r.opts[a]);t._calc.controller.dispatch({type:"toast/show",toast:o})}),d.observeEvent("toast",function(e,r){var o={message:r.message};for(var a in r.opts)r.opts.hasOwnProperty(a)&&(o[a]=r.opts[a]);t._calc.controller.dispatch({type:"toast/show",toast:o})}),d.observeEvent("clearUnsavedChanges",function(){t._calc.controller.dispatch({type:"clear-unsaved-changes"})}),d.observeEvent("clearUndoRedo",function(){t._calc.controller.dispatch({type:"clear-undoredo-history"})});var p,u=!1;t._calc.controller.subToChanges(function(){var e=t._calc.controller.hasUnsavedChanges();e!==u&&v.triggerRender(),u=e}),t.hasUnsavedChanges=function(){return t._calc.controller.hasUnsavedChanges()},!(t.controller.triggerEasterEgg=function(e){var r="betchacant"===e?t.controller.s("account-shell-label-betchacant-loading"):t.controller.s("account-shell-label-loading"),o=d.getEasterEggGraphs(e);0!==o.length&&(p=Math.floor(Math.random()*o.length),t.controller.dispatch({type:"toast/show",toast:{message:r,hideAfter:0,toastStyle:"cover"}}),d.loadGraphImmediately(o[p]).done(function(){g.openGraphBehindCover(o[p])}))})!==m.get("expressions")&&(t.controller.triggerClearGraph=function(){d.clearGraphByUserAction()},t.observeEvent("openDrawer",function(){v.dispatch({type:"open-mygraphs"})}));var v=new E({userController:s,graphsController:d,tourController:n,languageController:l,mygraphsController:g,api:t,s:c,raw:i,unpack:h,getLanguage:l.getLanguage.bind(l),product:"graphing"});return t._calc.globalHotkeys=new S(t._calc.controller,v,t._calc.instanceHotkeys),t._calc.controller.setCanShowKeyboardShortcuts(!0),t.observeEvent("showHotkeysModal",function(){v.dispatch({type:"show-modal",modal:"hotkeys",device:"keyboard"})}),window.userController=s,window.headerController=v,{Calc:t,userController:s,graphsController:d,tourController:n,headerController:v}}});
define('main/calc_desktop',['require','jquery','browser','main/load_data','config','loadcss!print','lib/i18n','main/graph','text!example_graphs','api/calculator','main/external-login-popup','analytics/looker','dcgview','calculator-shell/wrapper','calculator-shell/modals','mygraphs/wrapper','main/disable-dragdrop-events','vendor/bugsnag','bugsnag','./instantiate-top-level-components'],function(require){"use strict";var s=require("jquery"),i=require("browser"),d=require("main/load_data"),p=require("config");require("loadcss!print");var e=require("lib/i18n"),u=require("main/graph"),g=require("text!example_graphs"),m=require("api/calculator"),h=require("main/external-login-popup"),w=require("analytics/looker").logPageLoad,y=require("dcgview"),f=require("calculator-shell/wrapper").ViewWrapper,v=require("calculator-shell/modals").Modals,x=require("mygraphs/wrapper").MygraphsWrapper,_=require("main/disable-dragdrop-events").default,t=require("vendor/bugsnag"),I=require("bugsnag");function a(e){var t=require("./instantiate-top-level-components")({seed:d.seed,modalContainer:"body",exampleGraphsRaw:g,calcOptions:{pasteGraphLink:!0}}),a=t.Calc;a._calc.controller.setBugsnagContext("main-controller"),a.updateSettings({language:e});var o=t.userController,n=t.graphsController,r=t.tourController,l=t.headerController;function c(e,t){return a._calc.controller.s(e,t)}return I.setBeforeSendCB(function(e){var t=a._calc.controller.stateStack;t&&t.serializeForBugsnag&&(e.metaData.states=t.serializeForBugsnag())}),h.listenForLoginRequests(o,c),p.get("no_navigation_warning")||s(window).on("beforeunload",function(){if(a.hasUnsavedChanges())return c("account-shell-text-confirm-leave")}),d.user&&o.completeLogin(d.user,"load"),d.graph?n.loadGraph(u.fromAjax(d.graph)):(n.clearGraph(),d.latex&&a.setExpression({latex:d.latex})),w({userId:o.getUserId(),desmosLang:e}),r.startTourFromUrl(),o.getEmailChangeToken()&&l.dispatch({type:"show-modal",modal:"change-email",device:"mouse"}),l.triggerRender=function(){a.viewWrapper&&a.viewWrapper.update(),a.modalsView&&a.modalsView.update(),a.myGraphsWrapper&&a.myGraphsWrapper.update(),o.getEmailChangeToken()&&"change-email"!==l.getOpenModal()&&history.replaceState(null,null,document.location.pathname)},a.viewWrapper=y.mountToNode(f,document.getElementById("dcg-header-container"),{controller:function(){return l}}),a.modalsView=y.mountToNode(v,document.getElementById("dcg-modal-container"),{controller:function(){return l}}),a.myGraphsWrapper=y.mountToNode(x,document.getElementById("mygraphs-container"),{controller:y.const(l),makeAPI:function(e){return new m.Calculator(e,{settingsMenu:!1,keypad:!1,zoomButtons:!1,branding:!1,border:!1,disableScrollFix:!0,expressions:!1})}}),!i.IS_ANDROID||i.IS_CHROME||i.IS_FIREFOX||l.dispatch({type:"show-modal",modal:"unsupported-browser"}),document.location.search.match(/(\?|\&)create_account/)?(history.replaceState(null,null,document.location.pathname),o.isLoggedIn()?a._calc.controller.dispatch({type:"toast/show",toast:{message:c("account-shell-text-logged-in")}}):l.dispatch({type:"show-modal",modal:"signup",device:"mouse"})):document.location.search.match(/(\?|\&)login/)?(history.replaceState(null,null,document.location.pathname),o.isLoggedIn()?a._calc.controller.dispatch({type:"toast/show",toast:{message:c("account-shell-text-logged-in")}}):l.dispatch({type:"show-modal",modal:"login"})):document.location.search.match(/(\?|\&)reset_password/)&&(history.replaceState(null,null,document.location.pathname),o.isLoggedIn()?a._calc.controller.dispatch({type:"toast/show",toast:{message:c("account-shell-text-logged-in")}}):l.dispatch({type:"show-modal",modal:"recover-password"})),window.matchMedia&&window.matchMedia("print").addListener(function(e){e.matches?a._calc.controller.dispatch({type:"enter-printmode"}):a._calc.controller.dispatch({type:"exit-printmode"})}),_(s(document)),a}p.get("testing")||I.init(t);var o=e.detectLanguage();return e.fetchLanguage(o).then(function(){return a(o)},function(){return a("en")})});
define('main/noconflict',['require','jquery','underscore'],function(require){"use strict";var e=require("jquery"),s=require("underscore");return"undefined"==typeof Desmos&&(Desmos={}),function(){Desmos.$=e,Desmos._=s,Desmos.$.noConflict(!0)}});
define("toplevel/calculator_desktop",['require','testbridge','touchtracking','main/calc_desktop','main/noconflict'],function(require){"use strict";require("testbridge"),require("touchtracking").monitor(document.body);var t=require("main/calc_desktop");return require("main/noconflict")(),t});
